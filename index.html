<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>多云熊聊天界面</title>
  <style>/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** css ./node_modules/.pnpm/css-loader@7.1.2_webpack@5.101.3/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[1]!./node_modules/.pnpm/postcss-loader@8.1.1_postcs_7e5278d575df5928f9b244ea375b369e/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[2]!./node_modules/.pnpm/sass-loader@16.0.5_sass@1.90.0_webpack@5.101.3/node_modules/sass-loader/dist/cjs.js!./src/多云熊/备份/给rovo的/备份.scss ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
@charset "UTF-8";.status-bar{position:absolute;top:0;left:0;width:100%;height:1.5rem;background:rgba(0,0,0,0.5);display:flex;justify-content:space-between;align-items:center;padding:0 1rem;color:#fff;font-size:0.75rem;z-index:1000;flex-shrink:0}.status-bar .status-bar-left{display:flex;align-items:center;gap:0.25rem}.status-bar .status-bar-right{display:flex;align-items:center;gap:0.5rem}.status-bar .status-icon-svg{width:1rem;height:1rem;fill:#fff;flex-shrink:0}.has-status-bar{padding-top:1.5rem}.chat-container .status-bar{position:relative;background:#000}:root{--scale-factor:1;--base-desktop:16px;--base-mobile:14px;--base-small:12px}html{font-size:calc(var(--base-desktop) * var(--scale-factor))}@media (max-width:480px){html{font-size:calc(var(--base-mobile) * var(--scale-factor))}}@media (max-width:360px){html{font-size:calc(var(--base-small) * var(--scale-factor))}}*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}body{display:flex;justify-content:center;align-items:center}.phone-container{width:min(100%,22.5rem);aspect-ratio:9/18.5;border:0.75rem solid #363636;border-radius:2.25rem;background-image:url("https://files.catbox.moe/kyeqkf.jpg");background-size:cover;position:relative;margin:0.9375rem;box-shadow:0 0 20px rgba(0,0,0,0.1);display:flex}.phone-charm{position:absolute;top:-0.75rem;right:-2.8125rem;width:10.625rem;height:10.625rem;background-image:url("https://files.catbox.moe/7ozygy.gif");background-size:contain;background-repeat:no-repeat;z-index:1000;pointer-events:none}.phone-notch{position:absolute;top:0;left:50%;transform:translateX(-50%);width:10rem;height:0.8125rem;background:#363636;border-bottom-left-radius:0.75rem;border-bottom-right-radius:0.75rem;z-index:999;display:flex;justify-content:center;align-items:center;gap:0.5rem}.notch-camera,.notch-sensor{width:0.5rem;height:0.5rem;background:#222;border-radius:50%;border:2px solid #444}.notch-sensor{width:0.375rem;height:0.375rem;border:1px solid #444}.notch-speaker{width:2.5rem;height:0.25rem;background:#222;border-radius:2px}.interface-container{width:100%;height:100%;border-radius:1.5rem;overflow:hidden;position:relative;font-family:-apple-system,"Segoe UI","Hiragino Kaku Gothic ProN",sans-serif}.chat-container{width:100%;height:100%;background-image:url("https://files.catbox.moe/ctdr65.jpeg");background-size:cover;background-position:center;border-radius:1.5rem;overflow:hidden;font-family:-apple-system,"Segoe UI","Hiragino Kaku Gothic ProN",sans-serif;display:flex;flex-direction:column}.chat-container .status-bar{position:relative;width:100%;height:1.5rem;background:rgba(0,0,0,0.5);display:flex;justify-content:space-between;align-items:center;padding:0 1rem;color:#fff;font-size:0.75rem;z-index:1;flex-shrink:0}.chat-container .status-bar .status-bar-left{display:flex;align-items:center;gap:0.25rem}.chat-container .status-bar .status-bar-right{display:flex;align-items:center;gap:0.5rem}.chat-container .status-bar .status-icon-svg{width:1rem;height:1rem;fill:#fff}.chat-header{height:3.5rem;background:rgba(255,255,255,0.95);padding:0 1rem;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid rgba(0,0,0,0.05);backdrop-filter:blur(0.625rem)}.chat-header h2{font-size:1rem;color:#333;font-weight:600;margin-bottom:0.125rem}.header-info{display:flex;align-items:center;gap:0.75rem}.header-avatar{width:2.25rem;height:2.25rem;border-radius:50%;object-fit:cover;border:2px solid #fff;box-shadow:0 2px 4px rgba(0,0,0,0.1);cursor:pointer;transition:transform 0.2s}.header-avatar:hover{transform:scale(1.1)}.header-text{display:flex;flex-direction:column}.header-status{font-size:0.75rem;color:#4caf50;display:flex;align-items:center;gap:0.25rem}.status-dot{width:0.375rem;height:0.375rem;background:#4caf50;border-radius:50%}.header-icons{display:flex;gap:1rem;position:relative;z-index:2}.header-icon{width:1.5rem;height:1.5rem;color:#666;cursor:pointer;position:relative;z-index:2;transition:all 0.2s}.header-icon:hover{color:#6c8cd5;transform:scale(1.1)}.status-bar{height:2.75rem;background:#000;display:flex;justify-content:center;align-items:center;color:white;font-size:0.875rem;font-weight:600}.nav-bar{height:3.75rem;background:#fff;border-bottom:1px solid #e0e0e0;display:flex;align-items:center;justify-content:space-between;padding:0 1rem}.nav-bar .nav-title{font-size:1.125rem;font-weight:600;color:#333}.nav-bar .nav-button{width:2rem;height:2rem;border:none;background:none;cursor:pointer;display:flex;align-items:center;justify-content:center;border-radius:1rem;transition:background-color 0.2s}.nav-bar .nav-button:hover{background-color:#f0f0f0}.chat-area{flex:1;overflow-y:auto;padding:1rem;background:#f5f5f5}.input-area{background:white;border-top:1px solid #e0e0e0;padding:0.75rem 1rem;display:flex;align-items:center;gap:0.5rem;min-height:3.75rem}.plus-button{width:2rem;height:2rem;border:none;background:#007aff;color:white;border-radius:1rem;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:1.125rem;transition:background-color 0.2s}.plus-button:hover{background:#0056cc}.message-input{flex:1;border:1px solid #e0e0e0;border-radius:1.25rem;padding:0.5rem 1rem;font-size:1rem;outline:none;resize:none;min-height:2.25rem;max-height:6.25rem}.message-input:focus{border-color:#007aff}.send-button{width:2rem;height:2rem;border:none;background:#007aff;color:white;border-radius:1rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background-color 0.2s}.send-button:hover{background:#0056cc}.send-button:disabled{background:#ccc;cursor:not-allowed}.chat-list{width:100%;height:100%;background:white;position:absolute;top:0;left:0;z-index:10;display:none}.chat-list.active{display:flex;flex-direction:column}.chat-list-item{padding:1rem;border-bottom:1px solid #f0f0f0;cursor:pointer;display:flex;align-items:center;gap:0.75rem;transition:background-color 0.2s}.chat-list-item:hover{background-color:#f8f8f8}.chat-list-item .chat-avatar{width:3.125rem;height:3.125rem;border-radius:1.5625rem;object-fit:cover}.chat-list-item .chat-info{flex:1}.chat-list-item .chat-info .chat-name{font-size:1rem;font-weight:600;color:#333;margin-bottom:0.25rem}.chat-list-item .chat-info .chat-preview{font-size:0.875rem;color:#666;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.chat-list-item .chat-time{font-size:0.75rem;color:#999}.plus-menu{position:absolute;bottom:3.5rem;left:1rem;transform:translateY(0.5rem) scale(0.9);background:white;border-radius:1.25rem;box-shadow:0 3px 15px rgba(0,0,0,0.12);padding:0.375rem 0.625rem;z-index:100;opacity:0;transition:all 0.25s ease-out;display:none;flex-direction:row;align-items:center;gap:0.1875rem}.plus-menu.active{display:flex}.plus-menu.show{opacity:1;transform:translateY(0) scale(1)}.menu-item{display:flex;align-items:center;justify-content:center;width:2.375rem;height:2.375rem;cursor:pointer;border-radius:50%;transition:all 0.2s ease;position:relative;flex-shrink:0}.menu-item:hover{background-color:#f0f0f0;transform:scale(1.1)}.menu-item:active{transform:scale(0.95)}.menu-item .menu-icon{display:flex;align-items:center;justify-content:center;width:auto;height:auto;color:#666;transition:color 0.2s ease}.menu-item .menu-icon svg{width:1.125rem;height:1.125rem;display:block;margin:0}.menu-item[data-type=sticker] .menu-icon{color:#ff9800}.menu-item[data-type=image] .menu-icon{color:#2dbccf}.menu-item[data-type=voice] .menu-icon{color:#2196f3}.menu-item[data-type=transfer] .menu-icon{color:#f44336}.menu-item[data-type=location] .menu-icon{color:#4caf50}.menu-item:hover[data-type=sticker]{background-color:rgba(255,152,0,0.1)}.menu-item:hover[data-type=image]{background-color:rgba(0,188,212,0.1)}.menu-item:hover[data-type=voice]{background-color:rgba(33,150,243,0.1)}.menu-item:hover[data-type=transfer]{background-color:rgba(244,67,54,0.1)}.menu-item:hover[data-type=location]{background-color:rgba(76,175,80,0.1)}.transfer-modal{position:relative;background:white;border-radius:1rem;padding:1.25rem;width:17.5rem;max-width:90%;box-shadow:0 10px 25px rgba(0,0,0,0.2);z-index:1000;animation:modalFadeIn 0.3s ease-out}.modal-overlay{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);z-index:999;display:flex;align-items:center;justify-content:center;border-radius:1.5rem;opacity:0;transition:opacity 0.3s ease;overflow:hidden;touch-action:none}.modal-overlay.show{opacity:1}.modal-container{background:white;border-radius:1rem;padding:1.5rem;width:18.75rem;max-width:90%;box-shadow:0 10px 25px rgba(0,0,0,0.2);animation:modalFadeIn 0.3s ease-out;max-height:80%;overflow:hidden}.modal-title{font-size:1.125rem;font-weight:600;color:#333;margin-bottom:1rem;text-align:center}.modal-content{margin-bottom:1rem}.image-input-modal .modal-content,.voice-input-modal .modal-content,.location-input-modal .modal-content,.transfer-input-modal .modal-content{display:flex;flex-direction:column}.image-upload-section{margin-bottom:1rem}.upload-options{display:flex;flex-direction:column;gap:0.5rem;margin-top:0.5rem}.upload-options .upload-row{display:flex;align-items:center;gap:0.5rem}.upload-btn{background:#f0f0f0;color:#666;border:1px solid #ddd;padding:0.375rem 0.75rem;border-radius:0.5rem;cursor:pointer;font-size:0.75rem;transition:all 0.2s ease;white-space:nowrap;flex-shrink:0}.upload-btn:hover{background:#e8e8e8;border-color:#ccc;color:#555}.upload-btn:active{background:#ddd;transform:translateY(0.0625rem)}.upload-divider{color:#999;font-size:0.75rem;flex-shrink:0}.url-input{flex:1;min-width:7.5rem;font-size:0.875rem}.file-preview{margin-top:0.75rem;padding:0.75rem;border:1px dashed rgba(108,140,213,0.2);border-radius:0.5rem;background:rgba(108,140,213,0.1);display:flex;align-items:center;gap:0.75rem}.file-preview img{width:3.125rem;aspect-ratio:1;object-fit:cover;border-radius:0.375rem;border:1px solid #ddd}.file-preview .file-info{flex:1;display:flex;align-items:center;justify-content:space-between}.file-preview .file-info span{color:#555;font-size:0.8125rem;font-weight:500;word-break:break-all}.file-preview .remove-file-btn{background:#f5f5f5;color:#999;border:1px solid #ddd;width:1.25rem;aspect-ratio:1;border-radius:50%;cursor:pointer;font-size:0.75rem;display:flex;align-items:center;justify-content:center;transition:all 0.2s ease}.file-preview .remove-file-btn:hover{background:#ff4757;color:white;border-color:#ff4757}#imageInputModalTemplate .modal-label,.image-input-modal .modal-label,.modal-container .modal-label,[id*=imageInput] .modal-label{display:block;margin-bottom:0.5rem;font-weight:600;color:#333;font-size:0.875rem}#imageInputModalTemplate .modal-label.modal-label-spaced,.image-input-modal .modal-label.modal-label-spaced,.modal-container .modal-label.modal-label-spaced,[id*=imageInput] .modal-label.modal-label-spaced{margin-top:1rem}.modal-input{width:100%;padding:0.75rem;border:1px solid #ddd;border-radius:0.5rem;font-size:0.875rem;margin-bottom:0.75rem;outline:none;transition:border-color 0.2s}.modal-input:focus{border-color:#6c8cd5;box-shadow:0 0 0 0.125rem rgba(108,140,213,0.2)}.modal-input::placeholder{color:#999}.modal-input[type=number]{-moz-appearance:textfield}.modal-input[type=number]::-webkit-outer-spin-button,.modal-input[type=number]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.modal-buttons{display:flex;gap:0.75rem;justify-content:flex-end;margin-top:1rem}.modal-btn{padding:0.625rem 1.25rem;border:none;border-radius:0.5rem;font-size:0.875rem;font-weight:600;cursor:pointer;transition:all 0.2s;min-width:5rem}.modal-btn.cancel-btn{background:#f0f0f0;color:#666;border:1px solid #ddd}.modal-btn.cancel-btn:hover{background:#e0e0e0}.modal-btn.confirm-btn{background:#6c8cd5;color:white}.modal-btn.confirm-btn:hover{background:#5a7bc4}@keyframes modalFadeIn{from{opacity:0;transform:scale(0.9)}to{opacity:1;transform:scale(1)}}.chat-area::-webkit-scrollbar{width:4px}.chat-area::-webkit-scrollbar-track{background:transparent}.chat-area::-webkit-scrollbar-thumb{background:rgba(0,0,0,0.2);border-radius:2px}.chat-area::-webkit-scrollbar-thumb:hover{background:rgba(0,0,0,0.3)}.chat-messages{flex:1;padding:1rem;overflow-y:auto}.chat-messages::-webkit-scrollbar{width:0px}.chat-messages::-webkit-scrollbar-track{background:transparent}.chat-messages::-webkit-scrollbar-thumb{background:transparent;border-radius:0.1875rem}.chat-messages::-webkit-scrollbar-thumb:hover{background:transparent}.message{display:flex;margin-bottom:0.5rem;align-items:flex-start;position:relative;animation:message-pop 0.3s ease-out}.message.sent{flex-direction:row-reverse}.message.sent .message-content{background:linear-gradient(135deg,#6c8cd5,#4a6fbf);color:#fff;border-bottom-right-radius:0.25rem}.message.sent .message-time{text-align:right}.message.received .message-content{background:#fff;color:#333;box-shadow:0 2px 4px rgba(0,0,0,0.05);border-bottom-left-radius:0.25rem}.message.group-message.received .message-content{border-bottom-left-radius:1.125rem;border-top-left-radius:0.25rem}@keyframes message-pop{0%{transform:translateY(0.625rem);opacity:0}100%{transform:translateY(0);opacity:1}}.avatar{width:2.25rem;height:2.25rem;border-radius:50%;margin-top:0.25rem;box-shadow:0 2px 4px rgba(0,0,0,0.1);border:2px solid #fff;transition:transform 0.2s;cursor:pointer;object-fit:cover}.avatar:hover{transform:scale(1.1)}.message-wrapper{max-width:70%;display:flex;flex-direction:column;margin:0 0.625rem}.message-content,.message-bubble{padding:0.625rem 0.875rem;border-radius:1.125rem;font-size:0.875rem;line-height:1.4;word-wrap:break-word;box-shadow:0 1px 2px rgba(0,0,0,0.1);position:relative;transition:transform 0.2s;cursor:pointer;animation:messageSlideIn 0.3s ease-out}.message-content:hover,.message-bubble:hover{transform:translateY(-0.125rem)}.message-time{font-size:0.6875rem;color:#888;margin-top:0.25rem;margin-left:0.25rem;margin-right:0.25rem}.chat-input{height:3.25rem;background:rgba(255,255,255,0.95);padding:0.5rem 1rem;display:flex;align-items:center;gap:0.5rem;border-top:1px solid rgba(0,0,0,0.05);backdrop-filter:blur(0.625rem);position:relative;border-bottom-left-radius:1.5rem;border-bottom-right-radius:1.5rem}.plus-btn{width:2rem;height:2rem;border:none;border-radius:50%;background:#f5f5f5;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.2s;color:#666;flex-shrink:0}.plus-btn:hover{background:#e0e0e0;transform:scale(1.1)}.input-field{flex:1;height:2.25rem;border:1px solid rgba(0,0,0,0.1);border-radius:1.125rem;background:#fff;padding:0 1rem;outline:none;font-size:0.875rem;color:#333;transition:all 0.2s;margin-right:0.5rem;max-width:calc(100% - 6rem)}.input-field:focus{border-color:#6c8cd5;box-shadow:0 0 0 2px rgba(108,140,213,0.2)}.input-field::placeholder{color:#999}.send-btn{width:2.25rem;height:2.25rem;border:none;border-radius:50%;background:#6c8cd5;color:white;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.2s;flex-shrink:0}.send-btn:hover{background:#4a6fbf;transform:scale(1.1)}@keyframes menuSlideUp{from{opacity:0;transform:translateY(0.625rem)}to{opacity:1;transform:translateY(0)}}@media screen and (max-width:25rem){.phone-container{margin:0.625rem;border-width:0.5rem;width:calc(100% - 1.25rem)}.message-content{font-size:0.8125rem}.input-field{max-width:calc(100% - 5.5rem)}}.user_avatar{background-size:cover;background-position:center}.message-image{max-width:9.375rem;max-height:9.375rem;border-radius:0.5rem;display:block;margin:0 auto;object-fit:cover}.error-text{color:#999;font-style:italic}.random-image-container{display:inline-block;position:relative;min-width:6.25rem;max-width:100%;min-height:6.25rem;max-height:8.125rem;border:2px solid transparent;border-radius:0.9375rem;margin:0 0 -0.375rem 0;overflow-y:auto;box-shadow:0 4px 8px rgba(255,182,193,0.4);background-color:rgba(255,255,255,0.8);backdrop-filter:blur(0.3125rem);scrollbar-width:none;-ms-overflow-style:none}.random-image-container .random-image-container::-webkit-scrollbar{display:none}.random-image-container details{position:absolute;top:0;left:0;width:100%;height:100%;cursor:pointer}.random-image-container details summary{list-style:none;width:100%;height:100%}.random-image-container details .attachment-content{position:absolute;top:0.125rem;left:0.125rem;right:0.125rem;background:linear-gradient(135deg,rgba(255,192,203,0.4),rgba(255,182,193,0.4));color:#333333;padding:0.5rem;border-radius:0.75rem;text-align:center}.random-image-container details .attachment-content .attachment-text{border:1px solid rgba(255,192,203,0.3);padding:0.75rem 0.5rem;width:calc(100% - 0.1875rem);text-align:center;word-wrap:break-word;border-radius:0.625rem;background:rgba(255,255,255,0.98);box-shadow:inset 0 0 8px rgba(255,192,203,0.2)}.random-image-container details .attachment-content .attachment-text p{margin:0;font-family:-apple-system,"Segoe UI","Hiragino Kaku Gothic ProN",sans-serif;font-size:0.6875rem}.message-sticker{max-width:6.25rem;max-height:6.25rem;width:auto;height:auto;object-fit:contain;border-radius:0.5rem}.transfer-bubble{background:#f8f8f8;border-radius:0.75rem;padding:0.625rem;width:7.8125rem;cursor:pointer;transition:all 0.3s}.transfer-bubble:hover{background:#f0f0f0}.transfer-bubble .transfer-content{display:flex;align-items:center;gap:0.5rem}.transfer-bubble .transfer-content .transfer-icon{width:1.75rem;height:1.75rem;background:#6c8cd5;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}.transfer-bubble .transfer-content .transfer-icon svg{width:0.875rem;height:0.875rem;stroke:white;stroke-width:2;fill:none}.transfer-bubble .transfer-content .transfer-info{flex:1;min-width:0}.transfer-bubble .transfer-content .transfer-info .transfer-amount{font-size:0.9375rem;font-weight:600;color:#333;margin-bottom:0.125rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.transfer-bubble .transfer-content .transfer-info .transfer-status{font-size:0.6875rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#666}.transfer-bubble .transfer-content .transfer-info .transfer-status.waiting,.transfer-bubble .transfer-content .transfer-info .transfer-status.pending{color:#ff9800}.transfer-bubble .transfer-content .transfer-info .transfer-status.accepted,.transfer-bubble .transfer-content .transfer-info .transfer-status.completed{color:#4caf50}.transfer-bubble .transfer-content .transfer-info .transfer-status.rejected,.transfer-bubble .transfer-content .transfer-info .transfer-status.failed{color:#f44336}.voice-message{display:flex;align-items:center;gap:0.5rem;cursor:pointer;transition:all 0.2s ease}.voice-message:hover{transform:scale(1.02)}.voice-message .voice-icon{width:1.25rem;height:1.25rem;color:#6c8cd5;flex-shrink:0;transition:color 0.2s ease;position:relative}.voice-message .voice-icon .mic-icon,.voice-message .voice-icon .pause-icon{transition:opacity 0.2s ease}.voice-message .voice-icon .pause-icon{display:none}.voice-message.expanded .voice-icon .mic-icon{display:none}.voice-message.expanded .voice-icon .pause-icon{display:block}.voice-message .voice-wave-container{display:flex;align-items:center;gap:0.125rem;height:1.25rem;margin:0 0.25rem}.voice-message .voice-wave{width:0.1875rem;background:linear-gradient(to top,#6c8cd5,#8fa4e3);border-radius:2px;transform-origin:bottom}.voice-message .voice-wave:nth-child(1){height:0.5rem;animation-delay:0s}.voice-message .voice-wave:nth-child(2){height:0.75rem;animation-delay:0.1s}.voice-message .voice-wave:nth-child(3){height:1rem;animation-delay:0.2s}.voice-message .voice-wave:nth-child(4){height:0.75rem;animation-delay:0.3s}.voice-message .voice-wave:nth-child(5){height:0.5rem;animation-delay:0.4s}.voice-message .voice-duration{font-size:0.875rem;color:inherit;font-weight:500}.voice-message.expanded .voice-wave{animation:voiceWave 1.5s ease-in-out infinite}.voice-message.expanded .voice-wave:nth-child(1){animation-delay:0s}.voice-message.expanded .voice-wave:nth-child(2){animation-delay:0.1s}.voice-message.expanded .voice-wave:nth-child(3){animation-delay:0.2s}.voice-message.expanded .voice-wave:nth-child(4){animation-delay:0.3s}.voice-message.expanded .voice-wave:nth-child(5){animation-delay:0.4s}.message.sent .voice-message .voice-icon{color:#fff}.message.sent .voice-message .voice-wave{background:linear-gradient(to top,#fff,rgba(255,255,255,0.8))}.message.sent .voice-message .voice-duration{color:#fff}@keyframes voiceWave{0%,100%{transform:scaleY(0.3);opacity:0.7}50%{transform:scaleY(1);opacity:1}}.voice-transcript{margin-top:0.5rem;padding:0.5rem 0.75rem;background:rgba(108,140,213,0.1);border-radius:0.75rem;font-size:0.8125rem;color:#666;font-style:italic;display:none}.voice-transcript.show{display:block;animation:fadeIn 0.3s ease-out}.message.sent .voice-transcript{background:rgba(255,255,255,0.2);color:rgba(255,255,255,0.9)}@keyframes fadeIn{from{opacity:0;transform:translateY(-0.3125rem)}to{opacity:1;transform:translateY(0)}}.location-message{display:flex;align-items:center;gap:0.5rem;cursor:pointer}.location-message .location-icon{width:1.25rem;height:1.25rem;color:#4caf50;flex-shrink:0}.location-message .location-text{font-size:0.875rem;color:#666}.message.sent .location-message .location-icon{color:#4ac84e}.message.sent .location-message .location-text{color:#fff}.fade-in{animation:fadeIn 0.3s ease-out}@keyframes fadeIn{from{opacity:0;transform:translateY(0.625rem)}to{opacity:1;transform:translateY(0)}}.message.editing .message-content{background:rgba(255,235,59,0.2) !important;border:2px dashed #ffc107}.message.pending{opacity:0.7}.message.pending .message-content{background:rgba(108,140,213,0.5) !important}.hidden{display:none !important}.visible{display:block !important}.sticker-suggestions{position:absolute;bottom:3.75rem;right:1rem;width:12.5rem;max-width:calc(100% - 2rem);background:white;border-radius:0.5rem;box-shadow:0 3px 15px rgba(0,0,0,0.12);opacity:0;transform:translateY(0.5rem) scale(0.95);transition:all 0.2s ease-out;z-index:1000;border:1px solid rgba(0,0,0,0.08)}.sticker-suggestions.show{opacity:1;transform:translateY(0) scale(1)}.sticker-suggestions .suggestions-header{display:flex;justify-content:space-between;align-items:center;padding:0.375rem 0.5rem;border-bottom:1px solid #f0f0f0;background:#f8f9fa;border-radius:0.5rem 0.5rem 0 0}.sticker-suggestions .suggestions-header .suggestions-title{font-size:0.6875rem;font-weight:600;color:#666}.sticker-suggestions .suggestions-header .suggestions-count{font-size:0.625rem;color:#999;background:#e9ecef;padding:0.0625rem 0.25rem;border-radius:0.5rem}.sticker-suggestions .suggestions-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:0.25rem;padding:0.375rem;max-height:5rem;overflow-y:auto}.sticker-suggestions .suggestions-grid .suggestion-item{aspect-ratio:1;border-radius:0.25rem;overflow:hidden;cursor:pointer;transition:all 0.2s ease;border:1px solid transparent}.sticker-suggestions .suggestions-grid .suggestion-item:hover{transform:scale(1.1);border-color:#6c8cd5;box-shadow:0 1px 4px rgba(108,140,213,0.3)}.sticker-suggestions .suggestions-grid .suggestion-item:active{transform:scale(0.9)}.sticker-suggestions .suggestions-grid .suggestion-item img{width:100%;height:100%;object-fit:cover;display:block}.sticker-suggestions .suggestions-grid::-webkit-scrollbar{width:4px}.sticker-suggestions .suggestions-grid::-webkit-scrollbar-track{background:transparent}.sticker-suggestions .suggestions-grid::-webkit-scrollbar-thumb{background:rgba(0,0,0,0.2);border-radius:2px}.sticker-suggestions .suggestions-grid::-webkit-scrollbar-thumb:hover{background:rgba(0,0,0,0.3)}@media screen and (max-width:25rem){.sticker-suggestions{width:10rem;right:0.5rem}.sticker-suggestions .suggestions-grid{grid-template-columns:repeat(3,1fr);gap:0.1875rem}}.transfer-modal .modal-header{text-align:center;margin-bottom:1rem}.transfer-modal .modal-header .modal-title{font-size:1rem;font-weight:600;color:#333;margin-bottom:0.25rem}.transfer-modal .modal-header .modal-subtitle{font-size:0.8125rem;color:#666}.transfer-modal .modal-amount{text-align:center;font-size:1.75rem;font-weight:600;color:#333;margin:1.25rem 0}.transfer-modal .modal-details{background:#f8f8f8;border-radius:0.75rem;padding:0.75rem;margin-bottom:1.25rem}.transfer-modal .modal-details .detail-row{display:flex;justify-content:space-between;margin-bottom:0.5rem;font-size:0.8125rem}.transfer-modal .modal-details .detail-row:last-child{margin-bottom:0}.transfer-modal .modal-details .detail-row .detail-label{color:#666}.transfer-modal .modal-details .detail-row .detail-value{color:#333;font-weight:500}.transfer-modal .modal-buttons{display:flex;gap:0.75rem}.transfer-modal .modal-buttons .modal-btn{flex:1;padding:0.75rem;border:none;border-radius:0.5rem;font-size:0.875rem;font-weight:600;cursor:pointer;transition:all 0.3s}.transfer-modal .modal-buttons .modal-btn.reject-btn{background:#f0f0f0;color:#666}.transfer-modal .modal-buttons .modal-btn.reject-btn:hover{background:#e0e0e0}.transfer-modal .modal-buttons .modal-btn.accept-btn{background:#6c8cd5;color:white}.transfer-modal .modal-buttons .modal-btn.accept-btn:hover{background:#4a6fbf}.transfer-bubble.user-transfer{cursor:default}.transfer-bubble.user-transfer:hover{background:#f8f8f8}.dynamic-bg{background-image:var(--bg-image);background-size:cover;background-position:center}.message-entering,.message-animation{opacity:0;transform:translateY(0.625rem);transition:opacity 0.3s ease,transform 0.3s ease}.message-entering.message-entered,.message-entering.show,.message-animation.message-entered,.message-animation.show{opacity:1;transform:translateY(0)}.click-feedback,.avatar-click-effect{transform:scale(0.98);transition:transform 0.1s ease}.avatar-click{transform:scale(0.9);transition:transform 0.1s ease}.sticker-animate,.sticker-animation{transform:scale(1.2) rotate(10deg);transition:transform 0.3s ease}.sticker-animate.sticker-animated,.sticker-animate.reset,.sticker-animation.sticker-animated,.sticker-animation.reset{transform:scale(1) rotate(0deg)}.toast-notification,.toast{position:fixed;top:1.25rem;left:50%;transform:translateX(-50%) translateY(-1.25rem);padding:0.75rem 1.25rem;border-radius:0.5rem;color:white;font-size:0.875rem;z-index:10000;opacity:0;transition:all 0.3s ease;pointer-events:none;background:#333}.toast-notification.show,.toast.show{opacity:1;transform:translateX(-50%) translateY(0)}.toast-notification.toast-error,.toast.toast-error{background:#ff4757}.toast-notification.toast-success,.toast.toast-success{background:#2ed573}.toast-notification.toast-warning,.toast.toast-warning{background:#ffa502}.toast-notification.toast-info,.toast.toast-info{background:#3742fa}@keyframes toastSlideIn{from{opacity:0;transform:translateX(-50%) translateY(-0.625rem)}to{opacity:1;transform:translateX(-50%) translateY(0)}}@keyframes toastFadeInOut{0%,100%{opacity:0;transform:translate(-50%,-50%) scale(0.9)}10%,90%{opacity:1;transform:translate(-50%,-50%) scale(1)}}.edit-overlay,.edit-modal-overlay{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:10000;border-radius:1.5rem}.edit-dialog,.edit-modal-dialog{background:white;border-radius:0.75rem;padding:1.25rem;width:18.75rem;max-width:90%;box-shadow:0 10px 25px rgba(0,0,0,0.2);animation:modalFadeIn 0.3s ease-out}.edit-dialog .edit-title,.edit-dialog .edit-modal-title,.edit-modal-dialog .edit-title,.edit-modal-dialog .edit-modal-title{margin:0 0 0.9375rem 0;font-size:1.125rem;color:#333;font-weight:600}.edit-dialog .edit-textarea,.edit-dialog .edit-modal-textarea,.edit-modal-dialog .edit-textarea,.edit-modal-dialog .edit-modal-textarea{width:100%;height:6.25rem;border:1px solid #ddd;border-radius:0.5rem;padding:0.625rem;font-size:0.875rem;resize:vertical;outline:none;margin-bottom:0.9375rem;font-family:inherit}.edit-dialog .edit-textarea:focus,.edit-dialog .edit-modal-textarea:focus,.edit-modal-dialog .edit-textarea:focus,.edit-modal-dialog .edit-modal-textarea:focus{border-color:#6c8cd5;box-shadow:0 0 0 2px rgba(108,140,213,0.2)}.edit-dialog .edit-buttons,.edit-dialog .edit-modal-buttons,.edit-modal-dialog .edit-buttons,.edit-modal-dialog .edit-modal-buttons{display:flex;gap:0.625rem;justify-content:flex-end;margin-top:0.9375rem}.edit-dialog .edit-buttons .edit-btn,.edit-dialog .edit-buttons .edit-modal-cancel-btn,.edit-dialog .edit-buttons .edit-modal-confirm-btn,.edit-dialog .edit-modal-buttons .edit-btn,.edit-dialog .edit-modal-buttons .edit-modal-cancel-btn,.edit-dialog .edit-modal-buttons .edit-modal-confirm-btn,.edit-modal-dialog .edit-buttons .edit-btn,.edit-modal-dialog .edit-buttons .edit-modal-cancel-btn,.edit-modal-dialog .edit-buttons .edit-modal-confirm-btn,.edit-modal-dialog .edit-modal-buttons .edit-btn,.edit-modal-dialog .edit-modal-buttons .edit-modal-cancel-btn,.edit-modal-dialog .edit-modal-buttons .edit-modal-confirm-btn{padding:0.5rem 1rem;border:none;border-radius:0.375rem;font-size:0.875rem;cursor:pointer;transition:all 0.2s}.edit-dialog .edit-buttons .edit-btn.cancel-btn,.edit-dialog .edit-buttons .edit-modal-cancel-btn.cancel-btn,.edit-dialog .edit-buttons .edit-modal-confirm-btn.cancel-btn,.edit-dialog .edit-modal-buttons .edit-btn.cancel-btn,.edit-dialog .edit-modal-buttons .edit-modal-cancel-btn.cancel-btn,.edit-dialog .edit-modal-buttons .edit-modal-confirm-btn.cancel-btn,.edit-modal-dialog .edit-buttons .edit-btn.cancel-btn,.edit-modal-dialog .edit-buttons .edit-modal-cancel-btn.cancel-btn,.edit-modal-dialog .edit-buttons .edit-modal-confirm-btn.cancel-btn,.edit-modal-dialog .edit-modal-buttons .edit-btn.cancel-btn,.edit-modal-dialog .edit-modal-buttons .edit-modal-cancel-btn.cancel-btn,.edit-modal-dialog .edit-modal-buttons .edit-modal-confirm-btn.cancel-btn{background:#f0f0f0;color:#666;border:1px solid #ddd}.edit-dialog .edit-buttons .edit-btn.cancel-btn:hover,.edit-dialog .edit-buttons .edit-modal-cancel-btn.cancel-btn:hover,.edit-dialog .edit-buttons .edit-modal-confirm-btn.cancel-btn:hover,.edit-dialog .edit-modal-buttons .edit-btn.cancel-btn:hover,.edit-dialog .edit-modal-buttons .edit-modal-cancel-btn.cancel-btn:hover,.edit-dialog .edit-modal-buttons .edit-modal-confirm-btn.cancel-btn:hover,.edit-modal-dialog .edit-buttons .edit-btn.cancel-btn:hover,.edit-modal-dialog .edit-buttons .edit-modal-cancel-btn.cancel-btn:hover,.edit-modal-dialog .edit-buttons .edit-modal-confirm-btn.cancel-btn:hover,.edit-modal-dialog .edit-modal-buttons .edit-btn.cancel-btn:hover,.edit-modal-dialog .edit-modal-buttons .edit-modal-cancel-btn.cancel-btn:hover,.edit-modal-dialog .edit-modal-buttons .edit-modal-confirm-btn.cancel-btn:hover{background:#e0e0e0}.edit-dialog .edit-buttons .edit-btn.save-btn,.edit-dialog .edit-buttons .edit-modal-cancel-btn.save-btn,.edit-dialog .edit-buttons .edit-modal-confirm-btn.save-btn,.edit-dialog .edit-modal-buttons .edit-btn.save-btn,.edit-dialog .edit-modal-buttons .edit-modal-cancel-btn.save-btn,.edit-dialog .edit-modal-buttons .edit-modal-confirm-btn.save-btn,.edit-modal-dialog .edit-buttons .edit-btn.save-btn,.edit-modal-dialog .edit-buttons .edit-modal-cancel-btn.save-btn,.edit-modal-dialog .edit-buttons .edit-modal-confirm-btn.save-btn,.edit-modal-dialog .edit-modal-buttons .edit-btn.save-btn,.edit-modal-dialog .edit-modal-buttons .edit-modal-cancel-btn.save-btn,.edit-modal-dialog .edit-modal-buttons .edit-modal-confirm-btn.save-btn{background:#6c8cd5;color:white}.edit-dialog .edit-buttons .edit-btn.save-btn:hover,.edit-dialog .edit-buttons .edit-modal-cancel-btn.save-btn:hover,.edit-dialog .edit-buttons .edit-modal-confirm-btn.save-btn:hover,.edit-dialog .edit-modal-buttons .edit-btn.save-btn:hover,.edit-dialog .edit-modal-buttons .edit-modal-cancel-btn.save-btn:hover,.edit-dialog .edit-modal-buttons .edit-modal-confirm-btn.save-btn:hover,.edit-modal-dialog .edit-buttons .edit-btn.save-btn:hover,.edit-modal-dialog .edit-buttons .edit-modal-cancel-btn.save-btn:hover,.edit-modal-dialog .edit-buttons .edit-modal-confirm-btn.save-btn:hover,.edit-modal-dialog .edit-modal-buttons .edit-btn.save-btn:hover,.edit-modal-dialog .edit-modal-buttons .edit-modal-cancel-btn.save-btn:hover,.edit-modal-dialog .edit-modal-buttons .edit-modal-confirm-btn.save-btn:hover{background:#4a6fbf}.edit-dialog .edit-buttons .edit-modal-cancel-btn,.edit-dialog .edit-modal-buttons .edit-modal-cancel-btn,.edit-modal-dialog .edit-buttons .edit-modal-cancel-btn,.edit-modal-dialog .edit-modal-buttons .edit-modal-cancel-btn{background:#f0f0f0;color:#666;border:1px solid #ddd}.edit-dialog .edit-buttons .edit-modal-cancel-btn:hover,.edit-dialog .edit-modal-buttons .edit-modal-cancel-btn:hover,.edit-modal-dialog .edit-buttons .edit-modal-cancel-btn:hover,.edit-modal-dialog .edit-modal-buttons .edit-modal-cancel-btn:hover{background:#f5f5f5}.edit-dialog .edit-buttons .edit-modal-confirm-btn,.edit-dialog .edit-modal-buttons .edit-modal-confirm-btn,.edit-modal-dialog .edit-buttons .edit-modal-confirm-btn,.edit-modal-dialog .edit-modal-buttons .edit-modal-confirm-btn{background:#6c8cd5;color:white}.edit-dialog .edit-buttons .edit-modal-confirm-btn:hover,.edit-dialog .edit-modal-buttons .edit-modal-confirm-btn:hover,.edit-modal-dialog .edit-buttons .edit-modal-confirm-btn:hover,.edit-modal-dialog .edit-modal-buttons .edit-modal-confirm-btn:hover{background:#5a7bc4}.accept-btn:hover{background:#5a7bc4 !important}.reject-btn:hover{background:#e0e0e0 !important}.sticker-selector{position:absolute;bottom:3.5rem;left:1rem;right:1rem;width:auto;background:rgba(255,255,255,0.95);backdrop-filter:blur(0.625rem);border-radius:1rem;box-shadow:0 8px 32px rgba(0,0,0,0.15);border:1px solid rgba(255,255,255,0.2);padding:0.75rem;z-index:1000;opacity:0;transform:translateY(1.25rem) scale(0.95);transition:all 0.3s cubic-bezier(0.25,0.46,0.45,0.94);display:none;overflow:hidden;box-sizing:border-box}.sticker-selector.active{display:block}.sticker-selector.show{opacity:1;transform:translateY(0) scale(1)}.sticker-selector .sticker-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:0.5rem;width:100%;height:10rem;overflow-y:auto;overflow-x:hidden;box-sizing:border-box}.sticker-selector .sticker-grid>*{min-width:0;max-width:100%;box-sizing:border-box}.sticker-selector .sticker-grid::-webkit-scrollbar{width:4px}.sticker-selector .sticker-grid::-webkit-scrollbar-track{background:rgba(0,0,0,0.1);border-radius:0.125rem}.sticker-selector .sticker-grid::-webkit-scrollbar-thumb{background:rgba(0,0,0,0.3);border-radius:2px}.sticker-selector .sticker-grid::-webkit-scrollbar-thumb:hover{background:rgba(0,0,0,0.5)}.sticker-selector .sticker-item{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;cursor:pointer;transition:all 0.2s ease;border:2px solid transparent;border-radius:0.5rem;padding:0.25rem;position:relative;width:100%;min-width:0;box-sizing:border-box}.sticker-selector .sticker-item:hover{transform:scale(1.05);border-color:#6c8cd5;box-shadow:0 4px 12px rgba(108,140,213,0.4);z-index:10}.sticker-selector .sticker-item:active{transform:scale(0.95)}.sticker-selector .sticker-item .sticker-image{width:2.5rem;height:2.5rem;border-radius:0.375rem;overflow:hidden;position:relative;flex-shrink:0}.sticker-selector .sticker-item .sticker-image img{width:100%;height:100%;object-fit:cover;display:block}.sticker-selector .sticker-item .sticker-note{font-size:0.625rem;color:#666;text-align:center;margin-top:0.125rem;line-height:1.2;width:100%;max-width:100%;box-sizing:border-box;height:1.5rem;word-wrap:break-word;word-break:break-all;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;-webkit-box-align:start}.sticker-selector .sticker-item .delete-checkbox{position:absolute;top:-0.125rem;right:-0.125rem;width:1rem;height:1rem;background:white;border:2px solid #ff4757;border-radius:50%;display:none;align-items:center;justify-content:center;cursor:pointer;z-index:5}.sticker-selector .sticker-item .delete-checkbox.checked{background:#ff4757}.sticker-selector .sticker-item .delete-checkbox.checked::after{content:"✓";color:white;font-size:0.625rem;font-weight:bold}.sticker-selector .sticker-item.delete-mode .delete-checkbox{display:flex}.sticker-selector .sticker-item.selected{border-color:#ff4757;background:rgba(255,71,87,0.1)}.sticker-selector .sticker-item.dragging{opacity:0.5;transform:rotate(5deg)}.sticker-selector .sticker-item.drag-over{border-color:#2ed573;background:rgba(46,213,115,0.1)}.sticker-selector .add-sticker-btn{display:flex;align-items:center;justify-content:center;width:100%;aspect-ratio:1;background:rgba(108,140,213,0.1);color:#6c8cd5;border:1px solid rgba(108,140,213,0.2);border-radius:0.5rem;cursor:pointer;transition:all 0.2s;box-sizing:border-box}.sticker-selector .add-sticker-btn:hover{background:rgba(108,140,213,0.2);border-color:rgba(108,140,213,0.4);transform:scale(1.05)}.sticker-selector .add-sticker-btn:active{transform:scale(0.95)}.sticker-selector .add-sticker-btn .add-icon{font-size:1.125rem;font-weight:bold}.sticker-selector .delete-mode-btn{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;aspect-ratio:1;background:rgba(255,71,87,0.1);color:#ff4757;border:1px solid rgba(255,71,87,0.2);border-radius:0.5rem;cursor:pointer;transition:all 0.2s;padding:0.25rem;box-sizing:border-box}.sticker-selector .delete-mode-btn:hover{background:rgba(255,71,87,0.2);border-color:rgba(255,71,87,0.4);transform:scale(1.05)}.sticker-selector .delete-mode-btn:active{transform:scale(0.95)}.sticker-selector .delete-mode-btn.active{background:rgba(255,71,87,0.2);border-color:#ff4757}.sticker-selector .delete-mode-btn .delete-icon{font-size:1rem;margin-bottom:0.125rem}.sticker-selector .delete-mode-btn .delete-text{font-size:0.5625rem;line-height:1;text-align:center}.sticker-selector .delete-confirm-btn{display:none;flex-direction:column;align-items:center;justify-content:center;width:100%;aspect-ratio:1;background:#ff4757;color:white;border:none;border-radius:0.5rem;cursor:pointer;transition:all 0.2s;padding:0.25rem;box-sizing:border-box}.sticker-selector .delete-confirm-btn.show{display:flex}.sticker-selector .delete-confirm-btn:hover{background:#ff3742;transform:scale(1.05)}.sticker-selector .delete-confirm-btn:active{transform:scale(0.95)}.sticker-selector .delete-confirm-btn.disabled{background:#ccc;color:#999;cursor:not-allowed}.sticker-selector .delete-confirm-btn.disabled:hover{background:#ccc;transform:none}.sticker-selector .delete-confirm-btn.disabled:active{transform:none}.sticker-selector .delete-confirm-btn .confirm-icon{font-size:0.875rem;margin-bottom:0.125rem}.sticker-selector .delete-confirm-btn .confirm-text{font-size:0.5625rem;line-height:1;text-align:center}.sticker-selector .empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:0.5rem;color:#666;grid-column:span 2;box-sizing:border-box;width:100%}.sticker-selector .empty-state .empty-icon{font-size:1.5rem;margin-bottom:0.25rem;opacity:0.5}.sticker-selector .empty-state .empty-text{font-size:0.6875rem;line-height:1.2;word-wrap:break-word}@keyframes stickerSelectorSlideUp{from{opacity:0;transform:translateY(1.25rem) scale(0.95)}to{opacity:1;transform:translateY(0) scale(1)}}#addStickerModalTemplate .modal-content,.add-sticker-modal .modal-content,.modal-container:has(.input-help) .modal-content,[id*=addSticker] .modal-content{display:flex;flex-direction:column;max-width:25rem;width:auto}#addStickerModalTemplate .modal-label,.add-sticker-modal .modal-label,.modal-container:has(.input-help) .modal-label,[id*=addSticker] .modal-label{display:block;margin-bottom:0.5rem;font-weight:600;color:#333;font-size:0.875rem}#addStickerModalTemplate .modal-label.modal-label-spaced,.add-sticker-modal .modal-label.modal-label-spaced,.modal-container:has(.input-help) .modal-label.modal-label-spaced,[id*=addSticker] .modal-label.modal-label-spaced{margin-top:1rem}#addStickerModalTemplate .modal-input,.add-sticker-modal .modal-input,.modal-container:has(.input-help) .modal-input,[id*=addSticker] .modal-input{width:100%;padding:0.75rem;border:1px solid #ddd;border-radius:0.5rem;font-size:0.875rem;margin-bottom:0.75rem;outline:none;transition:border-color 0.2s}#addStickerModalTemplate .modal-input:focus,.add-sticker-modal .modal-input:focus,.modal-container:has(.input-help) .modal-input:focus,[id*=addSticker] .modal-input:focus{border-color:#6c8cd5;box-shadow:0 0 0 2px rgba(108,140,213,0.2)}#addStickerModalTemplate .modal-input::placeholder,.add-sticker-modal .modal-input::placeholder,.modal-container:has(.input-help) .modal-input::placeholder,[id*=addSticker] .modal-input::placeholder{color:#999}#addStickerModalTemplate .input-help,.add-sticker-modal .input-help,.modal-container:has(.input-help) .input-help,[id*=addSticker] .input-help{background:#f8f9fa;border:1px solid #e9ecef;border-radius:0.5rem;padding:0.75rem;margin-top:0.5rem}#addStickerModalTemplate .input-help p,.add-sticker-modal .input-help p,.modal-container:has(.input-help) .input-help p,[id*=addSticker] .input-help p{margin:0 0 0.5rem 0;font-weight:600;color:#495057;font-size:0.75rem}#addStickerModalTemplate .input-help ul,.add-sticker-modal .input-help ul,.modal-container:has(.input-help) .input-help ul,[id*=addSticker] .input-help ul{margin:0;padding:0;list-style:none}#addStickerModalTemplate .input-help ul li,.add-sticker-modal .input-help ul li,.modal-container:has(.input-help) .input-help ul li,[id*=addSticker] .input-help ul li{position:relative;font-size:0.6875rem;color:#6c757d;margin-bottom:0.25rem;line-height:1.4;padding-left:0.75rem}#addStickerModalTemplate .input-help ul li:before,.add-sticker-modal .input-help ul li:before,.modal-container:has(.input-help) .input-help ul li:before,[id*=addSticker] .input-help ul li:before{content:"•";color:#ff6b6b;position:absolute;left:0;top:0}#addStickerModalTemplate .input-help ul li:last-child,.add-sticker-modal .input-help ul li:last-child,.modal-container:has(.input-help) .input-help ul li:last-child,[id*=addSticker] .input-help ul li:last-child{margin-bottom:0}.message-sender{font-size:0.75rem;font-family:-apple-system,"Segoe UI","Hiragino Kaku Gothic ProN",sans-serif;color:#ffffff;margin-bottom:0.25rem;font-weight:400;line-height:1.2}.group-management-modal{}.group-management-modal .modal-container{width:85%;max-width:20rem;aspect-ratio:3/5;overflow-y:auto}.group-management-modal .modal-container::-webkit-scrollbar{width:4px}.group-management-modal .modal-container::-webkit-scrollbar-track{background:rgba(0,0,0,0.1);border-radius:0.125rem}.group-management-modal .modal-container::-webkit-scrollbar-thumb{background:rgba(0,0,0,0.3);border-radius:0.125rem;-webkit-transition:background 0.2s;transition:background 0.2s}.group-management-modal .modal-container::-webkit-scrollbar-thumb:hover{background:rgba(0,0,0,0.5)}.group-management-modal .modal-header{font-size:1rem;font-weight:600;color:#333;margin-bottom:1.25rem;text-align:center}.group-management-modal .group-info-section{margin-bottom:1.5rem}.group-management-modal .group-info-section .group-avatar-section{display:flex;flex-direction:column;align-items:center;margin-bottom:1rem}.group-management-modal .group-info-section .group-avatar-section .group-avatar-preview{width:5rem;height:5rem;border-radius:50%;object-fit:cover;margin-bottom:0.75rem;border:0.1875rem solid #f0f0f0}.group-management-modal .group-info-section .group-avatar-section .change-avatar-btn{background:#f8f9fa;border:1px solid #dee2e6;border-radius:0.375rem;padding:0.375rem 0.75rem;font-size:0.75rem;color:#6c757d;cursor:pointer;transition:all 0.2s}.group-management-modal .group-info-section .group-avatar-section .change-avatar-btn:hover{background:#e9ecef;border-color:#adb5bd}.group-management-modal .group-info-section .group-name-section label{display:block;font-size:0.875rem;font-weight:500;color:#333;margin-bottom:0.375rem}.group-management-modal .group-info-section .group-name-section .group-name-input{width:100%;padding:0.625rem 0.75rem;border:1px solid #ddd;border-radius:0.5rem;font-size:0.875rem;outline:none;transition:border-color 0.2s}.group-management-modal .group-info-section .group-name-section .group-name-input:focus{border-color:#6c8cd5}.group-management-modal .group-members-section{margin-bottom:1.5rem}.group-management-modal .group-members-section .section-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:0.75rem}.group-management-modal .group-members-section .section-header h4{font-size:1rem;font-weight:600;color:#333;margin:0}.group-management-modal .group-members-section .section-header .invite-member-btn{background:#6c8cd5;color:white;border:none;border-radius:0.375rem;padding:0.375rem 0.75rem;font-size:0.75rem;cursor:pointer;transition:background-color 0.2s}.group-management-modal .group-members-section .section-header .invite-member-btn:hover{background:#5a7bc4}.group-management-modal .group-members-section .members-list{max-height:12.5rem;overflow-y:auto}.group-management-modal .group-members-section .members-list::-webkit-scrollbar{width:3px}.group-management-modal .group-members-section .members-list::-webkit-scrollbar-track{background:transparent}.group-management-modal .group-members-section .members-list::-webkit-scrollbar-thumb{background:rgba(0,0,0,0.1);border-radius:0.125rem}.group-management-modal .group-members-section .members-list::-webkit-scrollbar-thumb:hover{background:rgba(0,0,0,0.15)}.group-management-modal .group-members-section .member-item{display:flex;align-items:center;padding:0.5rem 0;border-bottom:1px solid #f0f0f0}.group-management-modal .group-members-section .member-item:last-child{border-bottom:none}.group-management-modal .group-members-section .member-item .member-avatar{width:2.25rem;height:2.25rem;border-radius:50%;object-fit:cover;margin-right:0.75rem}.group-management-modal .group-members-section .member-item .member-info{flex:1}.group-management-modal .group-members-section .member-item .member-info .member-name{display:block;font-size:0.875rem;font-weight:500;color:#333;margin-bottom:0.125rem}.group-management-modal .group-members-section .member-item .member-info .member-role{font-size:0.75rem;color:#666}.group-management-modal .group-members-section .member-item .member-actions{display:flex;gap:0.5rem}.group-management-modal .group-members-section .member-item .member-actions .kick-member-btn{background:#dc3545;color:white;border:none;border-radius:0.25rem;padding:0.25rem 0.375rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background-color 0.2s}.group-management-modal .group-members-section .member-item .member-actions .kick-member-btn:hover{background:#c82333}.group-management-modal .group-members-section .member-item .member-actions .kick-member-btn svg{width:0.875rem;height:0.875rem}.group-management-modal .modal-footer{display:flex;gap:0.75rem}.group-management-modal .modal-footer .cancel-btn,.group-management-modal .modal-footer .save-btn{flex:1;padding:0.75rem;border:none;border-radius:0.5rem;font-size:0.875rem;font-weight:500;cursor:pointer;transition:all 0.2s}.group-management-modal .modal-footer .cancel-btn{background:#f5f5f5;color:#666}.group-management-modal .modal-footer .cancel-btn:hover{background:#e0e0e0}.group-management-modal .modal-footer .save-btn{background:#6c8cd5;color:white}.group-management-modal .modal-footer .save-btn:hover{background:#4a6fbf}.group-management-modal .modal-footer .save-btn:disabled{background:#ccc;cursor:not-allowed}@media (max-width:30rem){.group-management-modal .modal-container{width:85%;aspect-ratio:3/5}.group-management-modal .group-info-section .group-avatar-section .group-avatar-preview{width:3.75rem;height:3.75rem}.group-management-modal .group-members-section .members-list{max-height:9.375rem}.group-management-modal .group-members-section .member-item .member-avatar{width:2rem;height:2rem}}.profile-interface{position:absolute;top:0;left:0;width:100%;height:100%;background:#f5f7fa;border-radius:1.5rem;overflow:hidden;z-index:20;opacity:0;visibility:hidden;transition:all 0.3s ease}.profile-interface.active{opacity:1;visibility:visible}.interface-container .profile-interface.active{z-index:30}.chat-list-interface{position:absolute;top:0;left:0;width:100%;height:100%;z-index:2;display:none}.chat-list-interface.active{display:block !important}.typing-indicator{display:inline-flex;gap:0.125rem;align-items:center;padding:0.125rem 0.25rem;margin-top:0.125rem}.typing-dot{width:0.25rem;height:0.25rem;background:#666;border-radius:50%;animation:typing-bounce 1.4s infinite}.typing-dot:nth-child(2){animation-delay:0.2s}.typing-dot:nth-child(3){animation-delay:0.4s}@keyframes typing-bounce{0%,100%{transform:translateY(0);opacity:0.5}50%{transform:translateY(-0.0625rem);opacity:0.8}}.typing-message{animation:messageSlideIn 0.3s ease-out}@keyframes messageSlideIn{from{opacity:0;transform:translateY(0.625rem)}to{opacity:1;transform:translateY(0)}}.danger-section{margin-top:1.5rem;padding:1rem;border:1px solid #ffebee;border-radius:0.5rem;background:#fafafa}.danger-section .disband-btn{width:100%;background:#ff4757;color:white;border:none;padding:0.75rem 1rem;border-radius:0.375rem;font-size:0.875rem;font-weight:500;cursor:pointer;transition:all 0.2s;display:flex;align-items:center;justify-content:center;gap:0.5rem}.danger-section .disband-btn:hover{background:#ff3838;transform:translateY(-0.0625rem);box-shadow:0 2px 8px rgba(255,71,87,0.3)}.danger-section .disband-btn:active{transform:translateY(0)}.modal-footer{display:flex;justify-content:flex-end;align-items:center;padding:1rem;border-top:1px solid #e0e0e0;gap:0.5rem}.modal-footer .cancel-btn{background:#f8f9fa;color:#6c757d;border:1px solid #dee2e6;padding:0.5rem 1rem;border-radius:0.375rem;font-size:0.875rem;cursor:pointer;transition:all 0.2s}.modal-footer .cancel-btn:hover{background:#e9ecef}.modal-footer .save-btn{background:#007bff;color:white;border:none;padding:0.5rem 1rem;border-radius:0.375rem;font-size:0.875rem;cursor:pointer;transition:background-color 0.2s}.modal-footer .save-btn:hover{background:#0056b3}.invite-member-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:1100;border-radius:1.5rem}.invite-modal-container{background:white;border-radius:0.5rem;box-shadow:0 4px 20px rgba(0,0,0,0.15);width:min(85%,17.5rem);aspect-ratio:3/4;overflow:hidden;display:flex;flex-direction:column;position:relative;margin:1rem}.invite-modal-header{padding:0.75rem 1rem;border-bottom:1px solid #e0e0e0;display:flex;justify-content:space-between;align-items:center}.invite-modal-header h3{margin:0;font-size:1rem;font-weight:600;color:#333}.invite-close-btn{background:none;border:none;font-size:1.25rem;color:#999;cursor:pointer;padding:0;width:1.75rem;height:1.75rem;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all 0.2s}.invite-close-btn:hover{background:#f0f0f0;color:#666}.invite-modal-body{flex:1;overflow:auto}.invite-modal-footer{padding:0.75rem 1rem;border-top:1px solid #e0e0e0;display:flex;justify-content:flex-end;gap:0.5rem}.invite-cancel-btn,.invite-confirm-btn{padding:0.375rem 0.75rem;border-radius:0.375rem;font-size:0.8125rem;cursor:pointer;transition:all 0.2s;min-width:3.125rem}.invite-cancel-btn{background:#f8f9fa;color:#6c757d;border:1px solid #dee2e6}.invite-cancel-btn:hover{background:#e9ecef}.invite-confirm-btn{background:#6c8cd5;color:white;border:none}.invite-confirm-btn:hover{background:#6c8cd5}.invite-contacts-list{flex:1;overflow-y:auto;padding:0.5rem 0}.invite-contacts-list .invite-contact-item{display:flex;align-items:center;padding:0.625rem 1rem;border-bottom:1px solid rgba(0,0,0,0.05);cursor:pointer;transition:background-color 0.2s}.invite-contacts-list .invite-contact-item:hover{background:#f8f9fa}.invite-contacts-list .invite-contact-item .invite-contact-avatar{width:2.5rem;height:2.5rem;border-radius:50%;object-fit:cover;margin-right:0.75rem;border:2px solid #fff;box-shadow:0 2px 4px rgba(0,0,0,0.1)}.invite-contacts-list .invite-contact-item .invite-contact-info{flex:1}.invite-contacts-list .invite-contact-item .invite-contact-info .invite-contact-name{font-size:0.875rem;font-weight:500;color:#333}.invite-contacts-list .invite-contact-item .invite-contact-checkbox input[type=checkbox]{display:none}.invite-contacts-list .invite-contact-item .invite-contact-checkbox label{width:1.25rem;height:1.25rem;border:2px solid #6c8cd5;border-radius:0.25rem;display:block;cursor:pointer;position:relative;transition:all 0.2s}.invite-contacts-list .invite-contact-item .invite-contact-checkbox label::after{content:"";position:absolute;left:0.375rem;top:0.125rem;width:0.375rem;height:0.625rem;border:solid white;border-width:0 2px 2px 0;transform:rotate(45deg);opacity:0;transition:opacity 0.2s}.invite-contacts-list .invite-contact-item .invite-contact-checkbox input[type=checkbox]:checked+label{background:#6c8cd5;border-color:#6c8cd5}.invite-contacts-list .invite-contact-item .invite-contact-checkbox input[type=checkbox]:checked+label::after{opacity:1}.user-message-context-modal .modal-container{width:17.5rem;max-width:90vw}.user-message-context-modal .modal-header{display:flex;justify-content:space-between;align-items:center;padding:0.75rem 1rem;border-bottom:0.0625rem solid #e1e5e9}.user-message-context-modal .modal-header h3{margin:0;font-size:1rem;color:#333}.user-message-context-modal .modal-header .modal-close-btn{background:none;border:none;font-size:1.25rem;color:#666;cursor:pointer;padding:0;width:1.25rem;height:1.25rem;display:flex;align-items:center;justify-content:center}.user-message-context-modal .modal-header .modal-close-btn:hover{color:#333}.user-message-context-modal .modal-body{padding:1rem;display:flex;flex-direction:column;gap:0.5rem}.user-message-context-modal .modal-body .modal-btn{width:100%;padding:0.75rem 1rem;border-radius:0.375rem;border:none;font-size:0.875rem;cursor:pointer;transition:all 0.2s ease;font-weight:500}.user-message-context-modal .modal-body .modal-btn.delete-btn{background:#dc3545;color:#fff}.user-message-context-modal .modal-body .modal-btn.delete-btn:hover{background:#c82333;transform:translateY(-0.0625rem)}.user-message-context-modal .modal-body .modal-btn.reroll-btn{background:#6c8cd5;color:#fff}.user-message-context-modal .modal-body .modal-btn.reroll-btn:hover{background:#5a7bc4;transform:translateY(-0.0625rem)}@media (max-width:30rem){.user-message-context-modal .modal-container{width:16.25rem}.user-message-context-modal .modal-header{padding:0.625rem 0.875rem}.user-message-context-modal .modal-header h3{font-size:0.9375rem}.user-message-context-modal .modal-body{padding:0.875rem}.user-message-context-modal .modal-body .modal-btn{padding:0.625rem 0.875rem;font-size:0.8125rem}}.batch-delete-toolbar{height:3.5rem;position:absolute;top:0;left:0;right:0;background:#f8f9fa;border-bottom:1px solid #e1e5e9;padding:1rem 1rem 0.75rem 1rem;z-index:200}.batch-delete-toolbar .toolbar-content{display:flex;justify-content:space-between;align-items:center}.batch-delete-toolbar .selected-count{font-size:0.875rem;color:#333;font-weight:500}.batch-delete-toolbar .toolbar-buttons{display:flex;gap:0.5rem}.batch-delete-toolbar .toolbar-btn{padding:0.25rem 0.75rem;border-radius:0.25rem;border:none;font-size:0.8125rem;cursor:pointer;transition:all 0.2s ease}.batch-delete-toolbar .toolbar-btn.cancel-btn{background:#6c757d;color:#fff}.batch-delete-toolbar .toolbar-btn.cancel-btn:hover{background:#5a6268}.batch-delete-toolbar .toolbar-btn.delete-btn{background:#dc3545;color:#fff}.batch-delete-toolbar .toolbar-btn.delete-btn:hover:not(:disabled){background:#c82333}.batch-delete-toolbar .toolbar-btn.delete-btn:disabled{background:#ccc;cursor:not-allowed}.batch-delete-mode{}.batch-delete-mode .message.selectable{position:relative;cursor:pointer;transition:all 0.2s ease;padding-left:1.875rem}.batch-delete-mode .message.selectable:hover{background-color:rgba(108,140,213,0.1);border-radius:0.5rem}.batch-delete-mode .message.selectable.selected{background-color:rgba(255,107,107,0.15);border-left:0.1875rem solid #ff6b6b;border-radius:0.5rem}.batch-delete-mode .message.selectable .message-checkbox{position:absolute;left:0.375rem;top:50%;transform:translateY(-50%);width:1.125rem;height:1.125rem;z-index:10;pointer-events:none}.batch-delete-mode .message.selectable .message-checkbox .checkbox-inner{width:1.125rem;height:1.125rem;border:0.125rem solid #ddd;border-radius:0.1875rem;background:#fff;position:relative;transition:all 0.2s ease}.batch-delete-mode .message.selectable .message-checkbox .checkbox-inner::after{content:"";position:absolute;left:0.3125rem;top:0.125rem;width:0.25rem;height:0.5rem;border:solid #fff;border-width:0 0.125rem 0.125rem 0;transform:rotate(45deg);opacity:0;transition:opacity 0.2s ease}.batch-delete-mode .message.selectable.selected .message-checkbox .checkbox-inner{background-color:#ff6b6b;border-color:#ff6b6b}.batch-delete-mode .message.selectable.selected .message-checkbox .checkbox-inner::after{opacity:1}.batch-delete-mode .chat-messages{padding-top:3.75rem}.delete-message-modal .modal-container{width:20rem;max-width:90vw;max-height:80%}.delete-message-modal .modal-header{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.25rem;border-bottom:1px solid #e1e5e9}.delete-message-modal .modal-header h3{margin:0;font-size:1.125rem;color:#333}.delete-message-modal .modal-header .modal-close-btn{background:none;border:none;font-size:1.5rem;color:#666;cursor:pointer;padding:0;width:1.5rem;height:1.5rem;display:flex;align-items:center;justify-content:center}.delete-message-modal .modal-header .modal-close-btn:hover{color:#333}.delete-message-modal .modal-body{padding:1.25rem;max-height:50vh;overflow-y:auto}.delete-message-modal .delete-options{margin-bottom:1rem}.delete-message-modal .delete-options .delete-option{display:flex;align-items:center;margin-bottom:0.5rem;cursor:pointer}.delete-message-modal .delete-options .delete-option input[type=radio]{margin-right:0.5rem}.delete-message-modal .delete-options .delete-option span{font-size:0.875rem;color:#333}.delete-message-modal .message-list{border:1px solid #e1e5e9;border-radius:0.5rem;max-height:18.75rem;overflow-y:auto}.delete-message-modal .message-item{display:flex;align-items:center;padding:0.75rem;border-bottom:1px solid #f0f2f5}.delete-message-modal .message-item:last-child{border-bottom:none}.delete-message-modal .message-item:hover{background-color:#f8f9fa}.delete-message-modal .message-item .message-checkbox{margin-right:0.75rem;position:relative;cursor:pointer}.delete-message-modal .message-item .message-checkbox input[type=checkbox]{opacity:0;position:absolute;width:1.125rem;height:1.125rem}.delete-message-modal .message-item .message-checkbox .checkmark{display:inline-block;width:1.125rem;height:1.125rem;border:0.125rem solid #ddd;border-radius:0.1875rem;position:relative;transition:all 0.2s ease}.delete-message-modal .message-item .message-checkbox .checkmark::after{content:"";position:absolute;left:0.3125rem;top:0.125rem;width:0.25rem;height:0.5rem;border:solid #fff;border-width:0 0.125rem 0.125rem 0;transform:rotate(45deg);opacity:0;transition:opacity 0.2s ease}.delete-message-modal .message-item .message-checkbox input[type=checkbox]:checked+.checkmark{background-color:#6c8cd5;border-color:#6c8cd5}.delete-message-modal .message-item .message-checkbox input[type=checkbox]:checked+.checkmark::after{opacity:1}.delete-message-modal .message-item .message-preview{flex:1}.delete-message-modal .message-item .message-preview .message-sender{font-size:0.75rem;color:#666;margin-bottom:0.125rem}.delete-message-modal .message-item .message-preview .message-content-preview{font-size:0.875rem;color:#333;margin-bottom:0.125rem;line-height:1.4}.delete-message-modal .message-item .message-preview .message-time{font-size:0.6875rem;color:#999}.delete-message-modal .modal-footer{display:flex;justify-content:flex-end;gap:0.75rem;padding:1rem 1.25rem;border-top:1px solid #e1e5e9}.delete-message-modal .modal-footer .modal-btn{padding:0.5rem 1rem;border-radius:0.375rem;border:none;font-size:0.875rem;cursor:pointer;transition:all 0.2s ease}.delete-message-modal .modal-footer .modal-btn.cancel-btn{background:#f5f7fa;color:#666}.delete-message-modal .modal-footer .modal-btn.cancel-btn:hover{background:#e9ecef}.delete-message-modal .modal-footer .modal-btn.delete-btn{background:#dc3545;color:#fff}.delete-message-modal .modal-footer .modal-btn.delete-btn:hover{background:#c82333}@media (max-width:30rem){.delete-message-modal .modal-container{width:95%}.delete-message-modal .message-item{padding:0.5rem}.delete-message-modal .message-item .message-preview .message-content-preview{font-size:0.8125rem}}.scale-control{margin-top:1rem}.scale-control .scale-info{display:flex;justify-content:space-between;align-items:center;margin-bottom:0.75rem}.scale-control .scale-info .scale-label{font-size:0.875rem;color:#666;font-weight:500}.scale-control .scale-info .scale-value{font-size:0.875rem;color:#6c8cd5;font-weight:600;background:#f0f4ff;padding:0.25rem 0.5rem;border-radius:0.375rem}.scale-control .scale-slider-container{position:relative}.scale-control .scale-slider-container .scale-slider{width:100%;height:0.375rem;border-radius:0.1875rem;background:#e0e0e0;outline:none;-webkit-appearance:none;appearance:none;cursor:pointer;margin:0;position:relative;z-index:2}.scale-control .scale-slider-container .scale-slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:1.25rem;height:1.25rem;border-radius:50%;background:#6c8cd5;cursor:pointer;box-shadow:0 2px 4px rgba(108,140,213,0.3);-webkit-transition:all 0.2s ease;transition:all 0.2s ease}.scale-control .scale-slider-container .scale-slider::-webkit-slider-thumb:hover{transform:scale(1.1);box-shadow:0 3px 6px rgba(108,140,213,0.4)}.scale-control .scale-slider-container .scale-slider::-moz-range-thumb{width:1.25rem;height:1.25rem;border-radius:50%;background:#6c8cd5;cursor:pointer;border:none;box-shadow:0 2px 4px rgba(108,140,213,0.3);-moz-transition:all 0.2s ease;transition:all 0.2s ease}.scale-control .scale-slider-container .scale-slider::-moz-range-thumb:hover{transform:scale(1.1);box-shadow:0 3px 6px rgba(108,140,213,0.4)}.scale-control .scale-slider-container .scale-slider::-webkit-slider-track{height:0.375rem;border-radius:0.1875rem;background:linear-gradient(to right,#6c8cd5 0%,#6c8cd5 var(--progress,50%),#e0e0e0 var(--progress,50%),#e0e0e0 100%)}.scale-control .scale-slider-container .scale-slider::-moz-range-track{height:0.375rem;border-radius:0.1875rem;background:#e0e0e0;border:none}.scale-control .scale-slider-container .scale-slider::-moz-range-progress{height:0.375rem;border-radius:0.1875rem;background:#6c8cd5}.scale-control .scale-slider-container .scale-marks{position:relative;margin-top:0.5rem;height:1rem;margin-left:0.625rem;margin-right:0.625rem;z-index:1}.scale-control .scale-slider-container .scale-marks .scale-mark{font-size:0.75rem;color:#999;position:absolute;transform:translateX(-50%);text-align:center;white-space:nowrap}.scale-control .scale-slider-container .scale-marks .scale-mark:nth-child(1){left:0%;transform:translateX(0)}.scale-control .scale-slider-container .scale-marks .scale-mark:nth-child(2){left:28.57%;transform:translateX(-50%)}.scale-control .scale-slider-container .scale-marks .scale-mark:nth-child(3){left:57.14%;transform:translateX(-50%)}.scale-control .scale-slider-container .scale-marks .scale-mark:nth-child(4){left:100%;transform:translateX(-100%)}.scale-control .scale-slider-container .scale-marks .scale-mark::before{content:"";position:absolute;top:-0.75rem;left:50%;transform:translateX(-50%);width:1px;height:0.25rem;background:#ccc}.scale-control .scale-slider-container .scale-marks .scale-mark:nth-child(1)::before{left:0;transform:none}.scale-control .scale-slider-container .scale-marks .scale-mark:nth-child(4)::before{left:auto;right:0;transform:none}.setting-group{margin-bottom:2rem}.setting-group:last-child{margin-bottom:0}.setting-group .group-title{display:flex;align-items:center;gap:0.5rem;font-size:1rem;font-weight:600;color:#333;margin-bottom:1rem;padding-bottom:0.5rem;border-bottom:1px solid #f0f0f0}.setting-group .group-title svg{color:#007aff}.setting-group .setting-item{margin-bottom:1.5rem}.setting-group .setting-item:last-child{margin-bottom:0}.setting-group .setting-item .item-header{margin-bottom:0.5rem}.setting-group .setting-item .item-header .item-title{font-size:0.9375rem;font-weight:500;color:#333}.setting-group .setting-item .item-description{font-size:0.8125rem;color:#666;line-height:1.4;margin-bottom:0.75rem}.typing-speed-control{margin-top:1rem}.typing-speed-control .typing-speed-info{display:flex;justify-content:space-between;align-items:center;margin-bottom:0.75rem}.typing-speed-control .typing-speed-info .typing-speed-label{font-size:0.875rem;color:#666;font-weight:500}.typing-speed-control .typing-speed-info .typing-speed-value{font-size:0.875rem;color:#6c8cd5;font-weight:600;background:#f0f4ff;padding:0.25rem 0.5rem;border-radius:0.375rem}.typing-speed-control .typing-speed-slider-container{position:relative}.typing-speed-control .typing-speed-slider-container .typing-speed-slider{width:100%;height:0.375rem;border-radius:0.1875rem;background:#e0e0e0;outline:none;-webkit-appearance:none;appearance:none;cursor:pointer;margin:0;position:relative;z-index:2}.typing-speed-control .typing-speed-slider-container .typing-speed-slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:1.25rem;height:1.25rem;border-radius:50%;background:#6c8cd5;cursor:pointer;box-shadow:0 2px 4px rgba(108,140,213,0.3);-webkit-transition:all 0.2s ease;transition:all 0.2s ease}.typing-speed-control .typing-speed-slider-container .typing-speed-slider::-webkit-slider-thumb:hover{transform:scale(1.1);box-shadow:0 3px 6px rgba(108,140,213,0.4)}.typing-speed-control .typing-speed-slider-container .typing-speed-slider::-moz-range-thumb{width:1.25rem;height:1.25rem;border-radius:50%;background:#6c8cd5;cursor:pointer;border:none;box-shadow:0 2px 4px rgba(108,140,213,0.3);-moz-transition:all 0.2s ease;transition:all 0.2s ease}.typing-speed-control .typing-speed-slider-container .typing-speed-slider::-moz-range-thumb:hover{transform:scale(1.1);box-shadow:0 3px 6px rgba(108,140,213,0.4)}.typing-speed-control .typing-speed-slider-container .typing-speed-slider::-webkit-slider-track{height:0.375rem;border-radius:0.1875rem;background:linear-gradient(to right,#6c8cd5 0%,#6c8cd5 var(--typing-progress,33%),#e0e0e0 var(--typing-progress,33%),#e0e0e0 100%)}.typing-speed-control .typing-speed-slider-container .typing-speed-slider::-moz-range-track{height:0.375rem;border-radius:0.1875rem;background:#e0e0e0;border:none}.typing-speed-control .typing-speed-slider-container .typing-speed-slider::-moz-range-progress{height:0.375rem;border-radius:0.1875rem;background:#6c8cd5}.typing-speed-control .typing-speed-slider-container .typing-speed-marks{position:relative;margin-top:0.5rem;height:1rem;margin-left:0.625rem;margin-right:0.625rem;z-index:1}.typing-speed-control .typing-speed-slider-container .typing-speed-marks .typing-speed-mark{font-size:0.75rem;color:#999;position:absolute;transform:translateX(-50%);text-align:center;white-space:nowrap}.typing-speed-control .typing-speed-slider-container .typing-speed-marks .typing-speed-mark:nth-child(1){left:0%;transform:translateX(0)}.typing-speed-control .typing-speed-slider-container .typing-speed-marks .typing-speed-mark:nth-child(2){left:33.33%;transform:translateX(-50%)}.typing-speed-control .typing-speed-slider-container .typing-speed-marks .typing-speed-mark:nth-child(3){left:66.67%;transform:translateX(-50%)}.typing-speed-control .typing-speed-slider-container .typing-speed-marks .typing-speed-mark:nth-child(4){left:100%;transform:translateX(-100%)}.typing-speed-control .typing-speed-slider-container .typing-speed-marks .typing-speed-mark::before{content:"";position:absolute;top:-0.75rem;left:50%;transform:translateX(-50%);width:1px;height:0.25rem;background:#ccc}.typing-speed-control .typing-speed-slider-container .typing-speed-marks .typing-speed-mark:nth-child(1)::before{left:0;transform:none}.typing-speed-control .typing-speed-slider-container .typing-speed-marks .typing-speed-mark:nth-child(4)::before{left:auto;right:0;transform:none}
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** css ./node_modules/.pnpm/css-loader@7.1.2_webpack@5.101.3/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[1]!./node_modules/.pnpm/postcss-loader@8.1.1_postcs_7e5278d575df5928f9b244ea375b369e/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[2]!./node_modules/.pnpm/sass-loader@16.0.5_sass@1.90.0_webpack@5.101.3/node_modules/sass-loader/dist/cjs.js!./src/多云熊/备份/给rovo的/modules/chatList/chatList.scss ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
@charset "UTF-8";.chat-list-interface{position:absolute;top:0;left:0;width:100%;height:100%;z-index:3;display:none;background-image:url("https://files.catbox.moe/o84j4n.jpg");background-size:cover;background-position:center;border-radius:1.5rem;overflow:hidden}.chat-list-interface.active{display:block}.chat-list-interface .status-bar{position:absolute;top:0;left:0;width:100%;height:1.5rem;background:rgba(0,0,0,0.5);display:flex;justify-content:space-between;align-items:center;padding:0 1rem;color:#fff;font-size:0.75rem;z-index:1}.chat-list-interface .status-bar .status-bar-left{display:flex;align-items:center;gap:0.25rem}.chat-list-interface .status-bar .status-bar-right{display:flex;align-items:center;gap:0.5rem}.chat-list-interface .status-bar .status-icon-svg{width:1rem;height:1rem;fill:#fff}.chat-list-interface .chat-list-content{width:100%;height:calc(100% - 1.5rem);background:rgba(255,255,255,0.9);background-blend-mode:overlay;overflow-y:auto;position:relative;top:1.5rem}.chat-list-interface .chat-list-content::-webkit-scrollbar{width:6px}.chat-list-interface .chat-list-content::-webkit-scrollbar-track{background:transparent}.chat-list-interface .chat-list-content::-webkit-scrollbar-thumb{background:rgba(0,0,0,0.1);border-radius:0.1875rem}.chat-list-interface .chat-list-item{padding:0.75rem 1rem;display:flex;align-items:center;gap:0.75rem;border-bottom:1px solid rgba(0,0,0,0.05);cursor:pointer;transition:background 0.2s ease;position:relative;-webkit-user-select:none;user-select:none}.chat-list-interface .chat-list-item:hover{background:rgba(108,140,213,0.1)}.chat-list-interface .chat-list-item.pinned{background:rgba(108,140,213,0.1)}.chat-list-interface .chat-list-item.pinned::before{content:"";position:absolute;left:0;top:0;bottom:0;width:3px;background:linear-gradient(to bottom,#6c8cd5,#4a6fbf);z-index:1}.chat-list-interface .chat-list-item.long-press-detecting{background:rgba(108,140,213,0.15)}.chat-list-interface .chat-list-item.long-press-detecting::after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(108,140,213,0.1);animation:longPressRipple 0.8s ease-out;pointer-events:none}.chat-list-interface .chat-list-item.long-pressed{background:rgba(108,140,213,0.2);transform:scale(0.98);box-shadow:0 0.125rem 0.5rem rgba(0,0,0,0.1)}.chat-list-interface .chat-avatar{width:3rem;height:3rem;border-radius:50%;object-fit:cover;border:2px solid #fff;box-shadow:0 2px 4px rgba(0,0,0,0.1)}.chat-list-interface .chat-info{flex:1;min-width:0}.chat-list-interface .chat-info .chat-list-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:0.25rem}.chat-list-interface .chat-info .chat-list-header .chat-name{font-size:1rem;font-weight:600;color:#333}.chat-list-interface .chat-info .chat-list-header .chat-time{font-size:0.75rem;color:#999}.chat-list-interface .chat-info .chat-preview{font-size:0.875rem;color:#666;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.chat-list-interface .unread-badge{min-width:1.25rem;height:1.25rem;padding:0 0.375rem;background:#6c8cd5;color:white;font-size:0.75rem;border-radius:0.625rem;display:flex;align-items:center;justify-content:center;margin-left:0.5rem}.chat-list-interface .unread-badge.show{display:flex}@keyframes longPressRipple{0%{opacity:0.3;transform:scale(1)}50%{opacity:0.1;transform:scale(1.02)}100%{opacity:0;transform:scale(1)}}.context-menu-overlay{position:fixed;top:0;left:0;width:100%;height:100%;z-index:2000;background:transparent;pointer-events:auto}.context-menu{position:absolute;background:white;border-radius:0.375rem;box-shadow:0 0.125rem 0.5rem rgba(0,0,0,0.12),0 0.0625rem 0.1875rem rgba(0,0,0,0.08);padding:0;min-width:auto;max-width:6rem;height:2rem;width:-moz-fit-content;width:fit-content;opacity:0;transform:scale(0.95);transition:all 0.12s ease-out;border:1px solid rgba(0,0,0,0.05);display:flex;align-items:center}.context-menu.show{transform:scale(1);opacity:1}.context-menu.hiding{transform:scale(0.95);opacity:0}.context-menu .menu-arrow{position:absolute;width:0.375rem;height:0.375rem;background:white;border:1px solid rgba(0,0,0,0.05);transform:rotate(45deg);z-index:-1}.context-menu .menu-arrow.arrow-right{left:-0.1875rem;top:50%;margin-top:-0.1875rem;border-right:none;border-bottom:none}.context-menu .menu-arrow.arrow-left{right:-0.1875rem;top:50%;margin-top:-0.1875rem;border-left:none;border-top:none}.context-menu .menu-arrow.arrow-bottom{bottom:-0.1875rem;left:50%;margin-left:-0.1875rem;border-top:none;border-left:none}.context-menu .menu-arrow.arrow-top{bottom:-0.1875rem;left:50%;margin-left:-0.1875rem;border-top:none;border-left:none}.context-menu .menu-content{display:flex;flex-direction:column;gap:0.02rem;height:100%;padding:0.05rem}.context-menu .menu-content.horizontal{flex-direction:row;gap:0.05rem;align-items:stretch}.context-menu .menu-item{display:flex;align-items:center;gap:0.15rem;padding:0.1rem 0.35rem;border:none;background:transparent;border-radius:0.2rem;cursor:pointer;transition:all 0.15s ease;font-size:0.65rem;color:#333;text-align:left;height:100%;min-height:auto;white-space:nowrap}.context-menu .menu-item:hover{background:rgba(108,140,213,0.1);transform:translateY(-0.0625rem)}.context-menu .menu-item:active{background:rgba(108,140,213,0.2);transform:translateY(0) scale(0.98)}.context-menu .menu-item .menu-icon{font-size:0.75rem;line-height:1;flex-shrink:0;width:0.8rem;text-align:center}.context-menu .menu-item .menu-text{font-weight:600;line-height:1.1;flex:1;font-size:0.65rem}.context-menu .menu-item.pin-item .menu-icon{color:#6c8cd5}.context-menu .menu-item.pin-item:hover{background:rgba(108,140,213,0.15)}.context-menu .menu-item.pin-item:hover .menu-text{color:#4a6fbf}.context-menu .menu-item.delete-item .menu-icon{color:#e74c3c}.context-menu .menu-item.delete-item:hover{background:rgba(231,76,60,0.1)}.context-menu .menu-item.delete-item:hover .menu-text{color:#c0392b}.context-menu .menu-content.horizontal .menu-item{flex:1;justify-content:center;min-width:0;padding:0.2rem 0.3rem;max-width:2.5rem}.context-menu .menu-content.horizontal .menu-item .menu-text{text-align:center;font-size:0.65rem;font-weight:600}@keyframes menuFadeIn{0%{opacity:0;transform:scale(0.8) translateY(-0.625rem)}100%{opacity:1;transform:scale(1) translateY(0)}}@keyframes menuFadeOut{0%{opacity:1;transform:scale(1) translateY(0)}100%{opacity:0;transform:scale(0.8) translateY(-0.625rem)}}@media (max-width:30rem){.context-menu .menu-item{padding:0.875rem 1.125rem;font-size:0.9375rem}.context-menu .menu-item .menu-icon{font-size:1.125rem;width:1.375rem}}@media (prefers-contrast:high){.context-menu{border:2px solid #000;box-shadow:0 0.25rem 0.75rem rgba(0,0,0,0.3)}.context-menu .menu-arrow{border-color:#000}.context-menu .menu-item{border:1px solid transparent}.context-menu .menu-item:hover{border-color:#000;background:#f0f0f0}}@media (prefers-reduced-motion:reduce){.context-menu{transition:opacity 0.1s ease}.context-menu.show{transform:scale(1) translateY(0)}.context-menu .menu-item{transition:background-color 0.1s ease}.context-menu .menu-item:hover{transform:none}.context-menu .menu-item:active{transform:none}}.bottom-nav{position:absolute;bottom:0;left:0;width:100%;height:3.125rem;background:#fff;border-top:1px solid rgba(255,105,180,0.1);display:flex;justify-content:space-around;align-items:center;z-index:10;border-bottom-left-radius:1.5rem;border-bottom-right-radius:1.5rem}.bottom-nav .bottom-nav-item{display:flex;flex-direction:column;align-items:center;gap:0.25rem;color:#666;font-size:0.75rem;cursor:pointer;transition:all 0.3s ease;padding:0.3125rem 0;flex:1}.bottom-nav .bottom-nav-item.active{color:#ff69b4}.bottom-nav .bottom-nav-item:hover{color:#ff69b4;transform:translateY(-0.125rem)}.bottom-nav .bottom-nav-item .nav-icon{width:1.6875rem;height:1.6875rem;background-size:contain;background-repeat:no-repeat;background-position:center;background-image:url("https://files.catbox.moe/zilfqn.png");transition:filter 0.3s ease}.bottom-nav .bottom-nav-item .bottom-nav-text{font-weight:500;transition:color 0.3s ease}.chat-list-content{width:100%;height:calc(100% - 1.5rem - 3.125rem);background:rgba(255,255,255,0.9);background-blend-mode:overlay;overflow-y:auto;position:relative;top:1.5rem}.chat-list-content::-webkit-scrollbar{width:6px}.chat-list-content::-webkit-scrollbar-track{background:transparent}.chat-list-content::-webkit-scrollbar-thumb{background:rgba(0,0,0,0.1);border-radius:0.1875rem}.new-chat-btn{position:absolute;bottom:4.625rem;right:1.5rem;width:3rem;height:3rem;border-radius:50%;background:#6c8cd5;color:white;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:0 0.25rem 0.5rem rgba(0,0,0,0.2);transition:transform 0.2s;z-index:100}.new-chat-btn:hover{transform:scale(1.1)}.new-chat-btn svg{width:1.25rem;height:1.25rem}.empty-chat-list{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%;padding:2.5rem 1.25rem;text-align:center}.empty-chat-list .empty-icon{font-size:3rem;margin-bottom:1rem;opacity:0.6}.empty-chat-list .empty-text{font-size:1.125rem;font-weight:600;color:#666;margin-bottom:0.5rem}.empty-chat-list .empty-hint{font-size:0.875rem;color:#999;line-height:1.4}.new-chat-modal{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:1000;border-radius:1.5rem;opacity:0;transition:opacity 0.3s ease}.new-chat-modal.show{opacity:1}.new-chat-modal .modal-container{width:18.75rem;max-width:85%;background:white;border-radius:1rem;padding:1.25rem;position:relative}.new-chat-modal .modal-container .modal-title{font-size:1.125rem;font-weight:600;margin-bottom:1rem;color:#333}.new-chat-modal .modal-container .chat-type-options{display:flex;gap:0.75rem;margin-bottom:1.5rem}.new-chat-modal .modal-container .chat-type-options .chat-type-option{flex:1;padding:0.75rem;border:2px solid #6c8cd5;border-radius:0.75rem;text-align:center;cursor:pointer;color:#6c8cd5;font-weight:500;transition:all 0.2s}.new-chat-modal .modal-container .chat-type-options .chat-type-option:hover,.new-chat-modal .modal-container .chat-type-options .chat-type-option.selected{background:#6c8cd5;color:white}.new-chat-modal .modal-container .contact-list{max-height:12.5rem;overflow-y:auto}.new-chat-modal .modal-container .contact-list::-webkit-scrollbar{width:6px}.new-chat-modal .modal-container .contact-list::-webkit-scrollbar-track{background:transparent}.new-chat-modal .modal-container .contact-list::-webkit-scrollbar-thumb{background:rgba(0,0,0,0.1);border-radius:0.1875rem}.new-chat-modal .modal-container .contact-list .contact-item{display:flex;align-items:center;gap:0.75rem;padding:0.5rem;cursor:pointer;border-radius:0.5rem;transition:background 0.2s;position:relative}.new-chat-modal .modal-container .contact-list .contact-item:hover{background:rgba(108,140,213,0.1)}.new-chat-modal .modal-container .contact-list .contact-item.selected{background:rgba(108,140,213,0.2)}.new-chat-modal .modal-container .contact-list .contact-item .contact-avatar{width:2.25rem;height:2.25rem;border-radius:50%;object-fit:cover}.new-chat-modal .modal-container .contact-list .contact-item .contact-name{font-size:0.875rem;color:#333;flex:1}.new-chat-modal .modal-container .contact-list .contact-item .contact-actions{display:flex;gap:0.375rem;margin-left:auto;margin-right:0.5rem}.new-chat-modal .modal-container .contact-list .contact-item .contact-actions .edit-btn,.new-chat-modal .modal-container .contact-list .contact-item .contact-actions .delete-btn{width:1.75rem;height:1.75rem;border:none;border-radius:0.375rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.2s;opacity:0.7}.new-chat-modal .modal-container .contact-list .contact-item .contact-actions .edit-btn:hover,.new-chat-modal .modal-container .contact-list .contact-item .contact-actions .delete-btn:hover{opacity:1;transform:scale(1.05)}.new-chat-modal .modal-container .contact-list .contact-item .contact-actions .edit-btn svg,.new-chat-modal .modal-container .contact-list .contact-item .contact-actions .delete-btn svg{width:0.875rem;height:0.875rem}.new-chat-modal .modal-container .contact-list .contact-item .contact-actions .edit-btn{background:#f0f4ff;color:#6c8cd5}.new-chat-modal .modal-container .contact-list .contact-item .contact-actions .edit-btn:hover{background:#6c8cd5;color:white}.new-chat-modal .modal-container .contact-list .contact-item .contact-actions .delete-btn{background:#ffeaea;color:#e74c3c}.new-chat-modal .modal-container .contact-list .contact-item .contact-actions .delete-btn:hover{background:#e74c3c;color:white}.new-chat-modal .modal-container .contact-list .contact-item .checkbox{width:1.125rem;height:1.125rem;border:2px solid #6c8cd5;border-radius:4px;display:none;position:absolute;right:0.75rem;transition:all 0.2s}.new-chat-modal .modal-container .contact-list .contact-item .checkbox:after{content:"";position:absolute;left:0.3125rem;top:0.125rem;width:0.3125rem;height:0.625rem;border:solid white;border-width:0 2px 2px 0;transform:rotate(45deg);opacity:0}.new-chat-modal .modal-container .contact-list .contact-item.selected .checkbox{background:#6c8cd5}.new-chat-modal .modal-container .contact-list .contact-item.selected .checkbox:after{opacity:1}.new-chat-modal .modal-container .contact-list .contact-item.add-friend-item{margin-bottom:0.5rem;color:#6c8cd5;font-weight:500}.new-chat-modal .modal-container .contact-list .contact-item.add-friend-item:hover{background:rgba(108,140,213,0.1)}.new-chat-modal .modal-container .contact-list .contact-item.add-friend-item .add-friend-icon{width:2.25rem;height:2.25rem;border-radius:50%;background:#6c8cd5;color:white;display:flex;align-items:center;justify-content:center;font-size:1.25rem;font-weight:bold;line-height:1 !important;text-align:center;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;margin:0;padding:0;vertical-align:baseline;position:relative}.new-chat-modal .modal-container .contact-list .contact-item.add-friend-item .add-friend-icon::before{content:none}.new-chat-modal .modal-container .contact-list .contact-item.add-friend-item .add-friend-icon::after{content:none}.new-chat-modal .modal-container .contact-list .empty-contacts-hint{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:1.25rem;color:#666}.new-chat-modal .modal-container .contact-list .empty-contacts-hint .empty-icon{font-size:2rem;margin-bottom:0.5rem;opacity:0.6}.new-chat-modal .modal-container .contact-list .empty-contacts-hint .empty-text{font-size:0.875rem;font-weight:500;color:#666;margin-bottom:0.25rem}.new-chat-modal .modal-container .contact-list .empty-contacts-hint .empty-hint{font-size:0.75rem;color:#999;line-height:1.4}.new-chat-modal .modal-container.group-mode .contact-item .checkbox{display:block}.new-chat-modal .modal-container .modal-buttons{display:flex;gap:0.75rem;margin-top:1.5rem}.new-chat-modal .modal-container .modal-buttons .modal-btn{flex:1;padding:0.75rem;border:none;border-radius:0.5rem;font-weight:500;cursor:pointer;transition:background 0.2s}.new-chat-modal .modal-container .modal-buttons .modal-btn.cancel-btn{background:#f5f5f5;color:#666}.new-chat-modal .modal-container .modal-buttons .modal-btn.cancel-btn:hover{background:#e0e0e0}.new-chat-modal .modal-container .modal-buttons .modal-btn.confirm-btn{background:#6c8cd5;color:white}.new-chat-modal .modal-container .modal-buttons .modal-btn.confirm-btn:hover{background:#4a6fbf}.new-chat-modal.group-mode .contact-actions .edit-btn,.new-chat-modal.group-mode .contact-actions .delete-btn{display:none !important}.add-friend-modal{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:1000;border-radius:1.5rem;opacity:0;transition:opacity 0.3s ease}.add-friend-modal.show{opacity:1}.add-friend-modal .modal-container{width:17.5rem;max-width:85%;background:white;border-radius:1rem;padding:1.25rem;position:relative}.add-friend-modal .modal-container .modal-title{font-size:1.125rem;font-weight:600;margin-bottom:1rem;color:#333}.add-friend-modal .modal-container .add-friend-form .form-group{margin-bottom:1rem}.add-friend-modal .modal-container .add-friend-form .form-group label{display:block;font-size:0.875rem;font-weight:500;color:#333;margin-bottom:0.5rem}.add-friend-modal .modal-container .add-friend-form .form-group input[type=text],.add-friend-modal .modal-container .add-friend-form .form-group input[type=url]{width:100%;padding:0.75rem;border:0.125rem solid #e0e0e0;border-radius:0.5rem;font-size:0.875rem;transition:border-color 0.2s}.add-friend-modal .modal-container .add-friend-form .form-group input[type=text]:focus,.add-friend-modal .modal-container .add-friend-form .form-group input[type=url]:focus{outline:none;border-color:#6c8cd5}.add-friend-modal .modal-container .add-friend-form .form-group input[type=text]::placeholder,.add-friend-modal .modal-container .add-friend-form .form-group input[type=url]::placeholder{color:#999}.add-friend-modal .modal-container .add-friend-form .form-group input[type=file]{width:100%;padding:0.5rem;border:0.125rem dashed #e0e0e0;border-radius:0.5rem;background:#f9f9f9;cursor:pointer}.add-friend-modal .modal-container .add-friend-form .form-group input[type=file]:hover{border-color:#6c8cd5;background:#f0f4ff}.add-friend-modal .modal-container .add-friend-form .form-group .error-message{color:#e74c3c;font-size:0.75rem;margin-top:0.25rem;display:none}.add-friend-modal .modal-container .add-friend-form .form-group .file-upload-btn{width:100%;padding:0.75rem 1rem;border:0.125rem solid #6c8cd5;border-radius:0.5rem;background:white;color:#6c8cd5;font-size:0.875rem;font-weight:500;cursor:pointer;transition:all 0.2s;display:flex;align-items:center;justify-content:center;gap:0.5rem}.add-friend-modal .modal-container .add-friend-form .form-group .file-upload-btn:hover{background:#6c8cd5;color:white;transform:translateY(-0.0625rem);box-shadow:0 0.125rem 0.5rem rgba(108,140,213,0.3)}.add-friend-modal .modal-container .add-friend-form .form-group .file-upload-btn:active{transform:translateY(0)}.add-friend-modal .modal-container .add-friend-form .form-group .file-upload-btn svg{flex-shrink:0}.add-friend-modal .modal-container .add-friend-form .avatar-options{display:flex;gap:1rem;margin-bottom:0.5rem}.add-friend-modal .modal-container .add-friend-form .avatar-options .avatar-option{display:flex;align-items:center;gap:0.375rem}.add-friend-modal .modal-container .add-friend-form .avatar-options .avatar-option input[type=radio]{margin:0}.add-friend-modal .modal-container .add-friend-form .avatar-options .avatar-option label{margin:0;font-size:0.875rem;cursor:pointer}.add-friend-modal .modal-container .add-friend-form .avatar-preview{display:flex;justify-content:center;align-items:center;margin-top:1rem}.add-friend-modal .modal-container .add-friend-form .avatar-preview img{width:5rem;height:5rem;border-radius:50%;object-fit:cover;border:0.1875rem solid #6c8cd5;box-shadow:0 0.125rem 0.5rem rgba(0,0,0,0.1);display:block}.add-friend-modal .modal-container .modal-buttons{display:flex;gap:0.75rem;margin-top:1.5rem}.add-friend-modal .modal-container .modal-buttons .modal-btn{flex:1;padding:0.75rem;border:none;border-radius:0.5rem;font-weight:500;cursor:pointer;transition:background 0.2s}.add-friend-modal .modal-container .modal-buttons .modal-btn.cancel-btn{background:#f5f5f5;color:#666}.add-friend-modal .modal-container .modal-buttons .modal-btn.cancel-btn:hover{background:#e0e0e0}.add-friend-modal .modal-container .modal-buttons .modal-btn.confirm-btn{background:#6c8cd5;color:white}.add-friend-modal .modal-container .modal-buttons .modal-btn.confirm-btn:hover{background:#4a6fbf}.edit-contact-modal{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:1000;border-radius:1.5rem;opacity:0;transition:opacity 0.3s ease}.edit-contact-modal.show{opacity:1}.edit-contact-modal .modal-container{width:17.5rem;max-width:85%;background:white;border-radius:1rem;padding:1.25rem;position:relative}.edit-contact-modal .modal-container .modal-title{font-size:1.125rem;font-weight:600;margin-bottom:1rem;color:#333}.edit-contact-modal .modal-container .edit-contact-form .form-group{margin-bottom:1rem}.edit-contact-modal .modal-container .edit-contact-form .form-group label{display:block;font-size:0.875rem;font-weight:500;color:#333;margin-bottom:0.5rem}.edit-contact-modal .modal-container .edit-contact-form .form-group input[type=text],.edit-contact-modal .modal-container .edit-contact-form .form-group input[type=url]{width:100%;padding:0.75rem;border:0.125rem solid #e0e0e0;border-radius:0.5rem;font-size:0.875rem;transition:border-color 0.2s}.edit-contact-modal .modal-container .edit-contact-form .form-group input[type=text]:focus,.edit-contact-modal .modal-container .edit-contact-form .form-group input[type=url]:focus{outline:none;border-color:#6c8cd5}.edit-contact-modal .modal-container .edit-contact-form .form-group input[type=text]::placeholder,.edit-contact-modal .modal-container .edit-contact-form .form-group input[type=url]::placeholder{color:#999}.edit-contact-modal .modal-container .edit-contact-form .form-group .error-message{color:#e74c3c;font-size:0.75rem;margin-top:0.25rem;display:none}.edit-contact-modal .modal-container .edit-contact-form .form-group .file-upload-btn{width:100%;padding:0.75rem 1rem;border:0.125rem solid #6c8cd5;border-radius:0.5rem;background:white;color:#6c8cd5;font-size:0.875rem;font-weight:500;cursor:pointer;transition:all 0.2s;display:flex;align-items:center;justify-content:center;gap:0.5rem}.edit-contact-modal .modal-container .edit-contact-form .form-group .file-upload-btn:hover{background:#6c8cd5;color:white;transform:translateY(-0.0625rem);box-shadow:0 0.125rem 0.5rem rgba(108,140,213,0.3)}.edit-contact-modal .modal-container .edit-contact-form .form-group .file-upload-btn:active{transform:translateY(0)}.edit-contact-modal .modal-container .edit-contact-form .form-group .file-upload-btn svg{flex-shrink:0}.edit-contact-modal .modal-container .edit-contact-form .avatar-options{display:flex;gap:1rem;margin-bottom:0.5rem}.edit-contact-modal .modal-container .edit-contact-form .avatar-options .avatar-option{display:flex;align-items:center;gap:0.375rem}.edit-contact-modal .modal-container .edit-contact-form .avatar-options .avatar-option input[type=radio]{margin:0}.edit-contact-modal .modal-container .edit-contact-form .avatar-options .avatar-option label{margin:0;font-size:0.875rem;cursor:pointer}.edit-contact-modal .modal-container .edit-contact-form .avatar-preview{display:flex;justify-content:center;align-items:center;margin-top:1rem}.edit-contact-modal .modal-container .edit-contact-form .avatar-preview img{width:5rem;height:5rem;border-radius:50%;object-fit:cover;border:0.1875rem solid #6c8cd5;box-shadow:0 0.125rem 0.5rem rgba(0,0,0,0.1);display:block}.edit-contact-modal .modal-container .modal-buttons{display:flex;gap:0.75rem;margin-top:1.5rem}.edit-contact-modal .modal-container .modal-buttons .modal-btn{flex:1;padding:0.75rem;border:none;border-radius:0.5rem;font-weight:500;cursor:pointer;transition:background 0.2s}.edit-contact-modal .modal-container .modal-buttons .modal-btn.cancel-btn{background:#f5f5f5;color:#666}.edit-contact-modal .modal-container .modal-buttons .modal-btn.cancel-btn:hover{background:#e0e0e0}.edit-contact-modal .modal-container .modal-buttons .modal-btn.confirm-btn{background:#6c8cd5;color:white}.edit-contact-modal .modal-container .modal-buttons .modal-btn.confirm-btn:hover{background:#4a6fbf}.delete-confirm-modal{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:1000;border-radius:1.5rem;opacity:0;transition:opacity 0.3s ease}.delete-confirm-modal.show{opacity:1}.delete-confirm-modal .modal-container{width:18.75rem;max-width:85%;background:white;border-radius:1rem;padding:1.25rem;position:relative}.delete-confirm-modal .modal-container .modal-title{font-size:1.125rem;font-weight:600;margin-bottom:1rem;color:#333;text-align:center}.delete-confirm-modal .modal-container .delete-confirm-content{text-align:center;margin-bottom:1.5rem}.delete-confirm-modal .modal-container .delete-confirm-content .warning-icon{font-size:3rem;margin-bottom:1rem}.delete-confirm-modal .modal-container .delete-confirm-content .delete-message{margin-bottom:1.25rem}.delete-confirm-modal .modal-container .delete-confirm-content .delete-message p{margin:0 0 0.5rem 0;color:#333;line-height:1.4}.delete-confirm-modal .modal-container .delete-confirm-content .delete-message .delete-note{font-size:0.75rem;color:#666;font-style:italic}.delete-confirm-modal .modal-container .delete-confirm-content .delete-message strong{color:#e74c3c}.delete-confirm-modal .modal-container .delete-confirm-content .contact-preview{display:flex;align-items:center;justify-content:center;gap:0.75rem;padding:0.75rem;background:#f8f9fa;border-radius:0.5rem;border:1px solid #e0e0e0}.delete-confirm-modal .modal-container .delete-confirm-content .contact-preview .preview-avatar{width:2.5rem;height:2.5rem;border-radius:50%;object-fit:cover}.delete-confirm-modal .modal-container .delete-confirm-content .contact-preview .preview-name{font-size:0.875rem;font-weight:500;color:#333}.delete-confirm-modal .modal-container .modal-buttons{display:flex;gap:0.75rem}.delete-confirm-modal .modal-container .modal-buttons .modal-btn{flex:1;padding:0.75rem;border:none;border-radius:0.5rem;font-weight:500;cursor:pointer;transition:background 0.2s}.delete-confirm-modal .modal-container .modal-buttons .modal-btn.cancel-btn{background:#f5f5f5;color:#666}.delete-confirm-modal .modal-container .modal-buttons .modal-btn.cancel-btn:hover{background:#e0e0e0}.delete-confirm-modal .modal-container .modal-buttons .modal-btn.delete-btn{background:#e74c3c;color:white}.delete-confirm-modal .modal-container .modal-buttons .modal-btn.delete-btn:hover{background:#c0392b}
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** css ./node_modules/.pnpm/css-loader@7.1.2_webpack@5.101.3/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[1]!./node_modules/.pnpm/postcss-loader@8.1.1_postcs_7e5278d575df5928f9b244ea375b369e/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[2]!./node_modules/.pnpm/sass-loader@16.0.5_sass@1.90.0_webpack@5.101.3/node_modules/sass-loader/dist/cjs.js!./src/多云熊/备份/给rovo的/modules/chatList/unreadBadge.scss ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
@charset "UTF-8";.chat-time-container{position:relative;display:flex;flex-direction:column;align-items:flex-end;gap:0.375rem}.unread-badge{position:absolute;top:1.375rem;right:0.125rem;width:18px;height:18px;min-width:18px;background:linear-gradient(135deg,#ff4757,#ff3742);border-radius:50%;opacity:0;transform:scale(0.8);transition:all 0.2s cubic-bezier(0.34,1.56,0.64,1);box-shadow:0 1px 3px rgba(255,71,87,0.4);color:white;font-size:0.625rem;font-weight:600;display:flex;align-items:center;justify-content:center;line-height:1;padding:0}.unread-badge.show{opacity:1;transform:scale(1)}.unread-badge.bounce{animation:unreadBadgeBounce 0.6s cubic-bezier(0.68,-0.55,0.265,1.55)}.unread-badge.pulse{animation:unreadBadgePulse 1s ease-in-out}@media (prefers-color-scheme:dark){.unread-badge{box-shadow:0 1px 3px rgba(255,71,87,0.5)}}@media (max-width:768px){.unread-badge{width:16px;height:16px;min-width:16px;font-size:9px}}@keyframes unreadBadgeBounce{0%{transform:scale(0.3);opacity:0}50%{transform:scale(1.2);opacity:1}100%{transform:scale(1);opacity:1}}@keyframes unreadBadgePulse{0%,100%{transform:scale(1);box-shadow:0 1px 3px rgba(255,71,87,0.4)}50%{transform:scale(1.1);box-shadow:0 2px 6px rgba(255,71,87,0.6)}}.chat-list-item{position:relative}.chat-list-item:has(.unread-badge.show) .chat-name{font-weight:600;color:#2c3e50}.chat-list-item:has(.unread-badge.show) .chat-preview{color:#34495e}@media (prefers-color-scheme:dark){.chat-list-item:has(.unread-badge.show) .chat-name{color:#ecf0f1}.chat-list-item:has(.unread-badge.show) .chat-preview{color:#bdc3c7}}
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** css ./node_modules/.pnpm/css-loader@7.1.2_webpack@5.101.3/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[1]!./node_modules/.pnpm/postcss-loader@8.1.1_postcs_7e5278d575df5928f9b244ea375b369e/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[2]!./node_modules/.pnpm/sass-loader@16.0.5_sass@1.90.0_webpack@5.101.3/node_modules/sass-loader/dist/cjs.js!./src/多云熊/备份/给rovo的/modules/profile/profile.scss ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
@charset "UTF-8";.profile-interface{position:absolute;top:0;left:0;width:100%;height:100%;z-index:3;display:none;background-image:url("https://files.catbox.moe/o84j4n.jpg");background-size:cover;background-position:center;border-radius:1.5rem;overflow:hidden}.profile-interface.active{display:block}.profile-interface .status-bar{position:absolute;top:0;left:0;width:100%;height:1.5rem;background:rgba(0,0,0,0.5);display:flex;justify-content:space-between;align-items:center;padding:0 1rem;color:#fff;font-size:0.75rem;z-index:1}.profile-interface .status-bar .status-bar-left{display:flex;align-items:center;gap:0.25rem}.profile-interface .status-bar .status-bar-right{display:flex;align-items:center;gap:0.5rem}.profile-interface .status-bar .status-icon-svg{width:1rem;height:1rem;fill:#fff}.profile-interface .profile-content{width:100%;height:calc(100% - 1.5rem - 3.125rem);background:rgba(255,255,255,0.9);background-blend-mode:overlay;position:relative;top:1.5rem;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2.5rem 1.25rem;gap:2.5rem}.profile-interface .user-info-section{display:flex;flex-direction:column;align-items:center;gap:1.25rem;width:100%;max-width:18.75rem}.profile-interface .user-info-section .user-avatar{position:relative;width:7.5rem;height:7.5rem;border-radius:50%;overflow:hidden;border:4px solid #fff;box-shadow:0 4px 12px rgba(0,0,0,0.15);cursor:pointer;transition:all 0.3s ease}.profile-interface .user-info-section .user-avatar:hover{transform:scale(1.05);box-shadow:0 0.375rem 1rem rgba(0,0,0,0.2)}.profile-interface .user-info-section .user-avatar img{width:100%;height:100%;object-fit:cover}.profile-interface .user-info-section .user-avatar .avatar-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity 0.3s ease;color:white;font-size:0.875rem;font-weight:500}.profile-interface .user-info-section .user-avatar .avatar-overlay svg{width:1.5rem;height:1.5rem;margin-bottom:0.25rem}.profile-interface .user-info-section .user-avatar:hover .avatar-overlay{opacity:1}.profile-interface .user-info-section .user-avatar.loading .avatar-overlay{opacity:1;background:rgba(108,140,213,0.8)}.profile-interface .user-info-section .user-name{position:relative;text-align:center}.profile-interface .user-info-section .user-name .name-display{font-size:1.5rem;font-weight:600;color:#333;cursor:pointer;padding:0.5rem 1rem;border-radius:0.5rem;transition:all 0.2s ease;min-width:7.5rem;display:inline-block}.profile-interface .user-info-section .user-name .name-display:hover{background:rgba(108,140,213,0.1)}.profile-interface .user-info-section .user-name .name-edit{display:none;flex-direction:column;gap:0.75rem;align-items:center}.profile-interface .user-info-section .user-name .name-edit.active{display:flex}.profile-interface .user-info-section .user-name .name-edit input{font-size:1.125rem;font-weight:600;color:#333;text-align:center;border:2px solid #6c8cd5;border-radius:0.5rem;padding:0.5rem 1rem;background:white;width:100%;outline:none}.profile-interface .user-info-section .user-name .name-edit input:focus{border-color:#4a6fbf;box-shadow:0 0 0 0.1875rem rgba(108,140,213,0.1)}.profile-interface .user-info-section .user-name .name-edit .edit-buttons{display:flex;gap:0.75rem}.profile-interface .user-info-section .user-name .name-edit .edit-buttons .btn{padding:0.5rem 1rem;border:none;border-radius:0.375rem;font-size:0.875rem;font-weight:500;cursor:pointer;transition:all 0.2s ease}.profile-interface .user-info-section .user-name .name-edit .edit-buttons .btn.confirm-btn{background:#6c8cd5;color:white}.profile-interface .user-info-section .user-name .name-edit .edit-buttons .btn.confirm-btn:hover{background:#4a6fbf;transform:translateY(-0.0625rem)}.profile-interface .user-info-section .user-name .name-edit .edit-buttons .btn.cancel-btn{background:#f5f5f5;color:#666}.profile-interface .user-info-section .user-name .name-edit .edit-buttons .btn.cancel-btn:hover{background:#e0e0e0}.profile-interface .settings-section{width:100%;max-width:18.75rem;display:flex;flex-direction:column;gap:0.75rem}.profile-interface .settings-section .settings-button{width:100%;padding:1rem 1.5rem;background:white;border:2px solid #6c8cd5;border-radius:0.75rem;color:#6c8cd5;font-size:1.125rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;display:flex;align-items:center;justify-content:center;gap:0.75rem;box-shadow:0 0.125rem 0.5rem rgba(0,0,0,0.1)}.profile-interface .settings-section .settings-button:hover:not(:disabled){background:#6c8cd5;color:white;transform:translateY(-0.125rem);box-shadow:0 0.25rem 0.75rem rgba(108,140,213,0.3)}.profile-interface .settings-section .settings-button:disabled{opacity:0.6;cursor:not-allowed;transform:none}.profile-interface .settings-section .settings-button svg{width:1.5rem;height:1.5rem}.profile-interface .settings-section .settings-button#extensionSettingsButton{border-color:#48bb78;color:#48bb78}.profile-interface .settings-section .settings-button#extensionSettingsButton:hover:not(:disabled){background:#48bb78;color:white;box-shadow:0 0.25rem 0.75rem rgba(72,187,120,0.3)}.settings-modal{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:1000;border-radius:1.5rem;opacity:0;visibility:hidden;transition:all 0.3s ease}.settings-modal.show{opacity:1;visibility:visible}.settings-modal .modal-container{width:90%;max-width:25rem;max-height:80%;background:white;border-radius:1rem;padding:1.5rem;position:relative;overflow-y:auto;transform:scale(0.9) translateY(1.25rem);transition:transform 0.3s ease}.settings-modal .modal-container::-webkit-scrollbar{width:6px}.settings-modal .modal-container::-webkit-scrollbar-track{background:transparent}.settings-modal .modal-container::-webkit-scrollbar-thumb{background:rgba(0,0,0,0.1);border-radius:3px}.settings-modal.show .modal-container{transform:scale(1) translateY(0)}.settings-modal .modal-header{position:relative;text-align:center;margin-bottom:1.5rem;border-bottom:1px solid #f0f0f0}.settings-modal .modal-header .modal-title{font-size:1.125rem;font-weight:600;color:#333;line-height:1.5}.settings-modal .modal-header .close-btn{position:absolute;top:-0.75rem;right:-0.75rem;width:2rem;height:2rem;border:none;background:transparent;cursor:pointer;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:background 0.2s ease}.settings-modal .modal-header .close-btn:hover{background:rgba(0,0,0,0.05)}.settings-modal .modal-header .close-btn svg{width:1.25rem;height:1.25rem;color:#888}.settings-modal .modal-content .setting-group{margin-bottom:2rem}.settings-modal .modal-content .setting-group:last-child{margin-bottom:0}.settings-modal .modal-content .setting-group .group-title{font-size:1.125rem;font-weight:600;color:#333;margin-bottom:1rem;display:flex;align-items:center;gap:0.5rem}.settings-modal .modal-content .setting-group .group-title svg{width:1.25rem;height:1.25rem;color:#6c8cd5}.settings-modal .modal-content .setting-group .setting-item{margin-bottom:1rem;padding:1rem;background:#f8f9fa;border-radius:0.75rem;border:1px solid rgba(0,0,0,0.05)}.settings-modal .modal-content .setting-group .setting-item:last-child{margin-bottom:0}.settings-modal .modal-content .setting-group .setting-item .item-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:0.5rem}.settings-modal .modal-content .setting-group .setting-item .item-header .item-title{font-size:1rem;font-weight:500;color:#333}.settings-modal .modal-content .setting-group .setting-item .item-header .toggle-switch{position:relative;width:3rem;height:1.5rem;background:#ccc;border-radius:0.75rem;cursor:pointer;transition:background 0.3s ease}.settings-modal .modal-content .setting-group .setting-item .item-header .toggle-switch.active{background:#6c8cd5}.settings-modal .modal-content .setting-group .setting-item .item-header .toggle-switch .toggle-handle{position:absolute;top:0.125rem;left:0.125rem;width:1.25rem;height:1.25rem;background:white;border-radius:50%;transition:transform 0.3s ease;box-shadow:0 0.125rem 0.25rem rgba(0,0,0,0.2)}.settings-modal .modal-content .setting-group .setting-item .item-header .toggle-switch.active .toggle-handle{transform:translateX(1.5rem)}.settings-modal .modal-content .setting-group .setting-item .item-header .action-btn{display:flex;align-items:center;gap:0.25rem;padding:0.375rem 0.75rem;border:none;border-radius:0.375rem;font-size:0.75rem;font-weight:500;cursor:pointer;transition:all 0.2s ease;background:#6c8cd5;color:white;min-width:auto;height:auto}.settings-modal .modal-content .setting-group .setting-item .item-header .action-btn:hover{background:#5a7bc4;transform:translateY(-0.0625rem)}.settings-modal .modal-content .setting-group .setting-item .item-header .action-btn:active{transform:translateY(0)}.settings-modal .modal-content .setting-group .setting-item .item-header .action-btn.danger-btn{background:#e74c3c;color:white}.settings-modal .modal-content .setting-group .setting-item .item-header .action-btn.danger-btn:hover{background:#c0392b}.settings-modal .modal-content .setting-group .setting-item .item-header .action-btn svg{width:0.875rem;height:0.875rem;flex-shrink:0}.settings-modal .modal-content .setting-group .setting-item .item-description{font-size:0.875rem;color:#666;line-height:1.4}.settings-modal .modal-content .setting-group .setting-item .upload-area{border:2px dashed #d9dde4;border-radius:8px;padding:1rem;cursor:pointer;transition:all 0.2s ease;background:linear-gradient(135deg,#fdfdff 0%,#f8faff 100%);display:flex !important;align-items:center;justify-content:center;gap:0.75rem;height:5rem;margin-top:0.75rem;position:relative;overflow:hidden}.settings-modal .modal-content .setting-group .setting-item .upload-area::before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(45deg,transparent 30%,rgba(108,140,213,0.05) 50%,transparent 70%);opacity:0;transition:opacity 0.3s ease}.settings-modal .modal-content .setting-group .setting-item .upload-area:hover{border-color:#6c8cd5;background:linear-gradient(135deg,#f7f9ff 0%,#f0f4ff 100%);transform:translateY(-1px);box-shadow:0 6px 20px rgba(108,140,213,0.15)}.settings-modal .modal-content .setting-group .setting-item .upload-area:hover::before{opacity:1}.settings-modal .modal-content .setting-group .setting-item .upload-area:hover .upload-icon{transform:scale(1.1);color:#5a7bc8}.settings-modal .modal-content .setting-group .setting-item .upload-area:hover .upload-text{color:#333}.settings-modal .modal-content .setting-group .setting-item .upload-area .upload-icon{width:1.5rem;height:1.5rem;color:#6c8cd5;flex-shrink:0;transition:all 0.2s ease;filter:drop-shadow(0 1px 2px rgba(108,140,213,0.2))}.settings-modal .modal-content .setting-group .setting-item .upload-area .upload-info{display:flex;flex-direction:column;align-items:flex-start;gap:0.125rem}.settings-modal .modal-content .setting-group .setting-item .upload-area .upload-text{font-size:0.875rem;color:#555;font-weight:600;transition:color 0.2s ease;letter-spacing:0.01em;line-height:1.2}.settings-modal .modal-content .setting-group .setting-item .upload-area .upload-hint{font-size:0.75rem;color:#888;line-height:1.3;opacity:0.8;transition:opacity 0.2s ease}.settings-modal .modal-content .setting-group .setting-item .upload-area:hover .upload-hint{opacity:1}.settings-modal .modal-content .setting-group .setting-item .wallpaper-preview{margin-top:0.75rem;border-radius:8px;overflow:hidden;position:relative;transition:all 0.2s ease}.settings-modal .modal-content .setting-group .setting-item .wallpaper-preview:hover{transform:scale(1.02);box-shadow:0 4px 12px rgba(0,0,0,0.15)}.settings-modal .modal-content .setting-group .setting-item .wallpaper-preview img{width:100%;height:5rem;object-fit:cover;display:block}.settings-modal .modal-content .setting-group .setting-item .wallpaper-preview .preview-overlay{position:absolute;top:0;right:0;padding:4px;display:flex;gap:4px;opacity:0;transition:opacity 0.2s ease}.settings-modal .modal-content .setting-group .setting-item .wallpaper-preview .preview-overlay .remove-btn,.settings-modal .modal-content .setting-group .setting-item .wallpaper-preview .preview-overlay .apply-all-btn{width:24px;height:24px;border:none;color:white;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.2s ease}.settings-modal .modal-content .setting-group .setting-item .wallpaper-preview .preview-overlay .remove-btn svg,.settings-modal .modal-content .setting-group .setting-item .wallpaper-preview .preview-overlay .apply-all-btn svg{width:12px;height:12px}.settings-modal .modal-content .setting-group .setting-item .wallpaper-preview .preview-overlay .remove-btn{background:rgba(0,0,0,0.6)}.settings-modal .modal-content .setting-group .setting-item .wallpaper-preview .preview-overlay .remove-btn:hover{background:rgba(231,76,60,0.8)}.settings-modal .modal-content .setting-group .setting-item .wallpaper-preview .preview-overlay .apply-all-btn{background:rgba(46,204,113,0.6)}.settings-modal .modal-content .setting-group .setting-item .wallpaper-preview .preview-overlay .apply-all-btn:hover{background:rgba(46,204,113,0.8)}.settings-modal .modal-content .setting-group .setting-item .wallpaper-preview:hover .preview-overlay{opacity:1}.settings-modal .modal-content .setting-group .setting-item .wallpaper-preview::after{content:"点击更换壁纸";position:absolute;bottom:0;left:0;right:0;background:rgba(0,0,0,0.7);color:white;text-align:center;padding:4px;font-size:12px;opacity:0;transition:opacity 0.2s ease}.settings-modal .modal-content .setting-group .setting-item .wallpaper-preview:hover::after{opacity:1}.confirm-dialog-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);display:flex;align-items:center;justify-content:center;z-index:10;border-radius:1.5rem}.confirm-dialog-overlay .confirm-dialog{background:white;border-radius:0.75rem;padding:1.5rem;max-width:20rem;width:90%;box-shadow:0 0.5rem 2rem rgba(0,0,0,0.3);position:relative;z-index:11;animation:dialogFadeIn 0.3s ease}.confirm-dialog-overlay .confirm-dialog .dialog-header{margin-bottom:1rem;text-align:center}.confirm-dialog-overlay .confirm-dialog .dialog-header h3{margin:0;font-size:1.125rem;font-weight:600;color:#e74c3c}.confirm-dialog-overlay .confirm-dialog .dialog-content{margin-bottom:1.5rem}.confirm-dialog-overlay .confirm-dialog .dialog-content p{margin:0;font-size:0.875rem;line-height:1.5;color:#333;text-align:center}.confirm-dialog-overlay .confirm-dialog .dialog-buttons{display:flex;gap:0.75rem;justify-content:center}.confirm-dialog-overlay .confirm-dialog .dialog-buttons button{padding:0.625rem 1.25rem;border:none;border-radius:0.375rem;font-size:0.875rem;cursor:pointer;font-weight:500;transition:all 0.2s}.confirm-dialog-overlay .confirm-dialog .dialog-buttons button.cancel-btn{background:#f0f0f0;color:#666}.confirm-dialog-overlay .confirm-dialog .dialog-buttons button.cancel-btn:hover{background:#e0e0e0}.confirm-dialog-overlay .confirm-dialog .dialog-buttons button.confirm-btn{background:#e74c3c;color:white}.confirm-dialog-overlay .confirm-dialog .dialog-buttons button.confirm-btn:hover{background:#c0392b}.confirm-dialog-overlay .confirm-dialog .dialog-buttons button.confirm-btn.danger{background:#e74c3c}.confirm-dialog-overlay .confirm-dialog .dialog-buttons button.confirm-btn.danger:hover{background:#c0392b}@keyframes dialogFadeIn{from{opacity:0;transform:scale(0.9) translateY(-1.25rem)}to{opacity:1;transform:scale(1) translateY(0)}}@media (max-width:30rem){.profile-interface .profile-content{padding:1.25rem 1rem;gap:1.875rem}.profile-interface .user-info-section .user-avatar{width:6.25rem;height:6.25rem}.profile-interface .user-info-section .user-name .name-display{font-size:1.25rem}.profile-interface .settings-section{gap:0.5rem}.profile-interface .settings-section .settings-button{font-size:1rem;padding:0.875rem 1.25rem}.settings-modal .modal-container{width:95%;padding:1.25rem}}@keyframes fadeIn{from{opacity:0;transform:translateY(1.25rem)}to{opacity:1;transform:translateY(0)}}@keyframes slideUp{from{transform:translateY(100%)}to{transform:translateY(0)}}.loading-spinner{width:1.25rem;height:1.25rem;border:2px solid #f3f3f3;border-top:2px solid #6c8cd5;border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** css ./node_modules/.pnpm/css-loader@7.1.2_webpack@5.101.3/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[1]!./node_modules/.pnpm/postcss-loader@8.1.1_postcs_7e5278d575df5928f9b244ea375b369e/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[2]!./node_modules/.pnpm/sass-loader@16.0.5_sass@1.90.0_webpack@5.101.3/node_modules/sass-loader/dist/cjs.js!./src/多云熊/备份/给rovo的/modules/chatMigration/chatMigration.scss ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
@charset "UTF-8";.extension-settings-modal .migration-btn{position:relative}.extension-settings-modal .migration-btn .btn-status{position:absolute;top:1rem;right:1.25rem;font-size:0.75rem;font-weight:500;padding:0.25rem 0.5rem;border-radius:0.375rem;transition:all 0.3s ease}.extension-settings-modal .migration-btn.enabled{background:linear-gradient(135deg,rgba(72,187,120,0.1),rgba(56,161,105,0.1));border-color:rgba(72,187,120,0.3)}.extension-settings-modal .migration-btn.enabled:hover:not(:disabled){background:linear-gradient(135deg,rgba(72,187,120,0.15),rgba(56,161,105,0.15));border-color:rgba(72,187,120,0.5);transform:translateY(-2px);box-shadow:0 8px 25px rgba(72,187,120,0.2)}.extension-settings-modal .migration-btn.enabled .btn-text{color:#2f855a}.extension-settings-modal .migration-btn.enabled .btn-status{background:rgba(72,187,120,0.2);color:#2f855a}.extension-settings-modal .migration-btn.disabled{background:linear-gradient(135deg,rgba(255,255,255,0.9),rgba(248,250,252,0.9));border-color:rgba(0,0,0,0.1)}.extension-settings-modal .migration-btn.disabled:hover:not(:disabled){background:linear-gradient(135deg,rgba(255,255,255,0.95),rgba(248,250,252,0.95));border-color:rgba(0,0,0,0.15);transform:translateY(-2px);box-shadow:0 8px 25px rgba(0,0,0,0.1)}.extension-settings-modal .migration-btn.disabled .btn-text{color:#2d3748}.extension-settings-modal .migration-btn.disabled .btn-status{background:rgba(0,0,0,0.1);color:#718096}
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** css ./node_modules/.pnpm/css-loader@7.1.2_webpack@5.101.3/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[1]!./node_modules/.pnpm/postcss-loader@8.1.1_postcs_7e5278d575df5928f9b244ea375b369e/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[2]!./node_modules/.pnpm/sass-loader@16.0.5_sass@1.90.0_webpack@5.101.3/node_modules/sass-loader/dist/cjs.js!./src/多云熊/备份/给rovo的/modules/extensions/extensionSettings.scss ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
@charset "UTF-8";.extension-settings-modal{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:1000;border-radius:1.5rem;opacity:0;visibility:hidden;transition:all 0.3s ease}.extension-settings-modal.show{opacity:1;visibility:visible}.extension-settings-modal .modal-container{width:90%;max-width:25rem;max-height:80%;background:white;border-radius:1rem;padding:1.5rem;position:relative;overflow-y:auto;transform:scale(0.9) translateY(1.25rem);transition:transform 0.3s ease}.extension-settings-modal .modal-container::-webkit-scrollbar{width:6px}.extension-settings-modal .modal-container::-webkit-scrollbar-track{background:transparent}.extension-settings-modal .modal-container::-webkit-scrollbar-thumb{background:rgba(0,0,0,0.1);border-radius:3px}.extension-settings-modal.show .modal-container{transform:scale(1) translateY(0)}.extension-settings-modal .modal-header{position:relative;text-align:center;margin-bottom:1.5rem;border-bottom:1px solid #f0f0f0}.extension-settings-modal .modal-header .modal-title{font-size:1.125rem;font-weight:600;color:#333;line-height:1.5}.extension-settings-modal .modal-header .close-btn{position:absolute;top:-0.75rem;right:-0.75rem;width:2rem;height:2rem;border:none;background:transparent;cursor:pointer;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:background 0.2s ease}.extension-settings-modal .modal-header .close-btn:hover{background:rgba(0,0,0,0.05)}.extension-settings-modal .modal-header .close-btn svg{width:1.25rem;height:1.25rem;color:#888}.extension-settings-modal .modal-content .setting-group{margin-bottom:2rem}.extension-settings-modal .modal-content .setting-group:last-child{margin-bottom:0}.extension-settings-modal .modal-content .setting-group .group-title{font-size:1.125rem;font-weight:600;color:#333;margin-bottom:1rem;display:flex;align-items:center;gap:0.5rem}.extension-settings-modal .modal-content .setting-group .group-title svg{width:1.25rem;height:1.25rem;color:#6c8cd5}.extension-settings-modal .modal-content .setting-group .setting-item{margin-bottom:1rem;padding:1rem;background:#f8f9fa;border-radius:0.75rem;border:1px solid rgba(0,0,0,0.05)}.extension-settings-modal .modal-content .setting-group .setting-item:last-child{margin-bottom:0}.extension-settings-modal .extension-btn{width:100%;background:linear-gradient(135deg,rgba(255,255,255,0.9),rgba(248,250,252,0.9));border:1px solid rgba(0,0,0,0.1);border-radius:0.75rem;padding:1rem 1.25rem;cursor:pointer;transition:all 0.3s ease;display:flex;flex-direction:column;align-items:flex-start;text-align:left;position:relative;overflow:hidden}.extension-settings-modal .extension-btn:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 25px rgba(0,0,0,0.15);border-color:rgba(0,0,0,0.2)}.extension-settings-modal .extension-btn:active:not(:disabled){transform:translateY(0)}.extension-settings-modal .extension-btn:disabled{opacity:0.6;cursor:not-allowed}.extension-settings-modal .extension-btn .btn-text{font-size:1rem;font-weight:600;color:#2d3748;margin-bottom:0.25rem;display:block}.extension-settings-modal .extension-btn .btn-desc{font-size:0.875rem;color:#718096;line-height:1.4;display:block}.extension-settings-modal .extension-btn.summary-btn{background:linear-gradient(135deg,rgba(66,153,225,0.1),rgba(49,130,206,0.1));border-color:rgba(66,153,225,0.3)}.extension-settings-modal .extension-btn.summary-btn:hover:not(:disabled){background:linear-gradient(135deg,rgba(66,153,225,0.15),rgba(49,130,206,0.15));border-color:rgba(66,153,225,0.5);transform:translateY(-2px);box-shadow:0 8px 25px rgba(66,153,225,0.2)}.extension-settings-modal .extension-btn.summary-btn .btn-text{color:#2b6cb0}.extension-settings-modal .coming-soon{text-align:center;padding:1.25rem;color:#999;font-style:italic;background:#f8f9fa;border-radius:0.75rem;border:1px solid rgba(0,0,0,0.05)}.extension-confirm-dialog-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.3);display:flex;justify-content:center;align-items:center;z-index:1}.extension-confirm-dialog{background:white;border-radius:1rem;box-shadow:0 10px 30px rgba(0,0,0,0.2);width:90%;max-width:25rem;overflow:hidden}.extension-confirm-dialog .dialog-header{padding:1.25rem 1.5rem 1rem;border-bottom:1px solid #f0f0f0}.extension-confirm-dialog .dialog-header h3{margin:0;font-size:1rem;font-weight:600;color:#333}.extension-confirm-dialog .dialog-content{padding:1rem 1.5rem 1.25rem}.extension-confirm-dialog .dialog-content p{margin:0;color:#666;line-height:1.5}.extension-confirm-dialog .dialog-buttons{display:flex;gap:0.75rem;padding:0 1.5rem 1.25rem;justify-content:flex-end}.extension-confirm-dialog .dialog-buttons button{padding:0.5rem 1rem;border-radius:0.375rem;border:1px solid transparent;font-size:0.875rem;font-weight:500;cursor:pointer;transition:all 0.2s ease;min-width:5rem}.extension-confirm-dialog .dialog-buttons button.cancel-btn{background:#f8f9fa;color:#666;border-color:rgba(0,0,0,0.1)}.extension-confirm-dialog .dialog-buttons button.cancel-btn:hover{background:#e9ecef;border-color:rgba(0,0,0,0.2)}.extension-confirm-dialog .dialog-buttons button.confirm-btn{background:#6c8cd5;color:white}.extension-confirm-dialog .dialog-buttons button.confirm-btn:hover{background:#5a7bc4}.extension-confirm-dialog .dialog-buttons button.confirm-btn.primary{background:#48bb78}.extension-confirm-dialog .dialog-buttons button.confirm-btn.primary:hover{background:#38a169}.extension-confirm-dialog .dialog-buttons button.confirm-btn.danger{background:#f56565}.extension-confirm-dialog .dialog-buttons button.confirm-btn.danger:hover{background:#e53e3e}@media screen and (max-width:25rem){.extension-settings-modal .modal-container{width:calc(100% - 1.25rem);margin:0.625rem}.extension-settings-modal .extension-btn{padding:0.875rem}.extension-settings-modal .extension-btn .btn-text{font-size:0.9375rem}.extension-settings-modal .extension-btn .btn-desc{font-size:0.8125rem}.extension-confirm-dialog{width:calc(100% - 1.25rem);margin:0.625rem}.extension-confirm-dialog .dialog-header{padding:1rem 1.25rem 0.75rem}.extension-confirm-dialog .dialog-header h3{font-size:0.9375rem}.extension-confirm-dialog .dialog-content{padding:0.75rem 1.25rem 1rem}.extension-confirm-dialog .dialog-content p{font-size:0.875rem}.extension-confirm-dialog .dialog-buttons{padding:0 1.25rem 1rem}.extension-confirm-dialog .dialog-buttons button{padding:0.375rem 0.75rem;font-size:0.8125rem;min-width:4.375rem}}
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** css ./node_modules/.pnpm/css-loader@7.1.2_webpack@5.101.3/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[1]!./node_modules/.pnpm/postcss-loader@8.1.1_postcs_7e5278d575df5928f9b244ea375b369e/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[2]!./node_modules/.pnpm/sass-loader@16.0.5_sass@1.90.0_webpack@5.101.3/node_modules/sass-loader/dist/cjs.js!./src/多云熊/备份/给rovo的/modules/groupChat/groupChatModal.scss ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
@charset "UTF-8";.group-chat-modal{position:absolute;top:0;left:0;width:100%;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:1001;opacity:0;visibility:hidden;transition:all 0.3s ease}.group-chat-modal.show{opacity:1;visibility:visible}.group-chat-modal .modal-container{width:20rem;max-width:90%;background:white;border-radius:0.75rem;padding:1.5rem;box-shadow:0 0.5rem 2rem rgba(0,0,0,0.3);position:relative;transform:scale(0.9);transition:transform 0.3s ease;overflow-y:auto;scrollbar-width:thin;scrollbar-color:#c1c1c1 transparent}.group-chat-modal .modal-container::-webkit-scrollbar{width:8px}.group-chat-modal .modal-container::-webkit-scrollbar-track{background:transparent}.group-chat-modal .modal-container::-webkit-scrollbar-thumb{background:rgba(193,193,193,0.8);border-radius:4px;border:1px solid transparent;background-clip:content-box}.group-chat-modal .modal-container::-webkit-scrollbar-thumb:hover{background:rgba(168,168,168,0.9);background-clip:content-box}.group-chat-modal .modal-container::-webkit-scrollbar-corner{background:transparent}.group-chat-modal .modal-container .modal-title{font-size:1.125rem;font-weight:600;color:#333;margin-bottom:1.25rem;text-align:center}.group-chat-modal .modal-container .selected-members{margin-bottom:1.25rem}.group-chat-modal .modal-container .selected-members .members-label{font-size:0.875rem;color:#666;margin-bottom:0.5rem}.group-chat-modal .modal-container .selected-members .members-list{display:flex;flex-wrap:wrap;gap:0.5rem}.group-chat-modal .modal-container .selected-members .members-list .member-tag{display:flex;align-items:center;gap:0.375rem;background:#f0f4ff;color:#6c8cd5;padding:0.25rem 0.5rem;border-radius:1rem;font-size:0.75rem}.group-chat-modal .modal-container .selected-members .members-list .member-tag .member-avatar{width:1.25rem;height:1.25rem;border-radius:50%;object-fit:cover}.group-chat-modal .modal-container .form-group{margin-bottom:1.25rem}.group-chat-modal .modal-container .form-group .form-label{display:block;font-size:0.875rem;color:#333;margin-bottom:0.5rem;font-weight:500}.group-chat-modal .modal-container .form-group .form-input{width:100%;padding:0.75rem;border:1px solid #e0e0e0;border-radius:0.5rem;font-size:0.875rem;transition:border-color 0.2s;box-sizing:border-box}.group-chat-modal .modal-container .form-group .form-input:focus{outline:none;border-color:#6c8cd5}.group-chat-modal .modal-container .form-group .form-input::placeholder{color:#999}.group-chat-modal .modal-container .form-group .avatar-input-container{position:relative}.group-chat-modal .modal-container .form-group .avatar-input-container .avatar-input-group{display:flex;gap:0.5rem;margin-bottom:0.75rem}.group-chat-modal .modal-container .form-group .avatar-input-container .avatar-input-group .form-input{flex:1}.group-chat-modal .modal-container .form-group .avatar-input-container .avatar-input-group .upload-btn{padding:0.75rem 1rem;background:#f0f4ff;color:#6c8cd5;border:none;border-radius:0.5rem;cursor:pointer;font-size:0.75rem;transition:all 0.2s}.group-chat-modal .modal-container .form-group .avatar-input-container .avatar-input-group .upload-btn:hover{background:#6c8cd5;color:white}.group-chat-modal .modal-container .form-group .avatar-input-container .avatar-preview{width:5rem;height:5rem;border-radius:50%;object-fit:cover;border:1px solid #e0e0e0;display:block;margin:0 auto}.group-chat-modal .modal-container .participation-group{margin-bottom:1.5rem}.group-chat-modal .modal-container .participation-group .participation-options{display:flex;gap:0.75rem}.group-chat-modal .modal-container .participation-group .participation-options .participation-option{flex:1;padding:0.5rem 0.75rem;border:1px solid #e0e0e0;border-radius:0.5rem;text-align:center;cursor:pointer;transition:all 0.2s;background:white;min-width:0}.group-chat-modal .modal-container .participation-group .participation-options .participation-option.selected{border-color:#6c8cd5;background:#f0f4ff;color:#6c8cd5}.group-chat-modal .modal-container .participation-group .participation-options .participation-option:hover:not(.selected){border-color:#ccc}.group-chat-modal .modal-container .participation-group .participation-options .participation-option .option-title{font-weight:500;margin-bottom:0.125rem;font-size:0.875rem}.group-chat-modal .modal-container .participation-group .participation-options .participation-option .option-desc{font-size:0.6875rem;color:#666;line-height:1.2;word-wrap:break-word;overflow-wrap:break-word}.group-chat-modal .modal-container .modal-buttons{display:flex;gap:0.75rem}.group-chat-modal .modal-container .modal-buttons .modal-btn{flex:1;padding:0.75rem;border:none;border-radius:0.5rem;font-size:0.875rem;font-weight:500;cursor:pointer;transition:all 0.2s}.group-chat-modal .modal-container .modal-buttons .modal-btn.cancel-btn{background:#f5f5f5;color:#666}.group-chat-modal .modal-container .modal-buttons .modal-btn.cancel-btn:hover{background:#e0e0e0}.group-chat-modal .modal-container .modal-buttons .modal-btn.create-btn{background:#6c8cd5;color:white}.group-chat-modal .modal-container .modal-buttons .modal-btn.create-btn:hover{background:#4a6fbf}.group-chat-modal .modal-container .modal-buttons .modal-btn.create-btn:disabled{background:#ccc;cursor:not-allowed}.group-chat-modal.show .modal-container{transform:scale(1)}
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** css ./node_modules/.pnpm/css-loader@7.1.2_webpack@5.101.3/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[1]!./node_modules/.pnpm/postcss-loader@8.1.1_postcs_7e5278d575df5928f9b244ea375b369e/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[2]!./node_modules/.pnpm/sass-loader@16.0.5_sass@1.90.0_webpack@5.101.3/node_modules/sass-loader/dist/cjs.js!./src/多云熊/备份/给rovo的/modules/dynamicIsland/dynamicIsland.scss ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
@charset "UTF-8";.dynamic-island-container{position:absolute;top:0;left:0;right:0;z-index:999;pointer-events:auto;display:flex;justify-content:center;align-items:flex-start}.dynamic-island{background:#1c1c1e;border-radius:0.75rem;cursor:pointer;transition:all 0.4s cubic-bezier(0.25,0.46,0.45,0.94);overflow:hidden;position:relative;transform-origin:center top;width:6rem;height:1.5rem}.dynamic-island:hover{background:#2c2c2e;box-shadow:0 4px 12px rgba(0,0,0,0.3)}.dynamic-island.expanded{width:90%;height:9rem;border-radius:1.5rem;transform-origin:center top;overflow:hidden}.dynamic-island.expanded .island-compact{opacity:0;pointer-events:none}.dynamic-island.expanded .island-expanded{opacity:1;pointer-events:auto}.dynamic-island[data-state=playing] .wave-bars .wave-bar{animation:waveAnimation 1.5s ease-in-out infinite}.dynamic-island[data-state=playing] .wave-bars .wave-bar:nth-child(1){animation-delay:0s}.dynamic-island[data-state=playing] .wave-bars .wave-bar:nth-child(2){animation-delay:0.2s}.dynamic-island[data-state=playing] .wave-bars .wave-bar:nth-child(3){animation-delay:0.4s}.dynamic-island[data-state=loading] .music-indicator::after{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:1rem;height:1rem;border:2px solid rgba(255,255,255,0.3);border-top:2px solid #fff;border-radius:50%;animation:spin 1s linear infinite}.dynamic-island[data-state=loading] .wave-bars{opacity:0}.island-compact{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;gap:3rem;opacity:1;transition:opacity 0.3s ease;pointer-events:auto}.compact-album-cover{position:relative;width:1rem;height:1rem;border-radius:0.25rem;overflow:hidden;background:rgba(255,255,255,0.1);display:flex;align-items:center;justify-content:center;flex-shrink:0}.compact-cover-image{width:100%;height:100%;object-fit:cover;display:none}.compact-cover-placeholder{color:rgba(255,255,255,0.4);font-size:0.625rem;font-weight:300}.music-indicator{position:relative;display:flex;align-items:center;justify-content:center;height:100%}.wave-bars{display:flex;align-items:center;gap:0.125rem;height:0.75rem}.wave-bar{width:0.125rem;height:0.25rem;background:var(--visualizer-color,linear-gradient(to top,#ff6b9d,#c44569));border-radius:1px;transition:height 0.1s ease}.island-expanded{position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;transition:opacity 0.3s ease;pointer-events:none;padding:0.75rem;display:flex;flex-direction:column;gap:0.375rem;justify-content:space-between}.top-section{display:flex;align-items:center;gap:0.75rem;flex:1;min-height:2.75rem}.music-info{display:flex;flex-direction:column;flex:1;min-width:0}.album-cover{position:relative;width:2.75rem;height:2.75rem;border-radius:0.75rem;overflow:hidden;background:rgba(255,255,255,0.1);display:flex;align-items:center;justify-content:center;flex-shrink:0;box-shadow:0 2px 8px rgba(0,0,0,0.2)}.cover-image{width:100%;height:100%;object-fit:cover;display:none}.cover-placeholder{color:rgba(255,255,255,0.6);font-size:1.25rem;font-weight:300}.track-info{flex:1;min-width:0;color:white}.track-title{font-size:0.9375rem;font-weight:600;color:white;margin-bottom:0.125rem;white-space:nowrap;overflow:hidden;position:relative}.track-title.scrollable .track-text{animation:marquee 15s linear infinite}.track-title .track-text{display:inline-block;transition:transform 0.3s ease}.track-artist{font-size:0.8125rem;color:rgba(255,255,255,0.7);white-space:nowrap;overflow:hidden;position:relative}.track-artist.scrollable .track-text{animation:marquee 15s linear infinite}.track-artist .track-text{display:inline-block;transition:transform 0.3s ease}@keyframes marquee{0%{transform:translateX(0)}10%{transform:translateX(0)}45%{transform:translateX(var(--scroll-distance))}55%{transform:translateX(var(--scroll-distance))}90%{transform:translateX(0)}100%{transform:translateX(0)}}.audio-visualizer{display:flex;align-items:center;gap:0.1rem;height:1.2rem;flex-shrink:0;margin-right:0.3rem}.visualizer-bar{width:0.15rem;background:var(--visualizer-color,linear-gradient(to top,#ff6b9d,#c44569));border-radius:2px;transition:height 0.1s ease}.visualizer-bar:nth-child(1){height:0.4rem}.visualizer-bar:nth-child(2){height:0.6rem}.visualizer-bar:nth-child(3){height:0.8rem}.visualizer-bar:nth-child(4){height:0.6rem}.visualizer-bar:nth-child(5){height:0.4rem}.dynamic-island[data-state=playing] .visualizer-bar:nth-child(1){animation:visualizerWave1 1.5s ease-in-out infinite;animation-delay:0s}.dynamic-island[data-state=playing] .visualizer-bar:nth-child(2){animation:visualizerWave2 1.5s ease-in-out infinite;animation-delay:0.12s}.dynamic-island[data-state=playing] .visualizer-bar:nth-child(3){animation:visualizerWave3 1.5s ease-in-out infinite;animation-delay:0.24s}.dynamic-island[data-state=playing] .visualizer-bar:nth-child(4){animation:visualizerWave4 1.5s ease-in-out infinite;animation-delay:0.36s}.dynamic-island[data-state=playing] .visualizer-bar:nth-child(5){animation:visualizerWave5 1.5s ease-in-out infinite;animation-delay:0.48s}@keyframes visualizerWave1{0%,100%{height:0.2rem;opacity:0.6}50%{height:0.9rem;opacity:1}}@keyframes visualizerWave2{0%,100%{height:0.3rem;opacity:0.7}50%{height:1.1rem;opacity:1}}@keyframes visualizerWave3{0%,100%{height:0.25rem;opacity:0.65}50%{height:1.2rem;opacity:1}}@keyframes visualizerWave4{0%,100%{height:0.35rem;opacity:0.75}50%{height:1rem;opacity:1}}@keyframes visualizerWave5{0%,100%{height:0.2rem;opacity:0.6}50%{height:0.85rem;opacity:1}}.bottom-section{display:flex;align-items:center;justify-content:center;gap:1.5rem;flex-shrink:0;height:2rem}.control-btn{background:transparent !important;border:none !important;padding:0 !important;cursor:pointer;transition:all 0.2s ease;display:flex;align-items:center;justify-content:center;box-shadow:none !important;outline:none !important}.control-btn:hover{transform:scale(1.1);background:transparent !important}.control-btn:active{transform:scale(0.9);opacity:0.7;background:transparent !important}.control-btn:focus{background:transparent !important;outline:none !important}.prev-btn,.next-btn{font-size:0.9rem;color:rgba(255,255,255,0.9);font-weight:bold;line-height:1}.play-btn{width:2.2rem;height:2.2rem;position:relative}.play-btn .play-icon{width:0;height:0;border-left:0.75rem solid white;border-top:0.5rem solid transparent;border-bottom:0.5rem solid transparent;position:absolute;top:50%;left:50%;transform:translate(-40%,-50%)}.play-btn .pause-icon{width:0.75rem;height:0.75rem;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:none}.play-btn .pause-icon::before,.play-btn .pause-icon::after{content:"";position:absolute;top:0;width:30%;height:100%;background:white}.play-btn .pause-icon::before{left:0}.play-btn .pause-icon::after{right:0}.play-btn.paused .play-icon{display:none}.play-btn.paused .pause-icon{display:block}.playlist-btn,.mode-btn{width:1.5rem;height:1.5rem;color:rgba(255,255,255,0.8);background:transparent !important;border:none !important;box-shadow:none !important}.playlist-btn svg,.mode-btn svg{width:1.5rem;height:1.5rem;filter:drop-shadow(0 1px 2px rgba(0,0,0,0.3))}.playlist-btn:hover,.mode-btn:hover{color:rgb(255,255,255)}.playlist-btn:active,.mode-btn:active{background:transparent !important}.playlist-btn:focus,.mode-btn:focus{background:transparent !important;outline:none !important}.playlist-btn{background:rgba(255,255,255,0.1)}.playlist-btn:hover{background:rgba(255,255,255,0.18)}.playlist-btn{background:rgba(255,255,255,0.15)}.playlist-btn:hover{background:rgba(255,255,255,0.25)}.progress-section{display:flex;flex-direction:column;gap:0.25rem;flex-shrink:0}.time-display{display:flex;justify-content:space-between;align-items:center;font-size:0.6875rem;color:rgba(255,255,255,0.7);font-variant-numeric:tabular-nums}.progress-bar{width:100%}.progress-track{position:relative;width:100%;height:0.25rem;background:rgba(255,255,255,0.2);border-radius:0.125rem;cursor:pointer;overflow:hidden}.progress-fill{position:absolute;top:0;left:0;height:100%;background:var(--visualizer-color,linear-gradient(90deg,#007aff,#5ac8fa));border-radius:0.125rem;width:0%;transition:width 0.1s ease}.progress-thumb{position:absolute;top:50%;left:0%;transform:translate(-50%,-50%);width:0.75rem;height:0.75rem;background:white;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,0.2);opacity:0;transition:all 0.2s ease}.progress-track:hover .progress-thumb{opacity:1}@keyframes waveAnimation{0%,100%{height:0.25rem;opacity:0.7}50%{height:0.75rem;opacity:1}}@keyframes spin{0%{transform:translate(-50%,-50%) rotate(0deg)}100%{transform:translate(-50%,-50%) rotate(360deg)}}@media screen and (max-width:25rem){.dynamic-island.expanded{width:95%;height:8rem}.island-expanded{padding:0.625rem;gap:0.375rem}.album-cover{width:2.25rem;height:2.25rem}.track-title{font-size:0.8125rem}.track-artist{font-size:0.6875rem}.prev-btn,.next-btn{width:1.25rem;height:1.25rem}.prev-btn::before,.prev-btn::after,.next-btn::before,.next-btn::after{border-left-width:0.3125rem;border-right-width:0.3125rem;border-top-width:0.1875rem;border-bottom-width:0.1875rem}.play-btn{width:2rem;height:2rem}.play-btn::before{border-left-width:0.625rem;border-top-width:0.4375rem;border-bottom-width:0.4375rem}.play-btn.paused::after{width:0.625rem;height:0.625rem}.playlist-btn{width:1.25rem;height:1.25rem}.playlist-btn svg{width:1.25rem;height:1.25rem}.bottom-section{height:1.75rem;gap:1.25rem}}@media (prefers-color-scheme:dark){.dynamic-island{background:#1c1c1e}.dynamic-island:hover{background:#2c2c2e}}@media (prefers-color-scheme:light){.dynamic-island{background:rgba(0,0,0,0.8);backdrop-filter:blur(10px)}.dynamic-island:hover{background:rgba(0,0,0,0.9)}}@media (prefers-contrast:high){.dynamic-island{border:1px solid rgba(255,255,255,0.3)}.control-btn{border:1px solid rgba(255,255,255,0.2)}}@media (prefers-reduced-motion:reduce){.dynamic-island,.island-compact,.island-expanded,.control-btn,.progress-fill,.progress-thumb{transition:none}.wave-bar{animation:none}@keyframes waveAnimation{0%,100%{height:0.5rem}}}@media screen and (max-width:25rem){.dynamic-island.expanded{width:95%;height:8.5rem}.island-expanded{padding:0.75rem;gap:0.5rem}.top-section{gap:0.5rem;min-height:2.5rem}.album-cover{width:2.25rem;height:2.25rem}.track-title{font-size:0.8125rem}.track-artist{font-size:0.6875rem}.audio-visualizer{height:1.25rem}.visualizer-bar{width:0.125rem}.control-btn{width:2rem;height:2rem}.control-btn svg{width:1rem;height:1rem}.play-btn{width:2.75rem;height:2.75rem}.play-btn svg{width:1.375rem;height:1.375rem}.bottom-section{gap:1rem;min-height:2.75rem}}@media (prefers-color-scheme:dark){.dynamic-island{background:#1c1c1e}.dynamic-island:hover{background:#2c2c2e}}@media (prefers-color-scheme:light){.dynamic-island{background:rgba(0,0,0,0.8);backdrop-filter:blur(10px)}.dynamic-island:hover{background:rgba(0,0,0,0.9)}}@media (prefers-contrast:high){.dynamic-island{border:1px solid rgba(255,255,255,0.3)}.control-btn{border:1px solid rgba(255,255,255,0.2)}}@media (prefers-reduced-motion:reduce){.dynamic-island,.island-compact,.island-expanded,.control-btn,.progress-fill,.progress-thumb,.visualizer-bar{transition:none}.wave-bar,.visualizer-bar{animation:none}@keyframes waveAnimation{0%,100%{height:0.5rem}}@keyframes visualizerWave{0%,100%{transform:scaleY(1)}}}.playlist-btn,.mode-btn{width:1.25rem;height:1.25rem}.playlist-btn svg,.mode-btn svg{width:1.25rem;height:1.25rem}.prev-btn:hover::before,.prev-btn:hover::after{border-right-color:rgb(255,255,255)}.next-btn:hover::before,.next-btn:hover::after{border-left-color:rgb(255,255,255)}.play-btn:hover::before{border-left-color:rgb(255,255,255)}.play-btn.paused:hover::after{background:linear-gradient(to right,rgb(255,255,255) 0%,rgb(255,255,255) 30%,transparent 30%,transparent 70%,rgb(255,255,255) 70%,rgb(255,255,255) 100%)}
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** css ./node_modules/.pnpm/css-loader@7.1.2_webpack@5.101.3/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[1]!./node_modules/.pnpm/postcss-loader@8.1.1_postcs_7e5278d575df5928f9b244ea375b369e/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[2]!./node_modules/.pnpm/sass-loader@16.0.5_sass@1.90.0_webpack@5.101.3/node_modules/sass-loader/dist/cjs.js!./src/多云熊/备份/给rovo的/modules/dynamicIsland/playlist.scss ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
@charset "UTF-8";.di-playlist-overlay{position:absolute;inset:0;z-index:2000;display:flex;align-items:center;justify-content:center;pointer-events:auto}.di-playlist-backdrop{position:absolute;inset:0;background:rgba(0,0,0,0.5);border-radius:1.5rem;overflow:hidden;backdrop-filter:blur(2px);-webkit-backdrop-filter:blur(2px)}.di-playlist-panel{position:relative;width:min(90%,24rem);max-height:75%;height:28rem;background:#121212;border:1px solid rgba(255,255,255,0.1);border-radius:1rem;box-shadow:0 20px 60px rgba(0,0,0,0.5),0 0 0 1px rgba(255,255,255,0.05) inset;color:#fff;display:flex;flex-direction:column;overflow:hidden;transform:scale(0.95) translateY(10px);opacity:0;animation:di-panel-enter 0.3s cubic-bezier(0.25,0.46,0.45,0.94) forwards}@keyframes di-panel-enter{from{opacity:0;transform:scale(0.95) translateY(10px)}to{opacity:1;transform:scale(1) translateY(0)}}.di-playlist-header{height:4rem;min-height:4rem;display:flex;align-items:center;justify-content:space-between;padding:0 1.5rem;background:linear-gradient(to bottom,rgba(255,255,255,0.05),transparent)}.di-playlist-header .title{font-size:1.5rem;font-weight:700;letter-spacing:-0.02em;background:linear-gradient(135deg,#fff 0%,rgba(255,255,255,0.8) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.di-playlist-header .actions{display:flex;align-items:center;gap:0.75rem}.di-playlist-header .actions button{background:transparent;color:rgba(255,255,255,0.7);border:none;width:2rem;height:2rem;border-radius:50%;cursor:pointer;transition:all 0.2s ease;display:flex;align-items:center;justify-content:center}.di-playlist-header .actions button:hover{background:rgba(255,255,255,0.1);color:#fff;transform:scale(1.05)}.di-playlist-header .actions button:active{transform:scale(0.95)}.di-playlist-header .actions .btn-close{font-size:1.25rem;font-weight:300}.di-playlist-toolbar{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.5rem}.di-playlist-toolbar button{background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.9);border:1px solid rgba(255,255,255,0.1);border-radius:2rem;height:2.25rem;padding:0 1.25rem;font-size:0.875rem;font-weight:500;cursor:pointer;transition:all 0.2s ease;display:flex;align-items:center;justify-content:center;gap:0.5rem;white-space:nowrap}.di-playlist-toolbar button.btn-import::before{content:"+";font-size:1.1rem;font-weight:400}.di-playlist-toolbar button:hover{background:rgba(255,255,255,0.1);border-color:rgba(255,255,255,0.2);transform:translateY(-1px)}.di-playlist-toolbar button:active{transform:translateY(0)}.di-playlist-toolbar .btn-sort.active{background:rgba(30,215,96,0.2);border-color:#1ed760;color:#1ed760}.di-playlist-toolbar .btn-clear{background:transparent;border:none;color:rgba(255,255,255,0.5);padding:0 0.75rem}.di-playlist-toolbar .btn-clear:hover{color:rgba(255,255,255,0.8);background:rgba(255,107,107,0.1)}.di-playlist-list{flex:1;overflow-y:auto;padding:0 1rem 1rem}.di-playlist-list::-webkit-scrollbar{width:12px}.di-playlist-list::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.2);border-radius:6px;border:3px solid transparent;background-clip:padding-box}.di-playlist-list::-webkit-scrollbar-track{background:transparent}.di-track{display:flex;align-items:center;gap:0.75rem;padding:0.5rem 0.75rem;margin-bottom:0.125rem;border-radius:0.375rem;transition:all 0.15s ease;position:relative;cursor:pointer}.di-track:hover{background:rgba(255,255,255,0.08)}.di-track:hover .ops{opacity:1}.di-track.sortable-mode{cursor:default}.di-track.sortable-mode .drag-handle{display:flex !important;opacity:1 !important}.di-track.now-playing .meta .title{color:#1ed760}.di-track .drag-handle{width:1.5rem;color:rgba(255,255,255,0.4);cursor:grab;-webkit-user-select:none;user-select:none;text-align:center;font-size:0.75rem;display:none;align-items:center;justify-content:center;transition:opacity 0.2s ease}.di-track .drag-handle:active{cursor:grabbing}.di-track .track-cover{width:2.5rem;height:2.5rem;border-radius:0.25rem;overflow:hidden;background:rgba(255,255,255,0.05);display:flex;align-items:center;justify-content:center;flex-shrink:0}.di-track .track-cover img{width:100%;height:100%;object-fit:cover}.di-track .track-cover .cover-placeholder{font-size:1.25rem;color:rgba(255,255,255,0.3)}.di-track .meta{flex:1;min-width:0}.di-track .meta .title{font-size:0.875rem;font-weight:500;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;line-height:1.3}.di-track .meta .subtitle{font-size:0.75rem;color:rgba(255,255,255,0.6);margin-top:0.125rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.di-track .meta .subtitle.invalid{color:#ff6b6b}.di-track .ops{display:flex;align-items:center;gap:0.5rem;opacity:0;transition:opacity 0.2s ease}.di-track .ops button{width:1.75rem;height:1.75rem;background:transparent;color:rgba(255,255,255,0.7);border:none;border-radius:50%;cursor:pointer;transition:all 0.2s ease;display:flex;align-items:center;justify-content:center;font-size:0.875rem}.di-track .ops button:hover{background:rgba(255,255,255,0.1);color:#fff;transform:scale(1.1)}.di-track .ops button:active{transform:scale(0.95)}.di-track .ops .op-remove:hover{background:rgba(255,107,107,0.2);color:#ff6b6b}#di-import-modal{position:absolute;inset:0;display:grid;place-items:center;background:rgba(0,0,0,0.6);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);z-index:2001}#di-import-modal .box{width:min(85%,22rem);background:#181818;border:1px solid rgba(255,255,255,0.1);border-radius:1rem;box-shadow:0 20px 60px rgba(0,0,0,0.5),0 0 0 1px rgba(255,255,255,0.05) inset;padding:1.5rem}#di-import-modal .box .title{font-size:1.25rem;font-weight:700;margin-bottom:1rem;color:#fff}#di-import-modal .box textarea.text{width:100%;min-height:10rem;background:#282828;color:#fff;border:1px solid rgba(255,255,255,0.1);border-radius:0.75rem;padding:1rem;resize:vertical;outline:none;transition:all 0.2s ease;font-family:"SF Mono","Monaco","Inconsolata","Fira Code",monospace;font-size:0.875rem;line-height:1.5}#di-import-modal .box textarea.text:focus{border-color:rgba(255,255,255,0.3);background:#333333}#di-import-modal .box textarea.text::placeholder{color:rgba(255,255,255,0.4)}#di-import-modal .box .actions{display:flex;gap:0.75rem;justify-content:flex-end;margin-top:1.25rem}#di-import-modal .box .actions button{background:rgba(255,255,255,0.1);color:#fff;border:none;border-radius:2rem;height:2.5rem;padding:0 1.5rem;font-weight:500;cursor:pointer;transition:all 0.2s ease}#di-import-modal .box .actions button:hover{transform:translateY(-1px);background:rgba(255,255,255,0.15)}#di-import-modal .box .actions button:active{transform:translateY(0)}#di-import-modal .box .actions .ok{background:#1ed760;color:#000}#di-import-modal .box .actions .ok:hover{background:#1fdf64;transform:translateY(-1px) scale(1.02)}#di-import-modal .box .actions .ok:active{background:#1ed760}@media screen and (max-width:25rem){.di-playlist-panel{width:95%;aspect-ratio:13/10;border-radius:0.9rem}.di-playlist-header{height:3rem;min-height:3rem}.di-playlist-header .title{font-size:1.25rem}.di-playlist-header .actions button{height:1.6rem;padding:0 0.5rem}.di-playlist-toolbar{gap:0.5rem;padding:0.75rem 1rem}.di-playlist-toolbar button{height:2rem;padding:0 0.75rem;font-size:0.75rem}.di-track{padding:0.45rem 0.5rem}.di-track .track-cover{width:2rem;height:2rem}.di-track .meta .title{font-size:0.8rem}.di-track .meta .subtitle{font-size:0.7rem}.di-track .ops button{width:1.6rem;height:1.6rem}#di-import-modal .box{width:92%}}@media (prefers-reduced-motion:reduce){.di-playlist-panel,.di-track,.di-playlist-header .actions button,.di-playlist-toolbar button,.di-track .ops button{animation:none;transition:none}}
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** css ./node_modules/.pnpm/css-loader@7.1.2_webpack@5.101.3/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[1]!./node_modules/.pnpm/postcss-loader@8.1.1_postcs_7e5278d575df5928f9b244ea375b369e/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[2]!./node_modules/.pnpm/sass-loader@16.0.5_sass@1.90.0_webpack@5.101.3/node_modules/sass-loader/dist/cjs.js!./src/多云熊/备份/给rovo的/modules/dynamics/dynamics.scss ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
@charset "UTF-8";#dynamicsInterface{display:none;position:absolute;top:0;left:0;width:100%;height:100%;z-index:3;background-image:url("https://files.catbox.moe/o84j4n.jpg");background-size:cover;background-position:center;border-radius:1.5rem;overflow:hidden}#dynamicsInterface.active{display:block}#dynamicsInterface #dynamicsStatusBarContainer .status-bar{position:absolute;top:0;left:0;width:100%;height:1.5rem;background:rgba(0,0,0,0.5);display:flex;justify-content:space-between;align-items:center;padding:0 1rem;color:#fff;font-size:0.75rem;z-index:1}#dynamicsInterface #dynamicsStatusBarContainer .status-bar .status-bar-left{display:flex;align-items:center;gap:0.25rem}#dynamicsInterface #dynamicsStatusBarContainer .status-bar .status-bar-right{display:flex;align-items:center;gap:0.5rem}#dynamicsInterface #dynamicsStatusBarContainer .status-bar .status-icon-svg{width:1rem;height:1rem;fill:#fff}.dynamics-back-btn{position:absolute;top:2rem;left:1rem;width:2rem;height:2rem;background:rgba(255,255,255,0.9);border:none;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:10;box-shadow:0 2px 8px rgba(0,0,0,0.1);transition:all 0.3s ease}.dynamics-back-btn:hover{background:rgb(255,255,255);transform:scale(1.1)}.dynamics-back-btn:active{transform:scale(0.95)}.dynamics-back-btn svg{color:#666}.dynamics-app-container{position:relative;width:100%;height:calc(100% - 1.5rem);top:1.5rem;background:rgba(255,255,255,0.95);display:flex;flex-direction:column;overflow:hidden}.dynamics-nav-bar{width:100%;height:3.125rem;background:rgba(255,255,255,0.98);border-bottom:1px solid #ffd1dc;display:flex;justify-content:space-between;align-items:center;padding:0 1rem}.dynamics-nav-bar .dynamics-nav-profile{width:2rem;height:2rem;border-radius:50%;background-image:url("https://files.catbox.moe/bpqrv2.jpg");background-size:cover;background-position:center;border:2px solid #ff9ebb;box-shadow:0 0 10px rgba(255,158,187,0.5);transition:transform 0.3s ease}.dynamics-nav-bar .dynamics-nav-profile:hover{transform:scale(1.1)}.dynamics-nav-bar .dynamics-nav-logo{font-size:1.25rem;font-weight:bold;background:linear-gradient(45deg,#ff69b4,#ff1493);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 10px rgba(255,105,180,0.3);cursor:pointer;transition:transform 0.2s ease;-webkit-user-select:none;user-select:none}.dynamics-nav-bar .dynamics-nav-logo:hover{transform:scale(1.05)}.dynamics-nav-bar .dynamics-nav-logo:active{transform:scale(0.95)}.dynamics-nav-bar .dynamics-nav-settings{width:2rem;height:2rem;display:flex;align-items:center;justify-content:center;font-size:1.5rem;color:#ff69b4;transition:transform 0.3s ease}.dynamics-nav-bar .dynamics-nav-settings:hover{transform:rotate(90deg)}.dynamics-timeline{flex:1;overflow-y:auto;padding:10px;padding-bottom:3.125rem;background:linear-gradient(135deg,#fff5f7 0%,#fff 100%)}.dynamics-timeline::-webkit-scrollbar{width:6px}.dynamics-timeline::-webkit-scrollbar-track{background:transparent}.dynamics-timeline::-webkit-scrollbar-thumb{background:rgba(255,105,180,0.2);border-radius:3px}.dynamics-timeline::-webkit-scrollbar-thumb:hover{background:rgba(255,105,180,0.4)}.dynamics-empty{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%;padding:2.5rem 1.25rem;text-align:center}.dynamics-empty .dynamics-empty-icon{font-size:3rem;margin-bottom:1rem;opacity:0.6}.dynamics-empty .dynamics-empty-text{font-size:1.125rem;font-weight:600;color:#666;margin-bottom:0.5rem}.dynamics-empty .dynamics-empty-subtext{font-size:0.875rem;color:#999;line-height:1.4}.dynamics-post{background:#fff;border-radius:0.9375rem;margin-bottom:0.9375rem;padding:0.9375rem;box-shadow:0 2px 20px rgba(255,182,193,0.15);border:1px solid #ffe4e1;transition:transform 0.3s ease;animation:fadeIn 0.3s ease-in-out}.dynamics-post:hover{transform:translateY(-2px);box-shadow:0 5px 25px rgba(255,182,193,0.25)}.dynamics-post-header{display:flex;align-items:center;gap:0.625rem;margin-bottom:0.625rem}.dynamics-post-avatar{width:2.5rem;height:2.5rem;border-radius:50%;background-size:cover;background-position:center;border:2px solid #ff9ebb;box-shadow:0 0 10px rgba(255,158,187,0.3)}.dynamics-post-info{flex:1}.dynamics-post-name{font-weight:bold;font-size:0.875rem;color:#333;text-shadow:0 0 1px rgba(255,105,180,0.3)}.dynamics-post-time{font-size:0.75rem;color:#999;margin-top:2px}.dynamics-post-content{font-size:0.875rem;line-height:1.5;color:#333;margin-bottom:0.625rem}.dynamics-post-image{width:100%;height:12.5rem;border-radius:0.75rem;background-size:cover;background-position:center;margin-bottom:0.625rem;border:1px solid #ffe4e1;transition:transform 0.3s ease}.dynamics-post-image:hover{transform:scale(1.02)}.dynamics-liked-by{display:flex;align-items:center;flex-wrap:wrap;font-size:0.75rem;color:#666;padding:6px 10px;background:#f8f8f8;border-radius:6px}.dynamics-liked-by .liked-heart-icon{width:0.75rem;height:0.75rem;fill:#ff69b4;margin-right:5px}.dynamics-liked-by .liked-user{color:#576b95;cursor:pointer}.dynamics-liked-by .liked-user:hover{text-decoration:underline}.dynamics-post-actions{display:flex;justify-content:flex-end;align-items:center;padding:8px 0;gap:10px}.dynamics-post-action{display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all 0.2s ease;padding:6px 12px;border-radius:15px}.dynamics-post-action:hover{background:rgba(0,0,0,0.05)}.dynamics-post-action:hover .action-svg{transform:scale(1.1)}.dynamics-post-action:active{transform:scale(0.95)}.dynamics-post-action .action-icon{display:flex;align-items:center}.dynamics-post-action .action-svg{width:1.125rem;height:1.125rem;fill:#8a8a8a;transition:all 0.2s ease}.dynamics-post-action[data-action=like]:hover .action-svg{fill:#ff4757}.dynamics-post-action[data-action=like].liked .action-svg{fill:#ff4757;animation:heartBeat 0.5s}.dynamics-post-action[data-action=comment]:hover .action-svg{fill:#3498db}@keyframes heartBeat{0%,100%{transform:scale(1)}50%{transform:scale(1.2)}}.dynamics-comments{margin-top:0.625rem;padding-top:0.625rem;border-top:1px dashed #ffe4e1}.dynamics-comment{margin-bottom:0.5rem;font-size:0.8125rem;line-height:1.5}.dynamics-comment.comment-long-pressing{position:relative}.dynamics-comment.comment-long-pressing::before{content:"";position:absolute;top:-0.25rem;left:-0.5rem;right:-0.5rem;bottom:-0.25rem;background:rgba(135,206,250,0.2);box-shadow:0 0 0 2px rgba(135,206,250,0.4);border-radius:0.75rem;z-index:-1;pointer-events:none}.dynamics-comment-qq .dynamics-comment-content{background:transparent;border-radius:0;color:#333}.dynamics-comment-qq .dynamics-comment-content .dynamics-comment-name{font-weight:600;color:#576b95;cursor:pointer}.dynamics-comment-qq .dynamics-comment-content .dynamics-comment-name:hover{text-decoration:underline}.dynamics-comment-qq .dynamics-comment-content .dynamics-comment-text{color:#333;word-break:break-word}.dynamics-comment:not(.dynamics-comment-qq){display:flex;gap:0.5rem}.dynamics-comment:not(.dynamics-comment-qq) .dynamics-comment-avatar{width:1.5rem;height:1.5rem;border-radius:50%;background-size:cover;border:1px solid #ff9ebb}.dynamics-comment:not(.dynamics-comment-qq) .dynamics-comment-content{flex:1;background:#fff5f7;padding:0.5rem;border-radius:0.625rem;color:#666}.dynamics-comment:not(.dynamics-comment-qq) .dynamics-comment-name{font-weight:bold;color:#ff69b4;margin-right:5px}.clickable{cursor:pointer;transition:transform 0.2s ease,filter 0.2s ease}.clickable:hover{transform:scale(1.05);filter:brightness(1.1)}.clickable:active{transform:scale(0.95)}@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes sparkleAnim{0%{transform:scale(0) rotate(0deg);opacity:0}50%{transform:scale(1) rotate(180deg);opacity:0.8}100%{transform:scale(0) rotate(360deg);opacity:0}}@keyframes floatHeart{0%{transform:translateY(0) rotate(0deg);opacity:0}50%{opacity:0.8}100%{transform:translateY(-100px) rotate(360deg);opacity:0}}.dynamics-image-description{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(255,255,255,0.9);padding:1.25rem;color:#ff69b4;font-size:0.875rem;line-height:1.6;white-space:pre-wrap;display:flex;align-items:center;justify-content:center;text-align:center;animation:fadeIn 0.3s ease;border-radius:0.75rem}.dynamics-loading-animation{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:3.75rem;height:3.75rem;display:none}.dynamics-loading-animation::after{content:"✧";font-size:1.5rem;color:#ff69b4;animation:loadingRotate 1s linear infinite;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}@keyframes loadingRotate{from{transform:translate(-50%,-50%) rotate(0deg)}to{transform:translate(-50%,-50%) rotate(360deg)}}.dynamics-comment-modal{position:absolute;top:0;left:0;width:100%;height:100%;z-index:100}.dynamics-comment-modal .dynamics-comment-backdrop{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);backdrop-filter:blur(2px)}.dynamics-comment-modal .dynamics-comment-dialog{position:absolute;bottom:0;left:0;width:100%;background:white;border-radius:1rem 1rem 0 0;box-shadow:0 -4px 20px rgba(0,0,0,0.15);animation:slideUp 0.3s ease-out;max-height:60%;display:flex;flex-direction:column}.dynamics-comment-modal .dynamics-comment-header{display:flex;justify-content:space-between;align-items:center;padding:1rem;border-bottom:1px solid #f0f0f0}.dynamics-comment-modal .dynamics-comment-header .dynamics-comment-title{font-size:1rem;font-weight:600;color:#333}.dynamics-comment-modal .dynamics-comment-header .dynamics-comment-close{background:none;border:none;font-size:1.25rem;color:#999;cursor:pointer;padding:0;width:1.5rem;height:1.5rem;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all 0.2s}.dynamics-comment-modal .dynamics-comment-header .dynamics-comment-close:hover{background:#f0f0f0;color:#666}.dynamics-comment-modal .dynamics-comment-body{flex:1;padding:1rem;overflow-y:auto}.dynamics-comment-modal .dynamics-comment-body .dynamics-comment-reply-info{font-size:0.875rem;color:#ff69b4;margin-bottom:0.75rem;padding:0.5rem;background:#fff5f7;border-radius:0.5rem}.dynamics-comment-modal .dynamics-comment-body .dynamics-comment-reply-info .dynamics-comment-reply-name{font-weight:600}.dynamics-comment-modal .dynamics-comment-body .dynamics-comment-input{width:100%;min-height:5rem;padding:0.75rem;border:1px solid #ffc0cb;border-radius:0.5rem;font-size:0.9375rem;resize:vertical;outline:none;transition:border-color 0.2s}.dynamics-comment-modal .dynamics-comment-body .dynamics-comment-input:focus{border-color:#ff69b4;box-shadow:0 0 0 2px rgba(255,105,180,0.1)}.dynamics-comment-modal .dynamics-comment-body .dynamics-comment-input::placeholder{color:#ccc}.dynamics-comment-modal .dynamics-comment-body .dynamics-comment-input.shake{animation:shake 0.5s;border-color:#ff4757}.dynamics-comment-modal .dynamics-comment-footer{display:flex;gap:0.75rem;padding:1rem;border-top:1px solid #f0f0f0}.dynamics-comment-modal .dynamics-comment-footer button{flex:1;padding:0.75rem;border-radius:1.5rem;font-size:0.9375rem;font-weight:500;cursor:pointer;transition:all 0.2s;border:none}.dynamics-comment-modal .dynamics-comment-footer button:active{transform:scale(0.95)}.dynamics-comment-modal .dynamics-comment-footer .dynamics-comment-cancel{background:#f0f0f0;color:#666}.dynamics-comment-modal .dynamics-comment-footer .dynamics-comment-cancel:hover{background:#e0e0e0}.dynamics-comment-modal .dynamics-comment-footer .dynamics-comment-submit{background:linear-gradient(135deg,#ff69b4,#ff91cc);color:white}.dynamics-comment-modal .dynamics-comment-footer .dynamics-comment-submit:hover{background:linear-gradient(135deg,#ff91cc,#ff69b4)}.dynamics-comment-modal .dynamics-comment-footer .dynamics-comment-submit:disabled{opacity:0.6;cursor:not-allowed}@keyframes slideUp{from{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes shake{0%,100%{transform:translateX(0)}10%,30%,50%,70%,90%{transform:translateX(-5px)}20%,40%,60%,80%{transform:translateX(5px)}}.new-dynamic-btn{position:absolute;bottom:4.625rem;right:1.5rem;width:3rem;height:3rem;border-radius:50%;background:linear-gradient(135deg,#ff69b4,#ff91cc);color:white;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:0 0.25rem 0.75rem rgba(255,105,180,0.3);transition:all 0.3s ease;z-index:100}.new-dynamic-btn:hover{transform:scale(1.1);box-shadow:0 0.375rem 1rem rgba(255,105,180,0.4)}.new-dynamic-btn:active{transform:scale(0.95)}.new-dynamic-btn svg{width:1.5rem;height:1.5rem}.new-dynamic-modal{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);display:flex;align-items:flex-end;z-index:1000;border-radius:1.5rem;opacity:0;transition:opacity 0.3s ease;pointer-events:none}.new-dynamic-modal.show{opacity:1;pointer-events:auto}.new-dynamic-modal .modal-container{width:100%;background:white;border-radius:1.5rem 1.5rem 0 0;padding:1.25rem;position:relative;transform:translateY(100%);transition:transform 0.3s ease;max-height:80%;display:flex;flex-direction:column}.new-dynamic-modal.show .modal-container{transform:translateY(0)}.new-dynamic-modal .modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.new-dynamic-modal .modal-header .modal-title{font-size:1.125rem;font-weight:600;color:#333}.new-dynamic-modal .modal-header .modal-close{background:none;border:none;font-size:1.5rem;color:#999;cursor:pointer;padding:0;width:2rem;height:2rem;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all 0.2s}.new-dynamic-modal .modal-header .modal-close:hover{background:#f0f0f0;color:#666}.new-dynamic-modal .dynamic-form{flex:1;overflow-y:auto}.new-dynamic-modal .dynamic-form .form-group{margin-bottom:1rem}.new-dynamic-modal .dynamic-form .form-group textarea{width:100%;min-height:8rem;padding:0.75rem;border:2px solid #ffc0cb;border-radius:0.75rem;font-size:0.9375rem;resize:vertical;outline:none;transition:border-color 0.2s;font-family:inherit}.new-dynamic-modal .dynamic-form .form-group textarea:focus{border-color:#ff69b4;box-shadow:0 0 0 3px rgba(255,105,180,0.1)}.new-dynamic-modal .dynamic-form .form-group textarea::placeholder{color:#ccc}.new-dynamic-modal .dynamic-form .form-group .image-upload-area{border:2px dashed #ffc0cb;border-radius:0.75rem;padding:2rem;text-align:center;cursor:pointer;transition:all 0.2s;background:#fff5f7}.new-dynamic-modal .dynamic-form .form-group .image-upload-area:hover{border-color:#ff69b4;background:#ffe4e9}.new-dynamic-modal .dynamic-form .form-group .image-upload-area .upload-icon{font-size:2rem;margin-bottom:0.5rem;color:#ff69b4}.new-dynamic-modal .dynamic-form .form-group .image-upload-area .upload-text{color:#666;font-size:0.875rem}.new-dynamic-modal .dynamic-form .form-group .image-upload-area.has-image{padding:0;border:none;background:transparent}.new-dynamic-modal .dynamic-form .form-group .image-upload-area.has-image .image-preview{width:100%;height:12rem;border-radius:0.75rem;background-size:cover;background-position:center;position:relative}.new-dynamic-modal .dynamic-form .form-group .image-upload-area.has-image .image-preview .remove-image{position:absolute;top:0.5rem;right:0.5rem;width:1.75rem;height:1.75rem;background:rgba(0,0,0,0.5);color:white;border:none;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background 0.2s}.new-dynamic-modal .dynamic-form .form-group .image-upload-area.has-image .image-preview .remove-image:hover{background:rgba(0,0,0,0.7)}.new-dynamic-modal .modal-footer{display:flex;gap:0.75rem;padding-top:1rem;border-top:1px solid #f0f0f0}.new-dynamic-modal .modal-footer button{flex:1;padding:0.875rem;border-radius:1.5rem;font-size:0.9375rem;font-weight:500;cursor:pointer;transition:all 0.2s;border:none}.new-dynamic-modal .modal-footer button:active{transform:scale(0.95)}.new-dynamic-modal .modal-footer .cancel-btn{background:#f0f0f0;color:#666}.new-dynamic-modal .modal-footer .cancel-btn:hover{background:#e0e0e0}.new-dynamic-modal .modal-footer .publish-btn{background:linear-gradient(135deg,#ff69b4,#ff91cc);color:white}.new-dynamic-modal .modal-footer .publish-btn:hover{background:linear-gradient(135deg,#ff91cc,#ff69b4)}.new-dynamic-modal .modal-footer .publish-btn:disabled{opacity:0.6;cursor:not-allowed}.dynamics-app-container .dynamics-delete-toolbar{position:absolute;top:0;left:0;right:0;height:3.125rem;background:linear-gradient(135deg,rgba(255,255,255,0.98),rgba(255,238,242,0.98));border-bottom:1px solid rgba(255,105,180,0.2);display:flex;align-items:center;justify-content:center;gap:1rem;padding:0 1rem;z-index:1000;box-shadow:0 2px 8px rgba(255,105,180,0.15);animation:fadeInToolbar 0.3s ease-out;backdrop-filter:blur(10px)}.dynamics-app-container .dynamics-delete-toolbar button{padding:0.5rem 1.25rem;border:none;border-radius:1.5rem;font-size:0.875rem;font-weight:600;cursor:pointer;transition:all 0.2s ease;letter-spacing:0.3px;white-space:nowrap}.dynamics-app-container .dynamics-delete-toolbar button.select-all-btn{background:linear-gradient(135deg,#ff69b4,#ff91cc);color:white;box-shadow:0 2px 6px rgba(255,105,180,0.3)}.dynamics-app-container .dynamics-delete-toolbar button.select-all-btn:hover{transform:translateY(-1px);box-shadow:0 4px 10px rgba(255,105,180,0.4)}.dynamics-app-container .dynamics-delete-toolbar button.select-all-btn:active{transform:translateY(0)}.dynamics-app-container .dynamics-delete-toolbar button.delete-selected-btn{background:linear-gradient(135deg,#ff6b7a,#ff4757);color:white;box-shadow:0 2px 6px rgba(255,71,87,0.3)}.dynamics-app-container .dynamics-delete-toolbar button.delete-selected-btn:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 10px rgba(255,71,87,0.4)}.dynamics-app-container .dynamics-delete-toolbar button.delete-selected-btn:active{transform:translateY(0)}.dynamics-app-container .dynamics-delete-toolbar button.delete-selected-btn:disabled{opacity:0.4;cursor:not-allowed;background:#ddd;box-shadow:none}.dynamics-app-container .dynamics-delete-toolbar button.cancel-delete-btn{background:rgba(255,255,255,0.9);border:1px solid rgba(255,105,180,0.3);color:#ff69b4}.dynamics-app-container .dynamics-delete-toolbar button.cancel-delete-btn:hover{background:white;border-color:rgba(255,105,180,0.5);transform:translateY(-1px);box-shadow:0 2px 6px rgba(255,105,180,0.2)}.dynamics-app-container .dynamics-delete-toolbar button.cancel-delete-btn:active{transform:translateY(0)}@keyframes fadeInToolbar{from{opacity:0}to{opacity:1}}#dynamicsInterface.delete-mode .dynamics-nav-settings.delete-mode-active{background:linear-gradient(135deg,#ff69b4,#ff91cc);border-radius:50%;transform:rotate(45deg)}#dynamicsInterface.delete-mode .dynamics-nav-settings.delete-mode-active svg{fill:white}#dynamicsInterface.delete-mode .dynamics-post{position:relative;transition:all 0.2s ease;cursor:pointer}#dynamicsInterface.delete-mode .dynamics-post.selected{background:linear-gradient(135deg,rgba(255,105,180,0.05),rgba(255,182,193,0.05));border:2px solid rgba(255,105,180,0.3);box-shadow:0 2px 10px rgba(255,105,180,0.15);transform:translateX(-2px)}#dynamicsInterface.delete-mode .dynamics-post:hover:not(.selected){background:rgba(255,182,193,0.03);border-color:rgba(255,105,180,0.15)}.dynamics-selection-checkbox{position:absolute;right:0.625rem;top:1.125rem;width:1.25rem;height:1.25rem;cursor:pointer;z-index:10;animation:fadeInCheckbox 0.3s ease-out;display:flex;align-items:center;justify-content:center}.dynamics-selection-checkbox .checkbox-circle{width:100%;height:100%;transition:all 0.2s ease}.dynamics-selection-checkbox .checkbox-circle svg{width:100%;height:100%}.dynamics-selection-checkbox .checkbox-circle.unchecked{color:rgba(255,105,180,0.4)}.dynamics-selection-checkbox .checkbox-circle.unchecked:hover{color:rgba(255,105,180,0.6);transform:scale(1.1)}.dynamics-selection-checkbox .checkbox-circle.checked{animation:checkPop 0.3s ease-out}.dynamics-selection-checkbox .checkbox-circle.checked svg circle{fill:#ff69b4}.dynamics-selection-checkbox .checkbox-circle.checked:hover{transform:scale(1.1)}@keyframes fadeInCheckbox{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:scale(1)}}@keyframes checkPop{0%{transform:scale(0.6);opacity:0}50%{transform:scale(1.15)}100%{transform:scale(1);opacity:1}}@keyframes selectShake{0%,100%{transform:translateX(0)}25%{transform:translateX(-2px)}75%{transform:translateX(2px)}}
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** css ./node_modules/.pnpm/css-loader@7.1.2_webpack@5.101.3/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[1]!./node_modules/.pnpm/postcss-loader@8.1.1_postcs_7e5278d575df5928f9b244ea375b369e/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[2]!./node_modules/.pnpm/sass-loader@16.0.5_sass@1.90.0_webpack@5.101.3/node_modules/sass-loader/dist/cjs.js!./src/多云熊/备份/给rovo的/modules/dynamics/composer.scss ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
@charset "UTF-8";.dynamics-composer-interface{display:none;position:absolute;top:0;left:0;width:100%;height:100%;z-index:4;background:transparent;border-radius:1.5rem;overflow:hidden}.dynamics-composer-interface.active{display:block}.dynamics-composer-interface .composer-nav-bar{position:relative;width:100%;height:2.75rem;margin-top:1.5rem;background:#fff;display:flex;align-items:center;justify-content:space-between;padding:0 1rem;border-top-left-radius:1rem;border-top-right-radius:1rem}.dynamics-composer-interface .composer-nav-bar .composer-back-btn{width:2rem;height:2rem;border:none;background:transparent;cursor:pointer;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background 0.2s;color:#333}.dynamics-composer-interface .composer-nav-bar .composer-back-btn:hover{background:rgba(0,0,0,0.05)}.dynamics-composer-interface .composer-nav-bar .composer-back-btn svg{width:1.25rem;height:1.25rem}.dynamics-composer-interface .composer-nav-bar .composer-nav-title{font-size:1rem;font-weight:600;color:#333;position:absolute;left:50%;transform:translateX(-50%)}.dynamics-composer-interface .composer-nav-bar .composer-post-btn{padding:0.4rem 1rem;border:none;border-radius:1rem;background:linear-gradient(135deg,#ff69b4,#ff91cc);color:white;font-size:0.8125rem;font-weight:600;cursor:pointer;transition:all 0.2s}.dynamics-composer-interface .composer-nav-bar .composer-post-btn:hover:not(:disabled){background:linear-gradient(135deg,#ff91cc,#ff69b4);transform:translateY(-1px);box-shadow:0 2px 8px rgba(255,105,180,0.3)}.dynamics-composer-interface .composer-nav-bar .composer-post-btn:active:not(:disabled){transform:translateY(0)}.dynamics-composer-interface .composer-nav-bar .composer-post-btn:disabled{opacity:0.5;cursor:not-allowed}.dynamics-composer-interface .composer-content-area{width:100%;height:calc(100% - 1.5rem - 2.75rem);background:#fff;overflow-y:auto;padding:1rem}.dynamics-composer-interface .composer-content-area::-webkit-scrollbar{width:6px}.dynamics-composer-interface .composer-content-area::-webkit-scrollbar-track{background:transparent}.dynamics-composer-interface .composer-content-area::-webkit-scrollbar-thumb{background:rgba(0,0,0,0.1);border-radius:3px}.dynamics-composer-interface .composer-main-area{display:flex;gap:0.75rem;margin-bottom:1rem;padding-bottom:1rem;align-items:flex-start}.dynamics-composer-interface .composer-main-area .composer-user-avatar-small{width:2.5rem;height:2.5rem;border-radius:50%;background-image:url("https://files.catbox.moe/bpqrv2.jpg");background-size:cover;background-position:center;border:2px solid #ff9ebb;box-shadow:0 0 8px rgba(255,158,187,0.2);flex-shrink:0;margin-top:0.125rem}.dynamics-composer-interface .composer-main-area .composer-input-wrapper{flex:1;position:relative}.dynamics-composer-interface .composer-main-area .composer-input-wrapper .composer-textarea{width:100%;min-height:8rem;max-height:20rem;border:none;outline:none;font-size:1.1rem;line-height:1.5;resize:none;font-family:inherit;color:#333;background:transparent}.dynamics-composer-interface .composer-main-area .composer-input-wrapper .composer-textarea::placeholder{color:#999;font-size:inherit}.dynamics-composer-interface .composer-main-area .composer-input-wrapper .composer-textarea.shake{animation:shake 0.5s;border:2px solid #ff4757;border-radius:0.5rem}.dynamics-composer-interface .composer-main-area .composer-input-wrapper .composer-char-count{position:absolute;bottom:0.5rem;right:0.5rem;width:1.5rem;height:1.5rem}.dynamics-composer-interface .composer-main-area .composer-input-wrapper .composer-char-count svg{width:100%;height:100%;transform:rotate(-90deg)}.dynamics-composer-interface .composer-main-area .composer-input-wrapper .composer-char-count svg .circle-bg{fill:none;stroke:#e8e8e8;stroke-width:2}.dynamics-composer-interface .composer-main-area .composer-input-wrapper .composer-char-count svg .circle-progress{fill:none;stroke:#1da1f2;stroke-width:2;stroke-linecap:round;transition:stroke 0.3s,stroke-dashoffset 0.3s}.dynamics-composer-interface .composer-main-area .composer-input-wrapper .composer-char-count svg .circle-progress.warning{stroke:#ffad1f}.dynamics-composer-interface .composer-main-area .composer-input-wrapper .composer-char-count svg .circle-progress.danger{stroke:#e0245e}.dynamics-composer-interface .composer-main-area .composer-input-wrapper .composer-char-count .char-count-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:0.625rem;color:#666;font-weight:500}.dynamics-composer-interface .composer-main-area .composer-input-wrapper .composer-char-count .char-count-text.warning{color:#ffad1f}.dynamics-composer-interface .composer-main-area .composer-input-wrapper .composer-char-count .char-count-text.danger{color:#e0245e}.dynamics-composer-interface .composer-image-description{display:flex;align-items:center;gap:0.5rem;margin-bottom:1rem;padding:0.75rem;background:#f8f8f8;border-radius:0.75rem;border:1px solid #ffc0cb}.dynamics-composer-interface .composer-image-description .image-description-input{flex:1;padding:0.5rem;border:none;background:white;border-radius:0.5rem;font-size:0.875rem;outline:none;transition:box-shadow 0.2s}.dynamics-composer-interface .composer-image-description .image-description-input:focus{box-shadow:0 0 0 2px rgba(255,105,180,0.2)}.dynamics-composer-interface .composer-image-description .image-description-input::placeholder{color:#999}.dynamics-composer-interface .composer-image-description .remove-image-btn{width:1.75rem;height:1.75rem;border:none;border-radius:50%;background:rgba(255,105,180,0.2);color:#ff69b4;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.2s;flex-shrink:0}.dynamics-composer-interface .composer-image-description .remove-image-btn:hover{background:rgba(255,105,180,0.3);transform:scale(1.1)}.dynamics-composer-interface .composer-image-description .remove-image-btn svg{width:1rem;height:1rem}.dynamics-composer-interface .composer-toolbar{display:flex;justify-content:flex-start;padding:0.75rem 0}.dynamics-composer-interface .composer-toolbar .toolbar-btn{display:flex;align-items:center;justify-content:center;width:2.5rem;height:2.5rem;border:none;background:transparent;cursor:pointer;border-radius:50%;transition:all 0.2s;color:#ff69b4}.dynamics-composer-interface .composer-toolbar .toolbar-btn:hover{background:rgba(255,105,180,0.1)}.dynamics-composer-interface .composer-toolbar .toolbar-btn:active{transform:scale(0.95)}.dynamics-composer-interface .composer-toolbar .toolbar-btn.active{color:#ff1493}.dynamics-composer-interface .composer-toolbar .toolbar-btn svg{width:1.25rem;height:1.25rem}@keyframes shake{0%,100%{transform:translateX(0)}10%,30%,50%,70%,90%{transform:translateX(-5px)}20%,40%,60%,80%{transform:translateX(5px)}}.new-dynamic-btn{position:absolute;bottom:4.625rem;right:1.5rem;width:3rem;height:3rem;border-radius:50%;background:linear-gradient(135deg,#ff69b4,#ff91cc);color:white;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:0 0.25rem 0.75rem rgba(255,105,180,0.3);z-index:100;opacity:1;visibility:visible;transition:opacity 0.3s ease,visibility 0.3s ease,transform 0.3s ease,box-shadow 0.3s ease}.new-dynamic-btn.hidden{opacity:0;visibility:hidden;transform:scale(0.8);pointer-events:none}.new-dynamic-btn.showing{animation:fadeInBounce 0.3s ease forwards}.new-dynamic-btn.hiding{animation:fadeOutScale 0.3s ease forwards}.new-dynamic-btn:hover{transform:scale(1.1);box-shadow:0 0.375rem 1rem rgba(255,105,180,0.4)}.new-dynamic-btn:active{transform:scale(0.95)}.new-dynamic-btn svg{width:1.5rem;height:1.5rem}@keyframes fadeInBounce{0%{opacity:0;visibility:hidden;transform:scale(0.3)}50%{transform:scale(1.05)}100%{opacity:1;visibility:visible;transform:scale(1)}}@keyframes fadeOutScale{0%{opacity:1;visibility:visible;transform:scale(1)}100%{opacity:0;visibility:hidden;transform:scale(0.8)}}
</style></head>
  <body>
    <div class="phone-container">
      <div class="phone-charm"></div>
      <div class="phone-notch">
        <div class="notch-sensor"></div>
        <div class="notch-camera"></div>
        <div class="notch-speaker"></div>
        <div class="notch-sensor"></div>
      </div>

      <div class="interface-container">
        <!-- 聊天列表界面 -->
        <div class="chat-list-interface" id="chatListInterface">
          <div class="chat-list-header">
            <div class="chat-list-title">聊天列表</div>
          </div>
          <div class="chat-list-content" id="chatListContent">
            <!-- 聊天列表项将通过JavaScript动态生成 -->
          </div>
        </div>

        <!-- 我的页面界面 -->
        <div class="profile-interface" id="profileInterface">
          <!-- 状态栏容器 -->
          <div class="status-bar-container"></div>

          <!-- 主要内容区域 -->
          <div class="profile-content">
            <!-- 用户信息区域 -->
            <div class="user-info-section">
              <!-- 用户头像 -->
              <div class="user-avatar" id="userAvatar">
                <img id="avatarImage" src="https://files.catbox.moe/u8ccy5.jpg" alt="用户头像" />
                <div class="avatar-overlay">
                  <svg viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor" d="M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z" />
                  </svg>
                  <div>更换头像</div>
                </div>
              </div>

              <!-- 用户名称 -->
              <div class="user-name">
                <div class="name-display" id="nameDisplay">用户名</div>
                <div class="name-edit" id="nameEdit">
                  <input type="text" id="nameInput" placeholder="请输入用户名" />
                  <div class="edit-buttons">
                    <button class="btn confirm-btn" id="nameConfirmBtn">确认</button>
                    <button class="btn cancel-btn" id="nameCancelBtn">取消</button>
                  </div>
                </div>
              </div>
            </div>

            <!-- 设置区域 -->
            <div class="settings-section">
              <button class="settings-button" id="extensionSettingsButton">
                <svg viewBox="0 0 24 24" width="24" height="24">
                  <path fill="currentColor" d="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M10,22C9.75,22 9.54,21.82 9.5,21.58L9.13,18.93C8.5,18.68 7.96,18.34 7.44,17.94L4.95,18.95C4.73,19.03 4.46,18.95 4.34,18.73L2.34,15.27C2.22,15.05 2.27,14.78 2.46,14.63L4.57,12.97C4.53,12.65 4.5,12.33 4.5,12C4.5,11.67 4.53,11.34 4.57,11L2.46,9.37C2.27,9.22 2.22,8.95 2.34,8.73L4.34,5.27C4.46,5.05 4.73,4.96 4.95,5.05L7.44,6.05C7.96,5.66 8.5,5.32 9.13,5.07L9.5,2.42C9.54,2.18 9.75,2 10,2H14C14.25,2 14.46,2.18 14.5,2.42L14.87,5.07C15.5,5.32 16.04,5.66 16.56,6.05L19.05,5.05C19.27,4.96 19.54,5.05 19.66,5.27L21.66,8.73C21.78,8.95 21.73,9.22 21.54,9.37L19.43,11C19.47,11.34 19.5,11.67 19.5,12C19.5,12.33 19.47,12.65 19.43,12.97L21.54,14.63C21.73,14.78 21.78,15.05 21.66,15.27L19.66,18.73C19.54,18.95 19.27,19.03 19.05,18.95L16.56,17.94C16.04,18.34 15.5,18.68 14.87,18.93L14.5,21.58C14.46,21.82 14.25,22 14,22H10M11.25,4L10.88,6.61C9.68,6.86 8.62,7.5 7.85,8.39L5.44,7.35L4.69,8.65L6.8,10.2C6.4,11.37 6.4,12.64 6.8,13.8L4.68,15.36L5.43,16.64L7.85,15.61C8.62,16.5 9.68,17.14 10.87,17.38L11.24,20H12.76L13.13,17.39C14.32,17.14 15.37,16.5 16.14,15.62L18.57,16.64L19.32,15.36L17.2,13.81C17.6,12.64 17.6,11.37 17.2,10.2L19.31,8.65L18.56,7.35L16.15,8.39C15.38,7.5 14.32,6.86 13.12,6.62L12.75,4H11.25Z" />
                </svg>
                扩展设置
              </button>
              <button class="settings-button" id="settingsButton">
                <svg viewBox="0 0 24 24" width="24" height="24">
                  <path fill="currentColor" d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.22,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.22,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.68 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" />
                </svg>
                设置
              </button>
            </div>
          </div>

          <!-- 底部导航栏（由 BottomNavigation 组件动态渲染） -->
          <div class="bottom-nav"></div>

          <!-- 设置模态框 -->
          <div class="settings-modal" id="settingsModal">
            <div class="modal-container">
              <div class="modal-header">
                <div class="modal-title">设置</div>
                <button class="close-btn" id="settingsCloseBtn">
                  <svg viewBox="0 0 24 24" width="20" height="20">
                    <path fill="currentColor" d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" />
                  </svg>
                </button>
              </div>
              <div class="modal-content">
                <!-- 界面设置组 -->
                <div class="setting-group">
                  <div class="group-title">
                    <svg viewBox="0 0 24 24" width="20" height="20">
                      <path fill="currentColor" d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8Z" />
                    </svg>
                    界面设置
                  </div>
                  
                  <div class="setting-item">
                    <div class="item-header">
                      <div class="item-title">界面缩放</div>
                    </div>
                    <div class="scale-control">
                      <div class="scale-info">
                        <span class="scale-label">缩放比例</span>
                        <span class="scale-value" id="scaleValue">100%</span>
                      </div>
                      <div class="scale-slider-container">
                        <input type="range" 
                               class="scale-slider" 
                               id="scaleSlider" 
                               min="0.8" 
                               max="1.5" 
                               step="0.1" 
                               value="1.0">
                        <div class="scale-marks">
                          <span class="scale-mark">80%</span>
                          <span class="scale-mark">100%</span>
                          <span class="scale-mark">120%</span>
                          <span class="scale-mark">150%</span>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="setting-item">
                    <div class="item-header">
                      <div class="item-title">消息显示速度</div>
                    </div>
                    <div class="typing-speed-control">
                      <div class="typing-speed-info">
                        <span class="typing-speed-label">显示速度</span>
                        <span class="typing-speed-value" id="typingSpeedValue">正常</span>
                      </div>
                      <div class="typing-speed-slider-container">
                        <input type="range" 
                               class="typing-speed-slider" 
                               id="typingSpeedSlider" 
                               min="1" 
                               max="4" 
                               step="1" 
                               value="1">
                        <div class="typing-speed-marks">
                          <span class="typing-speed-mark">正常</span>
                          <span class="typing-speed-mark">快速</span>
                          <span class="typing-speed-mark">瞬间</span>
                          <span class="typing-speed-mark">全部</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- 壁纸设置组 -->
                <div class="setting-group">
                  <div class="group-title">
                    <svg viewBox="0 0 24 24" width="20" height="20">
                      <path fill="currentColor" d="M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z" />
                    </svg>
                    壁纸设置
                  </div>
                  
                  <div class="setting-item">
                    <div class="item-header">
                      <div class="item-title">聊天列表壁纸</div>
                    </div>
                    <div class="item-description">设置聊天列表页面的背景壁纸</div>
                    <div class="upload-area" id="chatListWallpaperUpload">
                      <svg class="upload-icon" viewBox="0 0 24 24">
                        <path fill="currentColor" d="M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z" />
                      </svg>
                      <div class="upload-info">
                        <div class="upload-text">点击上传壁纸</div>
                        <div class="upload-hint">支持 JPG、PNG、WebP 格式，最大 2MB</div>
                      </div>
                    </div>
                    <div class="wallpaper-preview" id="chatListWallpaperPreview" style="display: none;">
                      <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMSIgaGVpZ2h0PSIxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InRyYW5zcGFyZW50Ii8+PC9zdmc+" alt="壁纸预览" />
                      <div class="preview-overlay">
                        <button class="remove-btn" id="removeChatListWallpaper">
                          <svg viewBox="0 0 24 24" width="12" height="12">
                            <path fill="currentColor" d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" />
                          </svg>
                        </button>
                      </div>
                    </div>
                  </div>

                  <div class="setting-item">
                    <div class="item-header">
                      <div class="item-title">全局聊天壁纸</div>
                    </div>
                    <div class="item-description">设置所有聊天的默认背景壁纸</div>
                    <div class="upload-area" id="globalChatWallpaperUpload">
                      <svg class="upload-icon" viewBox="0 0 24 24">
                        <path fill="currentColor" d="M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z" />
                      </svg>
                      <div class="upload-info">
                        <div class="upload-text">点击上传壁纸</div>
                        <div class="upload-hint">支持 JPG、PNG、WebP 格式，最大 2MB</div>
                      </div>
                    </div>
                    <div class="wallpaper-preview" id="globalChatWallpaperPreview" style="display: none;">
                      <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMSIgaGVpZ2h0PSIxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InRyYW5zcGFyZW50Ii8+PC9zdmc+" alt="壁纸预览" />
                      <div class="preview-overlay">
                        <button class="remove-btn" id="removeGlobalChatWallpaper">
                          <svg viewBox="0 0 24 24" width="12" height="12">
                            <path fill="currentColor" d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" />
                          </svg>
                        </button>
                        <button class="apply-all-btn" id="applyToAllChatsBtn" title="将此壁纸应用到所有聊天框">
                          <svg viewBox="0 0 24 24" width="12" height="12">
                            <path fill="currentColor" d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M11,16.5L18,9.5L16.59,8.09L11,13.67L7.91,10.59L6.5,12L11,16.5Z" />
                          </svg>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- 功能设置组 -->
                <div class="setting-group">
                  <div class="group-title">
                    <svg viewBox="0 0 24 24" width="20" height="20">
                      <path fill="currentColor" d="M12,2C6.477,2,2,6.477,2,12c0,5.523,4.477,10,10,10s10-4.477,10-10C22,6.477,17.523,2,12,2z M12,20c-4.418,0-8-3.582-8-8 s3.582-8,8-8s8,3.582,8,8S16.418,20,12,20z M15.5,11c0.828,0,1.5-0.672,1.5-1.5S16.328,8,15.5,8S14,8.672,14,9.5S14.672,11,15.5,11z M8.5,11c0.828,0,1.5-0.672,1.5-1.5S9.328,8,8.5,8S7,8.672,7,9.5S7.672,11,8.5,11z M12,17.5c2.33,0,4.31-1.46,5.11-3.5H6.89 C7.69,16.04,9.67,17.5,12,17.5z" />
                    </svg>
                    功能设置
                  </div>
                  
                  <div class="setting-item">
                    <div class="item-header">
                      <div class="item-title">表情包建议</div>
                      <div class="toggle-switch" id="emojiSuggestionsToggle">
                        <div class="toggle-handle"></div>
                      </div>
                    </div>
                    <div class="item-description">在输入时显示相关的表情包建议</div>
                  </div>

                  <div class="setting-item">
                    <div class="item-header">
                      <div class="item-title">跨聊天发送</div>
                      <div class="toggle-switch" id="crossChatSendToggle">
                        <div class="toggle-handle"></div>
                      </div>
                    </div>
                    <div class="item-description">发送时包含所有聊天的待发送消息，而不仅限于当前聊天</div>
                  </div>

                  <div class="setting-item">
                    <div class="item-header">
                      <div class="item-title">清除用户缓存</div>
                      <button class="action-btn danger-btn" id="clearUserCacheBtn">
                        <svg viewBox="0 0 24 24" width="16" height="16">
                          <path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" />
                        </svg>
                        清除
                      </button>
                    </div>
                    <div class="item-description">恢复头像和名字为默认设置</div>
                  </div>

                  <div class="setting-item">
                    <div class="item-header">
                      <div class="item-title">清除世界书角色缓存</div>
                      <button class="action-btn danger-btn" id="clearLorebookCacheBtn">
                        <svg viewBox="0 0 24 24" width="16" height="16">
                          <path fill="currentColor" d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6M10,8H14V10H10V8M10,12H14V16H10V12Z" />
                        </svg>
                        清除
                      </button>
                    </div>
                    <div class="item-description">清除世界书中角色的自定义头像缓存</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 动态界面 -->
        <div id="dynamicsInterface" style="display: none;">
          <!-- 状态栏容器 -->
          <div id="dynamicsStatusBarContainer"></div>

          <!-- 应用容器 -->
          <div class="dynamics-app-container">
            <!-- 导航栏 -->
            <div class="dynamics-nav-bar">
              <div class="dynamics-nav-profile"></div>
              <div class="dynamics-nav-logo">✧ 好友动态 ✧</div>
              <div class="dynamics-nav-settings">⚙️</div>
            </div>

            <!-- 时间线 -->
            <div class="dynamics-timeline" id="dynamicsTimeline">
              <!-- 动态内容将通过JavaScript动态生成 -->
            </div>
          </div>
          
          <!-- 通用底部导航栏（由 BottomNavigation 组件动态渲染） -->
          <div class="bottom-nav"></div>
        </div>

        <!-- 聊天界面 -->
        <div class="chat-container" id="chatInterface">
          <!-- 状态栏容器 -->
          <div id="chatStatusBarContainer"></div>
          
          <div class="chat-header">
            <div class="header-info">
              <img src="https://files.catbox.moe/u8ccy5.jpg" class="header-avatar" id="headerAvatar" />
              <div class="header-text">
                <h2 id="chatTitle">多云熊</h2>
                <div class="header-status">
                  <div class="status-dot"></div>
                  在线
                </div>
              </div>
            </div>
            <div class="header-icons">
              <svg class="header-icon diary-btn" viewBox="0 0 24 24">
                <path
                  fill="currentColor"
                  d="M19,3H14.82C14.4,1.84 13.3,1 12,1C10.7,1 9.6,1.84 9.18,3H5C3.9,3 3,3.9 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.9 20.1,3 19,3M12,3C12.55,3 13,3.45 13,4C13,4.55 12.55,5 12,5C11.45,5 11,4.55 11,4C11,3.45 11.45,3 12,3M7,7H17V5H19V19H5V5H7V7Z"
                />
              </svg>
              <svg class="header-icon home-btn" viewBox="0 0 24 24">
                <path fill="currentColor" d="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z" />
              </svg>
              <svg class="header-icon call-btn" viewBox="0 0 24 24">
                <path
                  fill="currentColor"
                  d="M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z"
                />
              </svg>
            </div>
          </div>

          <div class="chat-messages" id="chatMessages">
            <!-- 消息将通过JavaScript动态生成 -->
          </div>

          <div class="chat-input">
            <button class="plus-btn" id="plusBtn">
              <svg viewBox="0 0 24 24" width="20" height="20">
                <path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" />
              </svg>
            </button>

            <div class="plus-menu" id="plusMenu">
              <div class="menu-item" data-type="sticker">
                <div class="menu-icon">
                  <svg viewBox="0 0 24 24" width="20" height="20">
                    <path
                      fill="currentColor"
                      d="M12,2C6.477,2,2,6.477,2,12c0,5.523,4.477,10,10,10s10-4.477,10-10C22,6.477,17.523,2,12,2z M12,20c-4.418,0-8-3.582-8-8 s3.582-8,8-8s8,3.582,8,8S16.418,20,12,20z M15.5,11c0.828,0,1.5-0.672,1.5-1.5S16.328,8,15.5,8S14,8.672,14,9.5S14.672,11,15.5,11z M8.5,11c0.828,0,1.5-0.672,1.5-1.5S9.328,8,8.5,8S7,8.672,7,9.5S7.672,11,8.5,11z M12,17.5c2.33,0,4.31-1.46,5.11-3.5H6.89 C7.69,16.04,9.67,17.5,12,17.5z"
                    />
                  </svg>
                </div>
              </div>
              <div class="menu-item" data-type="image">
                <div class="menu-icon">
                  <svg viewBox="0 0 24 24" width="20" height="20">
                    <path
                      fill="currentColor"
                      d="M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z"
                    />
                  </svg>
                </div>
              </div>
              <div class="menu-item" data-type="voice">
                <div class="menu-icon">
                  <svg viewBox="0 0 24 24" width="20" height="20">
                    <path
                      fill="currentColor"
                      d="M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z"
                    />
                  </svg>
                </div>
              </div>
              <div class="menu-item" data-type="transfer">
                <div class="menu-icon">
                  <svg viewBox="0 0 24 24" width="20" height="20">
                    <path
                      fill="currentColor"
                      d="M6.99 11L3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"
                    />
                  </svg>
                </div>
              </div>
              <div class="menu-item" data-type="location">
                <div class="menu-icon">
                  <svg viewBox="0 0 24 24" width="20" height="20">
                    <path
                      fill="currentColor"
                      d="M12,2C15.31,2 18,4.66 18,7.95C18,12.41 12,19 12,19S6,12.41 6,7.95C6,4.66 8.69,2 12,2M12,6A2,2 0 0,0 10,8A2,2 0 0,0 12,10A2,2 0 0,0 14,8A2,2 0 0,0 12,6Z"
                    />
                  </svg>
                </div>
              </div>
            </div>

            <!-- 表情包选择框 - 类似加号菜单的定位方式 -->
            <div class="sticker-selector" id="stickerSelector">
              <!-- 表情包网格容器 -->
              <div class="sticker-grid" id="stickerGrid">
                <!-- 添加按钮和删除所有按钮将作为网格的前两个项目动态生成 -->
                <!-- 表情包项目将动态生成 -->
              </div>
            </div>

            <input type="text" class="input-field" id="inputField" placeholder="请输入..." />
            <button class="send-btn" id="sendBtn">
              <svg viewBox="0 0 24 24" width="20" height="20">
                <path fill="currentColor" d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- 隐藏的文件输入元素 -->
    <input type="file" id="avatarFileInput" accept="image/*" style="display: none;" />
    <input type="file" id="chatListWallpaperInput" accept="image/*" style="display: none;" />
    <input type="file" id="globalChatWallpaperInput" accept="image/*" style="display: none;" />

    <!-- 隐藏的SVG图标模板 -->
    <div id="iconTemplates" style="display: none">
      <!-- 语音消息图标模板 -->
      <div id="voiceIconTemplate">
        <svg class="mic-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path
            d="M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z"
          />
        </svg>
        <svg class="pause-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="display: none">
          <path d="M14,19H18V5H14M6,19H10V5H6V19Z" />
        </svg>
      </div>

      <!-- 位置消息图标模板 -->
      <div id="locationIconTemplate">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path
            d="M12,2C15.31,2 18,4.66 18,7.95C18,12.41 12,19 12,19S6,12.41 6,7.95C6,4.66 8.69,2 12,2M12,6A2,2 0 0,0 10,8A2,2 0 0,0 12,10A2,2 0 0,0 14,8A2,2 0 0,0 12,6Z"
          />
        </svg>
      </div>

      <!-- 转账消息图标模板 -->
      <div id="transferIconTemplate">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
          <path d="M12 2v20M2 12h20" />
        </svg>
      </div>
    </div>

    <!-- 转账模态框模板 -->
    <div id="transferModalTemplate" class="transfer-modal" style="display: none">
      <div class="modal-header">
        <div class="modal-title">收到转账</div>
        <div class="modal-subtitle">来自 <span class="sender-name"></span></div>
      </div>
      <div class="modal-amount">￥<span class="amount-value"></span></div>
      <div class="modal-details">
        <div class="detail-row">
          <span class="detail-label">转账方式</span>
          <span class="detail-value">零钱</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">转账留言</span>
          <span class="detail-value transfer-note"></span>
        </div>
      </div>
      <div class="modal-buttons">
        <button class="modal-btn reject-btn">退回</button>
        <button class="modal-btn accept-btn">接收</button>
      </div>
    </div>

    <!-- 图片输入模态框模板 -->
    <div id="imageInputModalTemplate" class="image-input-modal" style="display: none">
      <div class="modal-content">
        <div class="image-upload-section">
          <label class="modal-label">选择图片：</label>
          <div class="upload-options">
            <div class="upload-row">
              <button type="button" class="upload-btn local-upload-btn" id="localUploadBtn">
                选择本地文件
              </button>
              <span class="upload-divider">或</span>
            </div>
            <div class="upload-row">
              <input type="text" class="modal-input url-input" placeholder="输入图片链接（可选）..." id="imageUrlInput" />
            </div>
          </div>
          <div class="file-preview" id="filePreview" style="display: none;">
            <img id="previewImage" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMSIgaGVpZ2h0PSIxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InRyYW5zcGFyZW50Ii8+PC9zdmc+" alt="预览图片" />
            <div class="file-info">
              <span id="fileName"></span>
              <button type="button" class="remove-file-btn" id="removeFileBtn">✕</button>
            </div>
          </div>
        </div>
        
        <label class="modal-label modal-label-spaced">图片描述：</label>
        <input type="text" class="modal-input" placeholder="请输入图片描述..." id="imageDescInput" />
        
        <input type="file" id="fileInput" accept="image/*" style="display: none;" />
      </div>
    </div>

    <!-- 语音输入模态框模板 -->
    <div id="voiceInputModalTemplate" class="voice-input-modal" style="display: none">
      <div class="modal-content">
        <label class="modal-label">语音内容：</label>
        <input type="text" class="modal-input" placeholder="请输入语音内容..." id="voiceContentInput" />

        <label class="modal-label modal-label-spaced">语音时长：</label>
        <input
          type="number"
          class="modal-input"
          placeholder="请输入时长（秒）..."
          id="voiceDurationInput"
          min="1"
          max="300"
        />
      </div>
    </div>

    <!-- 位置输入模态框模板 -->
    <div id="locationInputModalTemplate" class="location-input-modal" style="display: none">
      <div class="modal-content">
        <label class="modal-label">位置描述：</label>
        <input type="text" class="modal-input" placeholder="请输入位置描述..." id="locationDescInput" />
      </div>
    </div>

    <!-- 转账输入模态框模板 -->
    <div id="transferInputModalTemplate" class="transfer-input-modal" style="display: none">
      <div class="modal-content">
        <label class="modal-label">转账金额：</label>
        <input
          type="number"
          class="modal-input"
          placeholder="请输入转账金额..."
          id="transferAmountInput"
          min="0.01"
          step="0.01"
        />

        <label class="modal-label modal-label-spaced">转账备注：</label>
        <input type="text" class="modal-input" placeholder="请输入转账备注（可选）..." id="transferNoteInput" />
      </div>
    </div>

    <!-- 编辑表情包模态框模板 -->
    <div id="editStickerModalTemplate" style="display: none">
      <div class="modal-title">编辑表情包</div>
      <div class="modal-content">
        <label class="modal-label">表情包URL：</label>
        <input type="text" class="modal-input" id="editStickerUrl" placeholder="请输入表情包链接..." />
        <label class="modal-label modal-label-spaced">表情包备注：</label>
        <input type="text" class="modal-input" id="editStickerNote" placeholder="请输入表情包备注（可选）..." />
      </div>
      <div class="modal-buttons">
        <button class="modal-btn cancel-btn">取消</button>
        <button class="modal-btn confirm-btn">保存</button>
      </div>
    </div>

    <!-- 添加表情包模态框模板 -->
    <div id="addStickerModalTemplate" style="display: none">
      <div class="modal-content">
        <label class="modal-label">表情包内容：</label>
        <input type="text" class="modal-input" placeholder="输入URL、文件名或备注+文件名..." id="stickerContentInput" />
        <label class="modal-label modal-label-spaced">表情包备注：</label>
        <input type="text" class="modal-input" placeholder="输入表情包备注（可选）..." id="stickerNoteInput" />
        <div class="input-help">
          <p>支持格式：</p>
          <ul>
            <li>完整URL：https://example.com/image.jpg</li>
            <li>文件名：ei6coi.jpeg</li>
            <li>备注+文件名：我是败犬ei6coi.jpeg</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- 表情包空状态模板 -->
    <div id="stickerEmptyStateTemplate" style="display: none">
      <div class="empty-icon">😊</div>
      <div class="empty-text">还没有表情包</div>
    </div>

    <!-- 删除模式按钮模板 -->
    <div id="deleteModeButtonTemplate" style="display: none">
      <span class="delete-icon">🗑</span>
      <span class="delete-text"></span>
    </div>

    <!-- 确认删除按钮模板 -->
    <div id="confirmDeleteButtonTemplate" style="display: none">
      <span class="confirm-icon">✓</span>
      <span class="confirm-text">确认</span>
    </div>
      </div>
    </div>

    <!-- 添加表情包输入模态框模板 -->
    <div id="addStickerModalTemplate" class="add-sticker-modal" style="display: none">
      <div class="modal-content">
        <label class="modal-label">表情包内容：</label>
        <input type="text" class="modal-input" placeholder="输入URL、文件名或备注+文件名..." id="stickerContentInput" />

        <label class="modal-label modal-label-spaced">表情包备注：</label>
        <input type="text" class="modal-input" placeholder="输入表情包备注（可选）..." id="stickerNoteInput" />

        <div class="input-help">
          <p>支持格式：</p>
          <ul>
            <li>完整URL：https://example.com/image.jpg</li>
            <li>文件名：ei6coi.jpeg</li>
            <li>备注+文件名：我是败犬ei6coi.jpeg</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- 消息模板容器 -->
    <div id="messageTemplates" style="display: none">
      <!-- 基础消息模板 -->
      <template id="messageTemplate">
        <div class="message">
          <div class="avatar-container"></div>
          <div class="message-wrapper">
            <div class="message-content"></div>
            <div class="message-time"></div>
          </div>
        </div>
      </template>

      <!-- 语音消息模板 -->
      <template id="voiceMessageTemplate">
        <div class="voice-message">
          <div class="voice-icon"></div>
          <div class="voice-wave-container">
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
          </div>
          <span class="voice-duration"></span>
        </div>
        <div class="voice-transcript" style="display: none"></div>
      </template>

      <!-- 位置消息模板 -->
      <template id="locationMessageTemplate">
        <div class="location-message">
          <div class="location-icon"></div>
          <span class="location-text"></span>
        </div>
      </template>

      <!-- 转账消息模板 -->
      <template id="transferMessageTemplate">
        <div class="transfer-bubble">
          <div class="transfer-content">
            <div class="transfer-icon"></div>
            <div class="transfer-info">
              <div class="transfer-amount"></div>
              <div class="transfer-status"></div>
            </div>
          </div>
        </div>
      </template>

      <!-- 附件消息模板 -->
      <template id="attachmentMessageTemplate">
        <div class="random-image-container dynamic-bg">
          <details>
            <summary></summary>
            <div class="attachment-content">
              <div class="attachment-text">
                <p></p>
              </div>
            </div>
          </details>
        </div>
      </template>
    </div>
  <script>var __webpack_modules__ = {
  "./src/多云熊/备份/给rovo的/modules/chat/ChatWallpaperManager.ts": 
  /*!****************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/chat/ChatWallpaperManager.ts ***!
  \****************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatWallpaperManager: () => (/* binding */ ChatWallpaperManager)\n/* harmony export */ });\n/* harmony import */ var _profile_StorageManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../profile/StorageManager */ \"./src/多云熊/备份/给rovo的/modules/profile/StorageManager.ts\");\n/**\n * ChatWallpaperManager - 聊天窗口壁纸管理器\n * 负责聊天窗口背景壁纸的管理和应用\n * 支持全局壁纸和单独聊天框壁纸\n */\n\nclass ChatWallpaperManager {\n    static instance;\n    storageManager;\n    currentGlobalWallpaper = '';\n    individualWallpapers = {};\n    defaultWallpaper = 'https://files.catbox.moe/o84j4n.jpg';\n    currentChatId = '';\n    constructor() {\n        this.storageManager = _profile_StorageManager__WEBPACK_IMPORTED_MODULE_0__.StorageManager.getInstance();\n        this.initialize();\n    }\n    /**\n     * 获取单例实例\n     */\n    static getInstance() {\n        if (!ChatWallpaperManager.instance) {\n            ChatWallpaperManager.instance = new ChatWallpaperManager();\n        }\n        return ChatWallpaperManager.instance;\n    }\n    /**\n     * 初始化壁纸管理器\n     */\n    initialize() {\n        // 加载保存的壁纸设置\n        this.loadWallpaperFromSettings();\n        // 监听设置变更事件\n        document.addEventListener('settingsChange', (event) => {\n            this.handleSettingsChange(event.detail.settings);\n        });\n        // 监听角色切换事件\n        document.addEventListener('characterChange', () => {\n            console.log('[ChatWallpaperManager] 检测到角色切换，重新加载壁纸');\n            this.forceRefresh();\n        });\n        // 监听聊天切换事件\n        document.addEventListener('chatChange', (event) => {\n            const chatId = event.detail.chatId;\n            console.log('[ChatWallpaperManager] 检测到聊天切换:', chatId);\n            this.handleChatChange(chatId);\n        });\n        // 监听设置模态框的壁纸操作事件\n        document.addEventListener('globalChatWallpaperChange', (event) => {\n            const wallpaperData = event.detail.wallpaperData;\n            console.log('[ChatWallpaperManager] 检测到全局壁纸变更');\n            this.setGlobalWallpaper(wallpaperData);\n        });\n        document.addEventListener('clearGlobalChatWallpaper', () => {\n            console.log('[ChatWallpaperManager] 检测到清除全局壁纸');\n            this.clearGlobalWallpaper();\n        });\n        document.addEventListener('applyWallpaperToAllChats', (event) => {\n            const wallpaperData = event.detail.wallpaperData;\n            console.log('[ChatWallpaperManager] 检测到应用壁纸到所有聊天框');\n            this.applyWallpaperToAll(wallpaperData);\n        });\n    }\n    /**\n     * 从设置中加载壁纸\n     */\n    loadWallpaperFromSettings() {\n        try {\n            const settings = this.storageManager.loadSettings();\n            this.currentGlobalWallpaper = settings.globalChatWallpaper || '';\n            this.individualWallpapers = settings.individualChatWallpapers || {};\n            console.log('[ChatWallpaperManager] 加载壁纸设置:', {\n                globalWallpaper: this.currentGlobalWallpaper ? '已设置' : '未设置',\n                individualCount: Object.keys(this.individualWallpapers).length,\n            });\n        }\n        catch (error) {\n            console.error('[ChatWallpaperManager] 加载壁纸设置失败:', error);\n            this.currentGlobalWallpaper = '';\n            this.individualWallpapers = {};\n        }\n    }\n    /**\n     * 处理设置变更\n     */\n    handleSettingsChange(settings) {\n        const newGlobalWallpaper = settings.globalChatWallpaper || '';\n        const newIndividualWallpapers = settings.individualChatWallpapers || {};\n        let hasChanged = false;\n        if (newGlobalWallpaper !== this.currentGlobalWallpaper) {\n            console.log('[ChatWallpaperManager] 检测到全局壁纸变更');\n            this.currentGlobalWallpaper = newGlobalWallpaper;\n            hasChanged = true;\n        }\n        if (JSON.stringify(newIndividualWallpapers) !== JSON.stringify(this.individualWallpapers)) {\n            console.log('[ChatWallpaperManager] 检测到单独壁纸变更');\n            this.individualWallpapers = newIndividualWallpapers;\n            hasChanged = true;\n        }\n        if (hasChanged) {\n            this.applyCurrentWallpaper();\n        }\n    }\n    /**\n     * 处理聊天切换\n     */\n    handleChatChange(chatId) {\n        this.currentChatId = chatId;\n        this.applyCurrentWallpaper();\n    }\n    /**\n     * 应用当前聊天的壁纸\n     */\n    applyCurrentWallpaper() {\n        const chatInterface = document.getElementById('chatInterface');\n        const chatContainer = document.querySelector('.chat-container');\n        const chatMessages = document.getElementById('chatMessages');\n        // 优先使用chatInterface，然后是chatContainer，最后是chatMessages\n        const targetElement = chatInterface || chatContainer || chatMessages;\n        if (!targetElement) {\n            console.warn('[ChatWallpaperManager] 未找到聊天界面元素，稍后重试');\n            setTimeout(() => {\n                this.applyCurrentWallpaper();\n            }, 100);\n            return;\n        }\n        // 获取当前聊天应该使用的壁纸\n        const wallpaperUrl = this.getCurrentWallpaperUrl();\n        // 应用壁纸到聊天界面\n        if (wallpaperUrl) {\n            targetElement.style.backgroundImage = `url('${wallpaperUrl}')`;\n            targetElement.style.backgroundSize = 'cover';\n            targetElement.style.backgroundPosition = 'center center';\n            targetElement.style.backgroundRepeat = 'no-repeat';\n            targetElement.style.backgroundAttachment = 'scroll';\n            // 确保背景不会被内容遮挡\n            if (targetElement.style.position === '' || targetElement.style.position === 'static') {\n                targetElement.style.position = 'relative';\n            }\n        }\n        else {\n            // 清除背景\n            targetElement.style.backgroundImage = '';\n            targetElement.style.backgroundSize = '';\n            targetElement.style.backgroundPosition = '';\n            targetElement.style.backgroundRepeat = '';\n            targetElement.style.backgroundAttachment = '';\n        }\n        console.log('[ChatWallpaperManager] 壁纸已应用到聊天界面:', wallpaperUrl ? '自定义壁纸' : '无壁纸');\n    }\n    /**\n     * 获取当前聊天应该使用的壁纸URL\n     */\n    getCurrentWallpaperUrl() {\n        // 优先级：单独聊天壁纸 > 全局聊天壁纸 > 无壁纸\n        if (this.currentChatId && this.individualWallpapers[this.currentChatId]) {\n            return this.individualWallpapers[this.currentChatId];\n        }\n        if (this.currentGlobalWallpaper) {\n            return this.currentGlobalWallpaper;\n        }\n        return '';\n    }\n    /**\n     * 设置全局聊天壁纸\n     */\n    setGlobalWallpaper(wallpaperData) {\n        try {\n            // 更新当前全局壁纸\n            this.currentGlobalWallpaper = wallpaperData;\n            // 保存到设置\n            const settings = this.storageManager.loadSettings();\n            settings.globalChatWallpaper = wallpaperData;\n            this.storageManager.saveSettings(settings);\n            // 应用壁纸\n            this.applyCurrentWallpaper();\n            console.log('[ChatWallpaperManager] 全局聊天壁纸设置成功');\n        }\n        catch (error) {\n            console.error('[ChatWallpaperManager] 设置全局聊天壁纸失败:', error);\n            throw error;\n        }\n    }\n    /**\n     * 设置单独聊天壁纸\n     */\n    setIndividualWallpaper(chatId, wallpaperData) {\n        try {\n            // 更新单独壁纸映射\n            this.individualWallpapers[chatId] = wallpaperData;\n            // 保存到设置\n            const settings = this.storageManager.loadSettings();\n            settings.individualChatWallpapers = { ...this.individualWallpapers };\n            this.storageManager.saveSettings(settings);\n            // 如果是当前聊天，立即应用壁纸\n            if (this.currentChatId === chatId) {\n                this.applyCurrentWallpaper();\n            }\n            console.log('[ChatWallpaperManager] 单独聊天壁纸设置成功:', chatId);\n        }\n        catch (error) {\n            console.error('[ChatWallpaperManager] 设置单独聊天壁纸失败:', error);\n            throw error;\n        }\n    }\n    /**\n     * 移除单独聊天壁纸\n     */\n    removeIndividualWallpaper(chatId) {\n        try {\n            // 从映射中删除\n            delete this.individualWallpapers[chatId];\n            // 保存到设置\n            const settings = this.storageManager.loadSettings();\n            settings.individualChatWallpapers = { ...this.individualWallpapers };\n            this.storageManager.saveSettings(settings);\n            // 如果是当前聊天，重新应用壁纸\n            if (this.currentChatId === chatId) {\n                this.applyCurrentWallpaper();\n            }\n            console.log('[ChatWallpaperManager] 单独聊天壁纸已移除:', chatId);\n        }\n        catch (error) {\n            console.error('[ChatWallpaperManager] 移除单独聊天壁纸失败:', error);\n            throw error;\n        }\n    }\n    /**\n     * 清除全局聊天壁纸\n     */\n    clearGlobalWallpaper() {\n        try {\n            // 清除全局壁纸\n            this.currentGlobalWallpaper = '';\n            // 保存到设置\n            const settings = this.storageManager.loadSettings();\n            settings.globalChatWallpaper = '';\n            this.storageManager.saveSettings(settings);\n            // 重新应用壁纸\n            this.applyCurrentWallpaper();\n            console.log('[ChatWallpaperManager] 全局聊天壁纸已清除');\n        }\n        catch (error) {\n            console.error('[ChatWallpaperManager] 清除全局聊天壁纸失败:', error);\n            throw error;\n        }\n    }\n    /**\n     * 全局更换所有聊天框壁纸\n     * 将指定壁纸应用到全局设置，并清除所有单独设置\n     */\n    applyWallpaperToAll(wallpaperData) {\n        try {\n            // 设置为全局壁纸\n            this.currentGlobalWallpaper = wallpaperData;\n            // 清除所有单独壁纸设置\n            this.individualWallpapers = {};\n            // 保存到设置\n            const settings = this.storageManager.loadSettings();\n            settings.globalChatWallpaper = wallpaperData;\n            settings.individualChatWallpapers = {};\n            this.storageManager.saveSettings(settings);\n            // 应用壁纸\n            this.applyCurrentWallpaper();\n            console.log('[ChatWallpaperManager] 壁纸已应用到所有聊天框');\n        }\n        catch (error) {\n            console.error('[ChatWallpaperManager] 全局更换壁纸失败:', error);\n            throw error;\n        }\n    }\n    /**\n     * 获取当前全局壁纸\n     */\n    getCurrentGlobalWallpaper() {\n        return this.currentGlobalWallpaper;\n    }\n    /**\n     * 获取指定聊天的壁纸\n     */\n    getChatWallpaper(chatId) {\n        return this.individualWallpapers[chatId] || '';\n    }\n    /**\n     * 获取所有单独壁纸设置\n     */\n    getAllIndividualWallpapers() {\n        return { ...this.individualWallpapers };\n    }\n    /**\n     * 检查是否有全局壁纸\n     */\n    hasGlobalWallpaper() {\n        return !!this.currentGlobalWallpaper;\n    }\n    /**\n     * 检查指定聊天是否有单独壁纸\n     */\n    hasIndividualWallpaper(chatId) {\n        return !!this.individualWallpapers[chatId];\n    }\n    /**\n     * 预加载壁纸图片\n     */\n    preloadWallpaper(wallpaperUrl) {\n        return new Promise((resolve, reject) => {\n            const img = new Image();\n            img.onload = () => {\n                console.log('[ChatWallpaperManager] 壁纸预加载成功');\n                resolve();\n            };\n            img.onerror = error => {\n                console.error('[ChatWallpaperManager] 壁纸预加载失败:', error);\n                reject(error);\n            };\n            img.src = wallpaperUrl;\n        });\n    }\n    /**\n     * 强制刷新壁纸\n     */\n    forceRefresh() {\n        console.log('[ChatWallpaperManager] 强制刷新壁纸');\n        this.loadWallpaperFromSettings();\n        this.applyCurrentWallpaper();\n    }\n    /**\n     * 处理角色切换\n     */\n    handleCharacterChange() {\n        console.log('[ChatWallpaperManager] 处理角色切换，重新加载壁纸设置');\n        this.forceRefresh();\n    }\n    /**\n     * 清除当前角色的所有壁纸缓存\n     */\n    clearAllWallpaperCache() {\n        try {\n            // 清除所有壁纸设置\n            this.currentGlobalWallpaper = '';\n            this.individualWallpapers = {};\n            // 保存到设置\n            const settings = this.storageManager.loadSettings();\n            settings.globalChatWallpaper = '';\n            settings.individualChatWallpapers = {};\n            this.storageManager.saveSettings(settings);\n            // 清除界面背景\n            const chatInterface = document.getElementById('chatInterface');\n            const chatContainer = document.querySelector('.chat-container');\n            const chatMessages = document.getElementById('chatMessages');\n            const targetElement = chatInterface || chatContainer || chatMessages;\n            if (targetElement) {\n                targetElement.style.backgroundImage = '';\n            }\n            console.log('[ChatWallpaperManager] 所有壁纸缓存已清除');\n        }\n        catch (error) {\n            console.error('[ChatWallpaperManager] 清除壁纸缓存失败:', error);\n            throw error;\n        }\n    }\n    /**\n     * 设置当前聊天ID\n     */\n    setCurrentChatId(chatId) {\n        if (this.currentChatId !== chatId) {\n            this.currentChatId = chatId;\n            this.applyCurrentWallpaper();\n        }\n    }\n    /**\n     * 销毁壁纸管理器\n     */\n    destroy() {\n        // 移除事件监听器\n        document.removeEventListener('settingsChange', this.handleSettingsChange.bind(this));\n        document.removeEventListener('characterChange', this.handleCharacterChange.bind(this));\n        // 清除界面背景\n        const chatInterface = document.getElementById('chatInterface');\n        const chatContainer = document.querySelector('.chat-container');\n        const chatMessages = document.getElementById('chatMessages');\n        const targetElement = chatInterface || chatContainer || chatMessages;\n        if (targetElement) {\n            targetElement.style.backgroundImage = '';\n        }\n        console.log('[ChatWallpaperManager] 聊天壁纸管理器已销毁');\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY2hhdC9DaGF0V2FsbHBhcGVyTWFuYWdlci50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBOzs7O0dBSUc7QUFFd0Q7QUFHcEQsTUFBTSxvQkFBb0I7SUFDdkIsTUFBTSxDQUFDLFFBQVEsQ0FBdUI7SUFDdEMsY0FBYyxDQUFpQjtJQUMvQixzQkFBc0IsR0FBVyxFQUFFLENBQUM7SUFDcEMsb0JBQW9CLEdBQTJCLEVBQUUsQ0FBQztJQUNsRCxnQkFBZ0IsR0FBVyxxQ0FBcUMsQ0FBQztJQUNqRSxhQUFhLEdBQVcsRUFBRSxDQUFDO0lBRW5DO1FBQ0UsSUFBSSxDQUFDLGNBQWMsR0FBRyxtRUFBYyxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ25ELElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztJQUNwQixDQUFDO0lBRUQ7O09BRUc7SUFDSSxNQUFNLENBQUMsV0FBVztRQUN2QixJQUFJLENBQUMsb0JBQW9CLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDbkMsb0JBQW9CLENBQUMsUUFBUSxHQUFHLElBQUksb0JBQW9CLEVBQUUsQ0FBQztRQUM3RCxDQUFDO1FBQ0QsT0FBTyxvQkFBb0IsQ0FBQyxRQUFRLENBQUM7SUFDdkMsQ0FBQztJQUVEOztPQUVHO0lBQ0ssVUFBVTtRQUNoQixZQUFZO1FBQ1osSUFBSSxDQUFDLHlCQUF5QixFQUFFLENBQUM7UUFFakMsV0FBVztRQUNYLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDLEtBQWtCLEVBQUUsRUFBRTtZQUNqRSxJQUFJLENBQUMsb0JBQW9CLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNuRCxDQUFDLENBQUMsQ0FBQztRQUVILFdBQVc7UUFDWCxRQUFRLENBQUMsZ0JBQWdCLENBQUMsaUJBQWlCLEVBQUUsR0FBRyxFQUFFO1lBQ2hELE9BQU8sQ0FBQyxHQUFHLENBQUMsdUNBQXVDLENBQUMsQ0FB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QUMsY0FBYyxDQUFnQixDQUFDO1FBQzVFLE1BQU0sYUFBYSxHQUFHLGFBQWEsSUFBSSxhQUFhLElBQUksWUFBWSxDQUFDO1FBRXJFLElBQUksYUFBYSxFQUFFLENBQUM7WUFDbEIsYUFBYSxDQUFDLEtBQUssQ0FBQyxlQUFlLEdBQUcsRUFBRSxDQUFDO1FBQzNDLENBQUM7UUFFRCxPQUFPLENBQUMsR0FBRyxDQUFDLG1DQUFtQyxDQUFDLENBQUM7SUFDbkQsQ0FBQztDQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy9jaGF0L0NoYXRXYWxscGFwZXJNYW5hZ2VyLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ2hhdFdhbGxwYXBlck1hbmFnZXIgLSDogYrlpKnnqpflj6Plo4HnurjnrqHnkIblmahcclxuICog6LSf6LSj6IGK5aSp56qX5Y+j6IOM5pmv5aOB57q455qE566h55CG5ZKM5bqU55SoXHJcbiAqIOaUr+aMgeWFqOWxgOWjgee6uOWSjOWNleeLrOiBiuWkqeahhuWjgee6uFxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFN0b3JhZ2VNYW5hZ2VyIH0gZnJvbSAnLi4vcHJvZmlsZS9TdG9yYWdlTWFuYWdlcic7XHJcbmltcG9ydCB7IEFwcFNldHRpbmdzIH0gZnJvbSAnLi4vcHJvZmlsZS90eXBlcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgQ2hhdFdhbGxwYXBlck1hbmFnZXIge1xyXG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBDaGF0V2FsbHBhcGVyTWFuYWdlcjtcclxuICBwcml2YXRlIHN0b3JhZ2VNYW5hZ2VyOiBTdG9yYWdlTWFuYWdlcjtcclxuICBwcml2YXRlIGN1cnJlbnRHbG9iYWxXYWxscGFwZXI6IHN0cmluZyA9ICcnO1xyXG4gIHByaXZhdGUgaW5kaXZpZHVhbFdhbGxwYXBlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcclxuICBwcml2YXRlIGRlZmF1bHRXYWxscGFwZXI6IHN0cmluZyA9ICdodHRwczovL2ZpbGVzLmNhdGJveC5tb2Uvbzg0ajRuLmpwZyc7XHJcbiAgcHJpdmF0ZSBjdXJyZW50Q2hhdElkOiBzdHJpbmcgPSAnJztcclxuXHJcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuc3RvcmFnZU1hbmFnZXIgPSBTdG9yYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xyXG4gICAgdGhpcy5pbml0aWFsaXplKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bljZXkvovlrp7kvotcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldEluc3RhbmNlKCk6IENoYXRXYWxscGFwZXJNYW5hZ2VyIHtcclxuICAgIGlmICghQ2hhdFdhbGxwYXBlck1hbmFnZXIuaW5zdGFuY2UpIHtcclxuICAgICAgQ2hhdFdhbGxwYXBlck1hbmFnZXIuaW5zdGFuY2UgPSBuZXcgQ2hhdFdhbGxwYXBlck1hbmFnZXIoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBDaGF0V2FsbHBhcGVyTWFuYWdlci5pbnN0YW5jZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWIneWni+WMluWjgee6uOeuoeeQhuWZqFxyXG4gICAqL1xyXG4gIHByaXZhdGUgaW5pdGlhbGl6ZSgpOiB2b2lkIHtcclxuICAgIC8vIOWKoOi9veS/neWtmOeahOWjgee6uOiuvue9rlxyXG4gICAgdGhpcy5sb2FkV2FsbHBhcGVyRnJvbVNldHRpbmdzKCk7XHJcblxyXG4gICAgLy8g55uR5ZCs6K6+572u5Y+Y5pu05LqL5Lu2XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzZXR0aW5nc0NoYW5nZScsIChldmVudDogQ3VzdG9tRXZlbnQpID0+IHtcclxuICAgICAgdGhpcy5oYW5kbGVTZXR0aW5nc0NoYW5nZShldmVudC5kZXRhaWwuc2V0dGluZ3MpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8g55uR5ZCs6KeS6Imy5YiH5o2i5LqL5Lu2XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjaGFyYWN0ZXJDaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdbQ2hhdFdhbGxwYXBlck1hbmFnZXJdIOajgOa1i+WIsOinkuiJsuWIh+aNou+8jOmHjeaWsOWKoOi9veWjgee6uCcpO1xyXG4gICAgICB0aGlzLmZvcmNlUmVmcmVzaCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8g55uR5ZCs6IGK5aSp5YiH5o2i5LqL5Lu2XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjaGF0Q2hhbmdlJywgKGV2ZW50OiBDdXN0b21FdmVudCkgPT4ge1xyXG4gICAgICBjb25zdCBjaGF0SWQgPSBldmVudC5kZXRhaWwuY2hhdElkO1xyXG4gICAgICBjb25zb2xlLmxvZygnW0NoYXRXYWxscGFwZXJNYW5hZ2VyXSDmo4DmtYvliLDogYrlpKnliIfmjaI6JywgY2hhdElkKTtcclxuICAgICAgdGhpcy5oYW5kbGVDaGF0Q2hhbmdlKGNoYXRJZCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyDnm5HlkKzorr7nva7mqKHmgIHmoYbnmoTlo4Hnurjmk43kvZzkuovku7ZcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2dsb2JhbENoYXRXYWxscGFwZXJDaGFuZ2UnLCAoZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB7XHJcbiAgICAgIGNvbnN0IHdhbGxwYXBlckRhdGEgPSBldmVudC5kZXRhaWwud2FsbHBhcGVyRGF0YTtcclxuICAgICAgY29uc29sZS5sb2coJ1tDaGF0V2FsbHBhcGVyTWFuYWdlcl0g5qOA5rWL5Yiw5YWo5bGA5aOB57q45Y+Y5pu0Jyk7XHJcbiAgICAgIHRoaXMuc2V0R2xvYmFsV2FsbHBhcGVyKHdhbGxwYXBlckRhdGEpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xlYXJHbG9iYWxDaGF0V2FsbHBhcGVyJywgKCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygnW0NoYXRXYWxscGFwZXJNYW5hZ2VyXSDmo4DmtYvliLDmuIXpmaTlhajlsYDlo4HnurgnKTtcclxuICAgICAgdGhpcy5jbGVhckdsb2JhbFdhbGxwYXBlcigpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYXBwbHlXYWxscGFwZXJUb0FsbENoYXRzJywgKGV2ZW50OiBDdXN0b21FdmVudCkgPT4ge1xyXG4gICAgICBjb25zdCB3YWxscGFwZXJEYXRhID0gZXZlbnQuZGV0YWlsLndhbGxwYXBlckRhdGE7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdbQ2hhdFdhbGxwYXBlck1hbmFnZXJdIOajgOa1i+WIsOW6lOeUqOWjgee6uOWIsOaJgOacieiBiuWkqeahhicpO1xyXG4gICAgICB0aGlzLmFwcGx5V2FsbHBhcGVyVG9BbGwod2FsbHBhcGVyRGF0YSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOS7juiuvue9ruS4reWKoOi9veWjgee6uFxyXG4gICAqL1xyXG4gIHByaXZhdGUgbG9hZFdhbGxwYXBlckZyb21TZXR0aW5ncygpOiB2b2lkIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5zdG9yYWdlTWFuYWdlci5sb2FkU2V0dGluZ3MoKTtcclxuICAgICAgdGhpcy5jdXJyZW50R2xvYmFsV2FsbHBhcGVyID0gc2V0dGluZ3MuZ2xvYmFsQ2hhdFdhbGxwYXBlciB8fCAnJztcclxuICAgICAgdGhpcy5pbmRpdmlkdWFsV2FsbHBhcGVycyA9IHNldHRpbmdzLmluZGl2aWR1YWxDaGF0V2FsbHBhcGVycyB8fCB7fTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKCdbQ2hhdFdhbGxwYXBlck1hbmFnZXJdIOWKoOi9veWjgee6uOiuvue9rjonLCB7XHJcbiAgICAgICAgZ2xvYmFsV2FsbHBhcGVyOiB0aGlzLmN1cnJlbnRHbG9iYWxXYWxscGFwZXIgPyAn5bey6K6+572uJyA6ICfmnKrorr7nva4nLFxyXG4gICAgICAgIGluZGl2aWR1YWxDb3VudDogT2JqZWN0LmtleXModGhpcy5pbmRpdmlkdWFsV2FsbHBhcGVycykubGVuZ3RoLFxyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tDaGF0V2FsbHBhcGVyTWFuYWdlcl0g5Yqg6L295aOB57q46K6+572u5aSx6LSlOicsIGVycm9yKTtcclxuICAgICAgdGhpcy5jdXJyZW50R2xvYmFsV2FsbHBhcGVyID0gJyc7XHJcbiAgICAgIHRoaXMuaW5kaXZpZHVhbFdhbGxwYXBlcnMgPSB7fTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWkhOeQhuiuvue9ruWPmOabtFxyXG4gICAqL1xyXG4gIHByaXZhdGUgaGFuZGxlU2V0dGluZ3NDaGFuZ2Uoc2V0dGluZ3M6IEFwcFNldHRpbmdzKTogdm9pZCB7XHJcbiAgICBjb25zdCBuZXdHbG9iYWxXYWxscGFwZXIgPSBzZXR0aW5ncy5nbG9iYWxDaGF0V2FsbHBhcGVyIHx8ICcnO1xyXG4gICAgY29uc3QgbmV3SW5kaXZpZHVhbFdhbGxwYXBlcnMgPSBzZXR0aW5ncy5pbmRpdmlkdWFsQ2hhdFdhbGxwYXBlcnMgfHwge307XHJcblxyXG4gICAgbGV0IGhhc0NoYW5nZWQgPSBmYWxzZTtcclxuXHJcbiAgICBpZiAobmV3R2xvYmFsV2FsbHBhcGVyICE9PSB0aGlzLmN1cnJlbnRHbG9iYWxXYWxscGFwZXIpIHtcclxuICAgICAgY29uc29sZS5sb2coJ1tDaGF0V2FsbHBhcGVyTWFuYWdlcl0g5qOA5rWL5Yiw5YWo5bGA5aOB57q45Y+Y5pu0Jyk7XHJcbiAgICAgIHRoaXMuY3VycmVudEdsb2JhbFdhbGxwYXBlciA9IG5ld0dsb2JhbFdhbGxwYXBlcjtcclxuICAgICAgaGFzQ2hhbmdlZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKEpTT04uc3RyaW5naWZ5KG5ld0luZGl2aWR1YWxXYWxscGFwZXJzKSAhPT0gSlNPTi5zdHJpbmdpZnkodGhpcy5pbmRpdmlkdWFsV2FsbHBhcGVycykpIHtcclxuICAgICAgY29uc29sZS5sb2coJ1tDaGF0V2FsbHBhcGVyTWFuYWdlcl0g5qOA5rWL5Yiw5Y2V54us5aOB57q45Y+Y5pu0Jyk7XHJcbiAgICAgIHRoaXMuaW5kaXZpZHVhbFdhbGxwYXBlcnMgPSBuZXdJbmRpdmlkdWFsV2FsbHBhcGVycztcclxuICAgICAgaGFzQ2hhbmdlZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGhhc0NoYW5nZWQpIHtcclxuICAgICAgdGhpcy5hcHBseUN1cnJlbnRXYWxscGFwZXIoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWkhOeQhuiBiuWkqeWIh+aNolxyXG4gICAqL1xyXG4gIHByaXZhdGUgaGFuZGxlQ2hhdENoYW5nZShjaGF0SWQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgdGhpcy5jdXJyZW50Q2hhdElkID0gY2hhdElkO1xyXG4gICAgdGhpcy5hcHBseUN1cnJlbnRXYWxscGFwZXIoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOW6lOeUqOW9k+WJjeiBiuWkqeeahOWjgee6uFxyXG4gICAqL1xyXG4gIHB1YmxpYyBhcHBseUN1cnJlbnRXYWxscGFwZXIoKTogdm9pZCB7XHJcbiAgICBjb25zdCBjaGF0SW50ZXJmYWNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXRJbnRlcmZhY2UnKSBhcyBIVE1MRWxlbWVudDtcclxuICAgIGNvbnN0IGNoYXRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhdC1jb250YWluZXInKSBhcyBIVE1MRWxlbWVudDtcclxuICAgIGNvbnN0IGNoYXRNZXNzYWdlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGF0TWVzc2FnZXMnKSBhcyBIVE1MRWxlbWVudDtcclxuXHJcbiAgICAvLyDkvJjlhYjkvb/nlKhjaGF0SW50ZXJmYWNl77yM54S25ZCO5pivY2hhdENvbnRhaW5lcu+8jOacgOWQjuaYr2NoYXRNZXNzYWdlc1xyXG4gICAgY29uc3QgdGFyZ2V0RWxlbWVudCA9IGNoYXRJbnRlcmZhY2UgfHwgY2hhdENvbnRhaW5lciB8fCBjaGF0TWVzc2FnZXM7XHJcblxyXG4gICAgaWYgKCF0YXJnZXRFbGVtZW50KSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignW0NoYXRXYWxscGFwZXJNYW5hZ2VyXSDmnKrmib7liLDogYrlpKnnlYzpnaLlhYPntKDvvIznqI3lkI7ph43or5UnKTtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5hcHBseUN1cnJlbnRXYWxscGFwZXIoKTtcclxuICAgICAgfSwgMTAwKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOiOt+WPluW9k+WJjeiBiuWkqeW6lOivpeS9v+eUqOeahOWjgee6uFxyXG4gICAgY29uc3Qgd2FsbHBhcGVyVXJsID0gdGhpcy5nZXRDdXJyZW50V2FsbHBhcGVyVXJsKCk7XHJcblxyXG4gICAgLy8g5bqU55So5aOB57q45Yiw6IGK5aSp55WM6Z2iXHJcbiAgICBpZiAod2FsbHBhcGVyVXJsKSB7XHJcbiAgICAgIHRhcmdldEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgnJHt3YWxscGFwZXJVcmx9JylgO1xyXG4gICAgICB0YXJnZXRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRTaXplID0gJ2NvdmVyJztcclxuICAgICAgdGFyZ2V0RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSAnY2VudGVyIGNlbnRlcic7XHJcbiAgICAgIHRhcmdldEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZFJlcGVhdCA9ICduby1yZXBlYXQnO1xyXG4gICAgICB0YXJnZXRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRBdHRhY2htZW50ID0gJ3Njcm9sbCc7XHJcblxyXG4gICAgICAvLyDnoa7kv53og4zmma/kuI3kvJrooqvlhoXlrrnpga7mjKFcclxuICAgICAgaWYgKHRhcmdldEVsZW1lbnQuc3R5bGUucG9zaXRpb24gPT09ICcnIHx8IHRhcmdldEVsZW1lbnQuc3R5bGUucG9zaXRpb24gPT09ICdzdGF0aWMnKSB7XHJcbiAgICAgICAgdGFyZ2V0RWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIOa4hemZpOiDjOaZr1xyXG4gICAgICB0YXJnZXRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICcnO1xyXG4gICAgICB0YXJnZXRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRTaXplID0gJyc7XHJcbiAgICAgIHRhcmdldEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uID0gJyc7XHJcbiAgICAgIHRhcmdldEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZFJlcGVhdCA9ICcnO1xyXG4gICAgICB0YXJnZXRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRBdHRhY2htZW50ID0gJyc7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ1tDaGF0V2FsbHBhcGVyTWFuYWdlcl0g5aOB57q45bey5bqU55So5Yiw6IGK5aSp55WM6Z2iOicsIHdhbGxwYXBlclVybCA/ICfoh6rlrprkuYnlo4HnurgnIDogJ+aXoOWjgee6uCcpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5b2T5YmN6IGK5aSp5bqU6K+l5L2/55So55qE5aOB57q4VVJMXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBnZXRDdXJyZW50V2FsbHBhcGVyVXJsKCk6IHN0cmluZyB7XHJcbiAgICAvLyDkvJjlhYjnuqfvvJrljZXni6zogYrlpKnlo4HnurggPiDlhajlsYDogYrlpKnlo4HnurggPiDml6Dlo4HnurhcclxuICAgIGlmICh0aGlzLmN1cnJlbnRDaGF0SWQgJiYgdGhpcy5pbmRpdmlkdWFsV2FsbHBhcGVyc1t0aGlzLmN1cnJlbnRDaGF0SWRdKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmluZGl2aWR1YWxXYWxscGFwZXJzW3RoaXMuY3VycmVudENoYXRJZF07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuY3VycmVudEdsb2JhbFdhbGxwYXBlcikge1xyXG4gICAgICByZXR1cm4gdGhpcy5jdXJyZW50R2xvYmFsV2FsbHBhcGVyO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAnJztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiuvue9ruWFqOWxgOiBiuWkqeWjgee6uFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXRHbG9iYWxXYWxscGFwZXIod2FsbHBhcGVyRGF0YTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDmm7TmlrDlvZPliY3lhajlsYDlo4HnurhcclxuICAgICAgdGhpcy5jdXJyZW50R2xvYmFsV2FsbHBhcGVyID0gd2FsbHBhcGVyRGF0YTtcclxuXHJcbiAgICAgIC8vIOS/neWtmOWIsOiuvue9rlxyXG4gICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMuc3RvcmFnZU1hbmFnZXIubG9hZFNldHRpbmdzKCk7XHJcbiAgICAgIHNldHRpbmdzLmdsb2JhbENoYXRXYWxscGFwZXIgPSB3YWxscGFwZXJEYXRhO1xyXG4gICAgICB0aGlzLnN0b3JhZ2VNYW5hZ2VyLnNhdmVTZXR0aW5ncyhzZXR0aW5ncyk7XHJcblxyXG4gICAgICAvLyDlupTnlKjlo4HnurhcclxuICAgICAgdGhpcy5hcHBseUN1cnJlbnRXYWxscGFwZXIoKTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKCdbQ2hhdFdhbGxwYXBlck1hbmFnZXJdIOWFqOWxgOiBiuWkqeWjgee6uOiuvue9ruaIkOWKnycpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW0NoYXRXYWxscGFwZXJNYW5hZ2VyXSDorr7nva7lhajlsYDogYrlpKnlo4HnurjlpLHotKU6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiuvue9ruWNleeLrOiBiuWkqeWjgee6uFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXRJbmRpdmlkdWFsV2FsbHBhcGVyKGNoYXRJZDogc3RyaW5nLCB3YWxscGFwZXJEYXRhOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOabtOaWsOWNleeLrOWjgee6uOaYoOWwhFxyXG4gICAgICB0aGlzLmluZGl2aWR1YWxXYWxscGFwZXJzW2NoYXRJZF0gPSB3YWxscGFwZXJEYXRhO1xyXG5cclxuICAgICAgLy8g5L+d5a2Y5Yiw6K6+572uXHJcbiAgICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5zdG9yYWdlTWFuYWdlci5sb2FkU2V0dGluZ3MoKTtcclxuICAgICAgc2V0dGluZ3MuaW5kaXZpZHVhbENoYXRXYWxscGFwZXJzID0geyAuLi50aGlzLmluZGl2aWR1YWxXYWxscGFwZXJzIH07XHJcbiAgICAgIHRoaXMuc3RvcmFnZU1hbmFnZXIuc2F2ZVNldHRpbmdzKHNldHRpbmdzKTtcclxuXHJcbiAgICAgIC8vIOWmguaenOaYr+W9k+WJjeiBiuWkqe+8jOeri+WNs+W6lOeUqOWjgee6uFxyXG4gICAgICBpZiAodGhpcy5jdXJyZW50Q2hhdElkID09PSBjaGF0SWQpIHtcclxuICAgICAgICB0aGlzLmFwcGx5Q3VycmVudFdhbGxwYXBlcigpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnW0NoYXRXYWxscGFwZXJNYW5hZ2VyXSDljZXni6zogYrlpKnlo4Hnurjorr7nva7miJDlip86JywgY2hhdElkKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tDaGF0V2FsbHBhcGVyTWFuYWdlcl0g6K6+572u5Y2V54us6IGK5aSp5aOB57q45aSx6LSlOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDnp7vpmaTljZXni6zogYrlpKnlo4HnurhcclxuICAgKi9cclxuICBwdWJsaWMgcmVtb3ZlSW5kaXZpZHVhbFdhbGxwYXBlcihjaGF0SWQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g5LuO5pig5bCE5Lit5Yig6ZmkXHJcbiAgICAgIGRlbGV0ZSB0aGlzLmluZGl2aWR1YWxXYWxscGFwZXJzW2NoYXRJZF07XHJcblxyXG4gICAgICAvLyDkv53lrZjliLDorr7nva5cclxuICAgICAgY29uc3Qgc2V0dGluZ3MgPSB0aGlzLnN0b3JhZ2VNYW5hZ2VyLmxvYWRTZXR0aW5ncygpO1xyXG4gICAgICBzZXR0aW5ncy5pbmRpdmlkdWFsQ2hhdFdhbGxwYXBlcnMgPSB7IC4uLnRoaXMuaW5kaXZpZHVhbFdhbGxwYXBlcnMgfTtcclxuICAgICAgdGhpcy5zdG9yYWdlTWFuYWdlci5zYXZlU2V0dGluZ3Moc2V0dGluZ3MpO1xyXG5cclxuICAgICAgLy8g5aaC5p6c5piv5b2T5YmN6IGK5aSp77yM6YeN5paw5bqU55So5aOB57q4XHJcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRDaGF0SWQgPT09IGNoYXRJZCkge1xyXG4gICAgICAgIHRoaXMuYXBwbHlDdXJyZW50V2FsbHBhcGVyKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKCdbQ2hhdFdhbGxwYXBlck1hbmFnZXJdIOWNleeLrOiBiuWkqeWjgee6uOW3suenu+mZpDonLCBjaGF0SWQpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW0NoYXRXYWxscGFwZXJNYW5hZ2VyXSDnp7vpmaTljZXni6zogYrlpKnlo4HnurjlpLHotKU6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOa4hemZpOWFqOWxgOiBiuWkqeWjgee6uFxyXG4gICAqL1xyXG4gIHB1YmxpYyBjbGVhckdsb2JhbFdhbGxwYXBlcigpOiB2b2lkIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOa4hemZpOWFqOWxgOWjgee6uFxyXG4gICAgICB0aGlzLmN1cnJlbnRHbG9iYWxXYWxscGFwZXIgPSAnJztcclxuXHJcbiAgICAgIC8vIOS/neWtmOWIsOiuvue9rlxyXG4gICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMuc3RvcmFnZU1hbmFnZXIubG9hZFNldHRpbmdzKCk7XHJcbiAgICAgIHNldHRpbmdzLmdsb2JhbENoYXRXYWxscGFwZXIgPSAnJztcclxuICAgICAgdGhpcy5zdG9yYWdlTWFuYWdlci5zYXZlU2V0dGluZ3Moc2V0dGluZ3MpO1xyXG5cclxuICAgICAgLy8g6YeN5paw5bqU55So5aOB57q4XHJcbiAgICAgIHRoaXMuYXBwbHlDdXJyZW50V2FsbHBhcGVyKCk7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnW0NoYXRXYWxscGFwZXJNYW5hZ2VyXSDlhajlsYDogYrlpKnlo4Hnurjlt7LmuIXpmaQnKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tDaGF0V2FsbHBhcGVyTWFuYWdlcl0g5riF6Zmk5YWo5bGA6IGK5aSp5aOB57q45aSx6LSlOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlhajlsYDmm7TmjaLmiYDmnInogYrlpKnmoYblo4HnurhcclxuICAgKiDlsIbmjIflrprlo4HnurjlupTnlKjliLDlhajlsYDorr7nva7vvIzlubbmuIXpmaTmiYDmnInljZXni6zorr7nva5cclxuICAgKi9cclxuICBwdWJsaWMgYXBwbHlXYWxscGFwZXJUb0FsbCh3YWxscGFwZXJEYXRhOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOiuvue9ruS4uuWFqOWxgOWjgee6uFxyXG4gICAgICB0aGlzLmN1cnJlbnRHbG9iYWxXYWxscGFwZXIgPSB3YWxscGFwZXJEYXRhO1xyXG5cclxuICAgICAgLy8g5riF6Zmk5omA5pyJ5Y2V54us5aOB57q46K6+572uXHJcbiAgICAgIHRoaXMuaW5kaXZpZHVhbFdhbGxwYXBlcnMgPSB7fTtcclxuXHJcbiAgICAgIC8vIOS/neWtmOWIsOiuvue9rlxyXG4gICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMuc3RvcmFnZU1hbmFnZXIubG9hZFNldHRpbmdzKCk7XHJcbiAgICAgIHNldHRpbmdzLmdsb2JhbENoYXRXYWxscGFwZXIgPSB3YWxscGFwZXJEYXRhO1xyXG4gICAgICBzZXR0aW5ncy5pbmRpdmlkdWFsQ2hhdFdhbGxwYXBlcnMgPSB7fTtcclxuICAgICAgdGhpcy5zdG9yYWdlTWFuYWdlci5zYXZlU2V0dGluZ3Moc2V0dGluZ3MpO1xyXG5cclxuICAgICAgLy8g5bqU55So5aOB57q4XHJcbiAgICAgIHRoaXMuYXBwbHlDdXJyZW50V2FsbHBhcGVyKCk7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnW0NoYXRXYWxscGFwZXJNYW5hZ2VyXSDlo4Hnurjlt7LlupTnlKjliLDmiYDmnInogYrlpKnmoYYnKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tDaGF0V2FsbHBhcGVyTWFuYWdlcl0g5YWo5bGA5pu05o2i5aOB57q45aSx6LSlOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5blvZPliY3lhajlsYDlo4HnurhcclxuICAgKi9cclxuICBwdWJsaWMgZ2V0Q3VycmVudEdsb2JhbFdhbGxwYXBlcigpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMuY3VycmVudEdsb2JhbFdhbGxwYXBlcjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluaMh+WumuiBiuWkqeeahOWjgee6uFxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRDaGF0V2FsbHBhcGVyKGNoYXRJZDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLmluZGl2aWR1YWxXYWxscGFwZXJzW2NoYXRJZF0gfHwgJyc7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bmiYDmnInljZXni6zlo4Hnurjorr7nva5cclxuICAgKi9cclxuICBwdWJsaWMgZ2V0QWxsSW5kaXZpZHVhbFdhbGxwYXBlcnMoKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XHJcbiAgICByZXR1cm4geyAuLi50aGlzLmluZGl2aWR1YWxXYWxscGFwZXJzIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmo4Dmn6XmmK/lkKbmnInlhajlsYDlo4HnurhcclxuICAgKi9cclxuICBwdWJsaWMgaGFzR2xvYmFsV2FsbHBhcGVyKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuICEhdGhpcy5jdXJyZW50R2xvYmFsV2FsbHBhcGVyO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5qOA5p+l5oyH5a6a6IGK5aSp5piv5ZCm5pyJ5Y2V54us5aOB57q4XHJcbiAgICovXHJcbiAgcHVibGljIGhhc0luZGl2aWR1YWxXYWxscGFwZXIoY2hhdElkOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIHJldHVybiAhIXRoaXMuaW5kaXZpZHVhbFdhbGxwYXBlcnNbY2hhdElkXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmihOWKoOi9veWjgee6uOWbvueJh1xyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmVsb2FkV2FsbHBhcGVyKHdhbGxwYXBlclVybDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuXHJcbiAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1tDaGF0V2FsbHBhcGVyTWFuYWdlcl0g5aOB57q46aKE5Yqg6L295oiQ5YqfJyk7XHJcbiAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgaW1nLm9uZXJyb3IgPSBlcnJvciA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignW0NoYXRXYWxscGFwZXJNYW5hZ2VyXSDlo4HnurjpooTliqDovb3lpLHotKU6JywgZXJyb3IpO1xyXG4gICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBpbWcuc3JjID0gd2FsbHBhcGVyVXJsO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlvLrliLbliLfmlrDlo4HnurhcclxuICAgKi9cclxuICBwdWJsaWMgZm9yY2VSZWZyZXNoKCk6IHZvaWQge1xyXG4gICAgY29uc29sZS5sb2coJ1tDaGF0V2FsbHBhcGVyTWFuYWdlcl0g5by65Yi25Yi35paw5aOB57q4Jyk7XHJcbiAgICB0aGlzLmxvYWRXYWxscGFwZXJGcm9tU2V0dGluZ3MoKTtcclxuICAgIHRoaXMuYXBwbHlDdXJyZW50V2FsbHBhcGVyKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlpITnkIbop5LoibLliIfmjaJcclxuICAgKi9cclxuICBwdWJsaWMgaGFuZGxlQ2hhcmFjdGVyQ2hhbmdlKCk6IHZvaWQge1xyXG4gICAgY29uc29sZS5sb2coJ1tDaGF0V2FsbHBhcGVyTWFuYWdlcl0g5aSE55CG6KeS6Imy5YiH5o2i77yM6YeN5paw5Yqg6L295aOB57q46K6+572uJyk7XHJcbiAgICB0aGlzLmZvcmNlUmVmcmVzaCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5riF6Zmk5b2T5YmN6KeS6Imy55qE5omA5pyJ5aOB57q457yT5a2YXHJcbiAgICovXHJcbiAgcHVibGljIGNsZWFyQWxsV2FsbHBhcGVyQ2FjaGUoKTogdm9pZCB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDmuIXpmaTmiYDmnInlo4Hnurjorr7nva5cclxuICAgICAgdGhpcy5jdXJyZW50R2xvYmFsV2FsbHBhcGVyID0gJyc7XHJcbiAgICAgIHRoaXMuaW5kaXZpZHVhbFdhbGxwYXBlcnMgPSB7fTtcclxuXHJcbiAgICAgIC8vIOS/neWtmOWIsOiuvue9rlxyXG4gICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMuc3RvcmFnZU1hbmFnZXIubG9hZFNldHRpbmdzKCk7XHJcbiAgICAgIHNldHRpbmdzLmdsb2JhbENoYXRXYWxscGFwZXIgPSAnJztcclxuICAgICAgc2V0dGluZ3MuaW5kaXZpZHVhbENoYXRXYWxscGFwZXJzID0ge307XHJcbiAgICAgIHRoaXMuc3RvcmFnZU1hbmFnZXIuc2F2ZVNldHRpbmdzKHNldHRpbmdzKTtcclxuXHJcbiAgICAgIC8vIOa4hemZpOeVjOmdouiDjOaZr1xyXG4gICAgICBjb25zdCBjaGF0SW50ZXJmYWNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXRJbnRlcmZhY2UnKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgY29uc3QgY2hhdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LWNvbnRhaW5lcicpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICBjb25zdCBjaGF0TWVzc2FnZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhdE1lc3NhZ2VzJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgIGNvbnN0IHRhcmdldEVsZW1lbnQgPSBjaGF0SW50ZXJmYWNlIHx8IGNoYXRDb250YWluZXIgfHwgY2hhdE1lc3NhZ2VzO1xyXG5cclxuICAgICAgaWYgKHRhcmdldEVsZW1lbnQpIHtcclxuICAgICAgICB0YXJnZXRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICcnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnW0NoYXRXYWxscGFwZXJNYW5hZ2VyXSDmiYDmnInlo4HnurjnvJPlrZjlt7LmuIXpmaQnKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tDaGF0V2FsbHBhcGVyTWFuYWdlcl0g5riF6Zmk5aOB57q457yT5a2Y5aSx6LSlOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDorr7nva7lvZPliY3ogYrlpKlJRFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXRDdXJyZW50Q2hhdElkKGNoYXRJZDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5jdXJyZW50Q2hhdElkICE9PSBjaGF0SWQpIHtcclxuICAgICAgdGhpcy5jdXJyZW50Q2hhdElkID0gY2hhdElkO1xyXG4gICAgICB0aGlzLmFwcGx5Q3VycmVudFdhbGxwYXBlcigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6ZSA5q+B5aOB57q4566h55CG5ZmoXHJcbiAgICovXHJcbiAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAvLyDnp7vpmaTkuovku7bnm5HlkKzlmahcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3NldHRpbmdzQ2hhbmdlJywgdGhpcy5oYW5kbGVTZXR0aW5nc0NoYW5nZS5iaW5kKHRoaXMpKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYXJhY3RlckNoYW5nZScsIHRoaXMuaGFuZGxlQ2hhcmFjdGVyQ2hhbmdlLmJpbmQodGhpcykpO1xyXG5cclxuICAgIC8vIOa4hemZpOeVjOmdouiDjOaZr1xyXG4gICAgY29uc3QgY2hhdEludGVyZmFjZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGF0SW50ZXJmYWNlJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICBjb25zdCBjaGF0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQtY29udGFpbmVyJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICBjb25zdCBjaGF0TWVzc2FnZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhdE1lc3NhZ2VzJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICBjb25zdCB0YXJnZXRFbGVtZW50ID0gY2hhdEludGVyZmFjZSB8fCBjaGF0Q29udGFpbmVyIHx8IGNoYXRNZXNzYWdlcztcclxuXHJcbiAgICBpZiAodGFyZ2V0RWxlbWVudCkge1xyXG4gICAgICB0YXJnZXRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKCdbQ2hhdFdhbGxwYXBlck1hbmFnZXJdIOiBiuWkqeWjgee6uOeuoeeQhuWZqOW3sumUgOavgScpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/chat/ChatWallpaperManager.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/chatList/chatList.scss": 
  /*!**********************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/chatList/chatList.scss ***!
  \**********************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY2hhdExpc3QvY2hhdExpc3Quc2NzcyIsIm1hcHBpbmdzIjoiO0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WkmuS6keeGii/lpIfku70v57uZcm92b+eahC9tb2R1bGVzL2NoYXRMaXN0L2NoYXRMaXN0LnNjc3M/Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpblxuZXhwb3J0IHt9OyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/chatList/chatList.scss\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/chatList/contactManager.ts": 
  /*!**************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/chatList/contactManager.ts ***!
  \**************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ContactManager: () => (/* binding */ ContactManager)\n/* harmony export */ });\n/* harmony import */ var _contactLorebook__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../contactLorebook */ \"./src/多云熊/备份/给rovo的/modules/contactLorebook/index.ts\");\n/* harmony import */ var _utils_characterStorage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/characterStorage */ \"./src/多云熊/备份/给rovo的/modules/utils/characterStorage.ts\");\n/**\n * 联系人管理器\n * 负责联系人数据的存储、管理和操作\n * 集成世界书联系人功能\n */\n\n\nclass ContactManager {\n    contacts = [];\n    groups = [];\n    STORAGE_KEY = 'contacts';\n    contactLorebookManager;\n    constructor() {\n        this.contactLorebookManager = new _contactLorebook__WEBPACK_IMPORTED_MODULE_0__.ContactLorebookManager();\n        this.initialize();\n        this.setupEventListeners();\n    }\n    /**\n     * 初始化联系人管理器\n     */\n    async initialize() {\n        try {\n            console.log('🚀 [ContactManager] 开始初始化联系人管理器...');\n            // 1. 初始化世界书管理器\n            await this.contactLorebookManager.initialize();\n            // 2. 加载本地联系人数据\n            this.loadContacts();\n            // 3. 合并世界书联系人\n            this.mergeLorebookContacts();\n            console.log(`✅ [ContactManager] 联系人管理器初始化完成，共 ${this.contacts.length} 个联系人`);\n        }\n        catch (error) {\n            console.error('❌ [ContactManager] 初始化失败:', error);\n            // 降级处理：只加载本地联系人\n            this.loadContacts();\n        }\n    }\n    /**\n     * 设置事件监听器\n     */\n    setupEventListeners() {\n        // 监听世界书头像缓存清除事件\n        document.addEventListener('worldbookAvatarCacheCleared', (e) => {\n            const event = e;\n            console.log('🔄 [ContactManager] 收到世界书头像缓存清除事件:', event.detail);\n            this.refreshWorldbookContactAvatars();\n        });\n    }\n    /**\n     * 刷新所有世界书联系人的头像\n     * 当清除世界书角色缓存后调用，更新内存中的头像数据\n     */\n    refreshWorldbookContactAvatars() {\n        console.log('🔄 [ContactManager] 开始刷新世界书联系人头像...');\n        let updatedCount = 0;\n        // 遍历所有联系人，更新带有\"世界书\"标签的联系人头像\n        this.contacts.forEach(contact => {\n            if (contact.tags && contact.tags.includes('世界书')) {\n                // 重新获取最新的头像（此时缓存已清除，会返回世界书默认头像）\n                const newAvatar = this.getContactAvatar(contact.name);\n                if (contact.avatar !== newAvatar) {\n                    console.log(`🔄 [ContactManager] 更新联系人头像: ${contact.name}`);\n                    console.log(`   旧头像: ${contact.avatar}`);\n                    console.log(`   新头像: ${newAvatar}`);\n                    contact.avatar = newAvatar;\n                    updatedCount++;\n                }\n            }\n        });\n        // 保存更新后的联系人数据\n        if (updatedCount > 0) {\n            this.saveContacts();\n            console.log(`✅ [ContactManager] 已更新 ${updatedCount} 个世界书联系人的头像`);\n            // 触发聊天列表刷新事件\n            const refreshEvent = new CustomEvent('chatListChanged', {\n                detail: {\n                    reason: 'worldbook_avatar_refresh',\n                    updatedCount,\n                    timestamp: Date.now(),\n                },\n            });\n            document.dispatchEvent(refreshEvent);\n            console.log('📢 [ContactManager] 已发送聊天列表刷新事件');\n        }\n        else {\n            console.log('ℹ️ [ContactManager] 没有需要更新的世界书联系人头像');\n        }\n    }\n    /**\n     * 从角色专用空间加载联系人数据\n     */\n    loadContacts() {\n        try {\n            const data = (0,_utils_characterStorage__WEBPACK_IMPORTED_MODULE_1__.getCharacterItem)(this.STORAGE_KEY, null);\n            if (data) {\n                this.contacts = data.contacts || [];\n                this.groups = data.groups || [];\n                console.log(`📋 从角色专用空间加载联系人: ${this.contacts.length} 个`);\n            }\n            else {\n                // 初始化默认联系人\n                this.initializeDefaultContacts();\n            }\n        }\n        catch (error) {\n            console.warn('加载联系人数据失败:', error);\n            this.initializeDefaultContacts();\n        }\n    }\n    /**\n     * 合并世界书联系人到本地列表\n     */\n    mergeLorebookContacts() {\n        try {\n            const lorebookContacts = this.contactLorebookManager.getContactData();\n            console.log(`🔄 [ContactManager] 开始合并 ${lorebookContacts.length} 个世界书联系人...`);\n            lorebookContacts.forEach(lorebookContact => {\n                // 如果本地不存在该联系人，则添加\n                const existingContact = this.contacts.find(c => c.name === lorebookContact.name);\n                if (!existingContact) {\n                    const newContact = this.addContact({\n                        name: lorebookContact.name,\n                        avatar: this.getContactAvatar(lorebookContact.name), // 使用优先级逻辑\n                        type: 'character',\n                        isOnline: false,\n                        tags: ['世界书'],\n                    });\n                    console.log(`➕ [ContactManager] 从世界书添加联系人: ${lorebookContact.name}`);\n                }\n                else {\n                    console.log(`⏭️ [ContactManager] 联系人已存在，跳过: ${lorebookContact.name}`);\n                }\n            });\n            console.log(`✅ [ContactManager] 世界书联系人合并完成`);\n        }\n        catch (error) {\n            console.error('❌ [ContactManager] 合并世界书联系人失败:', error);\n        }\n    }\n    /**\n     * 重新加载联系人数据（用于角色切换时）\n     */\n    async reloadContacts() {\n        console.log('🔄 [ContactManager] 角色切换，重新加载联系人数据...');\n        // 1. 重新加载世界书数据\n        await this.contactLorebookManager.reload();\n        // 2. 重新加载本地数据\n        this.loadContacts();\n        // 3. 重新合并世界书联系人\n        this.mergeLorebookContacts();\n    }\n    /**\n     * 获取联系人头像（集成世界书优先级）\n     * @param name 联系人姓名\n     * @returns 头像URL\n     */\n    getContactAvatar(name) {\n        return this.contactLorebookManager.getContactAvatar(name);\n    }\n    /**\n     * 清除世界书角色缓存\n     */\n    async clearLorebookCharacterCache() {\n        if (this.contactLorebookManager) {\n            return await this.contactLorebookManager.clearLorebookCharacterCache();\n        }\n        return { cleared: 0, total: 0 };\n    }\n    /**\n     * 获取世界书角色缓存统计信息\n     */\n    getLorebookCacheStats() {\n        if (this.contactLorebookManager) {\n            return this.contactLorebookManager.getLorebookCacheStats();\n        }\n        return { worldbookContacts: 0, cachedContacts: 0, cachedWorldbookContacts: 0 };\n    }\n    /**\n     * 保存联系人数据到角色专用空间\n     */\n    saveContacts() {\n        try {\n            const data = {\n                contacts: this.contacts,\n                groups: this.groups,\n                lastUpdated: Date.now(),\n            };\n            (0,_utils_characterStorage__WEBPACK_IMPORTED_MODULE_1__.setCharacterItem)(this.STORAGE_KEY, data);\n            console.log(`💾 联系人数据已保存到角色专用空间: ${this.contacts.length} 个`);\n        }\n        catch (error) {\n            console.error('保存联系人数据失败:', error);\n        }\n    }\n    /**\n     * 初始化默认联系人（现在为空）\n     */\n    initializeDefaultContacts() {\n        // 不再创建预置联系人，保持空列表\n        this.contacts = [];\n        this.groups = [];\n        this.saveContacts();\n    }\n    /**\n     * 获取所有联系人\n     */\n    getAllContacts() {\n        return [...this.contacts];\n    }\n    /**\n     * 根据ID获取联系人\n     */\n    getContactById(id) {\n        return this.contacts.find(contact => contact.id === id) || null;\n    }\n    /**\n     * 根据名称搜索联系人\n     */\n    searchContacts(query) {\n        const lowerQuery = query.toLowerCase();\n        return this.contacts.filter(contact => contact.name.toLowerCase().includes(lowerQuery) ||\n            (contact.tags && contact.tags.some(tag => tag.toLowerCase().includes(lowerQuery))));\n    }\n    /**\n     * 添加新联系人\n     */\n    addContact(contact) {\n        const newContact = {\n            ...contact,\n            id: this.generateContactId(),\n        };\n        this.contacts.push(newContact);\n        this.saveContacts();\n        return newContact;\n    }\n    /**\n     * 更新联系人信息（集成头像同步）\n     */\n    updateContact(id, updates) {\n        const contact = this.contacts.find(c => c.id === id);\n        if (!contact)\n            return false;\n        // 如果更新头像，保存到角色专用缓存并触发同步\n        if (updates.avatar) {\n            this.contactLorebookManager.setCharacterSpecificAvatar(contact.name, updates.avatar);\n        }\n        // 保持原有的更新逻辑\n        Object.assign(contact, updates);\n        this.saveContacts();\n        return true;\n    }\n    /**\n     * 删除联系人\n     */\n    deleteContact(id) {\n        const index = this.contacts.findIndex(contact => contact.id === id);\n        if (index === -1)\n            return false;\n        this.contacts.splice(index, 1);\n        this.saveContacts();\n        return true;\n    }\n    /**\n     * 获取所有群聊\n     */\n    getAllGroups() {\n        return [...this.groups];\n    }\n    /**\n     * 创建群聊\n     */\n    createGroup(name, memberIds, description) {\n        const newGroup = {\n            id: this.generateGroupId(),\n            name,\n            avatar: this.getDefaultGroupAvatar(),\n            members: memberIds,\n            createdAt: new Date().toISOString(),\n            description,\n        };\n        this.groups.push(newGroup);\n        this.saveContacts();\n        return newGroup;\n    }\n    /**\n     * 更新群聊信息\n     */\n    updateGroup(id, updates) {\n        const index = this.groups.findIndex(group => group.id === id);\n        if (index === -1)\n            return false;\n        this.groups[index] = { ...this.groups[index], ...updates };\n        this.saveContacts();\n        return true;\n    }\n    /**\n     * 删除群聊\n     */\n    deleteGroup(id) {\n        const index = this.groups.findIndex(group => group.id === id);\n        if (index === -1)\n            return false;\n        this.groups.splice(index, 1);\n        this.saveContacts();\n        return true;\n    }\n    /**\n     * 生成联系人ID\n     */\n    generateContactId() {\n        return 'contact_' + Date.now() + '_' + Math.random().toString(36).substring(2, 9);\n    }\n    /**\n     * 生成群聊ID\n     */\n    generateGroupId() {\n        return 'group_' + Date.now() + '_' + Math.random().toString(36).substring(2, 9);\n    }\n    /**\n     * 获取默认群聊头像\n     */\n    getDefaultGroupAvatar() {\n        const defaultGroupAvatars = [\n            'https://files.catbox.moe/group1.jpg',\n            'https://files.catbox.moe/group2.jpg',\n            'https://files.catbox.moe/group3.jpg',\n        ];\n        return defaultGroupAvatars[Math.floor(Math.random() * defaultGroupAvatars.length)];\n    }\n    /**\n     * 获取在线联系人\n     */\n    getOnlineContacts() {\n        return this.contacts.filter(contact => contact.isOnline);\n    }\n    /**\n     * 根据标签筛选联系人\n     */\n    getContactsByTag(tag) {\n        return this.contacts.filter(contact => contact.tags && contact.tags.includes(tag));\n    }\n    /**\n     * 获取所有标签\n     */\n    getAllTags() {\n        const tags = new Set();\n        this.contacts.forEach(contact => {\n            if (contact.tags) {\n                contact.tags.forEach(tag => tags.add(tag));\n            }\n        });\n        return Array.from(tags);\n    }\n    /**\n     * 验证头像URL是否有效\n     */\n    async validateAvatarUrl(url) {\n        try {\n            const response = await fetch(url, { method: 'HEAD' });\n            const contentType = response.headers.get('content-type');\n            return response.ok && (contentType ? contentType.startsWith('image/') : false);\n        }\n        catch {\n            return false;\n        }\n    }\n    /**\n     * 处理本地头像文件上传\n     */\n    async processAvatarFile(file) {\n        return new Promise((resolve, reject) => {\n            // 验证文件类型\n            if (!file.type.startsWith('image/')) {\n                reject(new Error('请选择图片文件'));\n                return;\n            }\n            // 验证文件大小（限制为2MB）\n            if (file.size > 2 * 1024 * 1024) {\n                reject(new Error('图片文件大小不能超过2MB'));\n                return;\n            }\n            const reader = new FileReader();\n            reader.onload = e => {\n                const result = e.target?.result;\n                resolve(result);\n            };\n            reader.onerror = () => {\n                reject(new Error('读取文件失败'));\n            };\n            reader.readAsDataURL(file);\n        });\n    }\n    /**\n     * 获取默认头像\n     */\n    getDefaultAvatar(name) {\n        // 统一使用默认头像\n        return 'https://files.catbox.moe/u8ccy5.jpg';\n    }\n    /**\n     * 从聊天数据中自动提取并添加联系人\n     * @param chatDataMap 聊天数据Map\n     */\n    extractContactsFromChatData(chatDataMap) {\n        const extractedContacts = new Set();\n        chatDataMap.forEach(chatData => {\n            // 从聊天数据中提取联系人\n            if (chatData.messages && Array.isArray(chatData.messages)) {\n                chatData.messages.forEach((message) => {\n                    // 跳过用户自己的消息\n                    if (message.sender && message.sender !== '{{user}}' && message.sender !== 'user') {\n                        extractedContacts.add(message.sender);\n                    }\n                });\n            }\n        });\n        // 为每个提取的联系人创建联系人记录（如果不存在）\n        extractedContacts.forEach(contactName => {\n            // 检查是否已存在该联系人\n            const existingContact = this.contacts.find(contact => contact.name === contactName);\n            if (!existingContact) {\n                // 从聊天数据中获取头像信息\n                const avatar = this.getAvatarFromChatData(contactName, chatDataMap);\n                // 添加新联系人\n                this.addContact({\n                    name: contactName,\n                    avatar: avatar || this.getDefaultAvatar(contactName),\n                    type: 'character',\n                    isOnline: true,\n                    tags: ['聊天记录'],\n                });\n            }\n        });\n    }\n    /**\n     * 从聊天数据中获取指定联系人的头像\n     * @param contactName 联系人名称\n     * @param chatDataMap 聊天数据Map\n     * @returns 头像URL或null\n     */\n    getAvatarFromChatData(contactName, chatDataMap) {\n        let foundAvatar = null;\n        chatDataMap.forEach(chatData => {\n            if (foundAvatar)\n                return; // 如果已经找到头像，跳过后续处理\n            if (chatData.messages && Array.isArray(chatData.messages)) {\n                const messageWithAvatar = chatData.messages.find((message) => message.sender === contactName && message.avatar);\n                if (messageWithAvatar && messageWithAvatar.avatar) {\n                    // 处理头像URL，确保是完整的URL\n                    foundAvatar = this.processAvatarUrl(messageWithAvatar.avatar);\n                }\n            }\n        });\n        return foundAvatar;\n    }\n    /**\n     * 处理头像URL，确保是完整的URL\n     * @param avatarUrl 原始头像URL\n     * @returns 处理后的头像URL\n     */\n    processAvatarUrl(avatarUrl) {\n        if (!avatarUrl) {\n            return '';\n        }\n        // 如果已经是完整URL，直接返回\n        if (avatarUrl.startsWith('http://') || avatarUrl.startsWith('https://')) {\n            return avatarUrl;\n        }\n        // 处理中文名称+文件名格式（如：\"我是败犬ei6coi.jpeg\"）\n        const fileNameMatch = avatarUrl.match(/([a-zA-Z0-9._-]+\\.[a-zA-Z0-9]+)$/);\n        if (fileNameMatch) {\n            const fileName = fileNameMatch[1];\n            return `https://files.catbox.moe/${fileName}`;\n        }\n        // 如果只是普通文件名，添加catbox前缀\n        return `https://files.catbox.moe/${avatarUrl}`;\n    }\n    /**\n     * 验证联系人名称\n     */\n    validateContactName(name) {\n        if (!name || name.trim().length === 0) {\n            return { valid: false, error: '请输入联系人名称' };\n        }\n        if (name.trim().length > 20) {\n            return { valid: false, error: '联系人名称不能超过20个字符' };\n        }\n        // 检查是否已存在同名联系人\n        if (this.contacts.some(contact => contact.name === name.trim())) {\n            return { valid: false, error: '该联系人名称已存在' };\n        }\n        return { valid: true };\n    }\n    /**\n     * 获取当前角色ID（内联方法）\n     */\n    getCurrentCharacterId() {\n        try {\n            // 使用 TavernHelper.getCharData() 获取角色数据\n            if (window.TavernHelper && window.TavernHelper.getCharData) {\n                const charData = window.TavernHelper.getCharData();\n                if (charData) {\n                    return charData.avatar || charData.name || 'default';\n                }\n            }\n            return 'default';\n        }\n        catch (error) {\n            console.error('[ContactManager] 获取角色ID失败:', error);\n            return 'default';\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY2hhdExpc3QvY29udGFjdE1hbmFnZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7Ozs7R0FJRztBQUV5RDtBQUNtQjtBQUd4RSxNQUFNLGNBQWM7SUFDakIsUUFBUSxHQUFjLEVBQUUsQ0FBQztJQUN6QixNQUFNLEdBQWdCLEVBQUUsQ0FBQztJQUNoQixXQUFXLEdBQUcsVUFBVSxDQUFDO0lBQ2xDLHNCQUFzQixDQUF5QjtJQUV2RDtRQUNFLElBQUksQ0FBQyxzQkFBc0IsR0FBRyxJQUFJLG9FQUFzQixFQUFFLENBQUM7UUFDM0QsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ2xCLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO0lBQzdCLENBQUM7SUFFRDs7T0FFRztJQUNLLEtBQUssQ0FBQyxVQUFVO1FBQ3RCLElBQUksQ0FBQztZQUNILE9BQU8sQ0FBQyxHQUFHLENBQUMsb0NBQW9DLENBQUMsQ0FBQztZQUVsRCxlQUFlO1lBQ2YsTUFBTSxJQUFJLENBQUMsc0JBQXNCLENBQUMsVUFBVSxFQUFFLENBQUM7WUFFL0MsZUFBZTtZQUNmLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztZQUVwQixjQUFjO1lBQ2QsSUFBSSxDQUFDLHFCQUFxQixFQUFFLENBQUM7WUFFN0IsT0FBTyxDQUFDLEdBQUcsQ0FBQyxvQ0FBb0MsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLE9BQU8sQ0FBQyxDQUFDO1FBQy9FLENBQUM7UUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1lBQ2YsT0FBTyxDQUFDLEtBQUssQ0FBQywyQkFBMkIsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUNsRCxnQkFBZ0I7WUFDaEIsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1FBQ3RCLENBQUM7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSyxtQkFBbUI7UUFDekIsZ0JBQWdCO1FBQ2hCLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyw2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TyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLFdBQVcsRUFBRSxDQUFDO1FBQzlDLENBQUM7UUFFRCxPQUFPLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDO0lBQ3pCLENBQUM7SUFFRDs7T0FFRztJQUNLLHFCQUFxQjtRQUMzQixJQUFJLENBQUM7WUFDSCx1Q0FBdUM7WUFDdkMsSUFBSyxNQUFjLENBQUMsWUFBWSxJQUFLLE1BQWMsQ0FBQyxZQUFZLENBQUMsV0FBVyxFQUFFLENBQUM7Z0JBQzdFLE1BQU0sUUFBUSxHQUFJLE1BQWMsQ0FBQyxZQUFZLENBQUMsV0FBVyxFQUFFLENBQUM7Z0JBQzVELElBQUksUUFBUSxFQUFFLENBQUM7b0JBQ2IsT0FBTyxRQUFRLENBQUMsTUFBTSxJQUFJLFFBQVEsQ0FBQyxJQUFJLElBQUksU0FBUyxDQUFDO2dCQUN2RCxDQUFDO1lBQ0gsQ0FBQztZQUVELE9BQU8sU0FBUyxDQUFDO1FBQ25CLENBQUM7UUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1lBQ2YsT0FBTyxDQUFDLEtBQUssQ0FBQyw0QkFBNEIsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUNuRCxPQUFPLFNBQVMsQ0FBQztRQUNuQixDQUFDO0lBQ0gsQ0FBQztDQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy9jaGF0TGlzdC9jb250YWN0TWFuYWdlci50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiDogZTns7vkurrnrqHnkIblmahcbiAqIOi0n+i0o+iBlOezu+S6uuaVsOaNrueahOWtmOWCqOOAgeeuoeeQhuWSjOaTjeS9nFxuICog6ZuG5oiQ5LiW55WM5Lmm6IGU57O75Lq65Yqf6IO9XG4gKi9cblxuaW1wb3J0IHsgQ29udGFjdExvcmVib29rTWFuYWdlciB9IGZyb20gJy4uL2NvbnRhY3RMb3JlYm9vayc7XG5pbXBvcnQgeyBnZXRDaGFyYWN0ZXJJdGVtLCBzZXRDaGFyYWN0ZXJJdGVtIH0gZnJvbSAnLi4vdXRpbHMvY2hhcmFjdGVyU3RvcmFnZSc7XG5pbXBvcnQgeyBDb250YWN0LCBDb250YWN0U3RvcmFnZSwgR3JvdXBDaGF0IH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBDb250YWN0TWFuYWdlciB7XG4gIHByaXZhdGUgY29udGFjdHM6IENvbnRhY3RbXSA9IFtdO1xuICBwcml2YXRlIGdyb3VwczogR3JvdXBDaGF0W10gPSBbXTtcbiAgcHJpdmF0ZSByZWFkb25seSBTVE9SQUdFX0tFWSA9ICdjb250YWN0cyc7XG4gIHByaXZhdGUgY29udGFjdExvcmVib29rTWFuYWdlcjogQ29udGFjdExvcmVib29rTWFuYWdlcjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNvbnRhY3RMb3JlYm9va01hbmFnZXIgPSBuZXcgQ29udGFjdExvcmVib29rTWFuYWdlcigpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgIHRoaXMuc2V0dXBFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIneWni+WMluiBlOezu+S6uueuoeeQhuWZqFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+agCBbQ29udGFjdE1hbmFnZXJdIOW8gOWni+WIneWni+WMluiBlOezu+S6uueuoeeQhuWZqC4uLicpO1xuXG4gICAgICAvLyAxLiDliJ3lp4vljJbkuJbnlYzkuabnrqHnkIblmahcbiAgICAgIGF3YWl0IHRoaXMuY29udGFjdExvcmVib29rTWFuYWdlci5pbml0aWFsaXplKCk7XG5cbiAgICAgIC8vIDIuIOWKoOi9veacrOWcsOiBlOezu+S6uuaVsOaNrlxuICAgICAgdGhpcy5sb2FkQ29udGFjdHMoKTtcblxuICAgICAgLy8gMy4g5ZCI5bm25LiW55WM5Lmm6IGU57O75Lq6XG4gICAgICB0aGlzLm1lcmdlTG9yZWJvb2tDb250YWN0cygpO1xuXG4gICAgICBjb25zb2xlLmxvZyhg4pyFIFtDb250YWN0TWFuYWdlcl0g6IGU57O75Lq6566h55CG5Zmo5Yid5aeL5YyW5a6M5oiQ77yM5YWxICR7dGhpcy5jb250YWN0cy5sZW5ndGh9IOS4quiBlOezu+S6umApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgW0NvbnRhY3RNYW5hZ2VyXSDliJ3lp4vljJblpLHotKU6JywgZXJyb3IpO1xuICAgICAgLy8g6ZmN57qn5aSE55CG77ya5Y+q5Yqg6L295pys5Zyw6IGU57O75Lq6XG4gICAgICB0aGlzLmxvYWRDb250YWN0cygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDorr7nva7kuovku7bnm5HlkKzlmahcbiAgICovXG4gIHByaXZhdGUgc2V0dXBFdmVudExpc3RlbmVycygpOiB2b2lkIHtcbiAgICAvLyDnm5HlkKzkuJbnlYzkuablpLTlg4/nvJPlrZjmuIXpmaTkuovku7ZcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd3b3JsZGJvb2tBdmF0YXJDYWNoZUNsZWFyZWQnLCAoZTogRXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IGV2ZW50ID0gZSBhcyBDdXN0b21FdmVudDtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SEIFtDb250YWN0TWFuYWdlcl0g5pS25Yiw5LiW55WM5Lmm5aS05YOP57yT5a2Y5riF6Zmk5LqL5Lu2OicsIGV2ZW50LmRldGFpbCk7XG4gICAgICB0aGlzLnJlZnJlc2hXb3JsZGJvb2tDb250YWN0QXZhdGFycygpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIt+aWsOaJgOacieS4lueVjOS5puiBlOezu+S6uueahOWktOWDj1xuICAgKiDlvZPmuIXpmaTkuJbnlYzkuabop5LoibLnvJPlrZjlkI7osIPnlKjvvIzmm7TmlrDlhoXlrZjkuK3nmoTlpLTlg4/mlbDmja5cbiAgICovXG4gIHByaXZhdGUgcmVmcmVzaFdvcmxkYm9va0NvbnRhY3RBdmF0YXJzKCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKCfwn5SEIFtDb250YWN0TWFuYWdlcl0g5byA5aeL5Yi35paw5LiW55WM5Lmm6IGU57O75Lq65aS05YOPLi4uJyk7XG4gICAgXG4gICAgbGV0IHVwZGF0ZWRDb3VudCA9IDA7XG4gICAgXG4gICAgLy8g6YGN5Y6G5omA5pyJ6IGU57O75Lq677yM5pu05paw5bim5pyJXCLkuJbnlYzkuaZcIuagh+etvueahOiBlOezu+S6uuWktOWDj1xuICAgIHRoaXMuY29udGFjdHMuZm9yRWFjaChjb250YWN0ID0+IHtcbiAgICAgIGlmIChjb250YWN0LnRhZ3MgJiYgY29udGFjdC50YWdzLmluY2x1ZGVzKCfkuJbnlYzkuaYnKSkge1xuICAgICAgICAvLyDph43mlrDojrflj5bmnIDmlrDnmoTlpLTlg4/vvIjmraTml7bnvJPlrZjlt7LmuIXpmaTvvIzkvJrov5Tlm57kuJbnlYzkuabpu5jorqTlpLTlg4/vvIlcbiAgICAgICAgY29uc3QgbmV3QXZhdGFyID0gdGhpcy5nZXRDb250YWN0QXZhdGFyKGNvbnRhY3QubmFtZSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoY29udGFjdC5hdmF0YXIgIT09IG5ld0F2YXRhcikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SEIFtDb250YWN0TWFuYWdlcl0g5pu05paw6IGU57O75Lq65aS05YOPOiAke2NvbnRhY3QubmFtZX1gKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgICAg5pen5aS05YOPOiAke2NvbnRhY3QuYXZhdGFyfWApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGAgICDmlrDlpLTlg486ICR7bmV3QXZhdGFyfWApO1xuICAgICAgICAgIGNvbnRhY3QuYXZhdGFyID0gbmV3QXZhdGFyO1xuICAgICAgICAgIHVwZGF0ZWRDb3VudCsrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8g5L+d5a2Y5pu05paw5ZCO55qE6IGU57O75Lq65pWw5o2uXG4gICAgaWYgKHVwZGF0ZWRDb3VudCA+IDApIHtcbiAgICAgIHRoaXMuc2F2ZUNvbnRhY3RzKCk7XG4gICAgICBjb25zb2xlLmxvZyhg4pyFIFtDb250YWN0TWFuYWdlcl0g5bey5pu05pawICR7dXBkYXRlZENvdW50fSDkuKrkuJbnlYzkuabogZTns7vkurrnmoTlpLTlg49gKTtcbiAgICAgIFxuICAgICAgLy8g6Kem5Y+R6IGK5aSp5YiX6KGo5Yi35paw5LqL5Lu2XG4gICAgICBjb25zdCByZWZyZXNoRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2NoYXRMaXN0Q2hhbmdlZCcsIHtcbiAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgcmVhc29uOiAnd29ybGRib29rX2F2YXRhcl9yZWZyZXNoJyxcbiAgICAgICAgICB1cGRhdGVkQ291bnQsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KHJlZnJlc2hFdmVudCk7XG4gICAgICBjb25zb2xlLmxvZygn8J+ToiBbQ29udGFjdE1hbmFnZXJdIOW3suWPkemAgeiBiuWkqeWIl+ihqOWIt+aWsOS6i+S7ticpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZygn4oS577iPIFtDb250YWN0TWFuYWdlcl0g5rKh5pyJ6ZyA6KaB5pu05paw55qE5LiW55WM5Lmm6IGU57O75Lq65aS05YOPJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOS7juinkuiJsuS4k+eUqOepuumXtOWKoOi9veiBlOezu+S6uuaVsOaNrlxuICAgKi9cbiAgcHJpdmF0ZSBsb2FkQ29udGFjdHMoKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBnZXRDaGFyYWN0ZXJJdGVtPENvbnRhY3RTdG9yYWdlPih0aGlzLlNUT1JBR0VfS0VZLCBudWxsKTtcbiAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgIHRoaXMuY29udGFjdHMgPSBkYXRhLmNvbnRhY3RzIHx8IFtdO1xuICAgICAgICB0aGlzLmdyb3VwcyA9IGRhdGEuZ3JvdXBzIHx8IFtdO1xuICAgICAgICBjb25zb2xlLmxvZyhg8J+TiyDku47op5LoibLkuJPnlKjnqbrpl7TliqDovb3ogZTns7vkuro6ICR7dGhpcy5jb250YWN0cy5sZW5ndGh9IOS4qmApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8g5Yid5aeL5YyW6buY6K6k6IGU57O75Lq6XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZURlZmF1bHRDb250YWN0cygpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ+WKoOi9veiBlOezu+S6uuaVsOaNruWksei0pTonLCBlcnJvcik7XG4gICAgICB0aGlzLmluaXRpYWxpemVEZWZhdWx0Q29udGFjdHMoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5ZCI5bm25LiW55WM5Lmm6IGU57O75Lq65Yiw5pys5Zyw5YiX6KGoXG4gICAqL1xuICBwcml2YXRlIG1lcmdlTG9yZWJvb2tDb250YWN0cygpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgbG9yZWJvb2tDb250YWN0cyA9IHRoaXMuY29udGFjdExvcmVib29rTWFuYWdlci5nZXRDb250YWN0RGF0YSgpO1xuXG4gICAgICBjb25zb2xlLmxvZyhg8J+UhCBbQ29udGFjdE1hbmFnZXJdIOW8gOWni+WQiOW5tiAke2xvcmVib29rQ29udGFjdHMubGVuZ3RofSDkuKrkuJbnlYzkuabogZTns7vkurouLi5gKTtcblxuICAgICAgbG9yZWJvb2tDb250YWN0cy5mb3JFYWNoKGxvcmVib29rQ29udGFjdCA9PiB7XG4gICAgICAgIC8vIOWmguaenOacrOWcsOS4jeWtmOWcqOivpeiBlOezu+S6uu+8jOWImea3u+WKoFxuICAgICAgICBjb25zdCBleGlzdGluZ0NvbnRhY3QgPSB0aGlzLmNvbnRhY3RzLmZpbmQoYyA9PiBjLm5hbWUgPT09IGxvcmVib29rQ29udGFjdC5uYW1lKTtcbiAgICAgICAgaWYgKCFleGlzdGluZ0NvbnRhY3QpIHtcbiAgICAgICAgICBjb25zdCBuZXdDb250YWN0ID0gdGhpcy5hZGRDb250YWN0KHtcbiAgICAgICAgICAgIG5hbWU6IGxvcmVib29rQ29udGFjdC5uYW1lLFxuICAgICAgICAgICAgYXZhdGFyOiB0aGlzLmdldENvbnRhY3RBdmF0YXIobG9yZWJvb2tDb250YWN0Lm5hbWUpLCAvLyDkvb/nlKjkvJjlhYjnuqfpgLvovpFcbiAgICAgICAgICAgIHR5cGU6ICdjaGFyYWN0ZXInLFxuICAgICAgICAgICAgaXNPbmxpbmU6IGZhbHNlLFxuICAgICAgICAgICAgdGFnczogWyfkuJbnlYzkuaYnXSxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNvbnNvbGUubG9nKGDinpUgW0NvbnRhY3RNYW5hZ2VyXSDku47kuJbnlYzkuabmt7vliqDogZTns7vkuro6ICR7bG9yZWJvb2tDb250YWN0Lm5hbWV9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYOKPre+4jyBbQ29udGFjdE1hbmFnZXJdIOiBlOezu+S6uuW3suWtmOWcqO+8jOi3s+i/hzogJHtsb3JlYm9va0NvbnRhY3QubmFtZX1gKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnNvbGUubG9nKGDinIUgW0NvbnRhY3RNYW5hZ2VyXSDkuJbnlYzkuabogZTns7vkurrlkIjlubblrozmiJBgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIFtDb250YWN0TWFuYWdlcl0g5ZCI5bm25LiW55WM5Lmm6IGU57O75Lq65aSx6LSlOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog6YeN5paw5Yqg6L296IGU57O75Lq65pWw5o2u77yI55So5LqO6KeS6Imy5YiH5o2i5pe277yJXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgcmVsb2FkQ29udGFjdHMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc29sZS5sb2coJ/CflIQgW0NvbnRhY3RNYW5hZ2VyXSDop5LoibLliIfmjaLvvIzph43mlrDliqDovb3ogZTns7vkurrmlbDmja4uLi4nKTtcblxuICAgIC8vIDEuIOmHjeaWsOWKoOi9veS4lueVjOS5puaVsOaNrlxuICAgIGF3YWl0IHRoaXMuY29udGFjdExvcmVib29rTWFuYWdlci5yZWxvYWQoKTtcblxuICAgIC8vIDIuIOmHjeaWsOWKoOi9veacrOWcsOaVsOaNrlxuICAgIHRoaXMubG9hZENvbnRhY3RzKCk7XG5cbiAgICAvLyAzLiDph43mlrDlkIjlubbkuJbnlYzkuabogZTns7vkurpcbiAgICB0aGlzLm1lcmdlTG9yZWJvb2tDb250YWN0cygpO1xuICB9XG5cbiAgLyoqXG4gICAqIOiOt+WPluiBlOezu+S6uuWktOWDj++8iOmbhuaIkOS4lueVjOS5puS8mOWFiOe6p++8iVxuICAgKiBAcGFyYW0gbmFtZSDogZTns7vkurrlp5PlkI1cbiAgICogQHJldHVybnMg5aS05YOPVVJMXG4gICAqL1xuICBnZXRDb250YWN0QXZhdGFyKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY29udGFjdExvcmVib29rTWFuYWdlci5nZXRDb250YWN0QXZhdGFyKG5hbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIOa4hemZpOS4lueVjOS5puinkuiJsue8k+WtmFxuICAgKi9cbiAgYXN5bmMgY2xlYXJMb3JlYm9va0NoYXJhY3RlckNhY2hlKCk6IFByb21pc2U8eyBjbGVhcmVkOiBudW1iZXI7IHRvdGFsOiBudW1iZXIgfT4ge1xuICAgIGlmICh0aGlzLmNvbnRhY3RMb3JlYm9va01hbmFnZXIpIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbnRhY3RMb3JlYm9va01hbmFnZXIuY2xlYXJMb3JlYm9va0NoYXJhY3RlckNhY2hlKCk7XG4gICAgfVxuICAgIHJldHVybiB7IGNsZWFyZWQ6IDAsIHRvdGFsOiAwIH07XG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5LiW55WM5Lmm6KeS6Imy57yT5a2Y57uf6K6h5L+h5oGvXG4gICAqL1xuICBnZXRMb3JlYm9va0NhY2hlU3RhdHMoKTogeyB3b3JsZGJvb2tDb250YWN0czogbnVtYmVyOyBjYWNoZWRDb250YWN0czogbnVtYmVyOyBjYWNoZWRXb3JsZGJvb2tDb250YWN0czogbnVtYmVyIH0ge1xuICAgIGlmICh0aGlzLmNvbnRhY3RMb3JlYm9va01hbmFnZXIpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbnRhY3RMb3JlYm9va01hbmFnZXIuZ2V0TG9yZWJvb2tDYWNoZVN0YXRzKCk7XG4gICAgfVxuICAgIHJldHVybiB7IHdvcmxkYm9va0NvbnRhY3RzOiAwLCBjYWNoZWRDb250YWN0czogMCwgY2FjaGVkV29ybGRib29rQ29udGFjdHM6IDAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiDkv53lrZjogZTns7vkurrmlbDmja7liLDop5LoibLkuJPnlKjnqbrpl7RcbiAgICovXG4gIHByaXZhdGUgc2F2ZUNvbnRhY3RzKCk6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRhOiBDb250YWN0U3RvcmFnZSA9IHtcbiAgICAgICAgY29udGFjdHM6IHRoaXMuY29udGFjdHMsXG4gICAgICAgIGdyb3VwczogdGhpcy5ncm91cHMsXG4gICAgICAgIGxhc3RVcGRhdGVkOiBEYXRlLm5vdygpLFxuICAgICAgfTtcbiAgICAgIHNldENoYXJhY3Rlckl0ZW0odGhpcy5TVE9SQUdFX0tFWSwgZGF0YSk7XG4gICAgICBjb25zb2xlLmxvZyhg8J+SviDogZTns7vkurrmlbDmja7lt7Lkv53lrZjliLDop5LoibLkuJPnlKjnqbrpl7Q6ICR7dGhpcy5jb250YWN0cy5sZW5ndGh9IOS4qmApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfkv53lrZjogZTns7vkurrmlbDmja7lpLHotKU6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDliJ3lp4vljJbpu5jorqTogZTns7vkurrvvIjnjrDlnKjkuLrnqbrvvIlcbiAgICovXG4gIHByaXZhdGUgaW5pdGlhbGl6ZURlZmF1bHRDb250YWN0cygpOiB2b2lkIHtcbiAgICAvLyDkuI3lho3liJvlu7rpooTnva7ogZTns7vkurrvvIzkv53mjIHnqbrliJfooahcbiAgICB0aGlzLmNvbnRhY3RzID0gW107XG4gICAgdGhpcy5ncm91cHMgPSBbXTtcbiAgICB0aGlzLnNhdmVDb250YWN0cygpO1xuICB9XG5cbiAgLyoqXG4gICAqIOiOt+WPluaJgOacieiBlOezu+S6ulxuICAgKi9cbiAgcHVibGljIGdldEFsbENvbnRhY3RzKCk6IENvbnRhY3RbXSB7XG4gICAgcmV0dXJuIFsuLi50aGlzLmNvbnRhY3RzXTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmoLnmja5JROiOt+WPluiBlOezu+S6ulxuICAgKi9cbiAgcHVibGljIGdldENvbnRhY3RCeUlkKGlkOiBzdHJpbmcpOiBDb250YWN0IHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuY29udGFjdHMuZmluZChjb250YWN0ID0+IGNvbnRhY3QuaWQgPT09IGlkKSB8fCBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIOagueaNruWQjeensOaQnOe0ouiBlOezu+S6ulxuICAgKi9cbiAgcHVibGljIHNlYXJjaENvbnRhY3RzKHF1ZXJ5OiBzdHJpbmcpOiBDb250YWN0W10ge1xuICAgIGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuICAgIHJldHVybiB0aGlzLmNvbnRhY3RzLmZpbHRlcihcbiAgICAgIGNvbnRhY3QgPT5cbiAgICAgICAgY29udGFjdC5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJRdWVyeSkgfHxcbiAgICAgICAgKGNvbnRhY3QudGFncyAmJiBjb250YWN0LnRhZ3Muc29tZSh0YWcgPT4gdGFnLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJRdWVyeSkpKSxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIOa3u+WKoOaWsOiBlOezu+S6ulxuICAgKi9cbiAgcHVibGljIGFkZENvbnRhY3QoY29udGFjdDogT21pdDxDb250YWN0LCAnaWQnPik6IENvbnRhY3Qge1xuICAgIGNvbnN0IG5ld0NvbnRhY3Q6IENvbnRhY3QgPSB7XG4gICAgICAuLi5jb250YWN0LFxuICAgICAgaWQ6IHRoaXMuZ2VuZXJhdGVDb250YWN0SWQoKSxcbiAgICB9O1xuICAgIHRoaXMuY29udGFjdHMucHVzaChuZXdDb250YWN0KTtcbiAgICB0aGlzLnNhdmVDb250YWN0cygpO1xuICAgIHJldHVybiBuZXdDb250YWN0O1xuICB9XG5cbiAgLyoqXG4gICAqIOabtOaWsOiBlOezu+S6uuS/oeaBr++8iOmbhuaIkOWktOWDj+WQjOatpe+8iVxuICAgKi9cbiAgcHVibGljIHVwZGF0ZUNvbnRhY3QoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxDb250YWN0Pik6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGNvbnRhY3QgPSB0aGlzLmNvbnRhY3RzLmZpbmQoYyA9PiBjLmlkID09PSBpZCk7XG4gICAgaWYgKCFjb250YWN0KSByZXR1cm4gZmFsc2U7XG5cbiAgICAvLyDlpoLmnpzmm7TmlrDlpLTlg4/vvIzkv53lrZjliLDop5LoibLkuJPnlKjnvJPlrZjlubbop6blj5HlkIzmraVcbiAgICBpZiAodXBkYXRlcy5hdmF0YXIpIHtcbiAgICAgIHRoaXMuY29udGFjdExvcmVib29rTWFuYWdlci5zZXRDaGFyYWN0ZXJTcGVjaWZpY0F2YXRhcihjb250YWN0Lm5hbWUsIHVwZGF0ZXMuYXZhdGFyKTtcbiAgICB9XG5cbiAgICAvLyDkv53mjIHljp/mnInnmoTmm7TmlrDpgLvovpFcbiAgICBPYmplY3QuYXNzaWduKGNvbnRhY3QsIHVwZGF0ZXMpO1xuICAgIHRoaXMuc2F2ZUNvbnRhY3RzKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICog5Yig6Zmk6IGU57O75Lq6XG4gICAqL1xuICBwdWJsaWMgZGVsZXRlQ29udGFjdChpZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmNvbnRhY3RzLmZpbmRJbmRleChjb250YWN0ID0+IGNvbnRhY3QuaWQgPT09IGlkKTtcbiAgICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm4gZmFsc2U7XG5cbiAgICB0aGlzLmNvbnRhY3RzLnNwbGljZShpbmRleCwgMSk7XG4gICAgdGhpcy5zYXZlQ29udGFjdHMoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bmiYDmnInnvqTogYpcbiAgICovXG4gIHB1YmxpYyBnZXRBbGxHcm91cHMoKTogR3JvdXBDaGF0W10ge1xuICAgIHJldHVybiBbLi4udGhpcy5ncm91cHNdO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIm+W7uue+pOiBilxuICAgKi9cbiAgcHVibGljIGNyZWF0ZUdyb3VwKG5hbWU6IHN0cmluZywgbWVtYmVySWRzOiBzdHJpbmdbXSwgZGVzY3JpcHRpb24/OiBzdHJpbmcpOiBHcm91cENoYXQge1xuICAgIGNvbnN0IG5ld0dyb3VwOiBHcm91cENoYXQgPSB7XG4gICAgICBpZDogdGhpcy5nZW5lcmF0ZUdyb3VwSWQoKSxcbiAgICAgIG5hbWUsXG4gICAgICBhdmF0YXI6IHRoaXMuZ2V0RGVmYXVsdEdyb3VwQXZhdGFyKCksXG4gICAgICBtZW1iZXJzOiBtZW1iZXJJZHMsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIGRlc2NyaXB0aW9uLFxuICAgIH07XG4gICAgdGhpcy5ncm91cHMucHVzaChuZXdHcm91cCk7XG4gICAgdGhpcy5zYXZlQ29udGFjdHMoKTtcbiAgICByZXR1cm4gbmV3R3JvdXA7XG4gIH1cblxuICAvKipcbiAgICog5pu05paw576k6IGK5L+h5oGvXG4gICAqL1xuICBwdWJsaWMgdXBkYXRlR3JvdXAoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxHcm91cENoYXQ+KTogYm9vbGVhbiB7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmdyb3Vwcy5maW5kSW5kZXgoZ3JvdXAgPT4gZ3JvdXAuaWQgPT09IGlkKTtcbiAgICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm4gZmFsc2U7XG5cbiAgICB0aGlzLmdyb3Vwc1tpbmRleF0gPSB7IC4uLnRoaXMuZ3JvdXBzW2luZGV4XSwgLi4udXBkYXRlcyB9O1xuICAgIHRoaXMuc2F2ZUNvbnRhY3RzKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICog5Yig6Zmk576k6IGKXG4gICAqL1xuICBwdWJsaWMgZGVsZXRlR3JvdXAoaWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5ncm91cHMuZmluZEluZGV4KGdyb3VwID0+IGdyb3VwLmlkID09PSBpZCk7XG4gICAgaWYgKGluZGV4ID09PSAtMSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgdGhpcy5ncm91cHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB0aGlzLnNhdmVDb250YWN0cygpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIOeUn+aIkOiBlOezu+S6uklEXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlQ29udGFjdElkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdjb250YWN0XycgKyBEYXRlLm5vdygpICsgJ18nICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDkpO1xuICB9XG5cbiAgLyoqXG4gICAqIOeUn+aIkOe+pOiBiklEXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlR3JvdXBJZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnZ3JvdXBfJyArIERhdGUubm93KCkgKyAnXycgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgOSk7XG4gIH1cblxuICAvKipcbiAgICog6I635Y+W6buY6K6k576k6IGK5aS05YOPXG4gICAqL1xuICBwcml2YXRlIGdldERlZmF1bHRHcm91cEF2YXRhcigpOiBzdHJpbmcge1xuICAgIGNvbnN0IGRlZmF1bHRHcm91cEF2YXRhcnMgPSBbXG4gICAgICAnaHR0cHM6Ly9maWxlcy5jYXRib3gubW9lL2dyb3VwMS5qcGcnLFxuICAgICAgJ2h0dHBzOi8vZmlsZXMuY2F0Ym94Lm1vZS9ncm91cDIuanBnJyxcbiAgICAgICdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvZ3JvdXAzLmpwZycsXG4gICAgXTtcbiAgICByZXR1cm4gZGVmYXVsdEdyb3VwQXZhdGFyc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBkZWZhdWx0R3JvdXBBdmF0YXJzLmxlbmd0aCldO1xuICB9XG5cbiAgLyoqXG4gICAqIOiOt+WPluWcqOe6v+iBlOezu+S6ulxuICAgKi9cbiAgcHVibGljIGdldE9ubGluZUNvbnRhY3RzKCk6IENvbnRhY3RbXSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGFjdHMuZmlsdGVyKGNvbnRhY3QgPT4gY29udGFjdC5pc09ubGluZSk7XG4gIH1cblxuICAvKipcbiAgICog5qC55o2u5qCH562+562b6YCJ6IGU57O75Lq6XG4gICAqL1xuICBwdWJsaWMgZ2V0Q29udGFjdHNCeVRhZyh0YWc6IHN0cmluZyk6IENvbnRhY3RbXSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGFjdHMuZmlsdGVyKGNvbnRhY3QgPT4gY29udGFjdC50YWdzICYmIGNvbnRhY3QudGFncy5pbmNsdWRlcyh0YWcpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bmiYDmnInmoIfnrb5cbiAgICovXG4gIHB1YmxpYyBnZXRBbGxUYWdzKCk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCB0YWdzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgdGhpcy5jb250YWN0cy5mb3JFYWNoKGNvbnRhY3QgPT4ge1xuICAgICAgaWYgKGNvbnRhY3QudGFncykge1xuICAgICAgICBjb250YWN0LnRhZ3MuZm9yRWFjaCh0YWcgPT4gdGFncy5hZGQodGFnKSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGFncyk7XG4gIH1cblxuICAvKipcbiAgICog6aqM6K+B5aS05YOPVVJM5piv5ZCm5pyJ5pWIXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgdmFsaWRhdGVBdmF0YXJVcmwodXJsOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHsgbWV0aG9kOiAnSEVBRCcgfSk7XG4gICAgICBjb25zdCBjb250ZW50VHlwZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKTtcbiAgICAgIHJldHVybiByZXNwb25zZS5vayAmJiAoY29udGVudFR5cGUgPyBjb250ZW50VHlwZS5zdGFydHNXaXRoKCdpbWFnZS8nKSA6IGZhbHNlKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5aSE55CG5pys5Zyw5aS05YOP5paH5Lu25LiK5LygXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgcHJvY2Vzc0F2YXRhckZpbGUoZmlsZTogRmlsZSk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIC8vIOmqjOivgeaWh+S7tuexu+Wei1xuICAgICAgaWYgKCFmaWxlLnR5cGUuc3RhcnRzV2l0aCgnaW1hZ2UvJykpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcign6K+36YCJ5oup5Zu+54mH5paH5Lu2JykpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIOmqjOivgeaWh+S7tuWkp+Wwj++8iOmZkOWItuS4ujJNQu+8iVxuICAgICAgaWYgKGZpbGUuc2l6ZSA+IDIgKiAxMDI0ICogMTAyNCkge1xuICAgICAgICByZWplY3QobmV3IEVycm9yKCflm77niYfmlofku7blpKflsI/kuI3og73otoXov4cyTUInKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgIHJlYWRlci5vbmxvYWQgPSBlID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gZS50YXJnZXQ/LnJlc3VsdCBhcyBzdHJpbmc7XG4gICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgIH07XG4gICAgICByZWFkZXIub25lcnJvciA9ICgpID0+IHtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcign6K+75Y+W5paH5Lu25aSx6LSlJykpO1xuICAgICAgfTtcbiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOiOt+WPlum7mOiupOWktOWDj1xuICAgKi9cbiAgcHVibGljIGdldERlZmF1bHRBdmF0YXIobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyDnu5/kuIDkvb/nlKjpu5jorqTlpLTlg49cbiAgICByZXR1cm4gJ2h0dHBzOi8vZmlsZXMuY2F0Ym94Lm1vZS91OGNjeTUuanBnJztcbiAgfVxuXG4gIC8qKlxuICAgKiDku47ogYrlpKnmlbDmja7kuK3oh6rliqjmj5Dlj5blubbmt7vliqDogZTns7vkurpcbiAgICogQHBhcmFtIGNoYXREYXRhTWFwIOiBiuWkqeaVsOaNrk1hcFxuICAgKi9cbiAgcHVibGljIGV4dHJhY3RDb250YWN0c0Zyb21DaGF0RGF0YShjaGF0RGF0YU1hcDogTWFwPHN0cmluZywgYW55Pik6IHZvaWQge1xuICAgIGNvbnN0IGV4dHJhY3RlZENvbnRhY3RzID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cbiAgICBjaGF0RGF0YU1hcC5mb3JFYWNoKGNoYXREYXRhID0+IHtcbiAgICAgIC8vIOS7juiBiuWkqeaVsOaNruS4reaPkOWPluiBlOezu+S6ulxuICAgICAgaWYgKGNoYXREYXRhLm1lc3NhZ2VzICYmIEFycmF5LmlzQXJyYXkoY2hhdERhdGEubWVzc2FnZXMpKSB7XG4gICAgICAgIGNoYXREYXRhLm1lc3NhZ2VzLmZvckVhY2goKG1lc3NhZ2U6IGFueSkgPT4ge1xuICAgICAgICAgIC8vIOi3s+i/h+eUqOaIt+iHquW3seeahOa2iOaBr1xuICAgICAgICAgIGlmIChtZXNzYWdlLnNlbmRlciAmJiBtZXNzYWdlLnNlbmRlciAhPT0gJ3t7dXNlcn19JyAmJiBtZXNzYWdlLnNlbmRlciAhPT0gJ3VzZXInKSB7XG4gICAgICAgICAgICBleHRyYWN0ZWRDb250YWN0cy5hZGQobWVzc2FnZS5zZW5kZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyDkuLrmr4/kuKrmj5Dlj5bnmoTogZTns7vkurrliJvlu7rogZTns7vkurrorrDlvZXvvIjlpoLmnpzkuI3lrZjlnKjvvIlcbiAgICBleHRyYWN0ZWRDb250YWN0cy5mb3JFYWNoKGNvbnRhY3ROYW1lID0+IHtcbiAgICAgIC8vIOajgOafpeaYr+WQpuW3suWtmOWcqOivpeiBlOezu+S6ulxuICAgICAgY29uc3QgZXhpc3RpbmdDb250YWN0ID0gdGhpcy5jb250YWN0cy5maW5kKGNvbnRhY3QgPT4gY29udGFjdC5uYW1lID09PSBjb250YWN0TmFtZSk7XG5cbiAgICAgIGlmICghZXhpc3RpbmdDb250YWN0KSB7XG4gICAgICAgIC8vIOS7juiBiuWkqeaVsOaNruS4reiOt+WPluWktOWDj+S/oeaBr1xuICAgICAgICBjb25zdCBhdmF0YXIgPSB0aGlzLmdldEF2YXRhckZyb21DaGF0RGF0YShjb250YWN0TmFtZSwgY2hhdERhdGFNYXApO1xuXG4gICAgICAgIC8vIOa3u+WKoOaWsOiBlOezu+S6ulxuICAgICAgICB0aGlzLmFkZENvbnRhY3Qoe1xuICAgICAgICAgIG5hbWU6IGNvbnRhY3ROYW1lLFxuICAgICAgICAgIGF2YXRhcjogYXZhdGFyIHx8IHRoaXMuZ2V0RGVmYXVsdEF2YXRhcihjb250YWN0TmFtZSksXG4gICAgICAgICAgdHlwZTogJ2NoYXJhY3RlcicsXG4gICAgICAgICAgaXNPbmxpbmU6IHRydWUsXG4gICAgICAgICAgdGFnczogWyfogYrlpKnorrDlvZUnXSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog5LuO6IGK5aSp5pWw5o2u5Lit6I635Y+W5oyH5a6a6IGU57O75Lq655qE5aS05YOPXG4gICAqIEBwYXJhbSBjb250YWN0TmFtZSDogZTns7vkurrlkI3np7BcbiAgICogQHBhcmFtIGNoYXREYXRhTWFwIOiBiuWkqeaVsOaNrk1hcFxuICAgKiBAcmV0dXJucyDlpLTlg49VUkzmiJZudWxsXG4gICAqL1xuICBwcml2YXRlIGdldEF2YXRhckZyb21DaGF0RGF0YShjb250YWN0TmFtZTogc3RyaW5nLCBjaGF0RGF0YU1hcDogTWFwPHN0cmluZywgYW55Pik6IHN0cmluZyB8IG51bGwge1xuICAgIGxldCBmb3VuZEF2YXRhcjogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgICBjaGF0RGF0YU1hcC5mb3JFYWNoKGNoYXREYXRhID0+IHtcbiAgICAgIGlmIChmb3VuZEF2YXRhcikgcmV0dXJuOyAvLyDlpoLmnpzlt7Lnu4/mib7liLDlpLTlg4/vvIzot7Pov4flkI7nu63lpITnkIZcblxuICAgICAgaWYgKGNoYXREYXRhLm1lc3NhZ2VzICYmIEFycmF5LmlzQXJyYXkoY2hhdERhdGEubWVzc2FnZXMpKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VXaXRoQXZhdGFyID0gY2hhdERhdGEubWVzc2FnZXMuZmluZChcbiAgICAgICAgICAobWVzc2FnZTogYW55KSA9PiBtZXNzYWdlLnNlbmRlciA9PT0gY29udGFjdE5hbWUgJiYgbWVzc2FnZS5hdmF0YXIsXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKG1lc3NhZ2VXaXRoQXZhdGFyICYmIG1lc3NhZ2VXaXRoQXZhdGFyLmF2YXRhcikge1xuICAgICAgICAgIC8vIOWkhOeQhuWktOWDj1VSTO+8jOehruS/neaYr+WujOaVtOeahFVSTFxuICAgICAgICAgIGZvdW5kQXZhdGFyID0gdGhpcy5wcm9jZXNzQXZhdGFyVXJsKG1lc3NhZ2VXaXRoQXZhdGFyLmF2YXRhcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBmb3VuZEF2YXRhcjtcbiAgfVxuXG4gIC8qKlxuICAgKiDlpITnkIblpLTlg49VUkzvvIznoa7kv53mmK/lrozmlbTnmoRVUkxcbiAgICogQHBhcmFtIGF2YXRhclVybCDljp/lp4vlpLTlg49VUkxcbiAgICogQHJldHVybnMg5aSE55CG5ZCO55qE5aS05YOPVVJMXG4gICAqL1xuICBwcml2YXRlIHByb2Nlc3NBdmF0YXJVcmwoYXZhdGFyVXJsOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICghYXZhdGFyVXJsKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgLy8g5aaC5p6c5bey57uP5piv5a6M5pW0VVJM77yM55u05o6l6L+U5ZueXG4gICAgaWYgKGF2YXRhclVybC5zdGFydHNXaXRoKCdodHRwOi8vJykgfHwgYXZhdGFyVXJsLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykpIHtcbiAgICAgIHJldHVybiBhdmF0YXJVcmw7XG4gICAgfVxuXG4gICAgLy8g5aSE55CG5Lit5paH5ZCN56ewK+aWh+S7tuWQjeagvOW8j++8iOWmgu+8mlwi5oiR5piv6LSl54qsZWk2Y29pLmpwZWdcIu+8iVxuICAgIGNvbnN0IGZpbGVOYW1lTWF0Y2ggPSBhdmF0YXJVcmwubWF0Y2goLyhbYS16QS1aMC05Ll8tXStcXC5bYS16QS1aMC05XSspJC8pO1xuICAgIGlmIChmaWxlTmFtZU1hdGNoKSB7XG4gICAgICBjb25zdCBmaWxlTmFtZSA9IGZpbGVOYW1lTWF0Y2hbMV07XG4gICAgICByZXR1cm4gYGh0dHBzOi8vZmlsZXMuY2F0Ym94Lm1vZS8ke2ZpbGVOYW1lfWA7XG4gICAgfVxuXG4gICAgLy8g5aaC5p6c5Y+q5piv5pmu6YCa5paH5Lu25ZCN77yM5re75YqgY2F0Ym945YmN57yAXG4gICAgcmV0dXJuIGBodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvJHthdmF0YXJVcmx9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiDpqozor4HogZTns7vkurrlkI3np7BcbiAgICovXG4gIHB1YmxpYyB2YWxpZGF0ZUNvbnRhY3ROYW1lKG5hbWU6IHN0cmluZyk6IHsgdmFsaWQ6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH0ge1xuICAgIGlmICghbmFtZSB8fCBuYW1lLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgZXJyb3I6ICfor7fovpPlhaXogZTns7vkurrlkI3np7AnIH07XG4gICAgfVxuXG4gICAgaWYgKG5hbWUudHJpbSgpLmxlbmd0aCA+IDIwKSB7XG4gICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yOiAn6IGU57O75Lq65ZCN56ew5LiN6IO96LaF6L+HMjDkuKrlrZfnrKYnIH07XG4gICAgfVxuXG4gICAgLy8g5qOA5p+l5piv5ZCm5bey5a2Y5Zyo5ZCM5ZCN6IGU57O75Lq6XG4gICAgaWYgKHRoaXMuY29udGFjdHMuc29tZShjb250YWN0ID0+IGNvbnRhY3QubmFtZSA9PT0gbmFtZS50cmltKCkpKSB7XG4gICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yOiAn6K+l6IGU57O75Lq65ZCN56ew5bey5a2Y5ZyoJyB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IHZhbGlkOiB0cnVlIH07XG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5b2T5YmN6KeS6ImySUTvvIjlhoXogZTmlrnms5XvvIlcbiAgICovXG4gIHByaXZhdGUgZ2V0Q3VycmVudENoYXJhY3RlcklkKCk6IHN0cmluZyB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIOS9v+eUqCBUYXZlcm5IZWxwZXIuZ2V0Q2hhckRhdGEoKSDojrflj5bop5LoibLmlbDmja5cbiAgICAgIGlmICgod2luZG93IGFzIGFueSkuVGF2ZXJuSGVscGVyICYmICh3aW5kb3cgYXMgYW55KS5UYXZlcm5IZWxwZXIuZ2V0Q2hhckRhdGEpIHtcbiAgICAgICAgY29uc3QgY2hhckRhdGEgPSAod2luZG93IGFzIGFueSkuVGF2ZXJuSGVscGVyLmdldENoYXJEYXRhKCk7XG4gICAgICAgIGlmIChjaGFyRGF0YSkge1xuICAgICAgICAgIHJldHVybiBjaGFyRGF0YS5hdmF0YXIgfHwgY2hhckRhdGEubmFtZSB8fCAnZGVmYXVsdCc7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuICdkZWZhdWx0JztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW0NvbnRhY3RNYW5hZ2VyXSDojrflj5bop5LoibJJROWksei0pTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gJ2RlZmF1bHQnO1xuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/chatList/contactManager.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/chatList/contextMenu.ts": 
  /*!***********************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/chatList/contextMenu.ts ***!
  \***********************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ContextMenu: () => (/* binding */ ContextMenu)\n/* harmony export */ });\n/**\n * 上下文菜单组件\n * 负责显示和管理长按后的气泡菜单\n */\nclass ContextMenu {\n    element = null;\n    overlay = null;\n    currentChatId = null;\n    isVisible = false;\n    globalClickHandler = null;\n    showTime = 0; // 记录菜单显示时间\n    ignoreClickDuration = 800; // 忽略点击事件的时长(ms)\n    constructor() {\n        this.bindOtherGlobalEvents();\n    }\n    /**\n     * 显示上下文菜单\n     */\n    show(chatId, position, isPinned = false) {\n        this.hide(); // 先隐藏之前的菜单\n        this.currentChatId = chatId;\n        this.createMenuElements(isPinned);\n        this.positionMenu(position);\n        this.showMenu();\n        // 记录菜单显示时间，用于忽略短时间内的点击事件\n        this.showTime = Date.now();\n        // 立即绑定全局点击事件，但在短时间内忽略点击\n        this.bindGlobalClickEvent();\n    }\n    /**\n     * 隐藏上下文菜单\n     */\n    hide() {\n        if (!this.isVisible) {\n            return;\n        }\n        this.isVisible = false;\n        if (this.element) {\n            console.log('🎭 菜单隐藏动画开始：就地渐隐 scale(1) → scale(0.95)');\n            // 移除显示类，添加隐藏类\n            this.element.classList.remove('show');\n            this.element.classList.add('hiding');\n            // 等待动画完成后移除元素\n            setTimeout(() => {\n                if (this.overlay && this.overlay.parentNode) {\n                    this.overlay.parentNode.removeChild(this.overlay);\n                    console.log('🎭 菜单DOM元素已移除');\n                }\n                this.element = null;\n                this.overlay = null;\n            }, 120); // 与CSS transition时间一致\n        }\n        // 重置长按状态\n        const pressedElements = document.querySelectorAll('.chat-list-item.long-pressed');\n        pressedElements.forEach(element => {\n            element.classList.remove('long-pressed');\n        });\n        // 通知长按处理器重置状态\n        const resetEvent = new CustomEvent('contextMenuHidden');\n        document.dispatchEvent(resetEvent);\n        this.currentChatId = null;\n    }\n    /**\n     * 检查菜单是否可见\n     */\n    isMenuVisible() {\n        return this.isVisible;\n    }\n    /**\n     * 创建菜单元素\n     */\n    createMenuElements(isPinned) {\n        // 创建遮罩层\n        this.overlay = document.createElement('div');\n        this.overlay.className = 'context-menu-overlay';\n        // 创建菜单容器\n        this.element = document.createElement('div');\n        this.element.className = 'context-menu';\n        this.element.dataset.chatId = this.currentChatId;\n        // 创建菜单内容 - 横排布局，无emoji\n        this.element.innerHTML = `\r\n      <div class=\"menu-arrow\"></div>\r\n      <div class=\"menu-content horizontal\">\r\n        <button class=\"menu-item pin-item\" data-action=\"${isPinned ? 'unpin' : 'pin'}\">\r\n          <span class=\"menu-text\">${isPinned ? '取消置顶' : '置顶'}</span>\r\n        </button>\r\n        <button class=\"menu-item delete-item\" data-action=\"delete\">\r\n          <span class=\"menu-text\">删除</span>\r\n        </button>\r\n      </div>\r\n    `;\n        // 绑定菜单事件\n        this.bindMenuEvents();\n        // 添加到页面\n        this.overlay.appendChild(this.element);\n        document.body.appendChild(this.overlay);\n    }\n    /**\n     * 绑定菜单事件\n     */\n    bindMenuEvents() {\n        if (!this.element)\n            return;\n        // 菜单项点击事件\n        const menuItems = this.element.querySelectorAll('.menu-item');\n        menuItems.forEach(item => {\n            item.addEventListener('click', event => {\n                event.stopPropagation();\n                const action = item.dataset.action;\n                this.handleMenuAction(action);\n            });\n        });\n        // 阻止菜单内部点击事件冒泡\n        this.element.addEventListener('click', event => {\n            event.stopPropagation();\n        });\n    }\n    /**\n     * 绑定全局点击事件\n     */\n    bindGlobalClickEvent() {\n        if (this.globalClickHandler) {\n            document.removeEventListener('click', this.globalClickHandler);\n        }\n        this.globalClickHandler = (event) => {\n            if (!this.isVisible) {\n                return;\n            }\n            const currentTime = Date.now();\n            const timeSinceShow = currentTime - this.showTime;\n            // 如果菜单刚显示不久，忽略所有点击事件\n            if (timeSinceShow < this.ignoreClickDuration) {\n                console.log(`🔍 [ContextMenu] 菜单显示后${timeSinceShow}ms内，忽略点击事件`);\n                return;\n            }\n            const target = event.target;\n            // 如果点击的是菜单内部，不隐藏\n            if (this.element && this.element.contains(target)) {\n                return;\n            }\n            // 如果点击的是长按的聊天项，不隐藏\n            const chatItem = target.closest('.chat-list-item.long-pressed');\n            if (chatItem) {\n                return;\n            }\n            // 其他情况隐藏菜单\n            console.log(`🔍 [ContextMenu] 点击菜单外区域，隐藏菜单`);\n            this.hide();\n        };\n        document.addEventListener('click', this.globalClickHandler, { capture: true });\n    }\n    /**\n     * 绑定其他全局事件\n     */\n    bindOtherGlobalEvents() {\n        // 滚动时隐藏菜单\n        document.addEventListener('scroll', () => {\n            this.hide();\n        }, true);\n        // 窗口大小改变时隐藏菜单\n        window.addEventListener('resize', () => {\n            this.hide();\n        });\n        // ESC键隐藏菜单\n        document.addEventListener('keydown', event => {\n            if (event.key === 'Escape') {\n                this.hide();\n            }\n        });\n    }\n    /**\n     * 定位菜单 - 显示在聊天项的中上方\n     */\n    positionMenu(targetPosition) {\n        if (!this.element)\n            return;\n        // 找到对应的聊天项元素\n        const chatItem = document.querySelector(`[data-chat-id=\"${this.currentChatId}\"]`);\n        if (!chatItem)\n            return;\n        const chatItemRect = chatItem.getBoundingClientRect();\n        // 暂时禁用transition避免位置变化动画\n        this.element.style.transition = 'none';\n        // 直接计算最终位置，使用更准确的菜单尺寸估算\n        const estimatedMenuWidth = 90; // 调整预估菜单宽度（两个小按钮）\n        const estimatedMenuHeight = 24; // 预估菜单高度（1.5rem）\n        const menuX = chatItemRect.left + (chatItemRect.width - estimatedMenuWidth) / 2 + 5; // 向右微调5px\n        const menuY = chatItemRect.top - estimatedMenuHeight - 8; // 8px间距\n        // 一次性设置最终位置\n        this.element.style.left = `${menuX}px`;\n        this.element.style.top = `${menuY}px`;\n        this.element.style.visibility = 'visible';\n        // 强制重排后恢复transition\n        this.element.offsetHeight;\n        this.element.style.transition = 'all 0.12s ease-out';\n        // 设置箭头指向下方（指向聊天项）\n        this.setArrowDirection('bottom');\n    }\n    /**\n     * 计算最佳菜单位置\n     */\n    calculateOptimalPosition(target, menu, viewport) {\n        const padding = 12; // 距离屏幕边缘的最小距离\n        const arrowSize = 8; // 箭头大小\n        // 尝试不同的位置，优先级：右 > 左 > 下 > 上\n        const positions = [\n            // 右侧\n            {\n                x: target.x + 20,\n                y: target.y - menu.height / 2,\n                placement: 'right',\n            },\n            // 左侧\n            {\n                x: target.x - menu.width - 20,\n                y: target.y - menu.height / 2,\n                placement: 'left',\n            },\n            // 下方\n            {\n                x: target.x - menu.width / 2,\n                y: target.y + 20,\n                placement: 'bottom',\n            },\n            // 上方\n            {\n                x: target.x - menu.width / 2,\n                y: target.y - menu.height - 20,\n                placement: 'top',\n            },\n        ];\n        // 找到第一个不超出屏幕的位置\n        for (const pos of positions) {\n            if (pos.x >= padding &&\n                pos.x + menu.width <= viewport.width - padding &&\n                pos.y >= padding &&\n                pos.y + menu.height <= viewport.height - padding) {\n                return pos;\n            }\n        }\n        // 如果都超出屏幕，使用调整后的右侧位置\n        return {\n            x: Math.max(padding, Math.min(target.x + 20, viewport.width - menu.width - padding)),\n            y: Math.max(padding, Math.min(target.y - menu.height / 2, viewport.height - menu.height - padding)),\n            placement: 'right',\n        };\n    }\n    /**\n     * 设置箭头方向\n     */\n    setArrowDirection(placement) {\n        if (!this.element)\n            return;\n        const arrow = this.element.querySelector('.menu-arrow');\n        if (!arrow)\n            return;\n        // 移除所有方向类\n        arrow.className = 'menu-arrow';\n        // 添加对应方向类\n        arrow.classList.add(`arrow-${placement}`);\n    }\n    /**\n     * 显示菜单动画\n     */\n    showMenu() {\n        if (!this.element || !this.overlay)\n            return;\n        this.isVisible = true;\n        // 确保初始状态：移除所有动画类\n        this.element.classList.remove('hiding', 'show');\n        // 强制重排以确保初始状态（默认：缩小+向上偏移+透明）\n        this.element.offsetHeight;\n        // 使用requestAnimationFrame确保动画流畅\n        requestAnimationFrame(() => {\n            if (this.element) {\n                this.element.classList.add('show');\n                console.log('🎭 菜单显示动画开始：就地渐显 scale(0.95) → scale(1)');\n            }\n        });\n    }\n    /**\n     * 处理菜单操作\n     */\n    handleMenuAction(action) {\n        if (!this.currentChatId)\n            return;\n        // 触发菜单操作事件\n        const actionEvent = new CustomEvent('contextMenuAction', {\n            detail: {\n                action,\n                chatId: this.currentChatId,\n            },\n        });\n        document.dispatchEvent(actionEvent);\n        // 隐藏菜单\n        this.hide();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY2hhdExpc3QvY29udGV4dE1lbnUudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7R0FHRztBQWFJLE1BQU0sV0FBVztJQUNkLE9BQU8sR0FBdUIsSUFBSSxDQUFDO0lBQ25DLE9BQU8sR0FBdUIsSUFBSSxDQUFDO0lBQ25DLGFBQWEsR0FBa0IsSUFBSSxDQUFDO0lBQ3BDLFNBQVMsR0FBWSxLQUFLLENBQUM7SUFDM0Isa0JBQWtCLEdBQW9DLElBQUksQ0FBQztJQUMzRCxRQUFRLEdBQVcsQ0FBQyxDQUFDLENBQUMsV0FBVztJQUNqQyxtQkFBbUIsR0FBVyxHQUFHLENBQUMsQ0FBQyxnQkFBZ0I7SUFFM0Q7UUFDRSxJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQztJQUMvQixDQUFDO0lBRUQ7O09BRUc7SUFDSCxJQUFJLENBQUMsTUFBYyxFQUFFLFFBQWtDLEVBQUUsV0FBb0IsS0FBSztRQUNoRixJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxXQUFXO1FBRXhCLElBQUksQ0FBQyxhQUFhLEdBQUcsTUFBTSxDQUFDO1FBQzVCLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNsQyxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzVCLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUVoQix5QkFBeUI7UUFDekIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7UUFFM0Isd0JBQXdCO1FBQ3hCLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO0lBQzlCLENBQUM7SUFFRDs7T0FFRztJQUNILElBQUk7UUFDRixJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBQ3BCLE9BQU87UUFDVCxDQUFDO1FBRUQsSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7UUFFdkIsSUFBSSxJQUFJLENBQUMs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LENBQUMsU0FBUyxTQUFTLEVBQUUsQ0FBQyxDQUFDO0lBQzVDLENBQUM7SUFFRDs7T0FFRztJQUNLLFFBQVE7UUFDZCxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPO1lBQUUsT0FBTztRQUUzQyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztRQUV0QixpQkFBaUI7UUFDakIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUMsQ0FBQztRQUVoRCw2QkFBNkI7UUFDN0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUM7UUFFMUIsZ0NBQWdDO1FBQ2hDLHFCQUFxQixDQUFDLEdBQUcsRUFBRTtZQUN6QixJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDakIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUNuQyxPQUFPLENBQUMsR0FBRyxDQUFDLHlDQUF5QyxDQUFDLENBQUM7WUFDekQsQ0FBQztRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVEOztPQUVHO0lBQ0ssZ0JBQWdCLENBQUMsTUFBa0M7UUFDekQsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhO1lBQUUsT0FBTztRQUVoQyxXQUFXO1FBQ1gsTUFBTSxXQUFXLEdBQUcsSUFBSSxXQUFXLENBQUMsbUJBQW1CLEVBQUU7WUFDdkQsTUFBTSxFQUFFO2dCQUNOLE1BQU07Z0JBQ04sTUFBTSxFQUFFLElBQUksQ0FBQyxhQUFhO2FBQ2I7U0FDaEIsQ0FBQyxDQUFDO1FBRUgsUUFBUSxDQUFDLGFBQWEsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUVwQyxPQUFPO1FBQ1AsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ2QsQ0FBQztDQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy9jaGF0TGlzdC9jb250ZXh0TWVudS50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIOS4iuS4i+aWh+iPnOWNlee7hOS7tlxyXG4gKiDotJ/otKPmmL7npLrlkoznrqHnkIbplb/mjInlkI7nmoTmsJTms6Hoj5zljZVcclxuICovXHJcblxyXG5pbnRlcmZhY2UgTWVudVBvc2l0aW9uIHtcclxuICB4OiBudW1iZXI7XHJcbiAgeTogbnVtYmVyO1xyXG4gIHBsYWNlbWVudDogJ3RvcCcgfCAnYm90dG9tJyB8ICdsZWZ0JyB8ICdyaWdodCc7XHJcbn1cclxuXHJcbmludGVyZmFjZSBNZW51QWN0aW9uIHtcclxuICBhY3Rpb246ICdwaW4nIHwgJ3VucGluJyB8ICdkZWxldGUnO1xyXG4gIGNoYXRJZDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ29udGV4dE1lbnUge1xyXG4gIHByaXZhdGUgZWxlbWVudDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuICBwcml2YXRlIG92ZXJsYXk6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcbiAgcHJpdmF0ZSBjdXJyZW50Q2hhdElkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxuICBwcml2YXRlIGlzVmlzaWJsZTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIHByaXZhdGUgZ2xvYmFsQ2xpY2tIYW5kbGVyOiAoKGV2ZW50OiBFdmVudCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcclxuICBwcml2YXRlIHNob3dUaW1lOiBudW1iZXIgPSAwOyAvLyDorrDlvZXoj5zljZXmmL7npLrml7bpl7RcclxuICBwcml2YXRlIGlnbm9yZUNsaWNrRHVyYXRpb246IG51bWJlciA9IDgwMDsgLy8g5b+955Wl54K55Ye75LqL5Lu255qE5pe26ZW/KG1zKVxyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuYmluZE90aGVyR2xvYmFsRXZlbnRzKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmmL7npLrkuIrkuIvmlofoj5zljZVcclxuICAgKi9cclxuICBzaG93KGNoYXRJZDogc3RyaW5nLCBwb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9LCBpc1Bpbm5lZDogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XHJcbiAgICB0aGlzLmhpZGUoKTsgLy8g5YWI6ZqQ6JeP5LmL5YmN55qE6I+c5Y2VXHJcblxyXG4gICAgdGhpcy5jdXJyZW50Q2hhdElkID0gY2hhdElkO1xyXG4gICAgdGhpcy5jcmVhdGVNZW51RWxlbWVudHMoaXNQaW5uZWQpO1xyXG4gICAgdGhpcy5wb3NpdGlvbk1lbnUocG9zaXRpb24pO1xyXG4gICAgdGhpcy5zaG93TWVudSgpO1xyXG5cclxuICAgIC8vIOiusOW9leiPnOWNleaYvuekuuaXtumXtO+8jOeUqOS6juW/veeVpeefreaXtumXtOWGheeahOeCueWHu+S6i+S7tlxyXG4gICAgdGhpcy5zaG93VGltZSA9IERhdGUubm93KCk7XHJcblxyXG4gICAgLy8g56uL5Y2z57uR5a6a5YWo5bGA54K55Ye75LqL5Lu277yM5L2G5Zyo55+t5pe26Ze05YaF5b+955Wl54K55Ye7XHJcbiAgICB0aGlzLmJpbmRHbG9iYWxDbGlja0V2ZW50KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDpmpDol4/kuIrkuIvmlofoj5zljZVcclxuICAgKi9cclxuICBoaWRlKCk6IHZvaWQge1xyXG4gICAgaWYgKCF0aGlzLmlzVmlzaWJsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcclxuXHJcbiAgICBpZiAodGhpcy5lbGVtZW50KSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfwn46tIOiPnOWNlemakOiXj+WKqOeUu+W8gOWni++8muWwseWcsOa4kOmakCBzY2FsZSgxKSDihpIgc2NhbGUoMC45NSknKTtcclxuXHJcbiAgICAgIC8vIOenu+mZpOaYvuekuuexu++8jOa3u+WKoOmakOiXj+exu1xyXG4gICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xyXG4gICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaGlkaW5nJyk7XHJcblxyXG4gICAgICAvLyDnrYnlvoXliqjnlLvlrozmiJDlkI7np7vpmaTlhYPntKBcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMub3ZlcmxheSAmJiB0aGlzLm92ZXJsYXkucGFyZW50Tm9kZSkge1xyXG4gICAgICAgICAgdGhpcy5vdmVybGF5LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5vdmVybGF5KTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn46tIOiPnOWNlURPTeWFg+e0oOW3suenu+mZpCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMub3ZlcmxheSA9IG51bGw7XHJcbiAgICAgIH0sIDEyMCk7IC8vIOS4jkNTUyB0cmFuc2l0aW9u5pe26Ze05LiA6Ie0XHJcbiAgICB9XHJcblxyXG4gICAgLy8g6YeN572u6ZW/5oyJ54q25oCBXHJcbiAgICBjb25zdCBwcmVzc2VkRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hhdC1saXN0LWl0ZW0ubG9uZy1wcmVzc2VkJyk7XHJcbiAgICBwcmVzc2VkRWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdsb25nLXByZXNzZWQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIOmAmuefpemVv+aMieWkhOeQhuWZqOmHjee9rueKtuaAgVxyXG4gICAgY29uc3QgcmVzZXRFdmVudCA9IG5ldyBDdXN0b21FdmVudCgnY29udGV4dE1lbnVIaWRkZW4nKTtcclxuICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQocmVzZXRFdmVudCk7XHJcblxyXG4gICAgdGhpcy5jdXJyZW50Q2hhdElkID0gbnVsbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOajgOafpeiPnOWNleaYr+WQpuWPr+ingVxyXG4gICAqL1xyXG4gIGlzTWVudVZpc2libGUoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5pc1Zpc2libGU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliJvlu7roj5zljZXlhYPntKBcclxuICAgKi9cclxuICBwcml2YXRlIGNyZWF0ZU1lbnVFbGVtZW50cyhpc1Bpbm5lZDogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgLy8g5Yib5bu66YGu572p5bGCXHJcbiAgICB0aGlzLm92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIHRoaXMub3ZlcmxheS5jbGFzc05hbWUgPSAnY29udGV4dC1tZW51LW92ZXJsYXknO1xyXG5cclxuICAgIC8vIOWIm+W7uuiPnOWNleWuueWZqFxyXG4gICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NOYW1lID0gJ2NvbnRleHQtbWVudSc7XHJcbiAgICB0aGlzLmVsZW1lbnQuZGF0YXNldC5jaGF0SWQgPSB0aGlzLmN1cnJlbnRDaGF0SWQhO1xyXG5cclxuICAgIC8vIOWIm+W7uuiPnOWNleWGheWuuSAtIOaoquaOkuW4g+WxgO+8jOaXoGVtb2ppXHJcbiAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gYFxyXG4gICAgICA8ZGl2IGNsYXNzPVwibWVudS1hcnJvd1wiPjwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwibWVudS1jb250ZW50IGhvcml6b250YWxcIj5cclxuICAgICAgICA8YnV0dG9uIGNsYXNzPVwibWVudS1pdGVtIHBpbi1pdGVtXCIgZGF0YS1hY3Rpb249XCIke2lzUGlubmVkID8gJ3VucGluJyA6ICdwaW4nfVwiPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZW51LXRleHRcIj4ke2lzUGlubmVkID8gJ+WPlua2iOe9rumhticgOiAn572u6aG2J308L3NwYW4+XHJcbiAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm1lbnUtaXRlbSBkZWxldGUtaXRlbVwiIGRhdGEtYWN0aW9uPVwiZGVsZXRlXCI+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1lbnUtdGV4dFwiPuWIoOmZpDwvc3Bhbj5cclxuICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICBgO1xyXG5cclxuICAgIC8vIOe7keWumuiPnOWNleS6i+S7tlxyXG4gICAgdGhpcy5iaW5kTWVudUV2ZW50cygpO1xyXG5cclxuICAgIC8vIOa3u+WKoOWIsOmhtemdolxyXG4gICAgdGhpcy5vdmVybGF5LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMub3ZlcmxheSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDnu5Hlrproj5zljZXkuovku7ZcclxuICAgKi9cclxuICBwcml2YXRlIGJpbmRNZW51RXZlbnRzKCk6IHZvaWQge1xyXG4gICAgaWYgKCF0aGlzLmVsZW1lbnQpIHJldHVybjtcclxuXHJcbiAgICAvLyDoj5zljZXpobnngrnlh7vkuovku7ZcclxuICAgIGNvbnN0IG1lbnVJdGVtcyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWVudS1pdGVtJyk7XHJcbiAgICBtZW51SXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBjb25zdCBhY3Rpb24gPSAoaXRlbSBhcyBIVE1MRWxlbWVudCkuZGF0YXNldC5hY3Rpb24gYXMgJ3BpbicgfCAndW5waW4nIHwgJ2RlbGV0ZSc7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVNZW51QWN0aW9uKGFjdGlvbik7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8g6Zi75q2i6I+c5Y2V5YaF6YOo54K55Ye75LqL5Lu25YaS5rOhXHJcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XHJcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDnu5HlrprlhajlsYDngrnlh7vkuovku7ZcclxuICAgKi9cclxuICBwcml2YXRlIGJpbmRHbG9iYWxDbGlja0V2ZW50KCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuZ2xvYmFsQ2xpY2tIYW5kbGVyKSB7XHJcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5nbG9iYWxDbGlja0hhbmRsZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZ2xvYmFsQ2xpY2tIYW5kbGVyID0gKGV2ZW50OiBFdmVudCkgPT4ge1xyXG4gICAgICBpZiAoIXRoaXMuaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBjdXJyZW50VGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgIGNvbnN0IHRpbWVTaW5jZVNob3cgPSBjdXJyZW50VGltZSAtIHRoaXMuc2hvd1RpbWU7XHJcblxyXG4gICAgICAvLyDlpoLmnpzoj5zljZXliJrmmL7npLrkuI3kuYXvvIzlv73nlaXmiYDmnInngrnlh7vkuovku7ZcclxuICAgICAgaWYgKHRpbWVTaW5jZVNob3cgPCB0aGlzLmlnbm9yZUNsaWNrRHVyYXRpb24pIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhg8J+UjSBbQ29udGV4dE1lbnVdIOiPnOWNleaYvuekuuWQjiR7dGltZVNpbmNlU2hvd31tc+WGhe+8jOW/veeVpeeCueWHu+S6i+S7tmApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG5cclxuICAgICAgLy8g5aaC5p6c54K55Ye755qE5piv6I+c5Y2V5YaF6YOo77yM5LiN6ZqQ6JePXHJcbiAgICAgIGlmICh0aGlzLmVsZW1lbnQgJiYgdGhpcy5lbGVtZW50LmNvbnRhaW5zKHRhcmdldCkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOWmguaenOeCueWHu+eahOaYr+mVv+aMieeahOiBiuWkqemhue+8jOS4jemakOiXj1xyXG4gICAgICBjb25zdCBjaGF0SXRlbSA9IHRhcmdldC5jbG9zZXN0KCcuY2hhdC1saXN0LWl0ZW0ubG9uZy1wcmVzc2VkJyk7XHJcbiAgICAgIGlmIChjaGF0SXRlbSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5YW25LuW5oOF5Ya16ZqQ6JeP6I+c5Y2VXHJcbiAgICAgIGNvbnNvbGUubG9nKGDwn5SNIFtDb250ZXh0TWVudV0g54K55Ye76I+c5Y2V5aSW5Yy65Z+f77yM6ZqQ6JeP6I+c5Y2VYCk7XHJcbiAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZ2xvYmFsQ2xpY2tIYW5kbGVyLCB7IGNhcHR1cmU6IHRydWUgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDnu5Hlrprlhbbku5blhajlsYDkuovku7ZcclxuICAgKi9cclxuICBwcml2YXRlIGJpbmRPdGhlckdsb2JhbEV2ZW50cygpOiB2b2lkIHtcclxuICAgIC8vIOa7muWKqOaXtumakOiXj+iPnOWNlVxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgJ3Njcm9sbCcsXHJcbiAgICAgICgpID0+IHtcclxuICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgICAgfSxcclxuICAgICAgdHJ1ZSxcclxuICAgICk7XHJcblxyXG4gICAgLy8g56qX5Y+j5aSn5bCP5pS55Y+Y5pe26ZqQ6JeP6I+c5Y2VXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLmhpZGUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEVTQ+mUrumakOiXj+iPnOWNlVxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGV2ZW50ID0+IHtcclxuICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlrprkvY3oj5zljZUgLSDmmL7npLrlnKjogYrlpKnpobnnmoTkuK3kuIrmlrlcclxuICAgKi9cclxuICBwcml2YXRlIHBvc2l0aW9uTWVudSh0YXJnZXRQb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9KTogdm9pZCB7XHJcbiAgICBpZiAoIXRoaXMuZWxlbWVudCkgcmV0dXJuO1xyXG5cclxuICAgIC8vIOaJvuWIsOWvueW6lOeahOiBiuWkqemhueWFg+e0oFxyXG4gICAgY29uc3QgY2hhdEl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1jaGF0LWlkPVwiJHt0aGlzLmN1cnJlbnRDaGF0SWR9XCJdYCkgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICBpZiAoIWNoYXRJdGVtKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgY2hhdEl0ZW1SZWN0ID0gY2hhdEl0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG4gICAgLy8g5pqC5pe256aB55SodHJhbnNpdGlvbumBv+WFjeS9jee9ruWPmOWMluWKqOeUu1xyXG4gICAgdGhpcy5lbGVtZW50LnN0eWxlLnRyYW5zaXRpb24gPSAnbm9uZSc7XHJcblxyXG4gICAgLy8g55u05o6l6K6h566X5pyA57uI5L2N572u77yM5L2/55So5pu05YeG56Gu55qE6I+c5Y2V5bC65a+45Lyw566XXHJcbiAgICBjb25zdCBlc3RpbWF0ZWRNZW51V2lkdGggPSA5MDsgLy8g6LCD5pW06aKE5Lyw6I+c5Y2V5a695bqm77yI5Lik5Liq5bCP5oyJ6ZKu77yJXHJcbiAgICBjb25zdCBlc3RpbWF0ZWRNZW51SGVpZ2h0ID0gMjQ7IC8vIOmihOS8sOiPnOWNlemrmOW6pu+8iDEuNXJlbe+8iVxyXG5cclxuICAgIGNvbnN0IG1lbnVYID0gY2hhdEl0ZW1SZWN0LmxlZnQgKyAoY2hhdEl0ZW1SZWN0LndpZHRoIC0gZXN0aW1hdGVkTWVudVdpZHRoKSAvIDIgKyA1OyAvLyDlkJHlj7Plvq7osIM1cHhcclxuICAgIGNvbnN0IG1lbnVZID0gY2hhdEl0ZW1SZWN0LnRvcCAtIGVzdGltYXRlZE1lbnVIZWlnaHQgLSA4OyAvLyA4cHjpl7Tot51cclxuXHJcbiAgICAvLyDkuIDmrKHmgKforr7nva7mnIDnu4jkvY3nva5cclxuICAgIHRoaXMuZWxlbWVudC5zdHlsZS5sZWZ0ID0gYCR7bWVudVh9cHhgO1xyXG4gICAgdGhpcy5lbGVtZW50LnN0eWxlLnRvcCA9IGAke21lbnVZfXB4YDtcclxuICAgIHRoaXMuZWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xyXG5cclxuICAgIC8vIOW8uuWItumHjeaOkuWQjuaBouWkjXRyYW5zaXRpb25cclxuICAgIHRoaXMuZWxlbWVudC5vZmZzZXRIZWlnaHQ7XHJcbiAgICB0aGlzLmVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbiA9ICdhbGwgMC4xMnMgZWFzZS1vdXQnO1xyXG5cclxuICAgIC8vIOiuvue9rueureWktOaMh+WQkeS4i+aWue+8iOaMh+WQkeiBiuWkqemhue+8iVxyXG4gICAgdGhpcy5zZXRBcnJvd0RpcmVjdGlvbignYm90dG9tJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDorqHnrpfmnIDkvbPoj5zljZXkvY3nva5cclxuICAgKi9cclxuICBwcml2YXRlIGNhbGN1bGF0ZU9wdGltYWxQb3NpdGlvbihcclxuICAgIHRhcmdldDogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9LFxyXG4gICAgbWVudTogeyB3aWR0aDogbnVtYmVyOyBoZWlnaHQ6IG51bWJlciB9LFxyXG4gICAgdmlld3BvcnQ6IHsgd2lkdGg6IG51bWJlcjsgaGVpZ2h0OiBudW1iZXIgfSxcclxuICApOiBNZW51UG9zaXRpb24ge1xyXG4gICAgY29uc3QgcGFkZGluZyA9IDEyOyAvLyDot53nprvlsY/luZXovrnnvJjnmoTmnIDlsI/ot53nprtcclxuICAgIGNvbnN0IGFycm93U2l6ZSA9IDg7IC8vIOeureWktOWkp+Wwj1xyXG5cclxuICAgIC8vIOWwneivleS4jeWQjOeahOS9jee9ru+8jOS8mOWFiOe6p++8muWPsyA+IOW3piA+IOS4iyA+IOS4ilxyXG4gICAgY29uc3QgcG9zaXRpb25zID0gW1xyXG4gICAgICAvLyDlj7PkvqdcclxuICAgICAge1xyXG4gICAgICAgIHg6IHRhcmdldC54ICsgMjAsXHJcbiAgICAgICAgeTogdGFyZ2V0LnkgLSBtZW51LmhlaWdodCAvIDIsXHJcbiAgICAgICAgcGxhY2VtZW50OiAncmlnaHQnIGFzIGNvbnN0LFxyXG4gICAgICB9LFxyXG4gICAgICAvLyDlt6bkvqdcclxuICAgICAge1xyXG4gICAgICAgIHg6IHRhcmdldC54IC0gbWVudS53aWR0aCAtIDIwLFxyXG4gICAgICAgIHk6IHRhcmdldC55IC0gbWVudS5oZWlnaHQgLyAyLFxyXG4gICAgICAgIHBsYWNlbWVudDogJ2xlZnQnIGFzIGNvbnN0LFxyXG4gICAgICB9LFxyXG4gICAgICAvLyDkuIvmlrlcclxuICAgICAge1xyXG4gICAgICAgIHg6IHRhcmdldC54IC0gbWVudS53aWR0aCAvIDIsXHJcbiAgICAgICAgeTogdGFyZ2V0LnkgKyAyMCxcclxuICAgICAgICBwbGFjZW1lbnQ6ICdib3R0b20nIGFzIGNvbnN0LFxyXG4gICAgICB9LFxyXG4gICAgICAvLyDkuIrmlrlcclxuICAgICAge1xyXG4gICAgICAgIHg6IHRhcmdldC54IC0gbWVudS53aWR0aCAvIDIsXHJcbiAgICAgICAgeTogdGFyZ2V0LnkgLSBtZW51LmhlaWdodCAtIDIwLFxyXG4gICAgICAgIHBsYWNlbWVudDogJ3RvcCcgYXMgY29uc3QsXHJcbiAgICAgIH0sXHJcbiAgICBdO1xyXG5cclxuICAgIC8vIOaJvuWIsOesrOS4gOS4quS4jei2heWHuuWxj+W5leeahOS9jee9rlxyXG4gICAgZm9yIChjb25zdCBwb3Mgb2YgcG9zaXRpb25zKSB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBwb3MueCA+PSBwYWRkaW5nICYmXHJcbiAgICAgICAgcG9zLnggKyBtZW51LndpZHRoIDw9IHZpZXdwb3J0LndpZHRoIC0gcGFkZGluZyAmJlxyXG4gICAgICAgIHBvcy55ID49IHBhZGRpbmcgJiZcclxuICAgICAgICBwb3MueSArIG1lbnUuaGVpZ2h0IDw9IHZpZXdwb3J0LmhlaWdodCAtIHBhZGRpbmdcclxuICAgICAgKSB7XHJcbiAgICAgICAgcmV0dXJuIHBvcztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOWmguaenOmDvei2heWHuuWxj+W5le+8jOS9v+eUqOiwg+aVtOWQjueahOWPs+S+p+S9jee9rlxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgeDogTWF0aC5tYXgocGFkZGluZywgTWF0aC5taW4odGFyZ2V0LnggKyAyMCwgdmlld3BvcnQud2lkdGggLSBtZW51LndpZHRoIC0gcGFkZGluZykpLFxyXG4gICAgICB5OiBNYXRoLm1heChwYWRkaW5nLCBNYXRoLm1pbih0YXJnZXQueSAtIG1lbnUuaGVpZ2h0IC8gMiwgdmlld3BvcnQuaGVpZ2h0IC0gbWVudS5oZWlnaHQgLSBwYWRkaW5nKSksXHJcbiAgICAgIHBsYWNlbWVudDogJ3JpZ2h0JyxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDorr7nva7nrq3lpLTmlrnlkJFcclxuICAgKi9cclxuICBwcml2YXRlIHNldEFycm93RGlyZWN0aW9uKHBsYWNlbWVudDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICBpZiAoIXRoaXMuZWxlbWVudCkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGFycm93ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZW51LWFycm93JykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICBpZiAoIWFycm93KSByZXR1cm47XHJcblxyXG4gICAgLy8g56e76Zmk5omA5pyJ5pa55ZCR57G7XHJcbiAgICBhcnJvdy5jbGFzc05hbWUgPSAnbWVudS1hcnJvdyc7XHJcblxyXG4gICAgLy8g5re75Yqg5a+55bqU5pa55ZCR57G7XHJcbiAgICBhcnJvdy5jbGFzc0xpc3QuYWRkKGBhcnJvdy0ke3BsYWNlbWVudH1gKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaYvuekuuiPnOWNleWKqOeUu1xyXG4gICAqL1xyXG4gIHByaXZhdGUgc2hvd01lbnUoKTogdm9pZCB7XHJcbiAgICBpZiAoIXRoaXMuZWxlbWVudCB8fCAhdGhpcy5vdmVybGF5KSByZXR1cm47XHJcblxyXG4gICAgdGhpcy5pc1Zpc2libGUgPSB0cnVlO1xyXG5cclxuICAgIC8vIOehruS/neWIneWni+eKtuaAge+8muenu+mZpOaJgOacieWKqOeUu+exu1xyXG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGluZycsICdzaG93Jyk7XHJcblxyXG4gICAgLy8g5by65Yi26YeN5o6S5Lul56Gu5L+d5Yid5aeL54q25oCB77yI6buY6K6k77ya57yp5bCPK+WQkeS4iuWBj+enuyvpgI/mmI7vvIlcclxuICAgIHRoaXMuZWxlbWVudC5vZmZzZXRIZWlnaHQ7XHJcblxyXG4gICAgLy8g5L2/55SocmVxdWVzdEFuaW1hdGlvbkZyYW1l56Gu5L+d5Yqo55S75rWB55WFXHJcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5lbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcclxuICAgICAgICBjb25zb2xlLmxvZygn8J+OrSDoj5zljZXmmL7npLrliqjnlLvlvIDlp4vvvJrlsLHlnLDmuJDmmL4gc2NhbGUoMC45NSkg4oaSIHNjYWxlKDEpJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5aSE55CG6I+c5Y2V5pON5L2cXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBoYW5kbGVNZW51QWN0aW9uKGFjdGlvbjogJ3BpbicgfCAndW5waW4nIHwgJ2RlbGV0ZScpOiB2b2lkIHtcclxuICAgIGlmICghdGhpcy5jdXJyZW50Q2hhdElkKSByZXR1cm47XHJcblxyXG4gICAgLy8g6Kem5Y+R6I+c5Y2V5pON5L2c5LqL5Lu2XHJcbiAgICBjb25zdCBhY3Rpb25FdmVudCA9IG5ldyBDdXN0b21FdmVudCgnY29udGV4dE1lbnVBY3Rpb24nLCB7XHJcbiAgICAgIGRldGFpbDoge1xyXG4gICAgICAgIGFjdGlvbixcclxuICAgICAgICBjaGF0SWQ6IHRoaXMuY3VycmVudENoYXRJZCxcclxuICAgICAgfSBhcyBNZW51QWN0aW9uLFxyXG4gICAgfSk7XHJcblxyXG4gICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChhY3Rpb25FdmVudCk7XHJcblxyXG4gICAgLy8g6ZqQ6JeP6I+c5Y2VXHJcbiAgICB0aGlzLmhpZGUoKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/chatList/contextMenu.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/chatList/index.ts": 
  /*!*****************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/chatList/index.ts ***!
  \*****************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatListManager: () => (/* reexport safe */ _manager__WEBPACK_IMPORTED_MODULE_3__.ChatListManager),\n/* harmony export */   ContactManager: () => (/* reexport safe */ _contactManager__WEBPACK_IMPORTED_MODULE_2__.ContactManager),\n/* harmony export */   WallpaperManager: () => (/* reexport safe */ _wallpaperManager__WEBPACK_IMPORTED_MODULE_5__.WallpaperManager)\n/* harmony export */ });\n/* harmony import */ var _chatList_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chatList.scss */ "./src/多云熊/备份/给rovo的/modules/chatList/chatList.scss");\n/* harmony import */ var _unreadBadge_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./unreadBadge.scss */ "./src/多云熊/备份/给rovo的/modules/chatList/unreadBadge.scss");\n/* harmony import */ var _contactManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./contactManager */ "./src/多云熊/备份/给rovo的/modules/chatList/contactManager.ts");\n/* harmony import */ var _manager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./manager */ "./src/多云熊/备份/给rovo的/modules/chatList/manager.ts");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./types */ "./src/多云熊/备份/给rovo的/modules/chatList/types.ts");\n/* harmony import */ var _wallpaperManager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./wallpaperManager */ "./src/多云熊/备份/给rovo的/modules/chatList/wallpaperManager.ts");\n/**\n * 聊天列表模块导出\n */\n// 导入样式\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY2hhdExpc3QvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7O0dBRUc7QUFFSCxPQUFPO0FBQ2tCO0FBQ0c7QUFFc0I7QUFDTjtBQUNwQjtBQUM4QiIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY2hhdExpc3QvaW5kZXgudHM/Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiDogYrlpKnliJfooajmqKHlnZflr7zlh7pcclxuICovXHJcblxyXG4vLyDlr7zlhaXmoLflvI9cclxuaW1wb3J0ICcuL2NoYXRMaXN0LnNjc3MnO1xyXG5pbXBvcnQgJy4vdW5yZWFkQmFkZ2Uuc2Nzcyc7XHJcblxyXG5leHBvcnQgeyBDb250YWN0TWFuYWdlciB9IGZyb20gJy4vY29udGFjdE1hbmFnZXInO1xyXG5leHBvcnQgeyBDaGF0TGlzdE1hbmFnZXIgfSBmcm9tICcuL21hbmFnZXInO1xyXG5leHBvcnQgKiBmcm9tICcuL3R5cGVzJztcclxuZXhwb3J0IHsgV2FsbHBhcGVyTWFuYWdlciB9IGZyb20gJy4vd2FsbHBhcGVyTWFuYWdlcic7XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/chatList/index.ts\n\n}');
  },
  "./src/多云熊/备份/给rovo的/modules/chatList/longPressHandler.ts": 
  /*!****************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/chatList/longPressHandler.ts ***!
  \****************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LongPressHandler: () => (/* binding */ LongPressHandler)\n/* harmony export */ });\n/**\n * 长按处理器\n * 负责检测长按操作并触发相应事件\n */\nclass LongPressHandler {\n    config;\n    activeElement = null;\n    startTime = 0;\n    startPosition = { x: 0, y: 0 };\n    longPressTimer = null;\n    isLongPressing = false;\n    isMoving = false;\n    constructor(config = {}) {\n        this.config = {\n            duration: 400, // 缩短长按延迟到400ms\n            moveThreshold: 10,\n            enableVibration: true,\n            ...config,\n        };\n    }\n    /**\n     * 初始化长按处理器\n     */\n    init() {\n        this.bindEvents();\n    }\n    /**\n     * 销毁长按处理器\n     */\n    destroy() {\n        this.cleanup();\n        this.unbindEvents();\n    }\n    /**\n     * 解绑事件监听器\n     */\n    unbindEvents() {\n        document.removeEventListener('mousedown', this.handleStart.bind(this));\n        document.removeEventListener('touchstart', this.handleStart.bind(this));\n        document.removeEventListener('mousemove', this.handleMove.bind(this));\n        document.removeEventListener('touchmove', this.handleMove.bind(this));\n        document.removeEventListener('mouseup', this.handleEnd.bind(this));\n        document.removeEventListener('touchend', this.handleEnd.bind(this));\n        document.removeEventListener('contextmenu', this.handleContextMenu.bind(this));\n        document.removeEventListener('contextMenuHidden', this.handleMenuHidden.bind(this));\n    }\n    /**\n     * 绑定事件监听器\n     */\n    bindEvents() {\n        // 使用事件委托监听聊天列表项\n        document.addEventListener('mousedown', this.handleStart.bind(this));\n        document.addEventListener('touchstart', this.handleStart.bind(this), { passive: false });\n        document.addEventListener('mousemove', this.handleMove.bind(this));\n        document.addEventListener('touchmove', this.handleMove.bind(this), { passive: false });\n        document.addEventListener('mouseup', this.handleEnd.bind(this));\n        document.addEventListener('touchend', this.handleEnd.bind(this));\n        document.addEventListener('contextmenu', this.handleContextMenu.bind(this));\n        // 监听菜单隐藏事件，用于重置状态\n        document.addEventListener('contextMenuHidden', this.handleMenuHidden.bind(this));\n    }\n    /**\n     * 处理开始事件\n     */\n    handleStart(event) {\n        const target = event.target;\n        const chatItem = target.closest('.chat-list-item');\n        if (!chatItem || !chatItem.dataset.chatId) {\n            return;\n        }\n        // 阻止默认的上下文菜单\n        if (event.type === 'mousedown' && event.button === 2) {\n            event.preventDefault();\n            return;\n        }\n        // 如果已经有活动元素，先清理\n        if (this.activeElement) {\n            this.cleanup();\n        }\n        this.activeElement = chatItem;\n        this.startTime = Date.now();\n        this.isLongPressing = false;\n        this.isMoving = false;\n        // 获取初始位置\n        if (event.type === 'touchstart') {\n            const touch = event.touches[0];\n            this.startPosition = { x: touch.clientX, y: touch.clientY };\n        }\n        else {\n            const mouse = event;\n            this.startPosition = { x: mouse.clientX, y: mouse.clientY };\n        }\n        // 设置长按定时器\n        this.longPressTimer = setTimeout(() => {\n            if (this.activeElement && !this.isMoving) {\n                this.triggerLongPress();\n            }\n        }, this.config.duration);\n        // 添加长按视觉反馈\n        chatItem.classList.add('long-press-detecting');\n    }\n    /**\n     * 处理移动事件\n     */\n    handleMove(event) {\n        if (!this.activeElement || this.isLongPressing) {\n            return;\n        }\n        let currentX, currentY;\n        if (event.type === 'touchmove') {\n            const touch = event.touches[0];\n            currentX = touch.clientX;\n            currentY = touch.clientY;\n        }\n        else {\n            const mouse = event;\n            currentX = mouse.clientX;\n            currentY = mouse.clientY;\n        }\n        // 计算移动距离\n        const deltaX = Math.abs(currentX - this.startPosition.x);\n        const deltaY = Math.abs(currentY - this.startPosition.y);\n        const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n        // 如果移动距离超过阈值，取消长按\n        if (distance > this.config.moveThreshold) {\n            this.isMoving = true;\n            this.cancelLongPress();\n        }\n    }\n    /**\n     * 处理结束事件\n     */\n    handleEnd(event) {\n        if (!this.activeElement) {\n            return;\n        }\n        const duration = Date.now() - this.startTime;\n        // 如果是短按且没有移动，触发点击事件\n        if (duration < this.config.duration && !this.isMoving && !this.isLongPressing) {\n            this.triggerClick();\n            this.cleanup();\n        }\n        else if (this.isLongPressing) {\n            // 如果是长按，只清理定时器，保留长按状态让菜单保留\n            if (this.longPressTimer) {\n                clearTimeout(this.longPressTimer);\n                this.longPressTimer = null;\n            }\n            if (this.activeElement) {\n                this.activeElement.classList.remove('long-press-detecting');\n                // 保留 long-pressed 类，不清理 activeElement\n            }\n            this.isMoving = false;\n            // 不调用 cleanup()，让菜单保留\n        }\n        else {\n            this.cleanup();\n        }\n    }\n    /**\n     * 处理右键菜单事件\n     */\n    handleContextMenu(event) {\n        const target = event.target;\n        const chatItem = target.closest('.chat-list-item');\n        if (chatItem) {\n            event.preventDefault(); // 阻止默认右键菜单\n        }\n    }\n    /**\n     * 触发长按事件\n     */\n    triggerLongPress() {\n        if (!this.activeElement) {\n            return;\n        }\n        this.isLongPressing = true;\n        const chatId = this.activeElement.dataset.chatId;\n        const rect = this.activeElement.getBoundingClientRect();\n        // 计算菜单显示位置（聊天项的中心位置）\n        const position = {\n            x: rect.left + rect.width / 2,\n            y: rect.top + rect.height / 2,\n        };\n        // 添加长按状态样式\n        this.activeElement.classList.add('long-pressed');\n        this.activeElement.classList.remove('long-press-detecting');\n        // 震动反馈（如果支持）\n        if (this.config.enableVibration && 'vibrate' in navigator) {\n            navigator.vibrate(50);\n        }\n        // 触发自定义长按事件\n        const longPressEvent = new CustomEvent('chatItemLongPress', {\n            detail: {\n                chatId,\n                element: this.activeElement,\n                position,\n            },\n        });\n        document.dispatchEvent(longPressEvent);\n    }\n    /**\n     * 触发点击事件\n     */\n    triggerClick() {\n        if (!this.activeElement) {\n            return;\n        }\n        const chatId = this.activeElement.dataset.chatId;\n        // 触发聊天项点击事件\n        const clickEvent = new CustomEvent('chatListItemClick', {\n            detail: { chatId },\n        });\n        document.dispatchEvent(clickEvent);\n    }\n    /**\n     * 取消长按操作\n     */\n    cancelLongPress() {\n        if (this.longPressTimer) {\n            clearTimeout(this.longPressTimer);\n            this.longPressTimer = null;\n        }\n        if (this.activeElement) {\n            this.activeElement.classList.remove('long-press-detecting');\n        }\n    }\n    /**\n     * 清理状态\n     */\n    cleanup() {\n        if (this.longPressTimer) {\n            clearTimeout(this.longPressTimer);\n            this.longPressTimer = null;\n        }\n        if (this.activeElement) {\n            this.activeElement.classList.remove('long-press-detecting', 'long-pressed');\n            this.activeElement = null;\n        }\n        this.isLongPressing = false;\n        this.isMoving = false;\n    }\n    /**\n     * 处理菜单隐藏事件\n     */\n    handleMenuHidden() {\n        // 完全重置状态，防止卡住\n        this.cleanup();\n    }\n    /**\n     * 重置长按状态（用于菜单隐藏后）\n     */\n    resetState() {\n        const pressedElements = document.querySelectorAll('.chat-list-item.long-pressed');\n        pressedElements.forEach(element => {\n            element.classList.remove('long-pressed');\n        });\n        // 完全清理状态\n        this.cleanup();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY2hhdExpc3QvbG9uZ1ByZXNzSGFuZGxlci50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7OztHQUdHO0FBY0ksTUFBTSxnQkFBZ0I7SUFDbkIsTUFBTSxDQUFrQjtJQUN4QixhQUFhLEdBQXVCLElBQUksQ0FBQztJQUN6QyxTQUFTLEdBQVcsQ0FBQyxDQUFDO0lBQ3RCLGFBQWEsR0FBNkIsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztJQUN6RCxjQUFjLEdBQTBCLElBQUksQ0FBQztJQUM3QyxjQUFjLEdBQVksS0FBSyxDQUFDO0lBQ2hDLFFBQVEsR0FBWSxLQUFLLENBQUM7SUFFbEMsWUFBWSxTQUFtQyxFQUFFO1FBQy9DLElBQUksQ0FBQyxNQUFNLEdBQUc7WUFDWixRQUFRLEVBQUUsR0FBRyxFQUFFLGVBQWU7WUFDOUIsYUFBYSxFQUFFLEVBQUU7WUFDakIsZUFBZSxFQUFFLElBQUk7WUFDckIsR0FBRyxNQUFNO1NBQ1YsQ0FBQztJQUNKLENBQUM7SUFFRDs7T0FFRztJQUNILElBQUk7UUFDRixJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7SUFDcEIsQ0FBQztJQUVEOztPQUVHO0lBQ0gsT0FBTztRQUNMLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNmLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUN0QixDQUFDO0lBRUQ7O09BRUc7SUFDSyxZQUFZO1FBQ2xCLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUN2RSxRQUFRLENBQUMsbUJBQW1CLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDeEUsUUFBUSxDQUFDLG1CQUFtQixDQUFDLFdBQVcsRUFBRSxJ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Y0FBYztRQUNkLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUNqQixDQUFDO0lBRUQ7O09BRUc7SUFDSCxVQUFVO1FBQ1IsTUFBTSxlQUFlLEdBQUcsUUFBUSxDQUFDLGdCQUFnQixDQUFDLDhCQUE4QixDQUFDLENBQUM7UUFDbEYsZUFBZSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUNoQyxPQUFPLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUMzQyxDQUFDLENBQUMsQ0FBQztRQUNILFNBQVM7UUFDVCxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDakIsQ0FBQztDQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy9jaGF0TGlzdC9sb25nUHJlc3NIYW5kbGVyLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICog6ZW/5oyJ5aSE55CG5ZmoXHJcbiAqIOi0n+i0o+ajgOa1i+mVv+aMieaTjeS9nOW5tuinpuWPkeebuOW6lOS6i+S7tlxyXG4gKi9cclxuXHJcbmludGVyZmFjZSBMb25nUHJlc3NDb25maWcge1xyXG4gIGR1cmF0aW9uOiBudW1iZXI7IC8vIOmVv+aMieaXtumVv+mYiOWAvCAobXMpXHJcbiAgbW92ZVRocmVzaG9sZDogbnVtYmVyOyAvLyDnp7vliqjpmIjlgLwgKHB4KVxyXG4gIGVuYWJsZVZpYnJhdGlvbjogYm9vbGVhbjsgLy8g5piv5ZCm5ZCv55So6ZyH5Yqo5Y+N6aaIXHJcbn1cclxuXHJcbmludGVyZmFjZSBMb25nUHJlc3NFdmVudERldGFpbCB7XHJcbiAgY2hhdElkOiBzdHJpbmc7XHJcbiAgZWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcbiAgcG9zaXRpb246IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIExvbmdQcmVzc0hhbmRsZXIge1xyXG4gIHByaXZhdGUgY29uZmlnOiBMb25nUHJlc3NDb25maWc7XHJcbiAgcHJpdmF0ZSBhY3RpdmVFbGVtZW50OiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG4gIHByaXZhdGUgc3RhcnRUaW1lOiBudW1iZXIgPSAwO1xyXG4gIHByaXZhdGUgc3RhcnRQb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9ID0geyB4OiAwLCB5OiAwIH07XHJcbiAgcHJpdmF0ZSBsb25nUHJlc3NUaW1lcjogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcclxuICBwcml2YXRlIGlzTG9uZ1ByZXNzaW5nOiBib29sZWFuID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBpc01vdmluZzogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFBhcnRpYWw8TG9uZ1ByZXNzQ29uZmlnPiA9IHt9KSB7XHJcbiAgICB0aGlzLmNvbmZpZyA9IHtcclxuICAgICAgZHVyYXRpb246IDQwMCwgLy8g57yp55+t6ZW/5oyJ5bu26L+f5YiwNDAwbXNcclxuICAgICAgbW92ZVRocmVzaG9sZDogMTAsXHJcbiAgICAgIGVuYWJsZVZpYnJhdGlvbjogdHJ1ZSxcclxuICAgICAgLi4uY29uZmlnLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWIneWni+WMlumVv+aMieWkhOeQhuWZqFxyXG4gICAqL1xyXG4gIGluaXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLmJpbmRFdmVudHMoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmUgOavgemVv+aMieWkhOeQhuWZqFxyXG4gICAqL1xyXG4gIGRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICB0aGlzLmNsZWFudXAoKTtcclxuICAgIHRoaXMudW5iaW5kRXZlbnRzKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDop6Pnu5Hkuovku7bnm5HlkKzlmahcclxuICAgKi9cclxuICBwcml2YXRlIHVuYmluZEV2ZW50cygpOiB2b2lkIHtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuaGFuZGxlU3RhcnQuYmluZCh0aGlzKSk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5oYW5kbGVTdGFydC5iaW5kKHRoaXMpKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuaGFuZGxlTW92ZS5iaW5kKHRoaXMpKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuaGFuZGxlTW92ZS5iaW5kKHRoaXMpKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLmhhbmRsZUVuZC5iaW5kKHRoaXMpKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5oYW5kbGVFbmQuYmluZCh0aGlzKSk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIHRoaXMuaGFuZGxlQ29udGV4dE1lbnUuYmluZCh0aGlzKSk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjb250ZXh0TWVudUhpZGRlbicsIHRoaXMuaGFuZGxlTWVudUhpZGRlbi5iaW5kKHRoaXMpKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOe7keWumuS6i+S7tuebkeWQrOWZqFxyXG4gICAqL1xyXG4gIHByaXZhdGUgYmluZEV2ZW50cygpOiB2b2lkIHtcclxuICAgIC8vIOS9v+eUqOS6i+S7tuWnlOaJmOebkeWQrOiBiuWkqeWIl+ihqOmhuVxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5oYW5kbGVTdGFydC5iaW5kKHRoaXMpKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLmhhbmRsZVN0YXJ0LmJpbmQodGhpcyksIHsgcGFzc2l2ZTogZmFsc2UgfSk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLmhhbmRsZU1vdmUuYmluZCh0aGlzKSk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLmhhbmRsZU1vdmUuYmluZCh0aGlzKSwgeyBwYXNzaXZlOiBmYWxzZSB9KTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLmhhbmRsZUVuZC5iaW5kKHRoaXMpKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5oYW5kbGVFbmQuYmluZCh0aGlzKSk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIHRoaXMuaGFuZGxlQ29udGV4dE1lbnUuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgLy8g55uR5ZCs6I+c5Y2V6ZqQ6JeP5LqL5Lu277yM55So5LqO6YeN572u54q25oCBXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0TWVudUhpZGRlbicsIHRoaXMuaGFuZGxlTWVudUhpZGRlbi5iaW5kKHRoaXMpKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWkhOeQhuW8gOWni+S6i+S7tlxyXG4gICAqL1xyXG4gIHByaXZhdGUgaGFuZGxlU3RhcnQoZXZlbnQ6IE1vdXNlRXZlbnQgfCBUb3VjaEV2ZW50KTogdm9pZCB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICBjb25zdCBjaGF0SXRlbSA9IHRhcmdldC5jbG9zZXN0KCcuY2hhdC1saXN0LWl0ZW0nKSBhcyBIVE1MRWxlbWVudDtcclxuXHJcbiAgICBpZiAoIWNoYXRJdGVtIHx8ICFjaGF0SXRlbS5kYXRhc2V0LmNoYXRJZCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8g6Zi75q2i6buY6K6k55qE5LiK5LiL5paH6I+c5Y2VXHJcbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ21vdXNlZG93bicgJiYgKGV2ZW50IGFzIE1vdXNlRXZlbnQpLmJ1dHRvbiA9PT0gMikge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5aaC5p6c5bey57uP5pyJ5rS75Yqo5YWD57Sg77yM5YWI5riF55CGXHJcbiAgICBpZiAodGhpcy5hY3RpdmVFbGVtZW50KSB7XHJcbiAgICAgIHRoaXMuY2xlYW51cCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYWN0aXZlRWxlbWVudCA9IGNoYXRJdGVtO1xyXG4gICAgdGhpcy5zdGFydFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgdGhpcy5pc0xvbmdQcmVzc2luZyA9IGZhbHNlO1xyXG4gICAgdGhpcy5pc01vdmluZyA9IGZhbHNlO1xyXG5cclxuICAgIC8vIOiOt+WPluWIneWni+S9jee9rlxyXG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICd0b3VjaHN0YXJ0Jykge1xyXG4gICAgICBjb25zdCB0b3VjaCA9IChldmVudCBhcyBUb3VjaEV2ZW50KS50b3VjaGVzWzBdO1xyXG4gICAgICB0aGlzLnN0YXJ0UG9zaXRpb24gPSB7IHg6IHRvdWNoLmNsaWVudFgsIHk6IHRvdWNoLmNsaWVudFkgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IG1vdXNlID0gZXZlbnQgYXMgTW91c2VFdmVudDtcclxuICAgICAgdGhpcy5zdGFydFBvc2l0aW9uID0geyB4OiBtb3VzZS5jbGllbnRYLCB5OiBtb3VzZS5jbGllbnRZIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8g6K6+572u6ZW/5oyJ5a6a5pe25ZmoXHJcbiAgICB0aGlzLmxvbmdQcmVzc1RpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLmFjdGl2ZUVsZW1lbnQgJiYgIXRoaXMuaXNNb3ZpbmcpIHtcclxuICAgICAgICB0aGlzLnRyaWdnZXJMb25nUHJlc3MoKTtcclxuICAgICAgfVxyXG4gICAgfSwgdGhpcy5jb25maWcuZHVyYXRpb24pO1xyXG5cclxuICAgIC8vIOa3u+WKoOmVv+aMieinhuinieWPjemmiFxyXG4gICAgY2hhdEl0ZW0uY2xhc3NMaXN0LmFkZCgnbG9uZy1wcmVzcy1kZXRlY3RpbmcnKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWkhOeQhuenu+WKqOS6i+S7tlxyXG4gICAqL1xyXG4gIHByaXZhdGUgaGFuZGxlTW92ZShldmVudDogTW91c2VFdmVudCB8IFRvdWNoRXZlbnQpOiB2b2lkIHtcclxuICAgIGlmICghdGhpcy5hY3RpdmVFbGVtZW50IHx8IHRoaXMuaXNMb25nUHJlc3NpbmcpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBjdXJyZW50WDogbnVtYmVyLCBjdXJyZW50WTogbnVtYmVyO1xyXG5cclxuICAgIGlmIChldmVudC50eXBlID09PSAndG91Y2htb3ZlJykge1xyXG4gICAgICBjb25zdCB0b3VjaCA9IChldmVudCBhcyBUb3VjaEV2ZW50KS50b3VjaGVzWzBdO1xyXG4gICAgICBjdXJyZW50WCA9IHRvdWNoLmNsaWVudFg7XHJcbiAgICAgIGN1cnJlbnRZID0gdG91Y2guY2xpZW50WTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IG1vdXNlID0gZXZlbnQgYXMgTW91c2VFdmVudDtcclxuICAgICAgY3VycmVudFggPSBtb3VzZS5jbGllbnRYO1xyXG4gICAgICBjdXJyZW50WSA9IG1vdXNlLmNsaWVudFk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g6K6h566X56e75Yqo6Led56a7XHJcbiAgICBjb25zdCBkZWx0YVggPSBNYXRoLmFicyhjdXJyZW50WCAtIHRoaXMuc3RhcnRQb3NpdGlvbi54KTtcclxuICAgIGNvbnN0IGRlbHRhWSA9IE1hdGguYWJzKGN1cnJlbnRZIC0gdGhpcy5zdGFydFBvc2l0aW9uLnkpO1xyXG4gICAgY29uc3QgZGlzdGFuY2UgPSBNYXRoLnNxcnQoZGVsdGFYICogZGVsdGFYICsgZGVsdGFZICogZGVsdGFZKTtcclxuXHJcbiAgICAvLyDlpoLmnpznp7vliqjot53nprvotoXov4fpmIjlgLzvvIzlj5bmtojplb/mjIlcclxuICAgIGlmIChkaXN0YW5jZSA+IHRoaXMuY29uZmlnLm1vdmVUaHJlc2hvbGQpIHtcclxuICAgICAgdGhpcy5pc01vdmluZyA9IHRydWU7XHJcbiAgICAgIHRoaXMuY2FuY2VsTG9uZ1ByZXNzKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlpITnkIbnu5PmnZ/kuovku7ZcclxuICAgKi9cclxuICBwcml2YXRlIGhhbmRsZUVuZChldmVudDogTW91c2VFdmVudCB8IFRvdWNoRXZlbnQpOiB2b2lkIHtcclxuICAgIGlmICghdGhpcy5hY3RpdmVFbGVtZW50KSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSB0aGlzLnN0YXJ0VGltZTtcclxuXHJcbiAgICAvLyDlpoLmnpzmmK/nn63mjInkuJTmsqHmnInnp7vliqjvvIzop6blj5Hngrnlh7vkuovku7ZcclxuICAgIGlmIChkdXJhdGlvbiA8IHRoaXMuY29uZmlnLmR1cmF0aW9uICYmICF0aGlzLmlzTW92aW5nICYmICF0aGlzLmlzTG9uZ1ByZXNzaW5nKSB7XHJcbiAgICAgIHRoaXMudHJpZ2dlckNsaWNrKCk7XHJcbiAgICAgIHRoaXMuY2xlYW51cCgpO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmlzTG9uZ1ByZXNzaW5nKSB7XHJcbiAgICAgIC8vIOWmguaenOaYr+mVv+aMie+8jOWPqua4heeQhuWumuaXtuWZqO+8jOS/neeVmemVv+aMieeKtuaAgeiuqeiPnOWNleS/neeVmVxyXG4gICAgICBpZiAodGhpcy5sb25nUHJlc3NUaW1lcikge1xyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmxvbmdQcmVzc1RpbWVyKTtcclxuICAgICAgICB0aGlzLmxvbmdQcmVzc1RpbWVyID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5hY3RpdmVFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2xvbmctcHJlc3MtZGV0ZWN0aW5nJyk7XHJcbiAgICAgICAgLy8g5L+d55WZIGxvbmctcHJlc3NlZCDnsbvvvIzkuI3muIXnkIYgYWN0aXZlRWxlbWVudFxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuaXNNb3ZpbmcgPSBmYWxzZTtcclxuICAgICAgLy8g5LiN6LCD55SoIGNsZWFudXAoKe+8jOiuqeiPnOWNleS/neeVmVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5jbGVhbnVwKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlpITnkIblj7PplK7oj5zljZXkuovku7ZcclxuICAgKi9cclxuICBwcml2YXRlIGhhbmRsZUNvbnRleHRNZW51KGV2ZW50OiBFdmVudCk6IHZvaWQge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG4gICAgY29uc3QgY2hhdEl0ZW0gPSB0YXJnZXQuY2xvc2VzdCgnLmNoYXQtbGlzdC1pdGVtJyk7XHJcblxyXG4gICAgaWYgKGNoYXRJdGVtKSB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIOmYu+atoum7mOiupOWPs+mUruiPnOWNlVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6Kem5Y+R6ZW/5oyJ5LqL5Lu2XHJcbiAgICovXHJcbiAgcHJpdmF0ZSB0cmlnZ2VyTG9uZ1ByZXNzKCk6IHZvaWQge1xyXG4gICAgaWYgKCF0aGlzLmFjdGl2ZUVsZW1lbnQpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuaXNMb25nUHJlc3NpbmcgPSB0cnVlO1xyXG4gICAgY29uc3QgY2hhdElkID0gdGhpcy5hY3RpdmVFbGVtZW50LmRhdGFzZXQuY2hhdElkITtcclxuICAgIGNvbnN0IHJlY3QgPSB0aGlzLmFjdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG4gICAgLy8g6K6h566X6I+c5Y2V5pi+56S65L2N572u77yI6IGK5aSp6aG555qE5Lit5b+D5L2N572u77yJXHJcbiAgICBjb25zdCBwb3NpdGlvbiA9IHtcclxuICAgICAgeDogcmVjdC5sZWZ0ICsgcmVjdC53aWR0aCAvIDIsXHJcbiAgICAgIHk6IHJlY3QudG9wICsgcmVjdC5oZWlnaHQgLyAyLFxyXG4gICAgfTtcclxuXHJcbiAgICAvLyDmt7vliqDplb/mjInnirbmgIHmoLflvI9cclxuICAgIHRoaXMuYWN0aXZlRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdsb25nLXByZXNzZWQnKTtcclxuICAgIHRoaXMuYWN0aXZlRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdsb25nLXByZXNzLWRldGVjdGluZycpO1xyXG5cclxuICAgIC8vIOmch+WKqOWPjemmiO+8iOWmguaenOaUr+aMge+8iVxyXG4gICAgaWYgKHRoaXMuY29uZmlnLmVuYWJsZVZpYnJhdGlvbiAmJiAndmlicmF0ZScgaW4gbmF2aWdhdG9yKSB7XHJcbiAgICAgIG5hdmlnYXRvci52aWJyYXRlKDUwKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDop6blj5Hoh6rlrprkuYnplb/mjInkuovku7ZcclxuICAgIGNvbnN0IGxvbmdQcmVzc0V2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdjaGF0SXRlbUxvbmdQcmVzcycsIHtcclxuICAgICAgZGV0YWlsOiB7XHJcbiAgICAgICAgY2hhdElkLFxyXG4gICAgICAgIGVsZW1lbnQ6IHRoaXMuYWN0aXZlRWxlbWVudCxcclxuICAgICAgICBwb3NpdGlvbixcclxuICAgICAgfSBhcyBMb25nUHJlc3NFdmVudERldGFpbCxcclxuICAgIH0pO1xyXG5cclxuICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobG9uZ1ByZXNzRXZlbnQpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6Kem5Y+R54K55Ye75LqL5Lu2XHJcbiAgICovXHJcbiAgcHJpdmF0ZSB0cmlnZ2VyQ2xpY2soKTogdm9pZCB7XHJcbiAgICBpZiAoIXRoaXMuYWN0aXZlRWxlbWVudCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY2hhdElkID0gdGhpcy5hY3RpdmVFbGVtZW50LmRhdGFzZXQuY2hhdElkITtcclxuXHJcbiAgICAvLyDop6blj5HogYrlpKnpobnngrnlh7vkuovku7ZcclxuICAgIGNvbnN0IGNsaWNrRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2NoYXRMaXN0SXRlbUNsaWNrJywge1xyXG4gICAgICBkZXRhaWw6IHsgY2hhdElkIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGNsaWNrRXZlbnQpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Y+W5raI6ZW/5oyJ5pON5L2cXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBjYW5jZWxMb25nUHJlc3MoKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5sb25nUHJlc3NUaW1lcikge1xyXG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5sb25nUHJlc3NUaW1lcik7XHJcbiAgICAgIHRoaXMubG9uZ1ByZXNzVGltZXIgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmFjdGl2ZUVsZW1lbnQpIHtcclxuICAgICAgdGhpcy5hY3RpdmVFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2xvbmctcHJlc3MtZGV0ZWN0aW5nJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmuIXnkIbnirbmgIFcclxuICAgKi9cclxuICBwcml2YXRlIGNsZWFudXAoKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5sb25nUHJlc3NUaW1lcikge1xyXG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5sb25nUHJlc3NUaW1lcik7XHJcbiAgICAgIHRoaXMubG9uZ1ByZXNzVGltZXIgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmFjdGl2ZUVsZW1lbnQpIHtcclxuICAgICAgdGhpcy5hY3RpdmVFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2xvbmctcHJlc3MtZGV0ZWN0aW5nJywgJ2xvbmctcHJlc3NlZCcpO1xyXG4gICAgICB0aGlzLmFjdGl2ZUVsZW1lbnQgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuaXNMb25nUHJlc3NpbmcgPSBmYWxzZTtcclxuICAgIHRoaXMuaXNNb3ZpbmcgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWkhOeQhuiPnOWNlemakOiXj+S6i+S7tlxyXG4gICAqL1xyXG4gIHByaXZhdGUgaGFuZGxlTWVudUhpZGRlbigpOiB2b2lkIHtcclxuICAgIC8vIOWujOWFqOmHjee9rueKtuaAge+8jOmYsuatouWNoeS9j1xyXG4gICAgdGhpcy5jbGVhbnVwKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDph43nva7plb/mjInnirbmgIHvvIjnlKjkuo7oj5zljZXpmpDol4/lkI7vvIlcclxuICAgKi9cclxuICByZXNldFN0YXRlKCk6IHZvaWQge1xyXG4gICAgY29uc3QgcHJlc3NlZEVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNoYXQtbGlzdC1pdGVtLmxvbmctcHJlc3NlZCcpO1xyXG4gICAgcHJlc3NlZEVsZW1lbnRzLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnbG9uZy1wcmVzc2VkJyk7XHJcbiAgICB9KTtcclxuICAgIC8vIOWujOWFqOa4heeQhueKtuaAgVxyXG4gICAgdGhpcy5jbGVhbnVwKCk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/chatList/longPressHandler.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/chatList/manager.ts": 
  /*!*******************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/chatList/manager.ts ***!
  \*******************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatListManager: () => (/* binding */ ChatListManager)\n/* harmony export */ });\n/* harmony import */ var _core_BottomNavigation__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/BottomNavigation */ \"./src/多云熊/备份/给rovo的/modules/core/BottomNavigation.ts\");\n/* harmony import */ var _core_StatusBar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/StatusBar */ \"./src/多云熊/备份/给rovo的/modules/core/StatusBar.ts\");\n/* harmony import */ var _contactManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./contactManager */ \"./src/多云熊/备份/给rovo的/modules/chatList/contactManager.ts\");\n/* harmony import */ var _contextMenu__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./contextMenu */ \"./src/多云熊/备份/给rovo的/modules/chatList/contextMenu.ts\");\n/* harmony import */ var _longPressHandler__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./longPressHandler */ \"./src/多云熊/备份/给rovo的/modules/chatList/longPressHandler.ts\");\n/* harmony import */ var _pinManager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./pinManager */ \"./src/多云熊/备份/给rovo的/modules/chatList/pinManager.ts\");\n/* harmony import */ var _unreadMessageManager__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./unreadMessageManager */ \"./src/多云熊/备份/给rovo的/modules/chatList/unreadMessageManager.ts\");\n/* harmony import */ var _wallpaperManager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./wallpaperManager */ \"./src/多云熊/备份/给rovo的/modules/chatList/wallpaperManager.ts\");\n/**\n * 聊天列表管理器\n * 负责聊天列表界面的显示、交互和数据管理\n * 样式定义在主文件 重构.scss 中\n */\n\n\n\n\n\n\n\n\nclass ChatListManager {\n    soundManager;\n    contactManager;\n    groupChatManager = null;\n    config;\n    newChatModalData;\n    statusBar = null; // 通用状态栏实例\n    currentChatDataMap = undefined; // 保存当前的聊天数据\n    // 长按菜单相关\n    longPressHandler;\n    contextMenu;\n    pinManager;\n    // 壁纸管理器\n    wallpaperManager;\n    // 未读消息管理器\n    unreadMessageManager;\n    // 通用底部导航栏\n    bottomNavigation;\n    constructor(soundManager, groupChatManager, messageParser) {\n        this.soundManager = soundManager;\n        this.contactManager = new _contactManager__WEBPACK_IMPORTED_MODULE_2__.ContactManager();\n        // 使用传入的群聊管理器实例，避免重复创建\n        if (groupChatManager) {\n            this.groupChatManager = groupChatManager;\n        }\n        else {\n            console.warn('⚠️ ChatListManager: 未传入GroupChatManager实例，群聊功能可能不可用');\n        }\n        // 初始化长按菜单组件\n        this.longPressHandler = new _longPressHandler__WEBPACK_IMPORTED_MODULE_4__.LongPressHandler();\n        this.contextMenu = new _contextMenu__WEBPACK_IMPORTED_MODULE_3__.ContextMenu();\n        this.pinManager = new _pinManager__WEBPACK_IMPORTED_MODULE_5__.PinManager();\n        // 初始化壁纸管理器\n        this.wallpaperManager = _wallpaperManager__WEBPACK_IMPORTED_MODULE_7__.WallpaperManager.getInstance();\n        // 初始化未读消息管理器\n        this.unreadMessageManager = new _unreadMessageManager__WEBPACK_IMPORTED_MODULE_6__.UnreadMessageManager(messageParser);\n        // 初始化底部导航栏\n        // 底部导航实例占位，实际挂载在容器创建/复用时通过 BottomNavigation.mountDefault 完成\n        this.bottomNavigation = new _core_BottomNavigation__WEBPACK_IMPORTED_MODULE_0__.BottomNavigation({\n            items: [],\n        });\n        this.config = {\n            maxRecentChats: 50,\n            showUnreadBadge: true,\n            enableGroupChat: true,\n            defaultAvatars: [\n                'https://files.catbox.moe/u8ccy5.jpg',\n                'https://files.catbox.moe/j2s4qj.jpg',\n                'https://files.catbox.moe/seoipi.jpg',\n                'https://files.catbox.moe/dq08mr.jpg',\n                'https://files.catbox.moe/yc3gv4.jpeg',\n                'https://files.catbox.moe/y4vvp0.jpg',\n            ],\n        };\n        this.newChatModalData = {\n            type: 'single',\n            selectedContacts: new Set(),\n        };\n        // 监听聊天列表变化事件\n        this.setupEventListeners();\n    }\n    /**\n     * 显示聊天列表界面\n     */\n    showChatListInterface(chatDataMap) {\n        // 保存当前的聊天数据映射\n        if (chatDataMap) {\n            this.currentChatDataMap = chatDataMap;\n        }\n        // 获取聊天列表容器\n        let chatListContainer = document.getElementById('chatListInterface');\n        if (!chatListContainer) {\n            chatListContainer = this.createChatListContainer();\n            const interfaceContainer = document.querySelector('.interface-container');\n            if (interfaceContainer) {\n                interfaceContainer.appendChild(chatListContainer);\n            }\n        }\n        else {\n            // 如果容器已存在，确保内容和事件正确设置\n            this.setupExistingContainer(chatListContainer);\n        }\n        // 显示聊天列表容器\n        chatListContainer.classList.add('active');\n        chatListContainer.style.display = 'block';\n        // 确保底部导航在聊天列表页激活“消息”\n        this.bottomNavigation.setActiveItem('messages');\n        // 应用壁纸\n        this.wallpaperManager.applyWallpaper();\n        // 如果有聊天数据，从中提取联系人信息\n        if (chatDataMap) {\n            this.contactManager.extractContactsFromChatData(chatDataMap);\n            this.renderChatList(chatDataMap);\n        }\n        // 初始化状态栏\n        this.initializeStatusBar();\n        // 初始化长按处理器\n        this.initializeLongPressHandler();\n    }\n    /**\n     * 隐藏聊天列表界面\n     */\n    hideChatListInterface() {\n        const chatListContainer = document.getElementById('chatListInterface');\n        if (chatListContainer) {\n            chatListContainer.classList.remove('active');\n            chatListContainer.style.display = 'none';\n        }\n        // 销毁状态栏\n        this.destroyStatusBar();\n        // 销毁长按处理器\n        this.destroyLongPressHandler();\n        // 隐藏上下文菜单\n        this.contextMenu.hide();\n    }\n    /**\n     * 刷新聊天列表（用于群聊创建后更新显示）\n     */\n    refreshChatList(chatDataMap) {\n        // 如果没有传入新的chatDataMap，使用保存的数据\n        const dataToUse = chatDataMap || this.currentChatDataMap;\n        this.renderChatList(dataToUse);\n    }\n    /**\n     * 重新加载联系人数据（用于角色切换时）\n     */\n    async reloadContacts() {\n        console.log('🔄 ChatListManager: 重新加载联系人数据');\n        await this.contactManager.reloadContacts();\n        // 如果当前正在显示聊天列表，刷新显示\n        const chatListContainer = document.getElementById('chatListInterface');\n        if (chatListContainer && chatListContainer.classList.contains('active')) {\n            this.refreshChatList();\n        }\n    }\n    /**\n     * 设置事件监听器\n     */\n    setupEventListeners() {\n        // 监听聊天列表变化事件\n        document.addEventListener('chatListChanged', (e) => {\n            const event = e;\n            console.log('📱 收到聊天列表变化事件:', event.detail);\n            // 刷新聊天列表显示，使用保存的数据\n            this.refreshChatList(this.currentChatDataMap);\n        });\n        // 监听长按事件\n        document.addEventListener('chatItemLongPress', (e) => {\n            const event = e;\n            this.handleLongPress(event.detail);\n        });\n        // 监听上下文菜单操作事件\n        document.addEventListener('contextMenuAction', (e) => {\n            const event = e;\n            this.handleContextMenuAction(event.detail);\n        });\n        // 监听聊天项点击事件（由长按处理器触发）\n        document.addEventListener('chatListItemClick', (e) => {\n            const event = e;\n            this.onChatItemClick(event.detail.chatId);\n        });\n        // 监听未读消息数量更新事件\n        document.addEventListener('unreadCountUpdated', (e) => {\n            const event = e;\n            this.onUnreadCountUpdated(event.detail.chatId, event.detail.unreadCount);\n        });\n        // 监听所有未读消息清零事件\n        document.addEventListener('allUnreadCountsCleared', () => {\n            this.refreshChatList(this.currentChatDataMap);\n        });\n        // 监听头像缓存清除事件\n        document.addEventListener('avatarCacheCleared', (e) => {\n            const event = e;\n            console.log('🔄 [ChatListManager] 收到头像缓存清除事件，刷新聊天列表:', event.detail);\n            // 刷新聊天列表显示，重新获取头像\n            this.refreshChatList(this.currentChatDataMap);\n        });\n        // 监听角色头像更新事件\n        document.addEventListener('characterAvatarUpdated', (e) => {\n            const event = e;\n            const { contactName, newAvatar } = event.detail;\n            console.log('🔄 [ChatListManager] 收到角色头像更新事件:', contactName, newAvatar);\n            // 只更新角色相关的头像，不影响用户头像\n            this.updateCharacterAvatarOnly(contactName, newAvatar);\n        });\n    }\n    /**\n     * 设置已存在的聊天列表容器\n     */\n    setupExistingContainer(container) {\n        // 确保容器有正确的内容结构\n        if (!container.querySelector('#newChatBtn')) {\n            // 创建主要内容区域（状态栏将通过StatusBar组件添加）\n            const contentHTML = `\n        <div id=\"chatListStatusBarContainer\"></div>\n        <div class=\"chat-list-content\" id=\"chatListContent\">\n          \x3c!-- 聊天列表项将在这里动态生成 --\x3e\n        </div>\n        <button class=\"new-chat-btn\" id=\"newChatBtn\">\n          <svg viewBox=\"0 0 24 24\">\n            <path fill=\"currentColor\" d=\"M19,13h-6v6h-2v-6H5v-2h6V5h2v6h6V13z\"/>\n          </svg>\n        </button>\n      `;\n            // 使用通用底部导航组件（统一由工厂挂载）\n            container.innerHTML = contentHTML + `<div class=\"bottom-nav\"></div>`;\n            // 初始化底部导航（通用）\n            const navContainer = container.querySelector('.bottom-nav');\n            if (navContainer) {\n                this.bottomNavigation = _core_BottomNavigation__WEBPACK_IMPORTED_MODULE_0__.BottomNavigation.mountDefault(navContainer, 'messages', {\n                    feed: () => this.switchToFeed(),\n                    messages: () => { },\n                    profile: () => this.switchToProfile(),\n                });\n            }\n            // 绑定事件\n            this.bindChatListEvents(container);\n        }\n    }\n    /**\n     * 创建聊天列表容器\n     */\n    createChatListContainer() {\n        const container = document.createElement('div');\n        container.id = 'chatListInterface';\n        container.className = 'chat-list-interface';\n        // 创建主要内容区域（状态栏将通过StatusBar组件添加）\n        const contentHTML = `\n      <div id=\"chatListStatusBarContainer\"></div>\n      <div class=\"chat-list-content\" id=\"chatListContent\">\n        \x3c!-- 聊天列表项将在这里动态生成 --\x3e\n      </div>\n      <button class=\"new-chat-btn\" id=\"newChatBtn\">\n        <svg viewBox=\"0 0 24 24\">\n          <path fill=\"currentColor\" d=\"M19,13h-6v6h-2v-6H5v-2h6V5h2v6h6V13z\"/>\n        </svg>\n      </button>\n    `;\n        // 使用通用底部导航组件（统一由工厂挂载）\n        container.innerHTML = contentHTML + `<div class=\"bottom-nav\"></div>`;\n        // 初始化底部导航（通用）\n        const navContainer = container.querySelector('.bottom-nav');\n        if (navContainer) {\n            this.bottomNavigation = _core_BottomNavigation__WEBPACK_IMPORTED_MODULE_0__.BottomNavigation.mountDefault(navContainer, 'messages', {\n                feed: () => this.switchToFeed(),\n                messages: () => { },\n                profile: () => this.switchToProfile(),\n            });\n        }\n        // 绑定事件\n        this.bindChatListEvents(container);\n        return container;\n    }\n    /**\n     * 绑定聊天列表事件\n     */\n    bindChatListEvents(container) {\n        // 新建聊天按钮事件\n        const newChatBtn = container.querySelector('#newChatBtn');\n        if (newChatBtn) {\n            newChatBtn.addEventListener('click', () => {\n                this.soundManager.playSound('click');\n                this.showNewChatModal();\n            });\n        }\n        // 底部导航栏点击由 BottomNavigation 组件内部处理（含 active 状态切换）\n        // 此处不再重复绑定，避免重复触发与音效顺序不一致\n        // 页面切换统一通过 BottomNavigation 配置的 onClick 回调派发 pageSwitch 事件，\n        // 由 BearChatManager 统一播放音效并执行页面切换\n    }\n    /**\n     * 处理底部导航栏点击事件\n     */\n    handleBottomNavClick(navType) {\n        switch (navType) {\n            case 'messages':\n                // 消息按钮 - 保持在当前聊天列表界面\n                console.log('📱 切换到消息界面');\n                break;\n            case 'profile':\n                // 我的按钮 - 触发显示个人主页事件\n                console.log('👤 切换到个人主页');\n                this.showProfilePage();\n                break;\n            default:\n                console.warn('未知的导航类型:', navType);\n        }\n    }\n    /**\n     * 显示个人主页\n     */\n    showProfilePage() {\n        // 触发显示个人主页的事件，让主管理器处理\n        const event = new CustomEvent('showProfilePage', {\n            detail: { source: 'bottomNav' },\n        });\n        document.dispatchEvent(event);\n    }\n    /**\n     * 渲染聊天列表\n     */\n    renderChatList(chatDataMap) {\n        const chatListContent = document.getElementById('chatListContent');\n        if (!chatListContent)\n            return;\n        // 清空现有内容\n        chatListContent.innerHTML = '';\n        // 生成聊天列表数据（包括群聊数据）\n        const chatListItems = this.generateChatListItems(chatDataMap);\n        // 如果没有聊天记录，显示空状态\n        if (chatListItems.length === 0) {\n            chatListContent.innerHTML = `\n        <div class=\"empty-chat-list\">\n          <div class=\"empty-icon\">💬</div>\n          <div class=\"empty-text\">暂无聊天记录</div>\n          <div class=\"empty-hint\">点击右下角 + 开始新的聊天</div>\n        </div>\n      `;\n            return;\n        }\n        // 渲染聊天列表项\n        chatListItems.forEach(item => {\n            const chatItem = this.renderChatListItem(item);\n            chatListContent.appendChild(chatItem);\n        });\n    }\n    /**\n     * 生成聊天列表数据\n     */\n    generateChatListItems(chatDataMap) {\n        const chatListItems = [];\n        // 不再从localStorage读取群聊数据，统一从chatDataMap读取\n        console.log('🔍 [DEBUG] 生成聊天列表，不使用localStorage中的群聊数据');\n        if (!chatDataMap) {\n            return chatListItems;\n        }\n        // 遍历chatData生成列表项，只显示单聊和群聊\n        chatDataMap.forEach((chatData, chatId) => {\n            // 检查是否为群聊类型\n            const isGroupChat = chatData.type === 'group';\n            // 跳过“动态”聚合容器（避免将 [动态]...[/动态] 误当成聊天）\n            const isDynamicsContainerName = typeof chatData.chatName === 'string' && /^\\[?动态\\]?$/.test(chatData.chatName.trim());\n            if (isDynamicsContainerName) {\n                return; // 明确排除\n            }\n            // 过滤：检查消息内容是否包含S或G类型的消息，或者包含群聊标记\n            const hasChatMessages = chatData.messages &&\n                chatData.messages.some(message => {\n                    // 检查消息类型\n                    if (message.type && (message.type === 'S' || message.type === 'G')) {\n                        return true;\n                    }\n                    // 检查是否包含群聊标记\n                    if (message.content && message.content.includes('[群聊')) {\n                        return true;\n                    }\n                    return false;\n                });\n            // 仅当存在聊天消息、或明确为群聊、或单聊命名符合“和xxx的聊天”时才展示\n            const shouldShowChat = hasChatMessages || isGroupChat || this.isEligibleChatName(chatData.chatName);\n            if (!shouldShowChat) {\n                return; // 跳过非聊天内容\n            }\n            const lastMessage = this.getLastMessage(chatData.messages || []);\n            const lastTime = lastMessage ? this.formatAbsoluteTime(lastMessage.timestamp) : '';\n            // isGroupChat 已在上面定义过了，这里不需要重复判断\n            // 获取最新的头像（优先从联系人管理器获取）\n            const displayName = this.extractDisplayName(chatData.chatName);\n            let latestAvatar = chatData.avatar || this.getDefaultAvatar(chatData.chatName);\n            // 如果是单聊，尝试从联系人管理器获取最新头像\n            if (!isGroupChat && displayName) {\n                const contact = this.contactManager.getAllContacts().find(c => c.name === displayName);\n                if (contact && contact.avatar) {\n                    latestAvatar = contact.avatar;\n                }\n            }\n            // 获取未读消息数量\n            const unreadCount = this.unreadMessageManager.calculateUnreadCount(chatId, chatDataMap);\n            chatListItems.push({\n                chatId,\n                name: displayName,\n                avatar: latestAvatar,\n                lastMessage: lastMessage ? this.formatMessagePreview(lastMessage) : '暂无消息',\n                lastTime,\n                unreadCount: unreadCount,\n                type: isGroupChat ? 'G' : 'S',\n            });\n        });\n        // 按置顶状态和最后消息时间排序\n        chatListItems.sort((a, b) => {\n            const aIsPinned = this.pinManager.isPinned(a.chatId);\n            const bIsPinned = this.pinManager.isPinned(b.chatId);\n            // 置顶的聊天优先显示\n            if (aIsPinned && !bIsPinned)\n                return -1;\n            if (!aIsPinned && bIsPinned)\n                return 1;\n            // 如果都是置顶或都不是置顶，按置顶时间或消息时间排序\n            if (aIsPinned && bIsPinned) {\n                const aPinnedData = this.pinManager.getPinnedChatData(a.chatId);\n                const bPinnedData = this.pinManager.getPinnedChatData(b.chatId);\n                if (aPinnedData && bPinnedData) {\n                    return bPinnedData.pinnedAt - aPinnedData.pinnedAt; // 最新置顶的在前\n                }\n            }\n            // 按最后消息时间排序（最新的在前）\n            const aTime = this.getLastMessageTimestamp(a.chatId, chatDataMap);\n            const bTime = this.getLastMessageTimestamp(b.chatId, chatDataMap);\n            return bTime - aTime;\n        });\n        return chatListItems.slice(0, this.config.maxRecentChats);\n    }\n    /**\n     * 渲染单个聊天列表项\n     */\n    renderChatListItem(item) {\n        const chatItem = document.createElement('div');\n        const isPinned = this.pinManager.isPinned(item.chatId);\n        chatItem.className = `chat-list-item${isPinned ? ' pinned' : ''}`;\n        chatItem.dataset.chatId = item.chatId;\n        chatItem.dataset.type = item.type; // 添加类型标识，用于样式区分\n        // 参考原版消息列表-消息预览.html的结构，添加置顶指示器\n        chatItem.innerHTML = `\n      <img src=\"${item.avatar}\" class=\"chat-avatar\" alt=\"${item.name}\" onerror=\"this.src='${this.getDefaultAvatar(item.name)}'\">\n      <div class=\"chat-info\">\n        <div class=\"chat-list-header\">\n          <span class=\"chat-name\">${item.name}</span>\n          <div class=\"chat-time-container\">\n            <span class=\"chat-time\">${item.lastTime}</span>\n            ${item.unreadCount > 0\n            ? `<div class=\"unread-badge show\">${this.formatUnreadCount(item.unreadCount)}</div>`\n            : ''}\n          </div>\n        </div>\n        <div class=\"chat-preview\">${item.lastMessage}</div>\n      </div>\n    `;\n        return chatItem;\n    }\n    /**\n     * 聊天项点击处理\n     */\n    onChatItemClick(chatId) {\n        console.log(`🖱️ 聊天列表项被点击: ${chatId}`);\n        // 标记该聊天为已读\n        this.unreadMessageManager.markAsRead(chatId, this.currentChatDataMap);\n        // 触发聊天切换事件（需要在主类中处理）\n        const event = new CustomEvent('chatSwitchRequest', {\n            detail: { chatId },\n        });\n        document.dispatchEvent(event);\n    }\n    /**\n     * 显示新建聊天模态框\n     */\n    showNewChatModal() {\n        // 重置模态框数据\n        this.newChatModalData = {\n            type: 'single',\n            selectedContacts: new Set(),\n        };\n        // 创建模态框\n        const modal = this.createNewChatModal();\n        // 将模态框添加到interface-container内，而不是document.body\n        const interfaceContainer = document.querySelector('.interface-container');\n        if (interfaceContainer) {\n            interfaceContainer.appendChild(modal);\n        }\n        else {\n            document.body.appendChild(modal);\n        }\n        // 显示模态框\n        setTimeout(() => {\n            modal.classList.add('show');\n        }, 10);\n    }\n    /**\n     * 创建新建聊天模态框\n     */\n    createNewChatModal() {\n        const overlay = document.createElement('div');\n        overlay.className = 'modal-overlay new-chat-modal';\n        overlay.id = 'newChatModal';\n        const contacts = this.contactManager.getAllContacts();\n        const contactsHtml = contacts\n            .map(contact => `\n      <div class=\"contact-item\" data-contact-id=\"${contact.id}\">\n        <img src=\"${contact.avatar}\" class=\"contact-avatar\" alt=\"${contact.name}\">\n        <span class=\"contact-name\">${contact.name}</span>\n        <div class=\"contact-actions\">\n          <button class=\"edit-btn\" data-action=\"edit\" data-contact-id=\"${contact.id}\" title=\"编辑联系人\">\n            <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\">\n              <path fill=\"currentColor\" d=\"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z\" />\n            </svg>\n          </button>\n          <button class=\"delete-btn\" data-action=\"delete\" data-contact-id=\"${contact.id}\" title=\"删除联系人\">\n            <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\">\n              <path fill=\"currentColor\" d=\"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z\" />\n            </svg>\n          </button>\n        </div>\n        <div class=\"checkbox\"></div>\n      </div>\n    `)\n            .join('');\n        // 添加\"添加朋友\"选项\n        const addFriendHtml = `\n      <div class=\"contact-item add-friend-item\" data-action=\"add-friend\">\n        <div class=\"add-friend-icon\">+</div>\n        <span class=\"contact-name\">添加朋友</span>\n      </div>\n    `;\n        // 如果没有联系人，显示空状态提示\n        const emptyStateHtml = contacts.length === 0\n            ? `\n      <div class=\"empty-contacts-hint\">\n        <div class=\"empty-hint\">点击上方\"添加朋友\"开始添加</div>\n      </div>\n    `\n            : '';\n        overlay.innerHTML = `\n      <div class=\"modal-container\">\n        <div class=\"modal-title\">新建聊天</div>\n        <div class=\"chat-type-options\">\n          <div class=\"chat-type-option selected\" data-type=\"single\">单人聊天</div>\n          <div class=\"chat-type-option\" data-type=\"group\">群聊</div>\n        </div>\n        <div class=\"contact-list\">\n          ${addFriendHtml}\n          ${contactsHtml}\n          ${emptyStateHtml}\n        </div>\n        <div class=\"modal-buttons\">\n          <button class=\"modal-btn cancel-btn\">取消</button>\n          <button class=\"modal-btn confirm-btn\">确认</button>\n        </div>\n      </div>\n    `;\n        // 绑定事件\n        this.bindNewChatModalEvents(overlay);\n        return overlay;\n    }\n    /**\n     * 绑定新建聊天模态框事件\n     */\n    bindNewChatModalEvents(modal) {\n        // 聊天类型选择\n        const typeOptions = modal.querySelectorAll('.chat-type-option');\n        typeOptions.forEach(option => {\n            option.addEventListener('click', () => {\n                typeOptions.forEach(opt => opt.classList.remove('selected'));\n                option.classList.add('selected');\n                this.newChatModalData.type = option.getAttribute('data-type');\n                // 更新界面状态\n                if (this.newChatModalData.type === 'group') {\n                    modal.classList.add('group-mode');\n                }\n                else {\n                    modal.classList.remove('group-mode');\n                    this.newChatModalData.selectedContacts.clear();\n                    modal.querySelectorAll('.contact-item').forEach(item => {\n                        item.classList.remove('selected');\n                    });\n                }\n                this.soundManager.playSound('click');\n            });\n        });\n        // 联系人选择\n        const contactItems = modal.querySelectorAll('.contact-item');\n        contactItems.forEach(item => {\n            item.addEventListener('click', e => {\n                const target = e.target;\n                const action = item.getAttribute('data-action');\n                const contactId = item.getAttribute('data-contact-id');\n                // 检查是否点击了操作按钮\n                const editBtn = target.closest('.edit-btn');\n                const deleteBtn = target.closest('.delete-btn');\n                if (editBtn) {\n                    e.stopPropagation();\n                    const editContactId = editBtn.getAttribute('data-contact-id');\n                    if (editContactId) {\n                        this.soundManager.playSound('click');\n                        this.handleEditContact(editContactId);\n                    }\n                    return;\n                }\n                if (deleteBtn) {\n                    e.stopPropagation();\n                    const deleteContactId = deleteBtn.getAttribute('data-contact-id');\n                    if (deleteContactId) {\n                        this.soundManager.playSound('click');\n                        this.handleDeleteContact(deleteContactId);\n                    }\n                    return;\n                }\n                // 处理\"添加朋友\"点击\n                if (action === 'add-friend') {\n                    this.soundManager.playSound('click');\n                    this.hideNewChatModal();\n                    this.showAddFriendModal();\n                    return;\n                }\n                // 处理普通联系人选择\n                if (!contactId)\n                    return;\n                if (this.newChatModalData.type === 'single') {\n                    // 单聊模式：只能选择一个\n                    contactItems.forEach(ci => ci.classList.remove('selected'));\n                    item.classList.add('selected');\n                    this.newChatModalData.selectedContacts.clear();\n                    this.newChatModalData.selectedContacts.add(contactId);\n                }\n                else {\n                    // 群聊模式：可以选择多个\n                    item.classList.toggle('selected');\n                    if (item.classList.contains('selected')) {\n                        this.newChatModalData.selectedContacts.add(contactId);\n                    }\n                    else {\n                        this.newChatModalData.selectedContacts.delete(contactId);\n                    }\n                }\n                this.soundManager.playSound('click');\n            });\n        });\n        // 取消按钮\n        const cancelBtn = modal.querySelector('.cancel-btn');\n        if (cancelBtn) {\n            cancelBtn.addEventListener('click', () => {\n                this.soundManager.playSound('click');\n                this.hideNewChatModal();\n            });\n        }\n        // 确认按钮\n        const confirmBtn = modal.querySelector('.confirm-btn');\n        if (confirmBtn) {\n            confirmBtn.addEventListener('click', () => {\n                this.soundManager.playSound('click');\n                this.handleCreateNewChat();\n            });\n        }\n        // 点击遮罩关闭\n        modal.addEventListener('click', e => {\n            if (e.target === modal) {\n                this.hideNewChatModal();\n            }\n        });\n    }\n    /**\n     * 隐藏新建聊天模态框\n     */\n    hideNewChatModal() {\n        const modal = document.getElementById('newChatModal');\n        if (modal) {\n            modal.classList.remove('show');\n            setTimeout(() => {\n                modal.remove();\n            }, 300);\n        }\n    }\n    /**\n     * 显示添加朋友模态框\n     */\n    showAddFriendModal() {\n        const modal = this.createAddFriendModal();\n        // 将模态框添加到interface-container内，而不是document.body\n        const interfaceContainer = document.querySelector('.interface-container');\n        if (interfaceContainer) {\n            interfaceContainer.appendChild(modal);\n        }\n        else {\n            document.body.appendChild(modal);\n        }\n        // 显示模态框\n        setTimeout(() => {\n            modal.classList.add('show');\n        }, 10);\n    }\n    /**\n     * 创建添加朋友模态框\n     */\n    createAddFriendModal() {\n        const overlay = document.createElement('div');\n        overlay.className = 'modal-overlay add-friend-modal';\n        overlay.id = 'addFriendModal';\n        overlay.innerHTML = `\n      <div class=\"modal-container\">\n        <div class=\"modal-title\">添加朋友</div>\n        <form class=\"add-friend-form\">\n          <div class=\"form-group\">\n            <label for=\"friendName\">角色名称</label>\n            <input type=\"text\" id=\"friendName\" placeholder=\"请输入角色真名\" maxlength=\"20\" required>\n            <div class=\"error-message\" id=\"nameError\"></div>\n          </div>\n          \n          <div class=\"form-group\">\n            <label>头像设置</label>\n            <div class=\"avatar-options\">\n              <div class=\"avatar-option\" data-type=\"url\">\n                <input type=\"radio\" name=\"avatarType\" value=\"url\" id=\"avatarUrl\" checked>\n                <label for=\"avatarUrl\">图片链接</label>\n              </div>\n              <div class=\"avatar-option\" data-type=\"upload\">\n                <input type=\"radio\" name=\"avatarType\" value=\"upload\" id=\"avatarUpload\">\n                <label for=\"avatarUpload\">本地上传</label>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"form-group\" id=\"urlGroup\">\n            <input type=\"url\" id=\"avatarUrlInput\" placeholder=\"请输入图片URL\">\n            <div class=\"error-message\" id=\"urlError\"></div>\n          </div>\n\n          <div class=\"form-group\" id=\"uploadGroup\" style=\"display: none;\">\n            <button type=\"button\" class=\"file-upload-btn\" id=\"fileUploadBtn\">\n              <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\">\n                <path fill=\"currentColor\" d=\"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z\" />\n              </svg>\n              选择本地文件\n            </button>\n            <input type=\"file\" id=\"avatarFileInput\" accept=\"image/*\" style=\"display: none;\">\n            <div class=\"error-message\" id=\"fileError\"></div>\n          </div>\n\n          <div class=\"avatar-preview\">\n            <img id=\"avatarPreview\" src=\"\" alt=\"头像预览\" style=\"display: none;\">\n          </div>\n        </form>\n        \n        <div class=\"modal-buttons\">\n          <button type=\"button\" class=\"modal-btn cancel-btn\">取消</button>\n          <button type=\"button\" class=\"modal-btn confirm-btn\">添加</button>\n        </div>\n      </div>\n    `;\n        // 绑定事件\n        this.bindAddFriendModalEvents(overlay);\n        return overlay;\n    }\n    /**\n     * 绑定添加朋友模态框事件\n     */\n    bindAddFriendModalEvents(modal) {\n        const nameInput = modal.querySelector('#friendName');\n        const urlRadio = modal.querySelector('#avatarUrl');\n        const uploadRadio = modal.querySelector('#avatarUpload');\n        const urlInput = modal.querySelector('#avatarUrlInput');\n        const fileInput = modal.querySelector('#avatarFileInput');\n        const fileUploadBtn = modal.querySelector('#fileUploadBtn');\n        const urlGroup = modal.querySelector('#urlGroup');\n        const uploadGroup = modal.querySelector('#uploadGroup');\n        const avatarPreview = modal.querySelector('#avatarPreview');\n        const cancelBtn = modal.querySelector('.cancel-btn');\n        const confirmBtn = modal.querySelector('.confirm-btn');\n        // 头像类型切换\n        urlRadio.addEventListener('change', () => {\n            if (urlRadio.checked) {\n                urlGroup.style.display = 'block';\n                uploadGroup.style.display = 'none';\n            }\n        });\n        uploadRadio.addEventListener('change', () => {\n            if (uploadRadio.checked) {\n                urlGroup.style.display = 'none';\n                uploadGroup.style.display = 'block';\n            }\n        });\n        // URL输入验证\n        urlInput.addEventListener('blur', async () => {\n            const url = urlInput.value.trim();\n            if (url) {\n                const isValid = await this.contactManager.validateAvatarUrl(url);\n                if (isValid) {\n                    avatarPreview.src = url;\n                    avatarPreview.style.display = 'block';\n                    this.clearError('urlError');\n                }\n                else {\n                    this.showError('urlError', '无效的图片URL');\n                    avatarPreview.style.display = 'none';\n                }\n            }\n        });\n        // 文件上传按钮点击\n        fileUploadBtn.addEventListener('click', () => {\n            fileInput.click();\n        });\n        // 文件上传处理\n        fileInput.addEventListener('change', async (e) => {\n            const file = e.target.files?.[0];\n            if (file) {\n                try {\n                    const dataUrl = await this.contactManager.processAvatarFile(file);\n                    avatarPreview.src = dataUrl;\n                    avatarPreview.style.display = 'block';\n                    this.clearError('fileError');\n                    // 更新按钮文本显示选中的文件名\n                    fileUploadBtn.innerHTML = `\n            <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\">\n              <path fill=\"currentColor\" d=\"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z\" />\n            </svg>\n            ${file.name.length > 15 ? file.name.substring(0, 15) + '...' : file.name}\n          `;\n                }\n                catch (error) {\n                    this.showError('fileError', error.message);\n                    avatarPreview.style.display = 'none';\n                }\n            }\n        });\n        // 名称验证\n        nameInput.addEventListener('blur', () => {\n            const validation = this.contactManager.validateContactName(nameInput.value);\n            if (!validation.valid) {\n                this.showError('nameError', validation.error);\n            }\n            else {\n                this.clearError('nameError');\n            }\n        });\n        // 取消按钮\n        cancelBtn.addEventListener('click', () => {\n            this.soundManager.playSound('click');\n            this.hideAddFriendModal();\n        });\n        // 确认按钮\n        confirmBtn.addEventListener('click', () => {\n            this.soundManager.playSound('click');\n            this.handleAddFriend(modal);\n        });\n        // 点击遮罩关闭\n        modal.addEventListener('click', e => {\n            if (e.target === modal) {\n                this.hideAddFriendModal();\n            }\n        });\n    }\n    /**\n     * 隐藏添加朋友模态框\n     */\n    hideAddFriendModal() {\n        const modal = document.getElementById('addFriendModal');\n        if (modal) {\n            modal.classList.remove('show');\n            setTimeout(() => {\n                modal.remove();\n            }, 300);\n        }\n    }\n    /**\n     * 处理添加朋友\n     */\n    async handleAddFriend(modal) {\n        const nameInput = modal.querySelector('#friendName');\n        const urlRadio = modal.querySelector('#avatarUrl');\n        const urlInput = modal.querySelector('#avatarUrlInput');\n        const fileInput = modal.querySelector('#avatarFileInput');\n        const avatarPreview = modal.querySelector('#avatarPreview');\n        // 验证名称\n        const nameValidation = this.contactManager.validateContactName(nameInput.value);\n        if (!nameValidation.valid) {\n            this.showError('nameError', nameValidation.error);\n            return;\n        }\n        // 获取头像\n        let avatar = '';\n        if (urlRadio.checked) {\n            const url = urlInput.value.trim();\n            if (url) {\n                const isValid = await this.contactManager.validateAvatarUrl(url);\n                if (!isValid) {\n                    this.showError('urlError', '无效的图片URL');\n                    return;\n                }\n                avatar = url;\n            }\n        }\n        else {\n            const file = fileInput.files?.[0];\n            if (file) {\n                try {\n                    avatar = await this.contactManager.processAvatarFile(file);\n                }\n                catch (error) {\n                    this.showError('fileError', error.message);\n                    return;\n                }\n            }\n        }\n        // 如果没有设置头像，使用默认头像\n        if (!avatar) {\n            avatar = this.contactManager.getDefaultAvatar(nameInput.value.trim());\n        }\n        // 添加联系人\n        try {\n            const newContact = this.contactManager.addContact({\n                name: nameInput.value.trim(),\n                avatar,\n                type: 'character',\n                isOnline: true,\n                tags: ['朋友'],\n            });\n            this.showToast(`成功添加朋友：${newContact.name}`, 'info');\n            this.hideAddFriendModal();\n            // 重新显示新建聊天模态框，现在包含新添加的联系人\n            setTimeout(() => {\n                this.showNewChatModal();\n            }, 300);\n        }\n        catch (error) {\n            this.showToast('添加朋友失败', 'error');\n        }\n    }\n    /**\n     * 显示错误信息\n     */\n    showError(elementId, message) {\n        const errorElement = document.getElementById(elementId);\n        if (errorElement) {\n            errorElement.textContent = message;\n            errorElement.style.display = 'block';\n        }\n    }\n    /**\n     * 清除错误信息\n     */\n    clearError(elementId) {\n        const errorElement = document.getElementById(elementId);\n        if (errorElement) {\n            errorElement.textContent = '';\n            errorElement.style.display = 'none';\n        }\n    }\n    /**\n     * 处理创建新聊天\n     */\n    handleCreateNewChat() {\n        if (this.newChatModalData.selectedContacts.size === 0) {\n            this.showToast('请选择联系人', 'warning');\n            return;\n        }\n        const selectedContactIds = Array.from(this.newChatModalData.selectedContacts);\n        if (this.newChatModalData.type === 'group') {\n            // 群聊模式：使用群聊管理器创建群聊\n            if (selectedContactIds.length < 2) {\n                this.showToast('群聊至少需要选择2个联系人', 'warning');\n                return;\n            }\n            this.hideNewChatModal();\n            if (this.groupChatManager) {\n                this.groupChatManager.createGroupChat(selectedContactIds);\n            }\n            else {\n                this.showToast('群聊功能不可用：未初始化群聊管理器', 'error');\n            }\n        }\n        else {\n            // 单聊模式：触发原有的创建新聊天事件\n            const event = new CustomEvent('createNewChat', {\n                detail: {\n                    type: this.newChatModalData.type,\n                    contactIds: selectedContactIds,\n                },\n            });\n            document.dispatchEvent(event);\n            this.hideNewChatModal();\n        }\n    }\n    /**\n     * 获取群聊数据 - 不再从localStorage读取，返回空数组\n     */\n    getGroupChatData() {\n        // 群聊数据统一从chatDataMap中读取，不再使用localStorage\n        console.log('🔍 [DEBUG] getGroupChatData - 不再从localStorage读取群聊数据');\n        return [];\n    }\n    /**\n     * 工具方法\n     */\n    getLastMessage(messages) {\n        return messages.length > 0 ? messages[messages.length - 1] : null;\n    }\n    /**\n     * 从聊天名称中提取显示名称\n     * @param chatName 原始聊天名称\n     * @returns 提取后的显示名称\n     */\n    extractDisplayName(chatName) {\n        // 处理 \"和XXX的聊天\" 格式，提取角色名\n        const singleChatMatch = chatName.match(/^和(.+)的聊天$/);\n        if (singleChatMatch) {\n            return singleChatMatch[1];\n        }\n        // 处理群聊格式，如 \"XXX、YYY的群聊\"\n        const groupChatMatch = chatName.match(/^(.+)的群聊$/);\n        if (groupChatMatch) {\n            return groupChatMatch[1];\n        }\n        // 处理新的群聊格式，直接返回群名（因为现在chatName就是群名）\n        // 如果chatName已经是纯群名，直接返回\n        return chatName;\n    }\n    /**\n     * 判断聊天名称是否为“有效单聊/旧式群聊”命名\n     * - 单聊：和xxx的聊天\n     * - 旧式群聊：xxx的群聊（新结构由 isGroupChat 覆盖）\n     * - 显式排除：动态\n     */\n    isEligibleChatName(chatName) {\n        if (!chatName)\n            return false;\n        const name = chatName.trim();\n        if (/^\\[?动态\\]?$/.test(name))\n            return false; // 显式排除“动态”\n        return /^和.+的聊天$/.test(name) || /的群聊$/.test(name);\n    }\n    formatMessagePreview(message) {\n        let preview = '';\n        // 根据消息类型生成预览内容\n        switch (message.messageType) {\n            case 'text':\n                preview = message.content;\n                break;\n            case 'image':\n                preview = '[图片]';\n                break;\n            case 'voice':\n                preview = '[语音]';\n                break;\n            case 'sticker':\n                preview = '[表情包]';\n                break;\n            case 'location':\n                preview = '[位置]';\n                break;\n            case 'transfer':\n                preview = '[转账]';\n                break;\n            default:\n                preview = message.content;\n        }\n        // 如果是群聊消息，添加发送者名称前缀\n        if (message.type === 'G') {\n            const senderName = message.sender === '{{user}}' ? '我' : message.senderDisplayName || message.sender;\n            preview = `${senderName}: ${preview}`;\n        }\n        return preview.length > 30 ? preview.substring(0, 30) + '...' : preview;\n    }\n    formatAbsoluteTime(timestamp) {\n        const now = new Date();\n        const messageTime = new Date();\n        if (timestamp.includes(':')) {\n            const [hours, minutes] = timestamp.split(':');\n            messageTime.setHours(parseInt(hours), parseInt(minutes), 0, 0);\n        }\n        else {\n            return timestamp;\n        }\n        const diffMs = now.getTime() - messageTime.getTime();\n        const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\n        // 处理负数天数（消息时间比当前时间晚的情况）\n        if (diffDays < 0) {\n            return timestamp; // 直接显示时间戳\n        }\n        else if (diffDays === 0) {\n            return timestamp;\n        }\n        else if (diffDays === 1) {\n            return '昨天';\n        }\n        else if (diffDays < 7) {\n            return `${diffDays}天前`;\n        }\n        else {\n            return messageTime.toLocaleDateString('zh-CN', { month: 'short', day: 'numeric' });\n        }\n    }\n    getLastMessageTimestamp(chatId, chatDataMap) {\n        const chatData = chatDataMap.get(chatId);\n        if (!chatData || chatData.messages.length === 0)\n            return 0;\n        const lastMessage = chatData.messages[chatData.messages.length - 1];\n        const now = new Date();\n        if (lastMessage.timestamp.includes(':')) {\n            const [hours, minutes] = lastMessage.timestamp.split(':');\n            const messageTime = new Date();\n            messageTime.setHours(parseInt(hours), parseInt(minutes), 0, 0);\n            return messageTime.getTime();\n        }\n        return 0;\n    }\n    getDefaultAvatar(name) {\n        // 统一使用默认头像\n        return 'https://files.catbox.moe/u8ccy5.jpg';\n    }\n    /**\n     * 初始化状态栏\n     */\n    initializeStatusBar() {\n        const container = document.getElementById('chatListStatusBarContainer');\n        if (container) {\n            this.statusBar = _core_StatusBar__WEBPACK_IMPORTED_MODULE_1__.StatusBar.create(container);\n        }\n    }\n    /**\n     * 销毁状态栏\n     */\n    destroyStatusBar() {\n        if (this.statusBar) {\n            this.statusBar.destroy();\n            this.statusBar = null;\n        }\n    }\n    showToast(message, type = 'info') {\n        // 使用toastr显示提示信息\n        if (typeof toastr !== 'undefined') {\n            toastr[type](message);\n        }\n        else {\n            console.log(`[${type.toUpperCase()}] ${message}`);\n        }\n    }\n    /**\n     * 切换到\"我的\"页面\n     */\n    switchToProfile() {\n        console.log('🔄 从聊天列表切换到我的页面');\n        // 触发页面切换事件\n        const event = new CustomEvent('pageSwitch', {\n            detail: {\n                from: 'chatList',\n                to: 'profile',\n            },\n        });\n        document.dispatchEvent(event);\n    }\n    /**\n     * 切换到\"动态\"页面\n     */\n    switchToFeed() {\n        console.log('🔄 从聊天列表切换到动态页面');\n        const event = new CustomEvent('pageSwitch', {\n            detail: {\n                from: 'chatList',\n                to: 'feed',\n            },\n        });\n        document.dispatchEvent(event);\n    }\n    /**\n     * 获取联系人管理器\n     */\n    getContactManager() {\n        return this.contactManager;\n    }\n    /**\n     * 处理编辑联系人\n     */\n    handleEditContact(contactId) {\n        const contact = this.contactManager.getContactById(contactId);\n        if (contact) {\n            this.hideNewChatModal();\n            this.showEditContactModal(contact);\n        }\n    }\n    /**\n     * 处理删除联系人\n     */\n    handleDeleteContact(contactId) {\n        const contact = this.contactManager.getContactById(contactId);\n        if (contact) {\n            this.hideNewChatModal();\n            this.showDeleteConfirmModal(contact);\n        }\n    }\n    /**\n     * 显示编辑联系人模态框\n     */\n    showEditContactModal(contact) {\n        const modal = this.createEditContactModal(contact);\n        const interfaceContainer = document.querySelector('.interface-container');\n        if (interfaceContainer) {\n            interfaceContainer.appendChild(modal);\n        }\n        else {\n            document.body.appendChild(modal);\n        }\n        // 显示模态框\n        setTimeout(() => {\n            modal.classList.add('show');\n        }, 10);\n    }\n    /**\n     * 创建编辑联系人模态框\n     */\n    createEditContactModal(contact) {\n        const overlay = document.createElement('div');\n        overlay.className = 'modal-overlay edit-contact-modal';\n        overlay.id = 'editContactModal';\n        overlay.innerHTML = `\n      <div class=\"modal-container\">\n        <div class=\"modal-title\">编辑联系人</div>\n        <form class=\"edit-contact-form\">\n          <div class=\"form-group\">\n            <label for=\"editContactName\">角色名称</label>\n            <input type=\"text\" id=\"editContactName\" value=\"${contact.name}\" placeholder=\"请输入角色真名\" maxlength=\"20\" required>\n            <div class=\"error-message\" id=\"editNameError\"></div>\n          </div>\n          \n          <div class=\"form-group\">\n            <label>头像设置</label>\n            <div class=\"avatar-options\">\n              <div class=\"avatar-option\" data-type=\"url\">\n                <input type=\"radio\" name=\"editAvatarType\" value=\"url\" id=\"editAvatarUrl\" ${contact.avatar.startsWith('http') ? 'checked' : ''}>\n                <label for=\"editAvatarUrl\">图片链接</label>\n              </div>\n              <div class=\"avatar-option\" data-type=\"upload\">\n                <input type=\"radio\" name=\"editAvatarType\" value=\"upload\" id=\"editAvatarUpload\" ${contact.avatar.startsWith('data:') ? 'checked' : ''}>\n                <label for=\"editAvatarUpload\">本地上传</label>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"form-group\" id=\"editUrlGroup\" ${contact.avatar.startsWith('data:') ? 'style=\"display: none;\"' : ''}>\n            <input type=\"url\" id=\"editAvatarUrlInput\" value=\"${contact.avatar.startsWith('http') ? contact.avatar : ''}\" placeholder=\"请输入图片URL\">\n            <div class=\"error-message\" id=\"editUrlError\"></div>\n          </div>\n\n          <div class=\"form-group\" id=\"editUploadGroup\" ${contact.avatar.startsWith('http') ? 'style=\"display: none;\"' : ''}>\n            <button type=\"button\" class=\"file-upload-btn\" id=\"editFileUploadBtn\">\n              <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\">\n                <path fill=\"currentColor\" d=\"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z\" />\n              </svg>\n              选择本地文件\n            </button>\n            <input type=\"file\" id=\"editAvatarFileInput\" accept=\"image/*\" style=\"display: none;\">\n            <div class=\"error-message\" id=\"editFileError\"></div>\n          </div>\n\n          <div class=\"avatar-preview\">\n            <img id=\"editAvatarPreview\" src=\"${contact.avatar}\" alt=\"头像预览\">\n          </div>\n        </form>\n        \n        <div class=\"modal-buttons\">\n          <button type=\"button\" class=\"modal-btn cancel-btn\">取消</button>\n          <button type=\"button\" class=\"modal-btn confirm-btn\">保存</button>\n        </div>\n      </div>\n    `;\n        // 绑定事件\n        this.bindEditContactModalEvents(overlay, contact);\n        return overlay;\n    }\n    /**\n     * 绑定编辑联系人模态框事件\n     */\n    bindEditContactModalEvents(modal, contact) {\n        const nameInput = modal.querySelector('#editContactName');\n        const urlRadio = modal.querySelector('#editAvatarUrl');\n        const uploadRadio = modal.querySelector('#editAvatarUpload');\n        const urlInput = modal.querySelector('#editAvatarUrlInput');\n        const fileInput = modal.querySelector('#editAvatarFileInput');\n        const fileUploadBtn = modal.querySelector('#editFileUploadBtn');\n        const urlGroup = modal.querySelector('#editUrlGroup');\n        const uploadGroup = modal.querySelector('#editUploadGroup');\n        const avatarPreview = modal.querySelector('#editAvatarPreview');\n        const cancelBtn = modal.querySelector('.cancel-btn');\n        const confirmBtn = modal.querySelector('.confirm-btn');\n        // 头像类型切换\n        urlRadio.addEventListener('change', () => {\n            if (urlRadio.checked) {\n                urlGroup.style.display = 'block';\n                uploadGroup.style.display = 'none';\n            }\n        });\n        uploadRadio.addEventListener('change', () => {\n            if (uploadRadio.checked) {\n                urlGroup.style.display = 'none';\n                uploadGroup.style.display = 'block';\n            }\n        });\n        // URL输入验证\n        urlInput.addEventListener('blur', async () => {\n            const url = urlInput.value.trim();\n            if (url) {\n                const isValid = await this.contactManager.validateAvatarUrl(url);\n                if (isValid) {\n                    avatarPreview.src = url;\n                    this.clearError('editUrlError');\n                }\n                else {\n                    this.showError('editUrlError', '无效的图片URL');\n                }\n            }\n        });\n        // 文件上传按钮点击\n        fileUploadBtn.addEventListener('click', () => {\n            fileInput.click();\n        });\n        // 文件上传处理\n        fileInput.addEventListener('change', async (e) => {\n            const file = e.target.files?.[0];\n            if (file) {\n                try {\n                    const dataUrl = await this.contactManager.processAvatarFile(file);\n                    avatarPreview.src = dataUrl;\n                    this.clearError('editFileError');\n                    // 更新按钮文本显示选中的文件名\n                    fileUploadBtn.innerHTML = `\n            <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\">\n              <path fill=\"currentColor\" d=\"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z\" />\n            </svg>\n            ${file.name.length > 15 ? file.name.substring(0, 15) + '...' : file.name}\n          `;\n                }\n                catch (error) {\n                    this.showError('editFileError', error.message);\n                }\n            }\n        });\n        // 名称验证\n        nameInput.addEventListener('blur', () => {\n            const newName = nameInput.value.trim();\n            if (newName !== contact.name) {\n                const validation = this.contactManager.validateContactName(newName);\n                if (!validation.valid) {\n                    this.showError('editNameError', validation.error);\n                }\n                else {\n                    this.clearError('editNameError');\n                }\n            }\n            else {\n                this.clearError('editNameError');\n            }\n        });\n        // 取消按钮\n        cancelBtn.addEventListener('click', () => {\n            this.soundManager.playSound('click');\n            this.hideEditContactModal();\n        });\n        // 确认按钮\n        confirmBtn.addEventListener('click', () => {\n            this.soundManager.playSound('click');\n            this.handleSaveEditContact(modal, contact);\n        });\n        // 点击遮罩关闭\n        modal.addEventListener('click', e => {\n            if (e.target === modal) {\n                this.hideEditContactModal();\n            }\n        });\n    }\n    /**\n     * 处理保存编辑联系人\n     */\n    async handleSaveEditContact(modal, originalContact) {\n        const nameInput = modal.querySelector('#editContactName');\n        const urlRadio = modal.querySelector('#editAvatarUrl');\n        const urlInput = modal.querySelector('#editAvatarUrlInput');\n        const fileInput = modal.querySelector('#editAvatarFileInput');\n        const avatarPreview = modal.querySelector('#editAvatarPreview');\n        // 验证名称\n        const newName = nameInput.value.trim();\n        if (newName !== originalContact.name) {\n            const nameValidation = this.contactManager.validateContactName(newName);\n            if (!nameValidation.valid) {\n                this.showError('editNameError', nameValidation.error);\n                return;\n            }\n        }\n        // 获取头像\n        let avatar = originalContact.avatar;\n        if (urlRadio.checked) {\n            const url = urlInput.value.trim();\n            if (url && url !== originalContact.avatar) {\n                const isValid = await this.contactManager.validateAvatarUrl(url);\n                if (!isValid) {\n                    this.showError('editUrlError', '无效的图片URL');\n                    return;\n                }\n                avatar = url;\n            }\n        }\n        else {\n            const file = fileInput.files?.[0];\n            if (file) {\n                try {\n                    avatar = await this.contactManager.processAvatarFile(file);\n                }\n                catch (error) {\n                    this.showError('editFileError', error.message);\n                    return;\n                }\n            }\n            else if (avatarPreview.src.startsWith('data:')) {\n                avatar = avatarPreview.src;\n            }\n        }\n        // 更新联系人\n        try {\n            const success = this.contactManager.updateContact(originalContact.id, {\n                name: newName,\n                avatar: avatar,\n            });\n            if (success) {\n                // 同步所有相关的头像显示\n                this.syncAvatarAcrossInterface(originalContact.name, newName, avatar);\n                // 通知其他组件联系人已更新\n                this.notifyContactUpdated(originalContact.name, newName, avatar);\n                this.showToast(`联系人 \"${newName}\" 已更新`, 'info');\n                this.hideEditContactModal();\n                // 重新显示新建聊天模态框并刷新联系人列表\n                setTimeout(() => {\n                    this.showNewChatModal();\n                    // 通知需要刷新聊天列表\n                    this.notifyRefreshChatList();\n                }, 300);\n            }\n            else {\n                this.showToast('更新联系人失败', 'error');\n            }\n        }\n        catch (error) {\n            this.showToast('更新联系人失败', 'error');\n        }\n    }\n    /**\n     * 隐藏编辑联系人模态框\n     */\n    hideEditContactModal() {\n        const modal = document.getElementById('editContactModal');\n        if (modal) {\n            modal.classList.remove('show');\n            setTimeout(() => {\n                modal.remove();\n            }, 300);\n        }\n    }\n    /**\n     * 显示删除确认模态框\n     */\n    showDeleteConfirmModal(contact) {\n        const modal = this.createDeleteConfirmModal(contact);\n        const interfaceContainer = document.querySelector('.interface-container');\n        if (interfaceContainer) {\n            interfaceContainer.appendChild(modal);\n        }\n        else {\n            document.body.appendChild(modal);\n        }\n        // 显示模态框\n        setTimeout(() => {\n            modal.classList.add('show');\n        }, 10);\n    }\n    /**\n     * 创建删除确认模态框\n     */\n    createDeleteConfirmModal(contact) {\n        const overlay = document.createElement('div');\n        overlay.className = 'modal-overlay delete-confirm-modal';\n        overlay.id = 'deleteConfirmModal';\n        overlay.innerHTML = `\n      <div class=\"modal-container\">\n        <div class=\"modal-title\">删除联系人</div>\n        <div class=\"delete-confirm-content\">\n          <div class=\"warning-icon\">⚠️</div>\n          <div class=\"delete-message\">\n            <p>确定要删除联系人 <strong>\"${contact.name}\"</strong> 吗？</p>\n            <p class=\"delete-note\">此操作不可撤销，但不会删除与该联系人的聊天记录。</p>\n          </div>\n          <div class=\"contact-preview\">\n            <img src=\"${contact.avatar}\" class=\"preview-avatar\" alt=\"${contact.name}\">\n            <span class=\"preview-name\">${contact.name}</span>\n          </div>\n        </div>\n        \n        <div class=\"modal-buttons\">\n          <button type=\"button\" class=\"modal-btn cancel-btn\">取消</button>\n          <button type=\"button\" class=\"modal-btn delete-btn\">删除</button>\n        </div>\n      </div>\n    `;\n        // 绑定事件\n        this.bindDeleteConfirmModalEvents(overlay, contact);\n        return overlay;\n    }\n    /**\n     * 绑定删除确认模态框事件\n     */\n    bindDeleteConfirmModalEvents(modal, contact) {\n        const cancelBtn = modal.querySelector('.cancel-btn');\n        const deleteBtn = modal.querySelector('.delete-btn');\n        // 取消按钮\n        cancelBtn.addEventListener('click', () => {\n            this.soundManager.playSound('click');\n            this.hideDeleteConfirmModal();\n        });\n        // 删除按钮\n        deleteBtn.addEventListener('click', () => {\n            this.soundManager.playSound('click');\n            this.handleConfirmDeleteContact(contact);\n        });\n        // 点击遮罩关闭\n        modal.addEventListener('click', e => {\n            if (e.target === modal) {\n                this.hideDeleteConfirmModal();\n            }\n        });\n    }\n    /**\n     * 处理确认删除联系人\n     */\n    handleConfirmDeleteContact(contact) {\n        try {\n            const success = this.contactManager.deleteContact(contact.id);\n            if (success) {\n                this.showToast(`联系人 \"${contact.name}\" 已删除`, 'info');\n                this.hideDeleteConfirmModal();\n                // 重新显示新建聊天模态框并刷新联系人列表\n                setTimeout(() => {\n                    this.showNewChatModal();\n                }, 300);\n            }\n            else {\n                this.showToast('删除联系人失败', 'error');\n            }\n        }\n        catch (error) {\n            this.showToast('删除联系人失败', 'error');\n        }\n    }\n    /**\n     * 隐藏删除确认模态框\n     */\n    hideDeleteConfirmModal() {\n        const modal = document.getElementById('deleteConfirmModal');\n        if (modal) {\n            modal.classList.remove('show');\n            setTimeout(() => {\n                modal.remove();\n            }, 300);\n        }\n    }\n    /**\n     * 同步头像到所有相关界面\n     * @param oldName 原联系人名称\n     * @param newName 新联系人名称\n     * @param newAvatar 新头像URL\n     */\n    syncAvatarAcrossInterface(oldName, newName, newAvatar) {\n        try {\n            // 1. 同步聊天列表中的头像 (chat-avatar)\n            this.syncChatListAvatars(oldName, newName, newAvatar);\n            // 2. 同步聊天界面中的消息头像 (avatar, avatar-hover)\n            this.syncChatMessageAvatars(oldName, newName, newAvatar);\n            // 注意：不同步header头像，保持默认头像\n            console.log(`✅ 头像同步完成: ${oldName} -> ${newName}`);\n        }\n        catch (error) {\n            console.error('❌ 头像同步失败:', error);\n        }\n    }\n    /**\n     * 只更新角色头像，不影响用户头像和header头像\n     * @param contactName 角色名称\n     * @param newAvatar 新头像URL\n     */\n    updateCharacterAvatarOnly(contactName, newAvatar) {\n        try {\n            // 1. 更新聊天列表中与该角色相关的头像\n            const chatListItems = document.querySelectorAll('.chat-list-item');\n            chatListItems.forEach(item => {\n                const chatName = item.querySelector('.chat-name')?.textContent?.trim();\n                if (chatName === contactName || chatName === `和${contactName}的聊天`) {\n                    const avatarImg = item.querySelector('.chat-avatar');\n                    if (avatarImg) {\n                        avatarImg.src = newAvatar;\n                        console.log(`🔄 更新聊天列表中的角色头像: ${contactName}`);\n                    }\n                }\n            });\n            // 2. 不再更新header头像，因为header-avatar与角色头像无关\n            // header-avatar应该保持原来的逻辑，可能是当前聊天的默认头像或其他\n            // 3. 更新聊天消息中该角色的头像（只更新角色发送的消息头像）\n            // 更精确地选择角色消息头像\n            const allAvatars = document.querySelectorAll('.avatar.avatar-hover');\n            allAvatars.forEach(avatar => {\n                const imgElement = avatar;\n                // 跳过用户头像（带有user_avatar类的）\n                if (imgElement.classList.contains('user_avatar')) {\n                    return;\n                }\n                // 跳过header头像\n                if (imgElement.classList.contains('header-avatar') || imgElement.id === 'headerAvatar') {\n                    return;\n                }\n                // 检查是否为该角色的消息头像\n                const messageContainer = imgElement.closest('.message, .chat-message, [data-sender]');\n                if (messageContainer) {\n                    // 获取发送者信息\n                    const senderAttr = messageContainer.getAttribute('data-sender');\n                    const senderElement = messageContainer.querySelector('.sender-name, .message-sender, .chat-sender');\n                    const senderName = senderAttr || senderElement?.textContent?.trim();\n                    // 如果是该角色的消息，更新头像\n                    if (senderName === contactName) {\n                        imgElement.src = newAvatar;\n                        console.log(`🔄 更新消息中的角色头像: ${contactName}`);\n                    }\n                }\n            });\n            // 4. 刷新聊天列表（如果需要）\n            if (this.currentChatDataMap) {\n                // 更新内存中的数据\n                this.currentChatDataMap.forEach((chatData, chatId) => {\n                    if (chatData.chatName === `和${contactName}的聊天` || chatData.chatName === contactName) {\n                        chatData.avatar = newAvatar;\n                    }\n                });\n            }\n            console.log(`✅ 角色头像更新完成: ${contactName}`);\n        }\n        catch (error) {\n            console.error('❌ 更新角色头像失败:', error);\n        }\n    }\n    /**\n     * 同步聊天列表中的头像\n     */\n    syncChatListAvatars(oldName, newName, newAvatar) {\n        // 查找所有聊天列表项\n        const chatListItems = document.querySelectorAll('.chat-list-item');\n        chatListItems.forEach(item => {\n            const chatName = item.querySelector('.chat-name')?.textContent?.trim();\n            const chatAvatar = item.querySelector('.chat-avatar');\n            // 检查是否是与该联系人相关的聊天\n            if (chatAvatar && chatName) {\n                // 检查多种可能的聊天名称格式\n                const isRelatedChat = chatName === oldName ||\n                    chatName === newName ||\n                    chatName === `和${oldName}的聊天` ||\n                    chatName === `和${newName}的聊天` ||\n                    chatName.includes(oldName) ||\n                    chatName.includes(newName);\n                if (isRelatedChat) {\n                    chatAvatar.src = newAvatar;\n                    chatAvatar.alt = newName;\n                    console.log(`🔄 更新聊天列表头像: ${chatName} -> ${newAvatar}`);\n                    // 如果聊天名称需要更新\n                    const chatNameElement = item.querySelector('.chat-name');\n                    if (chatNameElement && chatName === `和${oldName}的聊天`) {\n                        chatNameElement.textContent = `和${newName}的聊天`;\n                        console.log(`🔄 更新聊天名称: ${chatName} -> 和${newName}的聊天`);\n                    }\n                }\n            }\n        });\n    }\n    /**\n     * 同步聊天界面中的消息头像\n     */\n    syncChatMessageAvatars(oldName, newName, newAvatar) {\n        // 查找所有消息中的头像\n        const messageAvatars = document.querySelectorAll('.avatar, .avatar-hover');\n        messageAvatars.forEach(avatar => {\n            const imgElement = avatar;\n            // 检查alt属性或相邻的发送者名称\n            if (imgElement.alt === oldName || imgElement.alt === newName) {\n                imgElement.src = newAvatar;\n                imgElement.alt = newName;\n                console.log(`🔄 更新消息头像: ${oldName} -> ${newName}`);\n            }\n            // 也检查相邻的消息发送者名称\n            const messageElement = avatar.closest('.message');\n            if (messageElement) {\n                const senderElement = messageElement.querySelector('.message-sender, .sender-name');\n                if (senderElement && (senderElement.textContent === oldName || senderElement.textContent === newName)) {\n                    imgElement.src = newAvatar;\n                    imgElement.alt = newName;\n                    console.log(`🔄 更新消息头像(通过发送者): ${oldName} -> ${newName}`);\n                }\n            }\n        });\n    }\n    /**\n     * 同步聊天界面的header头像\n     */\n    syncChatHeaderAvatar(oldName, newName, newAvatar) {\n        // 查找聊天界面的header头像\n        const headerAvatar = document.getElementById('headerAvatar');\n        const chatTitle = document.getElementById('chatTitle');\n        if (headerAvatar && chatTitle) {\n            const currentChatName = chatTitle.textContent?.trim();\n            // 检查当前聊天是否与该联系人相关\n            if (currentChatName === oldName ||\n                currentChatName === newName ||\n                currentChatName === `和${oldName}的聊天` ||\n                currentChatName === `和${newName}的聊天`) {\n                headerAvatar.src = newAvatar;\n                headerAvatar.alt = newName;\n                // 如果聊天标题也需要更新\n                if (currentChatName === `和${oldName}的聊天`) {\n                    chatTitle.textContent = `和${newName}的聊天`;\n                }\n                console.log(`🔄 更新header头像: ${currentChatName}`);\n            }\n        }\n    }\n    /**\n     * 触发全局头像更新事件\n     * 通知其他组件联系人信息已更新\n     */\n    notifyContactUpdated(oldName, newName, newAvatar) {\n        const event = new CustomEvent('contactUpdated', {\n            detail: {\n                oldName,\n                newName,\n                newAvatar,\n                timestamp: Date.now(),\n            },\n        });\n        document.dispatchEvent(event);\n        console.log(`📢 发送联系人更新事件: ${oldName} -> ${newName}`);\n    }\n    /**\n     * 通知需要刷新聊天列表\n     */\n    notifyRefreshChatList() {\n        const event = new CustomEvent('refreshChatList', {\n            detail: {\n                timestamp: Date.now(),\n            },\n        });\n        document.dispatchEvent(event);\n        console.log(`📢 发送刷新聊天列表事件`);\n    }\n    /**\n     * 处理长按事件\n     */\n    handleLongPress(detail) {\n        const { chatId, position } = detail;\n        const isPinned = this.pinManager.isPinned(chatId);\n        console.log(`🔗 长按聊天项: ${chatId}, 位置: (${position.x}, ${position.y}), 置顶状态: ${isPinned}`);\n        // 播放音效\n        this.soundManager.playSound('click');\n        // 显示上下文菜单\n        this.contextMenu.show(chatId, position, isPinned);\n    }\n    /**\n     * 处理上下文菜单操作\n     */\n    handleContextMenuAction(detail) {\n        const { action, chatId } = detail;\n        console.log(`📋 上下文菜单操作: ${action}, 聊天ID: ${chatId}`);\n        switch (action) {\n            case 'pin':\n                this.handlePinChat(chatId);\n                break;\n            case 'unpin':\n                this.handleUnpinChat(chatId);\n                break;\n            case 'delete':\n                this.handleDeleteChat(chatId);\n                break;\n        }\n    }\n    /**\n     * 处理置顶聊天\n     */\n    handlePinChat(chatId) {\n        try {\n            this.pinManager.pin(chatId);\n            // 刷新聊天列表以更新排序和样式，使用保存的数据\n            this.refreshChatList(this.currentChatDataMap);\n            console.log(`📌 聊天已置顶: ${chatId}`);\n        }\n        catch (error) {\n            console.error('置顶聊天失败:', error);\n            this.showToast('置顶失败', 'error');\n        }\n    }\n    /**\n     * 处理取消置顶聊天\n     */\n    handleUnpinChat(chatId) {\n        try {\n            this.pinManager.unpin(chatId);\n            // 刷新聊天列表以更新排序和样式，使用保存的数据\n            this.refreshChatList(this.currentChatDataMap);\n            console.log(`📌 聊天已取消置顶: ${chatId}`);\n        }\n        catch (error) {\n            console.error('取消置顶失败:', error);\n            this.showToast('取消置顶失败', 'error');\n        }\n    }\n    /**\n     * 处理删除聊天\n     */\n    handleDeleteChat(chatId) {\n        // 显示删除确认对话框\n        const chatName = this.getChatNameById(chatId);\n        const chatAvatar = this.getChatAvatarById(chatId);\n        if (confirm(`确定要删除与\"${chatName}\"的聊天吗？\\n\\n此操作不可撤销，将删除所有聊天记录。`)) {\n            try {\n                // 如果是群聊，从localStorage中删除\n                if (chatId.startsWith('group_')) {\n                    this.deleteGroupChat(chatId);\n                }\n                else {\n                    // 普通聊天删除逻辑\n                    this.deleteRegularChat(chatId);\n                }\n                // 从置顶列表中移除\n                if (this.pinManager.isPinned(chatId)) {\n                    this.pinManager.unpin(chatId);\n                }\n                // 刷新聊天列表，使用保存的数据\n                this.refreshChatList(this.currentChatDataMap);\n                this.showToast(`已删除与\"${chatName}\"的聊天`, 'info');\n                console.log(`🗑️ 聊天已删除: ${chatId}`);\n            }\n            catch (error) {\n                console.error('删除聊天失败:', error);\n                this.showToast('删除失败', 'error');\n            }\n        }\n    }\n    /**\n     * 根据聊天ID获取聊天名称\n     */\n    getChatNameById(chatId) {\n        // 查找当前显示的聊天项\n        const chatItem = document.querySelector(`[data-chat-id=\"${chatId}\"]`);\n        if (chatItem) {\n            const nameElement = chatItem.querySelector('.chat-name');\n            if (nameElement) {\n                return nameElement.textContent || '未知聊天';\n            }\n        }\n        // 如果是群聊，从群聊数据中查找\n        if (chatId.startsWith('group_')) {\n            const groupChats = this.getGroupChatData();\n            const groupChat = groupChats.find(chat => chat.id === chatId);\n            if (groupChat) {\n                return groupChat.chatName;\n            }\n        }\n        return '未知聊天';\n    }\n    /**\n     * 根据聊天ID获取聊天头像\n     */\n    getChatAvatarById(chatId) {\n        // 查找当前显示的聊天项\n        const chatItem = document.querySelector(`[data-chat-id=\"${chatId}\"]`);\n        if (chatItem) {\n            const avatarElement = chatItem.querySelector('.chat-avatar');\n            if (avatarElement) {\n                return avatarElement.src;\n            }\n        }\n        // 如果是群聊，从群聊数据中查找\n        if (chatId.startsWith('group_')) {\n            const groupChats = this.getGroupChatData();\n            const groupChat = groupChats.find(chat => chat.id === chatId);\n            if (groupChat) {\n                return groupChat.avatar;\n            }\n        }\n        return this.getDefaultAvatar('');\n    }\n    /**\n     * 删除群聊 - 不再操作localStorage\n     */\n    deleteGroupChat(chatId) {\n        // 群聊数据统一由主应用管理，不再直接操作localStorage\n        console.log(`🔍 [DEBUG] 删除群聊请求: ${chatId} - 由主应用处理`);\n        // 触发删除聊天事件，由主应用处理\n        const deleteEvent = new CustomEvent('deleteChatRequest', {\n            detail: { chatId, type: 'group' },\n        });\n        document.dispatchEvent(deleteEvent);\n    }\n    /**\n     * 删除普通聊天\n     */\n    deleteRegularChat(chatId) {\n        // 触发删除聊天事件，由主应用处理\n        const deleteEvent = new CustomEvent('deleteChatRequest', {\n            detail: { chatId },\n        });\n        document.dispatchEvent(deleteEvent);\n        console.log(`🗑️ 发送删除聊天请求: ${chatId}`);\n    }\n    /**\n     * 初始化长按处理器\n     */\n    initializeLongPressHandler() {\n        this.longPressHandler.init();\n        console.log('🔗 长按处理器已初始化');\n    }\n    /**\n     * 销毁长按处理器\n     */\n    destroyLongPressHandler() {\n        if (this.longPressHandler) {\n            this.longPressHandler.destroy();\n        }\n        console.log('🔗 长按处理器已销毁');\n    }\n    /**\n     * 获取置顶管理器（用于外部访问）\n     */\n    getPinManager() {\n        return this.pinManager;\n    }\n    /**\n     * 处理未读消息数量更新事件\n     * @param chatId 聊天ID\n     * @param unreadCount 新的未读数量\n     */\n    onUnreadCountUpdated(chatId, unreadCount) {\n        // 更新对应聊天项的未读圆点显示\n        const chatItem = document.querySelector(`[data-chat-id=\"${chatId}\"]`);\n        if (chatItem) {\n            const timeContainer = chatItem.querySelector('.chat-time-container');\n            let unreadBadge = chatItem.querySelector('.unread-badge');\n            // 更新消息预览为最新消息\n            this.updateChatPreview(chatId, chatItem);\n            if (unreadCount > 0) {\n                const formattedCount = this.formatUnreadCount(unreadCount);\n                if (!unreadBadge && timeContainer) {\n                    // 创建未读徽章\n                    unreadBadge = document.createElement('div');\n                    unreadBadge.className = 'unread-badge bounce';\n                    timeContainer.appendChild(unreadBadge);\n                }\n                if (unreadBadge) {\n                    unreadBadge.textContent = formattedCount;\n                    unreadBadge.classList.add('show');\n                    unreadBadge.classList.add('pulse');\n                    // 移除动画类\n                    setTimeout(() => {\n                        unreadBadge?.classList.remove('bounce', 'pulse');\n                    }, 600);\n                }\n            }\n            else if (unreadBadge) {\n                // 隐藏未读徽章\n                unreadBadge.classList.remove('show');\n                // 延迟移除元素，让动画完成\n                setTimeout(() => {\n                    if (unreadBadge && !unreadBadge.classList.contains('show')) {\n                        unreadBadge.remove();\n                    }\n                }, 200);\n            }\n        }\n    }\n    /**\n     * 更新聊天预览消息\n     */\n    updateChatPreview(chatId, chatItem) {\n        if (!this.currentChatDataMap)\n            return;\n        const chatData = this.currentChatDataMap.get(chatId);\n        if (!chatData || !chatData.messages || chatData.messages.length === 0)\n            return;\n        // 获取最新消息\n        const lastMessage = this.getLastMessage(chatData.messages);\n        if (!lastMessage)\n            return;\n        // 格式化消息预览\n        const previewText = this.formatMessagePreview(lastMessage);\n        // 更新DOM中的预览文本\n        const previewElement = chatItem.querySelector('.chat-preview');\n        if (previewElement) {\n            previewElement.textContent = previewText;\n        }\n        // 同时更新时间显示\n        const timeElement = chatItem.querySelector('.chat-time');\n        if (timeElement && lastMessage.timestamp) {\n            const formattedTime = this.formatAbsoluteTime(lastMessage.timestamp);\n            timeElement.textContent = formattedTime;\n        }\n    }\n    /**\n     * 当有新消息时通知未读消息管理器\n     * @param chatId 聊天ID\n     */\n    onNewMessage(chatId) {\n        this.unreadMessageManager.onNewMessage(chatId, this.currentChatDataMap);\n    }\n    /**\n     * 只更新聊天数据，不显示界面\n     * @param chatDataMap 聊天数据映射\n     */\n    updateChatData(chatDataMap) {\n        this.currentChatDataMap = chatDataMap;\n    }\n    /**\n     * 当有新消息数组时通知未读消息管理器（批量处理）\n     * @param newMessages 新消息数组\n     * @param currentChatId 当前正在查看的聊天ID\n     */\n    onNewMessages(newMessages, currentChatId) {\n        this.unreadMessageManager.onNewMessages(newMessages, this.currentChatDataMap, currentChatId);\n    }\n    /**\n     * 刷新所有聊天的未读消息计数\n     */\n    refreshUnreadCounts() {\n        if (this.currentChatDataMap) {\n            const chatIds = Array.from(this.currentChatDataMap.keys());\n            this.unreadMessageManager.refreshUnreadCounts(this.currentChatDataMap, chatIds);\n        }\n    }\n    /**\n     * 获取未读消息管理器实例（用于外部访问）\n     */\n    getUnreadMessageManager() {\n        return this.unreadMessageManager;\n    }\n    /**\n     * 销毁聊天列表管理器，清理资源\n     */\n    destroy() {\n        // 销毁状态栏\n        this.destroyStatusBar();\n        // 销毁长按处理器\n        this.destroyLongPressHandler();\n        // 销毁未读消息管理器\n        this.unreadMessageManager.destroy();\n        // 隐藏上下文菜单\n        this.contextMenu.hide();\n    }\n    /**\n     * 格式化未读消息数量显示\n     * @param count 未读消息数量\n     * @returns 格式化后的显示文本\n     */\n    formatUnreadCount(count) {\n        if (count <= 0)\n            return '';\n        if (count > 99)\n            return '99+';\n        return count.toString();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY2hhdExpc3QvbWFuYWdlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTs7OztHQUlHO0FBRXlEO0FBQ2Q7QUFFSTtBQUNOO0FBQ1U7QUFDWjtBQUVvQjtBQUNSO0FBZS9DLE1BQU0sZUFBZTtJQUNsQixZQUFZLENBQWU7SUFDM0IsY0FBYyxDQUFpQjtJQUMvQixnQkFBZ0IsR0FBNEIsSUFBSSxDQUFDO0lBQ2pELE1BQU0sQ0FBaUI7SUFDdkIsZ0JBQWdCLENBQW1CO0lBQ25DLFNBQVMsR0FBcUIsSUFBSSxDQUFDLENBQUMsVUFBVTtJQUM5QyxrQkFBa0IsR0FBc0MsU0FBUyxDQUFDLENBQUMsWUFBWTtJQUV2RixTQUFTO0lBQ0QsZ0JBQWdCLENBQW1CO0lBQ25DLFdBQVcsQ0FBYztJQUN6QixVQUFVLENBQWE7SUFFL0IsUUFBUTtJQUNBLGdCQUFnQixDQUFtQjtJQUUzQyxVQUFVO0lBQ0Ysb0JBQW9CLENBQXVCO0lBRW5ELFVBQVU7SUFDRixnQkFBZ0IsQ0FBbUI7SUFFM0MsWUFBWSxZQUEwQixFQUFFLGdCQUFtQyxFQUFFLGFBQW1CO1FBQzlGLElBQUksQ0FBQyxZQUFZLEdBQUcsWUFBWSxDQUFDO1FBQ2pDLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSwyREFBYyxFQUFFLENBQUM7UUFFM0Msc0JBQXNCO1FBQ3RCLElBQUksZ0JBQWdCLEVBQUUsQ0FBQztZQUNyQixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUM7UUFDM0MsQ0FBQzthQUFNLENBQUM7WUFDTixPQUFPLENBQUMsSUFBSSxDQUFDLHFEQUFxRCxDQUFDLENBQUM7UUFDdEUsQ0FBQztRQUVELFlBQVk7UUFDWixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSwrREFBZ0IsRUFBRSxDQUFDO1FBQy9DLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxxREFBVyxFQUFFLENBQUM7UUFDckMsSUFBSSxDQUFD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LENBQUMsT0FBTyxFQUFFLENBQUM7UUFFcEMsVUFBVTtRQUNWLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDMUIsQ0FBQztJQUVEOzs7O09BSUc7SUFDSyxpQkFBaUIsQ0FBQyxLQUFhO1FBQ3JDLElBQUksS0FBSyxJQUFJLENBQUM7WUFBRSxPQUFPLEVBQUUsQ0FBQztRQUMxQixJQUFJLEtBQUssR0FBRyxFQUFFO1lBQUUsT0FBTyxLQUFLLENBQUM7UUFDN0IsT0FBTyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDMUIsQ0FBQztDQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy9jaGF0TGlzdC9tYW5hZ2VyLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIOiBiuWkqeWIl+ihqOeuoeeQhuWZqFxuICog6LSf6LSj6IGK5aSp5YiX6KGo55WM6Z2i55qE5pi+56S644CB5Lqk5LqS5ZKM5pWw5o2u566h55CGXG4gKiDmoLflvI/lrprkuYnlnKjkuLvmlofku7Yg6YeN5p6ELnNjc3Mg5LitXG4gKi9cblxuaW1wb3J0IHsgQm90dG9tTmF2aWdhdGlvbiB9IGZyb20gJy4uL2NvcmUvQm90dG9tTmF2aWdhdGlvbic7XG5pbXBvcnQgeyBTdGF0dXNCYXIgfSBmcm9tICcuLi9jb3JlL1N0YXR1c0Jhcic7XG5pbXBvcnQgeyBHcm91cENoYXRNYW5hZ2VyIH0gZnJvbSAnLi4vZ3JvdXBDaGF0L21hbmFnZXInO1xuaW1wb3J0IHsgQ29udGFjdE1hbmFnZXIgfSBmcm9tICcuL2NvbnRhY3RNYW5hZ2VyJztcbmltcG9ydCB7IENvbnRleHRNZW51IH0gZnJvbSAnLi9jb250ZXh0TWVudSc7XG5pbXBvcnQgeyBMb25nUHJlc3NIYW5kbGVyIH0gZnJvbSAnLi9sb25nUHJlc3NIYW5kbGVyJztcbmltcG9ydCB7IFBpbk1hbmFnZXIgfSBmcm9tICcuL3Bpbk1hbmFnZXInO1xuaW1wb3J0IHsgQ2hhdExpc3RDb25maWcsIENoYXRMaXN0SXRlbSwgTmV3Q2hhdE1vZGFsRGF0YSB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgVW5yZWFkTWVzc2FnZU1hbmFnZXIgfSBmcm9tICcuL3VucmVhZE1lc3NhZ2VNYW5hZ2VyJztcbmltcG9ydCB7IFdhbGxwYXBlck1hbmFnZXIgfSBmcm9tICcuL3dhbGxwYXBlck1hbmFnZXInO1xuXG4vLyDlr7zlhaXnsbvlnovvvIjku47kuLvmlofku7bvvIlcbmludGVyZmFjZSBDaGF0RGF0YSB7XG4gIGNoYXRJZDogc3RyaW5nO1xuICBjaGF0TmFtZTogc3RyaW5nO1xuICBhdmF0YXI6IHN0cmluZztcbiAgbWVzc2FnZXM6IGFueVtdO1xuICBsYXN0TWVzc2FnZT86IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIFNvdW5kTWFuYWdlciB7XG4gIHBsYXlTb3VuZCh0eXBlOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+O1xufVxuXG5leHBvcnQgY2xhc3MgQ2hhdExpc3RNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBzb3VuZE1hbmFnZXI6IFNvdW5kTWFuYWdlcjtcbiAgcHJpdmF0ZSBjb250YWN0TWFuYWdlcjogQ29udGFjdE1hbmFnZXI7XG4gIHByaXZhdGUgZ3JvdXBDaGF0TWFuYWdlcjogR3JvdXBDaGF0TWFuYWdlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGNvbmZpZzogQ2hhdExpc3RDb25maWc7XG4gIHByaXZhdGUgbmV3Q2hhdE1vZGFsRGF0YTogTmV3Q2hhdE1vZGFsRGF0YTtcbiAgcHJpdmF0ZSBzdGF0dXNCYXI6IFN0YXR1c0JhciB8IG51bGwgPSBudWxsOyAvLyDpgJrnlKjnirbmgIHmoI/lrp7kvotcbiAgcHJpdmF0ZSBjdXJyZW50Q2hhdERhdGFNYXA6IE1hcDxzdHJpbmcsIENoYXREYXRhPiB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDsgLy8g5L+d5a2Y5b2T5YmN55qE6IGK5aSp5pWw5o2uXG5cbiAgLy8g6ZW/5oyJ6I+c5Y2V55u45YWzXG4gIHByaXZhdGUgbG9uZ1ByZXNzSGFuZGxlcjogTG9uZ1ByZXNzSGFuZGxlcjtcbiAgcHJpdmF0ZSBjb250ZXh0TWVudTogQ29udGV4dE1lbnU7XG4gIHByaXZhdGUgcGluTWFuYWdlcjogUGluTWFuYWdlcjtcblxuICAvLyDlo4HnurjnrqHnkIblmahcbiAgcHJpdmF0ZSB3YWxscGFwZXJNYW5hZ2VyOiBXYWxscGFwZXJNYW5hZ2VyO1xuXG4gIC8vIOacquivu+a2iOaBr+euoeeQhuWZqFxuICBwcml2YXRlIHVucmVhZE1lc3NhZ2VNYW5hZ2VyOiBVbnJlYWRNZXNzYWdlTWFuYWdlcjtcblxuICAvLyDpgJrnlKjlupXpg6jlr7zoiKrmoI9cbiAgcHJpdmF0ZSBib3R0b21OYXZpZ2F0aW9uOiBCb3R0b21OYXZpZ2F0aW9uO1xuXG4gIGNvbnN0cnVjdG9yKHNvdW5kTWFuYWdlcjogU291bmRNYW5hZ2VyLCBncm91cENoYXRNYW5hZ2VyPzogR3JvdXBDaGF0TWFuYWdlciwgbWVzc2FnZVBhcnNlcj86IGFueSkge1xuICAgIHRoaXMuc291bmRNYW5hZ2VyID0gc291bmRNYW5hZ2VyO1xuICAgIHRoaXMuY29udGFjdE1hbmFnZXIgPSBuZXcgQ29udGFjdE1hbmFnZXIoKTtcblxuICAgIC8vIOS9v+eUqOS8oOWFpeeahOe+pOiBiueuoeeQhuWZqOWunuS+i++8jOmBv+WFjemHjeWkjeWIm+W7ulxuICAgIGlmIChncm91cENoYXRNYW5hZ2VyKSB7XG4gICAgICB0aGlzLmdyb3VwQ2hhdE1hbmFnZXIgPSBncm91cENoYXRNYW5hZ2VyO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBDaGF0TGlzdE1hbmFnZXI6IOacquS8oOWFpUdyb3VwQ2hhdE1hbmFnZXLlrp7kvovvvIznvqTogYrlip/og73lj6/og73kuI3lj6/nlKgnKTtcbiAgICB9XG5cbiAgICAvLyDliJ3lp4vljJbplb/mjInoj5zljZXnu4Tku7ZcbiAgICB0aGlzLmxvbmdQcmVzc0hhbmRsZXIgPSBuZXcgTG9uZ1ByZXNzSGFuZGxlcigpO1xuICAgIHRoaXMuY29udGV4dE1lbnUgPSBuZXcgQ29udGV4dE1lbnUoKTtcbiAgICB0aGlzLnBpbk1hbmFnZXIgPSBuZXcgUGluTWFuYWdlcigpO1xuXG4gICAgLy8g5Yid5aeL5YyW5aOB57q4566h55CG5ZmoXG4gICAgdGhpcy53YWxscGFwZXJNYW5hZ2VyID0gV2FsbHBhcGVyTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuXG4gICAgLy8g5Yid5aeL5YyW5pyq6K+75raI5oGv566h55CG5ZmoXG4gICAgdGhpcy51bnJlYWRNZXNzYWdlTWFuYWdlciA9IG5ldyBVbnJlYWRNZXNzYWdlTWFuYWdlcihtZXNzYWdlUGFyc2VyKTtcblxuICAgIC8vIOWIneWni+WMluW6lemDqOWvvOiIquagj1xuICAgIC8vIOW6lemDqOWvvOiIquWunuS+i+WNoOS9je+8jOWunumZheaMgui9veWcqOWuueWZqOWIm+W7ui/lpI3nlKjml7bpgJrov4cgQm90dG9tTmF2aWdhdGlvbi5tb3VudERlZmF1bHQg5a6M5oiQXG4gICAgdGhpcy5ib3R0b21OYXZpZ2F0aW9uID0gbmV3IEJvdHRvbU5hdmlnYXRpb24oe1xuICAgICAgaXRlbXM6IFtdLFxuICAgIH0pO1xuXG4gICAgdGhpcy5jb25maWcgPSB7XG4gICAgICBtYXhSZWNlbnRDaGF0czogNTAsXG4gICAgICBzaG93VW5yZWFkQmFkZ2U6IHRydWUsXG4gICAgICBlbmFibGVHcm91cENoYXQ6IHRydWUsXG4gICAgICBkZWZhdWx0QXZhdGFyczogW1xuICAgICAgICAnaHR0cHM6Ly9maWxlcy5jYXRib3gubW9lL3U4Y2N5NS5qcGcnLFxuICAgICAgICAnaHR0cHM6Ly9maWxlcy5jYXRib3gubW9lL2oyczRxai5qcGcnLFxuICAgICAgICAnaHR0cHM6Ly9maWxlcy5jYXRib3gubW9lL3Nlb2lwaS5qcGcnLFxuICAgICAgICAnaHR0cHM6Ly9maWxlcy5jYXRib3gubW9lL2RxMDhtci5qcGcnLFxuICAgICAgICAnaHR0cHM6Ly9maWxlcy5jYXRib3gubW9lL3ljM2d2NC5qcGVnJyxcbiAgICAgICAgJ2h0dHBzOi8vZmlsZXMuY2F0Ym94Lm1vZS95NHZ2cDAuanBnJyxcbiAgICAgIF0sXG4gICAgfTtcbiAgICB0aGlzLm5ld0NoYXRNb2RhbERhdGEgPSB7XG4gICAgICB0eXBlOiAnc2luZ2xlJyxcbiAgICAgIHNlbGVjdGVkQ29udGFjdHM6IG5ldyBTZXQoKSxcbiAgICB9O1xuXG4gICAgLy8g55uR5ZCs6IGK5aSp5YiX6KGo5Y+Y5YyW5LqL5Lu2XG4gICAgdGhpcy5zZXR1cEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICAvKipcbiAgICog5pi+56S66IGK5aSp5YiX6KGo55WM6Z2iXG4gICAqL1xuICBwdWJsaWMgc2hvd0NoYXRMaXN0SW50ZXJmYWNlKGNoYXREYXRhTWFwPzogTWFwPHN0cmluZywgQ2hhdERhdGE+KTogdm9pZCB7XG4gICAgLy8g5L+d5a2Y5b2T5YmN55qE6IGK5aSp5pWw5o2u5pig5bCEXG4gICAgaWYgKGNoYXREYXRhTWFwKSB7XG4gICAgICB0aGlzLmN1cnJlbnRDaGF0RGF0YU1hcCA9IGNoYXREYXRhTWFwO1xuICAgIH1cblxuICAgIC8vIOiOt+WPluiBiuWkqeWIl+ihqOWuueWZqFxuICAgIGxldCBjaGF0TGlzdENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGF0TGlzdEludGVyZmFjZScpO1xuICAgIGlmICghY2hhdExpc3RDb250YWluZXIpIHtcbiAgICAgIGNoYXRMaXN0Q29udGFpbmVyID0gdGhpcy5jcmVhdGVDaGF0TGlzdENvbnRhaW5lcigpO1xuICAgICAgY29uc3QgaW50ZXJmYWNlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmludGVyZmFjZS1jb250YWluZXInKTtcbiAgICAgIGlmIChpbnRlcmZhY2VDb250YWluZXIpIHtcbiAgICAgICAgaW50ZXJmYWNlQ29udGFpbmVyLmFwcGVuZENoaWxkKGNoYXRMaXN0Q29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8g5aaC5p6c5a655Zmo5bey5a2Y5Zyo77yM56Gu5L+d5YaF5a655ZKM5LqL5Lu25q2j56Gu6K6+572uXG4gICAgICB0aGlzLnNldHVwRXhpc3RpbmdDb250YWluZXIoY2hhdExpc3RDb250YWluZXIpO1xuICAgIH1cblxuICAgIC8vIOaYvuekuuiBiuWkqeWIl+ihqOWuueWZqFxuICAgIGNoYXRMaXN0Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIGNoYXRMaXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXG4gICAgLy8g56Gu5L+d5bqV6YOo5a+86Iiq5Zyo6IGK5aSp5YiX6KGo6aG15r+A5rS74oCc5raI5oGv4oCdXG4gICAgdGhpcy5ib3R0b21OYXZpZ2F0aW9uLnNldEFjdGl2ZUl0ZW0oJ21lc3NhZ2VzJyk7XG5cbiAgICAvLyDlupTnlKjlo4HnurhcbiAgICB0aGlzLndhbGxwYXBlck1hbmFnZXIuYXBwbHlXYWxscGFwZXIoKTtcblxuICAgIC8vIOWmguaenOacieiBiuWkqeaVsOaNru+8jOS7juS4reaPkOWPluiBlOezu+S6uuS/oeaBr1xuICAgIGlmIChjaGF0RGF0YU1hcCkge1xuICAgICAgdGhpcy5jb250YWN0TWFuYWdlci5leHRyYWN0Q29udGFjdHNGcm9tQ2hhdERhdGEoY2hhdERhdGFNYXApO1xuICAgICAgdGhpcy5yZW5kZXJDaGF0TGlzdChjaGF0RGF0YU1hcCk7XG4gICAgfVxuXG4gICAgLy8g5Yid5aeL5YyW54q25oCB5qCPXG4gICAgdGhpcy5pbml0aWFsaXplU3RhdHVzQmFyKCk7XG5cbiAgICAvLyDliJ3lp4vljJbplb/mjInlpITnkIblmahcbiAgICB0aGlzLmluaXRpYWxpemVMb25nUHJlc3NIYW5kbGVyKCk7XG4gIH1cblxuICAvKipcbiAgICog6ZqQ6JeP6IGK5aSp5YiX6KGo55WM6Z2iXG4gICAqL1xuICBwdWJsaWMgaGlkZUNoYXRMaXN0SW50ZXJmYWNlKCk6IHZvaWQge1xuICAgIGNvbnN0IGNoYXRMaXN0Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXRMaXN0SW50ZXJmYWNlJyk7XG4gICAgaWYgKGNoYXRMaXN0Q29udGFpbmVyKSB7XG4gICAgICBjaGF0TGlzdENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgIGNoYXRMaXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfVxuXG4gICAgLy8g6ZSA5q+B54q25oCB5qCPXG4gICAgdGhpcy5kZXN0cm95U3RhdHVzQmFyKCk7XG5cbiAgICAvLyDplIDmr4Hplb/mjInlpITnkIblmahcbiAgICB0aGlzLmRlc3Ryb3lMb25nUHJlc3NIYW5kbGVyKCk7XG5cbiAgICAvLyDpmpDol4/kuIrkuIvmlofoj5zljZVcbiAgICB0aGlzLmNvbnRleHRNZW51LmhpZGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliLfmlrDogYrlpKnliJfooajvvIjnlKjkuo7nvqTogYrliJvlu7rlkI7mm7TmlrDmmL7npLrvvIlcbiAgICovXG4gIHB1YmxpYyByZWZyZXNoQ2hhdExpc3QoY2hhdERhdGFNYXA/OiBNYXA8c3RyaW5nLCBDaGF0RGF0YT4pOiB2b2lkIHtcbiAgICAvLyDlpoLmnpzmsqHmnInkvKDlhaXmlrDnmoRjaGF0RGF0YU1hcO+8jOS9v+eUqOS/neWtmOeahOaVsOaNrlxuICAgIGNvbnN0IGRhdGFUb1VzZSA9IGNoYXREYXRhTWFwIHx8IHRoaXMuY3VycmVudENoYXREYXRhTWFwO1xuICAgIHRoaXMucmVuZGVyQ2hhdExpc3QoZGF0YVRvVXNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDph43mlrDliqDovb3ogZTns7vkurrmlbDmja7vvIjnlKjkuo7op5LoibLliIfmjaLml7bvvIlcbiAgICovXG4gIHB1YmxpYyBhc3luYyByZWxvYWRDb250YWN0cygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zb2xlLmxvZygn8J+UhCBDaGF0TGlzdE1hbmFnZXI6IOmHjeaWsOWKoOi9veiBlOezu+S6uuaVsOaNricpO1xuICAgIGF3YWl0IHRoaXMuY29udGFjdE1hbmFnZXIucmVsb2FkQ29udGFjdHMoKTtcblxuICAgIC8vIOWmguaenOW9k+WJjeato+WcqOaYvuekuuiBiuWkqeWIl+ihqO+8jOWIt+aWsOaYvuekulxuICAgIGNvbnN0IGNoYXRMaXN0Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXRMaXN0SW50ZXJmYWNlJyk7XG4gICAgaWYgKGNoYXRMaXN0Q29udGFpbmVyICYmIGNoYXRMaXN0Q29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcbiAgICAgIHRoaXMucmVmcmVzaENoYXRMaXN0KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOiuvue9ruS6i+S7tuebkeWQrOWZqFxuICAgKi9cbiAgcHJpdmF0ZSBzZXR1cEV2ZW50TGlzdGVuZXJzKCk6IHZvaWQge1xuICAgIC8vIOebkeWQrOiBiuWkqeWIl+ihqOWPmOWMluS6i+S7tlxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYXRMaXN0Q2hhbmdlZCcsIChlOiBFdmVudCkgPT4ge1xuICAgICAgY29uc3QgZXZlbnQgPSBlIGFzIEN1c3RvbUV2ZW50O1xuICAgICAgY29uc29sZS5sb2coJ/Cfk7Eg5pS25Yiw6IGK5aSp5YiX6KGo5Y+Y5YyW5LqL5Lu2OicsIGV2ZW50LmRldGFpbCk7XG4gICAgICAvLyDliLfmlrDogYrlpKnliJfooajmmL7npLrvvIzkvb/nlKjkv53lrZjnmoTmlbDmja5cbiAgICAgIHRoaXMucmVmcmVzaENoYXRMaXN0KHRoaXMuY3VycmVudENoYXREYXRhTWFwKTtcbiAgICB9KTtcblxuICAgIC8vIOebkeWQrOmVv+aMieS6i+S7tlxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYXRJdGVtTG9uZ1ByZXNzJywgKGU6IEV2ZW50KSA9PiB7XG4gICAgICBjb25zdCBldmVudCA9IGUgYXMgQ3VzdG9tRXZlbnQ7XG4gICAgICB0aGlzLmhhbmRsZUxvbmdQcmVzcyhldmVudC5kZXRhaWwpO1xuICAgIH0pO1xuXG4gICAgLy8g55uR5ZCs5LiK5LiL5paH6I+c5Y2V5pON5L2c5LqL5Lu2XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dE1lbnVBY3Rpb24nLCAoZTogRXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IGV2ZW50ID0gZSBhcyBDdXN0b21FdmVudDtcbiAgICAgIHRoaXMuaGFuZGxlQ29udGV4dE1lbnVBY3Rpb24oZXZlbnQuZGV0YWlsKTtcbiAgICB9KTtcblxuICAgIC8vIOebkeWQrOiBiuWkqemhueeCueWHu+S6i+S7tu+8iOeUsemVv+aMieWkhOeQhuWZqOinpuWPke+8iVxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYXRMaXN0SXRlbUNsaWNrJywgKGU6IEV2ZW50KSA9PiB7XG4gICAgICBjb25zdCBldmVudCA9IGUgYXMgQ3VzdG9tRXZlbnQ7XG4gICAgICB0aGlzLm9uQ2hhdEl0ZW1DbGljayhldmVudC5kZXRhaWwuY2hhdElkKTtcbiAgICB9KTtcblxuICAgIC8vIOebkeWQrOacquivu+a2iOaBr+aVsOmHj+abtOaWsOS6i+S7tlxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3VucmVhZENvdW50VXBkYXRlZCcsIChlOiBFdmVudCkgPT4ge1xuICAgICAgY29uc3QgZXZlbnQgPSBlIGFzIEN1c3RvbUV2ZW50O1xuICAgICAgdGhpcy5vblVucmVhZENvdW50VXBkYXRlZChldmVudC5kZXRhaWwuY2hhdElkLCBldmVudC5kZXRhaWwudW5yZWFkQ291bnQpO1xuICAgIH0pO1xuXG4gICAgLy8g55uR5ZCs5omA5pyJ5pyq6K+75raI5oGv5riF6Zu25LqL5Lu2XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYWxsVW5yZWFkQ291bnRzQ2xlYXJlZCcsICgpID0+IHtcbiAgICAgIHRoaXMucmVmcmVzaENoYXRMaXN0KHRoaXMuY3VycmVudENoYXREYXRhTWFwKTtcbiAgICB9KTtcblxuICAgIC8vIOebkeWQrOWktOWDj+e8k+WtmOa4hemZpOS6i+S7tlxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2F2YXRhckNhY2hlQ2xlYXJlZCcsIChlOiBFdmVudCkgPT4ge1xuICAgICAgY29uc3QgZXZlbnQgPSBlIGFzIEN1c3RvbUV2ZW50O1xuICAgICAgY29uc29sZS5sb2coJ/CflIQgW0NoYXRMaXN0TWFuYWdlcl0g5pS25Yiw5aS05YOP57yT5a2Y5riF6Zmk5LqL5Lu277yM5Yi35paw6IGK5aSp5YiX6KGoOicsIGV2ZW50LmRldGFpbCk7XG4gICAgICAvLyDliLfmlrDogYrlpKnliJfooajmmL7npLrvvIzph43mlrDojrflj5blpLTlg49cbiAgICAgIHRoaXMucmVmcmVzaENoYXRMaXN0KHRoaXMuY3VycmVudENoYXREYXRhTWFwKTtcbiAgICB9KTtcblxuICAgIC8vIOebkeWQrOinkuiJsuWktOWDj+abtOaWsOS6i+S7tlxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYXJhY3RlckF2YXRhclVwZGF0ZWQnLCAoZTogRXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IGV2ZW50ID0gZSBhcyBDdXN0b21FdmVudDtcbiAgICAgIGNvbnN0IHsgY29udGFjdE5hbWUsIG5ld0F2YXRhciB9ID0gZXZlbnQuZGV0YWlsO1xuICAgICAgY29uc29sZS5sb2coJ/CflIQgW0NoYXRMaXN0TWFuYWdlcl0g5pS25Yiw6KeS6Imy5aS05YOP5pu05paw5LqL5Lu2OicsIGNvbnRhY3ROYW1lLCBuZXdBdmF0YXIpO1xuICAgICAgLy8g5Y+q5pu05paw6KeS6Imy55u45YWz55qE5aS05YOP77yM5LiN5b2x5ZON55So5oi35aS05YOPXG4gICAgICB0aGlzLnVwZGF0ZUNoYXJhY3RlckF2YXRhck9ubHkoY29udGFjdE5hbWUsIG5ld0F2YXRhcik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog6K6+572u5bey5a2Y5Zyo55qE6IGK5aSp5YiX6KGo5a655ZmoXG4gICAqL1xuICBwcml2YXRlIHNldHVwRXhpc3RpbmdDb250YWluZXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIC8vIOehruS/neWuueWZqOacieato+ehrueahOWGheWuuee7k+aehFxuICAgIGlmICghY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNuZXdDaGF0QnRuJykpIHtcbiAgICAgIC8vIOWIm+W7uuS4u+imgeWGheWuueWMuuWfn++8iOeKtuaAgeagj+WwhumAmui/h1N0YXR1c0Jhcue7hOS7tua3u+WKoO+8iVxuICAgICAgY29uc3QgY29udGVudEhUTUwgPSBgXG4gICAgICAgIDxkaXYgaWQ9XCJjaGF0TGlzdFN0YXR1c0JhckNvbnRhaW5lclwiPjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2hhdC1saXN0LWNvbnRlbnRcIiBpZD1cImNoYXRMaXN0Q29udGVudFwiPlxuICAgICAgICAgIDwhLS0g6IGK5aSp5YiX6KGo6aG55bCG5Zyo6L+Z6YeM5Yqo5oCB55Sf5oiQIC0tPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm5ldy1jaGF0LWJ0blwiIGlkPVwibmV3Q2hhdEJ0blwiPlxuICAgICAgICAgIDxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICAgICAgICAgICAgPHBhdGggZmlsbD1cImN1cnJlbnRDb2xvclwiIGQ9XCJNMTksMTNoLTZ2NmgtMnYtNkg1di0yaDZWNWgydjZoNlYxM3pcIi8+XG4gICAgICAgICAgPC9zdmc+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgYDtcblxuICAgICAgLy8g5L2/55So6YCa55So5bqV6YOo5a+86Iiq57uE5Lu277yI57uf5LiA55Sx5bel5Y6C5oyC6L2977yJXG4gICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gY29udGVudEhUTUwgKyBgPGRpdiBjbGFzcz1cImJvdHRvbS1uYXZcIj48L2Rpdj5gO1xuXG4gICAgICAvLyDliJ3lp4vljJblupXpg6jlr7zoiKrvvIjpgJrnlKjvvIlcbiAgICAgIGNvbnN0IG5hdkNvbnRhaW5lciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuYm90dG9tLW5hdicpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgaWYgKG5hdkNvbnRhaW5lcikge1xuICAgICAgICB0aGlzLmJvdHRvbU5hdmlnYXRpb24gPSBCb3R0b21OYXZpZ2F0aW9uLm1vdW50RGVmYXVsdChuYXZDb250YWluZXIsICdtZXNzYWdlcycsIHtcbiAgICAgICAgICBmZWVkOiAoKSA9PiB0aGlzLnN3aXRjaFRvRmVlZCgpLFxuICAgICAgICAgIG1lc3NhZ2VzOiAoKSA9PiB7fSxcbiAgICAgICAgICBwcm9maWxlOiAoKSA9PiB0aGlzLnN3aXRjaFRvUHJvZmlsZSgpLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8g57uR5a6a5LqL5Lu2XG4gICAgICB0aGlzLmJpbmRDaGF0TGlzdEV2ZW50cyhjb250YWluZXIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDliJvlu7rogYrlpKnliJfooajlrrnlmahcbiAgICovXG4gIHByaXZhdGUgY3JlYXRlQ2hhdExpc3RDb250YWluZXIoKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnRhaW5lci5pZCA9ICdjaGF0TGlzdEludGVyZmFjZSc7XG4gICAgY29udGFpbmVyLmNsYXNzTmFtZSA9ICdjaGF0LWxpc3QtaW50ZXJmYWNlJztcblxuICAgIC8vIOWIm+W7uuS4u+imgeWGheWuueWMuuWfn++8iOeKtuaAgeagj+WwhumAmui/h1N0YXR1c0Jhcue7hOS7tua3u+WKoO+8iVxuICAgIGNvbnN0IGNvbnRlbnRIVE1MID0gYFxuICAgICAgPGRpdiBpZD1cImNoYXRMaXN0U3RhdHVzQmFyQ29udGFpbmVyXCI+PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiY2hhdC1saXN0LWNvbnRlbnRcIiBpZD1cImNoYXRMaXN0Q29udGVudFwiPlxuICAgICAgICA8IS0tIOiBiuWkqeWIl+ihqOmhueWwhuWcqOi/memHjOWKqOaAgeeUn+aIkCAtLT5cbiAgICAgIDwvZGl2PlxuICAgICAgPGJ1dHRvbiBjbGFzcz1cIm5ldy1jaGF0LWJ0blwiIGlkPVwibmV3Q2hhdEJ0blwiPlxuICAgICAgICA8c3ZnIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cbiAgICAgICAgICA8cGF0aCBmaWxsPVwiY3VycmVudENvbG9yXCIgZD1cIk0xOSwxM2gtNnY2aC0ydi02SDV2LTJoNlY1aDJ2Nmg2VjEzelwiLz5cbiAgICAgICAgPC9zdmc+XG4gICAgICA8L2J1dHRvbj5cbiAgICBgO1xuXG4gICAgLy8g5L2/55So6YCa55So5bqV6YOo5a+86Iiq57uE5Lu277yI57uf5LiA55Sx5bel5Y6C5oyC6L2977yJXG4gICAgY29udGFpbmVyLmlubmVySFRNTCA9IGNvbnRlbnRIVE1MICsgYDxkaXYgY2xhc3M9XCJib3R0b20tbmF2XCI+PC9kaXY+YDtcblxuICAgIC8vIOWIneWni+WMluW6lemDqOWvvOiIqu+8iOmAmueUqO+8iVxuICAgIGNvbnN0IG5hdkNvbnRhaW5lciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuYm90dG9tLW5hdicpIGFzIEhUTUxFbGVtZW50O1xuICAgIGlmIChuYXZDb250YWluZXIpIHtcbiAgICAgIHRoaXMuYm90dG9tTmF2aWdhdGlvbiA9IEJvdHRvbU5hdmlnYXRpb24ubW91bnREZWZhdWx0KG5hdkNvbnRhaW5lciwgJ21lc3NhZ2VzJywge1xuICAgICAgICBmZWVkOiAoKSA9PiB0aGlzLnN3aXRjaFRvRmVlZCgpLFxuICAgICAgICBtZXNzYWdlczogKCkgPT4ge30sXG4gICAgICAgIHByb2ZpbGU6ICgpID0+IHRoaXMuc3dpdGNoVG9Qcm9maWxlKCksXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyDnu5Hlrprkuovku7ZcbiAgICB0aGlzLmJpbmRDaGF0TGlzdEV2ZW50cyhjb250YWluZXIpO1xuXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgfVxuXG4gIC8qKlxuICAgKiDnu5HlrprogYrlpKnliJfooajkuovku7ZcbiAgICovXG4gIHByaXZhdGUgYmluZENoYXRMaXN0RXZlbnRzKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAvLyDmlrDlu7rogYrlpKnmjInpkq7kuovku7ZcbiAgICBjb25zdCBuZXdDaGF0QnRuID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNuZXdDaGF0QnRuJyk7XG4gICAgaWYgKG5ld0NoYXRCdG4pIHtcbiAgICAgIG5ld0NoYXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXlTb3VuZCgnY2xpY2snKTtcbiAgICAgICAgdGhpcy5zaG93TmV3Q2hhdE1vZGFsKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyDlupXpg6jlr7zoiKrmoI/ngrnlh7vnlLEgQm90dG9tTmF2aWdhdGlvbiDnu4Tku7blhoXpg6jlpITnkIbvvIjlkKsgYWN0aXZlIOeKtuaAgeWIh+aNou+8iVxuICAgIC8vIOatpOWkhOS4jeWGjemHjeWkjee7keWumu+8jOmBv+WFjemHjeWkjeinpuWPkeS4jumfs+aViOmhuuW6j+S4jeS4gOiHtFxuICAgIC8vIOmhtemdouWIh+aNoue7n+S4gOmAmui/hyBCb3R0b21OYXZpZ2F0aW9uIOmFjee9rueahCBvbkNsaWNrIOWbnuiwg+a0vuWPkSBwYWdlU3dpdGNoIOS6i+S7tu+8jFxuICAgIC8vIOeUsSBCZWFyQ2hhdE1hbmFnZXIg57uf5LiA5pKt5pS+6Z+z5pWI5bm25omn6KGM6aG16Z2i5YiH5o2iXG4gIH1cblxuICAvKipcbiAgICog5aSE55CG5bqV6YOo5a+86Iiq5qCP54K55Ye75LqL5Lu2XG4gICAqL1xuICBwcml2YXRlIGhhbmRsZUJvdHRvbU5hdkNsaWNrKG5hdlR5cGU6IHN0cmluZyB8IG51bGwpOiB2b2lkIHtcbiAgICBzd2l0Y2ggKG5hdlR5cGUpIHtcbiAgICAgIGNhc2UgJ21lc3NhZ2VzJzpcbiAgICAgICAgLy8g5raI5oGv5oyJ6ZKuIC0g5L+d5oyB5Zyo5b2T5YmN6IGK5aSp5YiX6KGo55WM6Z2iXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5OxIOWIh+aNouWIsOa2iOaBr+eVjOmdoicpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3Byb2ZpbGUnOlxuICAgICAgICAvLyDmiJHnmoTmjInpkq4gLSDop6blj5HmmL7npLrkuKrkurrkuLvpobXkuovku7ZcbiAgICAgICAgY29uc29sZS5sb2coJ/CfkaQg5YiH5o2i5Yiw5Liq5Lq65Li76aG1Jyk7XG4gICAgICAgIHRoaXMuc2hvd1Byb2ZpbGVQYWdlKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgY29uc29sZS53YXJuKCfmnKrnn6XnmoTlr7zoiKrnsbvlnos6JywgbmF2VHlwZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOaYvuekuuS4quS6uuS4u+mhtVxuICAgKi9cbiAgcHJpdmF0ZSBzaG93UHJvZmlsZVBhZ2UoKTogdm9pZCB7XG4gICAgLy8g6Kem5Y+R5pi+56S65Liq5Lq65Li76aG155qE5LqL5Lu277yM6K6p5Li7566h55CG5Zmo5aSE55CGXG4gICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ3Nob3dQcm9maWxlUGFnZScsIHtcbiAgICAgIGRldGFpbDogeyBzb3VyY2U6ICdib3R0b21OYXYnIH0sXG4gICAgfSk7XG4gICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gIH1cblxuICAvKipcbiAgICog5riy5p+T6IGK5aSp5YiX6KGoXG4gICAqL1xuICBwdWJsaWMgcmVuZGVyQ2hhdExpc3QoY2hhdERhdGFNYXA/OiBNYXA8c3RyaW5nLCBDaGF0RGF0YT4pOiB2b2lkIHtcbiAgICBjb25zdCBjaGF0TGlzdENvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhdExpc3RDb250ZW50Jyk7XG4gICAgaWYgKCFjaGF0TGlzdENvbnRlbnQpIHJldHVybjtcblxuICAgIC8vIOa4heepuueOsOacieWGheWuuVxuICAgIGNoYXRMaXN0Q29udGVudC5pbm5lckhUTUwgPSAnJztcblxuICAgIC8vIOeUn+aIkOiBiuWkqeWIl+ihqOaVsOaNru+8iOWMheaLrOe+pOiBiuaVsOaNru+8iVxuICAgIGNvbnN0IGNoYXRMaXN0SXRlbXMgPSB0aGlzLmdlbmVyYXRlQ2hhdExpc3RJdGVtcyhjaGF0RGF0YU1hcCk7XG5cbiAgICAvLyDlpoLmnpzmsqHmnInogYrlpKnorrDlvZXvvIzmmL7npLrnqbrnirbmgIFcbiAgICBpZiAoY2hhdExpc3RJdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNoYXRMaXN0Q29udGVudC5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJlbXB0eS1jaGF0LWxpc3RcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZW1wdHktaWNvblwiPvCfkqw8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZW1wdHktdGV4dFwiPuaaguaXoOiBiuWkqeiusOW9lTwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJlbXB0eS1oaW50XCI+54K55Ye75Y+z5LiL6KeSICsg5byA5aeL5paw55qE6IGK5aSpPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyDmuLLmn5PogYrlpKnliJfooajpoblcbiAgICBjaGF0TGlzdEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICBjb25zdCBjaGF0SXRlbSA9IHRoaXMucmVuZGVyQ2hhdExpc3RJdGVtKGl0ZW0pO1xuICAgICAgY2hhdExpc3RDb250ZW50LmFwcGVuZENoaWxkKGNoYXRJdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDnlJ/miJDogYrlpKnliJfooajmlbDmja5cbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVDaGF0TGlzdEl0ZW1zKGNoYXREYXRhTWFwPzogTWFwPHN0cmluZywgQ2hhdERhdGE+KTogQ2hhdExpc3RJdGVtW10ge1xuICAgIGNvbnN0IGNoYXRMaXN0SXRlbXM6IENoYXRMaXN0SXRlbVtdID0gW107XG5cbiAgICAvLyDkuI3lho3ku45sb2NhbFN0b3JhZ2Xor7vlj5bnvqTogYrmlbDmja7vvIznu5/kuIDku45jaGF0RGF0YU1hcOivu+WPllxuICAgIGNvbnNvbGUubG9nKCfwn5SNIFtERUJVR10g55Sf5oiQ6IGK5aSp5YiX6KGo77yM5LiN5L2/55SobG9jYWxTdG9yYWdl5Lit55qE576k6IGK5pWw5o2uJyk7XG5cbiAgICBpZiAoIWNoYXREYXRhTWFwKSB7XG4gICAgICByZXR1cm4gY2hhdExpc3RJdGVtcztcbiAgICB9XG5cbiAgICAvLyDpgY3ljoZjaGF0RGF0YeeUn+aIkOWIl+ihqOmhue+8jOWPquaYvuekuuWNleiBiuWSjOe+pOiBilxuICAgIGNoYXREYXRhTWFwLmZvckVhY2goKGNoYXREYXRhLCBjaGF0SWQpID0+IHtcbiAgICAgIC8vIOajgOafpeaYr+WQpuS4uue+pOiBiuexu+Wei1xuICAgICAgY29uc3QgaXNHcm91cENoYXQgPSAoY2hhdERhdGEgYXMgYW55KS50eXBlID09PSAnZ3JvdXAnO1xuXG4gICAgICAvLyDot7Pov4figJzliqjmgIHigJ3ogZrlkIjlrrnlmajvvIjpgb/lhY3lsIYgW+WKqOaAgV0uLi5bL+WKqOaAgV0g6K+v5b2T5oiQ6IGK5aSp77yJXG4gICAgICBjb25zdCBpc0R5bmFtaWNzQ29udGFpbmVyTmFtZSA9XG4gICAgICAgIHR5cGVvZiBjaGF0RGF0YS5jaGF0TmFtZSA9PT0gJ3N0cmluZycgJiYgL15cXFs/5Yqo5oCBXFxdPyQvLnRlc3QoY2hhdERhdGEuY2hhdE5hbWUudHJpbSgpKTtcbiAgICAgIGlmIChpc0R5bmFtaWNzQ29udGFpbmVyTmFtZSkge1xuICAgICAgICByZXR1cm47IC8vIOaYjuehruaOkumZpFxuICAgICAgfVxuXG4gICAgICAvLyDov4fmu6TvvJrmo4Dmn6Xmtojmga/lhoXlrrnmmK/lkKbljIXlkKtT5oiWR+exu+Wei+eahOa2iOaBr++8jOaIluiAheWMheWQq+e+pOiBiuagh+iusFxuICAgICAgY29uc3QgaGFzQ2hhdE1lc3NhZ2VzID1cbiAgICAgICAgY2hhdERhdGEubWVzc2FnZXMgJiZcbiAgICAgICAgY2hhdERhdGEubWVzc2FnZXMuc29tZShtZXNzYWdlID0+IHtcbiAgICAgICAgICAvLyDmo4Dmn6Xmtojmga/nsbvlnotcbiAgICAgICAgICBpZiAobWVzc2FnZS50eXBlICYmIChtZXNzYWdlLnR5cGUgPT09ICdTJyB8fCBtZXNzYWdlLnR5cGUgPT09ICdHJykpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyDmo4Dmn6XmmK/lkKbljIXlkKvnvqTogYrmoIforrBcbiAgICAgICAgICBpZiAobWVzc2FnZS5jb250ZW50ICYmIG1lc3NhZ2UuY29udGVudC5pbmNsdWRlcygnW+e+pOiBiicpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcblxuICAgICAgLy8g5LuF5b2T5a2Y5Zyo6IGK5aSp5raI5oGv44CB5oiW5piO56Gu5Li6576k6IGK44CB5oiW5Y2V6IGK5ZG95ZCN56ym5ZCI4oCc5ZKMeHh455qE6IGK5aSp4oCd5pe25omN5bGV56S6XG4gICAgICBjb25zdCBzaG91bGRTaG93Q2hhdCA9IGhhc0NoYXRNZXNzYWdlcyB8fCBpc0dyb3VwQ2hhdCB8fCB0aGlzLmlzRWxpZ2libGVDaGF0TmFtZShjaGF0RGF0YS5jaGF0TmFtZSk7XG5cbiAgICAgIGlmICghc2hvdWxkU2hvd0NoYXQpIHtcbiAgICAgICAgcmV0dXJuOyAvLyDot7Pov4fpnZ7ogYrlpKnlhoXlrrlcbiAgICAgIH1cblxuICAgICAgY29uc3QgbGFzdE1lc3NhZ2UgPSB0aGlzLmdldExhc3RNZXNzYWdlKGNoYXREYXRhLm1lc3NhZ2VzIHx8IFtdKTtcbiAgICAgIGNvbnN0IGxhc3RUaW1lID0gbGFzdE1lc3NhZ2UgPyB0aGlzLmZvcm1hdEFic29sdXRlVGltZShsYXN0TWVzc2FnZS50aW1lc3RhbXApIDogJyc7XG5cbiAgICAgIC8vIGlzR3JvdXBDaGF0IOW3suWcqOS4iumdouWumuS5iei/h+S6hu+8jOi/memHjOS4jemcgOimgemHjeWkjeWIpOaWrVxuXG4gICAgICAvLyDojrflj5bmnIDmlrDnmoTlpLTlg4/vvIjkvJjlhYjku47ogZTns7vkurrnrqHnkIblmajojrflj5bvvIlcbiAgICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gdGhpcy5leHRyYWN0RGlzcGxheU5hbWUoY2hhdERhdGEuY2hhdE5hbWUpO1xuICAgICAgbGV0IGxhdGVzdEF2YXRhciA9IGNoYXREYXRhLmF2YXRhciB8fCB0aGlzLmdldERlZmF1bHRBdmF0YXIoY2hhdERhdGEuY2hhdE5hbWUpO1xuXG4gICAgICAvLyDlpoLmnpzmmK/ljZXogYrvvIzlsJ3or5Xku47ogZTns7vkurrnrqHnkIblmajojrflj5bmnIDmlrDlpLTlg49cbiAgICAgIGlmICghaXNHcm91cENoYXQgJiYgZGlzcGxheU5hbWUpIHtcbiAgICAgICAgY29uc3QgY29udGFjdCA9IHRoaXMuY29udGFjdE1hbmFnZXIuZ2V0QWxsQ29udGFjdHMoKS5maW5kKGMgPT4gYy5uYW1lID09PSBkaXNwbGF5TmFtZSk7XG4gICAgICAgIGlmIChjb250YWN0ICYmIGNvbnRhY3QuYXZhdGFyKSB7XG4gICAgICAgICAgbGF0ZXN0QXZhdGFyID0gY29udGFjdC5hdmF0YXI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8g6I635Y+W5pyq6K+75raI5oGv5pWw6YePXG4gICAgICBjb25zdCB1bnJlYWRDb3VudCA9IHRoaXMudW5yZWFkTWVzc2FnZU1hbmFnZXIuY2FsY3VsYXRlVW5yZWFkQ291bnQoY2hhdElkLCBjaGF0RGF0YU1hcCk7XG5cbiAgICAgIGNoYXRMaXN0SXRlbXMucHVzaCh7XG4gICAgICAgIGNoYXRJZCxcbiAgICAgICAgbmFtZTogZGlzcGxheU5hbWUsXG4gICAgICAgIGF2YXRhcjogbGF0ZXN0QXZhdGFyLFxuICAgICAgICBsYXN0TWVzc2FnZTogbGFzdE1lc3NhZ2UgPyB0aGlzLmZvcm1hdE1lc3NhZ2VQcmV2aWV3KGxhc3RNZXNzYWdlKSA6ICfmmoLml6Dmtojmga8nLFxuICAgICAgICBsYXN0VGltZSxcbiAgICAgICAgdW5yZWFkQ291bnQ6IHVucmVhZENvdW50LFxuICAgICAgICB0eXBlOiBpc0dyb3VwQ2hhdCA/ICdHJyA6ICdTJyxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8g5oyJ572u6aG254q25oCB5ZKM5pyA5ZCO5raI5oGv5pe26Ze05o6S5bqPXG4gICAgY2hhdExpc3RJdGVtcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBjb25zdCBhSXNQaW5uZWQgPSB0aGlzLnBpbk1hbmFnZXIuaXNQaW5uZWQoYS5jaGF0SWQpO1xuICAgICAgY29uc3QgYklzUGlubmVkID0gdGhpcy5waW5NYW5hZ2VyLmlzUGlubmVkKGIuY2hhdElkKTtcblxuICAgICAgLy8g572u6aG255qE6IGK5aSp5LyY5YWI5pi+56S6XG4gICAgICBpZiAoYUlzUGlubmVkICYmICFiSXNQaW5uZWQpIHJldHVybiAtMTtcbiAgICAgIGlmICghYUlzUGlubmVkICYmIGJJc1Bpbm5lZCkgcmV0dXJuIDE7XG5cbiAgICAgIC8vIOWmguaenOmDveaYr+e9rumhtuaIlumDveS4jeaYr+e9rumhtu+8jOaMiee9rumhtuaXtumXtOaIlua2iOaBr+aXtumXtOaOkuW6j1xuICAgICAgaWYgKGFJc1Bpbm5lZCAmJiBiSXNQaW5uZWQpIHtcbiAgICAgICAgY29uc3QgYVBpbm5lZERhdGEgPSB0aGlzLnBpbk1hbmFnZXIuZ2V0UGlubmVkQ2hhdERhdGEoYS5jaGF0SWQpO1xuICAgICAgICBjb25zdCBiUGlubmVkRGF0YSA9IHRoaXMucGluTWFuYWdlci5nZXRQaW5uZWRDaGF0RGF0YShiLmNoYXRJZCk7XG4gICAgICAgIGlmIChhUGlubmVkRGF0YSAmJiBiUGlubmVkRGF0YSkge1xuICAgICAgICAgIHJldHVybiBiUGlubmVkRGF0YS5waW5uZWRBdCAtIGFQaW5uZWREYXRhLnBpbm5lZEF0OyAvLyDmnIDmlrDnva7pobbnmoTlnKjliY1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyDmjInmnIDlkI7mtojmga/ml7bpl7TmjpLluo/vvIjmnIDmlrDnmoTlnKjliY3vvIlcbiAgICAgIGNvbnN0IGFUaW1lID0gdGhpcy5nZXRMYXN0TWVzc2FnZVRpbWVzdGFtcChhLmNoYXRJZCwgY2hhdERhdGFNYXApO1xuICAgICAgY29uc3QgYlRpbWUgPSB0aGlzLmdldExhc3RNZXNzYWdlVGltZXN0YW1wKGIuY2hhdElkLCBjaGF0RGF0YU1hcCk7XG4gICAgICByZXR1cm4gYlRpbWUgLSBhVGltZTtcbiAgICB9KTtcblxuICAgIHJldHVybiBjaGF0TGlzdEl0ZW1zLnNsaWNlKDAsIHRoaXMuY29uZmlnLm1heFJlY2VudENoYXRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmuLLmn5PljZXkuKrogYrlpKnliJfooajpoblcbiAgICovXG4gIHByaXZhdGUgcmVuZGVyQ2hhdExpc3RJdGVtKGl0ZW06IENoYXRMaXN0SXRlbSk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBjaGF0SXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IGlzUGlubmVkID0gdGhpcy5waW5NYW5hZ2VyLmlzUGlubmVkKGl0ZW0uY2hhdElkKTtcblxuICAgIGNoYXRJdGVtLmNsYXNzTmFtZSA9IGBjaGF0LWxpc3QtaXRlbSR7aXNQaW5uZWQgPyAnIHBpbm5lZCcgOiAnJ31gO1xuICAgIGNoYXRJdGVtLmRhdGFzZXQuY2hhdElkID0gaXRlbS5jaGF0SWQ7XG4gICAgY2hhdEl0ZW0uZGF0YXNldC50eXBlID0gaXRlbS50eXBlOyAvLyDmt7vliqDnsbvlnovmoIfor4bvvIznlKjkuo7moLflvI/ljLrliIZcblxuICAgIC8vIOWPguiAg+WOn+eJiOa2iOaBr+WIl+ihqC3mtojmga/pooTop4guaHRtbOeahOe7k+aehO+8jOa3u+WKoOe9rumhtuaMh+ekuuWZqFxuICAgIGNoYXRJdGVtLmlubmVySFRNTCA9IGBcbiAgICAgIDxpbWcgc3JjPVwiJHtpdGVtLmF2YXRhcn1cIiBjbGFzcz1cImNoYXQtYXZhdGFyXCIgYWx0PVwiJHtpdGVtLm5hbWV9XCIgb25lcnJvcj1cInRoaXMuc3JjPScke3RoaXMuZ2V0RGVmYXVsdEF2YXRhcihcbiAgICAgICAgaXRlbS5uYW1lLFxuICAgICAgKX0nXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiY2hhdC1pbmZvXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjaGF0LWxpc3QtaGVhZGVyXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJjaGF0LW5hbWVcIj4ke2l0ZW0ubmFtZX08L3NwYW4+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNoYXQtdGltZS1jb250YWluZXJcIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2hhdC10aW1lXCI+JHtpdGVtLmxhc3RUaW1lfTwvc3Bhbj5cbiAgICAgICAgICAgICR7XG4gICAgICAgICAgICAgIGl0ZW0udW5yZWFkQ291bnQgPiAwXG4gICAgICAgICAgICAgICAgPyBgPGRpdiBjbGFzcz1cInVucmVhZC1iYWRnZSBzaG93XCI+JHt0aGlzLmZvcm1hdFVucmVhZENvdW50KGl0ZW0udW5yZWFkQ291bnQpfTwvZGl2PmBcbiAgICAgICAgICAgICAgICA6ICcnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2hhdC1wcmV2aWV3XCI+JHtpdGVtLmxhc3RNZXNzYWdlfTwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYDtcblxuICAgIHJldHVybiBjaGF0SXRlbTtcbiAgfVxuXG4gIC8qKlxuICAgKiDogYrlpKnpobnngrnlh7vlpITnkIZcbiAgICovXG4gIHByaXZhdGUgb25DaGF0SXRlbUNsaWNrKGNoYXRJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coYPCflrHvuI8g6IGK5aSp5YiX6KGo6aG56KKr54K55Ye7OiAke2NoYXRJZH1gKTtcblxuICAgIC8vIOagh+iusOivpeiBiuWkqeS4uuW3suivu1xuICAgIHRoaXMudW5yZWFkTWVzc2FnZU1hbmFnZXIubWFya0FzUmVhZChjaGF0SWQsIHRoaXMuY3VycmVudENoYXREYXRhTWFwKTtcblxuICAgIC8vIOinpuWPkeiBiuWkqeWIh+aNouS6i+S7tu+8iOmcgOimgeWcqOS4u+exu+S4reWkhOeQhu+8iVxuICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdjaGF0U3dpdGNoUmVxdWVzdCcsIHtcbiAgICAgIGRldGFpbDogeyBjaGF0SWQgfSxcbiAgICB9KTtcbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmmL7npLrmlrDlu7rogYrlpKnmqKHmgIHmoYZcbiAgICovXG4gIHByaXZhdGUgc2hvd05ld0NoYXRNb2RhbCgpOiB2b2lkIHtcbiAgICAvLyDph43nva7mqKHmgIHmoYbmlbDmja5cbiAgICB0aGlzLm5ld0NoYXRNb2RhbERhdGEgPSB7XG4gICAgICB0eXBlOiAnc2luZ2xlJyxcbiAgICAgIHNlbGVjdGVkQ29udGFjdHM6IG5ldyBTZXQoKSxcbiAgICB9O1xuXG4gICAgLy8g5Yib5bu65qih5oCB5qGGXG4gICAgY29uc3QgbW9kYWwgPSB0aGlzLmNyZWF0ZU5ld0NoYXRNb2RhbCgpO1xuICAgIC8vIOWwhuaooeaAgeahhua3u+WKoOWIsGludGVyZmFjZS1jb250YWluZXLlhoXvvIzogIzkuI3mmK9kb2N1bWVudC5ib2R5XG4gICAgY29uc3QgaW50ZXJmYWNlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmludGVyZmFjZS1jb250YWluZXInKTtcbiAgICBpZiAoaW50ZXJmYWNlQ29udGFpbmVyKSB7XG4gICAgICBpbnRlcmZhY2VDb250YWluZXIuYXBwZW5kQ2hpbGQobW9kYWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1vZGFsKTtcbiAgICB9XG5cbiAgICAvLyDmmL7npLrmqKHmgIHmoYZcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgICB9LCAxMCk7XG4gIH1cblxuICAvKipcbiAgICog5Yib5bu65paw5bu66IGK5aSp5qih5oCB5qGGXG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZU5ld0NoYXRNb2RhbCgpOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIG92ZXJsYXkuY2xhc3NOYW1lID0gJ21vZGFsLW92ZXJsYXkgbmV3LWNoYXQtbW9kYWwnO1xuICAgIG92ZXJsYXkuaWQgPSAnbmV3Q2hhdE1vZGFsJztcblxuICAgIGNvbnN0IGNvbnRhY3RzID0gdGhpcy5jb250YWN0TWFuYWdlci5nZXRBbGxDb250YWN0cygpO1xuICAgIGNvbnN0IGNvbnRhY3RzSHRtbCA9IGNvbnRhY3RzXG4gICAgICAubWFwKFxuICAgICAgICBjb250YWN0ID0+IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJjb250YWN0LWl0ZW1cIiBkYXRhLWNvbnRhY3QtaWQ9XCIke2NvbnRhY3QuaWR9XCI+XG4gICAgICAgIDxpbWcgc3JjPVwiJHtjb250YWN0LmF2YXRhcn1cIiBjbGFzcz1cImNvbnRhY3QtYXZhdGFyXCIgYWx0PVwiJHtjb250YWN0Lm5hbWV9XCI+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwiY29udGFjdC1uYW1lXCI+JHtjb250YWN0Lm5hbWV9PC9zcGFuPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFjdC1hY3Rpb25zXCI+XG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImVkaXQtYnRuXCIgZGF0YS1hY3Rpb249XCJlZGl0XCIgZGF0YS1jb250YWN0LWlkPVwiJHtjb250YWN0LmlkfVwiIHRpdGxlPVwi57yW6L6R6IGU57O75Lq6XCI+XG4gICAgICAgICAgICA8c3ZnIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiB3aWR0aD1cIjE2XCIgaGVpZ2h0PVwiMTZcIj5cbiAgICAgICAgICAgICAgPHBhdGggZmlsbD1cImN1cnJlbnRDb2xvclwiIGQ9XCJNMjAuNzEsNy4wNEMyMS4xLDYuNjUgMjEuMSw2IDIwLjcxLDUuNjNMMTguMzcsMy4yOUMxOCwyLjkgMTcuMzUsMi45IDE2Ljk2LDMuMjlMMTUuMTIsNS4xMkwxOC44Nyw4Ljg3TTMsMTcuMjVWMjFINi43NUwxNy44MSw5LjkzTDE0LjA2LDYuMThMMywxNy4yNVpcIiAvPlxuICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImRlbGV0ZS1idG5cIiBkYXRhLWFjdGlvbj1cImRlbGV0ZVwiIGRhdGEtY29udGFjdC1pZD1cIiR7Y29udGFjdC5pZH1cIiB0aXRsZT1cIuWIoOmZpOiBlOezu+S6ulwiPlxuICAgICAgICAgICAgPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgd2lkdGg9XCIxNlwiIGhlaWdodD1cIjE2XCI+XG4gICAgICAgICAgICAgIDxwYXRoIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBkPVwiTTE5LDRIMTUuNUwxNC41LDNIOS41TDguNSw0SDVWNkgxOU02LDE5QTIsMiAwIDAsMCA4LDIxSDE2QTIsMiAwIDAsMCAxOCwxOVY3SDZWMTlaXCIgLz5cbiAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNoZWNrYm94XCI+PC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgLFxuICAgICAgKVxuICAgICAgLmpvaW4oJycpO1xuXG4gICAgLy8g5re75YqgXCLmt7vliqDmnIvlj4tcIumAiemhuVxuICAgIGNvbnN0IGFkZEZyaWVuZEh0bWwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwiY29udGFjdC1pdGVtIGFkZC1mcmllbmQtaXRlbVwiIGRhdGEtYWN0aW9uPVwiYWRkLWZyaWVuZFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiYWRkLWZyaWVuZC1pY29uXCI+KzwvZGl2PlxuICAgICAgICA8c3BhbiBjbGFzcz1cImNvbnRhY3QtbmFtZVwiPua3u+WKoOaci+WPizwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG5cbiAgICAvLyDlpoLmnpzmsqHmnInogZTns7vkurrvvIzmmL7npLrnqbrnirbmgIHmj5DnpLpcbiAgICBjb25zdCBlbXB0eVN0YXRlSHRtbCA9XG4gICAgICBjb250YWN0cy5sZW5ndGggPT09IDBcbiAgICAgICAgPyBgXG4gICAgICA8ZGl2IGNsYXNzPVwiZW1wdHktY29udGFjdHMtaGludFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZW1wdHktaGludFwiPueCueWHu+S4iuaWuVwi5re75Yqg5pyL5Y+LXCLlvIDlp4vmt7vliqA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIGBcbiAgICAgICAgOiAnJztcblxuICAgIG92ZXJsYXkuaW5uZXJIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRhaW5lclwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtdGl0bGVcIj7mlrDlu7rogYrlpKk8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNoYXQtdHlwZS1vcHRpb25zXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNoYXQtdHlwZS1vcHRpb24gc2VsZWN0ZWRcIiBkYXRhLXR5cGU9XCJzaW5nbGVcIj7ljZXkurrogYrlpKk8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hhdC10eXBlLW9wdGlvblwiIGRhdGEtdHlwZT1cImdyb3VwXCI+576k6IGKPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFjdC1saXN0XCI+XG4gICAgICAgICAgJHthZGRGcmllbmRIdG1sfVxuICAgICAgICAgICR7Y29udGFjdHNIdG1sfVxuICAgICAgICAgICR7ZW1wdHlTdGF0ZUh0bWx9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtYnV0dG9uc1wiPlxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJtb2RhbC1idG4gY2FuY2VsLWJ0blwiPuWPlua2iDwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJtb2RhbC1idG4gY29uZmlybS1idG5cIj7noa7orqQ8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuXG4gICAgLy8g57uR5a6a5LqL5Lu2XG4gICAgdGhpcy5iaW5kTmV3Q2hhdE1vZGFsRXZlbnRzKG92ZXJsYXkpO1xuXG4gICAgcmV0dXJuIG92ZXJsYXk7XG4gIH1cblxuICAvKipcbiAgICog57uR5a6a5paw5bu66IGK5aSp5qih5oCB5qGG5LqL5Lu2XG4gICAqL1xuICBwcml2YXRlIGJpbmROZXdDaGF0TW9kYWxFdmVudHMobW9kYWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgLy8g6IGK5aSp57G75Z6L6YCJ5oupXG4gICAgY29uc3QgdHlwZU9wdGlvbnMgPSBtb2RhbC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hhdC10eXBlLW9wdGlvbicpO1xuICAgIHR5cGVPcHRpb25zLmZvckVhY2gob3B0aW9uID0+IHtcbiAgICAgIG9wdGlvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdHlwZU9wdGlvbnMuZm9yRWFjaChvcHQgPT4gb3B0LmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJykpO1xuICAgICAgICBvcHRpb24uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcbiAgICAgICAgdGhpcy5uZXdDaGF0TW9kYWxEYXRhLnR5cGUgPSBvcHRpb24uZ2V0QXR0cmlidXRlKCdkYXRhLXR5cGUnKSBhcyAnc2luZ2xlJyB8ICdncm91cCc7XG5cbiAgICAgICAgLy8g5pu05paw55WM6Z2i54q25oCBXG4gICAgICAgIGlmICh0aGlzLm5ld0NoYXRNb2RhbERhdGEudHlwZSA9PT0gJ2dyb3VwJykge1xuICAgICAgICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoJ2dyb3VwLW1vZGUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdncm91cC1tb2RlJyk7XG4gICAgICAgICAgdGhpcy5uZXdDaGF0TW9kYWxEYXRhLnNlbGVjdGVkQ29udGFjdHMuY2xlYXIoKTtcbiAgICAgICAgICBtb2RhbC5xdWVyeVNlbGVjdG9yQWxsKCcuY29udGFjdC1pdGVtJykuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXlTb3VuZCgnY2xpY2snKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8g6IGU57O75Lq66YCJ5oupXG4gICAgY29uc3QgY29udGFjdEl0ZW1zID0gbW9kYWwucXVlcnlTZWxlY3RvckFsbCgnLmNvbnRhY3QtaXRlbScpO1xuICAgIGNvbnRhY3RJdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgY29uc3QgYWN0aW9uID0gaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtYWN0aW9uJyk7XG4gICAgICAgIGNvbnN0IGNvbnRhY3RJZCA9IGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLWNvbnRhY3QtaWQnKTtcblxuICAgICAgICAvLyDmo4Dmn6XmmK/lkKbngrnlh7vkuobmk43kvZzmjInpkq5cbiAgICAgICAgY29uc3QgZWRpdEJ0biA9IHRhcmdldC5jbG9zZXN0KCcuZWRpdC1idG4nKTtcbiAgICAgICAgY29uc3QgZGVsZXRlQnRuID0gdGFyZ2V0LmNsb3Nlc3QoJy5kZWxldGUtYnRuJyk7XG5cbiAgICAgICAgaWYgKGVkaXRCdG4pIHtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIGNvbnN0IGVkaXRDb250YWN0SWQgPSBlZGl0QnRuLmdldEF0dHJpYnV0ZSgnZGF0YS1jb250YWN0LWlkJyk7XG4gICAgICAgICAgaWYgKGVkaXRDb250YWN0SWQpIHtcbiAgICAgICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXlTb3VuZCgnY2xpY2snKTtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRWRpdENvbnRhY3QoZWRpdENvbnRhY3RJZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkZWxldGVCdG4pIHtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIGNvbnN0IGRlbGV0ZUNvbnRhY3RJZCA9IGRlbGV0ZUJ0bi5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29udGFjdC1pZCcpO1xuICAgICAgICAgIGlmIChkZWxldGVDb250YWN0SWQpIHtcbiAgICAgICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXlTb3VuZCgnY2xpY2snKTtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRGVsZXRlQ29udGFjdChkZWxldGVDb250YWN0SWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyDlpITnkIZcIua3u+WKoOaci+WPi1wi54K55Ye7XG4gICAgICAgIGlmIChhY3Rpb24gPT09ICdhZGQtZnJpZW5kJykge1xuICAgICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXlTb3VuZCgnY2xpY2snKTtcbiAgICAgICAgICB0aGlzLmhpZGVOZXdDaGF0TW9kYWwoKTtcbiAgICAgICAgICB0aGlzLnNob3dBZGRGcmllbmRNb2RhbCgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOWkhOeQhuaZrumAmuiBlOezu+S6uumAieaLqVxuICAgICAgICBpZiAoIWNvbnRhY3RJZCkgcmV0dXJuO1xuXG4gICAgICAgIGlmICh0aGlzLm5ld0NoYXRNb2RhbERhdGEudHlwZSA9PT0gJ3NpbmdsZScpIHtcbiAgICAgICAgICAvLyDljZXogYrmqKHlvI/vvJrlj6rog73pgInmi6nkuIDkuKpcbiAgICAgICAgICBjb250YWN0SXRlbXMuZm9yRWFjaChjaSA9PiBjaS5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpKTtcbiAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgdGhpcy5uZXdDaGF0TW9kYWxEYXRhLnNlbGVjdGVkQ29udGFjdHMuY2xlYXIoKTtcbiAgICAgICAgICB0aGlzLm5ld0NoYXRNb2RhbERhdGEuc2VsZWN0ZWRDb250YWN0cy5hZGQoY29udGFjdElkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyDnvqTogYrmqKHlvI/vvJrlj6/ku6XpgInmi6nlpJrkuKpcbiAgICAgICAgICBpdGVtLmNsYXNzTGlzdC50b2dnbGUoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICB0aGlzLm5ld0NoYXRNb2RhbERhdGEuc2VsZWN0ZWRDb250YWN0cy5hZGQoY29udGFjdElkKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5uZXdDaGF0TW9kYWxEYXRhLnNlbGVjdGVkQ29udGFjdHMuZGVsZXRlKGNvbnRhY3RJZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdjbGljaycpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyDlj5bmtojmjInpkq5cbiAgICBjb25zdCBjYW5jZWxCdG4gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCcuY2FuY2VsLWJ0bicpO1xuICAgIGlmIChjYW5jZWxCdG4pIHtcbiAgICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdjbGljaycpO1xuICAgICAgICB0aGlzLmhpZGVOZXdDaGF0TW9kYWwoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIOehruiupOaMiemSrlxuICAgIGNvbnN0IGNvbmZpcm1CdG4gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCcuY29uZmlybS1idG4nKTtcbiAgICBpZiAoY29uZmlybUJ0bikge1xuICAgICAgY29uZmlybUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdjbGljaycpO1xuICAgICAgICB0aGlzLmhhbmRsZUNyZWF0ZU5ld0NoYXQoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIOeCueWHu+mBrue9qeWFs+mXrVxuICAgIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICBpZiAoZS50YXJnZXQgPT09IG1vZGFsKSB7XG4gICAgICAgIHRoaXMuaGlkZU5ld0NoYXRNb2RhbCgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOmakOiXj+aWsOW7uuiBiuWkqeaooeaAgeahhlxuICAgKi9cbiAgcHJpdmF0ZSBoaWRlTmV3Q2hhdE1vZGFsKCk6IHZvaWQge1xuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ld0NoYXRNb2RhbCcpO1xuICAgIGlmIChtb2RhbCkge1xuICAgICAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIG1vZGFsLnJlbW92ZSgpO1xuICAgICAgfSwgMzAwKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5pi+56S65re75Yqg5pyL5Y+L5qih5oCB5qGGXG4gICAqL1xuICBwcml2YXRlIHNob3dBZGRGcmllbmRNb2RhbCgpOiB2b2lkIHtcbiAgICBjb25zdCBtb2RhbCA9IHRoaXMuY3JlYXRlQWRkRnJpZW5kTW9kYWwoKTtcbiAgICAvLyDlsIbmqKHmgIHmoYbmt7vliqDliLBpbnRlcmZhY2UtY29udGFpbmVy5YaF77yM6ICM5LiN5pivZG9jdW1lbnQuYm9keVxuICAgIGNvbnN0IGludGVyZmFjZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbnRlcmZhY2UtY29udGFpbmVyJyk7XG4gICAgaWYgKGludGVyZmFjZUNvbnRhaW5lcikge1xuICAgICAgaW50ZXJmYWNlQ29udGFpbmVyLmFwcGVuZENoaWxkKG1vZGFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtb2RhbCk7XG4gICAgfVxuXG4gICAgLy8g5pi+56S65qih5oCB5qGGXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XG4gICAgfSwgMTApO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIm+W7uua3u+WKoOaci+WPi+aooeaAgeahhlxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVBZGRGcmllbmRNb2RhbCgpOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIG92ZXJsYXkuY2xhc3NOYW1lID0gJ21vZGFsLW92ZXJsYXkgYWRkLWZyaWVuZC1tb2RhbCc7XG4gICAgb3ZlcmxheS5pZCA9ICdhZGRGcmllbmRNb2RhbCc7XG5cbiAgICBvdmVybGF5LmlubmVySFRNTCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250YWluZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLXRpdGxlXCI+5re75Yqg5pyL5Y+LPC9kaXY+XG4gICAgICAgIDxmb3JtIGNsYXNzPVwiYWRkLWZyaWVuZC1mb3JtXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJmcmllbmROYW1lXCI+6KeS6Imy5ZCN56ewPC9sYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwiZnJpZW5kTmFtZVwiIHBsYWNlaG9sZGVyPVwi6K+36L6T5YWl6KeS6Imy55yf5ZCNXCIgbWF4bGVuZ3RoPVwiMjBcIiByZXF1aXJlZD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJlcnJvci1tZXNzYWdlXCIgaWQ9XCJuYW1lRXJyb3JcIj48L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgPGxhYmVsPuWktOWDj+iuvue9rjwvbGFiZWw+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYXZhdGFyLW9wdGlvbnNcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImF2YXRhci1vcHRpb25cIiBkYXRhLXR5cGU9XCJ1cmxcIj5cbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cImF2YXRhclR5cGVcIiB2YWx1ZT1cInVybFwiIGlkPVwiYXZhdGFyVXJsXCIgY2hlY2tlZD5cbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiYXZhdGFyVXJsXCI+5Zu+54mH6ZO+5o6lPC9sYWJlbD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhdmF0YXItb3B0aW9uXCIgZGF0YS10eXBlPVwidXBsb2FkXCI+XG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJhdmF0YXJUeXBlXCIgdmFsdWU9XCJ1cGxvYWRcIiBpZD1cImF2YXRhclVwbG9hZFwiPlxuICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJhdmF0YXJVcGxvYWRcIj7mnKzlnLDkuIrkvKA8L2xhYmVsPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIiBpZD1cInVybEdyb3VwXCI+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cInVybFwiIGlkPVwiYXZhdGFyVXJsSW5wdXRcIiBwbGFjZWhvbGRlcj1cIuivt+i+k+WFpeWbvueJh1VSTFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImVycm9yLW1lc3NhZ2VcIiBpZD1cInVybEVycm9yXCI+PC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiIGlkPVwidXBsb2FkR3JvdXBcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+XG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImZpbGUtdXBsb2FkLWJ0blwiIGlkPVwiZmlsZVVwbG9hZEJ0blwiPlxuICAgICAgICAgICAgICA8c3ZnIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiB3aWR0aD1cIjE2XCIgaGVpZ2h0PVwiMTZcIj5cbiAgICAgICAgICAgICAgICA8cGF0aCBmaWxsPVwiY3VycmVudENvbG9yXCIgZD1cIk0xNCwySDZBMiwyIDAgMCwwIDQsNFYyMEEyLDIgMCAwLDAgNiwyMkgxOEEyLDIgMCAwLDAgMjAsMjBWOEwxNCwyTTE4LDIwSDZWNEgxM1Y5SDE4VjIwWlwiIC8+XG4gICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICDpgInmi6nmnKzlnLDmlofku7ZcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJmaWxlXCIgaWQ9XCJhdmF0YXJGaWxlSW5wdXRcIiBhY2NlcHQ9XCJpbWFnZS8qXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImVycm9yLW1lc3NhZ2VcIiBpZD1cImZpbGVFcnJvclwiPjwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImF2YXRhci1wcmV2aWV3XCI+XG4gICAgICAgICAgICA8aW1nIGlkPVwiYXZhdGFyUHJldmlld1wiIHNyYz1cIlwiIGFsdD1cIuWktOWDj+mihOiniFwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgICBcbiAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWJ1dHRvbnNcIj5cbiAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cIm1vZGFsLWJ0biBjYW5jZWwtYnRuXCI+5Y+W5raIPC9idXR0b24+XG4gICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJtb2RhbC1idG4gY29uZmlybS1idG5cIj7mt7vliqA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuXG4gICAgLy8g57uR5a6a5LqL5Lu2XG4gICAgdGhpcy5iaW5kQWRkRnJpZW5kTW9kYWxFdmVudHMob3ZlcmxheSk7XG5cbiAgICByZXR1cm4gb3ZlcmxheTtcbiAgfVxuXG4gIC8qKlxuICAgKiDnu5Hlrprmt7vliqDmnIvlj4vmqKHmgIHmoYbkuovku7ZcbiAgICovXG4gIHByaXZhdGUgYmluZEFkZEZyaWVuZE1vZGFsRXZlbnRzKG1vZGFsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIGNvbnN0IG5hbWVJbnB1dCA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNmcmllbmROYW1lJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCB1cmxSYWRpbyA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNhdmF0YXJVcmwnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IHVwbG9hZFJhZGlvID0gbW9kYWwucXVlcnlTZWxlY3RvcignI2F2YXRhclVwbG9hZCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgdXJsSW5wdXQgPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCcjYXZhdGFyVXJsSW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IGZpbGVJbnB1dCA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNhdmF0YXJGaWxlSW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IGZpbGVVcGxvYWRCdG4gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCcjZmlsZVVwbG9hZEJ0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgIGNvbnN0IHVybEdyb3VwID0gbW9kYWwucXVlcnlTZWxlY3RvcignI3VybEdyb3VwJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgY29uc3QgdXBsb2FkR3JvdXAgPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCcjdXBsb2FkR3JvdXAnKSBhcyBIVE1MRWxlbWVudDtcbiAgICBjb25zdCBhdmF0YXJQcmV2aWV3ID0gbW9kYWwucXVlcnlTZWxlY3RvcignI2F2YXRhclByZXZpZXcnKSBhcyBIVE1MSW1hZ2VFbGVtZW50O1xuICAgIGNvbnN0IGNhbmNlbEJ0biA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5jYW5jZWwtYnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgY29uc3QgY29uZmlybUJ0biA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5jb25maXJtLWJ0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuXG4gICAgLy8g5aS05YOP57G75Z6L5YiH5o2iXG4gICAgdXJsUmFkaW8uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgaWYgKHVybFJhZGlvLmNoZWNrZWQpIHtcbiAgICAgICAgdXJsR3JvdXAuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIHVwbG9hZEdyb3VwLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB1cGxvYWRSYWRpby5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICBpZiAodXBsb2FkUmFkaW8uY2hlY2tlZCkge1xuICAgICAgICB1cmxHcm91cC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB1cGxvYWRHcm91cC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFVSTOi+k+WFpemqjOivgVxuICAgIHVybElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1cmwgPSB1cmxJbnB1dC52YWx1ZS50cmltKCk7XG4gICAgICBpZiAodXJsKSB7XG4gICAgICAgIGNvbnN0IGlzVmFsaWQgPSBhd2FpdCB0aGlzLmNvbnRhY3RNYW5hZ2VyLnZhbGlkYXRlQXZhdGFyVXJsKHVybCk7XG4gICAgICAgIGlmIChpc1ZhbGlkKSB7XG4gICAgICAgICAgYXZhdGFyUHJldmlldy5zcmMgPSB1cmw7XG4gICAgICAgICAgYXZhdGFyUHJldmlldy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICB0aGlzLmNsZWFyRXJyb3IoJ3VybEVycm9yJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zaG93RXJyb3IoJ3VybEVycm9yJywgJ+aXoOaViOeahOWbvueJh1VSTCcpO1xuICAgICAgICAgIGF2YXRhclByZXZpZXcuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8g5paH5Lu25LiK5Lyg5oyJ6ZKu54K55Ye7XG4gICAgZmlsZVVwbG9hZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGZpbGVJbnB1dC5jbGljaygpO1xuICAgIH0pO1xuXG4gICAgLy8g5paH5Lu25LiK5Lyg5aSE55CGXG4gICAgZmlsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFzeW5jIGUgPT4ge1xuICAgICAgY29uc3QgZmlsZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS5maWxlcz8uWzBdO1xuICAgICAgaWYgKGZpbGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBkYXRhVXJsID0gYXdhaXQgdGhpcy5jb250YWN0TWFuYWdlci5wcm9jZXNzQXZhdGFyRmlsZShmaWxlKTtcbiAgICAgICAgICBhdmF0YXJQcmV2aWV3LnNyYyA9IGRhdGFVcmw7XG4gICAgICAgICAgYXZhdGFyUHJldmlldy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICB0aGlzLmNsZWFyRXJyb3IoJ2ZpbGVFcnJvcicpO1xuICAgICAgICAgIC8vIOabtOaWsOaMiemSruaWh+acrOaYvuekuumAieS4reeahOaWh+S7tuWQjVxuICAgICAgICAgIGZpbGVVcGxvYWRCdG4uaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgd2lkdGg9XCIxNlwiIGhlaWdodD1cIjE2XCI+XG4gICAgICAgICAgICAgIDxwYXRoIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBkPVwiTTE0LDJINkEyLDIgMCAwLDAgNCw0VjIwQTIsMiAwIDAsMCA2LDIySDE4QTIsMiAwIDAsMCAyMCwyMFY4TDE0LDJNMTgsMjBINlY0SDEzVjlIMThWMjBaXCIgLz5cbiAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgJHtmaWxlLm5hbWUubGVuZ3RoID4gMTUgPyBmaWxlLm5hbWUuc3Vic3RyaW5nKDAsIDE1KSArICcuLi4nIDogZmlsZS5uYW1lfVxuICAgICAgICAgIGA7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgdGhpcy5zaG93RXJyb3IoJ2ZpbGVFcnJvcicsIChlcnJvciBhcyBFcnJvcikubWVzc2FnZSk7XG4gICAgICAgICAgYXZhdGFyUHJldmlldy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyDlkI3np7Dpqozor4FcbiAgICBuYW1lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsICgpID0+IHtcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSB0aGlzLmNvbnRhY3RNYW5hZ2VyLnZhbGlkYXRlQ29udGFjdE5hbWUobmFtZUlucHV0LnZhbHVlKTtcbiAgICAgIGlmICghdmFsaWRhdGlvbi52YWxpZCkge1xuICAgICAgICB0aGlzLnNob3dFcnJvcignbmFtZUVycm9yJywgdmFsaWRhdGlvbi5lcnJvciEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jbGVhckVycm9yKCduYW1lRXJyb3InKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIOWPlua2iOaMiemSrlxuICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXlTb3VuZCgnY2xpY2snKTtcbiAgICAgIHRoaXMuaGlkZUFkZEZyaWVuZE1vZGFsKCk7XG4gICAgfSk7XG5cbiAgICAvLyDnoa7orqTmjInpkq5cbiAgICBjb25maXJtQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdjbGljaycpO1xuICAgICAgdGhpcy5oYW5kbGVBZGRGcmllbmQobW9kYWwpO1xuICAgIH0pO1xuXG4gICAgLy8g54K55Ye76YGu572p5YWz6ZetXG4gICAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgIGlmIChlLnRhcmdldCA9PT0gbW9kYWwpIHtcbiAgICAgICAgdGhpcy5oaWRlQWRkRnJpZW5kTW9kYWwoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDpmpDol4/mt7vliqDmnIvlj4vmqKHmgIHmoYZcbiAgICovXG4gIHByaXZhdGUgaGlkZUFkZEZyaWVuZE1vZGFsKCk6IHZvaWQge1xuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZEZyaWVuZE1vZGFsJyk7XG4gICAgaWYgKG1vZGFsKSB7XG4gICAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgbW9kYWwucmVtb3ZlKCk7XG4gICAgICB9LCAzMDApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlpITnkIbmt7vliqDmnIvlj4tcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgaGFuZGxlQWRkRnJpZW5kKG1vZGFsOiBIVE1MRWxlbWVudCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IG5hbWVJbnB1dCA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNmcmllbmROYW1lJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCB1cmxSYWRpbyA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNhdmF0YXJVcmwnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IHVybElucHV0ID0gbW9kYWwucXVlcnlTZWxlY3RvcignI2F2YXRhclVybElucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBmaWxlSW5wdXQgPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCcjYXZhdGFyRmlsZUlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBhdmF0YXJQcmV2aWV3ID0gbW9kYWwucXVlcnlTZWxlY3RvcignI2F2YXRhclByZXZpZXcnKSBhcyBIVE1MSW1hZ2VFbGVtZW50O1xuXG4gICAgLy8g6aqM6K+B5ZCN56ewXG4gICAgY29uc3QgbmFtZVZhbGlkYXRpb24gPSB0aGlzLmNvbnRhY3RNYW5hZ2VyLnZhbGlkYXRlQ29udGFjdE5hbWUobmFtZUlucHV0LnZhbHVlKTtcbiAgICBpZiAoIW5hbWVWYWxpZGF0aW9uLnZhbGlkKSB7XG4gICAgICB0aGlzLnNob3dFcnJvcignbmFtZUVycm9yJywgbmFtZVZhbGlkYXRpb24uZXJyb3IhKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyDojrflj5blpLTlg49cbiAgICBsZXQgYXZhdGFyID0gJyc7XG4gICAgaWYgKHVybFJhZGlvLmNoZWNrZWQpIHtcbiAgICAgIGNvbnN0IHVybCA9IHVybElucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgIGlmICh1cmwpIHtcbiAgICAgICAgY29uc3QgaXNWYWxpZCA9IGF3YWl0IHRoaXMuY29udGFjdE1hbmFnZXIudmFsaWRhdGVBdmF0YXJVcmwodXJsKTtcbiAgICAgICAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgICAgICAgdGhpcy5zaG93RXJyb3IoJ3VybEVycm9yJywgJ+aXoOaViOeahOWbvueJh1VSTCcpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhdmF0YXIgPSB1cmw7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGZpbGUgPSBmaWxlSW5wdXQuZmlsZXM/LlswXTtcbiAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXZhdGFyID0gYXdhaXQgdGhpcy5jb250YWN0TWFuYWdlci5wcm9jZXNzQXZhdGFyRmlsZShmaWxlKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICB0aGlzLnNob3dFcnJvcignZmlsZUVycm9yJywgKGVycm9yIGFzIEVycm9yKS5tZXNzYWdlKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDlpoLmnpzmsqHmnInorr7nva7lpLTlg4/vvIzkvb/nlKjpu5jorqTlpLTlg49cbiAgICBpZiAoIWF2YXRhcikge1xuICAgICAgYXZhdGFyID0gdGhpcy5jb250YWN0TWFuYWdlci5nZXREZWZhdWx0QXZhdGFyKG5hbWVJbnB1dC52YWx1ZS50cmltKCkpO1xuICAgIH1cblxuICAgIC8vIOa3u+WKoOiBlOezu+S6ulxuICAgIHRyeSB7XG4gICAgICBjb25zdCBuZXdDb250YWN0ID0gdGhpcy5jb250YWN0TWFuYWdlci5hZGRDb250YWN0KHtcbiAgICAgICAgbmFtZTogbmFtZUlucHV0LnZhbHVlLnRyaW0oKSxcbiAgICAgICAgYXZhdGFyLFxuICAgICAgICB0eXBlOiAnY2hhcmFjdGVyJyxcbiAgICAgICAgaXNPbmxpbmU6IHRydWUsXG4gICAgICAgIHRhZ3M6IFsn5pyL5Y+LJ10sXG4gICAgICB9KTtcblxuICAgICAgdGhpcy5zaG93VG9hc3QoYOaIkOWKn+a3u+WKoOaci+WPi++8miR7bmV3Q29udGFjdC5uYW1lfWAsICdpbmZvJyk7XG4gICAgICB0aGlzLmhpZGVBZGRGcmllbmRNb2RhbCgpO1xuXG4gICAgICAvLyDph43mlrDmmL7npLrmlrDlu7rogYrlpKnmqKHmgIHmoYbvvIznjrDlnKjljIXlkKvmlrDmt7vliqDnmoTogZTns7vkurpcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnNob3dOZXdDaGF0TW9kYWwoKTtcbiAgICAgIH0sIDMwMCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuc2hvd1RvYXN0KCfmt7vliqDmnIvlj4vlpLHotKUnLCAnZXJyb3InKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5pi+56S66ZSZ6K+v5L+h5oGvXG4gICAqL1xuICBwcml2YXRlIHNob3dFcnJvcihlbGVtZW50SWQ6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKTtcbiAgICBpZiAoZXJyb3JFbGVtZW50KSB7XG4gICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xuICAgICAgZXJyb3JFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDmuIXpmaTplJnor6/kv6Hmga9cbiAgICovXG4gIHByaXZhdGUgY2xlYXJFcnJvcihlbGVtZW50SWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCk7XG4gICAgaWYgKGVycm9yRWxlbWVudCkge1xuICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gICAgICBlcnJvckVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5aSE55CG5Yib5bu65paw6IGK5aSpXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZUNyZWF0ZU5ld0NoYXQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubmV3Q2hhdE1vZGFsRGF0YS5zZWxlY3RlZENvbnRhY3RzLnNpemUgPT09IDApIHtcbiAgICAgIHRoaXMuc2hvd1RvYXN0KCfor7fpgInmi6nogZTns7vkuronLCAnd2FybmluZycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHNlbGVjdGVkQ29udGFjdElkcyA9IEFycmF5LmZyb20odGhpcy5uZXdDaGF0TW9kYWxEYXRhLnNlbGVjdGVkQ29udGFjdHMpO1xuXG4gICAgaWYgKHRoaXMubmV3Q2hhdE1vZGFsRGF0YS50eXBlID09PSAnZ3JvdXAnKSB7XG4gICAgICAvLyDnvqTogYrmqKHlvI/vvJrkvb/nlKjnvqTogYrnrqHnkIblmajliJvlu7rnvqTogYpcbiAgICAgIGlmIChzZWxlY3RlZENvbnRhY3RJZHMubGVuZ3RoIDwgMikge1xuICAgICAgICB0aGlzLnNob3dUb2FzdCgn576k6IGK6Iez5bCR6ZyA6KaB6YCJ5oupMuS4quiBlOezu+S6uicsICd3YXJuaW5nJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5oaWRlTmV3Q2hhdE1vZGFsKCk7XG4gICAgICBpZiAodGhpcy5ncm91cENoYXRNYW5hZ2VyKSB7XG4gICAgICAgIHRoaXMuZ3JvdXBDaGF0TWFuYWdlci5jcmVhdGVHcm91cENoYXQoc2VsZWN0ZWRDb250YWN0SWRzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2hvd1RvYXN0KCfnvqTogYrlip/og73kuI3lj6/nlKjvvJrmnKrliJ3lp4vljJbnvqTogYrnrqHnkIblmagnLCAnZXJyb3InKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8g5Y2V6IGK5qih5byP77ya6Kem5Y+R5Y6f5pyJ55qE5Yib5bu65paw6IGK5aSp5LqL5Lu2XG4gICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgnY3JlYXRlTmV3Q2hhdCcsIHtcbiAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgdHlwZTogdGhpcy5uZXdDaGF0TW9kYWxEYXRhLnR5cGUsXG4gICAgICAgICAgY29udGFjdElkczogc2VsZWN0ZWRDb250YWN0SWRzLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgIHRoaXMuaGlkZU5ld0NoYXRNb2RhbCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bnvqTogYrmlbDmja4gLSDkuI3lho3ku45sb2NhbFN0b3JhZ2Xor7vlj5bvvIzov5Tlm57nqbrmlbDnu4RcbiAgICovXG4gIHByaXZhdGUgZ2V0R3JvdXBDaGF0RGF0YSgpOiBhbnlbXSB7XG4gICAgLy8g576k6IGK5pWw5o2u57uf5LiA5LuOY2hhdERhdGFNYXDkuK3or7vlj5bvvIzkuI3lho3kvb/nlKhsb2NhbFN0b3JhZ2VcbiAgICBjb25zb2xlLmxvZygn8J+UjSBbREVCVUddIGdldEdyb3VwQ2hhdERhdGEgLSDkuI3lho3ku45sb2NhbFN0b3JhZ2Xor7vlj5bnvqTogYrmlbDmja4nKTtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICAvKipcbiAgICog5bel5YW35pa55rOVXG4gICAqL1xuICBwcml2YXRlIGdldExhc3RNZXNzYWdlKG1lc3NhZ2VzOiBhbnlbXSk6IGFueSB8IG51bGwge1xuICAgIHJldHVybiBtZXNzYWdlcy5sZW5ndGggPiAwID8gbWVzc2FnZXNbbWVzc2FnZXMubGVuZ3RoIC0gMV0gOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIOS7juiBiuWkqeWQjeensOS4reaPkOWPluaYvuekuuWQjeensFxuICAgKiBAcGFyYW0gY2hhdE5hbWUg5Y6f5aeL6IGK5aSp5ZCN56ewXG4gICAqIEByZXR1cm5zIOaPkOWPluWQjueahOaYvuekuuWQjeensFxuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0RGlzcGxheU5hbWUoY2hhdE5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8g5aSE55CGIFwi5ZKMWFhY55qE6IGK5aSpXCIg5qC85byP77yM5o+Q5Y+W6KeS6Imy5ZCNXG4gICAgY29uc3Qgc2luZ2xlQ2hhdE1hdGNoID0gY2hhdE5hbWUubWF0Y2goL17lkowoLisp55qE6IGK5aSpJC8pO1xuICAgIGlmIChzaW5nbGVDaGF0TWF0Y2gpIHtcbiAgICAgIHJldHVybiBzaW5nbGVDaGF0TWF0Y2hbMV07XG4gICAgfVxuXG4gICAgLy8g5aSE55CG576k6IGK5qC85byP77yM5aaCIFwiWFhY44CBWVlZ55qE576k6IGKXCJcbiAgICBjb25zdCBncm91cENoYXRNYXRjaCA9IGNoYXROYW1lLm1hdGNoKC9eKC4rKeeahOe+pOiBiiQvKTtcbiAgICBpZiAoZ3JvdXBDaGF0TWF0Y2gpIHtcbiAgICAgIHJldHVybiBncm91cENoYXRNYXRjaFsxXTtcbiAgICB9XG5cbiAgICAvLyDlpITnkIbmlrDnmoTnvqTogYrmoLzlvI/vvIznm7TmjqXov5Tlm57nvqTlkI3vvIjlm6DkuLrnjrDlnKhjaGF0TmFtZeWwseaYr+e+pOWQje+8iVxuICAgIC8vIOWmguaenGNoYXROYW1l5bey57uP5piv57qv576k5ZCN77yM55u05o6l6L+U5ZueXG4gICAgcmV0dXJuIGNoYXROYW1lO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIpOaWreiBiuWkqeWQjeensOaYr+WQpuS4uuKAnOacieaViOWNleiBii/ml6flvI/nvqTogYrigJ3lkb3lkI1cbiAgICogLSDljZXogYrvvJrlkox4eHjnmoTogYrlpKlcbiAgICogLSDml6flvI/nvqTogYrvvJp4eHjnmoTnvqTogYrvvIjmlrDnu5PmnoTnlLEgaXNHcm91cENoYXQg6KaG55uW77yJXG4gICAqIC0g5pi+5byP5o6S6Zmk77ya5Yqo5oCBXG4gICAqL1xuICBwcml2YXRlIGlzRWxpZ2libGVDaGF0TmFtZShjaGF0TmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgaWYgKCFjaGF0TmFtZSkgcmV0dXJuIGZhbHNlO1xuICAgIGNvbnN0IG5hbWUgPSBjaGF0TmFtZS50cmltKCk7XG4gICAgaWYgKC9eXFxbP+WKqOaAgVxcXT8kLy50ZXN0KG5hbWUpKSByZXR1cm4gZmFsc2U7IC8vIOaYvuW8j+aOkumZpOKAnOWKqOaAgeKAnVxuICAgIHJldHVybiAvXuWSjC4r55qE6IGK5aSpJC8udGVzdChuYW1lKSB8fCAv55qE576k6IGKJC8udGVzdChuYW1lKTtcbiAgfVxuXG4gIHByaXZhdGUgZm9ybWF0TWVzc2FnZVByZXZpZXcobWVzc2FnZTogYW55KTogc3RyaW5nIHtcbiAgICBsZXQgcHJldmlldyA9ICcnO1xuXG4gICAgLy8g5qC55o2u5raI5oGv57G75Z6L55Sf5oiQ6aKE6KeI5YaF5a65XG4gICAgc3dpdGNoIChtZXNzYWdlLm1lc3NhZ2VUeXBlKSB7XG4gICAgICBjYXNlICd0ZXh0JzpcbiAgICAgICAgcHJldmlldyA9IG1lc3NhZ2UuY29udGVudDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdpbWFnZSc6XG4gICAgICAgIHByZXZpZXcgPSAnW+WbvueJh10nO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3ZvaWNlJzpcbiAgICAgICAgcHJldmlldyA9ICdb6K+t6Z+zXSc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc3RpY2tlcic6XG4gICAgICAgIHByZXZpZXcgPSAnW+ihqOaDheWMhV0nO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2xvY2F0aW9uJzpcbiAgICAgICAgcHJldmlldyA9ICdb5L2N572uXSc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndHJhbnNmZXInOlxuICAgICAgICBwcmV2aWV3ID0gJ1vovazotKZdJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBwcmV2aWV3ID0gbWVzc2FnZS5jb250ZW50O1xuICAgIH1cblxuICAgIC8vIOWmguaenOaYr+e+pOiBiua2iOaBr++8jOa3u+WKoOWPkemAgeiAheWQjeensOWJjee8gFxuICAgIGlmIChtZXNzYWdlLnR5cGUgPT09ICdHJykge1xuICAgICAgY29uc3Qgc2VuZGVyTmFtZSA9IG1lc3NhZ2Uuc2VuZGVyID09PSAne3t1c2VyfX0nID8gJ+aIkScgOiBtZXNzYWdlLnNlbmRlckRpc3BsYXlOYW1lIHx8IG1lc3NhZ2Uuc2VuZGVyO1xuICAgICAgcHJldmlldyA9IGAke3NlbmRlck5hbWV9OiAke3ByZXZpZXd9YDtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJldmlldy5sZW5ndGggPiAzMCA/IHByZXZpZXcuc3Vic3RyaW5nKDAsIDMwKSArICcuLi4nIDogcHJldmlldztcbiAgfVxuXG4gIHByaXZhdGUgZm9ybWF0QWJzb2x1dGVUaW1lKHRpbWVzdGFtcDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IG1lc3NhZ2VUaW1lID0gbmV3IERhdGUoKTtcblxuICAgIGlmICh0aW1lc3RhbXAuaW5jbHVkZXMoJzonKSkge1xuICAgICAgY29uc3QgW2hvdXJzLCBtaW51dGVzXSA9IHRpbWVzdGFtcC5zcGxpdCgnOicpO1xuICAgICAgbWVzc2FnZVRpbWUuc2V0SG91cnMocGFyc2VJbnQoaG91cnMpLCBwYXJzZUludChtaW51dGVzKSwgMCwgMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aW1lc3RhbXA7XG4gICAgfVxuXG4gICAgY29uc3QgZGlmZk1zID0gbm93LmdldFRpbWUoKSAtIG1lc3NhZ2VUaW1lLmdldFRpbWUoKTtcbiAgICBjb25zdCBkaWZmRGF5cyA9IE1hdGguZmxvb3IoZGlmZk1zIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcblxuICAgIC8vIOWkhOeQhui0n+aVsOWkqeaVsO+8iOa2iOaBr+aXtumXtOavlOW9k+WJjeaXtumXtOaZmueahOaDheWGte+8iVxuICAgIGlmIChkaWZmRGF5cyA8IDApIHtcbiAgICAgIHJldHVybiB0aW1lc3RhbXA7IC8vIOebtOaOpeaYvuekuuaXtumXtOaIs1xuICAgIH0gZWxzZSBpZiAoZGlmZkRheXMgPT09IDApIHtcbiAgICAgIHJldHVybiB0aW1lc3RhbXA7XG4gICAgfSBlbHNlIGlmIChkaWZmRGF5cyA9PT0gMSkge1xuICAgICAgcmV0dXJuICfmmKjlpKknO1xuICAgIH0gZWxzZSBpZiAoZGlmZkRheXMgPCA3KSB7XG4gICAgICByZXR1cm4gYCR7ZGlmZkRheXN95aSp5YmNYDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG1lc3NhZ2VUaW1lLnRvTG9jYWxlRGF0ZVN0cmluZygnemgtQ04nLCB7IG1vbnRoOiAnc2hvcnQnLCBkYXk6ICdudW1lcmljJyB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldExhc3RNZXNzYWdlVGltZXN0YW1wKGNoYXRJZDogc3RyaW5nLCBjaGF0RGF0YU1hcDogTWFwPHN0cmluZywgQ2hhdERhdGE+KTogbnVtYmVyIHtcbiAgICBjb25zdCBjaGF0RGF0YSA9IGNoYXREYXRhTWFwLmdldChjaGF0SWQpO1xuICAgIGlmICghY2hhdERhdGEgfHwgY2hhdERhdGEubWVzc2FnZXMubGVuZ3RoID09PSAwKSByZXR1cm4gMDtcblxuICAgIGNvbnN0IGxhc3RNZXNzYWdlID0gY2hhdERhdGEubWVzc2FnZXNbY2hhdERhdGEubWVzc2FnZXMubGVuZ3RoIC0gMV07XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcblxuICAgIGlmIChsYXN0TWVzc2FnZS50aW1lc3RhbXAuaW5jbHVkZXMoJzonKSkge1xuICAgICAgY29uc3QgW2hvdXJzLCBtaW51dGVzXSA9IGxhc3RNZXNzYWdlLnRpbWVzdGFtcC5zcGxpdCgnOicpO1xuICAgICAgY29uc3QgbWVzc2FnZVRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgICAgbWVzc2FnZVRpbWUuc2V0SG91cnMocGFyc2VJbnQoaG91cnMpLCBwYXJzZUludChtaW51dGVzKSwgMCwgMCk7XG4gICAgICByZXR1cm4gbWVzc2FnZVRpbWUuZ2V0VGltZSgpO1xuICAgIH1cblxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXREZWZhdWx0QXZhdGFyKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8g57uf5LiA5L2/55So6buY6K6k5aS05YOPXG4gICAgcmV0dXJuICdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvdThjY3k1LmpwZyc7XG4gIH1cblxuICAvKipcbiAgICog5Yid5aeL5YyW54q25oCB5qCPXG4gICAqL1xuICBwcml2YXRlIGluaXRpYWxpemVTdGF0dXNCYXIoKTogdm9pZCB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXRMaXN0U3RhdHVzQmFyQ29udGFpbmVyJyk7XG4gICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgdGhpcy5zdGF0dXNCYXIgPSBTdGF0dXNCYXIuY3JlYXRlKGNvbnRhaW5lcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOmUgOavgeeKtuaAgeagj1xuICAgKi9cbiAgcHJpdmF0ZSBkZXN0cm95U3RhdHVzQmFyKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnN0YXR1c0Jhcikge1xuICAgICAgdGhpcy5zdGF0dXNCYXIuZGVzdHJveSgpO1xuICAgICAgdGhpcy5zdGF0dXNCYXIgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2hvd1RvYXN0KG1lc3NhZ2U6IHN0cmluZywgdHlwZTogJ2luZm8nIHwgJ3dhcm5pbmcnIHwgJ2Vycm9yJyA9ICdpbmZvJyk6IHZvaWQge1xuICAgIC8vIOS9v+eUqHRvYXN0cuaYvuekuuaPkOekuuS/oeaBr1xuICAgIGlmICh0eXBlb2YgdG9hc3RyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdG9hc3RyW3R5cGVdKG1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhgWyR7dHlwZS50b1VwcGVyQ2FzZSgpfV0gJHttZXNzYWdlfWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDliIfmjaLliLBcIuaIkeeahFwi6aG16Z2iXG4gICAqL1xuICBwcml2YXRlIHN3aXRjaFRvUHJvZmlsZSgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygn8J+UhCDku47ogYrlpKnliJfooajliIfmjaLliLDmiJHnmoTpobXpnaInKTtcblxuICAgIC8vIOinpuWPkemhtemdouWIh+aNouS6i+S7tlxuICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdwYWdlU3dpdGNoJywge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIGZyb206ICdjaGF0TGlzdCcsXG4gICAgICAgIHRvOiAncHJvZmlsZScsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIh+aNouWIsFwi5Yqo5oCBXCLpobXpnaJcbiAgICovXG4gIHByaXZhdGUgc3dpdGNoVG9GZWVkKCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKCfwn5SEIOS7juiBiuWkqeWIl+ihqOWIh+aNouWIsOWKqOaAgemhtemdoicpO1xuXG4gICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ3BhZ2VTd2l0Y2gnLCB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgZnJvbTogJ2NoYXRMaXN0JyxcbiAgICAgICAgdG86ICdmZWVkJyxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gIH1cblxuICAvKipcbiAgICog6I635Y+W6IGU57O75Lq6566h55CG5ZmoXG4gICAqL1xuICBwdWJsaWMgZ2V0Q29udGFjdE1hbmFnZXIoKTogQ29udGFjdE1hbmFnZXIge1xuICAgIHJldHVybiB0aGlzLmNvbnRhY3RNYW5hZ2VyO1xuICB9XG5cbiAgLyoqXG4gICAqIOWkhOeQhue8lui+keiBlOezu+S6ulxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVFZGl0Q29udGFjdChjb250YWN0SWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IGNvbnRhY3QgPSB0aGlzLmNvbnRhY3RNYW5hZ2VyLmdldENvbnRhY3RCeUlkKGNvbnRhY3RJZCk7XG4gICAgaWYgKGNvbnRhY3QpIHtcbiAgICAgIHRoaXMuaGlkZU5ld0NoYXRNb2RhbCgpO1xuICAgICAgdGhpcy5zaG93RWRpdENvbnRhY3RNb2RhbChjb250YWN0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5aSE55CG5Yig6Zmk6IGU57O75Lq6XG4gICAqL1xuICBwcml2YXRlIGhhbmRsZURlbGV0ZUNvbnRhY3QoY29udGFjdElkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBjb250YWN0ID0gdGhpcy5jb250YWN0TWFuYWdlci5nZXRDb250YWN0QnlJZChjb250YWN0SWQpO1xuICAgIGlmIChjb250YWN0KSB7XG4gICAgICB0aGlzLmhpZGVOZXdDaGF0TW9kYWwoKTtcbiAgICAgIHRoaXMuc2hvd0RlbGV0ZUNvbmZpcm1Nb2RhbChjb250YWN0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5pi+56S657yW6L6R6IGU57O75Lq65qih5oCB5qGGXG4gICAqL1xuICBwcml2YXRlIHNob3dFZGl0Q29udGFjdE1vZGFsKGNvbnRhY3Q6IGFueSk6IHZvaWQge1xuICAgIGNvbnN0IG1vZGFsID0gdGhpcy5jcmVhdGVFZGl0Q29udGFjdE1vZGFsKGNvbnRhY3QpO1xuICAgIGNvbnN0IGludGVyZmFjZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbnRlcmZhY2UtY29udGFpbmVyJyk7XG4gICAgaWYgKGludGVyZmFjZUNvbnRhaW5lcikge1xuICAgICAgaW50ZXJmYWNlQ29udGFpbmVyLmFwcGVuZENoaWxkKG1vZGFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtb2RhbCk7XG4gICAgfVxuXG4gICAgLy8g5pi+56S65qih5oCB5qGGXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XG4gICAgfSwgMTApO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIm+W7uue8lui+keiBlOezu+S6uuaooeaAgeahhlxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVFZGl0Q29udGFjdE1vZGFsKGNvbnRhY3Q6IGFueSk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgb3ZlcmxheS5jbGFzc05hbWUgPSAnbW9kYWwtb3ZlcmxheSBlZGl0LWNvbnRhY3QtbW9kYWwnO1xuICAgIG92ZXJsYXkuaWQgPSAnZWRpdENvbnRhY3RNb2RhbCc7XG5cbiAgICBvdmVybGF5LmlubmVySFRNTCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250YWluZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLXRpdGxlXCI+57yW6L6R6IGU57O75Lq6PC9kaXY+XG4gICAgICAgIDxmb3JtIGNsYXNzPVwiZWRpdC1jb250YWN0LWZvcm1cIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cImVkaXRDb250YWN0TmFtZVwiPuinkuiJsuWQjeensDwvbGFiZWw+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cImVkaXRDb250YWN0TmFtZVwiIHZhbHVlPVwiJHtcbiAgICAgICAgICAgICAgY29udGFjdC5uYW1lXG4gICAgICAgICAgICB9XCIgcGxhY2Vob2xkZXI9XCLor7fovpPlhaXop5LoibLnnJ/lkI1cIiBtYXhsZW5ndGg9XCIyMFwiIHJlcXVpcmVkPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImVycm9yLW1lc3NhZ2VcIiBpZD1cImVkaXROYW1lRXJyb3JcIj48L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgPGxhYmVsPuWktOWDj+iuvue9rjwvbGFiZWw+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYXZhdGFyLW9wdGlvbnNcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImF2YXRhci1vcHRpb25cIiBkYXRhLXR5cGU9XCJ1cmxcIj5cbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cImVkaXRBdmF0YXJUeXBlXCIgdmFsdWU9XCJ1cmxcIiBpZD1cImVkaXRBdmF0YXJVcmxcIiAke1xuICAgICAgICAgICAgICAgICAgY29udGFjdC5hdmF0YXIuc3RhcnRzV2l0aCgnaHR0cCcpID8gJ2NoZWNrZWQnIDogJydcbiAgICAgICAgICAgICAgICB9PlxuICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJlZGl0QXZhdGFyVXJsXCI+5Zu+54mH6ZO+5o6lPC9sYWJlbD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhdmF0YXItb3B0aW9uXCIgZGF0YS10eXBlPVwidXBsb2FkXCI+XG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJlZGl0QXZhdGFyVHlwZVwiIHZhbHVlPVwidXBsb2FkXCIgaWQ9XCJlZGl0QXZhdGFyVXBsb2FkXCIgJHtcbiAgICAgICAgICAgICAgICAgIGNvbnRhY3QuYXZhdGFyLnN0YXJ0c1dpdGgoJ2RhdGE6JykgPyAnY2hlY2tlZCcgOiAnJ1xuICAgICAgICAgICAgICAgIH0+XG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImVkaXRBdmF0YXJVcGxvYWRcIj7mnKzlnLDkuIrkvKA8L2xhYmVsPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIiBpZD1cImVkaXRVcmxHcm91cFwiICR7XG4gICAgICAgICAgICBjb250YWN0LmF2YXRhci5zdGFydHNXaXRoKCdkYXRhOicpID8gJ3N0eWxlPVwiZGlzcGxheTogbm9uZTtcIicgOiAnJ1xuICAgICAgICAgIH0+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cInVybFwiIGlkPVwiZWRpdEF2YXRhclVybElucHV0XCIgdmFsdWU9XCIke1xuICAgICAgICAgICAgICBjb250YWN0LmF2YXRhci5zdGFydHNXaXRoKCdodHRwJykgPyBjb250YWN0LmF2YXRhciA6ICcnXG4gICAgICAgICAgICB9XCIgcGxhY2Vob2xkZXI9XCLor7fovpPlhaXlm77niYdVUkxcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJlcnJvci1tZXNzYWdlXCIgaWQ9XCJlZGl0VXJsRXJyb3JcIj48L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCIgaWQ9XCJlZGl0VXBsb2FkR3JvdXBcIiAke1xuICAgICAgICAgICAgY29udGFjdC5hdmF0YXIuc3RhcnRzV2l0aCgnaHR0cCcpID8gJ3N0eWxlPVwiZGlzcGxheTogbm9uZTtcIicgOiAnJ1xuICAgICAgICAgIH0+XG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImZpbGUtdXBsb2FkLWJ0blwiIGlkPVwiZWRpdEZpbGVVcGxvYWRCdG5cIj5cbiAgICAgICAgICAgICAgPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgd2lkdGg9XCIxNlwiIGhlaWdodD1cIjE2XCI+XG4gICAgICAgICAgICAgICAgPHBhdGggZmlsbD1cImN1cnJlbnRDb2xvclwiIGQ9XCJNMTQsMkg2QTIsMiAwIDAsMCA0LDRWMjBBMiwyIDAgMCwwIDYsMjJIMThBMiwyIDAgMCwwIDIwLDIwVjhMMTQsMk0xOCwyMEg2VjRIMTNWOUgxOFYyMFpcIiAvPlxuICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAg6YCJ5oup5pys5Zyw5paH5Lu2XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZmlsZVwiIGlkPVwiZWRpdEF2YXRhckZpbGVJbnB1dFwiIGFjY2VwdD1cImltYWdlLypcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZXJyb3ItbWVzc2FnZVwiIGlkPVwiZWRpdEZpbGVFcnJvclwiPjwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImF2YXRhci1wcmV2aWV3XCI+XG4gICAgICAgICAgICA8aW1nIGlkPVwiZWRpdEF2YXRhclByZXZpZXdcIiBzcmM9XCIke2NvbnRhY3QuYXZhdGFyfVwiIGFsdD1cIuWktOWDj+mihOiniFwiPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Zvcm0+XG4gICAgICAgIFxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtYnV0dG9uc1wiPlxuICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwibW9kYWwtYnRuIGNhbmNlbC1idG5cIj7lj5bmtog8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cIm1vZGFsLWJ0biBjb25maXJtLWJ0blwiPuS/neWtmDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG5cbiAgICAvLyDnu5Hlrprkuovku7ZcbiAgICB0aGlzLmJpbmRFZGl0Q29udGFjdE1vZGFsRXZlbnRzKG92ZXJsYXksIGNvbnRhY3QpO1xuXG4gICAgcmV0dXJuIG92ZXJsYXk7XG4gIH1cblxuICAvKipcbiAgICog57uR5a6a57yW6L6R6IGU57O75Lq65qih5oCB5qGG5LqL5Lu2XG4gICAqL1xuICBwcml2YXRlIGJpbmRFZGl0Q29udGFjdE1vZGFsRXZlbnRzKG1vZGFsOiBIVE1MRWxlbWVudCwgY29udGFjdDogYW55KTogdm9pZCB7XG4gICAgY29uc3QgbmFtZUlucHV0ID0gbW9kYWwucXVlcnlTZWxlY3RvcignI2VkaXRDb250YWN0TmFtZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgdXJsUmFkaW8gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCcjZWRpdEF2YXRhclVybCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgdXBsb2FkUmFkaW8gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCcjZWRpdEF2YXRhclVwbG9hZCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgdXJsSW5wdXQgPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCcjZWRpdEF2YXRhclVybElucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBmaWxlSW5wdXQgPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCcjZWRpdEF2YXRhckZpbGVJbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgZmlsZVVwbG9hZEJ0biA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNlZGl0RmlsZVVwbG9hZEJ0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgIGNvbnN0IHVybEdyb3VwID0gbW9kYWwucXVlcnlTZWxlY3RvcignI2VkaXRVcmxHcm91cCcpIGFzIEhUTUxFbGVtZW50O1xuICAgIGNvbnN0IHVwbG9hZEdyb3VwID0gbW9kYWwucXVlcnlTZWxlY3RvcignI2VkaXRVcGxvYWRHcm91cCcpIGFzIEhUTUxFbGVtZW50O1xuICAgIGNvbnN0IGF2YXRhclByZXZpZXcgPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCcjZWRpdEF2YXRhclByZXZpZXcnKSBhcyBIVE1MSW1hZ2VFbGVtZW50O1xuICAgIGNvbnN0IGNhbmNlbEJ0biA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5jYW5jZWwtYnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgY29uc3QgY29uZmlybUJ0biA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5jb25maXJtLWJ0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuXG4gICAgLy8g5aS05YOP57G75Z6L5YiH5o2iXG4gICAgdXJsUmFkaW8uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgaWYgKHVybFJhZGlvLmNoZWNrZWQpIHtcbiAgICAgICAgdXJsR3JvdXAuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIHVwbG9hZEdyb3VwLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB1cGxvYWRSYWRpby5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICBpZiAodXBsb2FkUmFkaW8uY2hlY2tlZCkge1xuICAgICAgICB1cmxHcm91cC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB1cGxvYWRHcm91cC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFVSTOi+k+WFpemqjOivgVxuICAgIHVybElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1cmwgPSB1cmxJbnB1dC52YWx1ZS50cmltKCk7XG4gICAgICBpZiAodXJsKSB7XG4gICAgICAgIGNvbnN0IGlzVmFsaWQgPSBhd2FpdCB0aGlzLmNvbnRhY3RNYW5hZ2VyLnZhbGlkYXRlQXZhdGFyVXJsKHVybCk7XG4gICAgICAgIGlmIChpc1ZhbGlkKSB7XG4gICAgICAgICAgYXZhdGFyUHJldmlldy5zcmMgPSB1cmw7XG4gICAgICAgICAgdGhpcy5jbGVhckVycm9yKCdlZGl0VXJsRXJyb3InKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNob3dFcnJvcignZWRpdFVybEVycm9yJywgJ+aXoOaViOeahOWbvueJh1VSTCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyDmlofku7bkuIrkvKDmjInpkq7ngrnlh7tcbiAgICBmaWxlVXBsb2FkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgZmlsZUlucHV0LmNsaWNrKCk7XG4gICAgfSk7XG5cbiAgICAvLyDmlofku7bkuIrkvKDlpITnkIZcbiAgICBmaWxlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgYXN5bmMgZSA9PiB7XG4gICAgICBjb25zdCBmaWxlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmZpbGVzPy5bMF07XG4gICAgICBpZiAoZmlsZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGRhdGFVcmwgPSBhd2FpdCB0aGlzLmNvbnRhY3RNYW5hZ2VyLnByb2Nlc3NBdmF0YXJGaWxlKGZpbGUpO1xuICAgICAgICAgIGF2YXRhclByZXZpZXcuc3JjID0gZGF0YVVybDtcbiAgICAgICAgICB0aGlzLmNsZWFyRXJyb3IoJ2VkaXRGaWxlRXJyb3InKTtcbiAgICAgICAgICAvLyDmm7TmlrDmjInpkq7mlofmnKzmmL7npLrpgInkuK3nmoTmlofku7blkI1cbiAgICAgICAgICBmaWxlVXBsb2FkQnRuLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiIHdpZHRoPVwiMTZcIiBoZWlnaHQ9XCIxNlwiPlxuICAgICAgICAgICAgICA8cGF0aCBmaWxsPVwiY3VycmVudENvbG9yXCIgZD1cIk0xNCwySDZBMiwyIDAgMCwwIDQsNFYyMEEyLDIgMCAwLDAgNiwyMkgxOEEyLDIgMCAwLDAgMjAsMjBWOEwxNCwyTTE4LDIwSDZWNEgxM1Y5SDE4VjIwWlwiIC8+XG4gICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICR7ZmlsZS5uYW1lLmxlbmd0aCA+IDE1ID8gZmlsZS5uYW1lLnN1YnN0cmluZygwLCAxNSkgKyAnLi4uJyA6IGZpbGUubmFtZX1cbiAgICAgICAgICBgO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHRoaXMuc2hvd0Vycm9yKCdlZGl0RmlsZUVycm9yJywgKGVycm9yIGFzIEVycm9yKS5tZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8g5ZCN56ew6aqM6K+BXG4gICAgbmFtZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoKSA9PiB7XG4gICAgICBjb25zdCBuZXdOYW1lID0gbmFtZUlucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgIGlmIChuZXdOYW1lICE9PSBjb250YWN0Lm5hbWUpIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IHRoaXMuY29udGFjdE1hbmFnZXIudmFsaWRhdGVDb250YWN0TmFtZShuZXdOYW1lKTtcbiAgICAgICAgaWYgKCF2YWxpZGF0aW9uLnZhbGlkKSB7XG4gICAgICAgICAgdGhpcy5zaG93RXJyb3IoJ2VkaXROYW1lRXJyb3InLCB2YWxpZGF0aW9uLmVycm9yISk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5jbGVhckVycm9yKCdlZGl0TmFtZUVycm9yJyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY2xlYXJFcnJvcignZWRpdE5hbWVFcnJvcicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8g5Y+W5raI5oyJ6ZKuXG4gICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdjbGljaycpO1xuICAgICAgdGhpcy5oaWRlRWRpdENvbnRhY3RNb2RhbCgpO1xuICAgIH0pO1xuXG4gICAgLy8g56Gu6K6k5oyJ6ZKuXG4gICAgY29uZmlybUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXlTb3VuZCgnY2xpY2snKTtcbiAgICAgIHRoaXMuaGFuZGxlU2F2ZUVkaXRDb250YWN0KG1vZGFsLCBjb250YWN0KTtcbiAgICB9KTtcblxuICAgIC8vIOeCueWHu+mBrue9qeWFs+mXrVxuICAgIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICBpZiAoZS50YXJnZXQgPT09IG1vZGFsKSB7XG4gICAgICAgIHRoaXMuaGlkZUVkaXRDb250YWN0TW9kYWwoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlpITnkIbkv53lrZjnvJbovpHogZTns7vkurpcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgaGFuZGxlU2F2ZUVkaXRDb250YWN0KG1vZGFsOiBIVE1MRWxlbWVudCwgb3JpZ2luYWxDb250YWN0OiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBuYW1lSW5wdXQgPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCcjZWRpdENvbnRhY3ROYW1lJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCB1cmxSYWRpbyA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNlZGl0QXZhdGFyVXJsJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCB1cmxJbnB1dCA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNlZGl0QXZhdGFyVXJsSW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IGZpbGVJbnB1dCA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNlZGl0QXZhdGFyRmlsZUlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBhdmF0YXJQcmV2aWV3ID0gbW9kYWwucXVlcnlTZWxlY3RvcignI2VkaXRBdmF0YXJQcmV2aWV3JykgYXMgSFRNTEltYWdlRWxlbWVudDtcblxuICAgIC8vIOmqjOivgeWQjeensFxuICAgIGNvbnN0IG5ld05hbWUgPSBuYW1lSW5wdXQudmFsdWUudHJpbSgpO1xuICAgIGlmIChuZXdOYW1lICE9PSBvcmlnaW5hbENvbnRhY3QubmFtZSkge1xuICAgICAgY29uc3QgbmFtZVZhbGlkYXRpb24gPSB0aGlzLmNvbnRhY3RNYW5hZ2VyLnZhbGlkYXRlQ29udGFjdE5hbWUobmV3TmFtZSk7XG4gICAgICBpZiAoIW5hbWVWYWxpZGF0aW9uLnZhbGlkKSB7XG4gICAgICAgIHRoaXMuc2hvd0Vycm9yKCdlZGl0TmFtZUVycm9yJywgbmFtZVZhbGlkYXRpb24uZXJyb3IhKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIOiOt+WPluWktOWDj1xuICAgIGxldCBhdmF0YXIgPSBvcmlnaW5hbENvbnRhY3QuYXZhdGFyO1xuICAgIGlmICh1cmxSYWRpby5jaGVja2VkKSB7XG4gICAgICBjb25zdCB1cmwgPSB1cmxJbnB1dC52YWx1ZS50cmltKCk7XG4gICAgICBpZiAodXJsICYmIHVybCAhPT0gb3JpZ2luYWxDb250YWN0LmF2YXRhcikge1xuICAgICAgICBjb25zdCBpc1ZhbGlkID0gYXdhaXQgdGhpcy5jb250YWN0TWFuYWdlci52YWxpZGF0ZUF2YXRhclVybCh1cmwpO1xuICAgICAgICBpZiAoIWlzVmFsaWQpIHtcbiAgICAgICAgICB0aGlzLnNob3dFcnJvcignZWRpdFVybEVycm9yJywgJ+aXoOaViOeahOWbvueJh1VSTCcpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhdmF0YXIgPSB1cmw7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGZpbGUgPSBmaWxlSW5wdXQuZmlsZXM/LlswXTtcbiAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXZhdGFyID0gYXdhaXQgdGhpcy5jb250YWN0TWFuYWdlci5wcm9jZXNzQXZhdGFyRmlsZShmaWxlKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICB0aGlzLnNob3dFcnJvcignZWRpdEZpbGVFcnJvcicsIChlcnJvciBhcyBFcnJvcikubWVzc2FnZSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGF2YXRhclByZXZpZXcuc3JjLnN0YXJ0c1dpdGgoJ2RhdGE6JykpIHtcbiAgICAgICAgYXZhdGFyID0gYXZhdGFyUHJldmlldy5zcmM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8g5pu05paw6IGU57O75Lq6XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN1Y2Nlc3MgPSB0aGlzLmNvbnRhY3RNYW5hZ2VyLnVwZGF0ZUNvbnRhY3Qob3JpZ2luYWxDb250YWN0LmlkLCB7XG4gICAgICAgIG5hbWU6IG5ld05hbWUsXG4gICAgICAgIGF2YXRhcjogYXZhdGFyLFxuICAgICAgfSk7XG5cbiAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgIC8vIOWQjOatpeaJgOacieebuOWFs+eahOWktOWDj+aYvuekulxuICAgICAgICB0aGlzLnN5bmNBdmF0YXJBY3Jvc3NJbnRlcmZhY2Uob3JpZ2luYWxDb250YWN0Lm5hbWUsIG5ld05hbWUsIGF2YXRhcik7XG5cbiAgICAgICAgLy8g6YCa55+l5YW25LuW57uE5Lu26IGU57O75Lq65bey5pu05pawXG4gICAgICAgIHRoaXMubm90aWZ5Q29udGFjdFVwZGF0ZWQob3JpZ2luYWxDb250YWN0Lm5hbWUsIG5ld05hbWUsIGF2YXRhcik7XG5cbiAgICAgICAgdGhpcy5zaG93VG9hc3QoYOiBlOezu+S6uiBcIiR7bmV3TmFtZX1cIiDlt7Lmm7TmlrBgLCAnaW5mbycpO1xuICAgICAgICB0aGlzLmhpZGVFZGl0Q29udGFjdE1vZGFsKCk7XG5cbiAgICAgICAgLy8g6YeN5paw5pi+56S65paw5bu66IGK5aSp5qih5oCB5qGG5bm25Yi35paw6IGU57O75Lq65YiX6KGoXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuc2hvd05ld0NoYXRNb2RhbCgpO1xuICAgICAgICAgIC8vIOmAmuefpemcgOimgeWIt+aWsOiBiuWkqeWIl+ihqFxuICAgICAgICAgIHRoaXMubm90aWZ5UmVmcmVzaENoYXRMaXN0KCk7XG4gICAgICAgIH0sIDMwMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNob3dUb2FzdCgn5pu05paw6IGU57O75Lq65aSx6LSlJywgJ2Vycm9yJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuc2hvd1RvYXN0KCfmm7TmlrDogZTns7vkurrlpLHotKUnLCAnZXJyb3InKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog6ZqQ6JeP57yW6L6R6IGU57O75Lq65qih5oCB5qGGXG4gICAqL1xuICBwcml2YXRlIGhpZGVFZGl0Q29udGFjdE1vZGFsKCk6IHZvaWQge1xuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRDb250YWN0TW9kYWwnKTtcbiAgICBpZiAobW9kYWwpIHtcbiAgICAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBtb2RhbC5yZW1vdmUoKTtcbiAgICAgIH0sIDMwMCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOaYvuekuuWIoOmZpOehruiupOaooeaAgeahhlxuICAgKi9cbiAgcHJpdmF0ZSBzaG93RGVsZXRlQ29uZmlybU1vZGFsKGNvbnRhY3Q6IGFueSk6IHZvaWQge1xuICAgIGNvbnN0IG1vZGFsID0gdGhpcy5jcmVhdGVEZWxldGVDb25maXJtTW9kYWwoY29udGFjdCk7XG4gICAgY29uc3QgaW50ZXJmYWNlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmludGVyZmFjZS1jb250YWluZXInKTtcbiAgICBpZiAoaW50ZXJmYWNlQ29udGFpbmVyKSB7XG4gICAgICBpbnRlcmZhY2VDb250YWluZXIuYXBwZW5kQ2hpbGQobW9kYWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1vZGFsKTtcbiAgICB9XG5cbiAgICAvLyDmmL7npLrmqKHmgIHmoYZcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgICB9LCAxMCk7XG4gIH1cblxuICAvKipcbiAgICog5Yib5bu65Yig6Zmk56Gu6K6k5qih5oCB5qGGXG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZURlbGV0ZUNvbmZpcm1Nb2RhbChjb250YWN0OiBhbnkpOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIG92ZXJsYXkuY2xhc3NOYW1lID0gJ21vZGFsLW92ZXJsYXkgZGVsZXRlLWNvbmZpcm0tbW9kYWwnO1xuICAgIG92ZXJsYXkuaWQgPSAnZGVsZXRlQ29uZmlybU1vZGFsJztcblxuICAgIG92ZXJsYXkuaW5uZXJIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRhaW5lclwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtdGl0bGVcIj7liKDpmaTogZTns7vkuro8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImRlbGV0ZS1jb25maXJtLWNvbnRlbnRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwid2FybmluZy1pY29uXCI+4pqg77iPPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImRlbGV0ZS1tZXNzYWdlXCI+XG4gICAgICAgICAgICA8cD7noa7lrpropoHliKDpmaTogZTns7vkurogPHN0cm9uZz5cIiR7Y29udGFjdC5uYW1lfVwiPC9zdHJvbmc+IOWQl++8nzwvcD5cbiAgICAgICAgICAgIDxwIGNsYXNzPVwiZGVsZXRlLW5vdGVcIj7mraTmk43kvZzkuI3lj6/mkqTplIDvvIzkvYbkuI3kvJrliKDpmaTkuI7or6XogZTns7vkurrnmoTogYrlpKnorrDlvZXjgII8L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhY3QtcHJldmlld1wiPlxuICAgICAgICAgICAgPGltZyBzcmM9XCIke2NvbnRhY3QuYXZhdGFyfVwiIGNsYXNzPVwicHJldmlldy1hdmF0YXJcIiBhbHQ9XCIke2NvbnRhY3QubmFtZX1cIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicHJldmlldy1uYW1lXCI+JHtjb250YWN0Lm5hbWV9PC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1idXR0b25zXCI+XG4gICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJtb2RhbC1idG4gY2FuY2VsLWJ0blwiPuWPlua2iDwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwibW9kYWwtYnRuIGRlbGV0ZS1idG5cIj7liKDpmaQ8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuXG4gICAgLy8g57uR5a6a5LqL5Lu2XG4gICAgdGhpcy5iaW5kRGVsZXRlQ29uZmlybU1vZGFsRXZlbnRzKG92ZXJsYXksIGNvbnRhY3QpO1xuXG4gICAgcmV0dXJuIG92ZXJsYXk7XG4gIH1cblxuICAvKipcbiAgICog57uR5a6a5Yig6Zmk56Gu6K6k5qih5oCB5qGG5LqL5Lu2XG4gICAqL1xuICBwcml2YXRlIGJpbmREZWxldGVDb25maXJtTW9kYWxFdmVudHMobW9kYWw6IEhUTUxFbGVtZW50LCBjb250YWN0OiBhbnkpOiB2b2lkIHtcbiAgICBjb25zdCBjYW5jZWxCdG4gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCcuY2FuY2VsLWJ0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgIGNvbnN0IGRlbGV0ZUJ0biA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5kZWxldGUtYnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG5cbiAgICAvLyDlj5bmtojmjInpkq5cbiAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5U291bmQoJ2NsaWNrJyk7XG4gICAgICB0aGlzLmhpZGVEZWxldGVDb25maXJtTW9kYWwoKTtcbiAgICB9KTtcblxuICAgIC8vIOWIoOmZpOaMiemSrlxuICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXlTb3VuZCgnY2xpY2snKTtcbiAgICAgIHRoaXMuaGFuZGxlQ29uZmlybURlbGV0ZUNvbnRhY3QoY29udGFjdCk7XG4gICAgfSk7XG5cbiAgICAvLyDngrnlh7vpga7nvanlhbPpl61cbiAgICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgaWYgKGUudGFyZ2V0ID09PSBtb2RhbCkge1xuICAgICAgICB0aGlzLmhpZGVEZWxldGVDb25maXJtTW9kYWwoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlpITnkIbnoa7orqTliKDpmaTogZTns7vkurpcbiAgICovXG4gIHByaXZhdGUgaGFuZGxlQ29uZmlybURlbGV0ZUNvbnRhY3QoY29udGFjdDogYW55KTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN1Y2Nlc3MgPSB0aGlzLmNvbnRhY3RNYW5hZ2VyLmRlbGV0ZUNvbnRhY3QoY29udGFjdC5pZCk7XG5cbiAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgIHRoaXMuc2hvd1RvYXN0KGDogZTns7vkurogXCIke2NvbnRhY3QubmFtZX1cIiDlt7LliKDpmaRgLCAnaW5mbycpO1xuICAgICAgICB0aGlzLmhpZGVEZWxldGVDb25maXJtTW9kYWwoKTtcblxuICAgICAgICAvLyDph43mlrDmmL7npLrmlrDlu7rogYrlpKnmqKHmgIHmoYblubbliLfmlrDogZTns7vkurrliJfooahcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5zaG93TmV3Q2hhdE1vZGFsKCk7XG4gICAgICAgIH0sIDMwMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNob3dUb2FzdCgn5Yig6Zmk6IGU57O75Lq65aSx6LSlJywgJ2Vycm9yJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuc2hvd1RvYXN0KCfliKDpmaTogZTns7vkurrlpLHotKUnLCAnZXJyb3InKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog6ZqQ6JeP5Yig6Zmk56Gu6K6k5qih5oCB5qGGXG4gICAqL1xuICBwcml2YXRlIGhpZGVEZWxldGVDb25maXJtTW9kYWwoKTogdm9pZCB7XG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVsZXRlQ29uZmlybU1vZGFsJyk7XG4gICAgaWYgKG1vZGFsKSB7XG4gICAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgbW9kYWwucmVtb3ZlKCk7XG4gICAgICB9LCAzMDApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlkIzmraXlpLTlg4/liLDmiYDmnInnm7jlhbPnlYzpnaJcbiAgICogQHBhcmFtIG9sZE5hbWUg5Y6f6IGU57O75Lq65ZCN56ewXG4gICAqIEBwYXJhbSBuZXdOYW1lIOaWsOiBlOezu+S6uuWQjeensFxuICAgKiBAcGFyYW0gbmV3QXZhdGFyIOaWsOWktOWDj1VSTFxuICAgKi9cbiAgcHJpdmF0ZSBzeW5jQXZhdGFyQWNyb3NzSW50ZXJmYWNlKG9sZE5hbWU6IHN0cmluZywgbmV3TmFtZTogc3RyaW5nLCBuZXdBdmF0YXI6IHN0cmluZyk6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICAvLyAxLiDlkIzmraXogYrlpKnliJfooajkuK3nmoTlpLTlg48gKGNoYXQtYXZhdGFyKVxuICAgICAgdGhpcy5zeW5jQ2hhdExpc3RBdmF0YXJzKG9sZE5hbWUsIG5ld05hbWUsIG5ld0F2YXRhcik7XG5cbiAgICAgIC8vIDIuIOWQjOatpeiBiuWkqeeVjOmdouS4reeahOa2iOaBr+WktOWDjyAoYXZhdGFyLCBhdmF0YXItaG92ZXIpXG4gICAgICB0aGlzLnN5bmNDaGF0TWVzc2FnZUF2YXRhcnMob2xkTmFtZSwgbmV3TmFtZSwgbmV3QXZhdGFyKTtcblxuICAgICAgLy8g5rOo5oSP77ya5LiN5ZCM5q2laGVhZGVy5aS05YOP77yM5L+d5oyB6buY6K6k5aS05YOPXG5cbiAgICAgIGNvbnNvbGUubG9nKGDinIUg5aS05YOP5ZCM5q2l5a6M5oiQOiAke29sZE5hbWV9IC0+ICR7bmV3TmFtZX1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIOWktOWDj+WQjOatpeWksei0pTonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOWPquabtOaWsOinkuiJsuWktOWDj++8jOS4jeW9seWTjeeUqOaIt+WktOWDj+WSjGhlYWRlcuWktOWDj1xuICAgKiBAcGFyYW0gY29udGFjdE5hbWUg6KeS6Imy5ZCN56ewXG4gICAqIEBwYXJhbSBuZXdBdmF0YXIg5paw5aS05YOPVVJMXG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZUNoYXJhY3RlckF2YXRhck9ubHkoY29udGFjdE5hbWU6IHN0cmluZywgbmV3QXZhdGFyOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgLy8gMS4g5pu05paw6IGK5aSp5YiX6KGo5Lit5LiO6K+l6KeS6Imy55u45YWz55qE5aS05YOPXG4gICAgICBjb25zdCBjaGF0TGlzdEl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNoYXQtbGlzdC1pdGVtJyk7XG4gICAgICBjaGF0TGlzdEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgIGNvbnN0IGNoYXROYW1lID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcuY2hhdC1uYW1lJyk/LnRleHRDb250ZW50Py50cmltKCk7XG4gICAgICAgIGlmIChjaGF0TmFtZSA9PT0gY29udGFjdE5hbWUgfHwgY2hhdE5hbWUgPT09IGDlkowke2NvbnRhY3ROYW1lfeeahOiBiuWkqWApIHtcbiAgICAgICAgICBjb25zdCBhdmF0YXJJbWcgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LWF2YXRhcicpIGFzIEhUTUxJbWFnZUVsZW1lbnQ7XG4gICAgICAgICAgaWYgKGF2YXRhckltZykge1xuICAgICAgICAgICAgYXZhdGFySW1nLnNyYyA9IG5ld0F2YXRhcjtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SEIOabtOaWsOiBiuWkqeWIl+ihqOS4reeahOinkuiJsuWktOWDjzogJHtjb250YWN0TmFtZX1gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyAyLiDkuI3lho3mm7TmlrBoZWFkZXLlpLTlg4/vvIzlm6DkuLpoZWFkZXItYXZhdGFy5LiO6KeS6Imy5aS05YOP5peg5YWzXG4gICAgICAvLyBoZWFkZXItYXZhdGFy5bqU6K+l5L+d5oyB5Y6f5p2l55qE6YC76L6R77yM5Y+v6IO95piv5b2T5YmN6IGK5aSp55qE6buY6K6k5aS05YOP5oiW5YW25LuWXG5cbiAgICAgIC8vIDMuIOabtOaWsOiBiuWkqea2iOaBr+S4reivpeinkuiJsueahOWktOWDj++8iOWPquabtOaWsOinkuiJsuWPkemAgeeahOa2iOaBr+WktOWDj++8iVxuICAgICAgLy8g5pu057K+56Gu5Zyw6YCJ5oup6KeS6Imy5raI5oGv5aS05YOPXG4gICAgICBjb25zdCBhbGxBdmF0YXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmF2YXRhci5hdmF0YXItaG92ZXInKTtcbiAgICAgIGFsbEF2YXRhcnMuZm9yRWFjaChhdmF0YXIgPT4ge1xuICAgICAgICBjb25zdCBpbWdFbGVtZW50ID0gYXZhdGFyIGFzIEhUTUxJbWFnZUVsZW1lbnQ7XG5cbiAgICAgICAgLy8g6Lez6L+H55So5oi35aS05YOP77yI5bim5pyJdXNlcl9hdmF0YXLnsbvnmoTvvIlcbiAgICAgICAgaWYgKGltZ0VsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCd1c2VyX2F2YXRhcicpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g6Lez6L+HaGVhZGVy5aS05YOPXG4gICAgICAgIGlmIChpbWdFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnaGVhZGVyLWF2YXRhcicpIHx8IGltZ0VsZW1lbnQuaWQgPT09ICdoZWFkZXJBdmF0YXInKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g5qOA5p+l5piv5ZCm5Li66K+l6KeS6Imy55qE5raI5oGv5aS05YOPXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXIgPSBpbWdFbGVtZW50LmNsb3Nlc3QoJy5tZXNzYWdlLCAuY2hhdC1tZXNzYWdlLCBbZGF0YS1zZW5kZXJdJyk7XG4gICAgICAgIGlmIChtZXNzYWdlQ29udGFpbmVyKSB7XG4gICAgICAgICAgLy8g6I635Y+W5Y+R6YCB6ICF5L+h5oGvXG4gICAgICAgICAgY29uc3Qgc2VuZGVyQXR0ciA9IG1lc3NhZ2VDb250YWluZXIuZ2V0QXR0cmlidXRlKCdkYXRhLXNlbmRlcicpO1xuICAgICAgICAgIGNvbnN0IHNlbmRlckVsZW1lbnQgPSBtZXNzYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zZW5kZXItbmFtZSwgLm1lc3NhZ2Utc2VuZGVyLCAuY2hhdC1zZW5kZXInKTtcbiAgICAgICAgICBjb25zdCBzZW5kZXJOYW1lID0gc2VuZGVyQXR0ciB8fCBzZW5kZXJFbGVtZW50Py50ZXh0Q29udGVudD8udHJpbSgpO1xuXG4gICAgICAgICAgLy8g5aaC5p6c5piv6K+l6KeS6Imy55qE5raI5oGv77yM5pu05paw5aS05YOPXG4gICAgICAgICAgaWYgKHNlbmRlck5hbWUgPT09IGNvbnRhY3ROYW1lKSB7XG4gICAgICAgICAgICBpbWdFbGVtZW50LnNyYyA9IG5ld0F2YXRhcjtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SEIOabtOaWsOa2iOaBr+S4reeahOinkuiJsuWktOWDjzogJHtjb250YWN0TmFtZX1gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyA0LiDliLfmlrDogYrlpKnliJfooajvvIjlpoLmnpzpnIDopoHvvIlcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRDaGF0RGF0YU1hcCkge1xuICAgICAgICAvLyDmm7TmlrDlhoXlrZjkuK3nmoTmlbDmja5cbiAgICAgICAgdGhpcy5jdXJyZW50Q2hhdERhdGFNYXAuZm9yRWFjaCgoY2hhdERhdGEsIGNoYXRJZCkgPT4ge1xuICAgICAgICAgIGlmIChjaGF0RGF0YS5jaGF0TmFtZSA9PT0gYOWSjCR7Y29udGFjdE5hbWV955qE6IGK5aSpYCB8fCBjaGF0RGF0YS5jaGF0TmFtZSA9PT0gY29udGFjdE5hbWUpIHtcbiAgICAgICAgICAgIGNoYXREYXRhLmF2YXRhciA9IG5ld0F2YXRhcjtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZyhg4pyFIOinkuiJsuWktOWDj+abtOaWsOWujOaIkDogJHtjb250YWN0TmFtZX1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIOabtOaWsOinkuiJsuWktOWDj+Wksei0pTonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOWQjOatpeiBiuWkqeWIl+ihqOS4reeahOWktOWDj1xuICAgKi9cbiAgcHJpdmF0ZSBzeW5jQ2hhdExpc3RBdmF0YXJzKG9sZE5hbWU6IHN0cmluZywgbmV3TmFtZTogc3RyaW5nLCBuZXdBdmF0YXI6IHN0cmluZyk6IHZvaWQge1xuICAgIC8vIOafpeaJvuaJgOacieiBiuWkqeWIl+ihqOmhuVxuICAgIGNvbnN0IGNoYXRMaXN0SXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hhdC1saXN0LWl0ZW0nKTtcblxuICAgIGNoYXRMaXN0SXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIGNvbnN0IGNoYXROYW1lID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcuY2hhdC1uYW1lJyk/LnRleHRDb250ZW50Py50cmltKCk7XG4gICAgICBjb25zdCBjaGF0QXZhdGFyID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcuY2hhdC1hdmF0YXInKSBhcyBIVE1MSW1hZ2VFbGVtZW50O1xuXG4gICAgICAvLyDmo4Dmn6XmmK/lkKbmmK/kuI7or6XogZTns7vkurrnm7jlhbPnmoTogYrlpKlcbiAgICAgIGlmIChjaGF0QXZhdGFyICYmIGNoYXROYW1lKSB7XG4gICAgICAgIC8vIOajgOafpeWkmuenjeWPr+iDveeahOiBiuWkqeWQjeensOagvOW8j1xuICAgICAgICBjb25zdCBpc1JlbGF0ZWRDaGF0ID1cbiAgICAgICAgICBjaGF0TmFtZSA9PT0gb2xkTmFtZSB8fFxuICAgICAgICAgIGNoYXROYW1lID09PSBuZXdOYW1lIHx8XG4gICAgICAgICAgY2hhdE5hbWUgPT09IGDlkowke29sZE5hbWV955qE6IGK5aSpYCB8fFxuICAgICAgICAgIGNoYXROYW1lID09PSBg5ZKMJHtuZXdOYW1lfeeahOiBiuWkqWAgfHxcbiAgICAgICAgICBjaGF0TmFtZS5pbmNsdWRlcyhvbGROYW1lKSB8fFxuICAgICAgICAgIGNoYXROYW1lLmluY2x1ZGVzKG5ld05hbWUpO1xuXG4gICAgICAgIGlmIChpc1JlbGF0ZWRDaGF0KSB7XG4gICAgICAgICAgY2hhdEF2YXRhci5zcmMgPSBuZXdBdmF0YXI7XG4gICAgICAgICAgY2hhdEF2YXRhci5hbHQgPSBuZXdOYW1lO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SEIOabtOaWsOiBiuWkqeWIl+ihqOWktOWDjzogJHtjaGF0TmFtZX0gLT4gJHtuZXdBdmF0YXJ9YCk7XG5cbiAgICAgICAgICAvLyDlpoLmnpzogYrlpKnlkI3np7DpnIDopoHmm7TmlrBcbiAgICAgICAgICBjb25zdCBjaGF0TmFtZUVsZW1lbnQgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LW5hbWUnKTtcbiAgICAgICAgICBpZiAoY2hhdE5hbWVFbGVtZW50ICYmIGNoYXROYW1lID09PSBg5ZKMJHtvbGROYW1lfeeahOiBiuWkqWApIHtcbiAgICAgICAgICAgIGNoYXROYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IGDlkowke25ld05hbWV955qE6IGK5aSpYDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SEIOabtOaWsOiBiuWkqeWQjeensDogJHtjaGF0TmFtZX0gLT4g5ZKMJHtuZXdOYW1lfeeahOiBiuWkqWApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOWQjOatpeiBiuWkqeeVjOmdouS4reeahOa2iOaBr+WktOWDj1xuICAgKi9cbiAgcHJpdmF0ZSBzeW5jQ2hhdE1lc3NhZ2VBdmF0YXJzKG9sZE5hbWU6IHN0cmluZywgbmV3TmFtZTogc3RyaW5nLCBuZXdBdmF0YXI6IHN0cmluZyk6IHZvaWQge1xuICAgIC8vIOafpeaJvuaJgOaciea2iOaBr+S4reeahOWktOWDj1xuICAgIGNvbnN0IG1lc3NhZ2VBdmF0YXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmF2YXRhciwgLmF2YXRhci1ob3ZlcicpO1xuXG4gICAgbWVzc2FnZUF2YXRhcnMuZm9yRWFjaChhdmF0YXIgPT4ge1xuICAgICAgY29uc3QgaW1nRWxlbWVudCA9IGF2YXRhciBhcyBIVE1MSW1hZ2VFbGVtZW50O1xuXG4gICAgICAvLyDmo4Dmn6VhbHTlsZ7mgKfmiJbnm7jpgrvnmoTlj5HpgIHogIXlkI3np7BcbiAgICAgIGlmIChpbWdFbGVtZW50LmFsdCA9PT0gb2xkTmFtZSB8fCBpbWdFbGVtZW50LmFsdCA9PT0gbmV3TmFtZSkge1xuICAgICAgICBpbWdFbGVtZW50LnNyYyA9IG5ld0F2YXRhcjtcbiAgICAgICAgaW1nRWxlbWVudC5hbHQgPSBuZXdOYW1lO1xuICAgICAgICBjb25zb2xlLmxvZyhg8J+UhCDmm7TmlrDmtojmga/lpLTlg486ICR7b2xkTmFtZX0gLT4gJHtuZXdOYW1lfWApO1xuICAgICAgfVxuXG4gICAgICAvLyDkuZ/mo4Dmn6Xnm7jpgrvnmoTmtojmga/lj5HpgIHogIXlkI3np7BcbiAgICAgIGNvbnN0IG1lc3NhZ2VFbGVtZW50ID0gYXZhdGFyLmNsb3Nlc3QoJy5tZXNzYWdlJyk7XG4gICAgICBpZiAobWVzc2FnZUVsZW1lbnQpIHtcbiAgICAgICAgY29uc3Qgc2VuZGVyRWxlbWVudCA9IG1lc3NhZ2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZXNzYWdlLXNlbmRlciwgLnNlbmRlci1uYW1lJyk7XG4gICAgICAgIGlmIChzZW5kZXJFbGVtZW50ICYmIChzZW5kZXJFbGVtZW50LnRleHRDb250ZW50ID09PSBvbGROYW1lIHx8IHNlbmRlckVsZW1lbnQudGV4dENvbnRlbnQgPT09IG5ld05hbWUpKSB7XG4gICAgICAgICAgaW1nRWxlbWVudC5zcmMgPSBuZXdBdmF0YXI7XG4gICAgICAgICAgaW1nRWxlbWVudC5hbHQgPSBuZXdOYW1lO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SEIOabtOaWsOa2iOaBr+WktOWDjyjpgJrov4flj5HpgIHogIUpOiAke29sZE5hbWV9IC0+ICR7bmV3TmFtZX1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOWQjOatpeiBiuWkqeeVjOmdoueahGhlYWRlcuWktOWDj1xuICAgKi9cbiAgcHJpdmF0ZSBzeW5jQ2hhdEhlYWRlckF2YXRhcihvbGROYW1lOiBzdHJpbmcsIG5ld05hbWU6IHN0cmluZywgbmV3QXZhdGFyOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAvLyDmn6Xmib7ogYrlpKnnlYzpnaLnmoRoZWFkZXLlpLTlg49cbiAgICBjb25zdCBoZWFkZXJBdmF0YXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVhZGVyQXZhdGFyJykgYXMgSFRNTEltYWdlRWxlbWVudDtcbiAgICBjb25zdCBjaGF0VGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhdFRpdGxlJyk7XG5cbiAgICBpZiAoaGVhZGVyQXZhdGFyICYmIGNoYXRUaXRsZSkge1xuICAgICAgY29uc3QgY3VycmVudENoYXROYW1lID0gY2hhdFRpdGxlLnRleHRDb250ZW50Py50cmltKCk7XG5cbiAgICAgIC8vIOajgOafpeW9k+WJjeiBiuWkqeaYr+WQpuS4juivpeiBlOezu+S6uuebuOWFs1xuICAgICAgaWYgKFxuICAgICAgICBjdXJyZW50Q2hhdE5hbWUgPT09IG9sZE5hbWUgfHxcbiAgICAgICAgY3VycmVudENoYXROYW1lID09PSBuZXdOYW1lIHx8XG4gICAgICAgIGN1cnJlbnRDaGF0TmFtZSA9PT0gYOWSjCR7b2xkTmFtZX3nmoTogYrlpKlgIHx8XG4gICAgICAgIGN1cnJlbnRDaGF0TmFtZSA9PT0gYOWSjCR7bmV3TmFtZX3nmoTogYrlpKlgXG4gICAgICApIHtcbiAgICAgICAgaGVhZGVyQXZhdGFyLnNyYyA9IG5ld0F2YXRhcjtcbiAgICAgICAgaGVhZGVyQXZhdGFyLmFsdCA9IG5ld05hbWU7XG5cbiAgICAgICAgLy8g5aaC5p6c6IGK5aSp5qCH6aKY5Lmf6ZyA6KaB5pu05pawXG4gICAgICAgIGlmIChjdXJyZW50Q2hhdE5hbWUgPT09IGDlkowke29sZE5hbWV955qE6IGK5aSpYCkge1xuICAgICAgICAgIGNoYXRUaXRsZS50ZXh0Q29udGVudCA9IGDlkowke25ld05hbWV955qE6IGK5aSpYDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5SEIOabtOaWsGhlYWRlcuWktOWDjzogJHtjdXJyZW50Q2hhdE5hbWV9YCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOinpuWPkeWFqOWxgOWktOWDj+abtOaWsOS6i+S7tlxuICAgKiDpgJrnn6Xlhbbku5bnu4Tku7bogZTns7vkurrkv6Hmga/lt7Lmm7TmlrBcbiAgICovXG4gIHByaXZhdGUgbm90aWZ5Q29udGFjdFVwZGF0ZWQob2xkTmFtZTogc3RyaW5nLCBuZXdOYW1lOiBzdHJpbmcsIG5ld0F2YXRhcjogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2NvbnRhY3RVcGRhdGVkJywge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIG9sZE5hbWUsXG4gICAgICAgIG5ld05hbWUsXG4gICAgICAgIG5ld0F2YXRhcixcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgIGNvbnNvbGUubG9nKGDwn5OiIOWPkemAgeiBlOezu+S6uuabtOaWsOS6i+S7tjogJHtvbGROYW1lfSAtPiAke25ld05hbWV9YCk7XG4gIH1cblxuICAvKipcbiAgICog6YCa55+l6ZyA6KaB5Yi35paw6IGK5aSp5YiX6KGoXG4gICAqL1xuICBwcml2YXRlIG5vdGlmeVJlZnJlc2hDaGF0TGlzdCgpOiB2b2lkIHtcbiAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgncmVmcmVzaENoYXRMaXN0Jywge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICBjb25zb2xlLmxvZyhg8J+ToiDlj5HpgIHliLfmlrDogYrlpKnliJfooajkuovku7ZgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlpITnkIbplb/mjInkuovku7ZcbiAgICovXG4gIHByaXZhdGUgaGFuZGxlTG9uZ1ByZXNzKGRldGFpbDogeyBjaGF0SWQ6IHN0cmluZzsgZWxlbWVudDogSFRNTEVsZW1lbnQ7IHBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0gfSk6IHZvaWQge1xuICAgIGNvbnN0IHsgY2hhdElkLCBwb3NpdGlvbiB9ID0gZGV0YWlsO1xuICAgIGNvbnN0IGlzUGlubmVkID0gdGhpcy5waW5NYW5hZ2VyLmlzUGlubmVkKGNoYXRJZCk7XG5cbiAgICBjb25zb2xlLmxvZyhg8J+UlyDplb/mjInogYrlpKnpobk6ICR7Y2hhdElkfSwg5L2N572uOiAoJHtwb3NpdGlvbi54fSwgJHtwb3NpdGlvbi55fSksIOe9rumhtueKtuaAgTogJHtpc1Bpbm5lZH1gKTtcblxuICAgIC8vIOaSreaUvumfs+aViFxuICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXlTb3VuZCgnY2xpY2snKTtcblxuICAgIC8vIOaYvuekuuS4iuS4i+aWh+iPnOWNlVxuICAgIHRoaXMuY29udGV4dE1lbnUuc2hvdyhjaGF0SWQsIHBvc2l0aW9uLCBpc1Bpbm5lZCk7XG4gIH1cblxuICAvKipcbiAgICog5aSE55CG5LiK5LiL5paH6I+c5Y2V5pON5L2cXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZUNvbnRleHRNZW51QWN0aW9uKGRldGFpbDogeyBhY3Rpb246ICdwaW4nIHwgJ3VucGluJyB8ICdkZWxldGUnOyBjaGF0SWQ6IHN0cmluZyB9KTogdm9pZCB7XG4gICAgY29uc3QgeyBhY3Rpb24sIGNoYXRJZCB9ID0gZGV0YWlsO1xuXG4gICAgY29uc29sZS5sb2coYPCfk4sg5LiK5LiL5paH6I+c5Y2V5pON5L2cOiAke2FjdGlvbn0sIOiBiuWkqUlEOiAke2NoYXRJZH1gKTtcblxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICdwaW4nOlxuICAgICAgICB0aGlzLmhhbmRsZVBpbkNoYXQoY2hhdElkKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd1bnBpbic6XG4gICAgICAgIHRoaXMuaGFuZGxlVW5waW5DaGF0KGNoYXRJZCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgICAgdGhpcy5oYW5kbGVEZWxldGVDaGF0KGNoYXRJZCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlpITnkIbnva7pobbogYrlpKlcbiAgICovXG4gIHByaXZhdGUgaGFuZGxlUGluQ2hhdChjaGF0SWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLnBpbk1hbmFnZXIucGluKGNoYXRJZCk7XG5cbiAgICAgIC8vIOWIt+aWsOiBiuWkqeWIl+ihqOS7peabtOaWsOaOkuW6j+WSjOagt+W8j++8jOS9v+eUqOS/neWtmOeahOaVsOaNrlxuICAgICAgdGhpcy5yZWZyZXNoQ2hhdExpc3QodGhpcy5jdXJyZW50Q2hhdERhdGFNYXApO1xuXG4gICAgICBjb25zb2xlLmxvZyhg8J+TjCDogYrlpKnlt7Lnva7pobY6ICR7Y2hhdElkfWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfnva7pobbogYrlpKnlpLHotKU6JywgZXJyb3IpO1xuICAgICAgdGhpcy5zaG93VG9hc3QoJ+e9rumhtuWksei0pScsICdlcnJvcicpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlpITnkIblj5bmtojnva7pobbogYrlpKlcbiAgICovXG4gIHByaXZhdGUgaGFuZGxlVW5waW5DaGF0KGNoYXRJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMucGluTWFuYWdlci51bnBpbihjaGF0SWQpO1xuXG4gICAgICAvLyDliLfmlrDogYrlpKnliJfooajku6Xmm7TmlrDmjpLluo/lkozmoLflvI/vvIzkvb/nlKjkv53lrZjnmoTmlbDmja5cbiAgICAgIHRoaXMucmVmcmVzaENoYXRMaXN0KHRoaXMuY3VycmVudENoYXREYXRhTWFwKTtcblxuICAgICAgY29uc29sZS5sb2coYPCfk4wg6IGK5aSp5bey5Y+W5raI572u6aG2OiAke2NoYXRJZH1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign5Y+W5raI572u6aG25aSx6LSlOicsIGVycm9yKTtcbiAgICAgIHRoaXMuc2hvd1RvYXN0KCflj5bmtojnva7pobblpLHotKUnLCAnZXJyb3InKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5aSE55CG5Yig6Zmk6IGK5aSpXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZURlbGV0ZUNoYXQoY2hhdElkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAvLyDmmL7npLrliKDpmaTnoa7orqTlr7nor53moYZcbiAgICBjb25zdCBjaGF0TmFtZSA9IHRoaXMuZ2V0Q2hhdE5hbWVCeUlkKGNoYXRJZCk7XG4gICAgY29uc3QgY2hhdEF2YXRhciA9IHRoaXMuZ2V0Q2hhdEF2YXRhckJ5SWQoY2hhdElkKTtcblxuICAgIGlmIChjb25maXJtKGDnoa7lrpropoHliKDpmaTkuI5cIiR7Y2hhdE5hbWV9XCLnmoTogYrlpKnlkJfvvJ9cXG5cXG7mraTmk43kvZzkuI3lj6/mkqTplIDvvIzlsIbliKDpmaTmiYDmnInogYrlpKnorrDlvZXjgIJgKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8g5aaC5p6c5piv576k6IGK77yM5LuObG9jYWxTdG9yYWdl5Lit5Yig6ZmkXG4gICAgICAgIGlmIChjaGF0SWQuc3RhcnRzV2l0aCgnZ3JvdXBfJykpIHtcbiAgICAgICAgICB0aGlzLmRlbGV0ZUdyb3VwQ2hhdChjaGF0SWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIOaZrumAmuiBiuWkqeWIoOmZpOmAu+i+kVxuICAgICAgICAgIHRoaXMuZGVsZXRlUmVndWxhckNoYXQoY2hhdElkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOS7jue9rumhtuWIl+ihqOS4reenu+mZpFxuICAgICAgICBpZiAodGhpcy5waW5NYW5hZ2VyLmlzUGlubmVkKGNoYXRJZCkpIHtcbiAgICAgICAgICB0aGlzLnBpbk1hbmFnZXIudW5waW4oY2hhdElkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOWIt+aWsOiBiuWkqeWIl+ihqO+8jOS9v+eUqOS/neWtmOeahOaVsOaNrlxuICAgICAgICB0aGlzLnJlZnJlc2hDaGF0TGlzdCh0aGlzLmN1cnJlbnRDaGF0RGF0YU1hcCk7XG5cbiAgICAgICAgdGhpcy5zaG93VG9hc3QoYOW3suWIoOmZpOS4jlwiJHtjaGF0TmFtZX1cIueahOiBiuWkqWAsICdpbmZvJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5eR77iPIOiBiuWkqeW3suWIoOmZpDogJHtjaGF0SWR9YCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfliKDpmaTogYrlpKnlpLHotKU6JywgZXJyb3IpO1xuICAgICAgICB0aGlzLnNob3dUb2FzdCgn5Yig6Zmk5aSx6LSlJywgJ2Vycm9yJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOagueaNruiBiuWkqUlE6I635Y+W6IGK5aSp5ZCN56ewXG4gICAqL1xuICBwcml2YXRlIGdldENoYXROYW1lQnlJZChjaGF0SWQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8g5p+l5om+5b2T5YmN5pi+56S655qE6IGK5aSp6aG5XG4gICAgY29uc3QgY2hhdEl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1jaGF0LWlkPVwiJHtjaGF0SWR9XCJdYCk7XG4gICAgaWYgKGNoYXRJdGVtKSB7XG4gICAgICBjb25zdCBuYW1lRWxlbWVudCA9IGNoYXRJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LW5hbWUnKTtcbiAgICAgIGlmIChuYW1lRWxlbWVudCkge1xuICAgICAgICByZXR1cm4gbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgfHwgJ+acquefpeiBiuWkqSc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8g5aaC5p6c5piv576k6IGK77yM5LuO576k6IGK5pWw5o2u5Lit5p+l5om+XG4gICAgaWYgKGNoYXRJZC5zdGFydHNXaXRoKCdncm91cF8nKSkge1xuICAgICAgY29uc3QgZ3JvdXBDaGF0cyA9IHRoaXMuZ2V0R3JvdXBDaGF0RGF0YSgpO1xuICAgICAgY29uc3QgZ3JvdXBDaGF0ID0gZ3JvdXBDaGF0cy5maW5kKGNoYXQgPT4gY2hhdC5pZCA9PT0gY2hhdElkKTtcbiAgICAgIGlmIChncm91cENoYXQpIHtcbiAgICAgICAgcmV0dXJuIGdyb3VwQ2hhdC5jaGF0TmFtZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gJ+acquefpeiBiuWkqSc7XG4gIH1cblxuICAvKipcbiAgICog5qC55o2u6IGK5aSpSUTojrflj5bogYrlpKnlpLTlg49cbiAgICovXG4gIHByaXZhdGUgZ2V0Q2hhdEF2YXRhckJ5SWQoY2hhdElkOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIOafpeaJvuW9k+WJjeaYvuekuueahOiBiuWkqemhuVxuICAgIGNvbnN0IGNoYXRJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtY2hhdC1pZD1cIiR7Y2hhdElkfVwiXWApO1xuICAgIGlmIChjaGF0SXRlbSkge1xuICAgICAgY29uc3QgYXZhdGFyRWxlbWVudCA9IGNoYXRJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LWF2YXRhcicpIGFzIEhUTUxJbWFnZUVsZW1lbnQ7XG4gICAgICBpZiAoYXZhdGFyRWxlbWVudCkge1xuICAgICAgICByZXR1cm4gYXZhdGFyRWxlbWVudC5zcmM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8g5aaC5p6c5piv576k6IGK77yM5LuO576k6IGK5pWw5o2u5Lit5p+l5om+XG4gICAgaWYgKGNoYXRJZC5zdGFydHNXaXRoKCdncm91cF8nKSkge1xuICAgICAgY29uc3QgZ3JvdXBDaGF0cyA9IHRoaXMuZ2V0R3JvdXBDaGF0RGF0YSgpO1xuICAgICAgY29uc3QgZ3JvdXBDaGF0ID0gZ3JvdXBDaGF0cy5maW5kKGNoYXQgPT4gY2hhdC5pZCA9PT0gY2hhdElkKTtcbiAgICAgIGlmIChncm91cENoYXQpIHtcbiAgICAgICAgcmV0dXJuIGdyb3VwQ2hhdC5hdmF0YXI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZ2V0RGVmYXVsdEF2YXRhcignJyk7XG4gIH1cblxuICAvKipcbiAgICog5Yig6Zmk576k6IGKIC0g5LiN5YaN5pON5L2cbG9jYWxTdG9yYWdlXG4gICAqL1xuICBwcml2YXRlIGRlbGV0ZUdyb3VwQ2hhdChjaGF0SWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIC8vIOe+pOiBiuaVsOaNrue7n+S4gOeUseS4u+W6lOeUqOeuoeeQhu+8jOS4jeWGjeebtOaOpeaTjeS9nGxvY2FsU3RvcmFnZVxuICAgIGNvbnNvbGUubG9nKGDwn5SNIFtERUJVR10g5Yig6Zmk576k6IGK6K+35rGCOiAke2NoYXRJZH0gLSDnlLHkuLvlupTnlKjlpITnkIZgKTtcblxuICAgIC8vIOinpuWPkeWIoOmZpOiBiuWkqeS6i+S7tu+8jOeUseS4u+W6lOeUqOWkhOeQhlxuICAgIGNvbnN0IGRlbGV0ZUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdkZWxldGVDaGF0UmVxdWVzdCcsIHtcbiAgICAgIGRldGFpbDogeyBjaGF0SWQsIHR5cGU6ICdncm91cCcgfSxcbiAgICB9KTtcbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGRlbGV0ZUV2ZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliKDpmaTmma7pgJrogYrlpKlcbiAgICovXG4gIHByaXZhdGUgZGVsZXRlUmVndWxhckNoYXQoY2hhdElkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAvLyDop6blj5HliKDpmaTogYrlpKnkuovku7bvvIznlLHkuLvlupTnlKjlpITnkIZcbiAgICBjb25zdCBkZWxldGVFdmVudCA9IG5ldyBDdXN0b21FdmVudCgnZGVsZXRlQ2hhdFJlcXVlc3QnLCB7XG4gICAgICBkZXRhaWw6IHsgY2hhdElkIH0sXG4gICAgfSk7XG5cbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGRlbGV0ZUV2ZW50KTtcbiAgICBjb25zb2xlLmxvZyhg8J+Xke+4jyDlj5HpgIHliKDpmaTogYrlpKnor7fmsYI6ICR7Y2hhdElkfWApO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIneWni+WMlumVv+aMieWkhOeQhuWZqFxuICAgKi9cbiAgcHVibGljIGluaXRpYWxpemVMb25nUHJlc3NIYW5kbGVyKCk6IHZvaWQge1xuICAgIHRoaXMubG9uZ1ByZXNzSGFuZGxlci5pbml0KCk7XG4gICAgY29uc29sZS5sb2coJ/CflJcg6ZW/5oyJ5aSE55CG5Zmo5bey5Yid5aeL5YyWJyk7XG4gIH1cblxuICAvKipcbiAgICog6ZSA5q+B6ZW/5oyJ5aSE55CG5ZmoXG4gICAqL1xuICBwdWJsaWMgZGVzdHJveUxvbmdQcmVzc0hhbmRsZXIoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubG9uZ1ByZXNzSGFuZGxlcikge1xuICAgICAgdGhpcy5sb25nUHJlc3NIYW5kbGVyLmRlc3Ryb3koKTtcbiAgICB9XG4gICAgY29uc29sZS5sb2coJ/CflJcg6ZW/5oyJ5aSE55CG5Zmo5bey6ZSA5q+BJyk7XG4gIH1cblxuICAvKipcbiAgICog6I635Y+W572u6aG2566h55CG5Zmo77yI55So5LqO5aSW6YOo6K6/6Zeu77yJXG4gICAqL1xuICBwdWJsaWMgZ2V0UGluTWFuYWdlcigpOiBQaW5NYW5hZ2VyIHtcbiAgICByZXR1cm4gdGhpcy5waW5NYW5hZ2VyO1xuICB9XG5cbiAgLyoqXG4gICAqIOWkhOeQhuacquivu+a2iOaBr+aVsOmHj+abtOaWsOS6i+S7tlxuICAgKiBAcGFyYW0gY2hhdElkIOiBiuWkqUlEXG4gICAqIEBwYXJhbSB1bnJlYWRDb3VudCDmlrDnmoTmnKror7vmlbDph49cbiAgICovXG4gIHByaXZhdGUgb25VbnJlYWRDb3VudFVwZGF0ZWQoY2hhdElkOiBzdHJpbmcsIHVucmVhZENvdW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyDmm7TmlrDlr7nlupTogYrlpKnpobnnmoTmnKror7vlnIbngrnmmL7npLpcbiAgICBjb25zdCBjaGF0SXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWNoYXQtaWQ9XCIke2NoYXRJZH1cIl1gKTtcbiAgICBpZiAoY2hhdEl0ZW0pIHtcbiAgICAgIGNvbnN0IHRpbWVDb250YWluZXIgPSBjaGF0SXRlbS5xdWVyeVNlbGVjdG9yKCcuY2hhdC10aW1lLWNvbnRhaW5lcicpO1xuICAgICAgbGV0IHVucmVhZEJhZGdlID0gY2hhdEl0ZW0ucXVlcnlTZWxlY3RvcignLnVucmVhZC1iYWRnZScpO1xuXG4gICAgICAvLyDmm7TmlrDmtojmga/pooTop4jkuLrmnIDmlrDmtojmga9cbiAgICAgIHRoaXMudXBkYXRlQ2hhdFByZXZpZXcoY2hhdElkLCBjaGF0SXRlbSk7XG5cbiAgICAgIGlmICh1bnJlYWRDb3VudCA+IDApIHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkQ291bnQgPSB0aGlzLmZvcm1hdFVucmVhZENvdW50KHVucmVhZENvdW50KTtcblxuICAgICAgICBpZiAoIXVucmVhZEJhZGdlICYmIHRpbWVDb250YWluZXIpIHtcbiAgICAgICAgICAvLyDliJvlu7rmnKror7vlvr3nq6BcbiAgICAgICAgICB1bnJlYWRCYWRnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIHVucmVhZEJhZGdlLmNsYXNzTmFtZSA9ICd1bnJlYWQtYmFkZ2UgYm91bmNlJztcbiAgICAgICAgICB0aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKHVucmVhZEJhZGdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1bnJlYWRCYWRnZSkge1xuICAgICAgICAgIHVucmVhZEJhZGdlLnRleHRDb250ZW50ID0gZm9ybWF0dGVkQ291bnQ7XG4gICAgICAgICAgdW5yZWFkQmFkZ2UuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuICAgICAgICAgIHVucmVhZEJhZGdlLmNsYXNzTGlzdC5hZGQoJ3B1bHNlJyk7XG5cbiAgICAgICAgICAvLyDnp7vpmaTliqjnlLvnsbtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHVucmVhZEJhZGdlPy5jbGFzc0xpc3QucmVtb3ZlKCdib3VuY2UnLCAncHVsc2UnKTtcbiAgICAgICAgICB9LCA2MDApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHVucmVhZEJhZGdlKSB7XG4gICAgICAgIC8vIOmakOiXj+acquivu+W+veeroFxuICAgICAgICB1bnJlYWRCYWRnZS5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICAgIC8vIOW7tui/n+enu+mZpOWFg+e0oO+8jOiuqeWKqOeUu+WujOaIkFxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBpZiAodW5yZWFkQmFkZ2UgJiYgIXVucmVhZEJhZGdlLmNsYXNzTGlzdC5jb250YWlucygnc2hvdycpKSB7XG4gICAgICAgICAgICB1bnJlYWRCYWRnZS5yZW1vdmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDIwMCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOabtOaWsOiBiuWkqemihOiniOa2iOaBr1xuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVDaGF0UHJldmlldyhjaGF0SWQ6IHN0cmluZywgY2hhdEl0ZW06IEVsZW1lbnQpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuY3VycmVudENoYXREYXRhTWFwKSByZXR1cm47XG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IHRoaXMuY3VycmVudENoYXREYXRhTWFwLmdldChjaGF0SWQpO1xuICAgIGlmICghY2hhdERhdGEgfHwgIWNoYXREYXRhLm1lc3NhZ2VzIHx8IGNoYXREYXRhLm1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgLy8g6I635Y+W5pyA5paw5raI5oGvXG4gICAgY29uc3QgbGFzdE1lc3NhZ2UgPSB0aGlzLmdldExhc3RNZXNzYWdlKGNoYXREYXRhLm1lc3NhZ2VzKTtcbiAgICBpZiAoIWxhc3RNZXNzYWdlKSByZXR1cm47XG5cbiAgICAvLyDmoLzlvI/ljJbmtojmga/pooTop4hcbiAgICBjb25zdCBwcmV2aWV3VGV4dCA9IHRoaXMuZm9ybWF0TWVzc2FnZVByZXZpZXcobGFzdE1lc3NhZ2UpO1xuXG4gICAgLy8g5pu05pawRE9N5Lit55qE6aKE6KeI5paH5pysXG4gICAgY29uc3QgcHJldmlld0VsZW1lbnQgPSBjaGF0SXRlbS5xdWVyeVNlbGVjdG9yKCcuY2hhdC1wcmV2aWV3Jyk7XG4gICAgaWYgKHByZXZpZXdFbGVtZW50KSB7XG4gICAgICBwcmV2aWV3RWxlbWVudC50ZXh0Q29udGVudCA9IHByZXZpZXdUZXh0O1xuICAgIH1cblxuICAgIC8vIOWQjOaXtuabtOaWsOaXtumXtOaYvuekulxuICAgIGNvbnN0IHRpbWVFbGVtZW50ID0gY2hhdEl0ZW0ucXVlcnlTZWxlY3RvcignLmNoYXQtdGltZScpO1xuICAgIGlmICh0aW1lRWxlbWVudCAmJiBsYXN0TWVzc2FnZS50aW1lc3RhbXApIHtcbiAgICAgIGNvbnN0IGZvcm1hdHRlZFRpbWUgPSB0aGlzLmZvcm1hdEFic29sdXRlVGltZShsYXN0TWVzc2FnZS50aW1lc3RhbXApO1xuICAgICAgdGltZUVsZW1lbnQudGV4dENvbnRlbnQgPSBmb3JtYXR0ZWRUaW1lO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlvZPmnInmlrDmtojmga/ml7bpgJrnn6XmnKror7vmtojmga/nrqHnkIblmahcbiAgICogQHBhcmFtIGNoYXRJZCDogYrlpKlJRFxuICAgKi9cbiAgcHVibGljIG9uTmV3TWVzc2FnZShjaGF0SWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMudW5yZWFkTWVzc2FnZU1hbmFnZXIub25OZXdNZXNzYWdlKGNoYXRJZCwgdGhpcy5jdXJyZW50Q2hhdERhdGFNYXApO1xuICB9XG5cbiAgLyoqXG4gICAqIOWPquabtOaWsOiBiuWkqeaVsOaNru+8jOS4jeaYvuekuueVjOmdolxuICAgKiBAcGFyYW0gY2hhdERhdGFNYXAg6IGK5aSp5pWw5o2u5pig5bCEXG4gICAqL1xuICBwdWJsaWMgdXBkYXRlQ2hhdERhdGEoY2hhdERhdGFNYXA6IE1hcDxzdHJpbmcsIENoYXREYXRhPik6IHZvaWQge1xuICAgIHRoaXMuY3VycmVudENoYXREYXRhTWFwID0gY2hhdERhdGFNYXA7XG4gIH1cblxuICAvKipcbiAgICog5b2T5pyJ5paw5raI5oGv5pWw57uE5pe26YCa55+l5pyq6K+75raI5oGv566h55CG5Zmo77yI5om56YeP5aSE55CG77yJXG4gICAqIEBwYXJhbSBuZXdNZXNzYWdlcyDmlrDmtojmga/mlbDnu4RcbiAgICogQHBhcmFtIGN1cnJlbnRDaGF0SWQg5b2T5YmN5q2j5Zyo5p+l55yL55qE6IGK5aSpSURcbiAgICovXG4gIHB1YmxpYyBvbk5ld01lc3NhZ2VzKG5ld01lc3NhZ2VzOiBhbnlbXSwgY3VycmVudENoYXRJZD86IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMudW5yZWFkTWVzc2FnZU1hbmFnZXIub25OZXdNZXNzYWdlcyhuZXdNZXNzYWdlcywgdGhpcy5jdXJyZW50Q2hhdERhdGFNYXAsIGN1cnJlbnRDaGF0SWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIt+aWsOaJgOacieiBiuWkqeeahOacquivu+a2iOaBr+iuoeaVsFxuICAgKi9cbiAgcHVibGljIHJlZnJlc2hVbnJlYWRDb3VudHMoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY3VycmVudENoYXREYXRhTWFwKSB7XG4gICAgICBjb25zdCBjaGF0SWRzID0gQXJyYXkuZnJvbSh0aGlzLmN1cnJlbnRDaGF0RGF0YU1hcC5rZXlzKCkpO1xuICAgICAgdGhpcy51bnJlYWRNZXNzYWdlTWFuYWdlci5yZWZyZXNoVW5yZWFkQ291bnRzKHRoaXMuY3VycmVudENoYXREYXRhTWFwLCBjaGF0SWRzKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5pyq6K+75raI5oGv566h55CG5Zmo5a6e5L6L77yI55So5LqO5aSW6YOo6K6/6Zeu77yJXG4gICAqL1xuICBwdWJsaWMgZ2V0VW5yZWFkTWVzc2FnZU1hbmFnZXIoKTogVW5yZWFkTWVzc2FnZU1hbmFnZXIge1xuICAgIHJldHVybiB0aGlzLnVucmVhZE1lc3NhZ2VNYW5hZ2VyO1xuICB9XG5cbiAgLyoqXG4gICAqIOmUgOavgeiBiuWkqeWIl+ihqOeuoeeQhuWZqO+8jOa4heeQhui1hOa6kFxuICAgKi9cbiAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgLy8g6ZSA5q+B54q25oCB5qCPXG4gICAgdGhpcy5kZXN0cm95U3RhdHVzQmFyKCk7XG5cbiAgICAvLyDplIDmr4Hplb/mjInlpITnkIblmahcbiAgICB0aGlzLmRlc3Ryb3lMb25nUHJlc3NIYW5kbGVyKCk7XG5cbiAgICAvLyDplIDmr4HmnKror7vmtojmga/nrqHnkIblmahcbiAgICB0aGlzLnVucmVhZE1lc3NhZ2VNYW5hZ2VyLmRlc3Ryb3koKTtcblxuICAgIC8vIOmakOiXj+S4iuS4i+aWh+iPnOWNlVxuICAgIHRoaXMuY29udGV4dE1lbnUuaGlkZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOagvOW8j+WMluacquivu+a2iOaBr+aVsOmHj+aYvuekulxuICAgKiBAcGFyYW0gY291bnQg5pyq6K+75raI5oGv5pWw6YePXG4gICAqIEByZXR1cm5zIOagvOW8j+WMluWQjueahOaYvuekuuaWh+acrFxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRVbnJlYWRDb3VudChjb3VudDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAoY291bnQgPD0gMCkgcmV0dXJuICcnO1xuICAgIGlmIChjb3VudCA+IDk5KSByZXR1cm4gJzk5Kyc7XG4gICAgcmV0dXJuIGNvdW50LnRvU3RyaW5nKCk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/chatList/manager.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/chatList/pinManager.ts": 
  /*!**********************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/chatList/pinManager.ts ***!
  \**********************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PinManager: () => (/* binding */ PinManager)\n/* harmony export */ });\n/**\n * 置顶管理器\n * 负责管理聊天的置顶状态和数据持久化\n */\nclass PinManager {\n    static STORAGE_KEY = 'bear_pinned_chats';\n    pinnedChats = new Map();\n    constructor() {\n        this.loadPinnedChats();\n    }\n    /**\n     * 置顶聊天\n     */\n    pin(chatId) {\n        const pinnedData = {\n            chatId,\n            pinnedAt: Date.now(),\n        };\n        this.pinnedChats.set(chatId, pinnedData);\n        this.savePinnedChats();\n        console.log(`📌 置顶聊天: ${chatId}`);\n    }\n    /**\n     * 取消置顶\n     */\n    unpin(chatId) {\n        if (this.pinnedChats.has(chatId)) {\n            this.pinnedChats.delete(chatId);\n            this.savePinnedChats();\n            console.log(`📌 取消置顶聊天: ${chatId}`);\n        }\n    }\n    /**\n     * 检查是否已置顶\n     */\n    isPinned(chatId) {\n        return this.pinnedChats.has(chatId);\n    }\n    /**\n     * 获取所有置顶聊天ID列表（按置顶时间倒序）\n     */\n    getPinnedChatIds() {\n        const pinnedArray = Array.from(this.pinnedChats.values());\n        // 按置顶时间倒序排列（最新置顶的在前面）\n        pinnedArray.sort((a, b) => b.pinnedAt - a.pinnedAt);\n        return pinnedArray.map(item => item.chatId);\n    }\n    /**\n     * 获取置顶聊天数量\n     */\n    getPinnedCount() {\n        return this.pinnedChats.size;\n    }\n    /**\n     * 清理不存在的置顶聊天\n     */\n    cleanup(existingChatIds) {\n        const existingSet = new Set(existingChatIds);\n        let hasChanges = false;\n        for (const chatId of this.pinnedChats.keys()) {\n            if (!existingSet.has(chatId)) {\n                this.pinnedChats.delete(chatId);\n                hasChanges = true;\n                console.log(`🧹 清理不存在的置顶聊天: ${chatId}`);\n            }\n        }\n        if (hasChanges) {\n            this.savePinnedChats();\n        }\n    }\n    /**\n     * 获取置顶聊天的详细信息\n     */\n    getPinnedChatData(chatId) {\n        return this.pinnedChats.get(chatId) || null;\n    }\n    /**\n     * 批量设置置顶聊天（用于数据迁移或同步）\n     */\n    setPinnedChats(pinnedChatIds) {\n        this.pinnedChats.clear();\n        const now = Date.now();\n        pinnedChatIds.forEach((chatId, index) => {\n            // 为了保持顺序，给每个聊天设置不同的时间戳\n            this.pinnedChats.set(chatId, {\n                chatId,\n                pinnedAt: now - index * 1000, // 越靠前的时间戳越大\n            });\n        });\n        this.savePinnedChats();\n    }\n    /**\n     * 从localStorage加载置顶聊天数据\n     */\n    loadPinnedChats() {\n        try {\n            const stored = localStorage.getItem(PinManager.STORAGE_KEY);\n            if (!stored) {\n                return;\n            }\n            const data = JSON.parse(stored);\n            // 兼容旧版本数据格式（字符串数组）\n            if (Array.isArray(data)) {\n                const now = Date.now();\n                data.forEach((chatId, index) => {\n                    this.pinnedChats.set(chatId, {\n                        chatId,\n                        pinnedAt: now - index * 1000,\n                    });\n                });\n                // 保存为新格式\n                this.savePinnedChats();\n                return;\n            }\n            // 新版本数据格式（对象数组）\n            if (Array.isArray(data)) {\n                data.forEach((item) => {\n                    if (item.chatId && typeof item.pinnedAt === 'number') {\n                        this.pinnedChats.set(item.chatId, item);\n                    }\n                });\n            }\n        }\n        catch (error) {\n            console.error('加载置顶聊天数据失败:', error);\n            // 清空可能损坏的数据\n            localStorage.removeItem(PinManager.STORAGE_KEY);\n        }\n    }\n    /**\n     * 保存置顶聊天数据到localStorage\n     */\n    savePinnedChats() {\n        try {\n            const data = Array.from(this.pinnedChats.values());\n            localStorage.setItem(PinManager.STORAGE_KEY, JSON.stringify(data));\n        }\n        catch (error) {\n            console.error('保存置顶聊天数据失败:', error);\n        }\n    }\n    /**\n     * 导出置顶数据（用于备份）\n     */\n    exportData() {\n        return Array.from(this.pinnedChats.values());\n    }\n    /**\n     * 导入置顶数据（用于恢复）\n     */\n    importData(data) {\n        this.pinnedChats.clear();\n        data.forEach(item => {\n            if (item.chatId && typeof item.pinnedAt === 'number') {\n                this.pinnedChats.set(item.chatId, item);\n            }\n        });\n        this.savePinnedChats();\n    }\n    /**\n     * 获取统计信息\n     */\n    getStats() {\n        const pinnedArray = Array.from(this.pinnedChats.values());\n        if (pinnedArray.length === 0) {\n            return {\n                totalPinned: 0,\n                oldestPinned: null,\n                newestPinned: null,\n            };\n        }\n        pinnedArray.sort((a, b) => a.pinnedAt - b.pinnedAt);\n        return {\n            totalPinned: pinnedArray.length,\n            oldestPinned: pinnedArray[0],\n            newestPinned: pinnedArray[pinnedArray.length - 1],\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY2hhdExpc3QvcGluTWFuYWdlci50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7OztHQUdHO0FBT0ksTUFBTSxVQUFVO0lBQ2IsTUFBTSxDQUFVLFdBQVcsR0FBRyxtQkFBbUIsQ0FBQztJQUNsRCxXQUFXLEdBQWdDLElBQUksR0FBRyxFQUFFLENBQUM7SUFFN0Q7UUFDRSxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7SUFDekIsQ0FBQztJQUVEOztPQUVHO0lBQ0gsR0FBRyxDQUFDLE1BQWM7UUFDaEIsTUFBTSxVQUFVLEdBQW1CO1lBQ2pDLE1BQU07WUFDTixRQUFRLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTtTQUNyQixDQUFDO1FBRUYsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUV2QixPQUFPLENBQUMsR0FBRyxDQUFDLFlBQVksTUFBTSxFQUFFLENBQUMsQ0FBQztJQUNwQyxDQUFDO0lBRUQ7O09BRUc7SUFDSCxLQUFLLENBQUMsTUFBYztRQUNsQixJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUM7WUFDakMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDaEMsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1lBQ3ZCLE9BQU8sQ0FBQyxHQUFHLENBQUMsY0FBYyxNQUFNLEVBQUUsQ0FBQyxDQUFDO1FBQ3RDLENBQUM7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSCxRQUFRLENBQUMsTUFBYztRQUNyQixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3RDLENBQUM7SUFFRDs7T0FFRztJQUNILGdCQUFnQjtRQUNkLE1BQU0sV0FBVyxHQUFH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YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WkmuS6keeGii/lpIfku70v57uZcm92b+eahC9tb2R1bGVzL2NoYXRMaXN0L3Bpbk1hbmFnZXIudHM/Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiDnva7pobbnrqHnkIblmahcclxuICog6LSf6LSj566h55CG6IGK5aSp55qE572u6aG254q25oCB5ZKM5pWw5o2u5oyB5LmF5YyWXHJcbiAqL1xyXG5cclxuaW50ZXJmYWNlIFBpbm5lZENoYXREYXRhIHtcclxuICBjaGF0SWQ6IHN0cmluZztcclxuICBwaW5uZWRBdDogbnVtYmVyOyAvLyDnva7pobbml7bpl7TmiLNcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFBpbk1hbmFnZXIge1xyXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IFNUT1JBR0VfS0VZID0gJ2JlYXJfcGlubmVkX2NoYXRzJztcclxuICBwcml2YXRlIHBpbm5lZENoYXRzOiBNYXA8c3RyaW5nLCBQaW5uZWRDaGF0RGF0YT4gPSBuZXcgTWFwKCk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5sb2FkUGlubmVkQ2hhdHMoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOe9rumhtuiBiuWkqVxyXG4gICAqL1xyXG4gIHBpbihjaGF0SWQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgY29uc3QgcGlubmVkRGF0YTogUGlubmVkQ2hhdERhdGEgPSB7XHJcbiAgICAgIGNoYXRJZCxcclxuICAgICAgcGlubmVkQXQ6IERhdGUubm93KCksXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMucGlubmVkQ2hhdHMuc2V0KGNoYXRJZCwgcGlubmVkRGF0YSk7XHJcbiAgICB0aGlzLnNhdmVQaW5uZWRDaGF0cygpO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKGDwn5OMIOe9rumhtuiBiuWkqTogJHtjaGF0SWR9YCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlj5bmtojnva7pobZcclxuICAgKi9cclxuICB1bnBpbihjaGF0SWQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMucGlubmVkQ2hhdHMuaGFzKGNoYXRJZCkpIHtcclxuICAgICAgdGhpcy5waW5uZWRDaGF0cy5kZWxldGUoY2hhdElkKTtcclxuICAgICAgdGhpcy5zYXZlUGlubmVkQ2hhdHMoKTtcclxuICAgICAgY29uc29sZS5sb2coYPCfk4wg5Y+W5raI572u6aG26IGK5aSpOiAke2NoYXRJZH1gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOajgOafpeaYr+WQpuW3sue9rumhtlxyXG4gICAqL1xyXG4gIGlzUGlubmVkKGNoYXRJZDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5waW5uZWRDaGF0cy5oYXMoY2hhdElkKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluaJgOaciee9rumhtuiBiuWkqUlE5YiX6KGo77yI5oyJ572u6aG25pe26Ze05YCS5bqP77yJXHJcbiAgICovXHJcbiAgZ2V0UGlubmVkQ2hhdElkcygpOiBzdHJpbmdbXSB7XHJcbiAgICBjb25zdCBwaW5uZWRBcnJheSA9IEFycmF5LmZyb20odGhpcy5waW5uZWRDaGF0cy52YWx1ZXMoKSk7XHJcblxyXG4gICAgLy8g5oyJ572u6aG25pe26Ze05YCS5bqP5o6S5YiX77yI5pyA5paw572u6aG255qE5Zyo5YmN6Z2i77yJXHJcbiAgICBwaW5uZWRBcnJheS5zb3J0KChhLCBiKSA9PiBiLnBpbm5lZEF0IC0gYS5waW5uZWRBdCk7XHJcblxyXG4gICAgcmV0dXJuIHBpbm5lZEFycmF5Lm1hcChpdGVtID0+IGl0ZW0uY2hhdElkKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPlue9rumhtuiBiuWkqeaVsOmHj1xyXG4gICAqL1xyXG4gIGdldFBpbm5lZENvdW50KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5waW5uZWRDaGF0cy5zaXplO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5riF55CG5LiN5a2Y5Zyo55qE572u6aG26IGK5aSpXHJcbiAgICovXHJcbiAgY2xlYW51cChleGlzdGluZ0NoYXRJZHM6IHN0cmluZ1tdKTogdm9pZCB7XHJcbiAgICBjb25zdCBleGlzdGluZ1NldCA9IG5ldyBTZXQoZXhpc3RpbmdDaGF0SWRzKTtcclxuICAgIGxldCBoYXNDaGFuZ2VzID0gZmFsc2U7XHJcblxyXG4gICAgZm9yIChjb25zdCBjaGF0SWQgb2YgdGhpcy5waW5uZWRDaGF0cy5rZXlzKCkpIHtcclxuICAgICAgaWYgKCFleGlzdGluZ1NldC5oYXMoY2hhdElkKSkge1xyXG4gICAgICAgIHRoaXMucGlubmVkQ2hhdHMuZGVsZXRlKGNoYXRJZCk7XHJcbiAgICAgICAgaGFzQ2hhbmdlcyA9IHRydWU7XHJcbiAgICAgICAgY29uc29sZS5sb2coYPCfp7kg5riF55CG5LiN5a2Y5Zyo55qE572u6aG26IGK5aSpOiAke2NoYXRJZH1gKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChoYXNDaGFuZ2VzKSB7XHJcbiAgICAgIHRoaXMuc2F2ZVBpbm5lZENoYXRzKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bnva7pobbogYrlpKnnmoTor6bnu4bkv6Hmga9cclxuICAgKi9cclxuICBnZXRQaW5uZWRDaGF0RGF0YShjaGF0SWQ6IHN0cmluZyk6IFBpbm5lZENoYXREYXRhIHwgbnVsbCB7XHJcbiAgICByZXR1cm4gdGhpcy5waW5uZWRDaGF0cy5nZXQoY2hhdElkKSB8fCBudWxsO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5om56YeP6K6+572u572u6aG26IGK5aSp77yI55So5LqO5pWw5o2u6L+B56e75oiW5ZCM5q2l77yJXHJcbiAgICovXHJcbiAgc2V0UGlubmVkQ2hhdHMocGlubmVkQ2hhdElkczogc3RyaW5nW10pOiB2b2lkIHtcclxuICAgIHRoaXMucGlubmVkQ2hhdHMuY2xlYXIoKTtcclxuXHJcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgcGlubmVkQ2hhdElkcy5mb3JFYWNoKChjaGF0SWQsIGluZGV4KSA9PiB7XHJcbiAgICAgIC8vIOS4uuS6huS/neaMgemhuuW6j++8jOe7meavj+S4quiBiuWkqeiuvue9ruS4jeWQjOeahOaXtumXtOaIs1xyXG4gICAgICB0aGlzLnBpbm5lZENoYXRzLnNldChjaGF0SWQsIHtcclxuICAgICAgICBjaGF0SWQsXHJcbiAgICAgICAgcGlubmVkQXQ6IG5vdyAtIGluZGV4ICogMTAwMCwgLy8g6LaK6Z2g5YmN55qE5pe26Ze05oiz6LaK5aSnXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5zYXZlUGlubmVkQ2hhdHMoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOS7jmxvY2FsU3RvcmFnZeWKoOi9vee9rumhtuiBiuWkqeaVsOaNrlxyXG4gICAqL1xyXG4gIHByaXZhdGUgbG9hZFBpbm5lZENoYXRzKCk6IHZvaWQge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc3RvcmVkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oUGluTWFuYWdlci5TVE9SQUdFX0tFWSk7XHJcbiAgICAgIGlmICghc3RvcmVkKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShzdG9yZWQpO1xyXG5cclxuICAgICAgLy8g5YW85a655pen54mI5pys5pWw5o2u5qC85byP77yI5a2X56ym5Liy5pWw57uE77yJXHJcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XHJcbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICBkYXRhLmZvckVhY2goKGNoYXRJZDogc3RyaW5nLCBpbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnBpbm5lZENoYXRzLnNldChjaGF0SWQsIHtcclxuICAgICAgICAgICAgY2hhdElkLFxyXG4gICAgICAgICAgICBwaW5uZWRBdDogbm93IC0gaW5kZXggKiAxMDAwLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIOS/neWtmOS4uuaWsOagvOW8j1xyXG4gICAgICAgIHRoaXMuc2F2ZVBpbm5lZENoYXRzKCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDmlrDniYjmnKzmlbDmja7moLzlvI/vvIjlr7nosaHmlbDnu4TvvIlcclxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcclxuICAgICAgICBkYXRhLmZvckVhY2goKGl0ZW06IFBpbm5lZENoYXREYXRhKSA9PiB7XHJcbiAgICAgICAgICBpZiAoaXRlbS5jaGF0SWQgJiYgdHlwZW9mIGl0ZW0ucGlubmVkQXQgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGlubmVkQ2hhdHMuc2V0KGl0ZW0uY2hhdElkLCBpdGVtKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign5Yqg6L29572u6aG26IGK5aSp5pWw5o2u5aSx6LSlOicsIGVycm9yKTtcclxuICAgICAgLy8g5riF56m65Y+v6IO95o2f5Z2P55qE5pWw5o2uXHJcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFBpbk1hbmFnZXIuU1RPUkFHRV9LRVkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5L+d5a2Y572u6aG26IGK5aSp5pWw5o2u5YiwbG9jYWxTdG9yYWdlXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzYXZlUGlubmVkQ2hhdHMoKTogdm9pZCB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBkYXRhID0gQXJyYXkuZnJvbSh0aGlzLnBpbm5lZENoYXRzLnZhbHVlcygpKTtcclxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oUGluTWFuYWdlci5TVE9SQUdFX0tFWSwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign5L+d5a2Y572u6aG26IGK5aSp5pWw5o2u5aSx6LSlOicsIGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWvvOWHuue9rumhtuaVsOaNru+8iOeUqOS6juWkh+S7ve+8iVxyXG4gICAqL1xyXG4gIGV4cG9ydERhdGEoKTogUGlubmVkQ2hhdERhdGFbXSB7XHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnBpbm5lZENoYXRzLnZhbHVlcygpKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWvvOWFpee9rumhtuaVsOaNru+8iOeUqOS6juaBouWkje+8iVxyXG4gICAqL1xyXG4gIGltcG9ydERhdGEoZGF0YTogUGlubmVkQ2hhdERhdGFbXSk6IHZvaWQge1xyXG4gICAgdGhpcy5waW5uZWRDaGF0cy5jbGVhcigpO1xyXG5cclxuICAgIGRhdGEuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgaWYgKGl0ZW0uY2hhdElkICYmIHR5cGVvZiBpdGVtLnBpbm5lZEF0ID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgIHRoaXMucGlubmVkQ2hhdHMuc2V0KGl0ZW0uY2hhdElkLCBpdGVtKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5zYXZlUGlubmVkQ2hhdHMoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPlue7n+iuoeS/oeaBr1xyXG4gICAqL1xyXG4gIGdldFN0YXRzKCk6IHtcclxuICAgIHRvdGFsUGlubmVkOiBudW1iZXI7XHJcbiAgICBvbGRlc3RQaW5uZWQ6IFBpbm5lZENoYXREYXRhIHwgbnVsbDtcclxuICAgIG5ld2VzdFBpbm5lZDogUGlubmVkQ2hhdERhdGEgfCBudWxsO1xyXG4gIH0ge1xyXG4gICAgY29uc3QgcGlubmVkQXJyYXkgPSBBcnJheS5mcm9tKHRoaXMucGlubmVkQ2hhdHMudmFsdWVzKCkpO1xyXG5cclxuICAgIGlmIChwaW5uZWRBcnJheS5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB0b3RhbFBpbm5lZDogMCxcclxuICAgICAgICBvbGRlc3RQaW5uZWQ6IG51bGwsXHJcbiAgICAgICAgbmV3ZXN0UGlubmVkOiBudWxsLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHBpbm5lZEFycmF5LnNvcnQoKGEsIGIpID0+IGEucGlubmVkQXQgLSBiLnBpbm5lZEF0KTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0b3RhbFBpbm5lZDogcGlubmVkQXJyYXkubGVuZ3RoLFxyXG4gICAgICBvbGRlc3RQaW5uZWQ6IHBpbm5lZEFycmF5WzBdLFxyXG4gICAgICBuZXdlc3RQaW5uZWQ6IHBpbm5lZEFycmF5W3Bpbm5lZEFycmF5Lmxlbmd0aCAtIDFdLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/chatList/pinManager.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/chatList/types.ts": 
  /*!*****************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/chatList/types.ts ***!
  \*****************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/**\n * 聊天列表模块类型定义\n */\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY2hhdExpc3QvdHlwZXMudHMiLCJtYXBwaW5ncyI6IjtBQUFBOztHQUVHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy9jaGF0TGlzdC90eXBlcy50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIOiBiuWkqeWIl+ihqOaooeWdl+exu+Wei+WumuS5iVxyXG4gKi9cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2hhdExpc3RJdGVtIHtcclxuICBjaGF0SWQ6IHN0cmluZztcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgYXZhdGFyOiBzdHJpbmc7XHJcbiAgbGFzdE1lc3NhZ2U6IHN0cmluZztcclxuICBsYXN0VGltZTogc3RyaW5nO1xyXG4gIHVucmVhZENvdW50OiBudW1iZXI7XHJcbiAgdHlwZTogJ1MnIHwgJ0cnOyAvLyBTOiDljZXogYosIEc6IOe+pOiBilxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENvbnRhY3Qge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIGF2YXRhcjogc3RyaW5nO1xyXG4gIHR5cGU6ICd1c2VyJyB8ICdjaGFyYWN0ZXInO1xyXG4gIGlzT25saW5lPzogYm9vbGVhbjtcclxuICBsYXN0U2Vlbj86IHN0cmluZztcclxuICB0YWdzPzogc3RyaW5nW107XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29udGFjdFN0b3JhZ2Uge1xyXG4gIGNvbnRhY3RzOiBDb250YWN0W107XHJcbiAgZ3JvdXBzOiBHcm91cENoYXRbXTtcclxuICBsYXN0VXBkYXRlZDogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEdyb3VwQ2hhdCB7XHJcbiAgaWQ6IHN0cmluZztcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgYXZhdGFyOiBzdHJpbmc7XHJcbiAgbWVtYmVyczogc3RyaW5nW107IC8vIENvbnRhY3QgSURzXHJcbiAgY3JlYXRlZEF0OiBzdHJpbmc7XHJcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2hhdExpc3RDb25maWcge1xyXG4gIG1heFJlY2VudENoYXRzOiBudW1iZXI7XHJcbiAgc2hvd1VucmVhZEJhZGdlOiBib29sZWFuO1xyXG4gIGVuYWJsZUdyb3VwQ2hhdDogYm9vbGVhbjtcclxuICBkZWZhdWx0QXZhdGFyczogc3RyaW5nW107XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTmV3Q2hhdE1vZGFsRGF0YSB7XHJcbiAgdHlwZTogJ3NpbmdsZScgfCAnZ3JvdXAnO1xyXG4gIHNlbGVjdGVkQ29udGFjdHM6IFNldDxzdHJpbmc+O1xyXG4gIGdyb3VwTmFtZT86IHN0cmluZztcclxuICBncm91cERlc2NyaXB0aW9uPzogc3RyaW5nO1xyXG59XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/chatList/types.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/chatList/unreadBadge.scss": 
  /*!*************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/chatList/unreadBadge.scss ***!
  \*************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY2hhdExpc3QvdW5yZWFkQmFkZ2Uuc2NzcyIsIm1hcHBpbmdzIjoiO0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WkmuS6keeGii/lpIfku70v57uZcm92b+eahC9tb2R1bGVzL2NoYXRMaXN0L3VucmVhZEJhZGdlLnNjc3M/Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpblxuZXhwb3J0IHt9OyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/chatList/unreadBadge.scss\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/chatList/unreadMessageManager.ts": 
  /*!********************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/chatList/unreadMessageManager.ts ***!
  \********************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UnreadMessageManager: () => (/* binding */ UnreadMessageManager)\n/* harmony export */ });\n/**\n * 未读消息管理器\n * 负责统计和管理聊天列表中的未读消息计数\n * 基于Bear内容解析系统，只统计角色消息，用户消息不计入未读\n */\nclass UnreadMessageManager {\n    STORAGE_KEY = 'unread_messages_data';\n    unreadData = new Map();\n    messageParser; // MessageParser实例的引用\n    constructor(messageParser) {\n        this.messageParser = messageParser;\n        this.loadFromStorage();\n    }\n    /**\n     * 设置MessageParser实例\n     * @param messageParser MessageParser实例\n     */\n    setMessageParser(messageParser) {\n        this.messageParser = messageParser;\n    }\n    /**\n     * 从localStorage加载未读消息数据\n     */\n    loadFromStorage() {\n        try {\n            const stored = localStorage.getItem(this.STORAGE_KEY);\n            if (stored) {\n                const data = JSON.parse(stored);\n                this.unreadData = new Map(Object.entries(data).map(([chatId, value]) => [\n                    chatId,\n                    {\n                        chatId,\n                        lastViewedMessageFingerprints: new Set(value.lastViewedMessageFingerprints || []),\n                        unreadCount: value.unreadCount || 0,\n                    },\n                ]));\n            }\n        }\n        catch (error) {\n            console.warn('加载未读消息数据失败:', error);\n            this.unreadData = new Map();\n        }\n    }\n    /**\n     * 保存未读消息数据到localStorage\n     */\n    saveToStorage() {\n        try {\n            const data = {};\n            for (const [chatId, unreadData] of this.unreadData) {\n                data[chatId] = {\n                    chatId,\n                    lastViewedMessageFingerprints: Array.from(unreadData.lastViewedMessageFingerprints),\n                    unreadCount: unreadData.unreadCount,\n                };\n            }\n            localStorage.setItem(this.STORAGE_KEY, JSON.stringify(data));\n        }\n        catch (error) {\n            console.warn('保存未读消息数据失败:', error);\n        }\n    }\n    /**\n     * 生成消息指纹（与备份.ts中的逻辑一致）\n     * @param message 消息对象\n     * @returns 消息指纹\n     */\n    generateMessageFingerprint(message) {\n        return `${message.chatId}_${message.sender}_${message.content}_${message.timestamp}`;\n    }\n    /**\n     * 计算指定聊天的未读消息数量\n     * @param chatId 聊天ID\n     * @param chatDataMap 当前的聊天数据Map\n     * @returns 未读消息数量\n     */\n    calculateUnreadCount(chatId, chatDataMap) {\n        try {\n            if (!chatDataMap) {\n                return this.getUnreadCount(chatId);\n            }\n            // 获取该聊天的数据\n            const chatData = chatDataMap.get(chatId);\n            if (!chatData || !chatData.messages) {\n                return 0;\n            }\n            // 获取已读消息指纹集合\n            const unreadData = this.unreadData.get(chatId);\n            const viewedFingerprints = unreadData?.lastViewedMessageFingerprints || new Set();\n            // 统计未读的角色消息\n            let unreadCount = 0;\n            for (const message of chatData.messages) {\n                // 只统计角色消息（非用户消息）\n                if (message.sender === '{{user}}' || message.sender === 'user') {\n                    continue;\n                }\n                const fingerprint = this.generateMessageFingerprint(message);\n                if (!viewedFingerprints.has(fingerprint)) {\n                    unreadCount++;\n                }\n            }\n            // 更新缓存的未读数量\n            if (unreadData) {\n                unreadData.unreadCount = unreadCount;\n            }\n            else {\n                this.unreadData.set(chatId, {\n                    chatId,\n                    lastViewedMessageFingerprints: new Set(),\n                    unreadCount,\n                });\n            }\n            return unreadCount;\n        }\n        catch (error) {\n            console.warn(`计算未读消息数量失败 (${chatId}):`, error);\n            return 0;\n        }\n    }\n    /**\n     * 标记聊天为已读（用户点击进入聊天时调用）\n     * @param chatId 聊天ID\n     * @param chatDataMap 当前的聊天数据Map\n     */\n    markAsRead(chatId, chatDataMap) {\n        try {\n            if (!chatDataMap) {\n                // 如果没有提供chatDataMap，只清零计数\n                const unreadData = this.unreadData.get(chatId);\n                if (unreadData) {\n                    unreadData.unreadCount = 0;\n                    this.saveToStorage();\n                    this.dispatchUnreadUpdateEvent(chatId, 0);\n                }\n                return;\n            }\n            // 获取该聊天的数据\n            const chatData = chatDataMap.get(chatId);\n            if (!chatData || !chatData.messages) {\n                return;\n            }\n            // 收集所有消息的指纹\n            const allMessageFingerprints = new Set();\n            for (const message of chatData.messages) {\n                const fingerprint = this.generateMessageFingerprint(message);\n                allMessageFingerprints.add(fingerprint);\n            }\n            // 更新已读消息指纹集合\n            this.unreadData.set(chatId, {\n                chatId,\n                lastViewedMessageFingerprints: allMessageFingerprints,\n                unreadCount: 0,\n            });\n            this.saveToStorage();\n            // 触发未读数量更新事件\n            this.dispatchUnreadUpdateEvent(chatId, 0);\n        }\n        catch (error) {\n            console.warn(`标记聊天为已读失败 (${chatId}):`, error);\n        }\n    }\n    /**\n     * 获取指定聊天的未读消息数量（从缓存）\n     * @param chatId 聊天ID\n     * @returns 未读消息数量\n     */\n    getUnreadCount(chatId) {\n        const data = this.unreadData.get(chatId);\n        return data?.unreadCount || 0;\n    }\n    /**\n     * 获取所有聊天的未读消息数量\n     * @returns 未读消息数据Map\n     */\n    getAllUnreadCounts() {\n        const result = new Map();\n        for (const [chatId, data] of this.unreadData) {\n            result.set(chatId, data.unreadCount);\n        }\n        return result;\n    }\n    /**\n     * 刷新所有聊天的未读消息计数\n     * @param chatDataMap 当前的聊天数据Map\n     * @param chatIds 要刷新的聊天ID列表，如果不提供则刷新所有\n     */\n    refreshUnreadCounts(chatDataMap, chatIds) {\n        const idsToRefresh = chatIds || Array.from(chatDataMap.keys());\n        for (const chatId of idsToRefresh) {\n            const newCount = this.calculateUnreadCount(chatId, chatDataMap);\n            this.dispatchUnreadUpdateEvent(chatId, newCount);\n        }\n        this.saveToStorage();\n    }\n    /**\n     * 当有新消息时更新未读计数\n     * @param chatId 聊天ID\n     * @param chatDataMap 当前的聊天数据Map\n     */\n    onNewMessage(chatId, chatDataMap) {\n        if (!chatDataMap) {\n            return;\n        }\n        // 重新计算该聊天的未读数量\n        const newCount = this.calculateUnreadCount(chatId, chatDataMap);\n        this.dispatchUnreadUpdateEvent(chatId, newCount);\n        this.saveToStorage();\n    }\n    /**\n     * 处理新消息数组（批量处理）\n     * @param newMessages 新消息数组\n     * @param chatDataMap 当前的聊天数据Map\n     * @param currentChatId 当前正在查看的聊天ID（如果用户正在此聊天中，新消息不计入未读）\n     */\n    onNewMessages(newMessages, chatDataMap, currentChatId) {\n        if (!newMessages.length || !chatDataMap) {\n            return;\n        }\n        // 收集涉及的聊天ID和对应的新消息数量\n        const affectedChats = new Map();\n        for (const message of newMessages) {\n            if (message.chatId && message.sender !== '{{user}}' && message.sender !== 'user') {\n                // 如果用户正在当前聊天中，该聊天的新消息不计入未读\n                if (currentChatId && message.chatId === currentChatId) {\n                    console.log(`📖 用户正在聊天 ${currentChatId} 中，新消息不计入未读`);\n                    continue;\n                }\n                const currentCount = affectedChats.get(message.chatId) || 0;\n                affectedChats.set(message.chatId, currentCount + 1);\n            }\n        }\n        // 批量更新未读计数\n        for (const [chatId, newMessageCount] of affectedChats) {\n            // 获取当前未读数量并增加新消息数量\n            const currentUnreadCount = this.getUnreadCount(chatId);\n            const totalUnreadCount = currentUnreadCount + newMessageCount;\n            // 更新存储的未读数量\n            const unreadData = this.unreadData.get(chatId);\n            if (unreadData) {\n                unreadData.unreadCount = totalUnreadCount;\n            }\n            else {\n                this.unreadData.set(chatId, {\n                    chatId,\n                    lastViewedMessageFingerprints: new Set(),\n                    unreadCount: totalUnreadCount,\n                });\n            }\n            console.log(`📊 聊天 ${chatId} 新增 ${newMessageCount} 条未读消息，总计 ${totalUnreadCount} 条`);\n            this.dispatchUnreadUpdateEvent(chatId, totalUnreadCount);\n        }\n        this.saveToStorage();\n    }\n    /**\n     * 触发未读数量更新事件\n     * @param chatId 聊天ID\n     * @param unreadCount 未读数量\n     */\n    dispatchUnreadUpdateEvent(chatId, unreadCount) {\n        const event = new CustomEvent('unreadCountUpdated', {\n            detail: { chatId, unreadCount },\n        });\n        document.dispatchEvent(event);\n    }\n    /**\n     * 清除指定聊天的未读数据\n     * @param chatId 聊天ID\n     */\n    clearUnreadData(chatId) {\n        this.unreadData.delete(chatId);\n        this.saveToStorage();\n        this.dispatchUnreadUpdateEvent(chatId, 0);\n    }\n    /**\n     * 清除所有未读数据\n     */\n    clearAllUnreadData() {\n        this.unreadData.clear();\n        this.saveToStorage();\n        // 触发所有聊天的未读数量清零事件\n        const event = new CustomEvent('allUnreadCountsCleared');\n        document.dispatchEvent(event);\n    }\n    /**\n     * 获取未读消息总数\n     * @returns 所有聊天的未读消息总数\n     */\n    getTotalUnreadCount() {\n        let total = 0;\n        for (const data of this.unreadData.values()) {\n            total += data.unreadCount;\n        }\n        return total;\n    }\n    /**\n     * 销毁管理器，清理资源\n     */\n    destroy() {\n        this.saveToStorage();\n        this.unreadData.clear();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY2hhdExpc3QvdW5yZWFkTWVzc2FnZU1hbmFnZXIudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7O0dBSUc7QUFRSSxNQUFNLG9CQUFvQjtJQUNkLFdBQVcsR0FBRyxzQkFBc0IsQ0FBQztJQUM5QyxVQUFVLEdBQW1DLElBQUksR0FBRyxFQUFFLENBQUM7SUFDdkQsYUFBYSxDQUFNLENBQUMscUJBQXFCO0lBRWpELFlBQVksYUFBbUI7UUFDN0IsSUFBSSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUM7UUFDbkMsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO0lBQ3pCLENBQUM7SUFFRDs7O09BR0c7SUFDSSxnQkFBZ0IsQ0FBQyxhQUFrQjtRQUN4QyxJQUFJLENBQUMsYUFBYSxHQUFHLGFBQWEsQ0FBQztJQUNyQyxDQUFDO0lBRUQ7O09BRUc7SUFDSyxlQUFlO1FBQ3JCLElBQUksQ0FBQztZQUNILE1BQU0sTUFBTSxHQUFHLFlBQVksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQ3RELElBQUksTUFBTSxFQUFFLENBQUM7Z0JBQ1gsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDaEMsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLEdBQUcsQ0FDdkIsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQWdCLEVBQUUsRUFBRSxDQUFDO29CQUMzRCxNQUFNO29CQUNOO3dCQUNFLE1BQU07d0JBQ04sNkJBQTZCLEVBQUUsSUFBSSxHQUFHLENBQUMsS0FBSyxDQUFDLDZCQUE2QixJQUFJLEVBQUUsQ0FBQzt3QkFDakYsV0FBVyxFQUFFLEtBQUssQ0FBQyxXQUFXLElBQUksQ0FBQztxQkFDcEM7aUJBQ0YsQ0FBQyxDQUNILENBQUM7WUFDSixD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hoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy9jaGF0TGlzdC91bnJlYWRNZXNzYWdlTWFuYWdlci50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIOacquivu+a2iOaBr+euoeeQhuWZqFxyXG4gKiDotJ/otKPnu5/orqHlkoznrqHnkIbogYrlpKnliJfooajkuK3nmoTmnKror7vmtojmga/orqHmlbBcclxuICog5Z+65LqOQmVhcuWGheWuueino+aekOezu+e7n++8jOWPque7n+iuoeinkuiJsua2iOaBr++8jOeUqOaIt+a2iOaBr+S4jeiuoeWFpeacquivu1xyXG4gKi9cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVW5yZWFkTWVzc2FnZURhdGEge1xyXG4gIGNoYXRJZDogc3RyaW5nO1xyXG4gIGxhc3RWaWV3ZWRNZXNzYWdlRmluZ2VycHJpbnRzOiBTZXQ8c3RyaW5nPjsgLy8g5a2Y5YKo5bey6K+75raI5oGv55qE5oyH57q5XHJcbiAgdW5yZWFkQ291bnQ6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFVucmVhZE1lc3NhZ2VNYW5hZ2VyIHtcclxuICBwcml2YXRlIHJlYWRvbmx5IFNUT1JBR0VfS0VZID0gJ3VucmVhZF9tZXNzYWdlc19kYXRhJztcclxuICBwcml2YXRlIHVucmVhZERhdGE6IE1hcDxzdHJpbmcsIFVucmVhZE1lc3NhZ2VEYXRhPiA9IG5ldyBNYXAoKTtcclxuICBwcml2YXRlIG1lc3NhZ2VQYXJzZXI6IGFueTsgLy8gTWVzc2FnZVBhcnNlcuWunuS+i+eahOW8leeUqFxyXG5cclxuICBjb25zdHJ1Y3RvcihtZXNzYWdlUGFyc2VyPzogYW55KSB7XHJcbiAgICB0aGlzLm1lc3NhZ2VQYXJzZXIgPSBtZXNzYWdlUGFyc2VyO1xyXG4gICAgdGhpcy5sb2FkRnJvbVN0b3JhZ2UoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiuvue9rk1lc3NhZ2VQYXJzZXLlrp7kvotcclxuICAgKiBAcGFyYW0gbWVzc2FnZVBhcnNlciBNZXNzYWdlUGFyc2Vy5a6e5L6LXHJcbiAgICovXHJcbiAgcHVibGljIHNldE1lc3NhZ2VQYXJzZXIobWVzc2FnZVBhcnNlcjogYW55KTogdm9pZCB7XHJcbiAgICB0aGlzLm1lc3NhZ2VQYXJzZXIgPSBtZXNzYWdlUGFyc2VyO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5LuObG9jYWxTdG9yYWdl5Yqg6L295pyq6K+75raI5oGv5pWw5o2uXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBsb2FkRnJvbVN0b3JhZ2UoKTogdm9pZCB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBzdG9yZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLlNUT1JBR0VfS0VZKTtcclxuICAgICAgaWYgKHN0b3JlZCkge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHN0b3JlZCk7XHJcbiAgICAgICAgdGhpcy51bnJlYWREYXRhID0gbmV3IE1hcChcclxuICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGRhdGEpLm1hcCgoW2NoYXRJZCwgdmFsdWVdOiBbc3RyaW5nLCBhbnldKSA9PiBbXHJcbiAgICAgICAgICAgIGNoYXRJZCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNoYXRJZCxcclxuICAgICAgICAgICAgICBsYXN0Vmlld2VkTWVzc2FnZUZpbmdlcnByaW50czogbmV3IFNldCh2YWx1ZS5sYXN0Vmlld2VkTWVzc2FnZUZpbmdlcnByaW50cyB8fCBbXSksXHJcbiAgICAgICAgICAgICAgdW5yZWFkQ291bnQ6IHZhbHVlLnVucmVhZENvdW50IHx8IDAsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICBdKSxcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ+WKoOi9veacquivu+a2iOaBr+aVsOaNruWksei0pTonLCBlcnJvcik7XHJcbiAgICAgIHRoaXMudW5yZWFkRGF0YSA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOS/neWtmOacquivu+a2iOaBr+aVsOaNruWIsGxvY2FsU3RvcmFnZVxyXG4gICAqL1xyXG4gIHByaXZhdGUgc2F2ZVRvU3RvcmFnZSgpOiB2b2lkIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGRhdGE6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcclxuICAgICAgZm9yIChjb25zdCBbY2hhdElkLCB1bnJlYWREYXRhXSBvZiB0aGlzLnVucmVhZERhdGEpIHtcclxuICAgICAgICBkYXRhW2NoYXRJZF0gPSB7XHJcbiAgICAgICAgICBjaGF0SWQsXHJcbiAgICAgICAgICBsYXN0Vmlld2VkTWVzc2FnZUZpbmdlcnByaW50czogQXJyYXkuZnJvbSh1bnJlYWREYXRhLmxhc3RWaWV3ZWRNZXNzYWdlRmluZ2VycHJpbnRzKSxcclxuICAgICAgICAgIHVucmVhZENvdW50OiB1bnJlYWREYXRhLnVucmVhZENvdW50LFxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5TVE9SQUdFX0tFWSwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS53YXJuKCfkv53lrZjmnKror7vmtojmga/mlbDmja7lpLHotKU6JywgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog55Sf5oiQ5raI5oGv5oyH57q577yI5LiO5aSH5Lu9LnRz5Lit55qE6YC76L6R5LiA6Ie077yJXHJcbiAgICogQHBhcmFtIG1lc3NhZ2Ug5raI5oGv5a+56LGhXHJcbiAgICogQHJldHVybnMg5raI5oGv5oyH57q5XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBnZW5lcmF0ZU1lc3NhZ2VGaW5nZXJwcmludChtZXNzYWdlOiBhbnkpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIGAke21lc3NhZ2UuY2hhdElkfV8ke21lc3NhZ2Uuc2VuZGVyfV8ke21lc3NhZ2UuY29udGVudH1fJHttZXNzYWdlLnRpbWVzdGFtcH1gO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6K6h566X5oyH5a6a6IGK5aSp55qE5pyq6K+75raI5oGv5pWw6YePXHJcbiAgICogQHBhcmFtIGNoYXRJZCDogYrlpKlJRFxyXG4gICAqIEBwYXJhbSBjaGF0RGF0YU1hcCDlvZPliY3nmoTogYrlpKnmlbDmja5NYXBcclxuICAgKiBAcmV0dXJucyDmnKror7vmtojmga/mlbDph49cclxuICAgKi9cclxuICBwdWJsaWMgY2FsY3VsYXRlVW5yZWFkQ291bnQoY2hhdElkOiBzdHJpbmcsIGNoYXREYXRhTWFwPzogTWFwPHN0cmluZywgYW55Pik6IG51bWJlciB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAoIWNoYXREYXRhTWFwKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VW5yZWFkQ291bnQoY2hhdElkKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g6I635Y+W6K+l6IGK5aSp55qE5pWw5o2uXHJcbiAgICAgIGNvbnN0IGNoYXREYXRhID0gY2hhdERhdGFNYXAuZ2V0KGNoYXRJZCk7XHJcbiAgICAgIGlmICghY2hhdERhdGEgfHwgIWNoYXREYXRhLm1lc3NhZ2VzKSB7XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOiOt+WPluW3suivu+a2iOaBr+aMh+e6uembhuWQiFxyXG4gICAgICBjb25zdCB1bnJlYWREYXRhID0gdGhpcy51bnJlYWREYXRhLmdldChjaGF0SWQpO1xyXG4gICAgICBjb25zdCB2aWV3ZWRGaW5nZXJwcmludHMgPSB1bnJlYWREYXRhPy5sYXN0Vmlld2VkTWVzc2FnZUZpbmdlcnByaW50cyB8fCBuZXcgU2V0PHN0cmluZz4oKTtcclxuXHJcbiAgICAgIC8vIOe7n+iuoeacquivu+eahOinkuiJsua2iOaBr1xyXG4gICAgICBsZXQgdW5yZWFkQ291bnQgPSAwO1xyXG4gICAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgY2hhdERhdGEubWVzc2FnZXMpIHtcclxuICAgICAgICAvLyDlj6rnu5/orqHop5LoibLmtojmga/vvIjpnZ7nlKjmiLfmtojmga/vvIlcclxuICAgICAgICBpZiAobWVzc2FnZS5zZW5kZXIgPT09ICd7e3VzZXJ9fScgfHwgbWVzc2FnZS5zZW5kZXIgPT09ICd1c2VyJykge1xyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBmaW5nZXJwcmludCA9IHRoaXMuZ2VuZXJhdGVNZXNzYWdlRmluZ2VycHJpbnQobWVzc2FnZSk7XHJcbiAgICAgICAgaWYgKCF2aWV3ZWRGaW5nZXJwcmludHMuaGFzKGZpbmdlcnByaW50KSkge1xyXG4gICAgICAgICAgdW5yZWFkQ291bnQrKztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOabtOaWsOe8k+WtmOeahOacquivu+aVsOmHj1xyXG4gICAgICBpZiAodW5yZWFkRGF0YSkge1xyXG4gICAgICAgIHVucmVhZERhdGEudW5yZWFkQ291bnQgPSB1bnJlYWRDb3VudDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnVucmVhZERhdGEuc2V0KGNoYXRJZCwge1xyXG4gICAgICAgICAgY2hhdElkLFxyXG4gICAgICAgICAgbGFzdFZpZXdlZE1lc3NhZ2VGaW5nZXJwcmludHM6IG5ldyBTZXQoKSxcclxuICAgICAgICAgIHVucmVhZENvdW50LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdW5yZWFkQ291bnQ7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oYOiuoeeul+acquivu+a2iOaBr+aVsOmHj+Wksei0pSAoJHtjaGF0SWR9KTpgLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5qCH6K6w6IGK5aSp5Li65bey6K+777yI55So5oi354K55Ye76L+b5YWl6IGK5aSp5pe26LCD55So77yJXHJcbiAgICogQHBhcmFtIGNoYXRJZCDogYrlpKlJRFxyXG4gICAqIEBwYXJhbSBjaGF0RGF0YU1hcCDlvZPliY3nmoTogYrlpKnmlbDmja5NYXBcclxuICAgKi9cclxuICBwdWJsaWMgbWFya0FzUmVhZChjaGF0SWQ6IHN0cmluZywgY2hhdERhdGFNYXA/OiBNYXA8c3RyaW5nLCBhbnk+KTogdm9pZCB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAoIWNoYXREYXRhTWFwKSB7XHJcbiAgICAgICAgLy8g5aaC5p6c5rKh5pyJ5o+Q5L6bY2hhdERhdGFNYXDvvIzlj6rmuIXpm7borqHmlbBcclxuICAgICAgICBjb25zdCB1bnJlYWREYXRhID0gdGhpcy51bnJlYWREYXRhLmdldChjaGF0SWQpO1xyXG4gICAgICAgIGlmICh1bnJlYWREYXRhKSB7XHJcbiAgICAgICAgICB1bnJlYWREYXRhLnVucmVhZENvdW50ID0gMDtcclxuICAgICAgICAgIHRoaXMuc2F2ZVRvU3RvcmFnZSgpO1xyXG4gICAgICAgICAgdGhpcy5kaXNwYXRjaFVucmVhZFVwZGF0ZUV2ZW50KGNoYXRJZCwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g6I635Y+W6K+l6IGK5aSp55qE5pWw5o2uXHJcbiAgICAgIGNvbnN0IGNoYXREYXRhID0gY2hhdERhdGFNYXAuZ2V0KGNoYXRJZCk7XHJcbiAgICAgIGlmICghY2hhdERhdGEgfHwgIWNoYXREYXRhLm1lc3NhZ2VzKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDmlLbpm4bmiYDmnInmtojmga/nmoTmjIfnurlcclxuICAgICAgY29uc3QgYWxsTWVzc2FnZUZpbmdlcnByaW50cyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xyXG4gICAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgY2hhdERhdGEubWVzc2FnZXMpIHtcclxuICAgICAgICBjb25zdCBmaW5nZXJwcmludCA9IHRoaXMuZ2VuZXJhdGVNZXNzYWdlRmluZ2VycHJpbnQobWVzc2FnZSk7XHJcbiAgICAgICAgYWxsTWVzc2FnZUZpbmdlcnByaW50cy5hZGQoZmluZ2VycHJpbnQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDmm7TmlrDlt7Lor7vmtojmga/mjIfnurnpm4blkIhcclxuICAgICAgdGhpcy51bnJlYWREYXRhLnNldChjaGF0SWQsIHtcclxuICAgICAgICBjaGF0SWQsXHJcbiAgICAgICAgbGFzdFZpZXdlZE1lc3NhZ2VGaW5nZXJwcmludHM6IGFsbE1lc3NhZ2VGaW5nZXJwcmludHMsXHJcbiAgICAgICAgdW5yZWFkQ291bnQ6IDAsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5zYXZlVG9TdG9yYWdlKCk7XHJcblxyXG4gICAgICAvLyDop6blj5HmnKror7vmlbDph4/mm7TmlrDkuovku7ZcclxuICAgICAgdGhpcy5kaXNwYXRjaFVucmVhZFVwZGF0ZUV2ZW50KGNoYXRJZCwgMCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oYOagh+iusOiBiuWkqeS4uuW3suivu+Wksei0pSAoJHtjaGF0SWR9KTpgLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bmjIflrprogYrlpKnnmoTmnKror7vmtojmga/mlbDph4/vvIjku47nvJPlrZjvvIlcclxuICAgKiBAcGFyYW0gY2hhdElkIOiBiuWkqUlEXHJcbiAgICogQHJldHVybnMg5pyq6K+75raI5oGv5pWw6YePXHJcbiAgICovXHJcbiAgcHVibGljIGdldFVucmVhZENvdW50KGNoYXRJZDogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgIGNvbnN0IGRhdGEgPSB0aGlzLnVucmVhZERhdGEuZ2V0KGNoYXRJZCk7XHJcbiAgICByZXR1cm4gZGF0YT8udW5yZWFkQ291bnQgfHwgMDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluaJgOacieiBiuWkqeeahOacquivu+a2iOaBr+aVsOmHj1xyXG4gICAqIEByZXR1cm5zIOacquivu+a2iOaBr+aVsOaNrk1hcFxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRBbGxVbnJlYWRDb3VudHMoKTogTWFwPHN0cmluZywgbnVtYmVyPiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xyXG5cclxuICAgIGZvciAoY29uc3QgW2NoYXRJZCwgZGF0YV0gb2YgdGhpcy51bnJlYWREYXRhKSB7XHJcbiAgICAgIHJlc3VsdC5zZXQoY2hhdElkLCBkYXRhLnVucmVhZENvdW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Yi35paw5omA5pyJ6IGK5aSp55qE5pyq6K+75raI5oGv6K6h5pWwXHJcbiAgICogQHBhcmFtIGNoYXREYXRhTWFwIOW9k+WJjeeahOiBiuWkqeaVsOaNrk1hcFxyXG4gICAqIEBwYXJhbSBjaGF0SWRzIOimgeWIt+aWsOeahOiBiuWkqUlE5YiX6KGo77yM5aaC5p6c5LiN5o+Q5L6b5YiZ5Yi35paw5omA5pyJXHJcbiAgICovXHJcbiAgcHVibGljIHJlZnJlc2hVbnJlYWRDb3VudHMoY2hhdERhdGFNYXA6IE1hcDxzdHJpbmcsIGFueT4sIGNoYXRJZHM/OiBzdHJpbmdbXSk6IHZvaWQge1xyXG4gICAgY29uc3QgaWRzVG9SZWZyZXNoID0gY2hhdElkcyB8fCBBcnJheS5mcm9tKGNoYXREYXRhTWFwLmtleXMoKSk7XHJcblxyXG4gICAgZm9yIChjb25zdCBjaGF0SWQgb2YgaWRzVG9SZWZyZXNoKSB7XHJcbiAgICAgIGNvbnN0IG5ld0NvdW50ID0gdGhpcy5jYWxjdWxhdGVVbnJlYWRDb3VudChjaGF0SWQsIGNoYXREYXRhTWFwKTtcclxuICAgICAgdGhpcy5kaXNwYXRjaFVucmVhZFVwZGF0ZUV2ZW50KGNoYXRJZCwgbmV3Q291bnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2F2ZVRvU3RvcmFnZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5b2T5pyJ5paw5raI5oGv5pe25pu05paw5pyq6K+76K6h5pWwXHJcbiAgICogQHBhcmFtIGNoYXRJZCDogYrlpKlJRFxyXG4gICAqIEBwYXJhbSBjaGF0RGF0YU1hcCDlvZPliY3nmoTogYrlpKnmlbDmja5NYXBcclxuICAgKi9cclxuICBwdWJsaWMgb25OZXdNZXNzYWdlKGNoYXRJZDogc3RyaW5nLCBjaGF0RGF0YU1hcD86IE1hcDxzdHJpbmcsIGFueT4pOiB2b2lkIHtcclxuICAgIGlmICghY2hhdERhdGFNYXApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOmHjeaWsOiuoeeul+ivpeiBiuWkqeeahOacquivu+aVsOmHj1xyXG4gICAgY29uc3QgbmV3Q291bnQgPSB0aGlzLmNhbGN1bGF0ZVVucmVhZENvdW50KGNoYXRJZCwgY2hhdERhdGFNYXApO1xyXG4gICAgdGhpcy5kaXNwYXRjaFVucmVhZFVwZGF0ZUV2ZW50KGNoYXRJZCwgbmV3Q291bnQpO1xyXG4gICAgdGhpcy5zYXZlVG9TdG9yYWdlKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlpITnkIbmlrDmtojmga/mlbDnu4TvvIjmibnph4/lpITnkIbvvIlcclxuICAgKiBAcGFyYW0gbmV3TWVzc2FnZXMg5paw5raI5oGv5pWw57uEXHJcbiAgICogQHBhcmFtIGNoYXREYXRhTWFwIOW9k+WJjeeahOiBiuWkqeaVsOaNrk1hcFxyXG4gICAqIEBwYXJhbSBjdXJyZW50Q2hhdElkIOW9k+WJjeato+WcqOafpeeci+eahOiBiuWkqUlE77yI5aaC5p6c55So5oi35q2j5Zyo5q2k6IGK5aSp5Lit77yM5paw5raI5oGv5LiN6K6h5YWl5pyq6K+777yJXHJcbiAgICovXHJcbiAgcHVibGljIG9uTmV3TWVzc2FnZXMobmV3TWVzc2FnZXM6IGFueVtdLCBjaGF0RGF0YU1hcD86IE1hcDxzdHJpbmcsIGFueT4sIGN1cnJlbnRDaGF0SWQ/OiBzdHJpbmcpOiB2b2lkIHtcclxuICAgIGlmICghbmV3TWVzc2FnZXMubGVuZ3RoIHx8ICFjaGF0RGF0YU1hcCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5pS26ZuG5raJ5Y+K55qE6IGK5aSpSUTlkozlr7nlupTnmoTmlrDmtojmga/mlbDph49cclxuICAgIGNvbnN0IGFmZmVjdGVkQ2hhdHMgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xyXG5cclxuICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBuZXdNZXNzYWdlcykge1xyXG4gICAgICBpZiAobWVzc2FnZS5jaGF0SWQgJiYgbWVzc2FnZS5zZW5kZXIgIT09ICd7e3VzZXJ9fScgJiYgbWVzc2FnZS5zZW5kZXIgIT09ICd1c2VyJykge1xyXG4gICAgICAgIC8vIOWmguaenOeUqOaIt+ato+WcqOW9k+WJjeiBiuWkqeS4re+8jOivpeiBiuWkqeeahOaWsOa2iOaBr+S4jeiuoeWFpeacquivu1xyXG4gICAgICAgIGlmIChjdXJyZW50Q2hhdElkICYmIG1lc3NhZ2UuY2hhdElkID09PSBjdXJyZW50Q2hhdElkKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhg8J+TliDnlKjmiLfmraPlnKjogYrlpKkgJHtjdXJyZW50Q2hhdElkfSDkuK3vvIzmlrDmtojmga/kuI3orqHlhaXmnKror7tgKTtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgY3VycmVudENvdW50ID0gYWZmZWN0ZWRDaGF0cy5nZXQobWVzc2FnZS5jaGF0SWQpIHx8IDA7XHJcbiAgICAgICAgYWZmZWN0ZWRDaGF0cy5zZXQobWVzc2FnZS5jaGF0SWQsIGN1cnJlbnRDb3VudCArIDEpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5om56YeP5pu05paw5pyq6K+76K6h5pWwXHJcbiAgICBmb3IgKGNvbnN0IFtjaGF0SWQsIG5ld01lc3NhZ2VDb3VudF0gb2YgYWZmZWN0ZWRDaGF0cykge1xyXG4gICAgICAvLyDojrflj5blvZPliY3mnKror7vmlbDph4/lubblop7liqDmlrDmtojmga/mlbDph49cclxuICAgICAgY29uc3QgY3VycmVudFVucmVhZENvdW50ID0gdGhpcy5nZXRVbnJlYWRDb3VudChjaGF0SWQpO1xyXG4gICAgICBjb25zdCB0b3RhbFVucmVhZENvdW50ID0gY3VycmVudFVucmVhZENvdW50ICsgbmV3TWVzc2FnZUNvdW50O1xyXG5cclxuICAgICAgLy8g5pu05paw5a2Y5YKo55qE5pyq6K+75pWw6YePXHJcbiAgICAgIGNvbnN0IHVucmVhZERhdGEgPSB0aGlzLnVucmVhZERhdGEuZ2V0KGNoYXRJZCk7XHJcbiAgICAgIGlmICh1bnJlYWREYXRhKSB7XHJcbiAgICAgICAgdW5yZWFkRGF0YS51bnJlYWRDb3VudCA9IHRvdGFsVW5yZWFkQ291bnQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy51bnJlYWREYXRhLnNldChjaGF0SWQsIHtcclxuICAgICAgICAgIGNoYXRJZCxcclxuICAgICAgICAgIGxhc3RWaWV3ZWRNZXNzYWdlRmluZ2VycHJpbnRzOiBuZXcgU2V0KCksXHJcbiAgICAgICAgICB1bnJlYWRDb3VudDogdG90YWxVbnJlYWRDb3VudCxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc29sZS5sb2coYPCfk4og6IGK5aSpICR7Y2hhdElkfSDmlrDlop4gJHtuZXdNZXNzYWdlQ291bnR9IOadoeacquivu+a2iOaBr++8jOaAu+iuoSAke3RvdGFsVW5yZWFkQ291bnR9IOadoWApO1xyXG4gICAgICB0aGlzLmRpc3BhdGNoVW5yZWFkVXBkYXRlRXZlbnQoY2hhdElkLCB0b3RhbFVucmVhZENvdW50KTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNhdmVUb1N0b3JhZ2UoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOinpuWPkeacquivu+aVsOmHj+abtOaWsOS6i+S7tlxyXG4gICAqIEBwYXJhbSBjaGF0SWQg6IGK5aSpSURcclxuICAgKiBAcGFyYW0gdW5yZWFkQ291bnQg5pyq6K+75pWw6YePXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBkaXNwYXRjaFVucmVhZFVwZGF0ZUV2ZW50KGNoYXRJZDogc3RyaW5nLCB1bnJlYWRDb3VudDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgndW5yZWFkQ291bnRVcGRhdGVkJywge1xyXG4gICAgICBkZXRhaWw6IHsgY2hhdElkLCB1bnJlYWRDb3VudCB9LFxyXG4gICAgfSk7XHJcbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOa4hemZpOaMh+WumuiBiuWkqeeahOacquivu+aVsOaNrlxyXG4gICAqIEBwYXJhbSBjaGF0SWQg6IGK5aSpSURcclxuICAgKi9cclxuICBwdWJsaWMgY2xlYXJVbnJlYWREYXRhKGNoYXRJZDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICB0aGlzLnVucmVhZERhdGEuZGVsZXRlKGNoYXRJZCk7XHJcbiAgICB0aGlzLnNhdmVUb1N0b3JhZ2UoKTtcclxuICAgIHRoaXMuZGlzcGF0Y2hVbnJlYWRVcGRhdGVFdmVudChjaGF0SWQsIDApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5riF6Zmk5omA5pyJ5pyq6K+75pWw5o2uXHJcbiAgICovXHJcbiAgcHVibGljIGNsZWFyQWxsVW5yZWFkRGF0YSgpOiB2b2lkIHtcclxuICAgIHRoaXMudW5yZWFkRGF0YS5jbGVhcigpO1xyXG4gICAgdGhpcy5zYXZlVG9TdG9yYWdlKCk7XHJcblxyXG4gICAgLy8g6Kem5Y+R5omA5pyJ6IGK5aSp55qE5pyq6K+75pWw6YeP5riF6Zu25LqL5Lu2XHJcbiAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgnYWxsVW5yZWFkQ291bnRzQ2xlYXJlZCcpO1xyXG4gICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bmnKror7vmtojmga/mgLvmlbBcclxuICAgKiBAcmV0dXJucyDmiYDmnInogYrlpKnnmoTmnKror7vmtojmga/mgLvmlbBcclxuICAgKi9cclxuICBwdWJsaWMgZ2V0VG90YWxVbnJlYWRDb3VudCgpOiBudW1iZXIge1xyXG4gICAgbGV0IHRvdGFsID0gMDtcclxuICAgIGZvciAoY29uc3QgZGF0YSBvZiB0aGlzLnVucmVhZERhdGEudmFsdWVzKCkpIHtcclxuICAgICAgdG90YWwgKz0gZGF0YS51bnJlYWRDb3VudDtcclxuICAgIH1cclxuICAgIHJldHVybiB0b3RhbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmUgOavgeeuoeeQhuWZqO+8jOa4heeQhui1hOa6kFxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xyXG4gICAgdGhpcy5zYXZlVG9TdG9yYWdlKCk7XHJcbiAgICB0aGlzLnVucmVhZERhdGEuY2xlYXIoKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/chatList/unreadMessageManager.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/chatList/wallpaperManager.ts": 
  /*!****************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/chatList/wallpaperManager.ts ***!
  \****************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WallpaperManager: () => (/* binding */ WallpaperManager)\n/* harmony export */ });\n/* harmony import */ var _profile_StorageManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../profile/StorageManager */ \"./src/多云熊/备份/给rovo的/modules/profile/StorageManager.ts\");\n/**\n * WallpaperManager - 壁纸管理器\n * 负责聊天列表背景壁纸的管理和应用\n */\n\nclass WallpaperManager {\n    static instance;\n    storageManager;\n    currentWallpaper = '';\n    defaultWallpaper = 'https://files.catbox.moe/o84j4n.jpg';\n    constructor() {\n        this.storageManager = _profile_StorageManager__WEBPACK_IMPORTED_MODULE_0__.StorageManager.getInstance();\n        this.initialize();\n    }\n    /**\n     * 获取单例实例\n     */\n    static getInstance() {\n        if (!WallpaperManager.instance) {\n            WallpaperManager.instance = new WallpaperManager();\n        }\n        return WallpaperManager.instance;\n    }\n    /**\n     * 初始化壁纸管理器\n     */\n    initialize() {\n        // 加载保存的壁纸设置\n        this.loadWallpaperFromSettings();\n        // 监听设置变更事件\n        document.addEventListener('settingsChange', (event) => {\n            this.handleSettingsChange(event.detail.settings);\n        });\n        // 监听角色切换事件（如果有的话）\n        document.addEventListener('characterChange', () => {\n            console.log('[WallpaperManager] 检测到角色切换，重新加载壁纸');\n            this.forceRefresh();\n        });\n        // 应用当前壁纸\n        this.applyWallpaper();\n    }\n    /**\n     * 从设置中加载壁纸\n     */\n    loadWallpaperFromSettings() {\n        try {\n            const settings = this.storageManager.loadSettings();\n            this.currentWallpaper = settings.chatListWallpaper || this.defaultWallpaper;\n            console.log('[WallpaperManager] 加载壁纸设置:', this.currentWallpaper ? '自定义壁纸' : '默认壁纸');\n        }\n        catch (error) {\n            console.error('[WallpaperManager] 加载壁纸设置失败:', error);\n            this.currentWallpaper = this.defaultWallpaper;\n        }\n    }\n    /**\n     * 处理设置变更\n     */\n    handleSettingsChange(settings) {\n        const newWallpaper = settings.chatListWallpaper || this.defaultWallpaper;\n        if (newWallpaper !== this.currentWallpaper) {\n            console.log('[WallpaperManager] 检测到壁纸变更，应用新壁纸');\n            this.currentWallpaper = newWallpaper;\n            this.applyWallpaper();\n        }\n    }\n    /**\n     * 应用壁纸到聊天列表界面\n     */\n    applyWallpaper() {\n        const chatListInterface = document.querySelector('.chat-list-interface');\n        if (chatListInterface) {\n            // 应用背景图片\n            chatListInterface.style.backgroundImage = `url('${this.currentWallpaper}')`;\n            chatListInterface.style.backgroundSize = 'cover';\n            chatListInterface.style.backgroundPosition = 'center';\n            chatListInterface.style.backgroundRepeat = 'no-repeat';\n            console.log('[WallpaperManager] 壁纸已应用到聊天列表界面');\n        }\n        else {\n            console.warn('[WallpaperManager] 未找到聊天列表界面元素，稍后重试');\n            // 如果元素还没有加载，延迟重试\n            setTimeout(() => {\n                this.applyWallpaper();\n            }, 100);\n        }\n    }\n    /**\n     * 设置自定义壁纸\n     */\n    setCustomWallpaper(wallpaperData) {\n        try {\n            // 更新当前壁纸\n            this.currentWallpaper = wallpaperData;\n            // 保存到设置\n            const settings = this.storageManager.loadSettings();\n            settings.chatListWallpaper = wallpaperData;\n            this.storageManager.saveSettings(settings);\n            // 应用壁纸\n            this.applyWallpaper();\n            console.log('[WallpaperManager] 自定义壁纸设置成功');\n        }\n        catch (error) {\n            console.error('[WallpaperManager] 设置自定义壁纸失败:', error);\n            throw error;\n        }\n    }\n    /**\n     * 重置为默认壁纸\n     */\n    resetToDefault() {\n        try {\n            // 更新当前壁纸\n            this.currentWallpaper = this.defaultWallpaper;\n            // 清除设置中的自定义壁纸\n            const settings = this.storageManager.loadSettings();\n            settings.chatListWallpaper = '';\n            this.storageManager.saveSettings(settings);\n            // 应用默认壁纸\n            this.applyWallpaper();\n            console.log('[WallpaperManager] 已重置为默认壁纸');\n        }\n        catch (error) {\n            console.error('[WallpaperManager] 重置默认壁纸失败:', error);\n            throw error;\n        }\n    }\n    /**\n     * 获取当前壁纸\n     */\n    getCurrentWallpaper() {\n        return this.currentWallpaper;\n    }\n    /**\n     * 检查是否使用自定义壁纸\n     */\n    isUsingCustomWallpaper() {\n        return this.currentWallpaper !== this.defaultWallpaper;\n    }\n    /**\n     * 预加载壁纸图片\n     */\n    preloadWallpaper(wallpaperUrl) {\n        return new Promise((resolve, reject) => {\n            const img = new Image();\n            img.onload = () => {\n                console.log('[WallpaperManager] 壁纸预加载成功');\n                resolve();\n            };\n            img.onerror = error => {\n                console.error('[WallpaperManager] 壁纸预加载失败:', error);\n                reject(error);\n            };\n            img.src = wallpaperUrl;\n        });\n    }\n    /**\n     * 强制刷新壁纸\n     */\n    forceRefresh() {\n        console.log('[WallpaperManager] 强制刷新壁纸');\n        this.loadWallpaperFromSettings();\n        this.applyWallpaper();\n    }\n    /**\n     * 处理角色切换\n     */\n    handleCharacterChange() {\n        console.log('[WallpaperManager] 处理角色切换，重新加载壁纸设置');\n        this.forceRefresh();\n    }\n    /**\n     * 清除当前角色的壁纸缓存\n     */\n    clearWallpaperCache() {\n        try {\n            // 清除当前设置中的壁纸\n            const settings = this.storageManager.loadSettings();\n            settings.chatListWallpaper = '';\n            this.storageManager.saveSettings(settings);\n            // 重置为默认壁纸\n            this.currentWallpaper = this.defaultWallpaper;\n            // 应用默认壁纸\n            this.applyWallpaper();\n            console.log('[WallpaperManager] 壁纸缓存已清除，已恢复为默认壁纸');\n        }\n        catch (error) {\n            console.error('[WallpaperManager] 清除壁纸缓存失败:', error);\n            throw error;\n        }\n    }\n    /**\n     * 销毁壁纸管理器\n     */\n    destroy() {\n        // 移除事件监听器\n        document.removeEventListener('settingsChange', this.handleSettingsChange.bind(this));\n        // 重置为默认壁纸\n        const chatListInterface = document.querySelector('.chat-list-interface');\n        if (chatListInterface) {\n            chatListInterface.style.backgroundImage = `url('${this.defaultWallpaper}')`;\n        }\n        console.log('[WallpaperManager] 壁纸管理器已销毁');\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY2hhdExpc3Qvd2FsbHBhcGVyTWFuYWdlci50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBOzs7R0FHRztBQUV3RDtBQUdwRCxNQUFNLGdCQUFnQjtJQUNuQixNQUFNLENBQUMsUUFBUSxDQUFtQjtJQUNsQyxjQUFjLENBQWlCO0lBQy9CLGdCQUFnQixHQUFXLEVBQUUsQ0FBQztJQUM5QixnQkFBZ0IsR0FBVyxxQ0FBcUMsQ0FBQztJQUV6RTtRQUNFLElBQUksQ0FBQyxjQUFjLEdBQUcsbUVBQWMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNuRCxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7SUFDcEIsQ0FBQztJQUVEOztPQUVHO0lBQ0ksTUFBTSxDQUFDLFdBQVc7UUFDdkIsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQy9CLGdCQUFnQixDQUFDLFFBQVEsR0FBRyxJQUFJLGdCQUFnQixFQUFFLENBQUM7UUFDckQsQ0FBQztRQUNELE9BQU8sZ0JBQWdCLENBQUMsUUFBUSxDQUFDO0lBQ25DLENBQUM7SUFFRDs7T0FFRztJQUNLLFVBQVU7UUFDaEIsWUFBWTtRQUNaLElBQUksQ0FBQyx5QkFBeUIsRUFBRSxDQUFDO1FBRWpDLFdBQVc7UUFDWCxRQUFRLENBQUMsZ0JBQWdCLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxLQUFrQixFQUFFLEVBQUU7WUFDakUsSUFBSSxDQUFDLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDbkQsQ0FBQyxDQUFDLENBQUM7UUFFSCxrQkFBa0I7UUFDbEIsUUFBUSxDQUFDLGdCQUFnQixDQUFDLGlCQUFpQixFQUFFLEdBQUcsRUFBRTtZQUNoRCxPQUFPLENBQUMsR0FBRyxDQUFDLG1DQUFtQyxDQUFDLENBQUM7WUFDakQsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1FBQ3RCLENBQUMsQ0FBQyxDQUFD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TztRQUNaLFVBQVU7UUFDVixRQUFRLENBQUMsbUJBQW1CLENBQUMsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBRXJGLFVBQVU7UUFDVixNQUFNLGlCQUFpQixHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsc0JBQXNCLENBQWdCLENBQUM7UUFDeEYsSUFBSSxpQkFBaUIsRUFBRSxDQUFDO1lBQ3RCLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxlQUFlLEdBQUcsUUFBUSxJQUFJLENBQUMsZ0JBQWdCLElBQUksQ0FBQztRQUM5RSxDQUFDO1FBRUQsT0FBTyxDQUFDLEdBQUcsQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDO0lBQzdDLENBQUM7Q0FDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY2hhdExpc3Qvd2FsbHBhcGVyTWFuYWdlci50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFdhbGxwYXBlck1hbmFnZXIgLSDlo4HnurjnrqHnkIblmahcclxuICog6LSf6LSj6IGK5aSp5YiX6KGo6IOM5pmv5aOB57q455qE566h55CG5ZKM5bqU55SoXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgU3RvcmFnZU1hbmFnZXIgfSBmcm9tICcuLi9wcm9maWxlL1N0b3JhZ2VNYW5hZ2VyJztcclxuaW1wb3J0IHsgQXBwU2V0dGluZ3MgfSBmcm9tICcuLi9wcm9maWxlL3R5cGVzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBXYWxscGFwZXJNYW5hZ2VyIHtcclxuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogV2FsbHBhcGVyTWFuYWdlcjtcclxuICBwcml2YXRlIHN0b3JhZ2VNYW5hZ2VyOiBTdG9yYWdlTWFuYWdlcjtcclxuICBwcml2YXRlIGN1cnJlbnRXYWxscGFwZXI6IHN0cmluZyA9ICcnO1xyXG4gIHByaXZhdGUgZGVmYXVsdFdhbGxwYXBlcjogc3RyaW5nID0gJ2h0dHBzOi8vZmlsZXMuY2F0Ym94Lm1vZS9vODRqNG4uanBnJztcclxuXHJcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuc3RvcmFnZU1hbmFnZXIgPSBTdG9yYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xyXG4gICAgdGhpcy5pbml0aWFsaXplKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bljZXkvovlrp7kvotcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldEluc3RhbmNlKCk6IFdhbGxwYXBlck1hbmFnZXIge1xyXG4gICAgaWYgKCFXYWxscGFwZXJNYW5hZ2VyLmluc3RhbmNlKSB7XHJcbiAgICAgIFdhbGxwYXBlck1hbmFnZXIuaW5zdGFuY2UgPSBuZXcgV2FsbHBhcGVyTWFuYWdlcigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFdhbGxwYXBlck1hbmFnZXIuaW5zdGFuY2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliJ3lp4vljJblo4HnurjnrqHnkIblmahcclxuICAgKi9cclxuICBwcml2YXRlIGluaXRpYWxpemUoKTogdm9pZCB7XHJcbiAgICAvLyDliqDovb3kv53lrZjnmoTlo4Hnurjorr7nva5cclxuICAgIHRoaXMubG9hZFdhbGxwYXBlckZyb21TZXR0aW5ncygpO1xyXG5cclxuICAgIC8vIOebkeWQrOiuvue9ruWPmOabtOS6i+S7tlxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2V0dGluZ3NDaGFuZ2UnLCAoZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuaGFuZGxlU2V0dGluZ3NDaGFuZ2UoZXZlbnQuZGV0YWlsLnNldHRpbmdzKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIOebkeWQrOinkuiJsuWIh+aNouS6i+S7tu+8iOWmguaenOacieeahOivne+8iVxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2hhcmFjdGVyQ2hhbmdlJywgKCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygnW1dhbGxwYXBlck1hbmFnZXJdIOajgOa1i+WIsOinkuiJsuWIh+aNou+8jOmHjeaWsOWKoOi9veWjgee6uCcpO1xyXG4gICAgICB0aGlzLmZvcmNlUmVmcmVzaCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8g5bqU55So5b2T5YmN5aOB57q4XHJcbiAgICB0aGlzLmFwcGx5V2FsbHBhcGVyKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDku47orr7nva7kuK3liqDovb3lo4HnurhcclxuICAgKi9cclxuICBwcml2YXRlIGxvYWRXYWxscGFwZXJGcm9tU2V0dGluZ3MoKTogdm9pZCB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMuc3RvcmFnZU1hbmFnZXIubG9hZFNldHRpbmdzKCk7XHJcbiAgICAgIHRoaXMuY3VycmVudFdhbGxwYXBlciA9IHNldHRpbmdzLmNoYXRMaXN0V2FsbHBhcGVyIHx8IHRoaXMuZGVmYXVsdFdhbGxwYXBlcjtcclxuICAgICAgY29uc29sZS5sb2coJ1tXYWxscGFwZXJNYW5hZ2VyXSDliqDovb3lo4Hnurjorr7nva46JywgdGhpcy5jdXJyZW50V2FsbHBhcGVyID8gJ+iHquWumuS5ieWjgee6uCcgOiAn6buY6K6k5aOB57q4Jyk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdbV2FsbHBhcGVyTWFuYWdlcl0g5Yqg6L295aOB57q46K6+572u5aSx6LSlOicsIGVycm9yKTtcclxuICAgICAgdGhpcy5jdXJyZW50V2FsbHBhcGVyID0gdGhpcy5kZWZhdWx0V2FsbHBhcGVyO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5aSE55CG6K6+572u5Y+Y5pu0XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBoYW5kbGVTZXR0aW5nc0NoYW5nZShzZXR0aW5nczogQXBwU2V0dGluZ3MpOiB2b2lkIHtcclxuICAgIGNvbnN0IG5ld1dhbGxwYXBlciA9IHNldHRpbmdzLmNoYXRMaXN0V2FsbHBhcGVyIHx8IHRoaXMuZGVmYXVsdFdhbGxwYXBlcjtcclxuXHJcbiAgICBpZiAobmV3V2FsbHBhcGVyICE9PSB0aGlzLmN1cnJlbnRXYWxscGFwZXIpIHtcclxuICAgICAgY29uc29sZS5sb2coJ1tXYWxscGFwZXJNYW5hZ2VyXSDmo4DmtYvliLDlo4Hnurjlj5jmm7TvvIzlupTnlKjmlrDlo4HnurgnKTtcclxuICAgICAgdGhpcy5jdXJyZW50V2FsbHBhcGVyID0gbmV3V2FsbHBhcGVyO1xyXG4gICAgICB0aGlzLmFwcGx5V2FsbHBhcGVyKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlupTnlKjlo4HnurjliLDogYrlpKnliJfooajnlYzpnaJcclxuICAgKi9cclxuICBwdWJsaWMgYXBwbHlXYWxscGFwZXIoKTogdm9pZCB7XHJcbiAgICBjb25zdCBjaGF0TGlzdEludGVyZmFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LWxpc3QtaW50ZXJmYWNlJykgYXMgSFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgaWYgKGNoYXRMaXN0SW50ZXJmYWNlKSB7XHJcbiAgICAgIC8vIOW6lOeUqOiDjOaZr+WbvueJh1xyXG4gICAgICBjaGF0TGlzdEludGVyZmFjZS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCcke3RoaXMuY3VycmVudFdhbGxwYXBlcn0nKWA7XHJcbiAgICAgIGNoYXRMaXN0SW50ZXJmYWNlLnN0eWxlLmJhY2tncm91bmRTaXplID0gJ2NvdmVyJztcclxuICAgICAgY2hhdExpc3RJbnRlcmZhY2Uuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uID0gJ2NlbnRlcic7XHJcbiAgICAgIGNoYXRMaXN0SW50ZXJmYWNlLnN0eWxlLmJhY2tncm91bmRSZXBlYXQgPSAnbm8tcmVwZWF0JztcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKCdbV2FsbHBhcGVyTWFuYWdlcl0g5aOB57q45bey5bqU55So5Yiw6IGK5aSp5YiX6KGo55WM6Z2iJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ1tXYWxscGFwZXJNYW5hZ2VyXSDmnKrmib7liLDogYrlpKnliJfooajnlYzpnaLlhYPntKDvvIznqI3lkI7ph43or5UnKTtcclxuXHJcbiAgICAgIC8vIOWmguaenOWFg+e0oOi/mOayoeacieWKoOi9ve+8jOW7tui/n+mHjeivlVxyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICB0aGlzLmFwcGx5V2FsbHBhcGVyKCk7XHJcbiAgICAgIH0sIDEwMCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDorr7nva7oh6rlrprkuYnlo4HnurhcclxuICAgKi9cclxuICBwdWJsaWMgc2V0Q3VzdG9tV2FsbHBhcGVyKHdhbGxwYXBlckRhdGE6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g5pu05paw5b2T5YmN5aOB57q4XHJcbiAgICAgIHRoaXMuY3VycmVudFdhbGxwYXBlciA9IHdhbGxwYXBlckRhdGE7XHJcblxyXG4gICAgICAvLyDkv53lrZjliLDorr7nva5cclxuICAgICAgY29uc3Qgc2V0dGluZ3MgPSB0aGlzLnN0b3JhZ2VNYW5hZ2VyLmxvYWRTZXR0aW5ncygpO1xyXG4gICAgICBzZXR0aW5ncy5jaGF0TGlzdFdhbGxwYXBlciA9IHdhbGxwYXBlckRhdGE7XHJcbiAgICAgIHRoaXMuc3RvcmFnZU1hbmFnZXIuc2F2ZVNldHRpbmdzKHNldHRpbmdzKTtcclxuXHJcbiAgICAgIC8vIOW6lOeUqOWjgee6uFxyXG4gICAgICB0aGlzLmFwcGx5V2FsbHBhcGVyKCk7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnW1dhbGxwYXBlck1hbmFnZXJdIOiHquWumuS5ieWjgee6uOiuvue9ruaIkOWKnycpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW1dhbGxwYXBlck1hbmFnZXJdIOiuvue9ruiHquWumuS5ieWjgee6uOWksei0pTonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6YeN572u5Li66buY6K6k5aOB57q4XHJcbiAgICovXHJcbiAgcHVibGljIHJlc2V0VG9EZWZhdWx0KCk6IHZvaWQge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g5pu05paw5b2T5YmN5aOB57q4XHJcbiAgICAgIHRoaXMuY3VycmVudFdhbGxwYXBlciA9IHRoaXMuZGVmYXVsdFdhbGxwYXBlcjtcclxuXHJcbiAgICAgIC8vIOa4hemZpOiuvue9ruS4reeahOiHquWumuS5ieWjgee6uFxyXG4gICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMuc3RvcmFnZU1hbmFnZXIubG9hZFNldHRpbmdzKCk7XHJcbiAgICAgIHNldHRpbmdzLmNoYXRMaXN0V2FsbHBhcGVyID0gJyc7XHJcbiAgICAgIHRoaXMuc3RvcmFnZU1hbmFnZXIuc2F2ZVNldHRpbmdzKHNldHRpbmdzKTtcclxuXHJcbiAgICAgIC8vIOW6lOeUqOm7mOiupOWjgee6uFxyXG4gICAgICB0aGlzLmFwcGx5V2FsbHBhcGVyKCk7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnW1dhbGxwYXBlck1hbmFnZXJdIOW3sumHjee9ruS4uum7mOiupOWjgee6uCcpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW1dhbGxwYXBlck1hbmFnZXJdIOmHjee9rum7mOiupOWjgee6uOWksei0pTonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5b2T5YmN5aOB57q4XHJcbiAgICovXHJcbiAgcHVibGljIGdldEN1cnJlbnRXYWxscGFwZXIoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLmN1cnJlbnRXYWxscGFwZXI7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmo4Dmn6XmmK/lkKbkvb/nlKjoh6rlrprkuYnlo4HnurhcclxuICAgKi9cclxuICBwdWJsaWMgaXNVc2luZ0N1c3RvbVdhbGxwYXBlcigpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLmN1cnJlbnRXYWxscGFwZXIgIT09IHRoaXMuZGVmYXVsdFdhbGxwYXBlcjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmihOWKoOi9veWjgee6uOWbvueJh1xyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmVsb2FkV2FsbHBhcGVyKHdhbGxwYXBlclVybDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuXHJcbiAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1tXYWxscGFwZXJNYW5hZ2VyXSDlo4HnurjpooTliqDovb3miJDlip8nKTtcclxuICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBpbWcub25lcnJvciA9IGVycm9yID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdbV2FsbHBhcGVyTWFuYWdlcl0g5aOB57q46aKE5Yqg6L295aSx6LSlOicsIGVycm9yKTtcclxuICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgaW1nLnNyYyA9IHdhbGxwYXBlclVybDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5by65Yi25Yi35paw5aOB57q4XHJcbiAgICovXHJcbiAgcHVibGljIGZvcmNlUmVmcmVzaCgpOiB2b2lkIHtcclxuICAgIGNvbnNvbGUubG9nKCdbV2FsbHBhcGVyTWFuYWdlcl0g5by65Yi25Yi35paw5aOB57q4Jyk7XHJcbiAgICB0aGlzLmxvYWRXYWxscGFwZXJGcm9tU2V0dGluZ3MoKTtcclxuICAgIHRoaXMuYXBwbHlXYWxscGFwZXIoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWkhOeQhuinkuiJsuWIh+aNolxyXG4gICAqL1xyXG4gIHB1YmxpYyBoYW5kbGVDaGFyYWN0ZXJDaGFuZ2UoKTogdm9pZCB7XHJcbiAgICBjb25zb2xlLmxvZygnW1dhbGxwYXBlck1hbmFnZXJdIOWkhOeQhuinkuiJsuWIh+aNou+8jOmHjeaWsOWKoOi9veWjgee6uOiuvue9ricpO1xyXG4gICAgdGhpcy5mb3JjZVJlZnJlc2goKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOa4hemZpOW9k+WJjeinkuiJsueahOWjgee6uOe8k+WtmFxyXG4gICAqL1xyXG4gIHB1YmxpYyBjbGVhcldhbGxwYXBlckNhY2hlKCk6IHZvaWQge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g5riF6Zmk5b2T5YmN6K6+572u5Lit55qE5aOB57q4XHJcbiAgICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5zdG9yYWdlTWFuYWdlci5sb2FkU2V0dGluZ3MoKTtcclxuICAgICAgc2V0dGluZ3MuY2hhdExpc3RXYWxscGFwZXIgPSAnJztcclxuICAgICAgdGhpcy5zdG9yYWdlTWFuYWdlci5zYXZlU2V0dGluZ3Moc2V0dGluZ3MpO1xyXG5cclxuICAgICAgLy8g6YeN572u5Li66buY6K6k5aOB57q4XHJcbiAgICAgIHRoaXMuY3VycmVudFdhbGxwYXBlciA9IHRoaXMuZGVmYXVsdFdhbGxwYXBlcjtcclxuXHJcbiAgICAgIC8vIOW6lOeUqOm7mOiupOWjgee6uFxyXG4gICAgICB0aGlzLmFwcGx5V2FsbHBhcGVyKCk7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnW1dhbGxwYXBlck1hbmFnZXJdIOWjgee6uOe8k+WtmOW3sua4hemZpO+8jOW3suaBouWkjeS4uum7mOiupOWjgee6uCcpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW1dhbGxwYXBlck1hbmFnZXJdIOa4hemZpOWjgee6uOe8k+WtmOWksei0pTonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6ZSA5q+B5aOB57q4566h55CG5ZmoXHJcbiAgICovXHJcbiAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAvLyDnp7vpmaTkuovku7bnm5HlkKzlmahcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3NldHRpbmdzQ2hhbmdlJywgdGhpcy5oYW5kbGVTZXR0aW5nc0NoYW5nZS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAvLyDph43nva7kuLrpu5jorqTlo4HnurhcclxuICAgIGNvbnN0IGNoYXRMaXN0SW50ZXJmYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQtbGlzdC1pbnRlcmZhY2UnKSBhcyBIVE1MRWxlbWVudDtcclxuICAgIGlmIChjaGF0TGlzdEludGVyZmFjZSkge1xyXG4gICAgICBjaGF0TGlzdEludGVyZmFjZS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCcke3RoaXMuZGVmYXVsdFdhbGxwYXBlcn0nKWA7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ1tXYWxscGFwZXJNYW5hZ2VyXSDlo4HnurjnrqHnkIblmajlt7LplIDmr4EnKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/chatList/wallpaperManager.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/chatMigration/ChatMigrationManager.ts": 
  /*!*************************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/chatMigration/ChatMigrationManager.ts ***!
  \*************************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatMigrationManager: () => (/* binding */ ChatMigrationManager)\n/* harmony export */ });\n/**\n * ChatMigrationManager - 聊天记录迁移管理器\n * 负责自动从历史楼层迁移 <bear></bear> 标签内容到当前楼层\n */\n// 移除未使用的声明\nclass ChatMigrationManager {\n    static instance;\n    isEnabled = false;\n    SETTING_KEY = 'bear_chat_migration_enabled';\n    // 移除搜索深度限制\n    isProcessing = false; // 防止重复处理\n    lastCheckedMessageId = -1; // 记录上次检查的楼层ID\n    lastCheckedContent = ''; // 记录上次检查的内容\n    migratedMessages = new Set(); // 记录已迁移的楼层ID\n    constructor() {\n        this.loadSettings();\n    }\n    /**\n     * 获取单例实例\n     */\n    static getInstance() {\n        if (!ChatMigrationManager.instance) {\n            ChatMigrationManager.instance = new ChatMigrationManager();\n        }\n        return ChatMigrationManager.instance;\n    }\n    /**\n     * 初始化管理器\n     */\n    initialize() {\n        this.loadSettings();\n        this.logInfo('ChatMigrationManager 已初始化');\n    }\n    /**\n     * 检查功能是否启用\n     */\n    isFeatureEnabled() {\n        return this.isEnabled;\n    }\n    /**\n     * 设置功能启用状态\n     */\n    setFeatureEnabled(enabled) {\n        this.isEnabled = enabled;\n        this.saveSettings();\n        this.logInfo(`聊天记录迁移功能已${enabled ? '启用' : '禁用'}`);\n    }\n    /**\n     * 主要的检查和迁移方法\n     * 在界面渲染时调用\n     */\n    async checkAndMigrate() {\n        // 只在调试模式下显示开始信息\n        // this.logInfo('🔍 开始检查和迁移流程');\n        try {\n            // 检查功能是否启用\n            if (!this.isEnabled) {\n                // 功能未启用时不输出日志，避免干扰\n                return;\n            }\n            // 防止重复处理\n            if (this.isProcessing) {\n                // 正在处理时不输出日志，避免干扰\n                return;\n            }\n            // 获取当前楼层ID\n            const currentMessageId = getLastMessageId();\n            if (currentMessageId < 0) {\n                return;\n            }\n            // 检查是否与上次检查的楼层相同\n            if (currentMessageId === this.lastCheckedMessageId) {\n                return;\n            }\n            this.isProcessing = true;\n            // 获取当前楼层内容\n            const currentMessages = getChatMessages(currentMessageId);\n            if (!currentMessages || currentMessages.length === 0) {\n                return;\n            }\n            const currentMessage = currentMessages[0];\n            const currentContent = currentMessage.message;\n            // 检查内容是否与上次相同\n            if (currentContent === this.lastCheckedContent) {\n                return;\n            }\n            // 更新检查记录\n            this.lastCheckedMessageId = currentMessageId;\n            this.lastCheckedContent = currentContent;\n            // 检查是否包含空的 <bear></bear> 标签（需要迁移的标签）\n            const hasEmptyBearTags = this.containsEmptyBearTags(currentContent);\n            if (!hasEmptyBearTags) {\n                return;\n            }\n            // 检查该楼层是否已经迁移过\n            if (this.migratedMessages.has(currentMessageId)) {\n                return;\n            }\n            this.logInfo(`🔍 在楼层 ${currentMessageId} 发现空的 <bear></bear> 标签，开始搜索历史内容`);\n            // 搜索历史内容\n            const historyResult = await this.findHistoryContent(currentMessageId);\n            if (!historyResult) {\n                return;\n            }\n            // 执行内容迁移\n            await this.migrateContent(currentMessageId, currentContent, historyResult);\n        }\n        catch (error) {\n            this.logError('检查和迁移过程', error);\n        }\n        finally {\n            this.isProcessing = false;\n        }\n    }\n    /**\n     * 检查文本是否包含空的 <bear></bear> 标签（需要迁移的标签）\n     */\n    containsEmptyBearTags(text) {\n        const emptyBearTagRegex = /<bear>\\s*<\\/bear>/gs;\n        return emptyBearTagRegex.test(text);\n    }\n    /**\n     * 检查文本是否包含 <bear></bear> 标签（用于搜索历史内容）\n     */\n    containsBearTags(text) {\n        const bearTagRegex = /<bear>.*?<\\/bear>/gs;\n        return bearTagRegex.test(text);\n    }\n    /**\n     * 从历史楼层搜索 <bear></bear> 内容\n     */\n    async findHistoryContent(currentMessageId) {\n        try {\n            let searchedCount = 0;\n            // 从当前楼层的上一层开始向上搜索，无深度限制\n            for (let messageId = currentMessageId - 1; messageId >= 0; messageId--) {\n                searchedCount++;\n                const messages = getChatMessages(messageId);\n                if (!messages || messages.length === 0) {\n                    continue;\n                }\n                const message = messages[0];\n                const content = message.message;\n                // 检查是否包含 <bear></bear> 标签\n                if (this.containsBearTags(content)) {\n                    const bearContent = this.extractBearContent(content);\n                    if (bearContent) {\n                        this.logInfo(`✅ 在楼层 ${messageId} 找到历史内容 (搜索了 ${searchedCount} 个楼层)`);\n                        return { messageId, content: bearContent };\n                    }\n                }\n                // 每搜索20个楼层输出一次进度\n                if (searchedCount % 20 === 0) {\n                    this.logInfo(`🔍 已搜索 ${searchedCount} 个楼层...`);\n                }\n            }\n            this.logInfo(`❌ 未找到历史内容 (共搜索 ${searchedCount} 个楼层)`);\n            return null;\n        }\n        catch (error) {\n            this.logError('搜索历史内容', error);\n            return null;\n        }\n    }\n    /**\n     * 提取 <bear></bear> 标签内的内容\n     */\n    extractBearContent(text) {\n        const bearTagRegex = /<bear>(.*?)<\\/bear>/s;\n        const match = text.match(bearTagRegex);\n        return match ? match[1] : null;\n    }\n    /**\n     * 执行内容迁移\n     */\n    async migrateContent(currentMessageId, currentContent, historyResult) {\n        this.logInfo(`🚀 执行迁移: 楼层 ${historyResult.messageId} → 楼层 ${currentMessageId}`);\n        try {\n            // 替换当前楼层的 <bear></bear> 内容\n            const newContent = this.replaceBearContent(currentContent, historyResult.content);\n            // 更新当前楼层\n            await setChatMessages([\n                {\n                    message_id: currentMessageId,\n                    message: newContent,\n                },\n            ], { refresh: 'none' });\n            // 隐藏源楼层\n            await this.hideSourceMessage(historyResult.messageId);\n            // 记录已迁移的楼层\n            this.migratedMessages.add(currentMessageId);\n            // 显示成功提示\n            this.logInfo(`✅ 迁移完成`);\n            toastr.success('已成功迁移聊天记录', '迁移完成');\n        }\n        catch (error) {\n            this.logError('迁移内容', error);\n        }\n    }\n    /**\n     * 替换空的 <bear></bear> 标签内容\n     */\n    replaceBearContent(currentText, historyContent) {\n        const emptyBearTagRegex = /<bear>\\s*<\\/bear>/s;\n        return currentText.replace(emptyBearTagRegex, `<bear>${historyContent}</bear>`);\n    }\n    /**\n     * 隐藏源楼层\n     */\n    async hideSourceMessage(messageId) {\n        try {\n            // 检查楼层是否已经隐藏\n            const messages = getChatMessages(messageId);\n            if (!messages || messages.length === 0) {\n                return;\n            }\n            const message = messages[0];\n            if (message.is_hidden) {\n                return;\n            }\n            // 使用 /hide 命令隐藏楼层\n            triggerSlash(`/hide ${messageId}`);\n            this.logInfo(`🙈 已隐藏源楼层 ${messageId}`);\n        }\n        catch (error) {\n            this.logError('隐藏源楼层', error);\n            // 隐藏失败不影响迁移结果，只记录错误\n        }\n    }\n    /**\n     * 加载设置\n     */\n    loadSettings() {\n        try {\n            // 使用localStorage避免触发酒馆变量系统的日志输出\n            const savedValue = localStorage.getItem(this.SETTING_KEY);\n            this.isEnabled = savedValue === 'true';\n        }\n        catch (error) {\n            this.logError('加载设置', error);\n            this.isEnabled = false; // 默认禁用\n        }\n    }\n    /**\n     * 保存设置\n     */\n    saveSettings() {\n        try {\n            // 使用localStorage避免触发酒馆变量系统的日志输出\n            localStorage.setItem(this.SETTING_KEY, this.isEnabled.toString());\n        }\n        catch (error) {\n            this.logError('保存设置', error);\n        }\n    }\n    /**\n     * 记录信息日志\n     */\n    logInfo(message) {\n        console.log(`[ChatMigrationManager] ${message}`);\n    }\n    /**\n     * 记录错误日志\n     */\n    logError(operation, error) {\n        console.error(`[ChatMigrationManager] ${operation} 失败:`, error);\n    }\n    /**\n     * 销毁管理器\n     */\n    destroy() {\n        this.isProcessing = false;\n        this.logInfo('ChatMigrationManager 已销毁');\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY2hhdE1pZ3JhdGlvbi9DaGF0TWlncmF0aW9uTWFuYWdlci50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7OztHQUdHO0FBaUJILFdBQVc7QUFFSixNQUFNLG9CQUFvQjtJQUN2QixNQUFNLENBQUMsUUFBUSxDQUF1QjtJQUN0QyxTQUFTLEdBQVksS0FBSyxDQUFDO0lBQ2xCLFdBQVcsR0FBRyw2QkFBNkIsQ0FBQztJQUM3RCxXQUFXO0lBQ0gsWUFBWSxHQUFZLEtBQUssQ0FBQyxDQUFDLFNBQVM7SUFDeEMsb0JBQW9CLEdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxjQUFjO0lBQ2pELGtCQUFrQixHQUFXLEVBQUUsQ0FBQyxDQUFDLFlBQVk7SUFDN0MsZ0JBQWdCLEdBQWdCLElBQUksR0FBRyxFQUFFLENBQUMsQ0FBQyxhQUFhO0lBRWhFO1FBQ0UsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQ3RCLENBQUM7SUFFRDs7T0FFRztJQUNJLE1BQU0sQ0FBQyxXQUFXO1FBQ3ZCLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUNuQyxvQkFBb0IsQ0FBQyxRQUFRLEdBQUcsSUFBSSxvQkFBb0IsRUFBRSxDQUFDO1FBQzdELENBQUM7UUFDRCxPQUFPLG9CQUFvQixDQUFDLFFBQVEsQ0FBQztJQUN2QyxDQUFDO0lBRUQ7O09BRUc7SUFDSSxVQUFVO1FBQ2YsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1FBQ3BCLElBQUksQ0FBQyxPQUFPLENBQUMsMkJBQTJCLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBRUQ7O09BRUc7SUFDSSxnQkFBZ0I7UUFDckIsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQ3hCLENBQUM7SUFFRDs7T0FFRztJQUNJLGlCQUFpQixDQUFDLE9BQWdCO1FBQ3ZDLElBQUksQ0FBQyxTQUFTLEdBQUcsT0FBTyxDQUFDO1FBQ3pCLElBQUksQ0FBQyxZQUFZ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QkFBMEIsQ0FBQyxDQUFDO0lBQzNDLENBQUM7Q0FDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY2hhdE1pZ3JhdGlvbi9DaGF0TWlncmF0aW9uTWFuYWdlci50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENoYXRNaWdyYXRpb25NYW5hZ2VyIC0g6IGK5aSp6K6w5b2V6L+B56e7566h55CG5ZmoXHJcbiAqIOi0n+i0o+iHquWKqOS7juWOhuWPsualvOWxgui/geenuyA8YmVhcj48L2JlYXI+IOagh+etvuWGheWuueWIsOW9k+WJjealvOWxglxyXG4gKi9cclxuXHJcbmRlY2xhcmUgY29uc3QgdG9hc3RyOiB7XHJcbiAgc3VjY2VzczogKG1lc3NhZ2U6IHN0cmluZywgdGl0bGU/OiBzdHJpbmcpID0+IHZvaWQ7XHJcbiAgZXJyb3I6IChtZXNzYWdlOiBzdHJpbmcsIHRpdGxlPzogc3RyaW5nKSA9PiB2b2lkO1xyXG4gIHdhcm5pbmc6IChtZXNzYWdlOiBzdHJpbmcsIHRpdGxlPzogc3RyaW5nKSA9PiB2b2lkO1xyXG4gIGluZm86IChtZXNzYWdlOiBzdHJpbmcsIHRpdGxlPzogc3RyaW5nKSA9PiB2b2lkO1xyXG59O1xyXG5cclxuLy8g5aOw5piO6YWS6aaG5Yqp5omL5YWo5bGA5Ye95pWwXHJcbmRlY2xhcmUgZnVuY3Rpb24gZ2V0Q2hhdE1lc3NhZ2VzKHJhbmdlOiBzdHJpbmcgfCBudW1iZXIpOiBhbnlbXTtcclxuZGVjbGFyZSBmdW5jdGlvbiBzZXRDaGF0TWVzc2FnZXMoXHJcbiAgbWVzc2FnZXM6IEFycmF5PHsgbWVzc2FnZV9pZDogbnVtYmVyOyBtZXNzYWdlPzogc3RyaW5nOyBba2V5OiBzdHJpbmddOiBhbnkgfT4sXHJcbiAgb3B0aW9ucz86IHsgcmVmcmVzaD86ICdub25lJyB8ICdhZmZlY3RlZCcgfCAnYWxsJyB9LFxyXG4pOiBQcm9taXNlPHZvaWQ+O1xyXG5kZWNsYXJlIGZ1bmN0aW9uIGdldExhc3RNZXNzYWdlSWQoKTogbnVtYmVyO1xyXG5kZWNsYXJlIGZ1bmN0aW9uIHRyaWdnZXJTbGFzaChjb21tYW5kOiBzdHJpbmcpOiB2b2lkO1xyXG4vLyDnp7vpmaTmnKrkvb/nlKjnmoTlo7DmmI5cclxuXHJcbmV4cG9ydCBjbGFzcyBDaGF0TWlncmF0aW9uTWFuYWdlciB7XHJcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IENoYXRNaWdyYXRpb25NYW5hZ2VyO1xyXG4gIHByaXZhdGUgaXNFbmFibGVkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBTRVRUSU5HX0tFWSA9ICdiZWFyX2NoYXRfbWlncmF0aW9uX2VuYWJsZWQnO1xyXG4gIC8vIOenu+mZpOaQnOe0oua3seW6pumZkOWItlxyXG4gIHByaXZhdGUgaXNQcm9jZXNzaW5nOiBib29sZWFuID0gZmFsc2U7IC8vIOmYsuatoumHjeWkjeWkhOeQhlxyXG4gIHByaXZhdGUgbGFzdENoZWNrZWRNZXNzYWdlSWQ6IG51bWJlciA9IC0xOyAvLyDorrDlvZXkuIrmrKHmo4Dmn6XnmoTmpbzlsYJJRFxyXG4gIHByaXZhdGUgbGFzdENoZWNrZWRDb250ZW50OiBzdHJpbmcgPSAnJzsgLy8g6K6w5b2V5LiK5qyh5qOA5p+l55qE5YaF5a65XHJcbiAgcHJpdmF0ZSBtaWdyYXRlZE1lc3NhZ2VzOiBTZXQ8bnVtYmVyPiA9IG5ldyBTZXQoKTsgLy8g6K6w5b2V5bey6L+B56e755qE5qW85bGCSURcclxuXHJcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMubG9hZFNldHRpbmdzKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bljZXkvovlrp7kvotcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldEluc3RhbmNlKCk6IENoYXRNaWdyYXRpb25NYW5hZ2VyIHtcclxuICAgIGlmICghQ2hhdE1pZ3JhdGlvbk1hbmFnZXIuaW5zdGFuY2UpIHtcclxuICAgICAgQ2hhdE1pZ3JhdGlvbk1hbmFnZXIuaW5zdGFuY2UgPSBuZXcgQ2hhdE1pZ3JhdGlvbk1hbmFnZXIoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBDaGF0TWlncmF0aW9uTWFuYWdlci5pbnN0YW5jZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWIneWni+WMlueuoeeQhuWZqFxyXG4gICAqL1xyXG4gIHB1YmxpYyBpbml0aWFsaXplKCk6IHZvaWQge1xyXG4gICAgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuICAgIHRoaXMubG9nSW5mbygnQ2hhdE1pZ3JhdGlvbk1hbmFnZXIg5bey5Yid5aeL5YyWJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmo4Dmn6Xlip/og73mmK/lkKblkK/nlKhcclxuICAgKi9cclxuICBwdWJsaWMgaXNGZWF0dXJlRW5hYmxlZCgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLmlzRW5hYmxlZDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiuvue9ruWKn+iDveWQr+eUqOeKtuaAgVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXRGZWF0dXJlRW5hYmxlZChlbmFibGVkOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICB0aGlzLmlzRW5hYmxlZCA9IGVuYWJsZWQ7XHJcbiAgICB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgdGhpcy5sb2dJbmZvKGDogYrlpKnorrDlvZXov4Hnp7vlip/og73lt7Ike2VuYWJsZWQgPyAn5ZCv55SoJyA6ICfnpoHnlKgnfWApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Li76KaB55qE5qOA5p+l5ZKM6L+B56e75pa55rOVXHJcbiAgICog5Zyo55WM6Z2i5riy5p+T5pe26LCD55SoXHJcbiAgICovXHJcbiAgcHVibGljIGFzeW5jIGNoZWNrQW5kTWlncmF0ZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIC8vIOWPquWcqOiwg+ivleaooeW8j+S4i+aYvuekuuW8gOWni+S/oeaBr1xyXG4gICAgLy8gdGhpcy5sb2dJbmZvKCfwn5SNIOW8gOWni+ajgOafpeWSjOi/geenu+a1geeoiycpO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOajgOafpeWKn+iDveaYr+WQpuWQr+eUqFxyXG4gICAgICBpZiAoIXRoaXMuaXNFbmFibGVkKSB7XHJcbiAgICAgICAgLy8g5Yqf6IO95pyq5ZCv55So5pe25LiN6L6T5Ye65pel5b+X77yM6YG/5YWN5bmy5omwXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDpmLLmraLph43lpI3lpITnkIZcclxuICAgICAgaWYgKHRoaXMuaXNQcm9jZXNzaW5nKSB7XHJcbiAgICAgICAgLy8g5q2j5Zyo5aSE55CG5pe25LiN6L6T5Ye65pel5b+X77yM6YG/5YWN5bmy5omwXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDojrflj5blvZPliY3mpbzlsYJJRFxyXG4gICAgICBjb25zdCBjdXJyZW50TWVzc2FnZUlkID0gZ2V0TGFzdE1lc3NhZ2VJZCgpO1xyXG4gICAgICBpZiAoY3VycmVudE1lc3NhZ2VJZCA8IDApIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOajgOafpeaYr+WQpuS4juS4iuasoeajgOafpeeahOalvOWxguebuOWQjFxyXG4gICAgICBpZiAoY3VycmVudE1lc3NhZ2VJZCA9PT0gdGhpcy5sYXN0Q2hlY2tlZE1lc3NhZ2VJZCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5pc1Byb2Nlc3NpbmcgPSB0cnVlO1xyXG5cclxuICAgICAgLy8g6I635Y+W5b2T5YmN5qW85bGC5YaF5a65XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRNZXNzYWdlcyA9IGdldENoYXRNZXNzYWdlcyhjdXJyZW50TWVzc2FnZUlkKTtcclxuICAgICAgaWYgKCFjdXJyZW50TWVzc2FnZXMgfHwgY3VycmVudE1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgY3VycmVudE1lc3NhZ2UgPSBjdXJyZW50TWVzc2FnZXNbMF07XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRDb250ZW50ID0gY3VycmVudE1lc3NhZ2UubWVzc2FnZTtcclxuXHJcbiAgICAgIC8vIOajgOafpeWGheWuueaYr+WQpuS4juS4iuasoeebuOWQjFxyXG4gICAgICBpZiAoY3VycmVudENvbnRlbnQgPT09IHRoaXMubGFzdENoZWNrZWRDb250ZW50KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDmm7TmlrDmo4Dmn6XorrDlvZVcclxuICAgICAgdGhpcy5sYXN0Q2hlY2tlZE1lc3NhZ2VJZCA9IGN1cnJlbnRNZXNzYWdlSWQ7XHJcbiAgICAgIHRoaXMubGFzdENoZWNrZWRDb250ZW50ID0gY3VycmVudENvbnRlbnQ7XHJcblxyXG4gICAgICAvLyDmo4Dmn6XmmK/lkKbljIXlkKvnqbrnmoQgPGJlYXI+PC9iZWFyPiDmoIfnrb7vvIjpnIDopoHov4Hnp7vnmoTmoIfnrb7vvIlcclxuICAgICAgY29uc3QgaGFzRW1wdHlCZWFyVGFncyA9IHRoaXMuY29udGFpbnNFbXB0eUJlYXJUYWdzKGN1cnJlbnRDb250ZW50KTtcclxuICAgICAgaWYgKCFoYXNFbXB0eUJlYXJUYWdzKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDmo4Dmn6Xor6XmpbzlsYLmmK/lkKblt7Lnu4/ov4Hnp7vov4dcclxuICAgICAgaWYgKHRoaXMubWlncmF0ZWRNZXNzYWdlcy5oYXMoY3VycmVudE1lc3NhZ2VJZCkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMubG9nSW5mbyhg8J+UjSDlnKjmpbzlsYIgJHtjdXJyZW50TWVzc2FnZUlkfSDlj5HnjrDnqbrnmoQgPGJlYXI+PC9iZWFyPiDmoIfnrb7vvIzlvIDlp4vmkJzntKLljoblj7LlhoXlrrlgKTtcclxuXHJcbiAgICAgIC8vIOaQnOe0ouWOhuWPsuWGheWuuVxyXG4gICAgICBjb25zdCBoaXN0b3J5UmVzdWx0ID0gYXdhaXQgdGhpcy5maW5kSGlzdG9yeUNvbnRlbnQoY3VycmVudE1lc3NhZ2VJZCk7XHJcbiAgICAgIGlmICghaGlzdG9yeVJlc3VsdCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5omn6KGM5YaF5a656L+B56e7XHJcbiAgICAgIGF3YWl0IHRoaXMubWlncmF0ZUNvbnRlbnQoY3VycmVudE1lc3NhZ2VJZCwgY3VycmVudENvbnRlbnQsIGhpc3RvcnlSZXN1bHQpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5sb2dFcnJvcign5qOA5p+l5ZKM6L+B56e76L+H56iLJywgZXJyb3IpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgdGhpcy5pc1Byb2Nlc3NpbmcgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOajgOafpeaWh+acrOaYr+WQpuWMheWQq+epuueahCA8YmVhcj48L2JlYXI+IOagh+etvu+8iOmcgOimgei/geenu+eahOagh+etvu+8iVxyXG4gICAqL1xyXG4gIHByaXZhdGUgY29udGFpbnNFbXB0eUJlYXJUYWdzKHRleHQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgY29uc3QgZW1wdHlCZWFyVGFnUmVnZXggPSAvPGJlYXI+XFxzKjxcXC9iZWFyPi9ncztcclxuICAgIHJldHVybiBlbXB0eUJlYXJUYWdSZWdleC50ZXN0KHRleHQpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5qOA5p+l5paH5pys5piv5ZCm5YyF5ZCrIDxiZWFyPjwvYmVhcj4g5qCH562+77yI55So5LqO5pCc57Si5Y6G5Y+y5YaF5a6577yJXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBjb250YWluc0JlYXJUYWdzKHRleHQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgY29uc3QgYmVhclRhZ1JlZ2V4ID0gLzxiZWFyPi4qPzxcXC9iZWFyPi9ncztcclxuICAgIHJldHVybiBiZWFyVGFnUmVnZXgudGVzdCh0ZXh0KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOS7juWOhuWPsualvOWxguaQnOe0oiA8YmVhcj48L2JlYXI+IOWGheWuuVxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgZmluZEhpc3RvcnlDb250ZW50KGN1cnJlbnRNZXNzYWdlSWQ6IG51bWJlcik6IFByb21pc2U8eyBtZXNzYWdlSWQ6IG51bWJlcjsgY29udGVudDogc3RyaW5nIH0gfCBudWxsPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBsZXQgc2VhcmNoZWRDb3VudCA9IDA7XHJcbiAgICAgIC8vIOS7juW9k+WJjealvOWxgueahOS4iuS4gOWxguW8gOWni+WQkeS4iuaQnOe0ou+8jOaXoOa3seW6pumZkOWItlxyXG4gICAgICBmb3IgKGxldCBtZXNzYWdlSWQgPSBjdXJyZW50TWVzc2FnZUlkIC0gMTsgbWVzc2FnZUlkID49IDA7IG1lc3NhZ2VJZC0tKSB7XHJcbiAgICAgICAgc2VhcmNoZWRDb3VudCsrO1xyXG5cclxuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IGdldENoYXRNZXNzYWdlcyhtZXNzYWdlSWQpO1xyXG4gICAgICAgIGlmICghbWVzc2FnZXMgfHwgbWVzc2FnZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBtZXNzYWdlc1swXTtcclxuICAgICAgICBjb25zdCBjb250ZW50ID0gbWVzc2FnZS5tZXNzYWdlO1xyXG5cclxuICAgICAgICAvLyDmo4Dmn6XmmK/lkKbljIXlkKsgPGJlYXI+PC9iZWFyPiDmoIfnrb5cclxuICAgICAgICBpZiAodGhpcy5jb250YWluc0JlYXJUYWdzKGNvbnRlbnQpKSB7XHJcbiAgICAgICAgICBjb25zdCBiZWFyQ29udGVudCA9IHRoaXMuZXh0cmFjdEJlYXJDb250ZW50KGNvbnRlbnQpO1xyXG4gICAgICAgICAgaWYgKGJlYXJDb250ZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9nSW5mbyhg4pyFIOWcqOalvOWxgiAke21lc3NhZ2VJZH0g5om+5Yiw5Y6G5Y+y5YaF5a65ICjmkJzntKLkuoYgJHtzZWFyY2hlZENvdW50fSDkuKrmpbzlsYIpYCk7XHJcbiAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2VJZCwgY29udGVudDogYmVhckNvbnRlbnQgfTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOavj+aQnOe0ojIw5Liq5qW85bGC6L6T5Ye65LiA5qyh6L+b5bqmXHJcbiAgICAgICAgaWYgKHNlYXJjaGVkQ291bnQgJSAyMCA9PT0gMCkge1xyXG4gICAgICAgICAgdGhpcy5sb2dJbmZvKGDwn5SNIOW3suaQnOe0oiAke3NlYXJjaGVkQ291bnR9IOS4qualvOWxgi4uLmApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5sb2dJbmZvKGDinYwg5pyq5om+5Yiw5Y6G5Y+y5YaF5a65ICjlhbHmkJzntKIgJHtzZWFyY2hlZENvdW50fSDkuKrmpbzlsYIpYCk7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5sb2dFcnJvcign5pCc57Si5Y6G5Y+y5YaF5a65JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaPkOWPliA8YmVhcj48L2JlYXI+IOagh+etvuWGheeahOWGheWuuVxyXG4gICAqL1xyXG4gIHByaXZhdGUgZXh0cmFjdEJlYXJDb250ZW50KHRleHQ6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xyXG4gICAgY29uc3QgYmVhclRhZ1JlZ2V4ID0gLzxiZWFyPiguKj8pPFxcL2JlYXI+L3M7XHJcbiAgICBjb25zdCBtYXRjaCA9IHRleHQubWF0Y2goYmVhclRhZ1JlZ2V4KTtcclxuICAgIHJldHVybiBtYXRjaCA/IG1hdGNoWzFdIDogbnVsbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaJp+ihjOWGheWuuei/geenu1xyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgbWlncmF0ZUNvbnRlbnQoXHJcbiAgICBjdXJyZW50TWVzc2FnZUlkOiBudW1iZXIsXHJcbiAgICBjdXJyZW50Q29udGVudDogc3RyaW5nLFxyXG4gICAgaGlzdG9yeVJlc3VsdDogeyBtZXNzYWdlSWQ6IG51bWJlcjsgY29udGVudDogc3RyaW5nIH0sXHJcbiAgKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0aGlzLmxvZ0luZm8oYPCfmoAg5omn6KGM6L+B56e7OiDmpbzlsYIgJHtoaXN0b3J5UmVzdWx0Lm1lc3NhZ2VJZH0g4oaSIOalvOWxgiAke2N1cnJlbnRNZXNzYWdlSWR9YCk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g5pu/5o2i5b2T5YmN5qW85bGC55qEIDxiZWFyPjwvYmVhcj4g5YaF5a65XHJcbiAgICAgIGNvbnN0IG5ld0NvbnRlbnQgPSB0aGlzLnJlcGxhY2VCZWFyQ29udGVudChjdXJyZW50Q29udGVudCwgaGlzdG9yeVJlc3VsdC5jb250ZW50KTtcclxuXHJcbiAgICAgIC8vIOabtOaWsOW9k+WJjealvOWxglxyXG4gICAgICBhd2FpdCBzZXRDaGF0TWVzc2FnZXMoXHJcbiAgICAgICAgW1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBtZXNzYWdlX2lkOiBjdXJyZW50TWVzc2FnZUlkLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBuZXdDb250ZW50LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICBdLFxyXG4gICAgICAgIHsgcmVmcmVzaDogJ25vbmUnIH0sXHJcbiAgICAgICk7XHJcblxyXG4gICAgICAvLyDpmpDol4/mupDmpbzlsYJcclxuICAgICAgYXdhaXQgdGhpcy5oaWRlU291cmNlTWVzc2FnZShoaXN0b3J5UmVzdWx0Lm1lc3NhZ2VJZCk7XHJcblxyXG4gICAgICAvLyDorrDlvZXlt7Lov4Hnp7vnmoTmpbzlsYJcclxuICAgICAgdGhpcy5taWdyYXRlZE1lc3NhZ2VzLmFkZChjdXJyZW50TWVzc2FnZUlkKTtcclxuXHJcbiAgICAgIC8vIOaYvuekuuaIkOWKn+aPkOekulxyXG4gICAgICB0aGlzLmxvZ0luZm8oYOKchSDov4Hnp7vlrozmiJBgKTtcclxuICAgICAgdG9hc3RyLnN1Y2Nlc3MoJ+W3suaIkOWKn+i/geenu+iBiuWkqeiusOW9lScsICfov4Hnp7vlrozmiJAnKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRoaXMubG9nRXJyb3IoJ+i/geenu+WGheWuuScsIGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOabv+aNouepuueahCA8YmVhcj48L2JlYXI+IOagh+etvuWGheWuuVxyXG4gICAqL1xyXG4gIHByaXZhdGUgcmVwbGFjZUJlYXJDb250ZW50KGN1cnJlbnRUZXh0OiBzdHJpbmcsIGhpc3RvcnlDb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgZW1wdHlCZWFyVGFnUmVnZXggPSAvPGJlYXI+XFxzKjxcXC9iZWFyPi9zO1xyXG4gICAgcmV0dXJuIGN1cnJlbnRUZXh0LnJlcGxhY2UoZW1wdHlCZWFyVGFnUmVnZXgsIGA8YmVhcj4ke2hpc3RvcnlDb250ZW50fTwvYmVhcj5gKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmakOiXj+a6kOalvOWxglxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgaGlkZVNvdXJjZU1lc3NhZ2UobWVzc2FnZUlkOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOajgOafpealvOWxguaYr+WQpuW3sue7j+makOiXj1xyXG4gICAgICBjb25zdCBtZXNzYWdlcyA9IGdldENoYXRNZXNzYWdlcyhtZXNzYWdlSWQpO1xyXG4gICAgICBpZiAoIW1lc3NhZ2VzIHx8IG1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgbWVzc2FnZSA9IG1lc3NhZ2VzWzBdO1xyXG4gICAgICBpZiAobWVzc2FnZS5pc19oaWRkZW4pIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOS9v+eUqCAvaGlkZSDlkb3ku6TpmpDol4/mpbzlsYJcclxuICAgICAgdHJpZ2dlclNsYXNoKGAvaGlkZSAke21lc3NhZ2VJZH1gKTtcclxuICAgICAgdGhpcy5sb2dJbmZvKGDwn5mIIOW3sumakOiXj+a6kOalvOWxgiAke21lc3NhZ2VJZH1gKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRoaXMubG9nRXJyb3IoJ+makOiXj+a6kOalvOWxgicsIGVycm9yKTtcclxuICAgICAgLy8g6ZqQ6JeP5aSx6LSl5LiN5b2x5ZON6L+B56e757uT5p6c77yM5Y+q6K6w5b2V6ZSZ6K+vXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliqDovb3orr7nva5cclxuICAgKi9cclxuICBwcml2YXRlIGxvYWRTZXR0aW5ncygpOiB2b2lkIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOS9v+eUqGxvY2FsU3RvcmFnZemBv+WFjeinpuWPkemFkummhuWPmOmHj+ezu+e7n+eahOaXpeW/l+i+k+WHulxyXG4gICAgICBjb25zdCBzYXZlZFZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5TRVRUSU5HX0tFWSk7XHJcbiAgICAgIHRoaXMuaXNFbmFibGVkID0gc2F2ZWRWYWx1ZSA9PT0gJ3RydWUnO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5sb2dFcnJvcign5Yqg6L296K6+572uJywgZXJyb3IpO1xyXG4gICAgICB0aGlzLmlzRW5hYmxlZCA9IGZhbHNlOyAvLyDpu5jorqTnpoHnlKhcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOS/neWtmOiuvue9rlxyXG4gICAqL1xyXG4gIHByaXZhdGUgc2F2ZVNldHRpbmdzKCk6IHZvaWQge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g5L2/55SobG9jYWxTdG9yYWdl6YG/5YWN6Kem5Y+R6YWS6aaG5Y+Y6YeP57O757uf55qE5pel5b+X6L6T5Ye6XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMuU0VUVElOR19LRVksIHRoaXMuaXNFbmFibGVkLnRvU3RyaW5nKCkpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5sb2dFcnJvcign5L+d5a2Y6K6+572uJywgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6K6w5b2V5L+h5oGv5pel5b+XXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBsb2dJbmZvKG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgY29uc29sZS5sb2coYFtDaGF0TWlncmF0aW9uTWFuYWdlcl0gJHttZXNzYWdlfWApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6K6w5b2V6ZSZ6K+v5pel5b+XXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBsb2dFcnJvcihvcGVyYXRpb246IHN0cmluZywgZXJyb3I6IGFueSk6IHZvaWQge1xyXG4gICAgY29uc29sZS5lcnJvcihgW0NoYXRNaWdyYXRpb25NYW5hZ2VyXSAke29wZXJhdGlvbn0g5aSx6LSlOmAsIGVycm9yKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmUgOavgeeuoeeQhuWZqFxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xyXG4gICAgdGhpcy5pc1Byb2Nlc3NpbmcgPSBmYWxzZTtcclxuICAgIHRoaXMubG9nSW5mbygnQ2hhdE1pZ3JhdGlvbk1hbmFnZXIg5bey6ZSA5q+BJyk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/chatMigration/ChatMigrationManager.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/chatMigration/chatMigration.scss": 
  /*!********************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/chatMigration/chatMigration.scss ***!
  \********************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY2hhdE1pZ3JhdGlvbi9jaGF0TWlncmF0aW9uLnNjc3MiLCJtYXBwaW5ncyI6IjtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy9jaGF0TWlncmF0aW9uL2NoYXRNaWdyYXRpb24uc2Nzcz8iXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/chatMigration/chatMigration.scss\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/contactLorebook/ContactLorebookManager.ts": 
  /*!*****************************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/contactLorebook/ContactLorebookManager.ts ***!
  \*****************************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ContactLorebookManager: () => (/* binding */ ContactLorebookManager)\n/* harmony export */ });\n/* harmony import */ var _utils_characterStorage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/characterStorage */ \"./src/多云熊/备份/给rovo的/modules/utils/characterStorage.ts\");\n/* harmony import */ var _ContactParser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ContactParser */ \"./src/多云熊/备份/给rovo的/modules/contactLorebook/ContactParser.ts\");\n/**\n * 联系人世界书管理器\n * 完全复制StickerManager的实现模式\n */\n\n\n// 联系人区块标记\nconst CONTACT_HEADER_MARK = '[联系人]';\nclass ContactLorebookManager {\n    contactData = [];\n    CONTACT_STORAGE_KEY = 'contact_avatars';\n    binding = null;\n    /**\n     * 初始化联系人世界书管理器\n     */\n    async initialize() {\n        try {\n            console.log('🎯 [ContactLorebookManager] 开始初始化联系人世界书管理器...');\n            // 从世界书加载联系人数据\n            await this.loadContactsFromLorebook();\n            console.log(`✅ [ContactLorebookManager] 联系人世界书管理器初始化完成，加载了 ${this.contactData.length} 个联系人`);\n        }\n        catch (error) {\n            console.error('❌ [ContactLorebookManager] 初始化联系人世界书管理器失败:', error);\n        }\n    }\n    /**\n     * 从世界书加载联系人数据\n     * 完全复制StickerManager.loadStickersFromLorebook的逻辑\n     */\n    async loadContactsFromLorebook() {\n        try {\n            console.log('🎯 开始从世界书加载联系人数据...');\n            // 检查是否有getLorebookEntries函数\n            if (typeof window.getLorebookEntries !== 'function') {\n                console.log('❌ 全局getLorebookEntries函数不存在，跳过世界书加载...');\n                return;\n            }\n            // 优先级1: 先尝试从\"设置\"世界书条目的 [联系人] 区块读取\n            await this.tryLoadFromSettings();\n            // 优先级2: 如果\"设置\"中没有找到，尝试从独立的\"联系人\"条目读取\n            if (!this.binding || this.contactData.length === 0) {\n                await this.tryLoadFromContactEntry();\n            }\n            if (this.binding) {\n                if (this.binding.type === 'settings') {\n                    console.log(`✅ 从\"设置\"世界书条目加载了 ${this.contactData.length} 个联系人`);\n                }\n                else {\n                    console.log(`✅ 从\"联系人\"世界书条目加载了 ${this.contactData.length} 个联系人`);\n                }\n            }\n            else {\n                console.log('❌ 未找到\"设置\"或\"联系人\"世界书条目');\n            }\n        }\n        catch (error) {\n            console.error('❌ 从世界书加载联系人失败:', error);\n        }\n    }\n    /**\n     * 尝试从\"设置\"世界书条目加载联系人\n     */\n    async tryLoadFromSettings() {\n        // 先从角色世界书查找\"设置\"条目\n        const charLorebook = await this.getCharacterLorebook();\n        if (charLorebook) {\n            const settingsBinding = await this.findSettingsEntry(charLorebook);\n            if (settingsBinding) {\n                const contacts = await this.loadContactsFromSettingsEntry(settingsBinding);\n                if (contacts.length > 0) {\n                    this.binding = settingsBinding;\n                    this.contactData = contacts;\n                    return;\n                }\n            }\n        }\n        // 再从全局世界书查找\"设置\"条目\n        const globalLorebooks = await this.getGlobalLorebooks();\n        for (const globalLorebook of globalLorebooks) {\n            const settingsBinding = await this.findSettingsEntry(globalLorebook);\n            if (settingsBinding) {\n                const contacts = await this.loadContactsFromSettingsEntry(settingsBinding);\n                if (contacts.length > 0) {\n                    this.binding = settingsBinding;\n                    this.contactData = contacts;\n                    return;\n                }\n            }\n        }\n    }\n    /**\n     * 尝试从独立的\"联系人\"世界书条目加载\n     */\n    async tryLoadFromContactEntry() {\n        // 先从角色世界书查找\"联系人\"条目\n        const charLorebook = await this.getCharacterLorebook();\n        if (charLorebook) {\n            const contactBinding = await this.findContactEntry(charLorebook);\n            if (contactBinding) {\n                const contacts = await this.loadContactsFromContactEntry(contactBinding);\n                if (contacts.length > 0) {\n                    this.binding = contactBinding;\n                    this.contactData = contacts;\n                    return;\n                }\n            }\n        }\n        // 再从全局世界书查找\"联系人\"条目\n        const globalLorebooks = await this.getGlobalLorebooks();\n        for (const globalLorebook of globalLorebooks) {\n            const contactBinding = await this.findContactEntry(globalLorebook);\n            if (contactBinding) {\n                const contacts = await this.loadContactsFromContactEntry(contactBinding);\n                if (contacts.length > 0) {\n                    this.binding = contactBinding;\n                    this.contactData = contacts;\n                    return;\n                }\n            }\n        }\n    }\n    /**\n     * 查找\"设置\"世界书条目\n     */\n    async findSettingsEntry(worldbookName) {\n        try {\n            const entries = await window.getLorebookEntries(worldbookName);\n            const settingsEntry = entries.find((entry) => entry.comment?.includes('设置') || entry.name?.includes('设置'));\n            if (settingsEntry) {\n                const content = String(settingsEntry.content || '');\n                // 检查是否包含 [联系人] 区块\n                if (content.includes(CONTACT_HEADER_MARK)) {\n                    return {\n                        worldbookName,\n                        entryUid: settingsEntry.uid,\n                        entryName: settingsEntry.comment || settingsEntry.name || '设置',\n                        lineBreak: content.includes('\\r\\n') ? '\\r\\n' : '\\n',\n                        type: 'settings',\n                    };\n                }\n            }\n        }\n        catch (error) {\n            console.warn(`⚠️ 访问世界书 ${worldbookName} 失败:`, error);\n        }\n        return null;\n    }\n    /**\n     * 查找\"联系人\"世界书条目\n     */\n    async findContactEntry(worldbookName) {\n        try {\n            const entries = await window.getLorebookEntries(worldbookName);\n            const contactEntry = entries.find((entry) => entry.comment?.includes('联系人') || entry.name?.includes('联系人'));\n            if (contactEntry) {\n                const content = String(contactEntry.content || '');\n                return {\n                    worldbookName,\n                    entryUid: contactEntry.uid,\n                    entryName: contactEntry.comment || contactEntry.name || '联系人',\n                    lineBreak: content.includes('\\r\\n') ? '\\r\\n' : '\\n',\n                    type: 'contact',\n                };\n            }\n        }\n        catch (error) {\n            console.warn(`⚠️ 访问世界书 ${worldbookName} 失败:`, error);\n        }\n        return null;\n    }\n    /**\n     * 从\"设置\"条目加载联系人\n     */\n    async loadContactsFromSettingsEntry(binding) {\n        try {\n            const entries = await window.getLorebookEntries(binding.worldbookName);\n            const entry = entries.find((e) => e.uid === binding.entryUid);\n            if (!entry)\n                return [];\n            const content = String(entry.content || '');\n            return this.parseContactBlock(content);\n        }\n        catch (error) {\n            console.error('❌ 从设置条目加载联系人失败:', error);\n            return [];\n        }\n    }\n    /**\n     * 从\"联系人\"条目加载联系人\n     */\n    async loadContactsFromContactEntry(binding) {\n        try {\n            const entries = await window.getLorebookEntries(binding.worldbookName);\n            const entry = entries.find((e) => e.uid === binding.entryUid);\n            if (!entry)\n                return [];\n            const content = String(entry.content || '');\n            return _ContactParser__WEBPACK_IMPORTED_MODULE_1__.ContactParser.parseContacts(content);\n        }\n        catch (error) {\n            console.error('❌ 从联系人条目加载失败:', error);\n            return [];\n        }\n    }\n    /**\n     * 从\"设置\"条目内容中解析 [联系人] 区块\n     */\n    parseContactBlock(content) {\n        const lines = content.split(/\\r?\\n/);\n        let inContactBlock = false;\n        const contactLines = [];\n        for (const line of lines) {\n            // 检查是否是区块标题\n            if (/^\\s*\\[[^\\]]+\\]\\s*$/.test(line)) {\n                if (line.trim() === CONTACT_HEADER_MARK) {\n                    inContactBlock = true;\n                    continue;\n                }\n                else if (inContactBlock) {\n                    // 遇到其他区块标题，结束联系人区块\n                    break;\n                }\n            }\n            // 收集联系人区块的内容\n            if (inContactBlock) {\n                contactLines.push(line);\n            }\n        }\n        // 解析联系人数据，优先使用新格式（不带方括号）\n        const contactContent = contactLines.join('\\n');\n        return _ContactParser__WEBPACK_IMPORTED_MODULE_1__.ContactParser.parseContacts(contactContent, true);\n    }\n    /**\n     * 获取角色专用世界书名称\n     * 完全复制表情包系统的实现\n     */\n    async getCharacterLorebook() {\n        try {\n            if (typeof window.getCurrentCharPrimaryLorebook === 'function') {\n                return window.getCurrentCharPrimaryLorebook();\n            }\n            else {\n                console.warn('getCurrentCharPrimaryLorebook 函数不可用');\n            }\n        }\n        catch (error) {\n            console.warn('⚠️ 获取角色世界书失败:', error);\n        }\n        return null;\n    }\n    /**\n     * 获取全局世界书列表\n     * 完全复制表情包系统的实现\n     */\n    async getGlobalLorebooks() {\n        try {\n            if (typeof window.getLorebookSettings === 'function') {\n                const settings = window.getLorebookSettings();\n                return settings.selected_global_lorebooks || [];\n            }\n            else {\n                console.warn('getLorebookSettings 函数不可用');\n                return [];\n            }\n        }\n        catch (error) {\n            console.warn('⚠️ 获取全局世界书设置失败:', error);\n        }\n        return [];\n    }\n    /**\n     * 获取联系人头像（三层优先级）\n     * @param name 联系人姓名\n     * @returns 头像URL\n     */\n    getContactAvatar(name) {\n        // 1. 最高优先级：角色专用缓存（用户自定义）\n        const customAvatar = this.getCharacterSpecificAvatar(name);\n        if (customAvatar) {\n            console.log(`🎨 [ContactLorebookManager] 使用角色专用头像: ${name}`);\n            return customAvatar;\n        }\n        // 2. 中等优先级：世界书默认头像\n        const defaultContact = this.contactData.find(c => c.name === name);\n        if (defaultContact?.avatar) {\n            console.log(`📖 [ContactLorebookManager] 使用世界书默认头像: ${name}`);\n            return defaultContact.avatar;\n        }\n        // 3. 最低优先级：系统默认头像\n        return './User Avatars/user-default.png';\n    }\n    /**\n     * 获取角色专用头像\n     * @param name 联系人姓名\n     * @returns 自定义头像URL或null\n     */\n    getCharacterSpecificAvatar(name) {\n        try {\n            const characterAvatars = (0,_utils_characterStorage__WEBPACK_IMPORTED_MODULE_0__.getCharacterItem)(this.CONTACT_STORAGE_KEY, {}) || {};\n            return characterAvatars[name] || null;\n        }\n        catch (error) {\n            console.warn(`⚠️ [ContactLorebookManager] 获取角色专用头像失败:`, error);\n            return null;\n        }\n    }\n    /**\n     * 设置角色专用头像\n     * @param name 联系人姓名\n     * @param avatar 头像URL\n     */\n    setCharacterSpecificAvatar(name, avatar) {\n        try {\n            const characterAvatars = (0,_utils_characterStorage__WEBPACK_IMPORTED_MODULE_0__.getCharacterItem)(this.CONTACT_STORAGE_KEY, {}) || {};\n            characterAvatars[name] = avatar;\n            (0,_utils_characterStorage__WEBPACK_IMPORTED_MODULE_0__.setCharacterItem)(this.CONTACT_STORAGE_KEY, characterAvatars);\n            console.log(`💾 [ContactLorebookManager] 保存角色专用头像: ${name}`);\n            // 触发角色头像更新事件（不再调用AvatarSync）\n            this.triggerCharacterAvatarUpdate(name, avatar);\n        }\n        catch (error) {\n            console.error(`❌ [ContactLorebookManager] 保存角色专用头像失败:`, error);\n        }\n    }\n    /**\n     * 触发角色头像更新事件\n     * 通知相关组件更新角色头像（不影响用户头像）\n     * @param contactName 联系人姓名\n     * @param newAvatar 新头像URL\n     */\n    triggerCharacterAvatarUpdate(contactName, newAvatar) {\n        try {\n            // 发送 contactUpdated 事件，与动态页面监听的事件保持一致\n            const event = new CustomEvent('contactUpdated', {\n                detail: {\n                    oldName: contactName, // 名称未变，新旧相同\n                    newName: contactName,\n                    newAvatar: newAvatar,\n                    timestamp: Date.now(),\n                },\n            });\n            document.dispatchEvent(event);\n            console.log(`📢 [ContactLorebookManager] 已发送联系人更新事件: ${contactName}`);\n        }\n        catch (error) {\n            console.warn(`⚠️ [ContactLorebookManager] 触发联系人更新失败:`, error);\n        }\n    }\n    /**\n     * 获取所有联系人数据\n     * @returns 联系人数组\n     */\n    getContactData() {\n        return [...this.contactData];\n    }\n    /**\n     * 检查联系人是否存在于世界书中\n     * @param name 联系人姓名\n     * @returns 是否存在\n     */\n    hasContact(name) {\n        return this.contactData.some(contact => contact.name === name);\n    }\n    /**\n     * 重新加载联系人数据（用于角色切换时）\n     */\n    async reload() {\n        console.log('🔄 [ContactLorebookManager] 角色切换，重新加载联系人数据...');\n        await this.loadContactsFromLorebook();\n    }\n    /**\n     * 清除世界书角色缓存\n     * 直接清除世界书中所有角色的本地缓存\n     */\n    async clearLorebookCharacterCache() {\n        try {\n            // 重新从世界书加载最新的联系人数据\n            await this.loadContactsFromLorebook();\n            // 获取世界书中的所有联系人名称\n            const worldbookContactNames = this.contactData.map(contact => contact.name);\n            if (worldbookContactNames.length === 0) {\n                console.log('📋 [ContactLorebookManager] 世界书中没有联系人，无需清除缓存');\n                return { cleared: 0, total: 0 };\n            }\n            // 获取当前的角色专用缓存\n            const characterAvatars = (0,_utils_characterStorage__WEBPACK_IMPORTED_MODULE_0__.getCharacterItem)(this.CONTACT_STORAGE_KEY, {}) || {};\n            // 清除世界书中所有联系人的缓存\n            let clearedCount = 0;\n            const clearedContactNames = [];\n            worldbookContactNames.forEach(contactName => {\n                if (characterAvatars[contactName]) {\n                    delete characterAvatars[contactName];\n                    clearedCount++;\n                    clearedContactNames.push(contactName);\n                    console.log(`🗑️ [ContactLorebookManager] 清除世界书角色缓存: ${contactName}`);\n                }\n            });\n            // 保存更新后的缓存\n            (0,_utils_characterStorage__WEBPACK_IMPORTED_MODULE_0__.setCharacterItem)(this.CONTACT_STORAGE_KEY, characterAvatars);\n            console.log(`✅ [ContactLorebookManager] 世界书角色缓存清除完成: 清除了 ${clearedCount} 个角色，世界书共有 ${worldbookContactNames.length} 个角色`);\n            // 触发头像缓存清除事件，通知ContactManager更新世界书联系人的头像\n            const event = new CustomEvent('worldbookAvatarCacheCleared', {\n                detail: {\n                    clearedCount,\n                    worldbookContactNames, // 所有世界书角色（用于ContactManager的完整刷新）\n                    clearedContactNames, // 实际被清除缓存的角色（用于BearChatManager的精确更新）\n                    timestamp: Date.now(),\n                },\n            });\n            document.dispatchEvent(event);\n            console.log('📢 [ContactLorebookManager] 已发送世界书头像缓存清除事件');\n            return { cleared: clearedCount, total: worldbookContactNames.length };\n        }\n        catch (error) {\n            console.error('❌ [ContactLorebookManager] 清除世界书角色缓存失败:', error);\n            return { cleared: 0, total: 0 };\n        }\n    }\n    /**\n     * 获取世界书角色缓存统计信息\n     */\n    getLorebookCacheStats() {\n        try {\n            const characterAvatars = (0,_utils_characterStorage__WEBPACK_IMPORTED_MODULE_0__.getCharacterItem)(this.CONTACT_STORAGE_KEY, {}) || {};\n            const worldbookContactNames = new Set(this.contactData.map(contact => contact.name));\n            const cachedWorldbookContacts = Object.keys(characterAvatars).filter(name => worldbookContactNames.has(name)).length;\n            return {\n                worldbookContacts: this.contactData.length,\n                cachedContacts: Object.keys(characterAvatars).length,\n                cachedWorldbookContacts: cachedWorldbookContacts,\n            };\n        }\n        catch (error) {\n            console.error('❌ [ContactLorebookManager] 获取缓存统计失败:', error);\n            return { worldbookContacts: 0, cachedContacts: 0, cachedWorldbookContacts: 0 };\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY29udGFjdExvcmVib29rL0NvbnRhY3RMb3JlYm9va01hbmFnZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7OztHQUdHO0FBRTRFO0FBQy9CO0FBR2hELFVBQVU7QUFDVixNQUFNLG1CQUFtQixHQUFHLE9BQU8sQ0FBQztBQVU3QixNQUFNLHNCQUFzQjtJQUN6QixXQUFXLEdBQW9CLEVBQUUsQ0FBQztJQUN6QixtQkFBbUIsR0FBRyxpQkFBaUIsQ0FBQztJQUNqRCxPQUFPLEdBQTRCLElBQUksQ0FBQztJQUVoRDs7T0FFRztJQUNILEtBQUssQ0FBQyxVQUFVO1FBQ2QsSUFBSSxDQUFDO1lBQ0gsT0FBTyxDQUFDLEdBQUcsQ0FBQywrQ0FBK0MsQ0FBQyxDQUFDO1lBRTdELGNBQWM7WUFDZCxNQUFNLElBQUksQ0FBQyx3QkFBd0IsRUFBRSxDQUFDO1lBRXRDLE9BQU8sQ0FBQyxHQUFHLENBQ1QsaURBQWlELElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxPQUFPLENBQ2hGLENBQUM7UUFDSixDQUFDO1FBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNmLE9BQU8sQ0FBQyxLQUFLLENBQUMsNENBQTRDLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDckUsQ0FBQztJQUNILENBQUM7SUFFRDs7O09BR0c7SUFDSyxLQUFLLENBQUMsd0JBQXdCO1FBQ3BDLElBQUksQ0FBQztZQUNILE9BQU8sQ0FBQyxHQUFHLENBQUMscUJBQXFCLENBQUMsQ0FBQztZQUVuQyw0QkFBNEI7WUFDNUIsSUFBSSxPQUFRLE1BQWMsQ0FBQyxrQkFBa0IsS0FBSyxVQUFVLEVBQUUsQ0FBQztnQkFDN0QsT0FBTyxDQUFDLEdBQUcsQ0FBQyx3Q0FBd0MsQ0FBQyxDQUFDO2dCQUN0RCxPQUFPO1lBQ1QsQ0FBQztZQUVELGtDQUFrQztZQUNsQyxNQUFNLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO1lBRWpDLG9DQUFvQztZ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muS6keeGii/lpIfku70v57uZcm92b+eahC9tb2R1bGVzL2NvbnRhY3RMb3JlYm9vay9Db250YWN0TG9yZWJvb2tNYW5hZ2VyLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIOiBlOezu+S6uuS4lueVjOS5pueuoeeQhuWZqFxuICog5a6M5YWo5aSN5Yi2U3RpY2tlck1hbmFnZXLnmoTlrp7njrDmqKHlvI9cbiAqL1xuXG5pbXBvcnQgeyBnZXRDaGFyYWN0ZXJJdGVtLCBzZXRDaGFyYWN0ZXJJdGVtIH0gZnJvbSAnLi4vdXRpbHMvY2hhcmFjdGVyU3RvcmFnZSc7XG5pbXBvcnQgeyBDb250YWN0UGFyc2VyIH0gZnJvbSAnLi9Db250YWN0UGFyc2VyJztcbmltcG9ydCB7IENoYXJhY3RlckNvbnRhY3RBdmF0YXJzLCBTaW1wbGVDb250YWN0IH0gZnJvbSAnLi90eXBlcyc7XG5cbi8vIOiBlOezu+S6uuWMuuWdl+agh+iusFxuY29uc3QgQ09OVEFDVF9IRUFERVJfTUFSSyA9ICdb6IGU57O75Lq6XSc7XG5cbnR5cGUgV29ybGRib29rQmluZGluZyA9IHtcbiAgd29ybGRib29rTmFtZTogc3RyaW5nO1xuICBlbnRyeVVpZDogbnVtYmVyO1xuICBlbnRyeU5hbWU6IHN0cmluZztcbiAgbGluZUJyZWFrOiAnXFxuJyB8ICdcXHJcXG4nO1xuICB0eXBlOiAnc2V0dGluZ3MnIHwgJ2NvbnRhY3QnOyAvLyDmoIforrDmmK9cIuiuvue9rlwi5p2h55uu6L+Y5pivXCLogZTns7vkurpcIuadoeebrlxufTtcblxuZXhwb3J0IGNsYXNzIENvbnRhY3RMb3JlYm9va01hbmFnZXIge1xuICBwcml2YXRlIGNvbnRhY3REYXRhOiBTaW1wbGVDb250YWN0W10gPSBbXTtcbiAgcHJpdmF0ZSByZWFkb25seSBDT05UQUNUX1NUT1JBR0VfS0VZID0gJ2NvbnRhY3RfYXZhdGFycyc7XG4gIHByaXZhdGUgYmluZGluZzogV29ybGRib29rQmluZGluZyB8IG51bGwgPSBudWxsO1xuXG4gIC8qKlxuICAgKiDliJ3lp4vljJbogZTns7vkurrkuJbnlYzkuabnrqHnkIblmahcbiAgICovXG4gIGFzeW5jIGluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn46vIFtDb250YWN0TG9yZWJvb2tNYW5hZ2VyXSDlvIDlp4vliJ3lp4vljJbogZTns7vkurrkuJbnlYzkuabnrqHnkIblmaguLi4nKTtcblxuICAgICAgLy8g5LuO5LiW55WM5Lmm5Yqg6L296IGU57O75Lq65pWw5o2uXG4gICAgICBhd2FpdCB0aGlzLmxvYWRDb250YWN0c0Zyb21Mb3JlYm9vaygpO1xuXG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgYOKchSBbQ29udGFjdExvcmVib29rTWFuYWdlcl0g6IGU57O75Lq65LiW55WM5Lmm566h55CG5Zmo5Yid5aeL5YyW5a6M5oiQ77yM5Yqg6L295LqGICR7dGhpcy5jb250YWN0RGF0YS5sZW5ndGh9IOS4quiBlOezu+S6umAsXG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgW0NvbnRhY3RMb3JlYm9va01hbmFnZXJdIOWIneWni+WMluiBlOezu+S6uuS4lueVjOS5pueuoeeQhuWZqOWksei0pTonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOS7juS4lueVjOS5puWKoOi9veiBlOezu+S6uuaVsOaNrlxuICAgKiDlrozlhajlpI3liLZTdGlja2VyTWFuYWdlci5sb2FkU3RpY2tlcnNGcm9tTG9yZWJvb2vnmoTpgLvovpFcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgbG9hZENvbnRhY3RzRnJvbUxvcmVib29rKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+OryDlvIDlp4vku47kuJbnlYzkuabliqDovb3ogZTns7vkurrmlbDmja4uLi4nKTtcblxuICAgICAgLy8g5qOA5p+l5piv5ZCm5pyJZ2V0TG9yZWJvb2tFbnRyaWVz5Ye95pWwXG4gICAgICBpZiAodHlwZW9mICh3aW5kb3cgYXMgYW55KS5nZXRMb3JlYm9va0VudHJpZXMgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KdjCDlhajlsYBnZXRMb3JlYm9va0VudHJpZXPlh73mlbDkuI3lrZjlnKjvvIzot7Pov4fkuJbnlYzkuabliqDovb0uLi4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyDkvJjlhYjnuqcxOiDlhYjlsJ3or5Xku45cIuiuvue9rlwi5LiW55WM5Lmm5p2h55uu55qEIFvogZTns7vkurpdIOWMuuWdl+ivu+WPllxuICAgICAgYXdhaXQgdGhpcy50cnlMb2FkRnJvbVNldHRpbmdzKCk7XG5cbiAgICAgIC8vIOS8mOWFiOe6pzI6IOWmguaenFwi6K6+572uXCLkuK3msqHmnInmib7liLDvvIzlsJ3or5Xku47ni6znq4vnmoRcIuiBlOezu+S6ulwi5p2h55uu6K+75Y+WXG4gICAgICBpZiAoIXRoaXMuYmluZGluZyB8fCB0aGlzLmNvbnRhY3REYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBhd2FpdCB0aGlzLnRyeUxvYWRGcm9tQ29udGFjdEVudHJ5KCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmJpbmRpbmcpIHtcbiAgICAgICAgaWYgKHRoaXMuYmluZGluZy50eXBlID09PSAnc2V0dGluZ3MnKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYOKchSDku45cIuiuvue9rlwi5LiW55WM5Lmm5p2h55uu5Yqg6L295LqGICR7dGhpcy5jb250YWN0RGF0YS5sZW5ndGh9IOS4quiBlOezu+S6umApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDinIUg5LuOXCLogZTns7vkurpcIuS4lueVjOS5puadoeebruWKoOi9veS6hiAke3RoaXMuY29udGFjdERhdGEubGVuZ3RofSDkuKrogZTns7vkurpgKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KdjCDmnKrmib7liLBcIuiuvue9rlwi5oiWXCLogZTns7vkurpcIuS4lueVjOS5puadoeebricpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwg5LuO5LiW55WM5Lmm5Yqg6L296IGU57O75Lq65aSx6LSlOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5bCd6K+V5LuOXCLorr7nva5cIuS4lueVjOS5puadoeebruWKoOi9veiBlOezu+S6ulxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyB0cnlMb2FkRnJvbVNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIOWFiOS7juinkuiJsuS4lueVjOS5puafpeaJvlwi6K6+572uXCLmnaHnm65cbiAgICBjb25zdCBjaGFyTG9yZWJvb2sgPSBhd2FpdCB0aGlzLmdldENoYXJhY3RlckxvcmVib29rKCk7XG4gICAgaWYgKGNoYXJMb3JlYm9vaykge1xuICAgICAgY29uc3Qgc2V0dGluZ3NCaW5kaW5nID0gYXdhaXQgdGhpcy5maW5kU2V0dGluZ3NFbnRyeShjaGFyTG9yZWJvb2spO1xuICAgICAgaWYgKHNldHRpbmdzQmluZGluZykge1xuICAgICAgICBjb25zdCBjb250YWN0cyA9IGF3YWl0IHRoaXMubG9hZENvbnRhY3RzRnJvbVNldHRpbmdzRW50cnkoc2V0dGluZ3NCaW5kaW5nKTtcbiAgICAgICAgaWYgKGNvbnRhY3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aGlzLmJpbmRpbmcgPSBzZXR0aW5nc0JpbmRpbmc7XG4gICAgICAgICAgdGhpcy5jb250YWN0RGF0YSA9IGNvbnRhY3RzO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIOWGjeS7juWFqOWxgOS4lueVjOS5puafpeaJvlwi6K6+572uXCLmnaHnm65cbiAgICBjb25zdCBnbG9iYWxMb3JlYm9va3MgPSBhd2FpdCB0aGlzLmdldEdsb2JhbExvcmVib29rcygpO1xuICAgIGZvciAoY29uc3QgZ2xvYmFsTG9yZWJvb2sgb2YgZ2xvYmFsTG9yZWJvb2tzKSB7XG4gICAgICBjb25zdCBzZXR0aW5nc0JpbmRpbmcgPSBhd2FpdCB0aGlzLmZpbmRTZXR0aW5nc0VudHJ5KGdsb2JhbExvcmVib29rKTtcbiAgICAgIGlmIChzZXR0aW5nc0JpbmRpbmcpIHtcbiAgICAgICAgY29uc3QgY29udGFjdHMgPSBhd2FpdCB0aGlzLmxvYWRDb250YWN0c0Zyb21TZXR0aW5nc0VudHJ5KHNldHRpbmdzQmluZGluZyk7XG4gICAgICAgIGlmIChjb250YWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5iaW5kaW5nID0gc2V0dGluZ3NCaW5kaW5nO1xuICAgICAgICAgIHRoaXMuY29udGFjdERhdGEgPSBjb250YWN0cztcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5bCd6K+V5LuO54us56uL55qEXCLogZTns7vkurpcIuS4lueVjOS5puadoeebruWKoOi9vVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyB0cnlMb2FkRnJvbUNvbnRhY3RFbnRyeSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyDlhYjku47op5LoibLkuJbnlYzkuabmn6Xmib5cIuiBlOezu+S6ulwi5p2h55uuXG4gICAgY29uc3QgY2hhckxvcmVib29rID0gYXdhaXQgdGhpcy5nZXRDaGFyYWN0ZXJMb3JlYm9vaygpO1xuICAgIGlmIChjaGFyTG9yZWJvb2spIHtcbiAgICAgIGNvbnN0IGNvbnRhY3RCaW5kaW5nID0gYXdhaXQgdGhpcy5maW5kQ29udGFjdEVudHJ5KGNoYXJMb3JlYm9vayk7XG4gICAgICBpZiAoY29udGFjdEJpbmRpbmcpIHtcbiAgICAgICAgY29uc3QgY29udGFjdHMgPSBhd2FpdCB0aGlzLmxvYWRDb250YWN0c0Zyb21Db250YWN0RW50cnkoY29udGFjdEJpbmRpbmcpO1xuICAgICAgICBpZiAoY29udGFjdHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRoaXMuYmluZGluZyA9IGNvbnRhY3RCaW5kaW5nO1xuICAgICAgICAgIHRoaXMuY29udGFjdERhdGEgPSBjb250YWN0cztcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDlho3ku47lhajlsYDkuJbnlYzkuabmn6Xmib5cIuiBlOezu+S6ulwi5p2h55uuXG4gICAgY29uc3QgZ2xvYmFsTG9yZWJvb2tzID0gYXdhaXQgdGhpcy5nZXRHbG9iYWxMb3JlYm9va3MoKTtcbiAgICBmb3IgKGNvbnN0IGdsb2JhbExvcmVib29rIG9mIGdsb2JhbExvcmVib29rcykge1xuICAgICAgY29uc3QgY29udGFjdEJpbmRpbmcgPSBhd2FpdCB0aGlzLmZpbmRDb250YWN0RW50cnkoZ2xvYmFsTG9yZWJvb2spO1xuICAgICAgaWYgKGNvbnRhY3RCaW5kaW5nKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhY3RzID0gYXdhaXQgdGhpcy5sb2FkQ29udGFjdHNGcm9tQ29udGFjdEVudHJ5KGNvbnRhY3RCaW5kaW5nKTtcbiAgICAgICAgaWYgKGNvbnRhY3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aGlzLmJpbmRpbmcgPSBjb250YWN0QmluZGluZztcbiAgICAgICAgICB0aGlzLmNvbnRhY3REYXRhID0gY29udGFjdHM7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOafpeaJvlwi6K6+572uXCLkuJbnlYzkuabmnaHnm65cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZmluZFNldHRpbmdzRW50cnkod29ybGRib29rTmFtZTogc3RyaW5nKTogUHJvbWlzZTxXb3JsZGJvb2tCaW5kaW5nIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBlbnRyaWVzID0gYXdhaXQgKHdpbmRvdyBhcyBhbnkpLmdldExvcmVib29rRW50cmllcyh3b3JsZGJvb2tOYW1lKTtcbiAgICAgIGNvbnN0IHNldHRpbmdzRW50cnkgPSBlbnRyaWVzLmZpbmQoXG4gICAgICAgIChlbnRyeTogYW55KSA9PiBlbnRyeS5jb21tZW50Py5pbmNsdWRlcygn6K6+572uJykgfHwgZW50cnkubmFtZT8uaW5jbHVkZXMoJ+iuvue9ricpLFxuICAgICAgKTtcblxuICAgICAgaWYgKHNldHRpbmdzRW50cnkpIHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IFN0cmluZyhzZXR0aW5nc0VudHJ5LmNvbnRlbnQgfHwgJycpO1xuICAgICAgICAvLyDmo4Dmn6XmmK/lkKbljIXlkKsgW+iBlOezu+S6ul0g5Yy65Z2XXG4gICAgICAgIGlmIChjb250ZW50LmluY2x1ZGVzKENPTlRBQ1RfSEVBREVSX01BUkspKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHdvcmxkYm9va05hbWUsXG4gICAgICAgICAgICBlbnRyeVVpZDogc2V0dGluZ3NFbnRyeS51aWQsXG4gICAgICAgICAgICBlbnRyeU5hbWU6IHNldHRpbmdzRW50cnkuY29tbWVudCB8fCBzZXR0aW5nc0VudHJ5Lm5hbWUgfHwgJ+iuvue9ricsXG4gICAgICAgICAgICBsaW5lQnJlYWs6IGNvbnRlbnQuaW5jbHVkZXMoJ1xcclxcbicpID8gJ1xcclxcbicgOiAnXFxuJyxcbiAgICAgICAgICAgIHR5cGU6ICdzZXR0aW5ncycsXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oYOKaoO+4jyDorr/pl67kuJbnlYzkuaYgJHt3b3JsZGJvb2tOYW1lfSDlpLHotKU6YCwgZXJyb3IpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiDmn6Xmib5cIuiBlOezu+S6ulwi5LiW55WM5Lmm5p2h55uuXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGZpbmRDb250YWN0RW50cnkod29ybGRib29rTmFtZTogc3RyaW5nKTogUHJvbWlzZTxXb3JsZGJvb2tCaW5kaW5nIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBlbnRyaWVzID0gYXdhaXQgKHdpbmRvdyBhcyBhbnkpLmdldExvcmVib29rRW50cmllcyh3b3JsZGJvb2tOYW1lKTtcbiAgICAgIGNvbnN0IGNvbnRhY3RFbnRyeSA9IGVudHJpZXMuZmluZChcbiAgICAgICAgKGVudHJ5OiBhbnkpID0+IGVudHJ5LmNvbW1lbnQ/LmluY2x1ZGVzKCfogZTns7vkuronKSB8fCBlbnRyeS5uYW1lPy5pbmNsdWRlcygn6IGU57O75Lq6JyksXG4gICAgICApO1xuXG4gICAgICBpZiAoY29udGFjdEVudHJ5KSB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBTdHJpbmcoY29udGFjdEVudHJ5LmNvbnRlbnQgfHwgJycpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHdvcmxkYm9va05hbWUsXG4gICAgICAgICAgZW50cnlVaWQ6IGNvbnRhY3RFbnRyeS51aWQsXG4gICAgICAgICAgZW50cnlOYW1lOiBjb250YWN0RW50cnkuY29tbWVudCB8fCBjb250YWN0RW50cnkubmFtZSB8fCAn6IGU57O75Lq6JyxcbiAgICAgICAgICBsaW5lQnJlYWs6IGNvbnRlbnQuaW5jbHVkZXMoJ1xcclxcbicpID8gJ1xcclxcbicgOiAnXFxuJyxcbiAgICAgICAgICB0eXBlOiAnY29udGFjdCcsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2Fybihg4pqg77iPIOiuv+mXruS4lueVjOS5piAke3dvcmxkYm9va05hbWV9IOWksei0pTpgLCBlcnJvcik7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIOS7jlwi6K6+572uXCLmnaHnm67liqDovb3ogZTns7vkurpcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgbG9hZENvbnRhY3RzRnJvbVNldHRpbmdzRW50cnkoYmluZGluZzogV29ybGRib29rQmluZGluZyk6IFByb21pc2U8U2ltcGxlQ29udGFjdFtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGVudHJpZXMgPSBhd2FpdCAod2luZG93IGFzIGFueSkuZ2V0TG9yZWJvb2tFbnRyaWVzKGJpbmRpbmcud29ybGRib29rTmFtZSk7XG4gICAgICBjb25zdCBlbnRyeSA9IGVudHJpZXMuZmluZCgoZTogYW55KSA9PiBlLnVpZCA9PT0gYmluZGluZy5lbnRyeVVpZCk7XG4gICAgICBpZiAoIWVudHJ5KSByZXR1cm4gW107XG5cbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBTdHJpbmcoZW50cnkuY29udGVudCB8fCAnJyk7XG4gICAgICByZXR1cm4gdGhpcy5wYXJzZUNvbnRhY3RCbG9jayhjb250ZW50KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIOS7juiuvue9ruadoeebruWKoOi9veiBlOezu+S6uuWksei0pTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOS7jlwi6IGU57O75Lq6XCLmnaHnm67liqDovb3ogZTns7vkurpcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgbG9hZENvbnRhY3RzRnJvbUNvbnRhY3RFbnRyeShiaW5kaW5nOiBXb3JsZGJvb2tCaW5kaW5nKTogUHJvbWlzZTxTaW1wbGVDb250YWN0W10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZW50cmllcyA9IGF3YWl0ICh3aW5kb3cgYXMgYW55KS5nZXRMb3JlYm9va0VudHJpZXMoYmluZGluZy53b3JsZGJvb2tOYW1lKTtcbiAgICAgIGNvbnN0IGVudHJ5ID0gZW50cmllcy5maW5kKChlOiBhbnkpID0+IGUudWlkID09PSBiaW5kaW5nLmVudHJ5VWlkKTtcbiAgICAgIGlmICghZW50cnkpIHJldHVybiBbXTtcblxuICAgICAgY29uc3QgY29udGVudCA9IFN0cmluZyhlbnRyeS5jb250ZW50IHx8ICcnKTtcbiAgICAgIHJldHVybiBDb250YWN0UGFyc2VyLnBhcnNlQ29udGFjdHMoY29udGVudCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCDku47ogZTns7vkurrmnaHnm67liqDovb3lpLHotKU6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDku45cIuiuvue9rlwi5p2h55uu5YaF5a655Lit6Kej5p6QIFvogZTns7vkurpdIOWMuuWdl1xuICAgKi9cbiAgcHJpdmF0ZSBwYXJzZUNvbnRhY3RCbG9jayhjb250ZW50OiBzdHJpbmcpOiBTaW1wbGVDb250YWN0W10ge1xuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgvXFxyP1xcbi8pO1xuICAgIGxldCBpbkNvbnRhY3RCbG9jayA9IGZhbHNlO1xuICAgIGNvbnN0IGNvbnRhY3RMaW5lczogc3RyaW5nW10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuICAgICAgLy8g5qOA5p+l5piv5ZCm5piv5Yy65Z2X5qCH6aKYXG4gICAgICBpZiAoL15cXHMqXFxbW15cXF1dK1xcXVxccyokLy50ZXN0KGxpbmUpKSB7XG4gICAgICAgIGlmIChsaW5lLnRyaW0oKSA9PT0gQ09OVEFDVF9IRUFERVJfTUFSSykge1xuICAgICAgICAgIGluQ29udGFjdEJsb2NrID0gdHJ1ZTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfSBlbHNlIGlmIChpbkNvbnRhY3RCbG9jaykge1xuICAgICAgICAgIC8vIOmBh+WIsOWFtuS7luWMuuWdl+agh+mimO+8jOe7k+adn+iBlOezu+S6uuWMuuWdl1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIOaUtumbhuiBlOezu+S6uuWMuuWdl+eahOWGheWuuVxuICAgICAgaWYgKGluQ29udGFjdEJsb2NrKSB7XG4gICAgICAgIGNvbnRhY3RMaW5lcy5wdXNoKGxpbmUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIOino+aekOiBlOezu+S6uuaVsOaNru+8jOS8mOWFiOS9v+eUqOaWsOagvOW8j++8iOS4jeW4puaWueaLrOWPt++8iVxuICAgIGNvbnN0IGNvbnRhY3RDb250ZW50ID0gY29udGFjdExpbmVzLmpvaW4oJ1xcbicpO1xuICAgIHJldHVybiBDb250YWN0UGFyc2VyLnBhcnNlQ29udGFjdHMoY29udGFjdENvbnRlbnQsIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIOiOt+WPluinkuiJsuS4k+eUqOS4lueVjOS5puWQjeensFxuICAgKiDlrozlhajlpI3liLbooajmg4XljIXns7vnu5/nmoTlrp7njrBcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZ2V0Q2hhcmFjdGVyTG9yZWJvb2soKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh0eXBlb2YgKHdpbmRvdyBhcyBhbnkpLmdldEN1cnJlbnRDaGFyUHJpbWFyeUxvcmVib29rID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiAod2luZG93IGFzIGFueSkuZ2V0Q3VycmVudENoYXJQcmltYXJ5TG9yZWJvb2soKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUud2FybignZ2V0Q3VycmVudENoYXJQcmltYXJ5TG9yZWJvb2sg5Ye95pWw5LiN5Y+v55SoJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIOiOt+WPluinkuiJsuS4lueVjOS5puWksei0pTonLCBlcnJvcik7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIOiOt+WPluWFqOWxgOS4lueVjOS5puWIl+ihqFxuICAgKiDlrozlhajlpI3liLbooajmg4XljIXns7vnu5/nmoTlrp7njrBcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZ2V0R2xvYmFsTG9yZWJvb2tzKCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKHR5cGVvZiAod2luZG93IGFzIGFueSkuZ2V0TG9yZWJvb2tTZXR0aW5ncyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjb25zdCBzZXR0aW5ncyA9ICh3aW5kb3cgYXMgYW55KS5nZXRMb3JlYm9va1NldHRpbmdzKCk7XG4gICAgICAgIHJldHVybiBzZXR0aW5ncy5zZWxlY3RlZF9nbG9iYWxfbG9yZWJvb2tzIHx8IFtdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdnZXRMb3JlYm9va1NldHRpbmdzIOWHveaVsOS4jeWPr+eUqCcpO1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIOiOt+WPluWFqOWxgOS4lueVjOS5puiuvue9ruWksei0pTonLCBlcnJvcik7XG4gICAgfVxuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bogZTns7vkurrlpLTlg4/vvIjkuInlsYLkvJjlhYjnuqfvvIlcbiAgICogQHBhcmFtIG5hbWUg6IGU57O75Lq65aeT5ZCNXG4gICAqIEByZXR1cm5zIOWktOWDj1VSTFxuICAgKi9cbiAgZ2V0Q29udGFjdEF2YXRhcihuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIDEuIOacgOmrmOS8mOWFiOe6p++8muinkuiJsuS4k+eUqOe8k+WtmO+8iOeUqOaIt+iHquWumuS5ie+8iVxuICAgIGNvbnN0IGN1c3RvbUF2YXRhciA9IHRoaXMuZ2V0Q2hhcmFjdGVyU3BlY2lmaWNBdmF0YXIobmFtZSk7XG4gICAgaWYgKGN1c3RvbUF2YXRhcikge1xuICAgICAgY29uc29sZS5sb2coYPCfjqggW0NvbnRhY3RMb3JlYm9va01hbmFnZXJdIOS9v+eUqOinkuiJsuS4k+eUqOWktOWDjzogJHtuYW1lfWApO1xuICAgICAgcmV0dXJuIGN1c3RvbUF2YXRhcjtcbiAgICB9XG5cbiAgICAvLyAyLiDkuK3nrYnkvJjlhYjnuqfvvJrkuJbnlYzkuabpu5jorqTlpLTlg49cbiAgICBjb25zdCBkZWZhdWx0Q29udGFjdCA9IHRoaXMuY29udGFjdERhdGEuZmluZChjID0+IGMubmFtZSA9PT0gbmFtZSk7XG4gICAgaWYgKGRlZmF1bHRDb250YWN0Py5hdmF0YXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OWIFtDb250YWN0TG9yZWJvb2tNYW5hZ2VyXSDkvb/nlKjkuJbnlYzkuabpu5jorqTlpLTlg486ICR7bmFtZX1gKTtcbiAgICAgIHJldHVybiBkZWZhdWx0Q29udGFjdC5hdmF0YXI7XG4gICAgfVxuXG4gICAgLy8gMy4g5pyA5L2O5LyY5YWI57qn77ya57O757uf6buY6K6k5aS05YOPXG4gICAgcmV0dXJuICcuL1VzZXIgQXZhdGFycy91c2VyLWRlZmF1bHQucG5nJztcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bop5LoibLkuJPnlKjlpLTlg49cbiAgICogQHBhcmFtIG5hbWUg6IGU57O75Lq65aeT5ZCNXG4gICAqIEByZXR1cm5zIOiHquWumuS5ieWktOWDj1VSTOaIlm51bGxcbiAgICovXG4gIHByaXZhdGUgZ2V0Q2hhcmFjdGVyU3BlY2lmaWNBdmF0YXIobmFtZTogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNoYXJhY3RlckF2YXRhcnM6IENoYXJhY3RlckNvbnRhY3RBdmF0YXJzID0gZ2V0Q2hhcmFjdGVySXRlbSh0aGlzLkNPTlRBQ1RfU1RPUkFHRV9LRVksIHt9KSB8fCB7fTtcbiAgICAgIHJldHVybiBjaGFyYWN0ZXJBdmF0YXJzW25hbWVdIHx8IG51bGw7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2Fybihg4pqg77iPIFtDb250YWN0TG9yZWJvb2tNYW5hZ2VyXSDojrflj5bop5LoibLkuJPnlKjlpLTlg4/lpLHotKU6YCwgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOiuvue9ruinkuiJsuS4k+eUqOWktOWDj1xuICAgKiBAcGFyYW0gbmFtZSDogZTns7vkurrlp5PlkI1cbiAgICogQHBhcmFtIGF2YXRhciDlpLTlg49VUkxcbiAgICovXG4gIHNldENoYXJhY3RlclNwZWNpZmljQXZhdGFyKG5hbWU6IHN0cmluZywgYXZhdGFyOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY2hhcmFjdGVyQXZhdGFyczogQ2hhcmFjdGVyQ29udGFjdEF2YXRhcnMgPSBnZXRDaGFyYWN0ZXJJdGVtKHRoaXMuQ09OVEFDVF9TVE9SQUdFX0tFWSwge30pIHx8IHt9O1xuICAgICAgY2hhcmFjdGVyQXZhdGFyc1tuYW1lXSA9IGF2YXRhcjtcbiAgICAgIHNldENoYXJhY3Rlckl0ZW0odGhpcy5DT05UQUNUX1NUT1JBR0VfS0VZLCBjaGFyYWN0ZXJBdmF0YXJzKTtcblxuICAgICAgY29uc29sZS5sb2coYPCfkr4gW0NvbnRhY3RMb3JlYm9va01hbmFnZXJdIOS/neWtmOinkuiJsuS4k+eUqOWktOWDjzogJHtuYW1lfWApO1xuXG4gICAgICAvLyDop6blj5Hop5LoibLlpLTlg4/mm7TmlrDkuovku7bvvIjkuI3lho3osIPnlKhBdmF0YXJTeW5j77yJXG4gICAgICB0aGlzLnRyaWdnZXJDaGFyYWN0ZXJBdmF0YXJVcGRhdGUobmFtZSwgYXZhdGFyKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihg4p2MIFtDb250YWN0TG9yZWJvb2tNYW5hZ2VyXSDkv53lrZjop5LoibLkuJPnlKjlpLTlg4/lpLHotKU6YCwgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDop6blj5Hop5LoibLlpLTlg4/mm7TmlrDkuovku7ZcbiAgICog6YCa55+l55u45YWz57uE5Lu25pu05paw6KeS6Imy5aS05YOP77yI5LiN5b2x5ZON55So5oi35aS05YOP77yJXG4gICAqIEBwYXJhbSBjb250YWN0TmFtZSDogZTns7vkurrlp5PlkI1cbiAgICogQHBhcmFtIG5ld0F2YXRhciDmlrDlpLTlg49VUkxcbiAgICovXG4gIHByaXZhdGUgdHJpZ2dlckNoYXJhY3RlckF2YXRhclVwZGF0ZShjb250YWN0TmFtZTogc3RyaW5nLCBuZXdBdmF0YXI6IHN0cmluZyk6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICAvLyDlj5HpgIEgY29udGFjdFVwZGF0ZWQg5LqL5Lu277yM5LiO5Yqo5oCB6aG16Z2i55uR5ZCs55qE5LqL5Lu25L+d5oyB5LiA6Ie0XG4gICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgnY29udGFjdFVwZGF0ZWQnLCB7XG4gICAgICAgIGRldGFpbDoge1xuICAgICAgICAgIG9sZE5hbWU6IGNvbnRhY3ROYW1lLCAvLyDlkI3np7DmnKrlj5jvvIzmlrDml6fnm7jlkIxcbiAgICAgICAgICBuZXdOYW1lOiBjb250YWN0TmFtZSxcbiAgICAgICAgICBuZXdBdmF0YXI6IG5ld0F2YXRhcixcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICBjb25zb2xlLmxvZyhg8J+ToiBbQ29udGFjdExvcmVib29rTWFuYWdlcl0g5bey5Y+R6YCB6IGU57O75Lq65pu05paw5LqL5Lu2OiAke2NvbnRhY3ROYW1lfWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oYOKaoO+4jyBbQ29udGFjdExvcmVib29rTWFuYWdlcl0g6Kem5Y+R6IGU57O75Lq65pu05paw5aSx6LSlOmAsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5omA5pyJ6IGU57O75Lq65pWw5o2uXG4gICAqIEByZXR1cm5zIOiBlOezu+S6uuaVsOe7hFxuICAgKi9cbiAgZ2V0Q29udGFjdERhdGEoKTogU2ltcGxlQ29udGFjdFtdIHtcbiAgICByZXR1cm4gWy4uLnRoaXMuY29udGFjdERhdGFdO1xuICB9XG5cbiAgLyoqXG4gICAqIOajgOafpeiBlOezu+S6uuaYr+WQpuWtmOWcqOS6juS4lueVjOS5puS4rVxuICAgKiBAcGFyYW0gbmFtZSDogZTns7vkurrlp5PlkI1cbiAgICogQHJldHVybnMg5piv5ZCm5a2Y5ZyoXG4gICAqL1xuICBoYXNDb250YWN0KG5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNvbnRhY3REYXRhLnNvbWUoY29udGFjdCA9PiBjb250YWN0Lm5hbWUgPT09IG5hbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIOmHjeaWsOWKoOi9veiBlOezu+S6uuaVsOaNru+8iOeUqOS6juinkuiJsuWIh+aNouaXtu+8iVxuICAgKi9cbiAgYXN5bmMgcmVsb2FkKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnNvbGUubG9nKCfwn5SEIFtDb250YWN0TG9yZWJvb2tNYW5hZ2VyXSDop5LoibLliIfmjaLvvIzph43mlrDliqDovb3ogZTns7vkurrmlbDmja4uLi4nKTtcbiAgICBhd2FpdCB0aGlzLmxvYWRDb250YWN0c0Zyb21Mb3JlYm9vaygpO1xuICB9XG5cbiAgLyoqXG4gICAqIOa4hemZpOS4lueVjOS5puinkuiJsue8k+WtmFxuICAgKiDnm7TmjqXmuIXpmaTkuJbnlYzkuabkuK3miYDmnInop5LoibLnmoTmnKzlnLDnvJPlrZhcbiAgICovXG4gIGFzeW5jIGNsZWFyTG9yZWJvb2tDaGFyYWN0ZXJDYWNoZSgpOiBQcm9taXNlPHsgY2xlYXJlZDogbnVtYmVyOyB0b3RhbDogbnVtYmVyIH0+IHtcbiAgICB0cnkge1xuICAgICAgLy8g6YeN5paw5LuO5LiW55WM5Lmm5Yqg6L295pyA5paw55qE6IGU57O75Lq65pWw5o2uXG4gICAgICBhd2FpdCB0aGlzLmxvYWRDb250YWN0c0Zyb21Mb3JlYm9vaygpO1xuXG4gICAgICAvLyDojrflj5bkuJbnlYzkuabkuK3nmoTmiYDmnInogZTns7vkurrlkI3np7BcbiAgICAgIGNvbnN0IHdvcmxkYm9va0NvbnRhY3ROYW1lcyA9IHRoaXMuY29udGFjdERhdGEubWFwKGNvbnRhY3QgPT4gY29udGFjdC5uYW1lKTtcblxuICAgICAgaWYgKHdvcmxkYm9va0NvbnRhY3ROYW1lcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfk4sgW0NvbnRhY3RMb3JlYm9va01hbmFnZXJdIOS4lueVjOS5puS4reayoeacieiBlOezu+S6uu+8jOaXoOmcgOa4hemZpOe8k+WtmCcpO1xuICAgICAgICByZXR1cm4geyBjbGVhcmVkOiAwLCB0b3RhbDogMCB9O1xuICAgICAgfVxuXG4gICAgICAvLyDojrflj5blvZPliY3nmoTop5LoibLkuJPnlKjnvJPlrZhcbiAgICAgIGNvbnN0IGNoYXJhY3RlckF2YXRhcnM6IENoYXJhY3RlckNvbnRhY3RBdmF0YXJzID0gZ2V0Q2hhcmFjdGVySXRlbSh0aGlzLkNPTlRBQ1RfU1RPUkFHRV9LRVksIHt9KSB8fCB7fTtcblxuICAgICAgLy8g5riF6Zmk5LiW55WM5Lmm5Lit5omA5pyJ6IGU57O75Lq655qE57yT5a2YXG4gICAgICBsZXQgY2xlYXJlZENvdW50ID0gMDtcbiAgICAgIGNvbnN0IGNsZWFyZWRDb250YWN0TmFtZXM6IHN0cmluZ1tdID0gW107XG4gICAgICB3b3JsZGJvb2tDb250YWN0TmFtZXMuZm9yRWFjaChjb250YWN0TmFtZSA9PiB7XG4gICAgICAgIGlmIChjaGFyYWN0ZXJBdmF0YXJzW2NvbnRhY3ROYW1lXSkge1xuICAgICAgICAgIGRlbGV0ZSBjaGFyYWN0ZXJBdmF0YXJzW2NvbnRhY3ROYW1lXTtcbiAgICAgICAgICBjbGVhcmVkQ291bnQrKztcbiAgICAgICAgICBjbGVhcmVkQ29udGFjdE5hbWVzLnB1c2goY29udGFjdE5hbWUpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5eR77iPIFtDb250YWN0TG9yZWJvb2tNYW5hZ2VyXSDmuIXpmaTkuJbnlYzkuabop5LoibLnvJPlrZg6ICR7Y29udGFjdE5hbWV9YCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyDkv53lrZjmm7TmlrDlkI7nmoTnvJPlrZhcbiAgICAgIHNldENoYXJhY3Rlckl0ZW0odGhpcy5DT05UQUNUX1NUT1JBR0VfS0VZLCBjaGFyYWN0ZXJBdmF0YXJzKTtcblxuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIGDinIUgW0NvbnRhY3RMb3JlYm9va01hbmFnZXJdIOS4lueVjOS5puinkuiJsue8k+WtmOa4hemZpOWujOaIkDog5riF6Zmk5LqGICR7Y2xlYXJlZENvdW50fSDkuKrop5LoibLvvIzkuJbnlYzkuablhbHmnIkgJHt3b3JsZGJvb2tDb250YWN0TmFtZXMubGVuZ3RofSDkuKrop5LoibJgLFxuICAgICAgKTtcblxuICAgICAgLy8g6Kem5Y+R5aS05YOP57yT5a2Y5riF6Zmk5LqL5Lu277yM6YCa55+lQ29udGFjdE1hbmFnZXLmm7TmlrDkuJbnlYzkuabogZTns7vkurrnmoTlpLTlg49cbiAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCd3b3JsZGJvb2tBdmF0YXJDYWNoZUNsZWFyZWQnLCB7XG4gICAgICAgIGRldGFpbDoge1xuICAgICAgICAgIGNsZWFyZWRDb3VudCxcbiAgICAgICAgICB3b3JsZGJvb2tDb250YWN0TmFtZXMsIC8vIOaJgOacieS4lueVjOS5puinkuiJsu+8iOeUqOS6jkNvbnRhY3RNYW5hZ2Vy55qE5a6M5pW05Yi35paw77yJXG4gICAgICAgICAgY2xlYXJlZENvbnRhY3ROYW1lcywgLy8g5a6e6ZmF6KKr5riF6Zmk57yT5a2Y55qE6KeS6Imy77yI55So5LqOQmVhckNoYXRNYW5hZ2Vy55qE57K+56Gu5pu05paw77yJXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OiIFtDb250YWN0TG9yZWJvb2tNYW5hZ2VyXSDlt7Llj5HpgIHkuJbnlYzkuablpLTlg4/nvJPlrZjmuIXpmaTkuovku7YnKTtcblxuICAgICAgcmV0dXJuIHsgY2xlYXJlZDogY2xlYXJlZENvdW50LCB0b3RhbDogd29ybGRib29rQ29udGFjdE5hbWVzLmxlbmd0aCB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgW0NvbnRhY3RMb3JlYm9va01hbmFnZXJdIOa4hemZpOS4lueVjOS5puinkuiJsue8k+WtmOWksei0pTonLCBlcnJvcik7XG4gICAgICByZXR1cm4geyBjbGVhcmVkOiAwLCB0b3RhbDogMCB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bkuJbnlYzkuabop5LoibLnvJPlrZjnu5/orqHkv6Hmga9cbiAgICovXG4gIGdldExvcmVib29rQ2FjaGVTdGF0cygpOiB7IHdvcmxkYm9va0NvbnRhY3RzOiBudW1iZXI7IGNhY2hlZENvbnRhY3RzOiBudW1iZXI7IGNhY2hlZFdvcmxkYm9va0NvbnRhY3RzOiBudW1iZXIgfSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNoYXJhY3RlckF2YXRhcnM6IENoYXJhY3RlckNvbnRhY3RBdmF0YXJzID0gZ2V0Q2hhcmFjdGVySXRlbSh0aGlzLkNPTlRBQ1RfU1RPUkFHRV9LRVksIHt9KSB8fCB7fTtcbiAgICAgIGNvbnN0IHdvcmxkYm9va0NvbnRhY3ROYW1lcyA9IG5ldyBTZXQodGhpcy5jb250YWN0RGF0YS5tYXAoY29udGFjdCA9PiBjb250YWN0Lm5hbWUpKTtcblxuICAgICAgY29uc3QgY2FjaGVkV29ybGRib29rQ29udGFjdHMgPSBPYmplY3Qua2V5cyhjaGFyYWN0ZXJBdmF0YXJzKS5maWx0ZXIobmFtZSA9PlxuICAgICAgICB3b3JsZGJvb2tDb250YWN0TmFtZXMuaGFzKG5hbWUpLFxuICAgICAgKS5sZW5ndGg7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHdvcmxkYm9va0NvbnRhY3RzOiB0aGlzLmNvbnRhY3REYXRhLmxlbmd0aCxcbiAgICAgICAgY2FjaGVkQ29udGFjdHM6IE9iamVjdC5rZXlzKGNoYXJhY3RlckF2YXRhcnMpLmxlbmd0aCxcbiAgICAgICAgY2FjaGVkV29ybGRib29rQ29udGFjdHM6IGNhY2hlZFdvcmxkYm9va0NvbnRhY3RzLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIFtDb250YWN0TG9yZWJvb2tNYW5hZ2VyXSDojrflj5bnvJPlrZjnu5/orqHlpLHotKU6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHsgd29ybGRib29rQ29udGFjdHM6IDAsIGNhY2hlZENvbnRhY3RzOiAwLCBjYWNoZWRXb3JsZGJvb2tDb250YWN0czogMCB9O1xuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/contactLorebook/ContactLorebookManager.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/contactLorebook/ContactParser.ts": 
  /*!********************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/contactLorebook/ContactParser.ts ***!
  \********************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ContactParser: () => (/* binding */ ContactParser)\n/* harmony export */ });\n/**\n * 联系人数据解析器\n * 负责解析世界书中的联系人文本格式\n */\nclass ContactParser {\n    /**\n     * 联系人解析正则表达式\n     * 旧格式：[姓名：xxx 头像：url] （带方括号）\n     * 新格式：姓名：xxx 头像：url （不带方括号）\n     */\n    static CONTACT_REGEX_OLD = /\\[姓名：([^头像]+)头像：([^\\]]+)\\]/g;\n    static CONTACT_REGEX_NEW = /^姓名：([^头像]+)头像：(.+)$/gm;\n    /**\n     * 解析联系人文本内容\n     * 支持两种格式：\n     * 1. 旧格式（带方括号）：[姓名：xxx 头像：url]\n     * 2. 新格式（不带方括号）：姓名：xxx 头像：url\n     * @param content 世界书条目的content字段\n     * @param preferNewFormat 是否优先使用新格式（默认false，用于\"设置\"条目）\n     * @returns 解析后的联系人数组\n     */\n    static parseContacts(content, preferNewFormat = false) {\n        const contacts = [];\n        try {\n            // 如果是从\"设置\"条目解析，优先尝试新格式\n            if (preferNewFormat) {\n                const newFormatContacts = this.parseNewFormat(content);\n                if (newFormatContacts.length > 0) {\n                    return newFormatContacts;\n                }\n            }\n            // 尝试解析旧格式（兼容性）\n            const oldFormatContacts = this.parseOldFormat(content);\n            if (oldFormatContacts.length > 0) {\n                return oldFormatContacts;\n            }\n            // 如果旧格式没有结果，再尝试新格式\n            if (!preferNewFormat) {\n                return this.parseNewFormat(content);\n            }\n            console.log(`✅ [ContactParser] 成功解析 ${contacts.length} 个联系人`);\n        }\n        catch (error) {\n            console.error('❌ [ContactParser] 解析联系人内容失败:', error);\n        }\n        return contacts;\n    }\n    /**\n     * 解析旧格式联系人（带方括号）\n     */\n    static parseOldFormat(content) {\n        const contacts = [];\n        let match;\n        const regex = new RegExp(this.CONTACT_REGEX_OLD.source, 'g');\n        while ((match = regex.exec(content)) !== null) {\n            const name = match[1].trim();\n            const avatar = match[2].trim();\n            if (name && avatar) {\n                contacts.push({ name, avatar });\n                console.log(`👤 [ContactParser] 解析到联系人（旧格式）: ${name} -> ${avatar.substring(0, 50)}...`);\n            }\n        }\n        return contacts;\n    }\n    /**\n     * 解析新格式联系人（不带方括号）\n     * 支持两种子格式：\n     * 1. 单行格式：姓名：xxx 头像：url\n     * 2. 多行格式：姓名：xxx\\n头像：url\n     */\n    static parseNewFormat(content) {\n        const contacts = [];\n        const lines = content.split(/\\r?\\n/);\n        let i = 0;\n        while (i < lines.length) {\n            const trimmedLine = lines[i].trim();\n            // 跳过空行和区块标题\n            if (!trimmedLine || /^\\[.+\\]$/.test(trimmedLine)) {\n                i++;\n                continue;\n            }\n            // 尝试匹配单行格式：姓名：xxx 头像：url\n            const singleLineMatch = trimmedLine.match(/^姓名：([^头像]+)头像：(.+)$/);\n            if (singleLineMatch) {\n                const name = singleLineMatch[1].trim();\n                const avatar = singleLineMatch[2].trim();\n                if (name && avatar) {\n                    contacts.push({ name, avatar });\n                    console.log(`👤 [ContactParser] 解析到联系人（单行格式）: ${name} -> ${avatar.substring(0, 50)}...`);\n                }\n                i++;\n                continue;\n            }\n            // 尝试匹配多行格式的开始：姓名：xxx\n            const nameMatch = trimmedLine.match(/^姓名：(.+)$/);\n            if (nameMatch && i + 1 < lines.length) {\n                const nextLine = lines[i + 1].trim();\n                const avatarMatch = nextLine.match(/^头像：(.+)$/);\n                if (avatarMatch) {\n                    const name = nameMatch[1].trim();\n                    const avatar = avatarMatch[1].trim();\n                    if (name && avatar) {\n                        contacts.push({ name, avatar });\n                        console.log(`👤 [ContactParser] 解析到联系人（多行格式）: ${name} -> ${avatar.substring(0, 50)}...`);\n                    }\n                    i += 2; // 跳过已处理的两行\n                    continue;\n                }\n            }\n            i++;\n        }\n        return contacts;\n    }\n    /**\n     * 验证联系人文本格式是否正确\n     * 支持两种格式\n     * @param text 要验证的文本\n     * @returns 是否为有效格式\n     */\n    static validateContactFormat(text) {\n        // 检查旧格式\n        const oldRegex = new RegExp(this.CONTACT_REGEX_OLD.source);\n        if (oldRegex.test(text)) {\n            return true;\n        }\n        // 检查新格式\n        const newFormatMatch = text.trim().match(/^姓名：([^头像]+)头像：(.+)$/);\n        return newFormatMatch !== null;\n    }\n    /**\n     * 格式化联系人为文本格式\n     * @param contacts 联系人数组\n     * @param useNewFormat 是否使用新格式（不带方括号）\n     * @returns 格式化后的文本\n     */\n    static formatContacts(contacts, useNewFormat = false) {\n        if (useNewFormat) {\n            // 新格式：姓名：xxx 头像：url\n            return contacts.map(contact => `姓名：${contact.name} 头像：${contact.avatar}`).join('\\n');\n        }\n        else {\n            // 旧格式：[姓名：xxx 头像：url]\n            return contacts.map(contact => `[姓名：${contact.name} 头像：${contact.avatar}]`).join('\\n');\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY29udGFjdExvcmVib29rL0NvbnRhY3RQYXJzZXIudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7R0FHRztBQUlJLE1BQU0sYUFBYTtJQUN4Qjs7OztPQUlHO0lBQ0ssTUFBTSxDQUFVLGlCQUFpQixHQUFHLDZCQUE2QixDQUFDO0lBQ2xFLE1BQU0sQ0FBVSxpQkFBaUIsR0FBRyx3QkFBd0IsQ0FBQztJQUVyRTs7Ozs7Ozs7T0FRRztJQUNILE1BQU0sQ0FBQyxhQUFhLENBQUMsT0FBZSxFQUFFLGtCQUEyQixLQUFLO1FBQ3BFLE1BQU0sUUFBUSxHQUFvQixFQUFFLENBQUM7UUFFckMsSUFBSSxDQUFDO1lBQ0gsdUJBQXVCO1lBQ3ZCLElBQUksZUFBZSxFQUFFLENBQUM7Z0JBQ3BCLE1BQU0saUJBQWlCLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDdkQsSUFBSSxpQkFBaUIsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7b0JBQ2pDLE9BQU8saUJBQWlCLENBQUM7Z0JBQzNCLENBQUM7WUFDSCxDQUFDO1lBRUQsZUFBZTtZQUNmLE1BQU0saUJBQWlCLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUN2RCxJQUFJLGlCQUFpQixDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztnQkFDakMsT0FBTyxpQkFBaUIsQ0FBQztZQUMzQixDQUFDO1lBRUQsbUJBQW1CO1lBQ25CLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztnQkFDckIsT0FBTyxJQUFJLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ3RDLENBQUM7WUFFRCxPQUFPLENBQUMsR0FBRyxDQUFDLDBCQUEwQixRQUFRLENBQUMsTUFBTSxPQUFPLENBQUMsQ0FBQztRQUNoRSxDQUFDO1FBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNmLE9BQU8sQ0FBQyxLQUFLLENBQUMsOEJBQThCLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDdkQsQ0FBQztRQUVELE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7SUFFRDs7T0FFRztJQUNLLE1BQU0sQ0FBQyxjQUFjLENBQUMsT0FBZTtRQUMzQyxNQUFNLFFBQVEsR0FBb0IsRUFBRSxDQUFDO1FBQ3JDLElBQUksS0FBSyxDQUFDO1FBQ1YsTUFBTSxLQUFLLEdBQUcsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQztRQUU3RCxPQUFPLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxJQUFJLEVBQUUsQ0FBQztZQUM5QyxNQUFNLElBQUksR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDN0IsTUFBTSxNQUFNLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO1lBRS9CLElBQUksSUFBSSxJQUFJLE1BQU0sRUFBRSxDQUFDO2dCQUNuQixRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUM7Z0JBQ2hDLE9BQU8sQ0FBQyxHQUFHLENBQUMsbUNBQW1DLElBQUksT0FBTyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDMUYsQ0FBQztRQUNILENBQUM7UUFFRCxPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSyxNQUFNLENBQUMsY0FBYyxDQUFDLE9BQWU7UUFDM0MsTUFBTSxRQUFRLEdBQW9CLEVBQUUsQ0FBQztRQUNyQyxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBRXJDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNWLE9BQU8sQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUN4QixNQUFNLFdBQVcsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7WUFFcEMsWUFBWTtZQUNaLElBQUksQ0FBQyxXQUFXLElBQUksVUFBVSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDO2dCQUNqRCxDQUFDLEVBQUUsQ0FBQztnQkFDSixTQUFTO1lBQ1gsQ0FBQztZQUVELHlCQUF5QjtZQUN6QixNQUFNLGVBQWUsR0FBRyxXQUFXLENBQUMsS0FBSyxDQUFDLHNCQUFzQixDQUFDLENBQUM7WUFDbEUsSUFBSSxlQUFlLEVBQUUsQ0FBQztnQkFDcEIsTUFBTSxJQUFJLEdBQUcsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO2dCQUN2QyxNQUFNLE1BQU0sR0FBRyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7Z0JBRXpDLElBQUksSUFBSSxJQUFJLE1BQU0sRUFBRSxDQUFDO29CQUNuQixRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUM7b0JBQ2hDLE9BQU8sQ0FBQyxHQUFHLENBQUMsb0NBQW9DLElBQUksT0FBTyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQzNGLENBQUM7Z0JBQ0QsQ0FBQyxFQUFFLENBQUM7Z0JBQ0osU0FBUztZQUNYLENBQUM7WUFFRCxxQkFBcUI7WUFDckIsTUFBTSxTQUFTLEdBQUcsV0FBVyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUNqRCxJQUFJLFNBQVMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQztnQkFDdEMsTUFBTSxRQUFRLEdBQUcsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztnQkFDckMsTUFBTSxXQUFXLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQztnQkFFaEQsSUFBSSxXQUFXLEVBQUUsQ0FBQztvQkFDaEIsTUFBTSxJQUFJLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO29CQUNqQyxNQUFNLE1BQU0sR0FBRyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7b0JBRXJDLElBQUksSUFBSSxJQUFJLE1BQU0sRUFBRSxDQUFDO3dCQUNuQixRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUM7d0JBQ2hDLE9BQU8sQ0FBQyxHQUFHLENBQUMsb0NBQW9DLElBQUksT0FBTyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7b0JBQzNGLENBQUM7b0JBQ0QsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFdBQVc7b0JBQ25CLFNBQVM7Z0JBQ1gsQ0FBQztZQUNILENBQUM7WUFFRCxDQUFDLEVBQUUsQ0FBQztRQUNOLENBQUM7UUFFRCxPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSCxNQUFNLENBQUMscUJBQXFCLENBQUMsSUFBWTtRQUN2QyxRQUFRO1FBQ1IsTUFBTSxRQUFRLEdBQUcsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzNELElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDO1lBQ3hCLE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUVELFFBQVE7UUFDUixNQUFNLGNBQWMsR0FBRyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLHNCQUFzQixDQUFDLENBQUM7UUFDakUsT0FBTyxjQUFjLEtBQUssSUFBSSxDQUFDO0lBQ2pDLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNILE1BQU0sQ0FBQyxjQUFjLENBQUMsUUFBeUIsRUFBRSxlQUF3QixLQUFLO1FBQzVFLElBQUksWUFBWSxFQUFFLENBQUM7WUFDakIsb0JBQW9CO1lBQ3BCLE9BQU8sUUFBUSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLE1BQU0sT0FBTyxDQUFDLElBQUksT0FBTyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDdkYsQ0FBQzthQUFNLENBQUM7WUFDTixzQkFBc0I7WUFDdEIsT0FBTyxRQUFRLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxPQUFPLENBQUMsSUFBSSxPQUFPLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN6RixDQUFDO0lBQ0gsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY29udGFjdExvcmVib29rL0NvbnRhY3RQYXJzZXIudHM/Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiDogZTns7vkurrmlbDmja7op6PmnpDlmahcclxuICog6LSf6LSj6Kej5p6Q5LiW55WM5Lmm5Lit55qE6IGU57O75Lq65paH5pys5qC85byPXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgU2ltcGxlQ29udGFjdCB9IGZyb20gJy4vdHlwZXMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbnRhY3RQYXJzZXIge1xyXG4gIC8qKlxyXG4gICAqIOiBlOezu+S6uuino+aekOato+WImeihqOi+vuW8j1xyXG4gICAqIOaXp+agvOW8j++8mlvlp5PlkI3vvJp4eHgg5aS05YOP77yadXJsXSDvvIjluKbmlrnmi6zlj7fvvIlcclxuICAgKiDmlrDmoLzlvI/vvJrlp5PlkI3vvJp4eHgg5aS05YOP77yadXJsIO+8iOS4jeW4puaWueaLrOWPt++8iVxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IENPTlRBQ1RfUkVHRVhfT0xEID0gL1xcW+Wnk+WQje+8mihbXuWktOWDj10rKeWktOWDj++8mihbXlxcXV0rKVxcXS9nO1xyXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IENPTlRBQ1RfUkVHRVhfTkVXID0gL17lp5PlkI3vvJooW17lpLTlg49dKynlpLTlg4/vvJooLispJC9nbTtcclxuXHJcbiAgLyoqXHJcbiAgICog6Kej5p6Q6IGU57O75Lq65paH5pys5YaF5a65XHJcbiAgICog5pSv5oyB5Lik56eN5qC85byP77yaXHJcbiAgICogMS4g5pen5qC85byP77yI5bim5pa55ous5Y+377yJ77yaW+Wnk+WQje+8mnh4eCDlpLTlg4/vvJp1cmxdXHJcbiAgICogMi4g5paw5qC85byP77yI5LiN5bim5pa55ous5Y+377yJ77ya5aeT5ZCN77yaeHh4IOWktOWDj++8mnVybFxyXG4gICAqIEBwYXJhbSBjb250ZW50IOS4lueVjOS5puadoeebrueahGNvbnRlbnTlrZfmrrVcclxuICAgKiBAcGFyYW0gcHJlZmVyTmV3Rm9ybWF0IOaYr+WQpuS8mOWFiOS9v+eUqOaWsOagvOW8j++8iOm7mOiupGZhbHNl77yM55So5LqOXCLorr7nva5cIuadoeebru+8iVxyXG4gICAqIEByZXR1cm5zIOino+aekOWQjueahOiBlOezu+S6uuaVsOe7hFxyXG4gICAqL1xyXG4gIHN0YXRpYyBwYXJzZUNvbnRhY3RzKGNvbnRlbnQ6IHN0cmluZywgcHJlZmVyTmV3Rm9ybWF0OiBib29sZWFuID0gZmFsc2UpOiBTaW1wbGVDb250YWN0W10ge1xyXG4gICAgY29uc3QgY29udGFjdHM6IFNpbXBsZUNvbnRhY3RbXSA9IFtdO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOWmguaenOaYr+S7jlwi6K6+572uXCLmnaHnm67op6PmnpDvvIzkvJjlhYjlsJ3or5XmlrDmoLzlvI9cclxuICAgICAgaWYgKHByZWZlck5ld0Zvcm1hdCkge1xyXG4gICAgICAgIGNvbnN0IG5ld0Zvcm1hdENvbnRhY3RzID0gdGhpcy5wYXJzZU5ld0Zvcm1hdChjb250ZW50KTtcclxuICAgICAgICBpZiAobmV3Rm9ybWF0Q29udGFjdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgcmV0dXJuIG5ld0Zvcm1hdENvbnRhY3RzO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5bCd6K+V6Kej5p6Q5pen5qC85byP77yI5YW85a655oCn77yJXHJcbiAgICAgIGNvbnN0IG9sZEZvcm1hdENvbnRhY3RzID0gdGhpcy5wYXJzZU9sZEZvcm1hdChjb250ZW50KTtcclxuICAgICAgaWYgKG9sZEZvcm1hdENvbnRhY3RzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICByZXR1cm4gb2xkRm9ybWF0Q29udGFjdHM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOWmguaenOaXp+agvOW8j+ayoeaciee7k+aenO+8jOWGjeWwneivleaWsOagvOW8j1xyXG4gICAgICBpZiAoIXByZWZlck5ld0Zvcm1hdCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlTmV3Rm9ybWF0KGNvbnRlbnQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhg4pyFIFtDb250YWN0UGFyc2VyXSDmiJDlip/op6PmnpAgJHtjb250YWN0cy5sZW5ndGh9IOS4quiBlOezu+S6umApO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign4p2MIFtDb250YWN0UGFyc2VyXSDop6PmnpDogZTns7vkurrlhoXlrrnlpLHotKU6JywgZXJyb3IpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjb250YWN0cztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOino+aekOaXp+agvOW8j+iBlOezu+S6uu+8iOW4puaWueaLrOWPt++8iVxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIHBhcnNlT2xkRm9ybWF0KGNvbnRlbnQ6IHN0cmluZyk6IFNpbXBsZUNvbnRhY3RbXSB7XHJcbiAgICBjb25zdCBjb250YWN0czogU2ltcGxlQ29udGFjdFtdID0gW107XHJcbiAgICBsZXQgbWF0Y2g7XHJcbiAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAodGhpcy5DT05UQUNUX1JFR0VYX09MRC5zb3VyY2UsICdnJyk7XHJcblxyXG4gICAgd2hpbGUgKChtYXRjaCA9IHJlZ2V4LmV4ZWMoY29udGVudCkpICE9PSBudWxsKSB7XHJcbiAgICAgIGNvbnN0IG5hbWUgPSBtYXRjaFsxXS50cmltKCk7XHJcbiAgICAgIGNvbnN0IGF2YXRhciA9IG1hdGNoWzJdLnRyaW0oKTtcclxuXHJcbiAgICAgIGlmIChuYW1lICYmIGF2YXRhcikge1xyXG4gICAgICAgIGNvbnRhY3RzLnB1c2goeyBuYW1lLCBhdmF0YXIgfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coYPCfkaQgW0NvbnRhY3RQYXJzZXJdIOino+aekOWIsOiBlOezu+S6uu+8iOaXp+agvOW8j++8iTogJHtuYW1lfSAtPiAke2F2YXRhci5zdWJzdHJpbmcoMCwgNTApfS4uLmApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNvbnRhY3RzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6Kej5p6Q5paw5qC85byP6IGU57O75Lq677yI5LiN5bim5pa55ous5Y+377yJXHJcbiAgICog5pSv5oyB5Lik56eN5a2Q5qC85byP77yaXHJcbiAgICogMS4g5Y2V6KGM5qC85byP77ya5aeT5ZCN77yaeHh4IOWktOWDj++8mnVybFxyXG4gICAqIDIuIOWkmuihjOagvOW8j++8muWnk+WQje+8mnh4eFxcbuWktOWDj++8mnVybFxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIHBhcnNlTmV3Rm9ybWF0KGNvbnRlbnQ6IHN0cmluZyk6IFNpbXBsZUNvbnRhY3RbXSB7XHJcbiAgICBjb25zdCBjb250YWN0czogU2ltcGxlQ29udGFjdFtdID0gW107XHJcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoL1xccj9cXG4vKTtcclxuICAgIFxyXG4gICAgbGV0IGkgPSAwO1xyXG4gICAgd2hpbGUgKGkgPCBsaW5lcy5sZW5ndGgpIHtcclxuICAgICAgY29uc3QgdHJpbW1lZExpbmUgPSBsaW5lc1tpXS50cmltKCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyDot7Pov4fnqbrooYzlkozljLrlnZfmoIfpophcclxuICAgICAgaWYgKCF0cmltbWVkTGluZSB8fCAvXlxcWy4rXFxdJC8udGVzdCh0cmltbWVkTGluZSkpIHtcclxuICAgICAgICBpKys7XHJcbiAgICAgICAgY29udGludWU7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIOWwneivleWMuemFjeWNleihjOagvOW8j++8muWnk+WQje+8mnh4eCDlpLTlg4/vvJp1cmxcclxuICAgICAgY29uc3Qgc2luZ2xlTGluZU1hdGNoID0gdHJpbW1lZExpbmUubWF0Y2goL17lp5PlkI3vvJooW17lpLTlg49dKynlpLTlg4/vvJooLispJC8pO1xyXG4gICAgICBpZiAoc2luZ2xlTGluZU1hdGNoKSB7XHJcbiAgICAgICAgY29uc3QgbmFtZSA9IHNpbmdsZUxpbmVNYXRjaFsxXS50cmltKCk7XHJcbiAgICAgICAgY29uc3QgYXZhdGFyID0gc2luZ2xlTGluZU1hdGNoWzJdLnRyaW0oKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAobmFtZSAmJiBhdmF0YXIpIHtcclxuICAgICAgICAgIGNvbnRhY3RzLnB1c2goeyBuYW1lLCBhdmF0YXIgfSk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhg8J+RpCBbQ29udGFjdFBhcnNlcl0g6Kej5p6Q5Yiw6IGU57O75Lq677yI5Y2V6KGM5qC85byP77yJOiAke25hbWV9IC0+ICR7YXZhdGFyLnN1YnN0cmluZygwLCA1MCl9Li4uYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGkrKztcclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8g5bCd6K+V5Yy56YWN5aSa6KGM5qC85byP55qE5byA5aeL77ya5aeT5ZCN77yaeHh4XHJcbiAgICAgIGNvbnN0IG5hbWVNYXRjaCA9IHRyaW1tZWRMaW5lLm1hdGNoKC9e5aeT5ZCN77yaKC4rKSQvKTtcclxuICAgICAgaWYgKG5hbWVNYXRjaCAmJiBpICsgMSA8IGxpbmVzLmxlbmd0aCkge1xyXG4gICAgICAgIGNvbnN0IG5leHRMaW5lID0gbGluZXNbaSArIDFdLnRyaW0oKTtcclxuICAgICAgICBjb25zdCBhdmF0YXJNYXRjaCA9IG5leHRMaW5lLm1hdGNoKC9e5aS05YOP77yaKC4rKSQvKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoYXZhdGFyTWF0Y2gpIHtcclxuICAgICAgICAgIGNvbnN0IG5hbWUgPSBuYW1lTWF0Y2hbMV0udHJpbSgpO1xyXG4gICAgICAgICAgY29uc3QgYXZhdGFyID0gYXZhdGFyTWF0Y2hbMV0udHJpbSgpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAobmFtZSAmJiBhdmF0YXIpIHtcclxuICAgICAgICAgICAgY29udGFjdHMucHVzaCh7IG5hbWUsIGF2YXRhciB9KTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYPCfkaQgW0NvbnRhY3RQYXJzZXJdIOino+aekOWIsOiBlOezu+S6uu+8iOWkmuihjOagvOW8j++8iTogJHtuYW1lfSAtPiAke2F2YXRhci5zdWJzdHJpbmcoMCwgNTApfS4uLmApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaSArPSAyOyAvLyDot7Pov4flt7LlpITnkIbnmoTkuKTooYxcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaSsrO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjb250YWN0cztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmqjOivgeiBlOezu+S6uuaWh+acrOagvOW8j+aYr+WQpuato+ehrlxyXG4gICAqIOaUr+aMgeS4pOenjeagvOW8j1xyXG4gICAqIEBwYXJhbSB0ZXh0IOimgemqjOivgeeahOaWh+acrFxyXG4gICAqIEByZXR1cm5zIOaYr+WQpuS4uuacieaViOagvOW8j1xyXG4gICAqL1xyXG4gIHN0YXRpYyB2YWxpZGF0ZUNvbnRhY3RGb3JtYXQodGV4dDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAvLyDmo4Dmn6Xml6fmoLzlvI9cclxuICAgIGNvbnN0IG9sZFJlZ2V4ID0gbmV3IFJlZ0V4cCh0aGlzLkNPTlRBQ1RfUkVHRVhfT0xELnNvdXJjZSk7XHJcbiAgICBpZiAob2xkUmVnZXgudGVzdCh0ZXh0KSkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8g5qOA5p+l5paw5qC85byPXHJcbiAgICBjb25zdCBuZXdGb3JtYXRNYXRjaCA9IHRleHQudHJpbSgpLm1hdGNoKC9e5aeT5ZCN77yaKFte5aS05YOPXSsp5aS05YOP77yaKC4rKSQvKTtcclxuICAgIHJldHVybiBuZXdGb3JtYXRNYXRjaCAhPT0gbnVsbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOagvOW8j+WMluiBlOezu+S6uuS4uuaWh+acrOagvOW8j1xyXG4gICAqIEBwYXJhbSBjb250YWN0cyDogZTns7vkurrmlbDnu4RcclxuICAgKiBAcGFyYW0gdXNlTmV3Rm9ybWF0IOaYr+WQpuS9v+eUqOaWsOagvOW8j++8iOS4jeW4puaWueaLrOWPt++8iVxyXG4gICAqIEByZXR1cm5zIOagvOW8j+WMluWQjueahOaWh+acrFxyXG4gICAqL1xyXG4gIHN0YXRpYyBmb3JtYXRDb250YWN0cyhjb250YWN0czogU2ltcGxlQ29udGFjdFtdLCB1c2VOZXdGb3JtYXQ6IGJvb2xlYW4gPSBmYWxzZSk6IHN0cmluZyB7XHJcbiAgICBpZiAodXNlTmV3Rm9ybWF0KSB7XHJcbiAgICAgIC8vIOaWsOagvOW8j++8muWnk+WQje+8mnh4eCDlpLTlg4/vvJp1cmxcclxuICAgICAgcmV0dXJuIGNvbnRhY3RzLm1hcChjb250YWN0ID0+IGDlp5PlkI3vvJoke2NvbnRhY3QubmFtZX0g5aS05YOP77yaJHtjb250YWN0LmF2YXRhcn1gKS5qb2luKCdcXG4nKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIOaXp+agvOW8j++8mlvlp5PlkI3vvJp4eHgg5aS05YOP77yadXJsXVxyXG4gICAgICByZXR1cm4gY29udGFjdHMubWFwKGNvbnRhY3QgPT4gYFvlp5PlkI3vvJoke2NvbnRhY3QubmFtZX0g5aS05YOP77yaJHtjb250YWN0LmF2YXRhcn1dYCkuam9pbignXFxuJyk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/contactLorebook/ContactParser.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/contactLorebook/index.ts": 
  /*!************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/contactLorebook/index.ts ***!
  \************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ContactLorebookManager: () => (/* reexport safe */ _ContactLorebookManager__WEBPACK_IMPORTED_MODULE_0__.ContactLorebookManager),\n/* harmony export */   ContactParser: () => (/* reexport safe */ _ContactParser__WEBPACK_IMPORTED_MODULE_1__.ContactParser)\n/* harmony export */ });\n/* harmony import */ var _ContactLorebookManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ContactLorebookManager */ "./src/多云熊/备份/给rovo的/modules/contactLorebook/ContactLorebookManager.ts");\n/* harmony import */ var _ContactParser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ContactParser */ "./src/多云熊/备份/给rovo的/modules/contactLorebook/ContactParser.ts");\n/**\n * 联系人世界书模块入口\n */\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY29udGFjdExvcmVib29rL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7R0FFRztBQUUrRDtBQUNsQiIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY29udGFjdExvcmVib29rL2luZGV4LnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICog6IGU57O75Lq65LiW55WM5Lmm5qih5Z2X5YWl5Y+jXHJcbiAqL1xyXG5cclxuZXhwb3J0IHsgQ29udGFjdExvcmVib29rTWFuYWdlciB9IGZyb20gJy4vQ29udGFjdExvcmVib29rTWFuYWdlcic7XHJcbmV4cG9ydCB7IENvbnRhY3RQYXJzZXIgfSBmcm9tICcuL0NvbnRhY3RQYXJzZXInO1xyXG5leHBvcnQgdHlwZSB7IENoYXJhY3RlckNvbnRhY3RBdmF0YXJzLCBDb250YWN0TG9yZWJvb2tFbnRyeSwgU2ltcGxlQ29udGFjdCB9IGZyb20gJy4vdHlwZXMnO1xyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/contactLorebook/index.ts\n\n}');
  },
  "./src/多云熊/备份/给rovo的/modules/core/BottomNavigation.ts": 
  /*!************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/core/BottomNavigation.ts ***!
  \************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BottomNavigation: () => (/* binding */ BottomNavigation)\n/* harmony export */ });\n/**\n * 通用底部导航栏组件\n * 专门负责底部导航按钮的切换功能，不包含状态栏\n */\nclass BottomNavigation {\n    container = null;\n    config;\n    constructor(config) {\n        this.config = {\n            containerClass: 'bottom-nav',\n            // 启用内置默认文案（messages/我的）作为兜底\n            useDefaultTexts: true,\n            ...config,\n        };\n    }\n    /**\n     * 创建底部导航栏HTML结构\n     */\n    createHTML() {\n        const navItemsHTML = this.config.items.map(item => this.createNavItemHTML(item)).join('');\n        return `\n      <div class=\"${this.config.containerClass}\">\n        ${navItemsHTML}\n      </div>\n    `;\n    }\n    /**\n     * 创建导航项HTML\n     */\n    createNavItemHTML(item) {\n        const activeClass = item.isActive ? ' active' : '';\n        const iconClass = item.iconClass || 'nav-icon';\n        const displayText = this.resolveText(item);\n        return `\n      <div class=\"bottom-nav-item${activeClass}\" data-nav=\"${item.id}\">\n        <div class=\"${iconClass}\"></div>\n        <div class=\"bottom-nav-text\">${displayText}</div>\n      </div>\n    `;\n    }\n    /**\n     * 初始化底部导航栏\n     */\n    initialize(container) {\n        this.container = container;\n        // 在传入的容器（通常已是 .bottom-nav 包裹元素）内直接渲染导航项，避免嵌套 .bottom-nav\n        container.innerHTML = this.config.items.map(item => this.createNavItemHTML(item)).join('');\n        this.bindEvents();\n    }\n    /**\n     * 绑定事件监听器\n     */\n    bindEvents() {\n        if (!this.container)\n            return;\n        const navItems = this.container.querySelectorAll('.bottom-nav-item');\n        navItems.forEach(item => {\n            item.addEventListener('click', () => {\n                const navId = item.getAttribute('data-nav');\n                const configItem = this.config.items.find(i => i.id === navId);\n                if (configItem?.onClick) {\n                    configItem.onClick();\n                }\n                // 不在此处直接切换 active，由页面切换完成后调用 setActiveItem，确保音效播放顺序一致\n            });\n        });\n    }\n    /**\n     * 设置活跃的导航项\n     */\n    setActiveItem(itemId) {\n        if (!this.container)\n            return;\n        const navItems = this.container.querySelectorAll('.bottom-nav-item');\n        navItems.forEach(item => {\n            const navId = item.getAttribute('data-nav');\n            if (navId === itemId) {\n                item.classList.add('active');\n            }\n            else {\n                item.classList.remove('active');\n            }\n        });\n        // 更新配置中的活跃状态\n        this.config.items.forEach(item => {\n            item.isActive = item.id === itemId;\n        });\n    }\n    /**\n     * 更新导航项\n     */\n    updateItems(items) {\n        this.config.items = items;\n        if (this.container) {\n            // 直接在容器内更新导航项，避免生成嵌套的 .bottom-nav\n            this.container.innerHTML = this.config.items.map(item => this.createNavItemHTML(item)).join('');\n            this.bindEvents();\n        }\n    }\n    /**\n     * 显示底部导航栏\n     */\n    show() {\n        if (this.container) {\n            this.container.style.display = 'block';\n        }\n    }\n    /**\n     * 隐藏底部导航栏\n     */\n    hide() {\n        if (this.container) {\n            this.container.style.display = 'none';\n        }\n    }\n    /**\n     * 销毁底部导航栏\n     */\n    destroy() {\n        if (this.container) {\n            this.container.innerHTML = '';\n        }\n        this.container = null;\n    }\n    /**\n     * 获取当前配置\n     */\n    getConfig() {\n        return { ...this.config };\n    }\n    /**\n     * 设置/合并统一文案映射（按 item.id）\n     * 传入后将覆盖内置默认文案\n     */\n    setTexts(texts) {\n        this.config.texts = { ...(this.config.texts || {}), ...texts };\n        if (this.container) {\n            // 直接在容器内重新渲染，保持事件绑定\n            this.container.innerHTML = this.config.items.map(item => this.createNavItemHTML(item)).join('');\n            this.bindEvents();\n        }\n    }\n    /**\n     * 内置默认文案表（可被 config.texts 覆盖）\n     */\n    static DEFAULT_TEXTS = {\n        feed: '动态',\n        messages: '消息',\n        profile: '我的',\n    };\n    /**\n     * 工厂：创建默认顺序的导航项（feed → messages → profile）\n     */\n    static createDefaultNavItems(active, handlers = {}) {\n        const order = ['feed', 'messages', 'profile'];\n        return order.map(id => ({\n            id,\n            iconClass: 'nav-icon',\n            isActive: id === active,\n            onClick: handlers[id],\n        }));\n    }\n    /**\n     * 工厂：在指定容器内挂载默认底部导航并返回实例\n     * 注意：container 应为 .bottom-nav 容器\n     */\n    static mountDefault(container, active, handlers = {}, config = {}) {\n        const items = BottomNavigation.createDefaultNavItems(active, handlers);\n        const nav = new BottomNavigation({ items, ...config });\n        nav.initialize(container);\n        return nav;\n    }\n    /**\n     * 解析展示文案：优先 texts 覆盖；其次内置默认；最后使用 item.text 或 id 兜底\n     */\n    resolveText(item) {\n        const key = item.id;\n        const customMap = this.config.texts || {};\n        if (customMap && Object.prototype.hasOwnProperty.call(customMap, key)) {\n            return customMap[key];\n        }\n        if (this.config.useDefaultTexts !== false && BottomNavigation.DEFAULT_TEXTS[key]) {\n            return BottomNavigation.DEFAULT_TEXTS[key];\n        }\n        return item.text || this.fallbackLabelFromId(key);\n    }\n    /**\n     * 从 id 推断兜底标签（简单返回 id；如需更友好可在此扩展）\n     */\n    fallbackLabelFromId(id) {\n        return id || '';\n    }\n    /**\n     * 更新配置\n     */\n    updateConfig(newConfig) {\n        this.config = { ...this.config, ...newConfig };\n        if (this.container) {\n            // 重新初始化\n            this.destroy();\n            this.initialize(this.container);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY29yZS9Cb3R0b21OYXZpZ2F0aW9uLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7O0dBR0c7QUFtQkksTUFBTSxnQkFBZ0I7SUFDbkIsU0FBUyxHQUF1QixJQUFJLENBQUM7SUFDckMsTUFBTSxDQUFrQjtJQUVoQyxZQUFZLE1BQXVCO1FBQ2pDLElBQUksQ0FBQyxNQUFNLEdBQUc7WUFDWixjQUFjLEVBQUUsWUFBWTtZQUM1Qiw0QkFBNEI7WUFDNUIsZUFBZSxFQUFFLElBQUk7WUFDckIsR0FBRyxNQUFNO1NBQ1YsQ0FBQztJQUNKLENBQUM7SUFFRDs7T0FFRztJQUNJLFVBQVU7UUFDZixNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7UUFFMUYsT0FBTztvQkFDUyxJQUFJLENBQUMsTUFBTSxDQUFDLGNBQWM7VUFDcEMsWUFBWTs7S0FFakIsQ0FBQztJQUNKLENBQUM7SUFFRDs7T0FFRztJQUNLLGlCQUFpQixDQUFDLElBQW1CO1FBQzNDLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQ25ELE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLElBQUksVUFBVSxDQUFDO1FBQy9DLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFM0MsT0FBTzttQ0FDd0IsV0FBVyxlQUFlLElBQUksQ0FBQyxFQUFFO3NCQUM5QyxTQUFTO3VDQUNRLFdBQVc7O0tBRTdDLENBQUM7SUFDSixDQUFDO0lBRUQ7O09BRUc7SUFDSSxVQUFVLENBQUMsU0FBc0I7UUFD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QUFHLENBQUUsQ0FBQztRQUN6QixDQUFDO1FBQ0QsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLGVBQWUsS0FBSyxLQUFLLElBQUksZ0JBQWdCLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUM7WUFDakYsT0FBTyxnQkFBZ0IsQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDN0MsQ0FBQztRQUNELE9BQU8sSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDcEQsQ0FBQztJQUVEOztPQUVHO0lBQ0ssbUJBQW1CLENBQUMsRUFBVTtRQUNwQyxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUM7SUFDbEIsQ0FBQztJQUVEOztPQUVHO0lBQ0ksWUFBWSxDQUFDLFNBQW1DO1FBQ3JELElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxTQUFTLEVBQUUsQ0FBQztRQUUvQyxJQUFJLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUNuQixRQUFRO1lBQ1IsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQ2YsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDbEMsQ0FBQztJQUNILENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WkmuS6keeGii/lpIfku70v57uZcm92b+eahC9tb2R1bGVzL2NvcmUvQm90dG9tTmF2aWdhdGlvbi50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiDpgJrnlKjlupXpg6jlr7zoiKrmoI/nu4Tku7ZcbiAqIOS4k+mXqOi0n+i0o+W6lemDqOWvvOiIquaMiemSrueahOWIh+aNouWKn+iDve+8jOS4jeWMheWQq+eKtuaAgeagj1xuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgQm90dG9tTmF2SXRlbSB7XG4gIGlkOiBzdHJpbmc7XG4gIHRleHQ/OiBzdHJpbmc7XG4gIGljb25DbGFzcz86IHN0cmluZztcbiAgaXNBY3RpdmU/OiBib29sZWFuO1xuICBvbkNsaWNrPzogKCkgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCb3R0b21OYXZDb25maWcge1xuICBpdGVtczogQm90dG9tTmF2SXRlbVtdO1xuICBjb250YWluZXJDbGFzcz86IHN0cmluZztcbiAgLyoqIOWPr+mAie+8mue7n+S4gOaWh+ahiOaYoOWwhO+8jOaMiSBpdGVtLmlkIOimhuebliAqL1xuICB0ZXh0cz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIC8qKiDlj6/pgInvvJrmmK/lkKblkK/nlKjlhoXnva7pu5jorqTmlofmoYjvvIzpu5jorqTlkK/nlKggKi9cbiAgdXNlRGVmYXVsdFRleHRzPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIEJvdHRvbU5hdmlnYXRpb24ge1xuICBwcml2YXRlIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBjb25maWc6IEJvdHRvbU5hdkNvbmZpZztcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IEJvdHRvbU5hdkNvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgY29udGFpbmVyQ2xhc3M6ICdib3R0b20tbmF2JyxcbiAgICAgIC8vIOWQr+eUqOWGhee9rum7mOiupOaWh+ahiO+8iG1lc3NhZ2VzL+aIkeeahO+8ieS9nOS4uuWFnOW6lVxuICAgICAgdXNlRGVmYXVsdFRleHRzOiB0cnVlLFxuICAgICAgLi4uY29uZmlnLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICog5Yib5bu65bqV6YOo5a+86Iiq5qCPSFRNTOe7k+aehFxuICAgKi9cbiAgcHVibGljIGNyZWF0ZUhUTUwoKTogc3RyaW5nIHtcbiAgICBjb25zdCBuYXZJdGVtc0hUTUwgPSB0aGlzLmNvbmZpZy5pdGVtcy5tYXAoaXRlbSA9PiB0aGlzLmNyZWF0ZU5hdkl0ZW1IVE1MKGl0ZW0pKS5qb2luKCcnKTtcblxuICAgIHJldHVybiBgXG4gICAgICA8ZGl2IGNsYXNzPVwiJHt0aGlzLmNvbmZpZy5jb250YWluZXJDbGFzc31cIj5cbiAgICAgICAgJHtuYXZJdGVtc0hUTUx9XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIm+W7uuWvvOiIqumhuUhUTUxcbiAgICovXG4gIHByaXZhdGUgY3JlYXRlTmF2SXRlbUhUTUwoaXRlbTogQm90dG9tTmF2SXRlbSk6IHN0cmluZyB7XG4gICAgY29uc3QgYWN0aXZlQ2xhc3MgPSBpdGVtLmlzQWN0aXZlID8gJyBhY3RpdmUnIDogJyc7XG4gICAgY29uc3QgaWNvbkNsYXNzID0gaXRlbS5pY29uQ2xhc3MgfHwgJ25hdi1pY29uJztcbiAgICBjb25zdCBkaXNwbGF5VGV4dCA9IHRoaXMucmVzb2x2ZVRleHQoaXRlbSk7XG5cbiAgICByZXR1cm4gYFxuICAgICAgPGRpdiBjbGFzcz1cImJvdHRvbS1uYXYtaXRlbSR7YWN0aXZlQ2xhc3N9XCIgZGF0YS1uYXY9XCIke2l0ZW0uaWR9XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCIke2ljb25DbGFzc31cIj48L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImJvdHRvbS1uYXYtdGV4dFwiPiR7ZGlzcGxheVRleHR9PC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIneWni+WMluW6lemDqOWvvOiIquagj1xuICAgKi9cbiAgcHVibGljIGluaXRpYWxpemUoY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgIC8vIOWcqOS8oOWFpeeahOWuueWZqO+8iOmAmuW4uOW3suaYryAuYm90dG9tLW5hdiDljIXoo7nlhYPntKDvvInlhoXnm7TmjqXmuLLmn5Plr7zoiKrpobnvvIzpgb/lhY3ltYzlpZcgLmJvdHRvbS1uYXZcbiAgICBjb250YWluZXIuaW5uZXJIVE1MID0gdGhpcy5jb25maWcuaXRlbXMubWFwKGl0ZW0gPT4gdGhpcy5jcmVhdGVOYXZJdGVtSFRNTChpdGVtKSkuam9pbignJyk7XG4gICAgdGhpcy5iaW5kRXZlbnRzKCk7XG4gIH1cblxuICAvKipcbiAgICog57uR5a6a5LqL5Lu255uR5ZCs5ZmoXG4gICAqL1xuICBwcml2YXRlIGJpbmRFdmVudHMoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmNvbnRhaW5lcikgcmV0dXJuO1xuXG4gICAgY29uc3QgbmF2SXRlbXMgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuYm90dG9tLW5hdi1pdGVtJyk7XG4gICAgbmF2SXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG5hdklkID0gaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtbmF2Jyk7XG4gICAgICAgIGNvbnN0IGNvbmZpZ0l0ZW0gPSB0aGlzLmNvbmZpZy5pdGVtcy5maW5kKGkgPT4gaS5pZCA9PT0gbmF2SWQpO1xuXG4gICAgICAgIGlmIChjb25maWdJdGVtPy5vbkNsaWNrKSB7XG4gICAgICAgICAgY29uZmlnSXRlbS5vbkNsaWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8g5LiN5Zyo5q2k5aSE55u05o6l5YiH5o2iIGFjdGl2Ze+8jOeUsemhtemdouWIh+aNouWujOaIkOWQjuiwg+eUqCBzZXRBY3RpdmVJdGVt77yM56Gu5L+d6Z+z5pWI5pKt5pS+6aG65bqP5LiA6Ie0XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDorr7nva7mtLvot4PnmoTlr7zoiKrpoblcbiAgICovXG4gIHB1YmxpYyBzZXRBY3RpdmVJdGVtKGl0ZW1JZDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmNvbnRhaW5lcikgcmV0dXJuO1xuXG4gICAgY29uc3QgbmF2SXRlbXMgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuYm90dG9tLW5hdi1pdGVtJyk7XG4gICAgbmF2SXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIGNvbnN0IG5hdklkID0gaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtbmF2Jyk7XG4gICAgICBpZiAobmF2SWQgPT09IGl0ZW1JZCkge1xuICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIOabtOaWsOmFjee9ruS4reeahOa0u+i3g+eKtuaAgVxuICAgIHRoaXMuY29uZmlnLml0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICBpdGVtLmlzQWN0aXZlID0gaXRlbS5pZCA9PT0gaXRlbUlkO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOabtOaWsOWvvOiIqumhuVxuICAgKi9cbiAgcHVibGljIHVwZGF0ZUl0ZW1zKGl0ZW1zOiBCb3R0b21OYXZJdGVtW10pOiB2b2lkIHtcbiAgICB0aGlzLmNvbmZpZy5pdGVtcyA9IGl0ZW1zO1xuICAgIGlmICh0aGlzLmNvbnRhaW5lcikge1xuICAgICAgLy8g55u05o6l5Zyo5a655Zmo5YaF5pu05paw5a+86Iiq6aG577yM6YG/5YWN55Sf5oiQ5bWM5aWX55qEIC5ib3R0b20tbmF2XG4gICAgICB0aGlzLmNvbnRhaW5lci5pbm5lckhUTUwgPSB0aGlzLmNvbmZpZy5pdGVtcy5tYXAoaXRlbSA9PiB0aGlzLmNyZWF0ZU5hdkl0ZW1IVE1MKGl0ZW0pKS5qb2luKCcnKTtcbiAgICAgIHRoaXMuYmluZEV2ZW50cygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDmmL7npLrlupXpg6jlr7zoiKrmoI9cbiAgICovXG4gIHB1YmxpYyBzaG93KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNvbnRhaW5lcikge1xuICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOmakOiXj+W6lemDqOWvvOiIquagj1xuICAgKi9cbiAgcHVibGljIGhpZGUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY29udGFpbmVyKSB7XG4gICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDplIDmr4HlupXpg6jlr7zoiKrmoI9cbiAgICovXG4gIHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNvbnRhaW5lcikge1xuICAgICAgdGhpcy5jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgfVxuICAgIHRoaXMuY29udGFpbmVyID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5blvZPliY3phY3nva5cbiAgICovXG4gIHB1YmxpYyBnZXRDb25maWcoKTogQm90dG9tTmF2Q29uZmlnIHtcbiAgICByZXR1cm4geyAuLi50aGlzLmNvbmZpZyB9O1xuICB9XG5cbiAgLyoqXG4gICAqIOiuvue9ri/lkIjlubbnu5/kuIDmlofmoYjmmKDlsITvvIjmjIkgaXRlbS5pZO+8iVxuICAgKiDkvKDlhaXlkI7lsIbopobnm5blhoXnva7pu5jorqTmlofmoYhcbiAgICovXG4gIHB1YmxpYyBzZXRUZXh0cyh0ZXh0czogUmVjb3JkPHN0cmluZywgc3RyaW5nPik6IHZvaWQge1xuICAgIHRoaXMuY29uZmlnLnRleHRzID0geyAuLi4odGhpcy5jb25maWcudGV4dHMgfHwge30pLCAuLi50ZXh0cyB9O1xuICAgIGlmICh0aGlzLmNvbnRhaW5lcikge1xuICAgICAgLy8g55u05o6l5Zyo5a655Zmo5YaF6YeN5paw5riy5p+T77yM5L+d5oyB5LqL5Lu257uR5a6aXG4gICAgICB0aGlzLmNvbnRhaW5lci5pbm5lckhUTUwgPSB0aGlzLmNvbmZpZy5pdGVtcy5tYXAoaXRlbSA9PiB0aGlzLmNyZWF0ZU5hdkl0ZW1IVE1MKGl0ZW0pKS5qb2luKCcnKTtcbiAgICAgIHRoaXMuYmluZEV2ZW50cygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlhoXnva7pu5jorqTmlofmoYjooajvvIjlj6/ooqsgY29uZmlnLnRleHRzIOimhueblu+8iVxuICAgKi9cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBERUZBVUxUX1RFWFRTOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgIGZlZWQ6ICfliqjmgIEnLFxuICAgIG1lc3NhZ2VzOiAn5raI5oGvJyxcbiAgICBwcm9maWxlOiAn5oiR55qEJyxcbiAgfTtcblxuICAvKipcbiAgICog5bel5Y6C77ya5Yib5bu66buY6K6k6aG65bqP55qE5a+86Iiq6aG577yIZmVlZCDihpIgbWVzc2FnZXMg4oaSIHByb2ZpbGXvvIlcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgY3JlYXRlRGVmYXVsdE5hdkl0ZW1zKFxuICAgIGFjdGl2ZTogJ2ZlZWQnIHwgJ21lc3NhZ2VzJyB8ICdwcm9maWxlJyxcbiAgICBoYW5kbGVyczogUGFydGlhbDxSZWNvcmQ8J2ZlZWQnIHwgJ21lc3NhZ2VzJyB8ICdwcm9maWxlJywgKCkgPT4gdm9pZD4+ID0ge31cbiAgKTogQm90dG9tTmF2SXRlbVtdIHtcbiAgICBjb25zdCBvcmRlcjogQXJyYXk8J2ZlZWQnIHwgJ21lc3NhZ2VzJyB8ICdwcm9maWxlJz4gPSBbJ2ZlZWQnLCAnbWVzc2FnZXMnLCAncHJvZmlsZSddO1xuICAgIHJldHVybiBvcmRlci5tYXAoaWQgPT4gKHtcbiAgICAgIGlkLFxuICAgICAgaWNvbkNsYXNzOiAnbmF2LWljb24nLFxuICAgICAgaXNBY3RpdmU6IGlkID09PSBhY3RpdmUsXG4gICAgICBvbkNsaWNrOiBoYW5kbGVyc1tpZF0sXG4gICAgfSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIOW3peWOgu+8muWcqOaMh+WumuWuueWZqOWGheaMgui9vem7mOiupOW6lemDqOWvvOiIquW5tui/lOWbnuWunuS+i1xuICAgKiDms6jmhI/vvJpjb250YWluZXIg5bqU5Li6IC5ib3R0b20tbmF2IOWuueWZqFxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBtb3VudERlZmF1bHQoXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICBhY3RpdmU6ICdmZWVkJyB8ICdtZXNzYWdlcycgfCAncHJvZmlsZScsXG4gICAgaGFuZGxlcnM6IFBhcnRpYWw8UmVjb3JkPCdmZWVkJyB8ICdtZXNzYWdlcycgfCAncHJvZmlsZScsICgpID0+IHZvaWQ+PiA9IHt9LFxuICAgIGNvbmZpZzogUGFydGlhbDxCb3R0b21OYXZDb25maWc+ID0ge31cbiAgKTogQm90dG9tTmF2aWdhdGlvbiB7XG4gICAgY29uc3QgaXRlbXMgPSBCb3R0b21OYXZpZ2F0aW9uLmNyZWF0ZURlZmF1bHROYXZJdGVtcyhhY3RpdmUsIGhhbmRsZXJzKTtcbiAgICBjb25zdCBuYXYgPSBuZXcgQm90dG9tTmF2aWdhdGlvbih7IGl0ZW1zLCAuLi5jb25maWcgfSk7XG4gICAgbmF2LmluaXRpYWxpemUoY29udGFpbmVyKTtcbiAgICByZXR1cm4gbmF2O1xuICB9XG5cbiAgLyoqXG4gICAqIOino+aekOWxleekuuaWh+ahiO+8muS8mOWFiCB0ZXh0cyDopobnm5bvvJvlhbbmrKHlhoXnva7pu5jorqTvvJvmnIDlkI7kvb/nlKggaXRlbS50ZXh0IOaIliBpZCDlhZzlupVcbiAgICovXG4gIHByaXZhdGUgcmVzb2x2ZVRleHQoaXRlbTogQm90dG9tTmF2SXRlbSk6IHN0cmluZyB7XG4gICAgY29uc3Qga2V5ID0gaXRlbS5pZDtcbiAgICBjb25zdCBjdXN0b21NYXAgPSB0aGlzLmNvbmZpZy50ZXh0cyB8fCB7fTtcbiAgICBpZiAoY3VzdG9tTWFwICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChjdXN0b21NYXAsIGtleSkpIHtcbiAgICAgIHJldHVybiBjdXN0b21NYXBba2V5XSE7XG4gICAgfVxuICAgIGlmICh0aGlzLmNvbmZpZy51c2VEZWZhdWx0VGV4dHMgIT09IGZhbHNlICYmIEJvdHRvbU5hdmlnYXRpb24uREVGQVVMVF9URVhUU1trZXldKSB7XG4gICAgICByZXR1cm4gQm90dG9tTmF2aWdhdGlvbi5ERUZBVUxUX1RFWFRTW2tleV07XG4gICAgfVxuICAgIHJldHVybiBpdGVtLnRleHQgfHwgdGhpcy5mYWxsYmFja0xhYmVsRnJvbUlkKGtleSk7XG4gIH1cblxuICAvKipcbiAgICog5LuOIGlkIOaOqOaWreWFnOW6leagh+etvu+8iOeugOWNlei/lOWbniBpZO+8m+WmgumcgOabtOWPi+WlveWPr+WcqOatpOaJqeWxle+8iVxuICAgKi9cbiAgcHJpdmF0ZSBmYWxsYmFja0xhYmVsRnJvbUlkKGlkOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBpZCB8fCAnJztcbiAgfVxuXG4gIC8qKlxuICAgKiDmm7TmlrDphY3nva5cbiAgICovXG4gIHB1YmxpYyB1cGRhdGVDb25maWcobmV3Q29uZmlnOiBQYXJ0aWFsPEJvdHRvbU5hdkNvbmZpZz4pOiB2b2lkIHtcbiAgICB0aGlzLmNvbmZpZyA9IHsgLi4udGhpcy5jb25maWcsIC4uLm5ld0NvbmZpZyB9O1xuXG4gICAgaWYgKHRoaXMuY29udGFpbmVyKSB7XG4gICAgICAvLyDph43mlrDliJ3lp4vljJZcbiAgICAgIHRoaXMuZGVzdHJveSgpO1xuICAgICAgdGhpcy5pbml0aWFsaXplKHRoaXMuY29udGFpbmVyKTtcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/core/BottomNavigation.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/core/ErrorStatsManager.ts": 
  /*!*************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/core/ErrorStatsManager.ts ***!
  \*************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ErrorStatsManager: () => (/* binding */ ErrorStatsManager)\n/* harmony export */ });\n/**\n * 错误统计管理器\n */\nclass ErrorStatsManager {\n    errorCounts = new Map();\n    MAX_ERROR_COUNT = 10;\n    /**\n     * 增加错误计数\n     * @param errorType 错误类型\n     */\n    increment(errorType) {\n        const currentCount = this.errorCounts.get(errorType) || 0;\n        this.errorCounts.set(errorType, currentCount + 1);\n        // 如果错误次数过多，记录警告\n        if (currentCount + 1 >= this.MAX_ERROR_COUNT) {\n            console.warn(`错误类型 "${errorType}" 发生次数过多 (${currentCount + 1}次)，请检查代码逻辑`);\n        }\n    }\n    /**\n     * 获取错误统计\n     * @returns 错误统计对象\n     */\n    getStats() {\n        const stats = {};\n        this.errorCounts.forEach((count, errorType) => {\n            stats[errorType] = count;\n        });\n        return stats;\n    }\n    /**\n     * 重置错误统计\n     */\n    reset() {\n        this.errorCounts.clear();\n    }\n    /**\n     * 获取总错误数\n     * @returns 总错误数\n     */\n    getTotalErrors() {\n        let total = 0;\n        this.errorCounts.forEach(count => {\n            total += count;\n        });\n        return total;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY29yZS9FcnJvclN0YXRzTWFuYWdlci50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7O0dBRUc7QUFDSSxNQUFNLGlCQUFpQjtJQUNwQixXQUFXLEdBQXdCLElBQUksR0FBRyxFQUFFLENBQUM7SUFDcEMsZUFBZSxHQUFHLEVBQUUsQ0FBQztJQUV0Qzs7O09BR0c7SUFDSSxTQUFTLENBQUMsU0FBaUI7UUFDaEMsTUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzFELElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxZQUFZLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFFbEQsZ0JBQWdCO1FBQ2hCLElBQUksWUFBWSxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7WUFDN0MsT0FBTyxDQUFDLElBQUksQ0FBQyxTQUFTLFNBQVMsYUFBYSxZQUFZLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUM1RSxDQUFDO0lBQ0gsQ0FBQztJQUVEOzs7T0FHRztJQUNJLFFBQVE7UUFDYixNQUFNLEtBQUssR0FBMkIsRUFBRSxDQUFDO1FBQ3pDLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxFQUFFLFNBQVMsRUFBRSxFQUFFO1lBQzVDLEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxLQUFLLENBQUM7UUFDM0IsQ0FBQyxDQUFDLENBQUM7UUFDSCxPQUFPLEtBQUssQ0FBQztJQUNmLENBQUM7SUFFRDs7T0FFRztJQUNJLEtBQUs7UUFDVixJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQzNCLENBQUM7SUFFRDs7O09BR0c7SUFDSSxjQUFjO1FBQ25CLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQztRQUNkLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFO1lBQy9CLEtBQUssSUFBSSxLQUFLLENBQUM7UUFDakIsQ0FBQyxDQUFDLENBQUM7UUFDSCxPQUFPLEtBQUssQ0FBQztJQUNmLENBQUM7Q0FDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY29yZS9FcnJvclN0YXRzTWFuYWdlci50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIOmUmeivr+e7n+iuoeeuoeeQhuWZqFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEVycm9yU3RhdHNNYW5hZ2VyIHtcclxuICBwcml2YXRlIGVycm9yQ291bnRzOiBNYXA8c3RyaW5nLCBudW1iZXI+ID0gbmV3IE1hcCgpO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgTUFYX0VSUk9SX0NPVU5UID0gMTA7XHJcblxyXG4gIC8qKlxyXG4gICAqIOWinuWKoOmUmeivr+iuoeaVsFxyXG4gICAqIEBwYXJhbSBlcnJvclR5cGUg6ZSZ6K+v57G75Z6LXHJcbiAgICovXHJcbiAgcHVibGljIGluY3JlbWVudChlcnJvclR5cGU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgY29uc3QgY3VycmVudENvdW50ID0gdGhpcy5lcnJvckNvdW50cy5nZXQoZXJyb3JUeXBlKSB8fCAwO1xyXG4gICAgdGhpcy5lcnJvckNvdW50cy5zZXQoZXJyb3JUeXBlLCBjdXJyZW50Q291bnQgKyAxKTtcclxuXHJcbiAgICAvLyDlpoLmnpzplJnor6/mrKHmlbDov4flpJrvvIzorrDlvZXorablkYpcclxuICAgIGlmIChjdXJyZW50Q291bnQgKyAxID49IHRoaXMuTUFYX0VSUk9SX0NPVU5UKSB7XHJcbiAgICAgIGNvbnNvbGUud2Fybihg6ZSZ6K+v57G75Z6LIFwiJHtlcnJvclR5cGV9XCIg5Y+R55Sf5qyh5pWw6L+H5aSaICgke2N1cnJlbnRDb3VudCArIDF95qyhKe+8jOivt+ajgOafpeS7o+eggemAu+i+kWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W6ZSZ6K+v57uf6K6hXHJcbiAgICogQHJldHVybnMg6ZSZ6K+v57uf6K6h5a+56LGhXHJcbiAgICovXHJcbiAgcHVibGljIGdldFN0YXRzKCk6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4ge1xyXG4gICAgY29uc3Qgc3RhdHM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcclxuICAgIHRoaXMuZXJyb3JDb3VudHMuZm9yRWFjaCgoY291bnQsIGVycm9yVHlwZSkgPT4ge1xyXG4gICAgICBzdGF0c1tlcnJvclR5cGVdID0gY291bnQ7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBzdGF0cztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmHjee9rumUmeivr+e7n+iuoVxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcclxuICAgIHRoaXMuZXJyb3JDb3VudHMuY2xlYXIoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluaAu+mUmeivr+aVsFxyXG4gICAqIEByZXR1cm5zIOaAu+mUmeivr+aVsFxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRUb3RhbEVycm9ycygpOiBudW1iZXIge1xyXG4gICAgbGV0IHRvdGFsID0gMDtcclxuICAgIHRoaXMuZXJyb3JDb3VudHMuZm9yRWFjaChjb3VudCA9PiB7XHJcbiAgICAgIHRvdGFsICs9IGNvdW50O1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdG90YWw7XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/core/ErrorStatsManager.ts\n\n}');
  },
  "./src/多云熊/备份/给rovo的/modules/core/ScaleManager.ts": 
  /*!********************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/core/ScaleManager.ts ***!
  \********************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ScaleManager: () => (/* binding */ ScaleManager)\n/* harmony export */ });\n/**\n * 界面缩放管理器类\n * 负责管理界面的整体缩放功能\n */\nclass ScaleManager {\n    currentScale = 1.0;\n    MIN_SCALE = 0.8;\n    MAX_SCALE = 1.5;\n    STEP = 0.1;\n    STORAGE_KEY = 'ui-scale';\n    constructor() {\n        this.loadScale();\n        this.initializeScaleControl();\n    }\n    /**\n     * 设置缩放比例\n     * @param scale 缩放比例 (0.8 - 1.5)\n     */\n    setScale(scale) {\n        // 限制缩放范围\n        scale = Math.max(this.MIN_SCALE, Math.min(this.MAX_SCALE, scale));\n        scale = Math.round(scale * 10) / 10; // 保留一位小数\n        this.currentScale = scale;\n        // 应用缩放到CSS变量\n        document.documentElement.style.setProperty('--scale-factor', scale.toString());\n        // 更新滑杆进度条\n        this.updateSliderProgress(scale);\n        // 更新显示值\n        this.updateScaleDisplay(scale);\n        // 保存到本地存储\n        this.saveScale();\n        console.log(`🔍 界面缩放已设置为: ${Math.round(scale * 100)}%`);\n    }\n    /**\n     * 获取当前缩放比例\n     */\n    getCurrentScale() {\n        return this.currentScale;\n    }\n    /**\n     * 从本地存储加载缩放设置\n     */\n    loadScale() {\n        try {\n            const savedScale = localStorage.getItem(this.STORAGE_KEY);\n            if (savedScale) {\n                const scale = parseFloat(savedScale);\n                if (!isNaN(scale) && scale >= this.MIN_SCALE && scale <= this.MAX_SCALE) {\n                    this.setScale(scale);\n                    return;\n                }\n            }\n        }\n        catch (error) {\n            console.warn('加载缩放设置失败:', error);\n        }\n        // 使用默认值\n        this.setScale(1.0);\n    }\n    /**\n     * 保存缩放设置到本地存储\n     */\n    saveScale() {\n        try {\n            localStorage.setItem(this.STORAGE_KEY, this.currentScale.toString());\n        }\n        catch (error) {\n            console.warn('保存缩放设置失败:', error);\n        }\n    }\n    /**\n     * 初始化缩放控件\n     */\n    initializeScaleControl() {\n        // 等待DOM加载完成后初始化\n        if (document.readyState === 'loading') {\n            document.addEventListener('DOMContentLoaded', () => this.setupScaleControl());\n        }\n        else {\n            this.setupScaleControl();\n        }\n    }\n    /**\n     * 设置缩放控件事件监听\n     */\n    setupScaleControl() {\n        const slider = document.getElementById('scaleSlider');\n        if (!slider) {\n            // 如果控件还没有加载，延迟重试\n            setTimeout(() => this.setupScaleControl(), 100);\n            return;\n        }\n        // 设置滑杆初始值\n        slider.value = this.currentScale.toString();\n        this.updateSliderProgress(this.currentScale);\n        this.updateScaleDisplay(this.currentScale);\n        // 监听滑杆变化\n        slider.addEventListener('input', this.handleSliderInput);\n        // 监听滑杆释放（用于触觉反馈）\n        slider.addEventListener('change', this.handleSliderChange);\n    }\n    /**\n     * 更新滑杆进度条显示\n     */\n    updateSliderProgress(scale) {\n        const progress = ((scale - this.MIN_SCALE) / (this.MAX_SCALE - this.MIN_SCALE)) * 100;\n        const slider = document.getElementById('scaleSlider');\n        if (slider) {\n            slider.style.setProperty('--progress', `${progress}%`);\n        }\n    }\n    /**\n     * 更新缩放值显示\n     */\n    updateScaleDisplay(scale) {\n        const scaleValue = document.getElementById('scaleValue');\n        if (scaleValue) {\n            scaleValue.textContent = `${Math.round(scale * 100)}%`;\n        }\n    }\n    /**\n     * 重置为默认缩放\n     */\n    resetScale() {\n        this.setScale(1.0);\n    }\n    /**\n     * 销毁缩放管理器\n     */\n    destroy() {\n        // 清理事件监听器等资源\n        const slider = document.getElementById('scaleSlider');\n        if (slider) {\n            // 移除事件监听器（需要保存原始函数引用才能正确移除）\n            slider.removeEventListener('input', this.handleSliderInput);\n            slider.removeEventListener('change', this.handleSliderChange);\n        }\n    }\n    /**\n     * 处理滑杆输入事件\n     */\n    handleSliderInput = (event) => {\n        const target = event.target;\n        const scale = parseFloat(target.value);\n        this.setScale(scale);\n    };\n    /**\n     * 处理滑杆变化事件\n     */\n    handleSliderChange = () => {\n        // 可以在这里添加触觉反馈或音效\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY29yZS9TY2FsZU1hbmFnZXIudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7R0FHRztBQUNJLE1BQU0sWUFBWTtJQUNmLFlBQVksR0FBVyxHQUFHLENBQUM7SUFDbEIsU0FBUyxHQUFHLEdBQUcsQ0FBQztJQUNoQixTQUFTLEdBQUcsR0FBRyxDQUFDO0lBQ2hCLElBQUksR0FBRyxHQUFHLENBQUM7SUFDWCxXQUFXLEdBQUcsVUFBVSxDQUFDO0lBRTFDO1FBQ0UsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO0lBQ2hDLENBQUM7SUFFRDs7O09BR0c7SUFDSSxRQUFRLENBQUMsS0FBYTtRQUMzQixTQUFTO1FBQ1QsS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUNsRSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsU0FBUztRQUU5QyxJQUFJLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztRQUUxQixhQUFhO1FBQ2IsUUFBUSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLGdCQUFnQixFQUFFLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO1FBRS9FLFVBQVU7UUFDVixJQUFJLENBQUMsb0JBQW9CLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFakMsUUFBUTtRQUNSLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUUvQixVQUFVO1FBQ1YsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBRWpCLE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLElBQUksQ0FBQyxL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Q0FBQztRQUN2QyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3ZCLENBQUMsQ0FBQztJQUVGOztPQUVHO0lBQ0ssa0JBQWtCLEdBQUcsR0FBUyxFQUFFO1FBQ3RDLGlCQUFpQjtJQUNuQixDQUFDLENBQUM7Q0FDSCIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY29yZS9TY2FsZU1hbmFnZXIudHM/Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiDnlYzpnaLnvKnmlL7nrqHnkIblmajnsbtcclxuICog6LSf6LSj566h55CG55WM6Z2i55qE5pW05L2T57yp5pS+5Yqf6IO9XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU2NhbGVNYW5hZ2VyIHtcclxuICBwcml2YXRlIGN1cnJlbnRTY2FsZTogbnVtYmVyID0gMS4wO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgTUlOX1NDQUxFID0gMC44O1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgTUFYX1NDQUxFID0gMS41O1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgU1RFUCA9IDAuMTtcclxuICBwcml2YXRlIHJlYWRvbmx5IFNUT1JBR0VfS0VZID0gJ3VpLXNjYWxlJztcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmxvYWRTY2FsZSgpO1xyXG4gICAgdGhpcy5pbml0aWFsaXplU2NhbGVDb250cm9sKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDorr7nva7nvKnmlL7mr5TkvotcclxuICAgKiBAcGFyYW0gc2NhbGUg57yp5pS+5q+U5L6LICgwLjggLSAxLjUpXHJcbiAgICovXHJcbiAgcHVibGljIHNldFNjYWxlKHNjYWxlOiBudW1iZXIpOiB2b2lkIHtcclxuICAgIC8vIOmZkOWItue8qeaUvuiMg+WbtFxyXG4gICAgc2NhbGUgPSBNYXRoLm1heCh0aGlzLk1JTl9TQ0FMRSwgTWF0aC5taW4odGhpcy5NQVhfU0NBTEUsIHNjYWxlKSk7XHJcbiAgICBzY2FsZSA9IE1hdGgucm91bmQoc2NhbGUgKiAxMCkgLyAxMDsgLy8g5L+d55WZ5LiA5L2N5bCP5pWwXHJcblxyXG4gICAgdGhpcy5jdXJyZW50U2NhbGUgPSBzY2FsZTtcclxuXHJcbiAgICAvLyDlupTnlKjnvKnmlL7liLBDU1Plj5jph49cclxuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zY2FsZS1mYWN0b3InLCBzY2FsZS50b1N0cmluZygpKTtcclxuXHJcbiAgICAvLyDmm7TmlrDmu5HmnYbov5vluqbmnaFcclxuICAgIHRoaXMudXBkYXRlU2xpZGVyUHJvZ3Jlc3Moc2NhbGUpO1xyXG5cclxuICAgIC8vIOabtOaWsOaYvuekuuWAvFxyXG4gICAgdGhpcy51cGRhdGVTY2FsZURpc3BsYXkoc2NhbGUpO1xyXG5cclxuICAgIC8vIOS/neWtmOWIsOacrOWcsOWtmOWCqFxyXG4gICAgdGhpcy5zYXZlU2NhbGUoKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhg8J+UjSDnlYzpnaLnvKnmlL7lt7Lorr7nva7kuLo6ICR7TWF0aC5yb3VuZChzY2FsZSAqIDEwMCl9JWApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5b2T5YmN57yp5pS+5q+U5L6LXHJcbiAgICovXHJcbiAgcHVibGljIGdldEN1cnJlbnRTY2FsZSgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuY3VycmVudFNjYWxlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5LuO5pys5Zyw5a2Y5YKo5Yqg6L2957yp5pS+6K6+572uXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBsb2FkU2NhbGUoKTogdm9pZCB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBzYXZlZFNjYWxlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5TVE9SQUdFX0tFWSk7XHJcbiAgICAgIGlmIChzYXZlZFNjYWxlKSB7XHJcbiAgICAgICAgY29uc3Qgc2NhbGUgPSBwYXJzZUZsb2F0KHNhdmVkU2NhbGUpO1xyXG4gICAgICAgIGlmICghaXNOYU4oc2NhbGUpICYmIHNjYWxlID49IHRoaXMuTUlOX1NDQUxFICYmIHNjYWxlIDw9IHRoaXMuTUFYX1NDQUxFKSB7XHJcbiAgICAgICAgICB0aGlzLnNldFNjYWxlKHNjYWxlKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUud2Fybign5Yqg6L2957yp5pS+6K6+572u5aSx6LSlOicsIGVycm9yKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDkvb/nlKjpu5jorqTlgLxcclxuICAgIHRoaXMuc2V0U2NhbGUoMS4wKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOS/neWtmOe8qeaUvuiuvue9ruWIsOacrOWcsOWtmOWCqFxyXG4gICAqL1xyXG4gIHByaXZhdGUgc2F2ZVNjYWxlKCk6IHZvaWQge1xyXG4gICAgdHJ5IHtcclxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5TVE9SQUdFX0tFWSwgdGhpcy5jdXJyZW50U2NhbGUudG9TdHJpbmcoKSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ+S/neWtmOe8qeaUvuiuvue9ruWksei0pTonLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliJ3lp4vljJbnvKnmlL7mjqfku7ZcclxuICAgKi9cclxuICBwcml2YXRlIGluaXRpYWxpemVTY2FsZUNvbnRyb2woKTogdm9pZCB7XHJcbiAgICAvLyDnrYnlvoVET03liqDovb3lrozmiJDlkI7liJ3lp4vljJZcclxuICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnbG9hZGluZycpIHtcclxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHRoaXMuc2V0dXBTY2FsZUNvbnRyb2woKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNldHVwU2NhbGVDb250cm9sKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDorr7nva7nvKnmlL7mjqfku7bkuovku7bnm5HlkKxcclxuICAgKi9cclxuICBwcml2YXRlIHNldHVwU2NhbGVDb250cm9sKCk6IHZvaWQge1xyXG4gICAgY29uc3Qgc2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjYWxlU2xpZGVyJykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgIGlmICghc2xpZGVyKSB7XHJcbiAgICAgIC8vIOWmguaenOaOp+S7tui/mOayoeacieWKoOi9ve+8jOW7tui/n+mHjeivlVxyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2V0dXBTY2FsZUNvbnRyb2woKSwgMTAwKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOiuvue9rua7keadhuWIneWni+WAvFxyXG4gICAgc2xpZGVyLnZhbHVlID0gdGhpcy5jdXJyZW50U2NhbGUudG9TdHJpbmcoKTtcclxuICAgIHRoaXMudXBkYXRlU2xpZGVyUHJvZ3Jlc3ModGhpcy5jdXJyZW50U2NhbGUpO1xyXG4gICAgdGhpcy51cGRhdGVTY2FsZURpc3BsYXkodGhpcy5jdXJyZW50U2NhbGUpO1xyXG5cclxuICAgIC8vIOebkeWQrOa7keadhuWPmOWMllxyXG4gICAgc2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdGhpcy5oYW5kbGVTbGlkZXJJbnB1dCk7XHJcblxyXG4gICAgLy8g55uR5ZCs5ruR5p2G6YeK5pS+77yI55So5LqO6Kem6KeJ5Y+N6aaI77yJXHJcbiAgICBzbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5oYW5kbGVTbGlkZXJDaGFuZ2UpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5pu05paw5ruR5p2G6L+b5bqm5p2h5pi+56S6XHJcbiAgICovXHJcbiAgcHJpdmF0ZSB1cGRhdGVTbGlkZXJQcm9ncmVzcyhzY2FsZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICBjb25zdCBwcm9ncmVzcyA9ICgoc2NhbGUgLSB0aGlzLk1JTl9TQ0FMRSkgLyAodGhpcy5NQVhfU0NBTEUgLSB0aGlzLk1JTl9TQ0FMRSkpICogMTAwO1xyXG4gICAgY29uc3Qgc2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjYWxlU2xpZGVyJykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgIGlmIChzbGlkZXIpIHtcclxuICAgICAgc2xpZGVyLnN0eWxlLnNldFByb3BlcnR5KCctLXByb2dyZXNzJywgYCR7cHJvZ3Jlc3N9JWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5pu05paw57yp5pS+5YC85pi+56S6XHJcbiAgICovXHJcbiAgcHJpdmF0ZSB1cGRhdGVTY2FsZURpc3BsYXkoc2NhbGU6IG51bWJlcik6IHZvaWQge1xyXG4gICAgY29uc3Qgc2NhbGVWYWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY2FsZVZhbHVlJyk7XHJcbiAgICBpZiAoc2NhbGVWYWx1ZSkge1xyXG4gICAgICBzY2FsZVZhbHVlLnRleHRDb250ZW50ID0gYCR7TWF0aC5yb3VuZChzY2FsZSAqIDEwMCl9JWA7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDph43nva7kuLrpu5jorqTnvKnmlL5cclxuICAgKi9cclxuICBwdWJsaWMgcmVzZXRTY2FsZSgpOiB2b2lkIHtcclxuICAgIHRoaXMuc2V0U2NhbGUoMS4wKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmUgOavgee8qeaUvueuoeeQhuWZqFxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xyXG4gICAgLy8g5riF55CG5LqL5Lu255uR5ZCs5Zmo562J6LWE5rqQXHJcbiAgICBjb25zdCBzbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NhbGVTbGlkZXInKTtcclxuICAgIGlmIChzbGlkZXIpIHtcclxuICAgICAgLy8g56e76Zmk5LqL5Lu255uR5ZCs5Zmo77yI6ZyA6KaB5L+d5a2Y5Y6f5aeL5Ye95pWw5byV55So5omN6IO95q2j56Gu56e76Zmk77yJXHJcbiAgICAgIHNsaWRlci5yZW1vdmVFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMuaGFuZGxlU2xpZGVySW5wdXQpO1xyXG4gICAgICBzbGlkZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5oYW5kbGVTbGlkZXJDaGFuZ2UpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5aSE55CG5ruR5p2G6L6T5YWl5LqL5Lu2XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBoYW5kbGVTbGlkZXJJbnB1dCA9IChldmVudDogRXZlbnQpOiB2b2lkID0+IHtcclxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgY29uc3Qgc2NhbGUgPSBwYXJzZUZsb2F0KHRhcmdldC52YWx1ZSk7XHJcbiAgICB0aGlzLnNldFNjYWxlKHNjYWxlKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiDlpITnkIbmu5HmnYblj5jljJbkuovku7ZcclxuICAgKi9cclxuICBwcml2YXRlIGhhbmRsZVNsaWRlckNoYW5nZSA9ICgpOiB2b2lkID0+IHtcclxuICAgIC8vIOWPr+S7peWcqOi/memHjOa3u+WKoOinpuinieWPjemmiOaIlumfs+aViFxyXG4gIH07XHJcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/core/ScaleManager.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/core/SoundManager.ts": 
  /*!********************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/core/SoundManager.ts ***!
  \********************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SoundManager: () => (/* binding */ SoundManager)\n/* harmony export */ });\n/**\n * 音效管理器类\n * 预加载所有音效文件，提供统一的音效播放接口，处理音效播放失败的情况\n */\nclass SoundManager {\n    sounds = new Map();\n    isEnabled = true;\n    volume = 1.0;\n    loadingPromises = new Map();\n    transferResponses = new Map();\n    // 音效配置\n    SOUND_CONFIG = {\n        click: 'https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3',\n        send: 'https://assets.mixkit.co/active_storage/sfx/2570/2570-preview.mp3',\n        emoji: 'https://files.catbox.moe/gb0so5.mp3',\n        bubble: 'https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3',\n        avatar: 'https://assets.mixkit.co/active_storage/sfx/2575/2575-preview.mp3',\n        notification: 'https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3',\n        typing: 'https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3',\n        error: 'https://assets.mixkit.co/active_storage/sfx/2577/2577-preview.mp3',\n        newMessage: 'https://files.catbox.moe/b4amzm.mp3', // 新消息渲染音效\n    };\n    constructor() {\n        this.preloadAllSounds();\n        this.loadUserPreferences();\n    }\n    /**\n     * 预加载所有音效文件\n     */\n    async preloadAllSounds() {\n        const loadPromises = [];\n        for (const [soundType, url] of Object.entries(this.SOUND_CONFIG)) {\n            const loadPromise = this.loadSound(soundType, url);\n            this.loadingPromises.set(soundType, loadPromise);\n            loadPromises.push(loadPromise);\n        }\n        try {\n            await Promise.all(loadPromises);\n            console.log('所有音效预加载完成');\n        }\n        catch (error) {\n            console.warn('部分音效预加载失败:', error);\n        }\n    }\n    /**\n     * 加载单个音效\n     */\n    async loadSound(soundType, url) {\n        return new Promise((resolve, reject) => {\n            const audio = new Audio(url);\n            audio.volume = this.volume;\n            audio.preload = 'auto';\n            const onLoad = () => {\n                this.sounds.set(soundType, audio);\n                audio.removeEventListener('canplaythrough', onLoad);\n                audio.removeEventListener('error', onError);\n                resolve();\n            };\n            const onError = (error) => {\n                console.warn(`音效加载失败: ${soundType} - ${url}`, error);\n                audio.removeEventListener('canplaythrough', onLoad);\n                audio.removeEventListener('error', onError);\n                // 即使加载失败也resolve，避免阻塞其他音效\n                resolve();\n            };\n            audio.addEventListener('canplaythrough', onLoad);\n            audio.addEventListener('error', onError);\n            audio.load();\n        });\n    }\n    /**\n     * 播放音效\n     * @param soundType 音效类型\n     * @param options 播放选项\n     */\n    async playSound(soundType, options = {}) {\n        if (!this.isEnabled) {\n            return;\n        }\n        try {\n            // 等待音效加载完成\n            const loadPromise = this.loadingPromises.get(soundType);\n            if (loadPromise) {\n                await loadPromise;\n            }\n            const sound = this.sounds.get(soundType);\n            if (!sound) {\n                console.warn(`音效不存在: ${soundType}`);\n                return;\n            }\n            // 重置播放位置\n            sound.currentTime = 0;\n            // 设置音量\n            sound.volume = options.volume !== undefined ? options.volume : this.volume;\n            // 设置循环\n            sound.loop = options.loop || false;\n            // 播放音效\n            await sound.play();\n        }\n        catch (error) {\n            console.warn(`音效播放失败: ${soundType}`, error);\n            this.handlePlaybackError(soundType, error);\n        }\n    }\n    /**\n     * 停止音效\n     * @param soundType 音效类型\n     */\n    stopSound(soundType) {\n        const sound = this.sounds.get(soundType);\n        if (sound) {\n            sound.pause();\n            sound.currentTime = 0;\n        }\n    }\n    /**\n     * 停止所有音效\n     */\n    stopAllSounds() {\n        for (const sound of this.sounds.values()) {\n            sound.pause();\n            sound.currentTime = 0;\n        }\n    }\n    /**\n     * 设置全局音量\n     * @param volume 音量 (0-1)\n     */\n    setVolume(volume) {\n        this.volume = Math.max(0, Math.min(1, volume));\n        // 更新所有已加载音效的音量\n        for (const sound of this.sounds.values()) {\n            sound.volume = this.volume;\n        }\n        this.saveUserPreferences();\n    }\n    /**\n     * 获取当前音量\n     */\n    getVolume() {\n        return this.volume;\n    }\n    /**\n     * 启用/禁用音效\n     * @param enabled 是否启用\n     */\n    setEnabled(enabled) {\n        this.isEnabled = enabled;\n        if (!enabled) {\n            this.stopAllSounds();\n        }\n        this.saveUserPreferences();\n    }\n    /**\n     * 获取音效启用状态\n     */\n    isEnabledState() {\n        return this.isEnabled;\n    }\n    /**\n     * 检查音效是否已加载\n     * @param soundType 音效类型\n     */\n    isSoundLoaded(soundType) {\n        return this.sounds.has(soundType);\n    }\n    /**\n     * 获取所有可用的音效类型\n     */\n    getAvailableSounds() {\n        return Object.keys(this.SOUND_CONFIG);\n    }\n    /**\n     * 处理播放错误\n     */\n    handlePlaybackError(soundType, error) {\n        // 记录错误统计\n        const errorKey = `sound_error_${soundType}`;\n        const errorCount = parseInt(localStorage.getItem(errorKey) || '0') + 1;\n        localStorage.setItem(errorKey, errorCount.toString());\n        // 如果错误次数过多，可以考虑禁用该音效\n        if (errorCount > 5) {\n            console.warn(`音效 ${soundType} 错误次数过多，建议检查音频文件`);\n        }\n    }\n    /**\n     * 加载用户偏好设置\n     */\n    loadUserPreferences() {\n        try {\n            // 音效设置使用全局存储，不需要角色隔离\n            const savedVolume = localStorage.getItem('sound_volume');\n            if (savedVolume !== null) {\n                this.volume = parseFloat(savedVolume);\n            }\n            const savedEnabled = localStorage.getItem('sound_enabled');\n            if (savedEnabled !== null) {\n                this.isEnabled = savedEnabled === 'true';\n            }\n        }\n        catch (error) {\n            console.warn('加载音效偏好设置失败:', error);\n        }\n    }\n    /**\n     * 保存用户偏好设置\n     */\n    saveUserPreferences() {\n        try {\n            // 音效设置使用全局存储，不需要角色隔离\n            localStorage.setItem('sound_volume', this.volume.toString());\n            localStorage.setItem('sound_enabled', this.isEnabled.toString());\n        }\n        catch (error) {\n            console.warn('保存音效偏好设置失败:', error);\n        }\n    }\n    /**\n     * 销毁音效管理器\n     */\n    destroy() {\n        this.stopAllSounds();\n        this.sounds.clear();\n        this.loadingPromises.clear();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY29yZS9Tb3VuZE1hbmFnZXIudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7R0FHRztBQUNJLE1BQU0sWUFBWTtJQUNmLE1BQU0sR0FBa0MsSUFBSSxHQUFHLEVBQUUsQ0FBQztJQUNsRCxTQUFTLEdBQVksSUFBSSxDQUFDO0lBQzFCLE1BQU0sR0FBVyxHQUFHLENBQUM7SUFDckIsZUFBZSxHQUErQixJQUFJLEdBQUcsRUFBRSxDQUFDO0lBQ3hELGlCQUFpQixHQUF3QixJQUFJLEdBQUcsRUFBRSxDQUFDO0lBRTNELE9BQU87SUFDVSxZQUFZLEdBQUc7UUFDOUIsS0FBSyxFQUFFLG1FQUFtRTtRQUMxRSxJQUFJLEVBQUUsbUVBQW1FO1FBQ3pFLEtBQUssRUFBRSxxQ0FBcUM7UUFDNUMsTUFBTSxFQUFFLG1FQUFtRTtRQUMzRSxNQUFNLEVBQUUsbUVBQW1FO1FBQzNFLFlBQVksRUFBRSxtRUFBbUU7UUFDakYsTUFBTSxFQUFFLG1FQUFtRTtRQUMzRSxLQUFLLEVBQUUsbUVBQW1FO1FBQzFFLFVBQVUsRUFBRSxxQ0FBcUMsRUFBRSxVQUFVO0tBQzlELENBQUM7SUFFRjtRQUNFLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1FBQ3hCLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO0lBQzdCLENBQUM7SUFFRDs7T0FFRztJQUNLLEtBQUssQ0FBQyxnQkFBZ0I7UUFDNUIsTUFBTSxZQUFZLEdBQW9CLEVBQUUsQ0FBQztRQUV6QyxLQUFLLE1BQU0sQ0FBQyxTQUFTLEVBQUUsR0FBRyxDQUFDLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQztZQUNqRSxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsRUFBRSxHQUFHLENBQUMsQ0FBQztZQUNuRCxJQUFJLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUs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LE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNwQixJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQy9CLENBQUM7Q0FDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY29yZS9Tb3VuZE1hbmFnZXIudHM/Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiDpn7PmlYjnrqHnkIblmajnsbtcclxuICog6aKE5Yqg6L295omA5pyJ6Z+z5pWI5paH5Lu277yM5o+Q5L6b57uf5LiA55qE6Z+z5pWI5pKt5pS+5o6l5Y+j77yM5aSE55CG6Z+z5pWI5pKt5pS+5aSx6LSl55qE5oOF5Ya1XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU291bmRNYW5hZ2VyIHtcclxuICBwcml2YXRlIHNvdW5kczogTWFwPHN0cmluZywgSFRNTEF1ZGlvRWxlbWVudD4gPSBuZXcgTWFwKCk7XHJcbiAgcHJpdmF0ZSBpc0VuYWJsZWQ6IGJvb2xlYW4gPSB0cnVlO1xyXG4gIHByaXZhdGUgdm9sdW1lOiBudW1iZXIgPSAxLjA7XHJcbiAgcHJpdmF0ZSBsb2FkaW5nUHJvbWlzZXM6IE1hcDxzdHJpbmcsIFByb21pc2U8dm9pZD4+ID0gbmV3IE1hcCgpO1xyXG4gIHByaXZhdGUgdHJhbnNmZXJSZXNwb25zZXM6IE1hcDxzdHJpbmcsIHN0cmluZz4gPSBuZXcgTWFwKCk7XHJcblxyXG4gIC8vIOmfs+aViOmFjee9rlxyXG4gIHByaXZhdGUgcmVhZG9ubHkgU09VTkRfQ09ORklHID0ge1xyXG4gICAgY2xpY2s6ICdodHRwczovL2Fzc2V0cy5taXhraXQuY28vYWN0aXZlX3N0b3JhZ2Uvc2Z4LzI1NjgvMjU2OC1wcmV2aWV3Lm1wMycsXHJcbiAgICBzZW5kOiAnaHR0cHM6Ly9hc3NldHMubWl4a2l0LmNvL2FjdGl2ZV9zdG9yYWdlL3NmeC8yNTcwLzI1NzAtcHJldmlldy5tcDMnLFxyXG4gICAgZW1vamk6ICdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvZ2Iwc281Lm1wMycsXHJcbiAgICBidWJibGU6ICdodHRwczovL2Fzc2V0cy5taXhraXQuY28vYWN0aXZlX3N0b3JhZ2Uvc2Z4LzI1NjgvMjU2OC1wcmV2aWV3Lm1wMycsXHJcbiAgICBhdmF0YXI6ICdodHRwczovL2Fzc2V0cy5taXhraXQuY28vYWN0aXZlX3N0b3JhZ2Uvc2Z4LzI1NzUvMjU3NS1wcmV2aWV3Lm1wMycsXHJcbiAgICBub3RpZmljYXRpb246ICdodHRwczovL2Fzc2V0cy5taXhraXQuY28vYWN0aXZlX3N0b3JhZ2Uvc2Z4LzI4NjkvMjg2OS1wcmV2aWV3Lm1wMycsXHJcbiAgICB0eXBpbmc6ICdodHRwczovL2Fzc2V0cy5taXhraXQuY28vYWN0aXZlX3N0b3JhZ2Uvc2Z4LzI1NzEvMjU3MS1wcmV2aWV3Lm1wMycsXHJcbiAgICBlcnJvcjogJ2h0dHBzOi8vYXNzZXRzLm1peGtpdC5jby9hY3RpdmVfc3RvcmFnZS9zZngvMjU3Ny8yNTc3LXByZXZpZXcubXAzJyxcclxuICAgIG5ld01lc3NhZ2U6ICdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvYjRhbXptLm1wMycsIC8vIOaWsOa2iOaBr+a4suafk+mfs+aViFxyXG4gIH07XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5wcmVsb2FkQWxsU291bmRzKCk7XHJcbiAgICB0aGlzLmxvYWRVc2VyUHJlZmVyZW5jZXMoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmihOWKoOi9veaJgOaciemfs+aViOaWh+S7tlxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgcHJlbG9hZEFsbFNvdW5kcygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnN0IGxvYWRQcm9taXNlczogUHJvbWlzZTx2b2lkPltdID0gW107XHJcblxyXG4gICAgZm9yIChjb25zdCBbc291bmRUeXBlLCB1cmxdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuU09VTkRfQ09ORklHKSkge1xyXG4gICAgICBjb25zdCBsb2FkUHJvbWlzZSA9IHRoaXMubG9hZFNvdW5kKHNvdW5kVHlwZSwgdXJsKTtcclxuICAgICAgdGhpcy5sb2FkaW5nUHJvbWlzZXMuc2V0KHNvdW5kVHlwZSwgbG9hZFByb21pc2UpO1xyXG4gICAgICBsb2FkUHJvbWlzZXMucHVzaChsb2FkUHJvbWlzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwobG9hZFByb21pc2VzKTtcclxuICAgICAgY29uc29sZS5sb2coJ+aJgOaciemfs+aViOmihOWKoOi9veWujOaIkCcpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS53YXJuKCfpg6jliIbpn7PmlYjpooTliqDovb3lpLHotKU6JywgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Yqg6L295Y2V5Liq6Z+z5pWIXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBsb2FkU291bmQoc291bmRUeXBlOiBzdHJpbmcsIHVybDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBjb25zdCBhdWRpbyA9IG5ldyBBdWRpbyh1cmwpO1xyXG4gICAgICBhdWRpby52b2x1bWUgPSB0aGlzLnZvbHVtZTtcclxuICAgICAgYXVkaW8ucHJlbG9hZCA9ICdhdXRvJztcclxuXHJcbiAgICAgIGNvbnN0IG9uTG9hZCA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLnNvdW5kcy5zZXQoc291bmRUeXBlLCBhdWRpbyk7XHJcbiAgICAgICAgYXVkaW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2FucGxheXRocm91Z2gnLCBvbkxvYWQpO1xyXG4gICAgICAgIGF1ZGlvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgb25FcnJvcik7XHJcbiAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3Qgb25FcnJvciA9IChlcnJvcjogRXZlbnQpID0+IHtcclxuICAgICAgICBjb25zb2xlLndhcm4oYOmfs+aViOWKoOi9veWksei0pTogJHtzb3VuZFR5cGV9IC0gJHt1cmx9YCwgZXJyb3IpO1xyXG4gICAgICAgIGF1ZGlvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NhbnBsYXl0aHJvdWdoJywgb25Mb2FkKTtcclxuICAgICAgICBhdWRpby5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIG9uRXJyb3IpO1xyXG4gICAgICAgIC8vIOWNs+S9v+WKoOi9veWksei0peS5n3Jlc29sdmXvvIzpgb/lhY3pmLvloZ7lhbbku5bpn7PmlYhcclxuICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBhdWRpby5hZGRFdmVudExpc3RlbmVyKCdjYW5wbGF5dGhyb3VnaCcsIG9uTG9hZCk7XHJcbiAgICAgIGF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgb25FcnJvcik7XHJcbiAgICAgIGF1ZGlvLmxvYWQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5pKt5pS+6Z+z5pWIXHJcbiAgICogQHBhcmFtIHNvdW5kVHlwZSDpn7PmlYjnsbvlnotcclxuICAgKiBAcGFyYW0gb3B0aW9ucyDmkq3mlL7pgInpoblcclxuICAgKi9cclxuICBwdWJsaWMgYXN5bmMgcGxheVNvdW5kKHNvdW5kVHlwZTogc3RyaW5nLCBvcHRpb25zOiB7IHZvbHVtZT86IG51bWJlcjsgbG9vcD86IGJvb2xlYW4gfSA9IHt9KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBpZiAoIXRoaXMuaXNFbmFibGVkKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDnrYnlvoXpn7PmlYjliqDovb3lrozmiJBcclxuICAgICAgY29uc3QgbG9hZFByb21pc2UgPSB0aGlzLmxvYWRpbmdQcm9taXNlcy5nZXQoc291bmRUeXBlKTtcclxuICAgICAgaWYgKGxvYWRQcm9taXNlKSB7XHJcbiAgICAgICAgYXdhaXQgbG9hZFByb21pc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHNvdW5kID0gdGhpcy5zb3VuZHMuZ2V0KHNvdW5kVHlwZSk7XHJcbiAgICAgIGlmICghc291bmQpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oYOmfs+aViOS4jeWtmOWcqDogJHtzb3VuZFR5cGV9YCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDph43nva7mkq3mlL7kvY3nva5cclxuICAgICAgc291bmQuY3VycmVudFRpbWUgPSAwO1xyXG5cclxuICAgICAgLy8g6K6+572u6Z+z6YePXHJcbiAgICAgIHNvdW5kLnZvbHVtZSA9IG9wdGlvbnMudm9sdW1lICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnZvbHVtZSA6IHRoaXMudm9sdW1lO1xyXG5cclxuICAgICAgLy8g6K6+572u5b6q546vXHJcbiAgICAgIHNvdW5kLmxvb3AgPSBvcHRpb25zLmxvb3AgfHwgZmFsc2U7XHJcblxyXG4gICAgICAvLyDmkq3mlL7pn7PmlYhcclxuICAgICAgYXdhaXQgc291bmQucGxheSgpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS53YXJuKGDpn7PmlYjmkq3mlL7lpLHotKU6ICR7c291bmRUeXBlfWAsIGVycm9yKTtcclxuICAgICAgdGhpcy5oYW5kbGVQbGF5YmFja0Vycm9yKHNvdW5kVHlwZSwgZXJyb3IgYXMgYW55KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWBnOatoumfs+aViFxyXG4gICAqIEBwYXJhbSBzb3VuZFR5cGUg6Z+z5pWI57G75Z6LXHJcbiAgICovXHJcbiAgcHVibGljIHN0b3BTb3VuZChzb3VuZFR5cGU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgY29uc3Qgc291bmQgPSB0aGlzLnNvdW5kcy5nZXQoc291bmRUeXBlKTtcclxuICAgIGlmIChzb3VuZCkge1xyXG4gICAgICBzb3VuZC5wYXVzZSgpO1xyXG4gICAgICBzb3VuZC5jdXJyZW50VGltZSA9IDA7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlgZzmraLmiYDmnInpn7PmlYhcclxuICAgKi9cclxuICBwdWJsaWMgc3RvcEFsbFNvdW5kcygpOiB2b2lkIHtcclxuICAgIGZvciAoY29uc3Qgc291bmQgb2YgdGhpcy5zb3VuZHMudmFsdWVzKCkpIHtcclxuICAgICAgc291bmQucGF1c2UoKTtcclxuICAgICAgc291bmQuY3VycmVudFRpbWUgPSAwO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6K6+572u5YWo5bGA6Z+z6YePXHJcbiAgICogQHBhcmFtIHZvbHVtZSDpn7Pph48gKDAtMSlcclxuICAgKi9cclxuICBwdWJsaWMgc2V0Vm9sdW1lKHZvbHVtZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICB0aGlzLnZvbHVtZSA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHZvbHVtZSkpO1xyXG5cclxuICAgIC8vIOabtOaWsOaJgOacieW3suWKoOi9vemfs+aViOeahOmfs+mHj1xyXG4gICAgZm9yIChjb25zdCBzb3VuZCBvZiB0aGlzLnNvdW5kcy52YWx1ZXMoKSkge1xyXG4gICAgICBzb3VuZC52b2x1bWUgPSB0aGlzLnZvbHVtZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNhdmVVc2VyUHJlZmVyZW5jZXMoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluW9k+WJjemfs+mHj1xyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRWb2x1bWUoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLnZvbHVtZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWQr+eUqC/npoHnlKjpn7PmlYhcclxuICAgKiBAcGFyYW0gZW5hYmxlZCDmmK/lkKblkK/nlKhcclxuICAgKi9cclxuICBwdWJsaWMgc2V0RW5hYmxlZChlbmFibGVkOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICB0aGlzLmlzRW5hYmxlZCA9IGVuYWJsZWQ7XHJcblxyXG4gICAgaWYgKCFlbmFibGVkKSB7XHJcbiAgICAgIHRoaXMuc3RvcEFsbFNvdW5kcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2F2ZVVzZXJQcmVmZXJlbmNlcygpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W6Z+z5pWI5ZCv55So54q25oCBXHJcbiAgICovXHJcbiAgcHVibGljIGlzRW5hYmxlZFN0YXRlKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuaXNFbmFibGVkO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5qOA5p+l6Z+z5pWI5piv5ZCm5bey5Yqg6L29XHJcbiAgICogQHBhcmFtIHNvdW5kVHlwZSDpn7PmlYjnsbvlnotcclxuICAgKi9cclxuICBwdWJsaWMgaXNTb3VuZExvYWRlZChzb3VuZFR5cGU6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc291bmRzLmhhcyhzb3VuZFR5cGUpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5omA5pyJ5Y+v55So55qE6Z+z5pWI57G75Z6LXHJcbiAgICovXHJcbiAgcHVibGljIGdldEF2YWlsYWJsZVNvdW5kcygpOiBzdHJpbmdbXSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5TT1VORF9DT05GSUcpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5aSE55CG5pKt5pS+6ZSZ6K+vXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBoYW5kbGVQbGF5YmFja0Vycm9yKHNvdW5kVHlwZTogc3RyaW5nLCBlcnJvcjogYW55KTogdm9pZCB7XHJcbiAgICAvLyDorrDlvZXplJnor6/nu5/orqFcclxuICAgIGNvbnN0IGVycm9yS2V5ID0gYHNvdW5kX2Vycm9yXyR7c291bmRUeXBlfWA7XHJcbiAgICBjb25zdCBlcnJvckNvdW50ID0gcGFyc2VJbnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oZXJyb3JLZXkpIHx8ICcwJykgKyAxO1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oZXJyb3JLZXksIGVycm9yQ291bnQudG9TdHJpbmcoKSk7XHJcblxyXG4gICAgLy8g5aaC5p6c6ZSZ6K+v5qyh5pWw6L+H5aSa77yM5Y+v5Lul6ICD6JmR56aB55So6K+l6Z+z5pWIXHJcbiAgICBpZiAoZXJyb3JDb3VudCA+IDUpIHtcclxuICAgICAgY29uc29sZS53YXJuKGDpn7PmlYggJHtzb3VuZFR5cGV9IOmUmeivr+asoeaVsOi/h+Wkmu+8jOW7uuiuruajgOafpemfs+mikeaWh+S7tmApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Yqg6L2955So5oi35YGP5aW96K6+572uXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBsb2FkVXNlclByZWZlcmVuY2VzKCk6IHZvaWQge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g6Z+z5pWI6K6+572u5L2/55So5YWo5bGA5a2Y5YKo77yM5LiN6ZyA6KaB6KeS6Imy6ZqU56a7XHJcbiAgICAgIGNvbnN0IHNhdmVkVm9sdW1lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3NvdW5kX3ZvbHVtZScpO1xyXG4gICAgICBpZiAoc2F2ZWRWb2x1bWUgIT09IG51bGwpIHtcclxuICAgICAgICB0aGlzLnZvbHVtZSA9IHBhcnNlRmxvYXQoc2F2ZWRWb2x1bWUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBzYXZlZEVuYWJsZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc291bmRfZW5hYmxlZCcpO1xyXG4gICAgICBpZiAoc2F2ZWRFbmFibGVkICE9PSBudWxsKSB7XHJcbiAgICAgICAgdGhpcy5pc0VuYWJsZWQgPSBzYXZlZEVuYWJsZWQgPT09ICd0cnVlJztcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS53YXJuKCfliqDovb3pn7PmlYjlgY/lpb3orr7nva7lpLHotKU6JywgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5L+d5a2Y55So5oi35YGP5aW96K6+572uXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzYXZlVXNlclByZWZlcmVuY2VzKCk6IHZvaWQge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g6Z+z5pWI6K6+572u5L2/55So5YWo5bGA5a2Y5YKo77yM5LiN6ZyA6KaB6KeS6Imy6ZqU56a7XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzb3VuZF92b2x1bWUnLCB0aGlzLnZvbHVtZS50b1N0cmluZygpKTtcclxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3NvdW5kX2VuYWJsZWQnLCB0aGlzLmlzRW5hYmxlZC50b1N0cmluZygpKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUud2Fybign5L+d5a2Y6Z+z5pWI5YGP5aW96K6+572u5aSx6LSlOicsIGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmUgOavgemfs+aViOeuoeeQhuWZqFxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xyXG4gICAgdGhpcy5zdG9wQWxsU291bmRzKCk7XHJcbiAgICB0aGlzLnNvdW5kcy5jbGVhcigpO1xyXG4gICAgdGhpcy5sb2FkaW5nUHJvbWlzZXMuY2xlYXIoKTtcclxuICB9XHJcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/core/SoundManager.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/core/StatusBar.ts": 
  /*!*****************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/core/StatusBar.ts ***!
  \*****************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StatusBar: () => (/* binding */ StatusBar)\n/* harmony export */ });\n/**\n * 通用状态栏组件\n * 提供统一的状态栏实现，包含时间显示和系统图标\n */\nclass StatusBar {\n    container;\n    timeElement;\n    timeInterval = null;\n    constructor(container) {\n        this.container = container;\n        this.render();\n        this.timeElement = this.container.querySelector(\'#statusTime\');\n        this.startTimeUpdate();\n    }\n    /**\n     * 渲染状态栏HTML结构\n     */\n    render() {\n        this.container.innerHTML = `\r\n      <div class="status-bar">\r\n        <div class="status-bar-left">\r\n          <span id="statusTime">${this.getCurrentTime()}</span>\r\n        </div>\r\n        <div class="status-bar-right">\r\n          \x3c!-- 信号强度图标 --\x3e\r\n          <svg class="status-icon-svg" viewBox="0 0 24 24">\r\n            <path d="M20,20h2v-2h-2V20z M18,20h-2v-4h2V20z M14,20h-2v-6h2V20z M10,20H8v-8h2V20z M6,20H4v-10h2V20z"></path>\r\n          </svg>\r\n          \x3c!-- WiFi图标 --\x3e\r\n          <svg class="status-icon-svg" viewBox="0 0 24 24">\r\n            <path d="M12,3C7.41,3,3.86,4.53,0.96,7.03L2.37,8.44C4.89,6.31,8.06,5,12,5s7.11,1.31,9.63,3.44l1.41-1.41C20.14,4.53,16.59,3,12,3z M12,7C9.3,7,6.81,7.89,4.8,9.4l1.4,1.4C7.6,9.67,9.69,9,12,9s4.4,0.67,5.8,1.8l1.4-1.4C17.19,7.89,14.7,7,12,7z M12,11c-1.94,0-3.5,0.5-4.7,1.3l1.4,1.4c0.8-0.5,2-0.7,3.3-0.7s2.5,0.2,3.3,0.7l1.4-1.4C15.5,11.5,13.94,11,12,11z M12,15c-0.85,0-1.5,0.15-2,0.4l2,2l2-2C13.5,15.15,12.85,15,12,15z"></path>\r\n          </svg>\r\n          \x3c!-- 电池图标 --\x3e\r\n          <svg class="status-icon-svg" viewBox="0 0 24 24">\r\n            <path d="M15.67,4H14V2h-4v2H8.33C7.6,4,7,4.6,7,5.33v15.33C7,21.4,7.6,22,8.33,22h7.33c0.74,0,1.33-0.6,1.33-1.33V5.33C17,4.6,16.4,4,15.67,4z M15,20H9V6h6V20z"></path>\r\n          </svg>\r\n        </div>\r\n      </div>\r\n    `;\n    }\n    /**\n     * 获取当前时间字符串\n     */\n    getCurrentTime() {\n        const now = new Date();\n        const hours = now.getHours().toString().padStart(2, \'0\');\n        const minutes = now.getMinutes().toString().padStart(2, \'0\');\n        return `${hours}:${minutes}`;\n    }\n    /**\n     * 开始时间更新定时器\n     */\n    startTimeUpdate() {\n        this.updateTime();\n        this.timeInterval = setInterval(() => {\n            this.updateTime();\n        }, 1000);\n    }\n    /**\n     * 更新时间显示\n     */\n    updateTime() {\n        if (this.timeElement) {\n            this.timeElement.textContent = this.getCurrentTime();\n        }\n    }\n    /**\n     * 销毁状态栏，清理定时器\n     */\n    destroy() {\n        if (this.timeInterval) {\n            clearInterval(this.timeInterval);\n            this.timeInterval = null;\n        }\n    }\n    /**\n     * 静态方法：创建状态栏实例\n     */\n    static create(container) {\n        return new StatusBar(container);\n    }\n    /**\n     * 静态方法：为指定容器添加状态栏\n     */\n    static mount(containerId) {\n        const container = document.getElementById(containerId);\n        if (!container) {\n            console.warn(`StatusBar: Container with id "${containerId}" not found`);\n            return null;\n        }\n        return new StatusBar(container);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY29yZS9TdGF0dXNCYXIudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7R0FHRztBQUNJLE1BQU0sU0FBUztJQUNaLFNBQVMsQ0FBYztJQUN2QixXQUFXLENBQWM7SUFDekIsWUFBWSxHQUEwQixJQUFJLENBQUM7SUFFbkQsWUFBWSxTQUFzQjtRQUNoQyxJQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztRQUMzQixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDZCxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxDQUFDLGFBQWEsQ0FBZ0IsQ0FBQztRQUM5RSxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7SUFDekIsQ0FBQztJQUVEOztPQUVHO0lBQ0ssTUFBTTtRQUNaLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxHQUFHOzs7a0NBR0csSUFBSSxDQUFDLGNBQWMsRUFBRTs7Ozs7Ozs7Ozs7Ozs7Ozs7S0FpQmxELENBQUM7SUFDSixDQUFDO0lBRUQ7O09BRUc7SUFDSyxjQUFjO1FBQ3BCLE1BQU0sR0FBRyxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7UUFDdkIsTUFBTSxLQUFLLEdBQUcsR0FBRyxDQUFDLFFBQVEsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDekQsTUFBTSxPQUFPLEdBQUcsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDN0QsT0FBTyxHQUFHLEtBQUssSUFBSSxPQUFPLEVBQUUsQ0FBQztJQUMvQixDQUFDO0lBRUQ7O09BRUc7SUFDSyxlQUFlO1FBQ3JCLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUNsQixJQUFJLENBQUMsWUFBWSxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUU7WUFDbkMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ3BCLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUNYLENBQUM7SUFFRDs7T0FFRztJQUNLLFVBQVU7UUFDaEIsSUFBSSxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDckIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1FBQ3ZELENBQUM7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSCxPQUFPO1FBQ0wsSUFBSSxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7WUFDdEIsYUFBYSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUNqQyxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztRQUMzQixDQUFDO0lBQ0gsQ0FBQztJQUVEOztPQUVHO0lBQ0gsTUFBTSxDQUFDLE1BQU0sQ0FBQyxTQUFzQjtRQUNsQyxPQUFPLElBQUksU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ2xDLENBQUM7SUFFRDs7T0FFRztJQUNILE1BQU0sQ0FBQyxLQUFLLENBQUMsV0FBbUI7UUFDOUIsTUFBTSxTQUFTLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUN2RCxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7WUFDZixPQUFPLENBQUMsSUFBSSxDQUFDLGlDQUFpQyxXQUFXLGFBQWEsQ0FBQyxDQUFDO1lBQ3hFLE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUNELE9BQU8sSUFBSSxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDbEMsQ0FBQztDQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy9jb3JlL1N0YXR1c0Jhci50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIOmAmueUqOeKtuaAgeagj+e7hOS7tlxyXG4gKiDmj5Dkvpvnu5/kuIDnmoTnirbmgIHmoI/lrp7njrDvvIzljIXlkKvml7bpl7TmmL7npLrlkozns7vnu5/lm77moIdcclxuICovXHJcbmV4cG9ydCBjbGFzcyBTdGF0dXNCYXIge1xyXG4gIHByaXZhdGUgY29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICBwcml2YXRlIHRpbWVFbGVtZW50OiBIVE1MRWxlbWVudDtcclxuICBwcml2YXRlIHRpbWVJbnRlcnZhbDogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgY29uc3RydWN0b3IoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xyXG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgdGhpcy50aW1lRWxlbWVudCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNzdGF0dXNUaW1lJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICB0aGlzLnN0YXJ0VGltZVVwZGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5riy5p+T54q25oCB5qCPSFRNTOe7k+aehFxyXG4gICAqL1xyXG4gIHByaXZhdGUgcmVuZGVyKCk6IHZvaWQge1xyXG4gICAgdGhpcy5jb250YWluZXIuaW5uZXJIVE1MID0gYFxyXG4gICAgICA8ZGl2IGNsYXNzPVwic3RhdHVzLWJhclwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0dXMtYmFyLWxlZnRcIj5cclxuICAgICAgICAgIDxzcGFuIGlkPVwic3RhdHVzVGltZVwiPiR7dGhpcy5nZXRDdXJyZW50VGltZSgpfTwvc3Bhbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwic3RhdHVzLWJhci1yaWdodFwiPlxyXG4gICAgICAgICAgPCEtLSDkv6Hlj7flvLrluqblm77moIcgLS0+XHJcbiAgICAgICAgICA8c3ZnIGNsYXNzPVwic3RhdHVzLWljb24tc3ZnXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxyXG4gICAgICAgICAgICA8cGF0aCBkPVwiTTIwLDIwaDJ2LTJoLTJWMjB6IE0xOCwyMGgtMnYtNGgyVjIweiBNMTQsMjBoLTJ2LTZoMlYyMHogTTEwLDIwSDh2LThoMlYyMHogTTYsMjBINHYtMTBoMlYyMHpcIj48L3BhdGg+XHJcbiAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgIDwhLS0gV2lGaeWbvuaghyAtLT5cclxuICAgICAgICAgIDxzdmcgY2xhc3M9XCJzdGF0dXMtaWNvbi1zdmdcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XHJcbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTIsM0M3LjQxLDMsMy44Niw0LjUzLDAuOTYsNy4wM0wyLjM3LDguNDRDNC44OSw2LjMxLDguMDYsNSwxMiw1czcuMTEsMS4zMSw5LjYzLDMuNDRsMS40MS0xLjQxQzIwLjE0LDQuNTMsMTYuNTksMywxMiwzeiBNMTIsN0M5LjMsNyw2LjgxLDcuODksNC44LDkuNGwxLjQsMS40QzcuNiw5LjY3LDkuNjksOSwxMiw5czQuNCwwLjY3LDUuOCwxLjhsMS40LTEuNEMxNy4xOSw3Ljg5LDE0LjcsNywxMiw3eiBNMTIsMTFjLTEuOTQsMC0zLjUsMC41LTQuNywxLjNsMS40LDEuNGMwLjgtMC41LDItMC43LDMuMy0wLjdzMi41LDAuMiwzLjMsMC43bDEuNC0xLjRDMTUuNSwxMS41LDEzLjk0LDExLDEyLDExeiBNMTIsMTVjLTAuODUsMC0xLjUsMC4xNS0yLDAuNGwyLDJsMi0yQzEzLjUsMTUuMTUsMTIuODUsMTUsMTIsMTV6XCI+PC9wYXRoPlxyXG4gICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICA8IS0tIOeUteaxoOWbvuaghyAtLT5cclxuICAgICAgICAgIDxzdmcgY2xhc3M9XCJzdGF0dXMtaWNvbi1zdmdcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XHJcbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTUuNjcsNEgxNFYyaC00djJIOC4zM0M3LjYsNCw3LDQuNiw3LDUuMzN2MTUuMzNDNywyMS40LDcuNiwyMiw4LjMzLDIyaDcuMzNjMC43NCwwLDEuMzMtMC42LDEuMzMtMS4zM1Y1LjMzQzE3LDQuNiwxNi40LDQsMTUuNjcsNHogTTE1LDIwSDlWNmg2VjIwelwiPjwvcGF0aD5cclxuICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIGA7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5blvZPliY3ml7bpl7TlrZfnrKbkuLJcclxuICAgKi9cclxuICBwcml2YXRlIGdldEN1cnJlbnRUaW1lKCk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgY29uc3QgaG91cnMgPSBub3cuZ2V0SG91cnMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgICBjb25zdCBtaW51dGVzID0gbm93LmdldE1pbnV0ZXMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgICByZXR1cm4gYCR7aG91cnN9OiR7bWludXRlc31gO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5byA5aeL5pe26Ze05pu05paw5a6a5pe25ZmoXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGFydFRpbWVVcGRhdGUoKTogdm9pZCB7XHJcbiAgICB0aGlzLnVwZGF0ZVRpbWUoKTtcclxuICAgIHRoaXMudGltZUludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICB0aGlzLnVwZGF0ZVRpbWUoKTtcclxuICAgIH0sIDEwMDApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5pu05paw5pe26Ze05pi+56S6XHJcbiAgICovXHJcbiAgcHJpdmF0ZSB1cGRhdGVUaW1lKCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMudGltZUVsZW1lbnQpIHtcclxuICAgICAgdGhpcy50aW1lRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuZ2V0Q3VycmVudFRpbWUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmUgOavgeeKtuaAgeagj++8jOa4heeQhuWumuaXtuWZqFxyXG4gICAqL1xyXG4gIGRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy50aW1lSW50ZXJ2YWwpIHtcclxuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVJbnRlcnZhbCk7XHJcbiAgICAgIHRoaXMudGltZUludGVydmFsID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmdmeaAgeaWueazle+8muWIm+W7uueKtuaAgeagj+WunuS+i1xyXG4gICAqL1xyXG4gIHN0YXRpYyBjcmVhdGUoY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IFN0YXR1c0JhciB7XHJcbiAgICByZXR1cm4gbmV3IFN0YXR1c0Jhcihjb250YWluZXIpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6Z2Z5oCB5pa55rOV77ya5Li65oyH5a6a5a655Zmo5re75Yqg54q25oCB5qCPXHJcbiAgICovXHJcbiAgc3RhdGljIG1vdW50KGNvbnRhaW5lcklkOiBzdHJpbmcpOiBTdGF0dXNCYXIgfCBudWxsIHtcclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5lcklkKTtcclxuICAgIGlmICghY29udGFpbmVyKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybihgU3RhdHVzQmFyOiBDb250YWluZXIgd2l0aCBpZCBcIiR7Y29udGFpbmVySWR9XCIgbm90IGZvdW5kYCk7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBTdGF0dXNCYXIoY29udGFpbmVyKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/core/StatusBar.ts\n\n}');
  },
  "./src/多云熊/备份/给rovo的/modules/core/TypingSpeedManager.ts": 
  /*!**************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/core/TypingSpeedManager.ts ***!
  \**************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TypingSpeedManager: () => (/* binding */ TypingSpeedManager)\n/* harmony export */ });\n/**\n * 打字速度管理器类\n * 负责管理消息显示的打字动画速度\n */\nclass TypingSpeedManager {\n    currentSpeed = 1; // 默认正常速度\n    MIN_SPEED = 1;\n    MAX_SPEED = 4;\n    STORAGE_KEY = 'typing-speed';\n    // 速度配置\n    SPEED_CONFIG = {\n        1: { name: '正常', typingTime: [1000, 3000], messageDelay: [500, 1500] }, // 原来的默认速度（1-3秒）\n        2: { name: '快速', typingTime: [200, 1000], messageDelay: [200, 500] }, // 1秒内\n        3: { name: '瞬间', typingTime: 0, messageDelay: [500, 1000], noTyping: true }, // 不显示打字动画，直接显示一条消息\n        4: { name: '全部', typingTime: 0, messageDelay: 0, showAll: true }, // 消息不分条渲染，直接显示所有消息\n    };\n    constructor() {\n        this.loadSpeed();\n        this.initializeSpeedControl();\n    }\n    /**\n     * 设置打字速度\n     * @param speed 速度级别 (1-4)\n     */\n    setSpeed(speed) {\n        // 限制速度范围\n        speed = Math.max(this.MIN_SPEED, Math.min(this.MAX_SPEED, Math.round(speed)));\n        this.currentSpeed = speed;\n        // 更新滑杆进度条\n        this.updateSliderProgress(speed);\n        // 更新显示值\n        this.updateSpeedDisplay(speed);\n        // 保存到本地存储\n        this.saveSpeed();\n        console.log(`⚡ 打字速度已设置为: ${this.SPEED_CONFIG[speed].name}`);\n    }\n    /**\n     * 获取当前速度配置\n     */\n    getCurrentSpeedConfig() {\n        return this.SPEED_CONFIG[this.currentSpeed];\n    }\n    /**\n     * 获取当前速度级别\n     */\n    getCurrentSpeed() {\n        return this.currentSpeed;\n    }\n    /**\n     * 获取打字时间（毫秒）\n     */\n    getTypingTime() {\n        const config = this.SPEED_CONFIG[this.currentSpeed];\n        if (config.typingTime === 0)\n            return 0;\n        const [min, max] = config.typingTime;\n        return Math.floor(Math.random() * (max - min + 1) + min);\n    }\n    /**\n     * 获取消息间隔时间（毫秒）\n     */\n    getMessageDelay() {\n        const config = this.SPEED_CONFIG[this.currentSpeed];\n        if (config.messageDelay === 0)\n            return 0;\n        const [min, max] = config.messageDelay;\n        return Math.floor(Math.random() * (max - min + 1) + min);\n    }\n    /**\n     * 是否显示所有消息（全部模式）\n     */\n    shouldShowAll() {\n        return this.SPEED_CONFIG[this.currentSpeed].showAll || false;\n    }\n    /**\n     * 是否不显示打字动画（瞬间模式）\n     */\n    shouldSkipTyping() {\n        return this.SPEED_CONFIG[this.currentSpeed].noTyping || false;\n    }\n    /**\n     * 从本地存储加载速度设置\n     */\n    loadSpeed() {\n        try {\n            const savedSpeed = localStorage.getItem(this.STORAGE_KEY);\n            if (savedSpeed) {\n                const speed = parseInt(savedSpeed, 10);\n                if (!isNaN(speed) && speed >= this.MIN_SPEED && speed <= this.MAX_SPEED) {\n                    this.setSpeed(speed);\n                    return;\n                }\n            }\n        }\n        catch (error) {\n            console.warn('加载打字速度设置失败:', error);\n        }\n        // 使用默认值\n        this.setSpeed(1);\n    }\n    /**\n     * 保存速度设置到本地存储\n     */\n    saveSpeed() {\n        try {\n            localStorage.setItem(this.STORAGE_KEY, this.currentSpeed.toString());\n        }\n        catch (error) {\n            console.warn('保存打字速度设置失败:', error);\n        }\n    }\n    /**\n     * 初始化速度控件\n     */\n    initializeSpeedControl() {\n        // 等待DOM加载完成后初始化\n        if (document.readyState === 'loading') {\n            document.addEventListener('DOMContentLoaded', () => this.setupSpeedControl());\n        }\n        else {\n            this.setupSpeedControl();\n        }\n    }\n    /**\n     * 设置速度控件事件监听\n     */\n    setupSpeedControl() {\n        const slider = document.getElementById('typingSpeedSlider');\n        if (!slider) {\n            // 如果控件还没有加载，延迟重试\n            setTimeout(() => this.setupSpeedControl(), 100);\n            return;\n        }\n        // 设置滑杆初始值\n        slider.value = this.currentSpeed.toString();\n        this.updateSliderProgress(this.currentSpeed);\n        this.updateSpeedDisplay(this.currentSpeed);\n        // 监听滑杆变化\n        slider.addEventListener('input', this.handleSpeedSliderInput);\n        // 监听滑杆释放\n        slider.addEventListener('change', this.handleSpeedSliderChange);\n    }\n    /**\n     * 更新滑杆进度条显示\n     */\n    updateSliderProgress(speed) {\n        const progress = ((speed - this.MIN_SPEED) / (this.MAX_SPEED - this.MIN_SPEED)) * 100;\n        const slider = document.getElementById('typingSpeedSlider');\n        if (slider) {\n            slider.style.setProperty('--typing-progress', `${progress}%`);\n        }\n    }\n    /**\n     * 更新速度值显示\n     */\n    updateSpeedDisplay(speed) {\n        const speedValue = document.getElementById('typingSpeedValue');\n        if (speedValue) {\n            speedValue.textContent = this.SPEED_CONFIG[speed].name;\n        }\n    }\n    /**\n     * 处理滑杆输入事件\n     */\n    handleSpeedSliderInput = (event) => {\n        const target = event.target;\n        const speed = parseInt(target.value, 10);\n        this.setSpeed(speed);\n    };\n    /**\n     * 处理滑杆变化事件\n     */\n    handleSpeedSliderChange = () => {\n        // 可以在这里添加触觉反馈或音效\n    };\n    /**\n     * 重置为默认速度\n     */\n    resetSpeed() {\n        this.setSpeed(1);\n    }\n    /**\n     * 销毁速度管理器\n     */\n    destroy() {\n        // 清理事件监听器等资源\n        const slider = document.getElementById('typingSpeedSlider');\n        if (slider) {\n            slider.removeEventListener('input', this.handleSpeedSliderInput);\n            slider.removeEventListener('change', this.handleSpeedSliderChange);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY29yZS9UeXBpbmdTcGVlZE1hbmFnZXIudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7R0FHRztBQUNJLE1BQU0sa0JBQWtCO0lBQ3JCLFlBQVksR0FBVyxDQUFDLENBQUMsQ0FBQyxTQUFTO0lBQzFCLFNBQVMsR0FBRyxDQUFDLENBQUM7SUFDZCxTQUFTLEdBQUcsQ0FBQyxDQUFDO0lBQ2QsV0FBVyxHQUFHLGNBQWMsQ0FBQztJQUU5QyxPQUFPO0lBQ1UsWUFBWSxHQVN6QjtRQUNGLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLFlBQVksRUFBRSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLGdCQUFnQjtRQUN4RixDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsRUFBRSxZQUFZLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLEVBQUUsRUFBRSxNQUFNO1FBQzVFLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLENBQUMsRUFBRSxZQUFZLEVBQUUsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxFQUFFLG1CQUFtQjtRQUNoRyxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxDQUFDLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLEVBQUUsbUJBQW1CO0tBQ3RGLENBQUM7SUFFRjtRQUNFLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUNqQixJQUFJLENBQUMsc0JBQXNCLEVBQUUsQ0FBQztJQUNoQyxDQUFDO0lBRUQ7OztPQUdHO0lBQ0ksUUFBUSxDQUFD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QUFRLEVBQUU7UUFDdEQsTUFBTSxNQUFNLEdBQUcsS0FBSyxDQUFDLE1BQTBCLENBQUM7UUFDaEQsTUFBTSxLQUFLLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDekMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN2QixDQUFDLENBQUM7SUFFRjs7T0FFRztJQUNLLHVCQUF1QixHQUFHLEdBQVMsRUFBRTtRQUMzQyxpQkFBaUI7SUFDbkIsQ0FBQyxDQUFDO0lBRUY7O09BRUc7SUFDSSxVQUFVO1FBQ2YsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNuQixDQUFDO0lBRUQ7O09BRUc7SUFDSSxPQUFPO1FBQ1osYUFBYTtRQUNiLE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsbUJBQW1CLENBQUMsQ0FBQztRQUM1RCxJQUFJLE1BQU0sRUFBRSxDQUFDO1lBQ1gsTUFBTSxDQUFDLG1CQUFtQixDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQztZQUNqRSxNQUFNLENBQUMsbUJBQW1CLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO1FBQ3JFLENBQUM7SUFDSCxDQUFDO0NBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WkmuS6keeGii/lpIfku70v57uZcm92b+eahC9tb2R1bGVzL2NvcmUvVHlwaW5nU3BlZWRNYW5hZ2VyLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICog5omT5a2X6YCf5bqm566h55CG5Zmo57G7XHJcbiAqIOi0n+i0o+euoeeQhua2iOaBr+aYvuekuueahOaJk+Wtl+WKqOeUu+mAn+W6plxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFR5cGluZ1NwZWVkTWFuYWdlciB7XHJcbiAgcHJpdmF0ZSBjdXJyZW50U3BlZWQ6IG51bWJlciA9IDE7IC8vIOm7mOiupOato+W4uOmAn+W6plxyXG4gIHByaXZhdGUgcmVhZG9ubHkgTUlOX1NQRUVEID0gMTtcclxuICBwcml2YXRlIHJlYWRvbmx5IE1BWF9TUEVFRCA9IDQ7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBTVE9SQUdFX0tFWSA9ICd0eXBpbmctc3BlZWQnO1xyXG5cclxuICAvLyDpgJ/luqbphY3nva5cclxuICBwcml2YXRlIHJlYWRvbmx5IFNQRUVEX0NPTkZJRzogUmVjb3JkPFxyXG4gICAgbnVtYmVyLFxyXG4gICAge1xyXG4gICAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICAgIHR5cGluZ1RpbWU6IFtudW1iZXIsIG51bWJlcl0gfCAwO1xyXG4gICAgICBtZXNzYWdlRGVsYXk6IFtudW1iZXIsIG51bWJlcl0gfCAwO1xyXG4gICAgICBub1R5cGluZz86IGJvb2xlYW47XHJcbiAgICAgIHNob3dBbGw/OiBib29sZWFuO1xyXG4gICAgfVxyXG4gID4gPSB7XHJcbiAgICAxOiB7IG5hbWU6ICfmraPluLgnLCB0eXBpbmdUaW1lOiBbMTAwMCwgMzAwMF0sIG1lc3NhZ2VEZWxheTogWzUwMCwgMTUwMF0gfSwgLy8g5Y6f5p2l55qE6buY6K6k6YCf5bqm77yIMS0z56eS77yJXHJcbiAgICAyOiB7IG5hbWU6ICflv6vpgJ8nLCB0eXBpbmdUaW1lOiBbMjAwLCAxMDAwXSwgbWVzc2FnZURlbGF5OiBbMjAwLCA1MDBdIH0sIC8vIDHnp5LlhoVcclxuICAgIDM6IHsgbmFtZTogJ+eerOmXtCcsIHR5cGluZ1RpbWU6IDAsIG1lc3NhZ2VEZWxheTogWzUwMCwgMTAwMF0sIG5vVHlwaW5nOiB0cnVlIH0sIC8vIOS4jeaYvuekuuaJk+Wtl+WKqOeUu++8jOebtOaOpeaYvuekuuS4gOadoea2iOaBr1xyXG4gICAgNDogeyBuYW1lOiAn5YWo6YOoJywgdHlwaW5nVGltZTogMCwgbWVzc2FnZURlbGF5OiAwLCBzaG93QWxsOiB0cnVlIH0sIC8vIOa2iOaBr+S4jeWIhuadoea4suafk++8jOebtOaOpeaYvuekuuaJgOaciea2iOaBr1xyXG4gIH07XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5sb2FkU3BlZWQoKTtcclxuICAgIHRoaXMuaW5pdGlhbGl6ZVNwZWVkQ29udHJvbCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6K6+572u5omT5a2X6YCf5bqmXHJcbiAgICogQHBhcmFtIHNwZWVkIOmAn+W6pue6p+WIqyAoMS00KVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXRTcGVlZChzcGVlZDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAvLyDpmZDliLbpgJ/luqbojIPlm7RcclxuICAgIHNwZWVkID0gTWF0aC5tYXgodGhpcy5NSU5fU1BFRUQsIE1hdGgubWluKHRoaXMuTUFYX1NQRUVELCBNYXRoLnJvdW5kKHNwZWVkKSkpO1xyXG5cclxuICAgIHRoaXMuY3VycmVudFNwZWVkID0gc3BlZWQ7XHJcblxyXG4gICAgLy8g5pu05paw5ruR5p2G6L+b5bqm5p2hXHJcbiAgICB0aGlzLnVwZGF0ZVNsaWRlclByb2dyZXNzKHNwZWVkKTtcclxuXHJcbiAgICAvLyDmm7TmlrDmmL7npLrlgLxcclxuICAgIHRoaXMudXBkYXRlU3BlZWREaXNwbGF5KHNwZWVkKTtcclxuXHJcbiAgICAvLyDkv53lrZjliLDmnKzlnLDlrZjlgqhcclxuICAgIHRoaXMuc2F2ZVNwZWVkKCk7XHJcblxyXG4gICAgY29uc29sZS5sb2coYOKaoSDmiZPlrZfpgJ/luqblt7Lorr7nva7kuLo6ICR7dGhpcy5TUEVFRF9DT05GSUdbc3BlZWRdLm5hbWV9YCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5blvZPliY3pgJ/luqbphY3nva5cclxuICAgKi9cclxuICBwdWJsaWMgZ2V0Q3VycmVudFNwZWVkQ29uZmlnKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuU1BFRURfQ09ORklHW3RoaXMuY3VycmVudFNwZWVkXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluW9k+WJjemAn+W6pue6p+WIq1xyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRDdXJyZW50U3BlZWQoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLmN1cnJlbnRTcGVlZDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluaJk+Wtl+aXtumXtO+8iOavq+enku+8iVxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRUeXBpbmdUaW1lKCk6IG51bWJlciB7XHJcbiAgICBjb25zdCBjb25maWcgPSB0aGlzLlNQRUVEX0NPTkZJR1t0aGlzLmN1cnJlbnRTcGVlZF07XHJcbiAgICBpZiAoY29uZmlnLnR5cGluZ1RpbWUgPT09IDApIHJldHVybiAwO1xyXG5cclxuICAgIGNvbnN0IFttaW4sIG1heF0gPSBjb25maWcudHlwaW5nVGltZSBhcyBbbnVtYmVyLCBudW1iZXJdO1xyXG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSArIG1pbik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bmtojmga/pl7TpmpTml7bpl7TvvIjmr6vnp5LvvIlcclxuICAgKi9cclxuICBwdWJsaWMgZ2V0TWVzc2FnZURlbGF5KCk6IG51bWJlciB7XHJcbiAgICBjb25zdCBjb25maWcgPSB0aGlzLlNQRUVEX0NPTkZJR1t0aGlzLmN1cnJlbnRTcGVlZF07XHJcbiAgICBpZiAoY29uZmlnLm1lc3NhZ2VEZWxheSA9PT0gMCkgcmV0dXJuIDA7XHJcblxyXG4gICAgY29uc3QgW21pbiwgbWF4XSA9IGNvbmZpZy5tZXNzYWdlRGVsYXkgYXMgW251bWJlciwgbnVtYmVyXTtcclxuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkgKyBtaW4pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5piv5ZCm5pi+56S65omA5pyJ5raI5oGv77yI5YWo6YOo5qih5byP77yJXHJcbiAgICovXHJcbiAgcHVibGljIHNob3VsZFNob3dBbGwoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5TUEVFRF9DT05GSUdbdGhpcy5jdXJyZW50U3BlZWRdLnNob3dBbGwgfHwgZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmmK/lkKbkuI3mmL7npLrmiZPlrZfliqjnlLvvvIjnnqzpl7TmqKHlvI/vvIlcclxuICAgKi9cclxuICBwdWJsaWMgc2hvdWxkU2tpcFR5cGluZygpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLlNQRUVEX0NPTkZJR1t0aGlzLmN1cnJlbnRTcGVlZF0ubm9UeXBpbmcgfHwgZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDku47mnKzlnLDlrZjlgqjliqDovb3pgJ/luqborr7nva5cclxuICAgKi9cclxuICBwcml2YXRlIGxvYWRTcGVlZCgpOiB2b2lkIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHNhdmVkU3BlZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLlNUT1JBR0VfS0VZKTtcclxuICAgICAgaWYgKHNhdmVkU3BlZWQpIHtcclxuICAgICAgICBjb25zdCBzcGVlZCA9IHBhcnNlSW50KHNhdmVkU3BlZWQsIDEwKTtcclxuICAgICAgICBpZiAoIWlzTmFOKHNwZWVkKSAmJiBzcGVlZCA+PSB0aGlzLk1JTl9TUEVFRCAmJiBzcGVlZCA8PSB0aGlzLk1BWF9TUEVFRCkge1xyXG4gICAgICAgICAgdGhpcy5zZXRTcGVlZChzcGVlZCk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ+WKoOi9veaJk+Wtl+mAn+W6puiuvue9ruWksei0pTonLCBlcnJvcik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5L2/55So6buY6K6k5YC8XHJcbiAgICB0aGlzLnNldFNwZWVkKDEpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5L+d5a2Y6YCf5bqm6K6+572u5Yiw5pys5Zyw5a2Y5YKoXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzYXZlU3BlZWQoKTogdm9pZCB7XHJcbiAgICB0cnkge1xyXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLlNUT1JBR0VfS0VZLCB0aGlzLmN1cnJlbnRTcGVlZC50b1N0cmluZygpKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUud2Fybign5L+d5a2Y5omT5a2X6YCf5bqm6K6+572u5aSx6LSlOicsIGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWIneWni+WMlumAn+W6puaOp+S7tlxyXG4gICAqL1xyXG4gIHByaXZhdGUgaW5pdGlhbGl6ZVNwZWVkQ29udHJvbCgpOiB2b2lkIHtcclxuICAgIC8vIOetieW+hURPTeWKoOi9veWujOaIkOWQjuWIneWni+WMllxyXG4gICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdsb2FkaW5nJykge1xyXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4gdGhpcy5zZXR1cFNwZWVkQ29udHJvbCgpKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2V0dXBTcGVlZENvbnRyb2woKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiuvue9rumAn+W6puaOp+S7tuS6i+S7tuebkeWQrFxyXG4gICAqL1xyXG4gIHByaXZhdGUgc2V0dXBTcGVlZENvbnRyb2woKTogdm9pZCB7XHJcbiAgICBjb25zdCBzbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHlwaW5nU3BlZWRTbGlkZXInKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgaWYgKCFzbGlkZXIpIHtcclxuICAgICAgLy8g5aaC5p6c5o6n5Lu26L+Y5rKh5pyJ5Yqg6L2977yM5bu26L+f6YeN6K+VXHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5zZXR1cFNwZWVkQ29udHJvbCgpLCAxMDApO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8g6K6+572u5ruR5p2G5Yid5aeL5YC8XHJcbiAgICBzbGlkZXIudmFsdWUgPSB0aGlzLmN1cnJlbnRTcGVlZC50b1N0cmluZygpO1xyXG4gICAgdGhpcy51cGRhdGVTbGlkZXJQcm9ncmVzcyh0aGlzLmN1cnJlbnRTcGVlZCk7XHJcbiAgICB0aGlzLnVwZGF0ZVNwZWVkRGlzcGxheSh0aGlzLmN1cnJlbnRTcGVlZCk7XHJcblxyXG4gICAgLy8g55uR5ZCs5ruR5p2G5Y+Y5YyWXHJcbiAgICBzbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB0aGlzLmhhbmRsZVNwZWVkU2xpZGVySW5wdXQpO1xyXG5cclxuICAgIC8vIOebkeWQrOa7keadhumHiuaUvlxyXG4gICAgc2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMuaGFuZGxlU3BlZWRTbGlkZXJDaGFuZ2UpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5pu05paw5ruR5p2G6L+b5bqm5p2h5pi+56S6XHJcbiAgICovXHJcbiAgcHJpdmF0ZSB1cGRhdGVTbGlkZXJQcm9ncmVzcyhzcGVlZDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICBjb25zdCBwcm9ncmVzcyA9ICgoc3BlZWQgLSB0aGlzLk1JTl9TUEVFRCkgLyAodGhpcy5NQVhfU1BFRUQgLSB0aGlzLk1JTl9TUEVFRCkpICogMTAwO1xyXG4gICAgY29uc3Qgc2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R5cGluZ1NwZWVkU2xpZGVyJykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgIGlmIChzbGlkZXIpIHtcclxuICAgICAgc2xpZGVyLnN0eWxlLnNldFByb3BlcnR5KCctLXR5cGluZy1wcm9ncmVzcycsIGAke3Byb2dyZXNzfSVgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOabtOaWsOmAn+W6puWAvOaYvuekulxyXG4gICAqL1xyXG4gIHByaXZhdGUgdXBkYXRlU3BlZWREaXNwbGF5KHNwZWVkOiBudW1iZXIpOiB2b2lkIHtcclxuICAgIGNvbnN0IHNwZWVkVmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHlwaW5nU3BlZWRWYWx1ZScpO1xyXG4gICAgaWYgKHNwZWVkVmFsdWUpIHtcclxuICAgICAgc3BlZWRWYWx1ZS50ZXh0Q29udGVudCA9IHRoaXMuU1BFRURfQ09ORklHW3NwZWVkXS5uYW1lO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5aSE55CG5ruR5p2G6L6T5YWl5LqL5Lu2XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBoYW5kbGVTcGVlZFNsaWRlcklucHV0ID0gKGV2ZW50OiBFdmVudCk6IHZvaWQgPT4ge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICBjb25zdCBzcGVlZCA9IHBhcnNlSW50KHRhcmdldC52YWx1ZSwgMTApO1xyXG4gICAgdGhpcy5zZXRTcGVlZChzcGVlZCk7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICog5aSE55CG5ruR5p2G5Y+Y5YyW5LqL5Lu2XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBoYW5kbGVTcGVlZFNsaWRlckNoYW5nZSA9ICgpOiB2b2lkID0+IHtcclxuICAgIC8vIOWPr+S7peWcqOi/memHjOa3u+WKoOinpuinieWPjemmiOaIlumfs+aViFxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIOmHjee9ruS4uum7mOiupOmAn+W6plxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXNldFNwZWVkKCk6IHZvaWQge1xyXG4gICAgdGhpcy5zZXRTcGVlZCgxKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmUgOavgemAn+W6pueuoeeQhuWZqFxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xyXG4gICAgLy8g5riF55CG5LqL5Lu255uR5ZCs5Zmo562J6LWE5rqQXHJcbiAgICBjb25zdCBzbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHlwaW5nU3BlZWRTbGlkZXInKTtcclxuICAgIGlmIChzbGlkZXIpIHtcclxuICAgICAgc2xpZGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdGhpcy5oYW5kbGVTcGVlZFNsaWRlcklucHV0KTtcclxuICAgICAgc2xpZGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMuaGFuZGxlU3BlZWRTbGlkZXJDaGFuZ2UpO1xyXG4gICAgfVxyXG4gIH1cclxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/core/TypingSpeedManager.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/core/index.ts": 
  /*!*************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/core/index.ts ***!
  \*************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BottomNavigation: () => (/* reexport safe */ _BottomNavigation__WEBPACK_IMPORTED_MODULE_0__.BottomNavigation),\n/* harmony export */   ErrorStatsManager: () => (/* reexport safe */ _ErrorStatsManager__WEBPACK_IMPORTED_MODULE_1__.ErrorStatsManager),\n/* harmony export */   ScaleManager: () => (/* reexport safe */ _ScaleManager__WEBPACK_IMPORTED_MODULE_2__.ScaleManager),\n/* harmony export */   SoundManager: () => (/* reexport safe */ _SoundManager__WEBPACK_IMPORTED_MODULE_3__.SoundManager),\n/* harmony export */   TypingSpeedManager: () => (/* reexport safe */ _TypingSpeedManager__WEBPACK_IMPORTED_MODULE_4__.TypingSpeedManager)\n/* harmony export */ });\n/* harmony import */ var _BottomNavigation__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BottomNavigation */ "./src/多云熊/备份/给rovo的/modules/core/BottomNavigation.ts");\n/* harmony import */ var _ErrorStatsManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ErrorStatsManager */ "./src/多云熊/备份/给rovo的/modules/core/ErrorStatsManager.ts");\n/* harmony import */ var _ScaleManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ScaleManager */ "./src/多云熊/备份/给rovo的/modules/core/ScaleManager.ts");\n/* harmony import */ var _SoundManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./SoundManager */ "./src/多云熊/备份/给rovo的/modules/core/SoundManager.ts");\n/* harmony import */ var _TypingSpeedManager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./TypingSpeedManager */ "./src/多云熊/备份/给rovo的/modules/core/TypingSpeedManager.ts");\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvY29yZS9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQW1DO0FBQ0M7QUFDTDtBQUNBO0FBQ00iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WkmuS6keeGii/lpIfku70v57uZcm92b+eahC9tb2R1bGVzL2NvcmUvaW5kZXgudHM/Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vQm90dG9tTmF2aWdhdGlvbic7XG5leHBvcnQgKiBmcm9tICcuL0Vycm9yU3RhdHNNYW5hZ2VyJztcbmV4cG9ydCAqIGZyb20gJy4vU2NhbGVNYW5hZ2VyJztcbmV4cG9ydCAqIGZyb20gJy4vU291bmRNYW5hZ2VyJztcbmV4cG9ydCAqIGZyb20gJy4vVHlwaW5nU3BlZWRNYW5hZ2VyJztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/core/index.ts\n\n}');
  },
  "./src/多云熊/备份/给rovo的/modules/dynamicIsland/DynamicIslandMusicPlayer.ts": 
  /*!*****************************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/dynamicIsland/DynamicIslandMusicPlayer.ts ***!
  \*****************************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DynamicIslandMusicPlayer: () => (/* binding */ DynamicIslandMusicPlayer)\n/* harmony export */ });\n/* harmony import */ var _dynamicIsland_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dynamicIsland.scss */ \"./src/多云熊/备份/给rovo的/modules/dynamicIsland/dynamicIsland.scss\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config */ \"./src/多云熊/备份/给rovo的/modules/dynamicIsland/config.ts\");\n/* harmony import */ var _NeteaseMusicResolver__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./NeteaseMusicResolver */ \"./src/多云熊/备份/给rovo的/modules/dynamicIsland/NeteaseMusicResolver.ts\");\n/* harmony import */ var _QQMusicResolver__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./QQMusicResolver */ \"./src/多云熊/备份/给rovo的/modules/dynamicIsland/QQMusicResolver.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./types */ \"./src/多云熊/备份/给rovo的/modules/dynamicIsland/types.ts\");\n/* harmony import */ var _PlaylistPanel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./PlaylistPanel */ \"./src/多云熊/备份/给rovo的/modules/dynamicIsland/PlaylistPanel.ts\");\n/**\n * DynamicIslandMusicPlayer - 灵动岛音乐播放器\n * 将传统的phone-notch改造为现代化的灵动岛音乐播放器\n * 支持音乐播放控制、状态显示和交互动画\n */\n\n\n\n\n\n\n// 音乐信息默认值\nconst defaultMusicInfo = {\n    title: '未知歌曲',\n    artist: '未知艺术家',\n    duration: 0,\n    currentTime: 0,\n};\nclass DynamicIslandMusicPlayer {\n    static instance;\n    $container;\n    $island;\n    currentState = _types__WEBPACK_IMPORTED_MODULE_4__.PlayState.STOPPED;\n    currentMode = _types__WEBPACK_IMPORTED_MODULE_4__.PlayMode.REPEAT;\n    currentMusic = defaultMusicInfo;\n    isExpanded = false;\n    animationFrameId = null;\n    playbackStartTime = 0;\n    audioHelper = null;\n    currentPlaylistUrl = null;\n    constructor() {\n        this.initialize();\n    }\n    /**\n     * 获取单例实例\n     */\n    static getInstance() {\n        if (!DynamicIslandMusicPlayer.instance) {\n            DynamicIslandMusicPlayer.instance = new DynamicIslandMusicPlayer();\n        }\n        return DynamicIslandMusicPlayer.instance;\n    }\n    /**\n     * 初始化灵动岛音乐播放器\n     */\n    initialize() {\n        this.createDynamicIsland();\n        this.bindEvents();\n        this.startUpdateLoop();\n        console.log('[DynamicIslandMusicPlayer] 灵动岛音乐播放器初始化完成');\n    }\n    /**\n     * 创建灵动岛DOM结构\n     */\n    createDynamicIsland() {\n        // 查找现有的phone-notch并替换\n        const $existingNotch = $('.phone-notch');\n        if ($existingNotch.length > 0) {\n            // 替换现有的phone-notch\n            $existingNotch.replaceWith(this.createIslandHTML());\n        }\n        else {\n            // 如果没有找到，创建新的并添加到phone-container\n            const $phoneContainer = $('.phone-container');\n            if ($phoneContainer.length > 0) {\n                $phoneContainer.append(this.createIslandHTML());\n            }\n        }\n        this.$container = $('.dynamic-island-container');\n        this.$island = $('.dynamic-island');\n        this.updateModeButton();\n    }\n    /**\n     * 创建灵动岛HTML结构 - iOS风格\n     */\n    createIslandHTML() {\n        return `\n      <div class=\"dynamic-island-container\">\n        <div class=\"dynamic-island\" data-state=\"${this.currentState}\">\n          \x3c!-- 紧凑状态 - iOS风格 --\x3e\n          <div class=\"island-compact\">\n            \x3c!-- 左侧专辑封面 --\x3e\n            <div class=\"compact-album-cover\">\n              <img src=\"\" alt=\"专辑封面\" class=\"compact-cover-image\">\n              <div class=\"compact-cover-placeholder\">♪</div>\n            </div>\n            \x3c!-- 右侧音乐指示器 --\x3e\n            <div class=\"music-indicator\">\n              <div class=\"wave-bars\">\n                <div class=\"wave-bar\"></div>\n                <div class=\"wave-bar\"></div>\n                <div class=\"wave-bar\"></div>\n              </div>\n            </div>\n          </div>\n          \n          \x3c!-- 展开状态 - iOS风格布局 --\x3e\n          <div class=\"island-expanded\">\n            \x3c!-- 顶部区域：专辑封面 + 歌曲信息 + 音频可视化 --\x3e\n            <div class=\"top-section\">\n              <div class=\"album-cover\">\n                <img src=\"\" alt=\"专辑封面\" class=\"cover-image\">\n                <div class=\"cover-placeholder\">♪</div>\n              </div>\n              \n              <div class=\"track-info\">\n                <div class=\"track-title\">\n                  <span class=\"track-text\">未播放音乐</span>\n                </div>\n                <div class=\"track-artist\">\n                  <span class=\"track-text\">点击选择音乐</span>\n                </div>\n              </div>\n              \n              <div class=\"audio-visualizer\" data-color=\"default\">\n                <div class=\"visualizer-bar\"></div>\n                <div class=\"visualizer-bar\"></div>\n                <div class=\"visualizer-bar\"></div>\n                <div class=\"visualizer-bar\"></div>\n                <div class=\"visualizer-bar\"></div>\n              </div>\n            </div>\n            \n            \x3c!-- 进度条区域 --\x3e\n            <div class=\"progress-section\">\n              <div class=\"time-display\">\n                <span class=\"current-time\">0:00</span>\n                <span class=\"total-time\">0:00</span>\n              </div>\n              <div class=\"progress-bar\">\n                <div class=\"progress-track\">\n                  <div class=\"progress-fill\"></div>\n                  <div class=\"progress-thumb\"></div>\n                </div>\n              </div>\n            </div>\n            \n            \x3c!-- 底部控制区域 --\x3e\n            <div class=\"bottom-section\">\n              <button class=\"control-btn prev-btn\" title=\"上一首\">◀◀</button>\n              \n              <button class=\"control-btn play-btn\" title=\"播放/暂停\">\n                <div class=\"play-icon\"></div>\n                <div class=\"pause-icon\"></div>\n              </button>\n              \n              <button class=\"control-btn next-btn\" title=\"下一首\">▶▶</button>\n              \n              <button class=\"control-btn mode-btn\" title=\"播放模式\">\n                <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                  <path class=\"mode-icon-path\" d=\"M12,6V9L16,5L12,1V4C7.58,4 4,7.58 4,12C4,13.85 4.63,15.55 5.69,16.88L7.1,15.47C6.42,14.53 6,13.32 6,12C6,8.69 8.69,6 12,6M18.31,7.12L16.9,8.53C17.58,9.47 18,10.68 18,12C18,15.31 15.31,18 12,18V15L8,19L12,23V20C16.42,20 20,16.42 20,12C20,10.15 19.37,8.45 18.31,7.12Z\" />\n                </svg>\n              </button>\n              \n              <button class=\"control-btn playlist-btn\" title=\"歌单\">\n                <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\">\n                  <path fill=\"currentColor\" d=\"M15,6H3V8H15V6M15,10H3V12H15V10M3,16H11V14H3V16M17,6V14.18C16.69,14.07 16.35,14 16,14A3,3 0 0,0 13,17A3,3 0 0,0 16,20A3,3 0 0,0 19,17V8H22V6H17Z\" />\n                </svg>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n    }\n    /**\n     * 绑定事件监听器\n     */\n    bindEvents() {\n        // 点击灵动岛切换展开/收缩\n        $(document).on('click', '.dynamic-island', e => {\n            e.stopPropagation();\n            this.toggleExpanded();\n        });\n        // 播放/暂停按钮\n        $(document).on('click', '.play-btn', e => {\n            e.stopPropagation();\n            this.togglePlayPause();\n        });\n        // 上一首按钮\n        $(document).on('click', '.prev-btn', e => {\n            e.stopPropagation();\n            this.previousTrack();\n        });\n        // 下一首按钮\n        $(document).on('click', '.next-btn', e => {\n            e.stopPropagation();\n            this.nextTrack();\n        });\n        // 播放模式按钮\n        $(document).on('click', '.mode-btn', e => {\n            e.stopPropagation();\n            this.cycleMode();\n        });\n        // 歌单按钮\n        $(document).on('click', '.playlist-btn', e => {\n            e.stopPropagation();\n            this.showPlaylist();\n        });\n        // 进度条交互\n        $(document).on('click', '.progress-track', e => {\n            e.stopPropagation();\n            this.handleProgressClick(e);\n        });\n        // 点击其他地方收缩灵动岛\n        $(document).on('click', e => {\n            if (!$(e.target).closest('.dynamic-island-container').length) {\n                this.collapse();\n            }\n        });\n        // 点击专辑封面或歌曲信息导入音乐\n        $(document).on('click', '.album-cover, .track-info', e => {\n            e.stopPropagation();\n            this.showImportDialog();\n        });\n        // 从歌单面板发起的播放事件\n        $(document).on('di:playlist:play', async (_e, payload) => {\n            try {\n                const url = payload?.url;\n                if (!url)\n                    return;\n                this.currentPlaylistUrl = url;\n                await this.importMusic(url);\n                await this.play();\n                if (!this.isExpanded) {\n                    this.expand();\n                }\n                // 触发歌单刷新以更新高亮\n                setTimeout(() => {\n                    const panel = _PlaylistPanel__WEBPACK_IMPORTED_MODULE_5__.PlaylistPanel.getInstance();\n                    panel.render?.();\n                }, 100);\n            }\n            catch (error) {\n                console.error('[DynamicIslandMusicPlayer] 从歌单播放失败:', error);\n                toastr.error('播放失败', '音乐播放器');\n            }\n        });\n    }\n    /**\n     * 切换展开/收缩状态\n     */\n    toggleExpanded() {\n        if (this.isExpanded) {\n            this.collapse();\n        }\n        else {\n            this.expand();\n        }\n    }\n    /**\n     * 展开灵动岛\n     */\n    expand() {\n        this.isExpanded = true;\n        this.$island.addClass('expanded');\n        // 添加展开动画 - 从中心向下展开\n        this.$island.css('transform', 'scale(0.95)');\n        setTimeout(() => {\n            this.$island.css('transform', 'scale(1)');\n        }, 50);\n        // 展开完成后，等待过渡结束再重新计算文本滚动\n        setTimeout(() => {\n            const $title = $('.track-title');\n            const $titleText = $title.find('.track-text');\n            this.checkTextScrollable($title, $titleText);\n            const $artist = $('.track-artist');\n            const $artistText = $artist.find('.track-text');\n            this.checkTextScrollable($artist, $artistText);\n        }, 450);\n    }\n    /**\n     * 收缩灵动岛\n     */\n    collapse() {\n        this.isExpanded = false;\n        this.$island.removeClass('expanded');\n        // 清除变换，恢复默认状态\n        this.$island.css('transform', '');\n        // 收缩时禁用跑马灯并复位滚动距离，避免在收缩态误判\n        $('.track-title, .track-artist').removeClass('scrollable').css('--scroll-distance', '0px');\n    }\n    /**\n     * 切换播放/暂停\n     */\n    async togglePlayPause() {\n        try {\n            if (this.currentState === _types__WEBPACK_IMPORTED_MODULE_4__.PlayState.PLAYING) {\n                await this.pause();\n            }\n            else if (this.currentState === _types__WEBPACK_IMPORTED_MODULE_4__.PlayState.PAUSED) {\n                await this.play();\n            }\n            else {\n                // 若当前没有播放内容：优先播放歌单第一首；若歌单为空则维持原逻辑（提示并弹出导入）\n                const first = _PlaylistPanel__WEBPACK_IMPORTED_MODULE_5__.PlaylistPanel.getInstance().getFirstUrl?.();\n                if (first) {\n                    this.currentPlaylistUrl = first;\n                    await this.importMusic(first);\n                    await this.play();\n                    if (!this.isExpanded)\n                        this.expand();\n                }\n                else {\n                    toastr.info('请先导入音乐', '提示');\n                    this.showImportDialog();\n                }\n            }\n        }\n        catch (error) {\n            console.error('[DynamicIslandMusicPlayer] 播放控制失败:', error);\n            toastr.error('播放控制失败', '错误');\n        }\n    }\n    /**\n     * 播放音乐\n     */\n    async play() {\n        this.setState(_types__WEBPACK_IMPORTED_MODULE_4__.PlayState.LOADING);\n        try {\n            // 仅使用HTML Audio播放\n            if (this.audioHelper) {\n                await this.audioHelper.play();\n                this.playbackStartTime = Date.now() - this.currentMusic.currentTime * 1000;\n                this.setState(_types__WEBPACK_IMPORTED_MODULE_4__.PlayState.PLAYING);\n            }\n            else {\n                toastr.info('请先导入音乐', '提示');\n            }\n        }\n        catch (error) {\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_4__.PlayState.STOPPED);\n            throw error;\n        }\n    }\n    /**\n     * 暂停音乐\n     */\n    async pause() {\n        try {\n            // 仅使用HTML Audio暂停\n            if (this.audioHelper) {\n                this.audioHelper.pause();\n                this.setState(_types__WEBPACK_IMPORTED_MODULE_4__.PlayState.PAUSED);\n            }\n        }\n        catch (error) {\n            console.error('[DynamicIslandMusicPlayer] 暂停失败:', error);\n            throw error;\n        }\n    }\n    /**\n     * 上一首\n     */\n    async previousTrack() {\n        try {\n            const urls = this.getPlaylistUrls();\n            if (urls.length === 0) {\n                toastr.info('歌单为空', '音乐播放器');\n                return;\n            }\n            const curIdx = this.findCurrentIndex(urls);\n            const prevIdx = curIdx < 0 ? 0 : (curIdx - 1 + urls.length) % urls.length;\n            await this.playByIndex(prevIdx);\n        }\n        catch (error) {\n            console.error('[DynamicIslandMusicPlayer] 上一首失败:', error);\n            toastr.error('上一首失败', '错误');\n        }\n    }\n    /**\n     * 下一首\n     */\n    async nextTrack() {\n        try {\n            const urls = this.getPlaylistUrls();\n            if (urls.length === 0) {\n                toastr.info('歌单为空', '音乐播放器');\n                return;\n            }\n            const curIdx = this.findCurrentIndex(urls);\n            let nextIdx = curIdx < 0 ? 0 : (curIdx + 1) % urls.length;\n            if (this.currentMode === _types__WEBPACK_IMPORTED_MODULE_4__.PlayMode.RANDOM) {\n                if (urls.length > 1) {\n                    let r = curIdx;\n                    for (let i = 0; i < 5 && r === curIdx; i++) {\n                        r = Math.floor(Math.random() * urls.length);\n                    }\n                    nextIdx = r === curIdx ? (curIdx + 1) % urls.length : r;\n                }\n                else {\n                    nextIdx = 0;\n                }\n            }\n            await this.playByIndex(nextIdx);\n        }\n        catch (error) {\n            console.error('[DynamicIslandMusicPlayer] 下一首失败:', error);\n            toastr.error('下一首失败', '错误');\n        }\n    }\n    /**\n     * 显示歌单\n     */\n    showPlaylist() {\n        try {\n            const panel = _PlaylistPanel__WEBPACK_IMPORTED_MODULE_5__.PlaylistPanel.getInstance();\n            panel.open();\n        }\n        catch (err) {\n            console.error('[DynamicIslandMusicPlayer] 打开歌单面板失败:', err);\n            toastr.error('打开歌单面板失败', '音乐播放器');\n        }\n    }\n    /**\n     * 显示导入音乐对话框\n     */\n    showImportDialog() {\n        const musicUrl = prompt('请输入音乐链接:', 'https://');\n        if (musicUrl && musicUrl.trim() && musicUrl !== 'https://') {\n            this.importMusic(musicUrl.trim());\n        }\n    }\n    /**\n     * 导入音乐\n     */\n    async importMusic(url) {\n        try {\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_4__.PlayState.LOADING);\n            this.currentPlaylistUrl = url;\n            let musicInfo = null;\n            let audioUrlToPlay = url;\n            // 网易云音乐解析\n            if (_NeteaseMusicResolver__WEBPACK_IMPORTED_MODULE_2__.NeteaseMusicResolver.isNeteaseMusicUrl(url)) {\n                musicInfo = await _NeteaseMusicResolver__WEBPACK_IMPORTED_MODULE_2__.NeteaseMusicResolver.resolve(url);\n                if (musicInfo && musicInfo.audioUrl) {\n                    audioUrlToPlay = musicInfo.audioUrl;\n                }\n            }\n            // QQ 音乐解析\n            else if (_QQMusicResolver__WEBPACK_IMPORTED_MODULE_3__.QQMusicResolver.isQQMusicUrl(url)) {\n                musicInfo = await _QQMusicResolver__WEBPACK_IMPORTED_MODULE_3__.QQMusicResolver.resolve(url);\n                if (musicInfo && musicInfo.audioUrl) {\n                    audioUrlToPlay = musicInfo.audioUrl;\n                }\n                else {\n                    // 未获取到可播放链接则标记为无效，走错误提示分支\n                    audioUrlToPlay = undefined;\n                }\n            }\n            if (audioUrlToPlay) {\n                // 停止之前的音乐并重置状态\n                if (this.audioHelper) {\n                    this.audioHelper.pause();\n                    this.audioHelper.remove();\n                    this.audioHelper = null;\n                }\n                this.currentMusic = { ...defaultMusicInfo };\n                this.updateTimeDisplay();\n                // 使用HTML Audio导入音乐\n                this.audioHelper = new Audio(audioUrlToPlay);\n                // 单曲循环模式：通过 loop 控制\n                this.audioHelper.loop = this.currentMode === _types__WEBPACK_IMPORTED_MODULE_4__.PlayMode.SINGLE;\n                // 监听播放结束，自动切歌（除单曲循环外）\n                this.audioHelper.addEventListener('ended', () => {\n                    this.onTrackEnded();\n                });\n                // 获取元数据\n                this.audioHelper.addEventListener('loadedmetadata', () => {\n                    if (this.audioHelper) {\n                        this.currentMusic.duration = this.audioHelper.duration;\n                        this.updateTimeDisplay();\n                    }\n                });\n                // 准备好后自动播放\n                this.audioHelper.addEventListener('canplaythrough', () => {\n                    if (this.currentState !== _types__WEBPACK_IMPORTED_MODULE_4__.PlayState.PLAYING) {\n                        this.play();\n                    }\n                }, { once: true });\n                if (musicInfo) {\n                    this.updateMusicInfo({\n                        ...musicInfo,\n                        currentTime: 0\n                    });\n                }\n                else {\n                    this.updateMusicInfo({\n                        title: this.extractTitleFromUrl(url),\n                        artist: '网络音乐',\n                        duration: 0,\n                        currentTime: 0\n                    });\n                }\n            }\n            else {\n                throw new Error('无法获取有效的音频链接');\n            }\n        }\n        catch (error) {\n            console.error('[DynamicIslandMusicPlayer] 导入音乐失败:', error);\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_4__.PlayState.STOPPED);\n            toastr.error('导入音乐失败，请检查链接是否有效', '错误');\n        }\n    }\n    /**\n     * 从URL提取音乐标题\n     */\n    extractTitleFromUrl(url) {\n        try {\n            const urlObj = new URL(url);\n            const pathname = urlObj.pathname;\n            const filename = pathname.split('/').pop() || '';\n            const nameWithoutExt = filename.split('.')[0];\n            return nameWithoutExt || '未知歌曲';\n        }\n        catch {\n            return '网络音乐';\n        }\n    }\n    /**\n     * 处理进度条点击\n     */\n    handleProgressClick(e) {\n        if (this.audioHelper && this.currentMusic.duration > 0) {\n            const $track = $(e.currentTarget);\n            const trackWidth = $track.width() || 0;\n            const clickX = e.offsetX;\n            const progress = clickX / trackWidth;\n            const newTime = this.currentMusic.duration * progress;\n            // 点击进度条立即跳转播放位置并继续播放\n            this.audioHelper.currentTime = newTime;\n            this.currentMusic.currentTime = newTime;\n            this.playbackStartTime = Date.now() - newTime * 1000;\n            this.updateTimeDisplay();\n            if (this.currentState !== _types__WEBPACK_IMPORTED_MODULE_4__.PlayState.PLAYING) {\n                this.play();\n            }\n            console.log(`[DynamicIslandMusicPlayer] 点击进度条跳转到: ${Math.round(progress * 100)}% 并开始播放`);\n        }\n    }\n    /**\n     * 设置播放状态\n     */\n    setState(state) {\n        this.currentState = state;\n        this.$island.attr('data-state', state);\n        this.updatePlayButton();\n    }\n    /**\n     * 更新播放按钮状态\n     */\n    updatePlayButton() {\n        const $playBtn = $('.play-btn');\n        if (this.currentState === _types__WEBPACK_IMPORTED_MODULE_4__.PlayState.PLAYING) {\n            $playBtn.addClass('paused');\n        }\n        else {\n            $playBtn.removeClass('paused');\n        }\n    }\n    /**\n     * 更新播放模式按钮\n     */\n    updateModeButton() {\n        const $modeBtn = $('.mode-btn svg path');\n        // 使用配置文件中的图标定义\n        const iconPath = _config__WEBPACK_IMPORTED_MODULE_1__.CONFIG.icons[this.currentMode.toLowerCase()];\n        if (iconPath) {\n            $modeBtn.attr('d', iconPath);\n        }\n    }\n    setMode(mode) {\n        this.currentMode = mode;\n        if (this.audioHelper) {\n            this.audioHelper.loop = this.currentMode === _types__WEBPACK_IMPORTED_MODULE_4__.PlayMode.SINGLE;\n        }\n        this.updateModeButton();\n    }\n    cycleMode() {\n        const order = [_types__WEBPACK_IMPORTED_MODULE_4__.PlayMode.REPEAT, _types__WEBPACK_IMPORTED_MODULE_4__.PlayMode.RANDOM, _types__WEBPACK_IMPORTED_MODULE_4__.PlayMode.SINGLE, _types__WEBPACK_IMPORTED_MODULE_4__.PlayMode.STOP];\n        const idx = order.indexOf(this.currentMode);\n        const next = order[(idx + 1) % order.length];\n        this.setMode(next);\n        // 使用配置文件中的模式名称\n        const modeName = _config__WEBPACK_IMPORTED_MODULE_1__.CONFIG.modeNames[next];\n        toastr.info(`播放模式：${modeName}`, '音乐播放器');\n    }\n    /**\n     * 更新音乐信息\n     */\n    updateMusicInfo(info) {\n        try {\n            this.currentMusic = { ...this.currentMusic, ...info };\n            // 更新歌曲标题/歌手\n            const $titleText = $('.track-title .track-text');\n            const $title = $('.track-title');\n            $titleText.text(this.currentMusic.title);\n            const $artistText = $('.track-artist .track-text');\n            const $artist = $('.track-artist');\n            $artistText.text(this.currentMusic.artist);\n            // 仅在“展开状态”下进行滚动判断；收缩状态一律禁用滚动并复位距离\n            if (this.isExpanded) {\n                this.checkTextScrollable($title, $titleText);\n                this.checkTextScrollable($artist, $artistText);\n            }\n            else {\n                $title.removeClass('scrollable').css('--scroll-distance', '0px');\n                $artist.removeClass('scrollable').css('--scroll-distance', '0px');\n            }\n            if (this.currentMusic.coverUrl) {\n                const proxiedCover = this.buildProxiedImageUrl(this.currentMusic.coverUrl);\n                // 更新展开状态的封面\n                $('.cover-image').attr('src', proxiedCover).show();\n                $('.cover-placeholder').hide();\n                // 同时更新收缩状态的封面\n                $('.compact-cover-image').attr('src', proxiedCover).show();\n                $('.compact-cover-placeholder').hide();\n                // 根据专辑封面更新可视化器颜色（统一走代理，避免CORS）\n                this.updateVisualizerColor(proxiedCover);\n            }\n            else {\n                // 隐藏展开状态的封面\n                $('.cover-image').hide();\n                $('.cover-placeholder').show();\n                // 隐藏收缩状态的封面\n                $('.compact-cover-image').hide();\n                $('.compact-cover-placeholder').show();\n                // 使用默认颜色\n                $('.dynamic-island').css('--visualizer-color', '');\n            }\n            this.updateTimeDisplay();\n        }\n        catch (error) {\n            console.error('[DynamicIslandMusicPlayer] 更新音乐信息失败:', error);\n        }\n    }\n    /**\n     * 检查文本是否需要滚动\n     * 规则：\n     * - 收缩状态下不进行任何滚动判断与动画\n     * - 展开后等宽度稳定再计算，避免过渡期测量为 0\n     */\n    checkTextScrollable($container, $text, attempt = 0) {\n        // 先重置状态，确保正确计算\n        $container.removeClass('scrollable');\n        $container.css('--scroll-distance', '0px');\n        // 收缩态：直接退出（不判定，不日志）\n        if (!this.isExpanded) {\n            return;\n        }\n        const MAX_ATTEMPTS = 10;\n        const RETRY_DELAY = 120; // ms\n        const doCheck = () => {\n            const islandRect = this.$island?.[0]?.getBoundingClientRect?.();\n            const islandWidth = islandRect?.width ?? 0;\n            const rect = $container[0]?.getBoundingClientRect?.();\n            const containerWidth = (rect?.width ?? ($container.width() || 0));\n            const textEl = $text[0];\n            const textWidth = textEl ? textEl.scrollWidth : 0;\n            // 动态“稳定宽度”阈值：至少100px，且不低于灵动岛宽度的25%\n            const minStableWidth = Math.max(100, islandWidth * 0.25);\n            // 宽度未稳定（包含为 0）则重试\n            if ((containerWidth < minStableWidth) && attempt < MAX_ATTEMPTS) {\n                setTimeout(() => this.checkTextScrollable($container, $text, attempt + 1), RETRY_DELAY);\n                return;\n            }\n            if (containerWidth <= 0) {\n                // 宽度仍不可用，保持不滚动\n                return;\n            }\n            if (textWidth > containerWidth) {\n                const scrollDistance = containerWidth - textWidth;\n                $container.css('--scroll-distance', `${scrollDistance}px`);\n                $container.addClass('scrollable');\n                console.log(`[DynamicIslandMusicPlayer] 设置文本滚动: 容器宽度=${containerWidth}px, 文本宽度=${textWidth}px, 滚动距离=${scrollDistance}px`);\n            }\n            else {\n                $container.removeClass('scrollable');\n                $container.css('--scroll-distance', '0px');\n            }\n        };\n        setTimeout(doCheck, attempt === 0 ? 80 : 0);\n    }\n    /**\n     * 图片代理包装（统一规避CORS）\n     * 说明：统一通过 images.weserv.nl 代理外部封面，避免画布污染，保持单一路径。\n     */\n    buildProxiedImageUrl(url) {\n        try {\n            if (!url || url.startsWith('data:') || url.startsWith('blob:'))\n                return url;\n            if (url.startsWith('https://images.weserv.nl/'))\n                return url;\n            const u = new URL(url, window.location.href);\n            // weserv 要求无协议的 host+path 形式\n            const hostAndPath = u.host + u.pathname + (u.search || '');\n            return `https://images.weserv.nl/?url=${encodeURIComponent(hostAndPath)}`;\n        }\n        catch {\n            return url;\n        }\n    }\n    /**\n     * 根据专辑封面更新可视化器颜色\n     */\n    updateVisualizerColor(imageUrl) {\n        try {\n            console.log('[DynamicIslandMusicPlayer] 开始分析封面颜色:', imageUrl);\n            // 创建临时图片元素来分析颜色\n            const img = new Image();\n            // 统一为所有平台设置 crossOrigin，让浏览器处理CORS\n            img.crossOrigin = 'anonymous';\n            // 使用代理地址规避跨域限制\n            const finalUrl = this.buildProxiedImageUrl(imageUrl);\n            if (finalUrl !== imageUrl) {\n                console.log('[DynamicIslandMusicPlayer] 使用代理封面地址进行提色:', finalUrl);\n            }\n            img.onload = () => {\n                try {\n                    // 创建canvas来分析图片主色调\n                    const canvas = document.createElement('canvas');\n                    const ctx = canvas.getContext('2d');\n                    if (!ctx) {\n                        console.warn('[DynamicIslandMusicPlayer] 无法获取 canvas context');\n                        this.setDefaultVisualizerColor();\n                        return;\n                    }\n                    // 使用较小的尺寸来提高性能\n                    const sampleSize = 50;\n                    canvas.width = sampleSize;\n                    canvas.height = sampleSize;\n                    try {\n                        ctx.drawImage(img, 0, 0, sampleSize, sampleSize);\n                        // 获取图片的像素数据\n                        const imageData = ctx.getImageData(0, 0, sampleSize, sampleSize);\n                        // 计算主色调\n                        let r = 0, g = 0, b = 0;\n                        let validPixels = 0;\n                        const pixels = imageData.data;\n                        for (let i = 0; i < pixels.length; i += 4) {\n                            // 跳过太暗或太亮的像素\n                            const brightness = (pixels[i] + pixels[i + 1] + pixels[i + 2]) / 3;\n                            if (brightness > 20 && brightness < 235) {\n                                r += pixels[i];\n                                g += pixels[i + 1];\n                                b += pixels[i + 2];\n                                validPixels++;\n                            }\n                        }\n                        if (validPixels > 0) {\n                            r = Math.floor(r / validPixels);\n                            g = Math.floor(g / validPixels);\n                            b = Math.floor(b / validPixels);\n                            // 增加颜色饱和度\n                            const max = Math.max(r, g, b);\n                            const min = Math.min(r, g, b);\n                            const delta = max - min;\n                            if (delta > 0) {\n                                const saturationBoost = 1.3;\n                                const mid = (max + min) / 2;\n                                r = Math.round(mid + (r - mid) * saturationBoost);\n                                g = Math.round(mid + (g - mid) * saturationBoost);\n                                b = Math.round(mid + (b - mid) * saturationBoost);\n                                // 确保值在有效范围内\n                                r = Math.max(0, Math.min(255, r));\n                                g = Math.max(0, Math.min(255, g));\n                                b = Math.max(0, Math.min(255, b));\n                            }\n                            // 将RGB颜色转换为十六进制字符串\n                            const toHex = (c) => `0${c.toString(16)}`.slice(-2);\n                            const colorHex = `#${toHex(r)}${toHex(g)}${toHex(b)}`;\n                            console.log('[DynamicIslandMusicPlayer] 提取的主色调:', colorHex);\n                            // 将计算出的颜色应用为CSS变量\n                            $('.dynamic-island').css('--visualizer-color', colorHex);\n                        }\n                        else {\n                            console.warn('[DynamicIslandMusicPlayer] 没有有效的像素数据');\n                            this.setDefaultVisualizerColor();\n                        }\n                    }\n                    catch (e) {\n                        // 如果出现跨域错误，使用默认颜色\n                        console.warn('[DynamicIslandMusicPlayer] 无法读取图片数据（可能是跨域限制）:', e);\n                        this.setDefaultVisualizerColor();\n                    }\n                }\n                catch (error) {\n                    console.warn('[DynamicIslandMusicPlayer] 颜色分析失败:', error);\n                    this.setDefaultVisualizerColor();\n                }\n            };\n            img.onerror = (e) => {\n                console.warn('[DynamicIslandMusicPlayer] 图片加载失败:', e);\n                this.setDefaultVisualizerColor();\n            };\n            img.src = finalUrl;\n        }\n        catch (error) {\n            console.warn('[DynamicIslandMusicPlayer] 更新可视化器颜色失败:', error);\n            this.setDefaultVisualizerColor();\n        }\n    }\n    /**\n     * 设置默认的可视化器颜色\n     */\n    setDefaultVisualizerColor() {\n        // 默认使用渐变色\n        const defaultColor = 'linear-gradient(to top, #ff6b9d, #c44569)';\n        console.log('[DynamicIslandMusicPlayer] 使用默认颜色');\n        $('.dynamic-island').css('--visualizer-color', defaultColor);\n    }\n    /**\n     * 更新时间显示\n     */\n    updateTimeDisplay() {\n        const currentTime = this.formatTime(this.currentMusic.currentTime);\n        const totalTime = this.formatTime(this.currentMusic.duration);\n        $('.current-time').text(currentTime);\n        $('.total-time').text(totalTime);\n        // 更新进度条\n        if (this.currentMusic.duration > 0) {\n            const progress = (this.currentMusic.currentTime / this.currentMusic.duration) * 100;\n            $('.progress-fill').css('width', `${progress}%`);\n            $('.progress-thumb').css('left', `${progress}%`);\n        }\n    }\n    /**\n     * 格式化时间显示\n     */\n    formatTime(seconds) {\n        if (isNaN(seconds) || seconds < 0) {\n            return '0:00';\n        }\n        const mins = Math.floor(seconds / 60);\n        const secs = Math.floor(seconds % 60);\n        return `${mins}:${secs.toString().padStart(2, '0')}`;\n    }\n    /**\n     * 开始更新循环\n     */\n    startUpdateLoop() {\n        const update = () => {\n            // 更新波形动画\n            if (this.currentState === _types__WEBPACK_IMPORTED_MODULE_4__.PlayState.PLAYING) {\n                this.updateWaveAnimation();\n                const audio = document.querySelector('audio[src*=\"bgm\"]');\n                if (audio) {\n                    this.currentMusic.currentTime = audio.currentTime;\n                    if (this.currentMusic.duration === 0 || isNaN(this.currentMusic.duration)) {\n                        this.currentMusic.duration = audio.duration;\n                    }\n                }\n                else {\n                    this.currentMusic.currentTime = (Date.now() - this.playbackStartTime) / 1000;\n                }\n                if (this.currentMusic.duration > 0 && this.currentMusic.currentTime >= this.currentMusic.duration) {\n                    this.currentMusic.currentTime = this.currentMusic.duration;\n                    this.setState(_types__WEBPACK_IMPORTED_MODULE_4__.PlayState.STOPPED);\n                }\n                this.updateTimeDisplay();\n            }\n            this.animationFrameId = requestAnimationFrame(update);\n        };\n        update();\n    }\n    /**\n     * 更新波形动画\n     */\n    updateWaveAnimation() {\n        $('.wave-bar').each((index, element) => {\n            const $bar = $(element);\n            const height = Math.random() * 8 + 2; // 2-10px\n            $bar.css('height', `${height}px`);\n        });\n    }\n    /**\n     * 获取当前播放状态\n     */\n    getCurrentState() {\n        return this.currentState;\n    }\n    /**\n     * 获取当前音乐信息\n     */\n    getCurrentMusic() {\n        return { ...this.currentMusic };\n    }\n    // ============== 播放列表与切歌辅助 ==============\n    getPlaylistUrls() {\n        try {\n            const panel = _PlaylistPanel__WEBPACK_IMPORTED_MODULE_5__.PlaylistPanel.getInstance();\n            return typeof panel.getUrls === 'function' ? panel.getUrls() : [];\n        }\n        catch {\n            return [];\n        }\n    }\n    findCurrentIndex(urls) {\n        if (!urls.length)\n            return -1;\n        if (!this.currentPlaylistUrl)\n            return -1;\n        return urls.indexOf(this.currentPlaylistUrl);\n    }\n    async playByIndex(idx) {\n        const urls = this.getPlaylistUrls();\n        if (!urls.length)\n            return;\n        const safeIdx = ((idx % urls.length) + urls.length) % urls.length;\n        const url = urls[safeIdx];\n        this.currentPlaylistUrl = url;\n        // 重置文本滚动状态，避免继承上一首歌的滚动配置\n        $('.track-title, .track-artist').removeClass('scrollable').css('--scroll-distance', '0px');\n        await this.importMusic(url);\n        await this.play();\n    }\n    async onTrackEnded() {\n        try {\n            const urls = this.getPlaylistUrls();\n            if (!urls.length) {\n                this.setState(_types__WEBPACK_IMPORTED_MODULE_4__.PlayState.STOPPED);\n                return;\n            }\n            if (this.currentMode === _types__WEBPACK_IMPORTED_MODULE_4__.PlayMode.STOP) {\n                this.setState(_types__WEBPACK_IMPORTED_MODULE_4__.PlayState.STOPPED);\n                return;\n            }\n            if (this.currentMode === _types__WEBPACK_IMPORTED_MODULE_4__.PlayMode.SINGLE) {\n                // 已通过 audio.loop 实现单曲循环，这里无需处理\n                if (this.audioHelper && !this.audioHelper.loop) {\n                    // 兜底：重新播放\n                    await this.play();\n                }\n                return;\n            }\n            const curIdx = this.findCurrentIndex(urls);\n            if (this.currentMode === _types__WEBPACK_IMPORTED_MODULE_4__.PlayMode.RANDOM) {\n                if (urls.length === 1) {\n                    await this.playByIndex(0);\n                    return;\n                }\n                let nextIdx = curIdx;\n                for (let i = 0; i < 5 && nextIdx === curIdx; i++) {\n                    nextIdx = Math.floor(Math.random() * urls.length);\n                }\n                if (nextIdx === curIdx)\n                    nextIdx = (curIdx + 1) % urls.length;\n                await this.playByIndex(nextIdx);\n                return;\n            }\n            // REPEAT 顺序播放\n            const nextIdx = curIdx < 0 ? 0 : (curIdx + 1) % urls.length;\n            await this.playByIndex(nextIdx);\n        }\n        catch (err) {\n            console.warn('[DynamicIslandMusicPlayer] 自动切下一首失败:', err);\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_4__.PlayState.STOPPED);\n        }\n    }\n    /**\n     * 销毁播放器\n     */\n    destroy() {\n        if (this.animationFrameId) {\n            cancelAnimationFrame(this.animationFrameId);\n        }\n        $(document).off('click', '.dynamic-island');\n        $(document).off('click', '.play-btn');\n        $(document).off('click', '.mode-btn');\n        $(document).off('click', '.import-btn');\n        $(document).off('click', '.progress-track');\n        this.$container.remove();\n        console.log('[DynamicIslandMusicPlayer] 灵动岛音乐播放器已销毁');\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZHluYW1pY0lzbGFuZC9EeW5hbWljSXNsYW5kTXVzaWNQbGF5ZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBOzs7O0dBSUc7QUFFMkI7QUFDSTtBQUM0QjtBQUNWO0FBQ0s7QUFDVDtBQUVoRCxVQUFVO0FBQ1YsTUFBTSxnQkFBZ0IsR0FBYztJQUNsQyxLQUFLLEVBQUUsTUFBTTtJQUNiLE1BQU0sRUFBRSxPQUFPO0lBQ2YsUUFBUSxFQUFFLENBQUM7SUFDWCxXQUFXLEVBQUUsQ0FBQztDQUNmLENBQUM7QUFFSyxNQUFNLHdCQUF3QjtJQUMzQixNQUFNLENBQUMsUUFBUSxDQUEyQjtJQUMxQyxVQUFVLENBQXVCO0lBQ2pDLE9BQU8sQ0FBdUI7SUFDOUIsWUFBWSxHQUFjLDZDQUFTLENBQUMsT0FBTyxDQUFDO0lBQzVDLFdBQVcsR0FBYSw0Q0FBUSxDQUFDLE1BQU0sQ0FBQztJQUN4QyxZQUFZLEdBQWMsZ0JBQWdCLENBQUM7SUFDM0MsVUFBVSxHQUFZLEtBQUssQ0FBQztJQUM1QixnQkFBZ0IsR0FBa0IsSUFBSSxDQUFDO0lBQ3ZDLGlCQUFpQixHQUFXLENBQUMsQ0FBQztJQUM5QixXQUFXLEdBQTRCLElBQUksQ0FBQztJQUM3QyxrQkFBa0IsR0FBa0IsSUFBSSxDQUFDO0lBRWhEO1FBQ0UsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO0lBQ3BCLENBQUM7SUFFRDs7T0FFRztJQUNJLE1BQU0sQ0FBQyxXQUFXO1FBQ3ZCLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUN2Qyx3QkFBd0IsQ0FBQyxRQUFRLEdBQUcsSUFBSSx3QkFBd0IsRUFBRSxDQUFDO1FBQ3JFLENBQUM7UUFDRCxPQUFPLHdCQUF3QixDQUFDLFFBQVEsQ0FBQztJQUMzQyxDQUFDO0lBRUQ7O09BRUc7SUFDSyxVQUFVO1FBQ2hCLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO1FBQzNCLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUNsQixJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7UUFFdkIsT0FBTyxDQUFDLEdBQUcsQ0FBQywwQ0FBMEMsQ0FBQyxDQUFDO0lBQzFELENBQUM7SUFFRDs7T0FFRztJQUNLLG1CQUFtQjtRQUN6QixzQkFBc0I7UUFDdEIsTUFBTSxjQUFjLEdBQUcsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBRXpDLElBQUksY0FBYyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUM5QixtQkFBbUI7WUFDbkIsY0FBYyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFDO1FBQ3RELENBQUM7YUFBTSxDQUFDO1lBQ04saUNBQWlDO1lBQ2pDLE1BQU0sZUFBZSxHQUFHLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1lBQzlDLElBQUksZUFBZSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztnQkFDL0IsZUFBZSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFDO1lBQ2xELENBQUM7UUFDSCxDQUFDO1FBRUQsSUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUMsMkJBQTJCLENBQUMsQ0FBQztRQUNqRCxJQUFJLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBQ3BDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0lBQzFCLENBQUM7SUFFRDs7T0FFRztJQUNLLGdCQUFnQjtRQUN0QixPQUFPOztrREFFdUMsSUFBSSxDQUFDLFlBQVk7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7S0FxRjlELENBQUM7SUFDSixDQUFDO0lBRUQ7O09BRUc7SUFDSyxVQUFVO1FBQ2hCLGVBQWU7UUFDZixDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxDQUFDLENBQUMsRUFBRTtZQUM3QyxDQUFDLENBQUMsZUFBZSxFQUFFLENBQUM7WUFDcEIsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1FBQ3hCLENBQUMsQ0FBQyxDQUFDO1FBRUgsVUFBVTtRQUNWLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLFdBQVcsRUFBRSxDQUFDLENBQUMsRUFBRTtZQUN2QyxDQUFDLENBQUMsZUFBZSxFQUFFLENBQUM7WUFDcEIsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQ3pCLENBQUMsQ0FBQyxDQUFDO1FBRUgsUUFBUTtRQUNSLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLFdBQVcsRUFBRSxDQUFDLENBQUMsRUFBRTtZQUN2QyxDQUFDLENBQUMsZUFBZSxFQUFFLENBQUM7WUFDcEIsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQ3ZCLENBQUMsQ0FBQyxDQUFDO1FBRUgsUUFBUTtRQUNSLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLFdBQVcsRUFBRSxDQUFDLENBQUMsRUFBRTtZQUN2QyxDQUFDLENBQUMsZUFBZSxFQUFFLENBQUM7WUFDcEIsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQ25CLENBQUMsQ0FBQyxDQUFDO1FBRUgsU0FBUztRQUNULENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLFdBQVcsRUFBRSxDQUFDLENBQUMsRUFBRTtZQUN2QyxDQUFDLENBQUMsZUFBZSxFQUFFLENBQUM7WUFDcEIsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQ25CLENBQUMsQ0FBQyxDQUFDO1FBRUgsT0FBTztRQUNQLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLGVBQWUsRUFBRSxDQUFDLENBQUMsRUFBRTtZQUMzQyxDQUFDLENBQUMsZUFBZSxF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QUVHO0lBQ0ksT0FBTztRQUNaLElBQUksSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7WUFDMUIsb0JBQW9CLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDOUMsQ0FBQztRQUVELENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLGlCQUFpQixDQUFDLENBQUM7UUFDNUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsV0FBVyxDQUFDLENBQUM7UUFDdEMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsV0FBVyxDQUFDLENBQUM7UUFDdEMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsYUFBYSxDQUFDLENBQUM7UUFDeEMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztRQUU1QyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBRXpCLE9BQU8sQ0FBQyxHQUFHLENBQUMsd0NBQXdDLENBQUMsQ0FBQztJQUN4RCxDQUFDO0NBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WkmuS6keeGii/lpIfku70v57uZcm92b+eahC9tb2R1bGVzL2R5bmFtaWNJc2xhbmQvRHluYW1pY0lzbGFuZE11c2ljUGxheWVyLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIER5bmFtaWNJc2xhbmRNdXNpY1BsYXllciAtIOeBteWKqOWym+mfs+S5kOaSreaUvuWZqFxuICog5bCG5Lyg57uf55qEcGhvbmUtbm90Y2jmlLnpgKDkuLrnjrDku6PljJbnmoTngbXliqjlspvpn7PkuZDmkq3mlL7lmahcbiAqIOaUr+aMgemfs+S5kOaSreaUvuaOp+WItuOAgeeKtuaAgeaYvuekuuWSjOS6pOS6kuWKqOeUu1xuICovXG5cbmltcG9ydCAnLi9keW5hbWljSXNsYW5kLnNjc3MnO1xuaW1wb3J0IHsgQ09ORklHIH0gZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IHsgTmV0ZWFzZU11c2ljUmVzb2x2ZXIgfSBmcm9tICcuL05ldGVhc2VNdXNpY1Jlc29sdmVyJztcbmltcG9ydCB7IFFRTXVzaWNSZXNvbHZlciB9IGZyb20gJy4vUVFNdXNpY1Jlc29sdmVyJztcbmltcG9ydCB7IE11c2ljSW5mbywgUGxheU1vZGUsIFBsYXlTdGF0ZSB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgUGxheWxpc3RQYW5lbCB9IGZyb20gJy4vUGxheWxpc3RQYW5lbCc7XG5cbi8vIOmfs+S5kOS/oeaBr+m7mOiupOWAvFxuY29uc3QgZGVmYXVsdE11c2ljSW5mbzogTXVzaWNJbmZvID0ge1xuICB0aXRsZTogJ+acquefpeatjOabsicsXG4gIGFydGlzdDogJ+acquefpeiJuuacr+WuticsXG4gIGR1cmF0aW9uOiAwLFxuICBjdXJyZW50VGltZTogMCxcbn07XG5cbmV4cG9ydCBjbGFzcyBEeW5hbWljSXNsYW5kTXVzaWNQbGF5ZXIge1xuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogRHluYW1pY0lzbGFuZE11c2ljUGxheWVyO1xuICBwcml2YXRlICRjb250YWluZXIhOiBKUXVlcnk8SFRNTEVsZW1lbnQ+O1xuICBwcml2YXRlICRpc2xhbmQhOiBKUXVlcnk8SFRNTEVsZW1lbnQ+O1xuICBwcml2YXRlIGN1cnJlbnRTdGF0ZTogUGxheVN0YXRlID0gUGxheVN0YXRlLlNUT1BQRUQ7XG4gIHByaXZhdGUgY3VycmVudE1vZGU6IFBsYXlNb2RlID0gUGxheU1vZGUuUkVQRUFUO1xuICBwcml2YXRlIGN1cnJlbnRNdXNpYzogTXVzaWNJbmZvID0gZGVmYXVsdE11c2ljSW5mbztcbiAgcHJpdmF0ZSBpc0V4cGFuZGVkOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgYW5pbWF0aW9uRnJhbWVJZDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgcGxheWJhY2tTdGFydFRpbWU6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgYXVkaW9IZWxwZXI6IEhUTUxBdWRpb0VsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgcHVibGljIGN1cnJlbnRQbGF5bGlzdFVybDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bljZXkvovlrp7kvotcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogRHluYW1pY0lzbGFuZE11c2ljUGxheWVyIHtcbiAgICBpZiAoIUR5bmFtaWNJc2xhbmRNdXNpY1BsYXllci5pbnN0YW5jZSkge1xuICAgICAgRHluYW1pY0lzbGFuZE11c2ljUGxheWVyLmluc3RhbmNlID0gbmV3IER5bmFtaWNJc2xhbmRNdXNpY1BsYXllcigpO1xuICAgIH1cbiAgICByZXR1cm4gRHluYW1pY0lzbGFuZE11c2ljUGxheWVyLmluc3RhbmNlO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIneWni+WMlueBteWKqOWym+mfs+S5kOaSreaUvuWZqFxuICAgKi9cbiAgcHJpdmF0ZSBpbml0aWFsaXplKCk6IHZvaWQge1xuICAgIHRoaXMuY3JlYXRlRHluYW1pY0lzbGFuZCgpO1xuICAgIHRoaXMuYmluZEV2ZW50cygpO1xuICAgIHRoaXMuc3RhcnRVcGRhdGVMb29wKCk7XG5cbiAgICBjb25zb2xlLmxvZygnW0R5bmFtaWNJc2xhbmRNdXNpY1BsYXllcl0g54G15Yqo5bKb6Z+z5LmQ5pKt5pS+5Zmo5Yid5aeL5YyW5a6M5oiQJyk7XG4gIH1cblxuICAvKipcbiAgICog5Yib5bu654G15Yqo5bKbRE9N57uT5p6EXG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZUR5bmFtaWNJc2xhbmQoKTogdm9pZCB7XG4gICAgLy8g5p+l5om+546w5pyJ55qEcGhvbmUtbm90Y2jlubbmm7/mjaJcbiAgICBjb25zdCAkZXhpc3RpbmdOb3RjaCA9ICQoJy5waG9uZS1ub3RjaCcpO1xuXG4gICAgaWYgKCRleGlzdGluZ05vdGNoLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIOabv+aNoueOsOacieeahHBob25lLW5vdGNoXG4gICAgICAkZXhpc3RpbmdOb3RjaC5yZXBsYWNlV2l0aCh0aGlzLmNyZWF0ZUlzbGFuZEhUTUwoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIOWmguaenOayoeacieaJvuWIsO+8jOWIm+W7uuaWsOeahOW5tua3u+WKoOWIsHBob25lLWNvbnRhaW5lclxuICAgICAgY29uc3QgJHBob25lQ29udGFpbmVyID0gJCgnLnBob25lLWNvbnRhaW5lcicpO1xuICAgICAgaWYgKCRwaG9uZUNvbnRhaW5lci5sZW5ndGggPiAwKSB7XG4gICAgICAgICRwaG9uZUNvbnRhaW5lci5hcHBlbmQodGhpcy5jcmVhdGVJc2xhbmRIVE1MKCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuJGNvbnRhaW5lciA9ICQoJy5keW5hbWljLWlzbGFuZC1jb250YWluZXInKTtcbiAgICB0aGlzLiRpc2xhbmQgPSAkKCcuZHluYW1pYy1pc2xhbmQnKTtcbiAgICB0aGlzLnVwZGF0ZU1vZGVCdXR0b24oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliJvlu7rngbXliqjlsptIVE1M57uT5p6EIC0gaU9T6aOO5qC8XG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZUlzbGFuZEhUTUwoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFxuICAgICAgPGRpdiBjbGFzcz1cImR5bmFtaWMtaXNsYW5kLWNvbnRhaW5lclwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZHluYW1pYy1pc2xhbmRcIiBkYXRhLXN0YXRlPVwiJHt0aGlzLmN1cnJlbnRTdGF0ZX1cIj5cbiAgICAgICAgICA8IS0tIOe0p+WHkeeKtuaAgSAtIGlPU+mjjuagvCAtLT5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiaXNsYW5kLWNvbXBhY3RcIj5cbiAgICAgICAgICAgIDwhLS0g5bem5L6n5LiT6L6R5bCB6Z2iIC0tPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbXBhY3QtYWxidW0tY292ZXJcIj5cbiAgICAgICAgICAgICAgPGltZyBzcmM9XCJcIiBhbHQ9XCLkuJPovpHlsIHpnaJcIiBjbGFzcz1cImNvbXBhY3QtY292ZXItaW1hZ2VcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbXBhY3QtY292ZXItcGxhY2Vob2xkZXJcIj7imao8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPCEtLSDlj7Pkvqfpn7PkuZDmjIfnpLrlmaggLS0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibXVzaWMtaW5kaWNhdG9yXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ3YXZlLWJhcnNcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwid2F2ZS1iYXJcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwid2F2ZS1iYXJcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwid2F2ZS1iYXJcIj48L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICA8IS0tIOWxleW8gOeKtuaAgSAtIGlPU+mjjuagvOW4g+WxgCAtLT5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiaXNsYW5kLWV4cGFuZGVkXCI+XG4gICAgICAgICAgICA8IS0tIOmhtumDqOWMuuWfn++8muS4k+i+keWwgemdoiArIOatjOabsuS/oeaBryArIOmfs+mikeWPr+inhuWMliAtLT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0b3Atc2VjdGlvblwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWxidW0tY292ZXJcIj5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIlwiIGFsdD1cIuS4k+i+keWwgemdolwiIGNsYXNzPVwiY292ZXItaW1hZ2VcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY292ZXItcGxhY2Vob2xkZXJcIj7imao8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidHJhY2staW5mb1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0cmFjay10aXRsZVwiPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0cmFjay10ZXh0XCI+5pyq5pKt5pS+6Z+z5LmQPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0cmFjay1hcnRpc3RcIj5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidHJhY2stdGV4dFwiPueCueWHu+mAieaLqemfs+S5kDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYXVkaW8tdmlzdWFsaXplclwiIGRhdGEtY29sb3I9XCJkZWZhdWx0XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInZpc3VhbGl6ZXItYmFyXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInZpc3VhbGl6ZXItYmFyXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInZpc3VhbGl6ZXItYmFyXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInZpc3VhbGl6ZXItYmFyXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInZpc3VhbGl6ZXItYmFyXCI+PC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDwhLS0g6L+b5bqm5p2h5Yy65Z+fIC0tPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2dyZXNzLXNlY3Rpb25cIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRpbWUtZGlzcGxheVwiPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY3VycmVudC10aW1lXCI+MDowMDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRvdGFsLXRpbWVcIj4wOjAwPC9zcGFuPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2dyZXNzLWJhclwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9ncmVzcy10cmFja1wiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2dyZXNzLWZpbGxcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9ncmVzcy10aHVtYlwiPjwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8IS0tIOW6lemDqOaOp+WItuWMuuWfnyAtLT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJib3R0b20tc2VjdGlvblwiPlxuICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiY29udHJvbC1idG4gcHJldi1idG5cIiB0aXRsZT1cIuS4iuS4gOmmllwiPuKXgOKXgDwvYnV0dG9uPlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImNvbnRyb2wtYnRuIHBsYXktYnRuXCIgdGl0bGU9XCLmkq3mlL4v5pqC5YGcXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBsYXktaWNvblwiPjwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwYXVzZS1pY29uXCI+PC9kaXY+XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImNvbnRyb2wtYnRuIG5leHQtYnRuXCIgdGl0bGU9XCLkuIvkuIDpppZcIj7ilrbilrY8L2J1dHRvbj5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJjb250cm9sLWJ0biBtb2RlLWJ0blwiIHRpdGxlPVwi5pKt5pS+5qih5byPXCI+XG4gICAgICAgICAgICAgICAgPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgd2lkdGg9XCIyMFwiIGhlaWdodD1cIjIwXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+XG4gICAgICAgICAgICAgICAgICA8cGF0aCBjbGFzcz1cIm1vZGUtaWNvbi1wYXRoXCIgZD1cIk0xMiw2VjlMMTYsNUwxMiwxVjRDNy41OCw0IDQsNy41OCA0LDEyQzQsMTMuODUgNC42MywxNS41NSA1LjY5LDE2Ljg4TDcuMSwxNS40N0M2LjQyLDE0LjUzIDYsMTMuMzIgNiwxMkM2LDguNjkgOC42OSw2IDEyLDZNMTguMzEsNy4xMkwxNi45LDguNTNDMTcuNTgsOS40NyAxOCwxMC42OCAxOCwxMkMxOCwxNS4zMSAxNS4zMSwxOCAxMiwxOFYxNUw4LDE5TDEyLDIzVjIwQzE2LjQyLDIwIDIwLDE2LjQyIDIwLDEyQzIwLDEwLjE1IDE5LjM3LDguNDUgMTguMzEsNy4xMlpcIiAvPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJjb250cm9sLWJ0biBwbGF5bGlzdC1idG5cIiB0aXRsZT1cIuatjOWNlVwiPlxuICAgICAgICAgICAgICAgIDxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiIHdpZHRoPVwiMjBcIiBoZWlnaHQ9XCIyMFwiPlxuICAgICAgICAgICAgICAgICAgPHBhdGggZmlsbD1cImN1cnJlbnRDb2xvclwiIGQ9XCJNMTUsNkgzVjhIMTVWNk0xNSwxMEgzVjEySDE1VjEwTTMsMTZIMTFWMTRIM1YxNk0xNyw2VjE0LjE4QzE2LjY5LDE0LjA3IDE2LjM1LDE0IDE2LDE0QTMsMyAwIDAsMCAxMywxN0EzLDMgMCAwLDAgMTYsMjBBMywzIDAgMCwwIDE5LDE3VjhIMjJWNkgxN1pcIiAvPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICAvKipcbiAgICog57uR5a6a5LqL5Lu255uR5ZCs5ZmoXG4gICAqL1xuICBwcml2YXRlIGJpbmRFdmVudHMoKTogdm9pZCB7XG4gICAgLy8g54K55Ye754G15Yqo5bKb5YiH5o2i5bGV5byAL+aUtue8qVxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuZHluYW1pYy1pc2xhbmQnLCBlID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0aGlzLnRvZ2dsZUV4cGFuZGVkKCk7XG4gICAgfSk7XG5cbiAgICAvLyDmkq3mlL4v5pqC5YGc5oyJ6ZKuXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5wbGF5LWJ0bicsIGUgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMudG9nZ2xlUGxheVBhdXNlKCk7XG4gICAgfSk7XG5cbiAgICAvLyDkuIrkuIDpppbmjInpkq5cbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnByZXYtYnRuJywgZSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy5wcmV2aW91c1RyYWNrKCk7XG4gICAgfSk7XG5cbiAgICAvLyDkuIvkuIDpppbmjInpkq5cbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLm5leHQtYnRuJywgZSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy5uZXh0VHJhY2soKTtcbiAgICB9KTtcblxuICAgIC8vIOaSreaUvuaooeW8j+aMiemSrlxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcubW9kZS1idG4nLCBlID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0aGlzLmN5Y2xlTW9kZSgpO1xuICAgIH0pO1xuXG4gICAgLy8g5q2M5Y2V5oyJ6ZKuXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5wbGF5bGlzdC1idG4nLCBlID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0aGlzLnNob3dQbGF5bGlzdCgpO1xuICAgIH0pO1xuXG4gICAgLy8g6L+b5bqm5p2h5Lqk5LqSXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5wcm9ncmVzcy10cmFjaycsIGUgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMuaGFuZGxlUHJvZ3Jlc3NDbGljayhlKTtcbiAgICB9KTtcblxuICAgIC8vIOeCueWHu+WFtuS7luWcsOaWueaUtue8qeeBteWKqOWym1xuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsIGUgPT4ge1xuICAgICAgaWYgKCEkKGUudGFyZ2V0KS5jbG9zZXN0KCcuZHluYW1pYy1pc2xhbmQtY29udGFpbmVyJykubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuY29sbGFwc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIOeCueWHu+S4k+i+keWwgemdouaIluatjOabsuS/oeaBr+WvvOWFpemfs+S5kFxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuYWxidW0tY292ZXIsIC50cmFjay1pbmZvJywgZSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy5zaG93SW1wb3J0RGlhbG9nKCk7XG4gICAgfSk7XG5cbiAgICAvLyDku47mrYzljZXpnaLmnb/lj5HotbfnmoTmkq3mlL7kuovku7ZcbiAgICAkKGRvY3VtZW50KS5vbignZGk6cGxheWxpc3Q6cGxheScsIGFzeW5jIChfZSwgcGF5bG9hZDogYW55KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1cmwgPSBwYXlsb2FkPy51cmwgYXMgc3RyaW5nO1xuICAgICAgICBpZiAoIXVybCkgcmV0dXJuO1xuICAgICAgICB0aGlzLmN1cnJlbnRQbGF5bGlzdFVybCA9IHVybDtcbiAgICAgICAgYXdhaXQgdGhpcy5pbXBvcnRNdXNpYyh1cmwpO1xuICAgICAgICBhd2FpdCB0aGlzLnBsYXkoKTtcbiAgICAgICAgaWYgKCF0aGlzLmlzRXhwYW5kZWQpIHtcbiAgICAgICAgICB0aGlzLmV4cGFuZCgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIOinpuWPkeatjOWNleWIt+aWsOS7peabtOaWsOmrmOS6rlxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBjb25zdCBwYW5lbCA9IFBsYXlsaXN0UGFuZWwuZ2V0SW5zdGFuY2UoKTtcbiAgICAgICAgICAocGFuZWwgYXMgYW55KS5yZW5kZXI/LigpO1xuICAgICAgICB9LCAxMDApO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW0R5bmFtaWNJc2xhbmRNdXNpY1BsYXllcl0g5LuO5q2M5Y2V5pKt5pS+5aSx6LSlOicsIGVycm9yKTtcbiAgICAgICAgdG9hc3RyLmVycm9yKCfmkq3mlL7lpLHotKUnLCAn6Z+z5LmQ5pKt5pS+5ZmoJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog5YiH5o2i5bGV5byAL+aUtue8qeeKtuaAgVxuICAgKi9cbiAgcHJpdmF0ZSB0b2dnbGVFeHBhbmRlZCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc0V4cGFuZGVkKSB7XG4gICAgICB0aGlzLmNvbGxhcHNlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZXhwYW5kKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOWxleW8gOeBteWKqOWym1xuICAgKi9cbiAgcHJpdmF0ZSBleHBhbmQoKTogdm9pZCB7XG4gICAgdGhpcy5pc0V4cGFuZGVkID0gdHJ1ZTtcbiAgICB0aGlzLiRpc2xhbmQuYWRkQ2xhc3MoJ2V4cGFuZGVkJyk7XG5cbiAgICAvLyDmt7vliqDlsZXlvIDliqjnlLsgLSDku47kuK3lv4PlkJHkuIvlsZXlvIBcbiAgICB0aGlzLiRpc2xhbmQuY3NzKCd0cmFuc2Zvcm0nLCAnc2NhbGUoMC45NSknKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuJGlzbGFuZC5jc3MoJ3RyYW5zZm9ybScsICdzY2FsZSgxKScpO1xuICAgIH0sIDUwKTtcblxuICAgIC8vIOWxleW8gOWujOaIkOWQju+8jOetieW+hei/h+a4oee7k+adn+WGjemHjeaWsOiuoeeul+aWh+acrOa7muWKqFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY29uc3QgJHRpdGxlID0gJCgnLnRyYWNrLXRpdGxlJyk7XG4gICAgICBjb25zdCAkdGl0bGVUZXh0ID0gJHRpdGxlLmZpbmQoJy50cmFjay10ZXh0Jyk7XG4gICAgICB0aGlzLmNoZWNrVGV4dFNjcm9sbGFibGUoJHRpdGxlLCAkdGl0bGVUZXh0KTtcbiAgICAgIGNvbnN0ICRhcnRpc3QgPSAkKCcudHJhY2stYXJ0aXN0Jyk7XG4gICAgICBjb25zdCAkYXJ0aXN0VGV4dCA9ICRhcnRpc3QuZmluZCgnLnRyYWNrLXRleHQnKTtcbiAgICAgIHRoaXMuY2hlY2tUZXh0U2Nyb2xsYWJsZSgkYXJ0aXN0LCAkYXJ0aXN0VGV4dCk7XG4gICAgfSwgNDUwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmlLbnvKnngbXliqjlsptcbiAgICovXG4gIHByaXZhdGUgY29sbGFwc2UoKTogdm9pZCB7XG4gICAgdGhpcy5pc0V4cGFuZGVkID0gZmFsc2U7XG4gICAgdGhpcy4kaXNsYW5kLnJlbW92ZUNsYXNzKCdleHBhbmRlZCcpO1xuICAgIC8vIOa4hemZpOWPmOaNou+8jOaBouWkjem7mOiupOeKtuaAgVxuICAgIHRoaXMuJGlzbGFuZC5jc3MoJ3RyYW5zZm9ybScsICcnKTtcblxuICAgIC8vIOaUtue8qeaXtuemgeeUqOi3kemprOeBr+W5tuWkjeS9jea7muWKqOi3neemu++8jOmBv+WFjeWcqOaUtue8qeaAgeivr+WIpFxuICAgICQoJy50cmFjay10aXRsZSwgLnRyYWNrLWFydGlzdCcpLnJlbW92ZUNsYXNzKCdzY3JvbGxhYmxlJykuY3NzKCctLXNjcm9sbC1kaXN0YW5jZScsICcwcHgnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliIfmjaLmkq3mlL4v5pqC5YGcXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHRvZ2dsZVBsYXlQYXVzZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKHRoaXMuY3VycmVudFN0YXRlID09PSBQbGF5U3RhdGUuUExBWUlORykge1xuICAgICAgICBhd2FpdCB0aGlzLnBhdXNlKCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuY3VycmVudFN0YXRlID09PSBQbGF5U3RhdGUuUEFVU0VEKSB7XG4gICAgICAgIGF3YWl0IHRoaXMucGxheSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8g6Iul5b2T5YmN5rKh5pyJ5pKt5pS+5YaF5a6577ya5LyY5YWI5pKt5pS+5q2M5Y2V56ys5LiA6aaW77yb6Iul5q2M5Y2V5Li656m65YiZ57u05oyB5Y6f6YC76L6R77yI5o+Q56S65bm25by55Ye65a+85YWl77yJXG4gICAgICAgIGNvbnN0IGZpcnN0ID0gUGxheWxpc3RQYW5lbC5nZXRJbnN0YW5jZSgpLmdldEZpcnN0VXJsPy4oKTtcbiAgICAgICAgaWYgKGZpcnN0KSB7XG4gICAgICAgICAgdGhpcy5jdXJyZW50UGxheWxpc3RVcmwgPSBmaXJzdDtcbiAgICAgICAgICBhd2FpdCB0aGlzLmltcG9ydE11c2ljKGZpcnN0KTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsYXkoKTtcbiAgICAgICAgICBpZiAoIXRoaXMuaXNFeHBhbmRlZCkgdGhpcy5leHBhbmQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b2FzdHIuaW5mbygn6K+35YWI5a+85YWl6Z+z5LmQJywgJ+aPkOekuicpO1xuICAgICAgICAgIHRoaXMuc2hvd0ltcG9ydERpYWxvZygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tEeW5hbWljSXNsYW5kTXVzaWNQbGF5ZXJdIOaSreaUvuaOp+WItuWksei0pTonLCBlcnJvcik7XG4gICAgICB0b2FzdHIuZXJyb3IoJ+aSreaUvuaOp+WItuWksei0pScsICfplJnor68nKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5pKt5pS+6Z+z5LmQXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHBsYXkoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5zZXRTdGF0ZShQbGF5U3RhdGUuTE9BRElORyk7XG5cbiAgICB0cnkge1xuICAgICAgLy8g5LuF5L2/55SoSFRNTCBBdWRpb+aSreaUvlxuICAgICAgaWYgKHRoaXMuYXVkaW9IZWxwZXIpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hdWRpb0hlbHBlci5wbGF5KCk7XG4gICAgICAgIHRoaXMucGxheWJhY2tTdGFydFRpbWUgPSBEYXRlLm5vdygpIC0gdGhpcy5jdXJyZW50TXVzaWMuY3VycmVudFRpbWUgKiAxMDAwO1xuICAgICAgICB0aGlzLnNldFN0YXRlKFBsYXlTdGF0ZS5QTEFZSU5HKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRvYXN0ci5pbmZvKCfor7flhYjlr7zlhaXpn7PkuZAnLCAn5o+Q56S6Jyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoUGxheVN0YXRlLlNUT1BQRUQpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOaaguWBnOmfs+S5kFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBwYXVzZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8g5LuF5L2/55SoSFRNTCBBdWRpb+aaguWBnFxuICAgICAgaWYgKHRoaXMuYXVkaW9IZWxwZXIpIHtcbiAgICAgICAgdGhpcy5hdWRpb0hlbHBlci5wYXVzZSgpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKFBsYXlTdGF0ZS5QQVVTRUQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbRHluYW1pY0lzbGFuZE11c2ljUGxheWVyXSDmmoLlgZzlpLHotKU6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOS4iuS4gOmmllxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBwcmV2aW91c1RyYWNrKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1cmxzID0gdGhpcy5nZXRQbGF5bGlzdFVybHMoKTtcbiAgICAgIGlmICh1cmxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0b2FzdHIuaW5mbygn5q2M5Y2V5Li656m6JywgJ+mfs+S5kOaSreaUvuWZqCcpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBjdXJJZHggPSB0aGlzLmZpbmRDdXJyZW50SW5kZXgodXJscyk7XG4gICAgICBjb25zdCBwcmV2SWR4ID0gY3VySWR4IDwgMCA/IDAgOiAoY3VySWR4IC0gMSArIHVybHMubGVuZ3RoKSAlIHVybHMubGVuZ3RoO1xuICAgICAgYXdhaXQgdGhpcy5wbGF5QnlJbmRleChwcmV2SWR4KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW0R5bmFtaWNJc2xhbmRNdXNpY1BsYXllcl0g5LiK5LiA6aaW5aSx6LSlOicsIGVycm9yKTtcbiAgICAgIHRvYXN0ci5lcnJvcign5LiK5LiA6aaW5aSx6LSlJywgJ+mUmeivrycpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDkuIvkuIDpppZcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgbmV4dFRyYWNrKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1cmxzID0gdGhpcy5nZXRQbGF5bGlzdFVybHMoKTtcbiAgICAgIGlmICh1cmxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0b2FzdHIuaW5mbygn5q2M5Y2V5Li656m6JywgJ+mfs+S5kOaSreaUvuWZqCcpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBjdXJJZHggPSB0aGlzLmZpbmRDdXJyZW50SW5kZXgodXJscyk7XG4gICAgICBsZXQgbmV4dElkeCA9IGN1cklkeCA8IDAgPyAwIDogKGN1cklkeCArIDEpICUgdXJscy5sZW5ndGg7XG4gICAgICBpZiAodGhpcy5jdXJyZW50TW9kZSA9PT0gUGxheU1vZGUuUkFORE9NKSB7XG4gICAgICAgIGlmICh1cmxzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICBsZXQgciA9IGN1cklkeDtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDUgJiYgciA9PT0gY3VySWR4OyBpKyspIHtcbiAgICAgICAgICAgIHIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB1cmxzLmxlbmd0aCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG5leHRJZHggPSByID09PSBjdXJJZHggPyAoY3VySWR4ICsgMSkgJSB1cmxzLmxlbmd0aCA6IHI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV4dElkeCA9IDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMucGxheUJ5SW5kZXgobmV4dElkeCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tEeW5hbWljSXNsYW5kTXVzaWNQbGF5ZXJdIOS4i+S4gOmmluWksei0pTonLCBlcnJvcik7XG4gICAgICB0b2FzdHIuZXJyb3IoJ+S4i+S4gOmmluWksei0pScsICfplJnor68nKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5pi+56S65q2M5Y2VXG4gICAqL1xuICBwcml2YXRlIHNob3dQbGF5bGlzdCgpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFuZWwgPSBQbGF5bGlzdFBhbmVsLmdldEluc3RhbmNlKCk7XG4gICAgICBwYW5lbC5vcGVuKCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbRHluYW1pY0lzbGFuZE11c2ljUGxheWVyXSDmiZPlvIDmrYzljZXpnaLmnb/lpLHotKU6JywgZXJyKTtcbiAgICAgIHRvYXN0ci5lcnJvcign5omT5byA5q2M5Y2V6Z2i5p2/5aSx6LSlJywgJ+mfs+S5kOaSreaUvuWZqCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDmmL7npLrlr7zlhaXpn7PkuZDlr7nor53moYZcbiAgICovXG4gIHByaXZhdGUgc2hvd0ltcG9ydERpYWxvZygpOiB2b2lkIHtcbiAgICBjb25zdCBtdXNpY1VybCA9IHByb21wdCgn6K+36L6T5YWl6Z+z5LmQ6ZO+5o6lOicsICdodHRwczovLycpO1xuXG4gICAgaWYgKG11c2ljVXJsICYmIG11c2ljVXJsLnRyaW0oKSAmJiBtdXNpY1VybCAhPT0gJ2h0dHBzOi8vJykge1xuICAgICAgdGhpcy5pbXBvcnRNdXNpYyhtdXNpY1VybC50cmltKCkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlr7zlhaXpn7PkuZBcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgaW1wb3J0TXVzaWModXJsOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5zZXRTdGF0ZShQbGF5U3RhdGUuTE9BRElORyk7XG4gICAgICB0aGlzLmN1cnJlbnRQbGF5bGlzdFVybCA9IHVybDtcblxuICAgICAgbGV0IG11c2ljSW5mbzogTXVzaWNJbmZvIHwgbnVsbCA9IG51bGw7XG4gICAgICBsZXQgYXVkaW9VcmxUb1BsYXk6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHVybDtcblxuICAgICAgLy8g572R5piT5LqR6Z+z5LmQ6Kej5p6QXG4gICAgICBpZiAoTmV0ZWFzZU11c2ljUmVzb2x2ZXIuaXNOZXRlYXNlTXVzaWNVcmwodXJsKSkge1xuICAgICAgICBtdXNpY0luZm8gPSBhd2FpdCBOZXRlYXNlTXVzaWNSZXNvbHZlci5yZXNvbHZlKHVybCk7XG4gICAgICAgIGlmIChtdXNpY0luZm8gJiYgbXVzaWNJbmZvLmF1ZGlvVXJsKSB7XG4gICAgICAgICAgYXVkaW9VcmxUb1BsYXkgPSBtdXNpY0luZm8uYXVkaW9Vcmw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIFFRIOmfs+S5kOino+aekFxuICAgICAgZWxzZSBpZiAoUVFNdXNpY1Jlc29sdmVyLmlzUVFNdXNpY1VybCh1cmwpKSB7XG4gICAgICAgIG11c2ljSW5mbyA9IGF3YWl0IFFRTXVzaWNSZXNvbHZlci5yZXNvbHZlKHVybCk7XG4gICAgICAgIGlmIChtdXNpY0luZm8gJiYgbXVzaWNJbmZvLmF1ZGlvVXJsKSB7XG4gICAgICAgICAgYXVkaW9VcmxUb1BsYXkgPSBtdXNpY0luZm8uYXVkaW9Vcmw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8g5pyq6I635Y+W5Yiw5Y+v5pKt5pS+6ZO+5o6l5YiZ5qCH6K6w5Li65peg5pWI77yM6LWw6ZSZ6K+v5o+Q56S65YiG5pSvXG4gICAgICAgICAgYXVkaW9VcmxUb1BsYXkgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGF1ZGlvVXJsVG9QbGF5KSB7XG4gICAgICAgIC8vIOWBnOatouS5i+WJjeeahOmfs+S5kOW5tumHjee9rueKtuaAgVxuICAgICAgICBpZiAodGhpcy5hdWRpb0hlbHBlcikge1xuICAgICAgICAgIHRoaXMuYXVkaW9IZWxwZXIucGF1c2UoKTtcbiAgICAgICAgICB0aGlzLmF1ZGlvSGVscGVyLnJlbW92ZSgpO1xuICAgICAgICAgIHRoaXMuYXVkaW9IZWxwZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3VycmVudE11c2ljID0geyAuLi5kZWZhdWx0TXVzaWNJbmZvIH07XG4gICAgICAgIHRoaXMudXBkYXRlVGltZURpc3BsYXkoKTtcblxuICAgICAgICAvLyDkvb/nlKhIVE1MIEF1ZGlv5a+85YWl6Z+z5LmQXG4gICAgICAgIHRoaXMuYXVkaW9IZWxwZXIgPSBuZXcgQXVkaW8oYXVkaW9VcmxUb1BsYXkpO1xuXG4gICAgICAgIC8vIOWNleabsuW+queOr+aooeW8j++8mumAmui/hyBsb29wIOaOp+WItlxuICAgICAgICB0aGlzLmF1ZGlvSGVscGVyLmxvb3AgPSB0aGlzLmN1cnJlbnRNb2RlID09PSBQbGF5TW9kZS5TSU5HTEU7XG5cbiAgICAgICAgLy8g55uR5ZCs5pKt5pS+57uT5p2f77yM6Ieq5Yqo5YiH5q2M77yI6Zmk5Y2V5puy5b6q546v5aSW77yJXG4gICAgICAgIHRoaXMuYXVkaW9IZWxwZXIuYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5vblRyYWNrRW5kZWQoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g6I635Y+W5YWD5pWw5o2uXG4gICAgICAgIHRoaXMuYXVkaW9IZWxwZXIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVkbWV0YWRhdGEnLCAoKSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMuYXVkaW9IZWxwZXIpIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudE11c2ljLmR1cmF0aW9uID0gdGhpcy5hdWRpb0hlbHBlci5kdXJhdGlvbjtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVGltZURpc3BsYXkoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOWHhuWkh+WlveWQjuiHquWKqOaSreaUvlxuICAgICAgICB0aGlzLmF1ZGlvSGVscGVyLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgJ2NhbnBsYXl0aHJvdWdoJyxcbiAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50U3RhdGUgIT09IFBsYXlTdGF0ZS5QTEFZSU5HKSB7XG4gICAgICAgICAgICAgIHRoaXMucGxheSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgeyBvbmNlOiB0cnVlIH0sXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKG11c2ljSW5mbykge1xuICAgICAgICAgIHRoaXMudXBkYXRlTXVzaWNJbmZvKHtcbiAgICAgICAgICAgIC4uLm11c2ljSW5mbyxcbiAgICAgICAgICAgIGN1cnJlbnRUaW1lOiAwXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy51cGRhdGVNdXNpY0luZm8oe1xuICAgICAgICAgICAgdGl0bGU6IHRoaXMuZXh0cmFjdFRpdGxlRnJvbVVybCh1cmwpLFxuICAgICAgICAgICAgYXJ0aXN0OiAn572R57uc6Z+z5LmQJyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgICAgY3VycmVudFRpbWU6IDBcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+aXoOazleiOt+WPluacieaViOeahOmfs+mikemTvuaOpScpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbRHluYW1pY0lzbGFuZE11c2ljUGxheWVyXSDlr7zlhaXpn7PkuZDlpLHotKU6JywgZXJyb3IpO1xuICAgICAgdGhpcy5zZXRTdGF0ZShQbGF5U3RhdGUuU1RPUFBFRCk7XG4gICAgICB0b2FzdHIuZXJyb3IoJ+WvvOWFpemfs+S5kOWksei0pe+8jOivt+ajgOafpemTvuaOpeaYr+WQpuacieaViCcsICfplJnor68nKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5LuOVVJM5o+Q5Y+W6Z+z5LmQ5qCH6aKYXG4gICAqL1xuICBwcml2YXRlIGV4dHJhY3RUaXRsZUZyb21VcmwodXJsOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1cmxPYmogPSBuZXcgVVJMKHVybCk7XG4gICAgICBjb25zdCBwYXRobmFtZSA9IHVybE9iai5wYXRobmFtZTtcbiAgICAgIGNvbnN0IGZpbGVuYW1lID0gcGF0aG5hbWUuc3BsaXQoJy8nKS5wb3AoKSB8fCAnJztcbiAgICAgIGNvbnN0IG5hbWVXaXRob3V0RXh0ID0gZmlsZW5hbWUuc3BsaXQoJy4nKVswXTtcbiAgICAgIHJldHVybiBuYW1lV2l0aG91dEV4dCB8fCAn5pyq55+l5q2M5puyJztcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiAn572R57uc6Z+z5LmQJztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5aSE55CG6L+b5bqm5p2h54K55Ye7XG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVByb2dyZXNzQ2xpY2soZTogSlF1ZXJ5LkNsaWNrRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5hdWRpb0hlbHBlciAmJiB0aGlzLmN1cnJlbnRNdXNpYy5kdXJhdGlvbiA+IDApIHtcbiAgICAgIGNvbnN0ICR0cmFjayA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICAgIGNvbnN0IHRyYWNrV2lkdGggPSAkdHJhY2sud2lkdGgoKSB8fCAwO1xuICAgICAgY29uc3QgY2xpY2tYID0gZS5vZmZzZXRYO1xuICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBjbGlja1ggLyB0cmFja1dpZHRoO1xuICAgICAgY29uc3QgbmV3VGltZSA9IHRoaXMuY3VycmVudE11c2ljLmR1cmF0aW9uICogcHJvZ3Jlc3M7XG5cbiAgICAgIC8vIOeCueWHu+i/m+W6puadoeeri+WNs+i3s+i9rOaSreaUvuS9jee9ruW5tue7p+e7reaSreaUvlxuICAgICAgdGhpcy5hdWRpb0hlbHBlci5jdXJyZW50VGltZSA9IG5ld1RpbWU7XG4gICAgICB0aGlzLmN1cnJlbnRNdXNpYy5jdXJyZW50VGltZSA9IG5ld1RpbWU7XG4gICAgICB0aGlzLnBsYXliYWNrU3RhcnRUaW1lID0gRGF0ZS5ub3coKSAtIG5ld1RpbWUgKiAxMDAwO1xuICAgICAgdGhpcy51cGRhdGVUaW1lRGlzcGxheSgpO1xuXG4gICAgICBpZiAodGhpcy5jdXJyZW50U3RhdGUgIT09IFBsYXlTdGF0ZS5QTEFZSU5HKSB7XG4gICAgICAgIHRoaXMucGxheSgpO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZyhgW0R5bmFtaWNJc2xhbmRNdXNpY1BsYXllcl0g54K55Ye76L+b5bqm5p2h6Lez6L2s5YiwOiAke01hdGgucm91bmQocHJvZ3Jlc3MgKiAxMDApfSUg5bm25byA5aeL5pKt5pS+YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOiuvue9ruaSreaUvueKtuaAgVxuICAgKi9cbiAgcHJpdmF0ZSBzZXRTdGF0ZShzdGF0ZTogUGxheVN0YXRlKTogdm9pZCB7XG4gICAgdGhpcy5jdXJyZW50U3RhdGUgPSBzdGF0ZTtcbiAgICB0aGlzLiRpc2xhbmQuYXR0cignZGF0YS1zdGF0ZScsIHN0YXRlKTtcbiAgICB0aGlzLnVwZGF0ZVBsYXlCdXR0b24oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmm7TmlrDmkq3mlL7mjInpkq7nirbmgIFcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlUGxheUJ1dHRvbigpOiB2b2lkIHtcbiAgICBjb25zdCAkcGxheUJ0biA9ICQoJy5wbGF5LWJ0bicpO1xuXG4gICAgaWYgKHRoaXMuY3VycmVudFN0YXRlID09PSBQbGF5U3RhdGUuUExBWUlORykge1xuICAgICAgJHBsYXlCdG4uYWRkQ2xhc3MoJ3BhdXNlZCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkcGxheUJ0bi5yZW1vdmVDbGFzcygncGF1c2VkJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOabtOaWsOaSreaUvuaooeW8j+aMiemSrlxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVNb2RlQnV0dG9uKCk6IHZvaWQge1xuICAgIGNvbnN0ICRtb2RlQnRuID0gJCgnLm1vZGUtYnRuIHN2ZyBwYXRoJyk7XG4gICAgXG4gICAgLy8g5L2/55So6YWN572u5paH5Lu25Lit55qE5Zu+5qCH5a6a5LmJXG4gICAgY29uc3QgaWNvblBhdGggPSBDT05GSUcuaWNvbnNbdGhpcy5jdXJyZW50TW9kZS50b0xvd2VyQ2FzZSgpIGFzIGtleW9mIHR5cGVvZiBDT05GSUcuaWNvbnNdO1xuICAgIGlmIChpY29uUGF0aCkge1xuICAgICAgJG1vZGVCdG4uYXR0cignZCcsIGljb25QYXRoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNldE1vZGUobW9kZTogUGxheU1vZGUpOiB2b2lkIHtcbiAgICB0aGlzLmN1cnJlbnRNb2RlID0gbW9kZTtcbiAgICBpZiAodGhpcy5hdWRpb0hlbHBlcikge1xuICAgICAgdGhpcy5hdWRpb0hlbHBlci5sb29wID0gdGhpcy5jdXJyZW50TW9kZSA9PT0gUGxheU1vZGUuU0lOR0xFO1xuICAgIH1cbiAgICB0aGlzLnVwZGF0ZU1vZGVCdXR0b24oKTtcbiAgfVxuXG4gIHByaXZhdGUgY3ljbGVNb2RlKCk6IHZvaWQge1xuICAgIGNvbnN0IG9yZGVyID0gW1BsYXlNb2RlLlJFUEVBVCwgUGxheU1vZGUuUkFORE9NLCBQbGF5TW9kZS5TSU5HTEUsIFBsYXlNb2RlLlNUT1BdO1xuICAgIGNvbnN0IGlkeCA9IG9yZGVyLmluZGV4T2YodGhpcy5jdXJyZW50TW9kZSk7XG4gICAgY29uc3QgbmV4dCA9IG9yZGVyWyhpZHggKyAxKSAlIG9yZGVyLmxlbmd0aF07XG4gICAgdGhpcy5zZXRNb2RlKG5leHQpO1xuICAgIC8vIOS9v+eUqOmFjee9ruaWh+S7tuS4reeahOaooeW8j+WQjeensFxuICAgIGNvbnN0IG1vZGVOYW1lID0gQ09ORklHLm1vZGVOYW1lc1tuZXh0XTtcbiAgICB0b2FzdHIuaW5mbyhg5pKt5pS+5qih5byP77yaJHttb2RlTmFtZX1gLCAn6Z+z5LmQ5pKt5pS+5ZmoJyk7XG4gIH1cblxuICAvKipcbiAgICog5pu05paw6Z+z5LmQ5L+h5oGvXG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZU11c2ljSW5mbyhpbmZvOiBQYXJ0aWFsPE11c2ljSW5mbz4pOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5jdXJyZW50TXVzaWMgPSB7IC4uLnRoaXMuY3VycmVudE11c2ljLCAuLi5pbmZvIH07XG5cbiAgICAgIC8vIOabtOaWsOatjOabsuagh+mimC/mrYzmiYtcbiAgICAgIGNvbnN0ICR0aXRsZVRleHQgPSAkKCcudHJhY2stdGl0bGUgLnRyYWNrLXRleHQnKTtcbiAgICAgIGNvbnN0ICR0aXRsZSA9ICQoJy50cmFjay10aXRsZScpO1xuICAgICAgJHRpdGxlVGV4dC50ZXh0KHRoaXMuY3VycmVudE11c2ljLnRpdGxlKTtcblxuICAgICAgY29uc3QgJGFydGlzdFRleHQgPSAkKCcudHJhY2stYXJ0aXN0IC50cmFjay10ZXh0Jyk7XG4gICAgICBjb25zdCAkYXJ0aXN0ID0gJCgnLnRyYWNrLWFydGlzdCcpO1xuICAgICAgJGFydGlzdFRleHQudGV4dCh0aGlzLmN1cnJlbnRNdXNpYy5hcnRpc3QpO1xuXG4gICAgICAvLyDku4XlnKjigJzlsZXlvIDnirbmgIHigJ3kuIvov5vooYzmu5rliqjliKTmlq3vvJvmlLbnvKnnirbmgIHkuIDlvovnpoHnlKjmu5rliqjlubblpI3kvY3ot53nprtcbiAgICAgIGlmICh0aGlzLmlzRXhwYW5kZWQpIHtcbiAgICAgICAgdGhpcy5jaGVja1RleHRTY3JvbGxhYmxlKCR0aXRsZSwgJHRpdGxlVGV4dCk7XG4gICAgICAgIHRoaXMuY2hlY2tUZXh0U2Nyb2xsYWJsZSgkYXJ0aXN0LCAkYXJ0aXN0VGV4dCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkdGl0bGUucmVtb3ZlQ2xhc3MoJ3Njcm9sbGFibGUnKS5jc3MoJy0tc2Nyb2xsLWRpc3RhbmNlJywgJzBweCcpO1xuICAgICAgICAkYXJ0aXN0LnJlbW92ZUNsYXNzKCdzY3JvbGxhYmxlJykuY3NzKCctLXNjcm9sbC1kaXN0YW5jZScsICcwcHgnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuY3VycmVudE11c2ljLmNvdmVyVXJsKSB7XG4gICAgICAgIGNvbnN0IHByb3hpZWRDb3ZlciA9IHRoaXMuYnVpbGRQcm94aWVkSW1hZ2VVcmwodGhpcy5jdXJyZW50TXVzaWMuY292ZXJVcmwgYXMgc3RyaW5nKTtcbiAgICAgICAgLy8g5pu05paw5bGV5byA54q25oCB55qE5bCB6Z2iXG4gICAgICAgICQoJy5jb3Zlci1pbWFnZScpLmF0dHIoJ3NyYycsIHByb3hpZWRDb3Zlcikuc2hvdygpO1xuICAgICAgICAkKCcuY292ZXItcGxhY2Vob2xkZXInKS5oaWRlKCk7XG4gICAgICAgIC8vIOWQjOaXtuabtOaWsOaUtue8qeeKtuaAgeeahOWwgemdolxuICAgICAgICAkKCcuY29tcGFjdC1jb3Zlci1pbWFnZScpLmF0dHIoJ3NyYycsIHByb3hpZWRDb3Zlcikuc2hvdygpO1xuICAgICAgICAkKCcuY29tcGFjdC1jb3Zlci1wbGFjZWhvbGRlcicpLmhpZGUoKTtcbiAgICAgICAgLy8g5qC55o2u5LiT6L6R5bCB6Z2i5pu05paw5Y+v6KeG5YyW5Zmo6aKc6Imy77yI57uf5LiA6LWw5Luj55CG77yM6YG/5YWNQ09SU++8iVxuICAgICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6ZXJDb2xvcihwcm94aWVkQ292ZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8g6ZqQ6JeP5bGV5byA54q25oCB55qE5bCB6Z2iXG4gICAgICAgICQoJy5jb3Zlci1pbWFnZScpLmhpZGUoKTtcbiAgICAgICAgJCgnLmNvdmVyLXBsYWNlaG9sZGVyJykuc2hvdygpO1xuICAgICAgICAvLyDpmpDol4/mlLbnvKnnirbmgIHnmoTlsIHpnaJcbiAgICAgICAgJCgnLmNvbXBhY3QtY292ZXItaW1hZ2UnKS5oaWRlKCk7XG4gICAgICAgICQoJy5jb21wYWN0LWNvdmVyLXBsYWNlaG9sZGVyJykuc2hvdygpO1xuICAgICAgICAvLyDkvb/nlKjpu5jorqTpopzoibJcbiAgICAgICAgJCgnLmR5bmFtaWMtaXNsYW5kJykuY3NzKCctLXZpc3VhbGl6ZXItY29sb3InLCAnJyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMudXBkYXRlVGltZURpc3BsYXkoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW0R5bmFtaWNJc2xhbmRNdXNpY1BsYXllcl0g5pu05paw6Z+z5LmQ5L+h5oGv5aSx6LSlOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5qOA5p+l5paH5pys5piv5ZCm6ZyA6KaB5rua5YqoXG4gICAqIOinhOWIme+8mlxuICAgKiAtIOaUtue8qeeKtuaAgeS4i+S4jei/m+ihjOS7u+S9lea7muWKqOWIpOaWreS4juWKqOeUu1xuICAgKiAtIOWxleW8gOWQjuetieWuveW6pueos+WumuWGjeiuoeeul++8jOmBv+WFjei/h+a4oeacn+a1i+mHj+S4uiAwXG4gICAqL1xuICBwcml2YXRlIGNoZWNrVGV4dFNjcm9sbGFibGUoJGNvbnRhaW5lcjogSlF1ZXJ5LCAkdGV4dDogSlF1ZXJ5LCBhdHRlbXB0OiBudW1iZXIgPSAwKTogdm9pZCB7XG4gICAgLy8g5YWI6YeN572u54q25oCB77yM56Gu5L+d5q2j56Gu6K6h566XXG4gICAgJGNvbnRhaW5lci5yZW1vdmVDbGFzcygnc2Nyb2xsYWJsZScpO1xuICAgICRjb250YWluZXIuY3NzKCctLXNjcm9sbC1kaXN0YW5jZScsICcwcHgnKTtcblxuICAgIC8vIOaUtue8qeaAge+8muebtOaOpemAgOWHuu+8iOS4jeWIpOWumu+8jOS4jeaXpeW/l++8iVxuICAgIGlmICghdGhpcy5pc0V4cGFuZGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgTUFYX0FUVEVNUFRTID0gMTA7XG4gICAgY29uc3QgUkVUUllfREVMQVkgPSAxMjA7IC8vIG1zXG5cbiAgICBjb25zdCBkb0NoZWNrID0gKCkgPT4ge1xuICAgICAgY29uc3QgaXNsYW5kUmVjdCA9ICh0aGlzLiRpc2xhbmQ/LlswXSBhcyBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCk/LmdldEJvdW5kaW5nQ2xpZW50UmVjdD8uKCk7XG4gICAgICBjb25zdCBpc2xhbmRXaWR0aCA9IGlzbGFuZFJlY3Q/LndpZHRoID8/IDA7XG5cbiAgICAgIGNvbnN0IHJlY3QgPSAoJGNvbnRhaW5lclswXSBhcyBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCk/LmdldEJvdW5kaW5nQ2xpZW50UmVjdD8uKCk7XG4gICAgICBjb25zdCBjb250YWluZXJXaWR0aCA9IChyZWN0Py53aWR0aCA/PyAoJGNvbnRhaW5lci53aWR0aCgpIHx8IDApKTtcbiAgICAgIGNvbnN0IHRleHRFbCA9ICR0ZXh0WzBdIGFzIEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkO1xuICAgICAgY29uc3QgdGV4dFdpZHRoID0gdGV4dEVsID8gdGV4dEVsLnNjcm9sbFdpZHRoIDogMDtcblxuICAgICAgLy8g5Yqo5oCB4oCc56iz5a6a5a695bqm4oCd6ZiI5YC877ya6Iez5bCRMTAwcHjvvIzkuJTkuI3kvY7kuo7ngbXliqjlspvlrr3luqbnmoQyNSVcbiAgICAgIGNvbnN0IG1pblN0YWJsZVdpZHRoID0gTWF0aC5tYXgoMTAwLCBpc2xhbmRXaWR0aCAqIDAuMjUpO1xuXG4gICAgICAvLyDlrr3luqbmnKrnqLPlrprvvIjljIXlkKvkuLogMO+8ieWImemHjeivlVxuICAgICAgaWYgKChjb250YWluZXJXaWR0aCA8IG1pblN0YWJsZVdpZHRoKSAmJiBhdHRlbXB0IDwgTUFYX0FUVEVNUFRTKSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5jaGVja1RleHRTY3JvbGxhYmxlKCRjb250YWluZXIsICR0ZXh0LCBhdHRlbXB0ICsgMSksIFJFVFJZX0RFTEFZKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoY29udGFpbmVyV2lkdGggPD0gMCkge1xuICAgICAgICAvLyDlrr3luqbku43kuI3lj6/nlKjvvIzkv53mjIHkuI3mu5rliqhcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodGV4dFdpZHRoID4gY29udGFpbmVyV2lkdGgpIHtcbiAgICAgICAgY29uc3Qgc2Nyb2xsRGlzdGFuY2UgPSBjb250YWluZXJXaWR0aCAtIHRleHRXaWR0aDtcbiAgICAgICAgJGNvbnRhaW5lci5jc3MoJy0tc2Nyb2xsLWRpc3RhbmNlJywgYCR7c2Nyb2xsRGlzdGFuY2V9cHhgKTtcbiAgICAgICAgJGNvbnRhaW5lci5hZGRDbGFzcygnc2Nyb2xsYWJsZScpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKGBbRHluYW1pY0lzbGFuZE11c2ljUGxheWVyXSDorr7nva7mlofmnKzmu5rliqg6IOWuueWZqOWuveW6pj0ke2NvbnRhaW5lcldpZHRofXB4LCDmlofmnKzlrr3luqY9JHt0ZXh0V2lkdGh9cHgsIOa7muWKqOi3neemuz0ke3Njcm9sbERpc3RhbmNlfXB4YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkY29udGFpbmVyLnJlbW92ZUNsYXNzKCdzY3JvbGxhYmxlJyk7XG4gICAgICAgICRjb250YWluZXIuY3NzKCctLXNjcm9sbC1kaXN0YW5jZScsICcwcHgnKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgc2V0VGltZW91dChkb0NoZWNrLCBhdHRlbXB0ID09PSAwID8gODAgOiAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlm77niYfku6PnkIbljIXoo4XvvIjnu5/kuIDop4Tpgb9DT1JT77yJXG4gICAqIOivtOaYju+8mue7n+S4gOmAmui/hyBpbWFnZXMud2VzZXJ2Lm5sIOS7o+eQhuWklumDqOWwgemdou+8jOmBv+WFjeeUu+W4g+axoeafk++8jOS/neaMgeWNleS4gOi3r+W+hOOAglxuICAgKi9cbiAgcHJpdmF0ZSBidWlsZFByb3hpZWRJbWFnZVVybCh1cmw6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghdXJsIHx8IHVybC5zdGFydHNXaXRoKCdkYXRhOicpIHx8IHVybC5zdGFydHNXaXRoKCdibG9iOicpKSByZXR1cm4gdXJsO1xuICAgICAgaWYgKHVybC5zdGFydHNXaXRoKCdodHRwczovL2ltYWdlcy53ZXNlcnYubmwvJykpIHJldHVybiB1cmw7XG4gICAgICBjb25zdCB1ID0gbmV3IFVSTCh1cmwsIHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcbiAgICAgIC8vIHdlc2VydiDopoHmsYLml6DljY/orq7nmoQgaG9zdCtwYXRoIOW9ouW8j1xuICAgICAgY29uc3QgaG9zdEFuZFBhdGggPSB1Lmhvc3QgKyB1LnBhdGhuYW1lICsgKHUuc2VhcmNoIHx8ICcnKTtcbiAgICAgIHJldHVybiBgaHR0cHM6Ly9pbWFnZXMud2VzZXJ2Lm5sLz91cmw9JHtlbmNvZGVVUklDb21wb25lbnQoaG9zdEFuZFBhdGgpfWA7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gdXJsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDmoLnmja7kuJPovpHlsIHpnaLmm7TmlrDlj6/op4bljJblmajpopzoibJcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlVmlzdWFsaXplckNvbG9yKGltYWdlVXJsOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ1tEeW5hbWljSXNsYW5kTXVzaWNQbGF5ZXJdIOW8gOWni+WIhuaekOWwgemdouminOiJsjonLCBpbWFnZVVybCk7XG4gICAgICBcbiAgICAgIC8vIOWIm+W7uuS4tOaXtuWbvueJh+WFg+e0oOadpeWIhuaekOminOiJslxuICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICBcbiAgICAgIC8vIOe7n+S4gOS4uuaJgOacieW5s+WPsOiuvue9riBjcm9zc09yaWdpbu+8jOiuqea1j+iniOWZqOWkhOeQhkNPUlNcbiAgICAgIGltZy5jcm9zc09yaWdpbiA9ICdhbm9ueW1vdXMnO1xuXG4gICAgICAvLyDkvb/nlKjku6PnkIblnLDlnYDop4Tpgb/ot6jln5/pmZDliLZcbiAgICAgIGNvbnN0IGZpbmFsVXJsID0gdGhpcy5idWlsZFByb3hpZWRJbWFnZVVybChpbWFnZVVybCk7XG4gICAgICBpZiAoZmluYWxVcmwgIT09IGltYWdlVXJsKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbRHluYW1pY0lzbGFuZE11c2ljUGxheWVyXSDkvb/nlKjku6PnkIblsIHpnaLlnLDlnYDov5vooYzmj5DoibI6JywgZmluYWxVcmwpO1xuICAgICAgfVxuXG4gICAgICBpbWcub25sb2FkID0gKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIOWIm+W7umNhbnZhc+adpeWIhuaekOWbvueJh+S4u+iJsuiwg1xuICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG4gICAgICAgICAgaWYgKCFjdHgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignW0R5bmFtaWNJc2xhbmRNdXNpY1BsYXllcl0g5peg5rOV6I635Y+WIGNhbnZhcyBjb250ZXh0Jyk7XG4gICAgICAgICAgICB0aGlzLnNldERlZmF1bHRWaXN1YWxpemVyQ29sb3IoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyDkvb/nlKjovoPlsI/nmoTlsLrlr7jmnaXmj5Dpq5jmgKfog71cbiAgICAgICAgICBjb25zdCBzYW1wbGVTaXplID0gNTA7XG4gICAgICAgICAgY2FudmFzLndpZHRoID0gc2FtcGxlU2l6ZTtcbiAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gc2FtcGxlU2l6ZTtcbiAgICAgICAgICBcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIHNhbXBsZVNpemUsIHNhbXBsZVNpemUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDojrflj5blm77niYfnmoTlg4/ntKDmlbDmja5cbiAgICAgICAgICAgIGNvbnN0IGltYWdlRGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgc2FtcGxlU2l6ZSwgc2FtcGxlU2l6ZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOiuoeeul+S4u+iJsuiwg1xuICAgICAgICAgICAgbGV0IHIgPSAwLFxuICAgICAgICAgICAgICBnID0gMCxcbiAgICAgICAgICAgICAgYiA9IDA7XG4gICAgICAgICAgICBsZXQgdmFsaWRQaXhlbHMgPSAwO1xuICAgICAgICAgICAgY29uc3QgcGl4ZWxzID0gaW1hZ2VEYXRhLmRhdGE7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGl4ZWxzLmxlbmd0aDsgaSArPSA0KSB7XG4gICAgICAgICAgICAgIC8vIOi3s+i/h+Wkquaal+aIluWkquS6rueahOWDj+e0oFxuICAgICAgICAgICAgICBjb25zdCBicmlnaHRuZXNzID0gKHBpeGVsc1tpXSArIHBpeGVsc1tpICsgMV0gKyBwaXhlbHNbaSArIDJdKSAvIDM7XG4gICAgICAgICAgICAgIGlmIChicmlnaHRuZXNzID4gMjAgJiYgYnJpZ2h0bmVzcyA8IDIzNSkge1xuICAgICAgICAgICAgICAgIHIgKz0gcGl4ZWxzW2ldO1xuICAgICAgICAgICAgICAgIGcgKz0gcGl4ZWxzW2kgKyAxXTtcbiAgICAgICAgICAgICAgICBiICs9IHBpeGVsc1tpICsgMl07XG4gICAgICAgICAgICAgICAgdmFsaWRQaXhlbHMrKztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodmFsaWRQaXhlbHMgPiAwKSB7XG4gICAgICAgICAgICAgIHIgPSBNYXRoLmZsb29yKHIgLyB2YWxpZFBpeGVscyk7XG4gICAgICAgICAgICAgIGcgPSBNYXRoLmZsb29yKGcgLyB2YWxpZFBpeGVscyk7XG4gICAgICAgICAgICAgIGIgPSBNYXRoLmZsb29yKGIgLyB2YWxpZFBpeGVscyk7XG5cbiAgICAgICAgICAgICAgLy8g5aKe5Yqg6aKc6Imy6aWx5ZKM5bqmXG4gICAgICAgICAgICAgIGNvbnN0IG1heCA9IE1hdGgubWF4KHIsIGcsIGIpO1xuICAgICAgICAgICAgICBjb25zdCBtaW4gPSBNYXRoLm1pbihyLCBnLCBiKTtcbiAgICAgICAgICAgICAgY29uc3QgZGVsdGEgPSBtYXggLSBtaW47XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBpZiAoZGVsdGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2F0dXJhdGlvbkJvb3N0ID0gMS4zO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1pZCA9IChtYXggKyBtaW4pIC8gMjtcbiAgICAgICAgICAgICAgICByID0gTWF0aC5yb3VuZChtaWQgKyAociAtIG1pZCkgKiBzYXR1cmF0aW9uQm9vc3QpO1xuICAgICAgICAgICAgICAgIGcgPSBNYXRoLnJvdW5kKG1pZCArIChnIC0gbWlkKSAqIHNhdHVyYXRpb25Cb29zdCk7XG4gICAgICAgICAgICAgICAgYiA9IE1hdGgucm91bmQobWlkICsgKGIgLSBtaWQpICogc2F0dXJhdGlvbkJvb3N0KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyDnoa7kv53lgLzlnKjmnInmlYjojIPlm7TlhoVcbiAgICAgICAgICAgICAgICByID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMjU1LCByKSk7XG4gICAgICAgICAgICAgICAgZyA9IE1hdGgubWF4KDAsIE1hdGgubWluKDI1NSwgZykpO1xuICAgICAgICAgICAgICAgIGIgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigyNTUsIGIpKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIOWwhlJHQuminOiJsui9rOaNouS4uuWNgeWFrei/m+WItuWtl+espuS4slxuICAgICAgICAgICAgICBjb25zdCB0b0hleCA9IChjOiBudW1iZXIpID0+IGAwJHtjLnRvU3RyaW5nKDE2KX1gLnNsaWNlKC0yKTtcbiAgICAgICAgICAgICAgY29uc3QgY29sb3JIZXggPSBgIyR7dG9IZXgocil9JHt0b0hleChnKX0ke3RvSGV4KGIpfWA7XG5cbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tEeW5hbWljSXNsYW5kTXVzaWNQbGF5ZXJdIOaPkOWPlueahOS4u+iJsuiwgzonLCBjb2xvckhleCk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyDlsIborqHnrpflh7rnmoTpopzoibLlupTnlKjkuLpDU1Plj5jph49cbiAgICAgICAgICAgICAgJCgnLmR5bmFtaWMtaXNsYW5kJykuY3NzKCctLXZpc3VhbGl6ZXItY29sb3InLCBjb2xvckhleCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1tEeW5hbWljSXNsYW5kTXVzaWNQbGF5ZXJdIOayoeacieacieaViOeahOWDj+e0oOaVsOaNricpO1xuICAgICAgICAgICAgICB0aGlzLnNldERlZmF1bHRWaXN1YWxpemVyQ29sb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyDlpoLmnpzlh7rnjrDot6jln5/plJnor6/vvIzkvb/nlKjpu5jorqTpopzoibJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignW0R5bmFtaWNJc2xhbmRNdXNpY1BsYXllcl0g5peg5rOV6K+75Y+W5Zu+54mH5pWw5o2u77yI5Y+v6IO95piv6Leo5Z+f6ZmQ5Yi277yJOicsIGUpO1xuICAgICAgICAgICAgdGhpcy5zZXREZWZhdWx0VmlzdWFsaXplckNvbG9yKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUud2FybignW0R5bmFtaWNJc2xhbmRNdXNpY1BsYXllcl0g6aKc6Imy5YiG5p6Q5aSx6LSlOicsIGVycm9yKTtcbiAgICAgICAgICB0aGlzLnNldERlZmF1bHRWaXN1YWxpemVyQ29sb3IoKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgaW1nLm9uZXJyb3IgPSAoZSkgPT4ge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1tEeW5hbWljSXNsYW5kTXVzaWNQbGF5ZXJdIOWbvueJh+WKoOi9veWksei0pTonLCBlKTtcbiAgICAgICAgdGhpcy5zZXREZWZhdWx0VmlzdWFsaXplckNvbG9yKCk7XG4gICAgICB9O1xuICAgICAgXG4gICAgICBpbWcuc3JjID0gZmluYWxVcmw7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignW0R5bmFtaWNJc2xhbmRNdXNpY1BsYXllcl0g5pu05paw5Y+v6KeG5YyW5Zmo6aKc6Imy5aSx6LSlOicsIGVycm9yKTtcbiAgICAgIHRoaXMuc2V0RGVmYXVsdFZpc3VhbGl6ZXJDb2xvcigpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDorr7nva7pu5jorqTnmoTlj6/op4bljJblmajpopzoibJcbiAgICovXG4gIHByaXZhdGUgc2V0RGVmYXVsdFZpc3VhbGl6ZXJDb2xvcigpOiB2b2lkIHtcbiAgICAvLyDpu5jorqTkvb/nlKjmuJDlj5joibJcbiAgICBjb25zdCBkZWZhdWx0Q29sb3IgPSAnbGluZWFyLWdyYWRpZW50KHRvIHRvcCwgI2ZmNmI5ZCwgI2M0NDU2OSknO1xuICAgIGNvbnNvbGUubG9nKCdbRHluYW1pY0lzbGFuZE11c2ljUGxheWVyXSDkvb/nlKjpu5jorqTpopzoibInKTtcbiAgICAkKCcuZHluYW1pYy1pc2xhbmQnKS5jc3MoJy0tdmlzdWFsaXplci1jb2xvcicsIGRlZmF1bHRDb2xvcik7XG4gIH1cblxuICAvKipcbiAgICog5pu05paw5pe26Ze05pi+56S6XG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZVRpbWVEaXNwbGF5KCk6IHZvaWQge1xuICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gdGhpcy5mb3JtYXRUaW1lKHRoaXMuY3VycmVudE11c2ljLmN1cnJlbnRUaW1lKTtcbiAgICBjb25zdCB0b3RhbFRpbWUgPSB0aGlzLmZvcm1hdFRpbWUodGhpcy5jdXJyZW50TXVzaWMuZHVyYXRpb24pO1xuXG4gICAgJCgnLmN1cnJlbnQtdGltZScpLnRleHQoY3VycmVudFRpbWUpO1xuICAgICQoJy50b3RhbC10aW1lJykudGV4dCh0b3RhbFRpbWUpO1xuXG4gICAgLy8g5pu05paw6L+b5bqm5p2hXG4gICAgaWYgKHRoaXMuY3VycmVudE11c2ljLmR1cmF0aW9uID4gMCkge1xuICAgICAgY29uc3QgcHJvZ3Jlc3MgPSAodGhpcy5jdXJyZW50TXVzaWMuY3VycmVudFRpbWUgLyB0aGlzLmN1cnJlbnRNdXNpYy5kdXJhdGlvbikgKiAxMDA7XG4gICAgICAkKCcucHJvZ3Jlc3MtZmlsbCcpLmNzcygnd2lkdGgnLCBgJHtwcm9ncmVzc30lYCk7XG4gICAgICAkKCcucHJvZ3Jlc3MtdGh1bWInKS5jc3MoJ2xlZnQnLCBgJHtwcm9ncmVzc30lYCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOagvOW8j+WMluaXtumXtOaYvuekulxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRUaW1lKHNlY29uZHM6IG51bWJlcik6IHN0cmluZyB7XG4gICAgaWYgKGlzTmFOKHNlY29uZHMpIHx8IHNlY29uZHMgPCAwKSB7XG4gICAgICByZXR1cm4gJzA6MDAnO1xuICAgIH1cbiAgICBjb25zdCBtaW5zID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gNjApO1xuICAgIGNvbnN0IHNlY3MgPSBNYXRoLmZsb29yKHNlY29uZHMgJSA2MCk7XG4gICAgcmV0dXJuIGAke21pbnN9OiR7c2Vjcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiDlvIDlp4vmm7TmlrDlvqrnjq9cbiAgICovXG4gIHByaXZhdGUgc3RhcnRVcGRhdGVMb29wKCk6IHZvaWQge1xuICAgIGNvbnN0IHVwZGF0ZSA9ICgpID0+IHtcbiAgICAgIC8vIOabtOaWsOazouW9ouWKqOeUu1xuICAgICAgaWYgKHRoaXMuY3VycmVudFN0YXRlID09PSBQbGF5U3RhdGUuUExBWUlORykge1xuICAgICAgICB0aGlzLnVwZGF0ZVdhdmVBbmltYXRpb24oKTtcbiAgICAgICAgY29uc3QgYXVkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdhdWRpb1tzcmMqPVwiYmdtXCJdJykgYXMgSFRNTEF1ZGlvRWxlbWVudDtcbiAgICAgICAgaWYgKGF1ZGlvKSB7XG4gICAgICAgICAgdGhpcy5jdXJyZW50TXVzaWMuY3VycmVudFRpbWUgPSBhdWRpby5jdXJyZW50VGltZTtcbiAgICAgICAgICBpZiAodGhpcy5jdXJyZW50TXVzaWMuZHVyYXRpb24gPT09IDAgfHwgaXNOYU4odGhpcy5jdXJyZW50TXVzaWMuZHVyYXRpb24pKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRNdXNpYy5kdXJhdGlvbiA9IGF1ZGlvLmR1cmF0aW9uO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRNdXNpYy5jdXJyZW50VGltZSA9IChEYXRlLm5vdygpIC0gdGhpcy5wbGF5YmFja1N0YXJ0VGltZSkgLyAxMDAwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY3VycmVudE11c2ljLmR1cmF0aW9uID4gMCAmJiB0aGlzLmN1cnJlbnRNdXNpYy5jdXJyZW50VGltZSA+PSB0aGlzLmN1cnJlbnRNdXNpYy5kdXJhdGlvbikge1xuICAgICAgICAgIHRoaXMuY3VycmVudE11c2ljLmN1cnJlbnRUaW1lID0gdGhpcy5jdXJyZW50TXVzaWMuZHVyYXRpb247XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZShQbGF5U3RhdGUuU1RPUFBFRCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVUaW1lRGlzcGxheSgpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmFuaW1hdGlvbkZyYW1lSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodXBkYXRlKTtcbiAgICB9O1xuXG4gICAgdXBkYXRlKCk7XG4gIH1cblxuICAvKipcbiAgICog5pu05paw5rOi5b2i5Yqo55S7XG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZVdhdmVBbmltYXRpb24oKTogdm9pZCB7XG4gICAgJCgnLndhdmUtYmFyJykuZWFjaCgoaW5kZXgsIGVsZW1lbnQpID0+IHtcbiAgICAgIGNvbnN0ICRiYXIgPSAkKGVsZW1lbnQpO1xuICAgICAgY29uc3QgaGVpZ2h0ID0gTWF0aC5yYW5kb20oKSAqIDggKyAyOyAvLyAyLTEwcHhcbiAgICAgICRiYXIuY3NzKCdoZWlnaHQnLCBgJHtoZWlnaHR9cHhgKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5blvZPliY3mkq3mlL7nirbmgIFcbiAgICovXG4gIHB1YmxpYyBnZXRDdXJyZW50U3RhdGUoKTogUGxheVN0YXRlIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50U3RhdGU7XG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5b2T5YmN6Z+z5LmQ5L+h5oGvXG4gICAqL1xuICBwdWJsaWMgZ2V0Q3VycmVudE11c2ljKCk6IE11c2ljSW5mbyB7XG4gICAgcmV0dXJuIHsgLi4udGhpcy5jdXJyZW50TXVzaWMgfTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09IOaSreaUvuWIl+ihqOS4juWIh+atjOi+heWKqSA9PT09PT09PT09PT09PVxuICBwcml2YXRlIGdldFBsYXlsaXN0VXJscygpOiBzdHJpbmdbXSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhbmVsID0gUGxheWxpc3RQYW5lbC5nZXRJbnN0YW5jZSgpIGFzIGFueTtcbiAgICAgIHJldHVybiB0eXBlb2YgcGFuZWwuZ2V0VXJscyA9PT0gJ2Z1bmN0aW9uJyA/IHBhbmVsLmdldFVybHMoKSA6IFtdO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZmluZEN1cnJlbnRJbmRleCh1cmxzOiBzdHJpbmdbXSk6IG51bWJlciB7XG4gICAgaWYgKCF1cmxzLmxlbmd0aCkgcmV0dXJuIC0xO1xuICAgIGlmICghdGhpcy5jdXJyZW50UGxheWxpc3RVcmwpIHJldHVybiAtMTtcbiAgICByZXR1cm4gdXJscy5pbmRleE9mKHRoaXMuY3VycmVudFBsYXlsaXN0VXJsKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcGxheUJ5SW5kZXgoaWR4OiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCB1cmxzID0gdGhpcy5nZXRQbGF5bGlzdFVybHMoKTtcbiAgICBpZiAoIXVybHMubGVuZ3RoKSByZXR1cm47XG4gICAgY29uc3Qgc2FmZUlkeCA9ICgoaWR4ICUgdXJscy5sZW5ndGgpICsgdXJscy5sZW5ndGgpICUgdXJscy5sZW5ndGg7XG4gICAgY29uc3QgdXJsID0gdXJsc1tzYWZlSWR4XTtcbiAgICB0aGlzLmN1cnJlbnRQbGF5bGlzdFVybCA9IHVybDtcbiAgICBcbiAgICAvLyDph43nva7mlofmnKzmu5rliqjnirbmgIHvvIzpgb/lhY3nu6fmib/kuIrkuIDpppbmrYznmoTmu5rliqjphY3nva5cbiAgICAkKCcudHJhY2stdGl0bGUsIC50cmFjay1hcnRpc3QnKS5yZW1vdmVDbGFzcygnc2Nyb2xsYWJsZScpLmNzcygnLS1zY3JvbGwtZGlzdGFuY2UnLCAnMHB4Jyk7XG4gICAgXG4gICAgYXdhaXQgdGhpcy5pbXBvcnRNdXNpYyh1cmwpO1xuICAgIGF3YWl0IHRoaXMucGxheSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBvblRyYWNrRW5kZWQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVybHMgPSB0aGlzLmdldFBsYXlsaXN0VXJscygpO1xuICAgICAgaWYgKCF1cmxzLmxlbmd0aCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKFBsYXlTdGF0ZS5TVE9QUEVEKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5jdXJyZW50TW9kZSA9PT0gUGxheU1vZGUuU1RPUCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKFBsYXlTdGF0ZS5TVE9QUEVEKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5jdXJyZW50TW9kZSA9PT0gUGxheU1vZGUuU0lOR0xFKSB7XG4gICAgICAgIC8vIOW3sumAmui/hyBhdWRpby5sb29wIOWunueOsOWNleabsuW+queOr++8jOi/memHjOaXoOmcgOWkhOeQhlxuICAgICAgICBpZiAodGhpcy5hdWRpb0hlbHBlciAmJiAhdGhpcy5hdWRpb0hlbHBlci5sb29wKSB7XG4gICAgICAgICAgLy8g5YWc5bqV77ya6YeN5paw5pKt5pS+XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbGF5KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjdXJJZHggPSB0aGlzLmZpbmRDdXJyZW50SW5kZXgodXJscyk7XG4gICAgICBpZiAodGhpcy5jdXJyZW50TW9kZSA9PT0gUGxheU1vZGUuUkFORE9NKSB7XG4gICAgICAgIGlmICh1cmxzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMucGxheUJ5SW5kZXgoMCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCBuZXh0SWR4ID0gY3VySWR4O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDUgJiYgbmV4dElkeCA9PT0gY3VySWR4OyBpKyspIHtcbiAgICAgICAgICBuZXh0SWR4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdXJscy5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZXh0SWR4ID09PSBjdXJJZHgpIG5leHRJZHggPSAoY3VySWR4ICsgMSkgJSB1cmxzLmxlbmd0aDtcbiAgICAgICAgYXdhaXQgdGhpcy5wbGF5QnlJbmRleChuZXh0SWR4KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBSRVBFQVQg6aG65bqP5pKt5pS+XG4gICAgICBjb25zdCBuZXh0SWR4ID0gY3VySWR4IDwgMCA/IDAgOiAoY3VySWR4ICsgMSkgJSB1cmxzLmxlbmd0aDtcbiAgICAgIGF3YWl0IHRoaXMucGxheUJ5SW5kZXgobmV4dElkeCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1tEeW5hbWljSXNsYW5kTXVzaWNQbGF5ZXJdIOiHquWKqOWIh+S4i+S4gOmmluWksei0pTonLCBlcnIpO1xuICAgICAgdGhpcy5zZXRTdGF0ZShQbGF5U3RhdGUuU1RPUFBFRCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOmUgOavgeaSreaUvuWZqFxuICAgKi9cbiAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuYW5pbWF0aW9uRnJhbWVJZCkge1xuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25GcmFtZUlkKTtcbiAgICB9XG5cbiAgICAkKGRvY3VtZW50KS5vZmYoJ2NsaWNrJywgJy5keW5hbWljLWlzbGFuZCcpO1xuICAgICQoZG9jdW1lbnQpLm9mZignY2xpY2snLCAnLnBsYXktYnRuJyk7XG4gICAgJChkb2N1bWVudCkub2ZmKCdjbGljaycsICcubW9kZS1idG4nKTtcbiAgICAkKGRvY3VtZW50KS5vZmYoJ2NsaWNrJywgJy5pbXBvcnQtYnRuJyk7XG4gICAgJChkb2N1bWVudCkub2ZmKCdjbGljaycsICcucHJvZ3Jlc3MtdHJhY2snKTtcblxuICAgIHRoaXMuJGNvbnRhaW5lci5yZW1vdmUoKTtcblxuICAgIGNvbnNvbGUubG9nKCdbRHluYW1pY0lzbGFuZE11c2ljUGxheWVyXSDngbXliqjlspvpn7PkuZDmkq3mlL7lmajlt7LplIDmr4EnKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/dynamicIsland/DynamicIslandMusicPlayer.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/dynamicIsland/NeteaseMusicResolver.ts": 
  /*!*************************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/dynamicIsland/NeteaseMusicResolver.ts ***!
  \*************************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NeteaseMusicResolver: () => (/* binding */ NeteaseMusicResolver)\n/* harmony export */ });\nclass NeteaseMusicResolver {\n    static API_URL = 'https://api.injahow.cn/meting/?type=song&id=';\n    static async resolve(url) {\n        let songId = await this.extractSongId(url);\n        if (!songId) {\n            return null;\n        }\n        try {\n            const response = await fetch(`${this.API_URL}${songId}`);\n            const data = await response.json();\n            if (data && data.length > 0) {\n                const song = data[0];\n                const artist = Array.isArray(song.artist) ? song.artist.join(' / ') : song.artist;\n                return {\n                    title: song.name,\n                    artist: artist,\n                    coverUrl: song.pic,\n                    audioUrl: song.url,\n                    duration: 0, // API不返回时长，需要后续处理\n                    currentTime: 0,\n                };\n            }\n            return null;\n        }\n        catch (error) {\n            console.error('[NeteaseMusicResolver] 解析失败:', error);\n            return null;\n        }\n    }\n    static async extractSongId(url) {\n        // 标准链接格式：https://music.163.com/#/song?id=123456\n        const standardMatch = url.match(/id=(\\d+)/);\n        if (standardMatch) {\n            return standardMatch[1];\n        }\n        return null;\n    }\n    /**\n     * 检查是否为网易云音乐链接\n     */\n    static isNeteaseMusicUrl(url) {\n        return url.includes('music.163.com');\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZHluYW1pY0lzbGFuZC9OZXRlYXNlTXVzaWNSZXNvbHZlci50cyIsIm1hcHBpbmdzIjoiOzs7O0FBRU8sTUFBTSxvQkFBb0I7SUFDdkIsTUFBTSxDQUFVLE9BQU8sR0FBRyw4Q0FBOEMsQ0FBQztJQUUxRSxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFXO1FBQ3JDLElBQUksTUFBTSxHQUFHLE1BQU0sSUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUMzQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDWixPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFRCxJQUFJLENBQUM7WUFDSCxNQUFNLFFBQVEsR0FBRyxNQUFNLEtBQUssQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxFQUFFLENBQUMsQ0FBQztZQUN6RCxNQUFNLElBQUksR0FBRyxNQUFNLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUVuQyxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO2dCQUM1QixNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3JCLE1BQU0sTUFBTSxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztnQkFDbEYsT0FBTztvQkFDTCxLQUFLLEVBQUUsSUFBSSxDQUFDLElBQUk7b0JBQ2hCLE1BQU0sRUFBRSxNQUFNO29CQUNkLFFBQVEsRUFBRSxJQUFJLENBQUMsR0FBRztvQkFDbEIsUUFBUSxFQUFFLElBQUksQ0FBQyxHQUFHO29CQUNsQixRQUFRLEVBQUUsQ0FBQyxFQUFFLGtCQUFrQjtvQkFDL0IsV0FBVyxFQUFFLENBQUM7aUJBQ2YsQ0FBQztZQUNKLENBQUM7WUFDRCxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1lBQ2YsT0FBTyxDQUFDLEtBQUssQ0FBQyw4QkFBOEIsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUNyRCxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7SUFDSCxDQUFDO0lBRU8sTUFBTSxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsR0FBVztRQUM1QyxnREFBZ0Q7UUFDaEQsTUFBTSxhQUFhLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUM1QyxJQUFJLGFBQWEsRUFBRSxDQUFDO1lBQ2xCLE9BQU8sYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFCLENBQUM7UUFFRCxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRDs7T0FFRztJQUNJLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxHQUFXO1FBQ3pDLE9BQU8sR0FBRyxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUN2QyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy9keW5hbWljSXNsYW5kL05ldGVhc2VNdXNpY1Jlc29sdmVyLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNdXNpY0luZm8gfSBmcm9tICcuL3R5cGVzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBOZXRlYXNlTXVzaWNSZXNvbHZlciB7XHJcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgQVBJX1VSTCA9ICdodHRwczovL2FwaS5pbmphaG93LmNuL21ldGluZy8/dHlwZT1zb25nJmlkPSc7XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgcmVzb2x2ZSh1cmw6IHN0cmluZyk6IFByb21pc2U8TXVzaWNJbmZvIHwgbnVsbD4ge1xyXG4gICAgbGV0IHNvbmdJZCA9IGF3YWl0IHRoaXMuZXh0cmFjdFNvbmdJZCh1cmwpO1xyXG4gICAgaWYgKCFzb25nSWQpIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLkFQSV9VUkx9JHtzb25nSWR9YCk7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcblxyXG4gICAgICBpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb25zdCBzb25nID0gZGF0YVswXTtcclxuICAgICAgICBjb25zdCBhcnRpc3QgPSBBcnJheS5pc0FycmF5KHNvbmcuYXJ0aXN0KSA/IHNvbmcuYXJ0aXN0LmpvaW4oJyAvICcpIDogc29uZy5hcnRpc3Q7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHRpdGxlOiBzb25nLm5hbWUsXHJcbiAgICAgICAgICBhcnRpc3Q6IGFydGlzdCxcclxuICAgICAgICAgIGNvdmVyVXJsOiBzb25nLnBpYyxcclxuICAgICAgICAgIGF1ZGlvVXJsOiBzb25nLnVybCxcclxuICAgICAgICAgIGR1cmF0aW9uOiAwLCAvLyBBUEnkuI3ov5Tlm57ml7bplb/vvIzpnIDopoHlkI7nu63lpITnkIZcclxuICAgICAgICAgIGN1cnJlbnRUaW1lOiAwLFxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdbTmV0ZWFzZU11c2ljUmVzb2x2ZXJdIOino+aekOWksei0pTonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgZXh0cmFjdFNvbmdJZCh1cmw6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xyXG4gICAgLy8g5qCH5YeG6ZO+5o6l5qC85byP77yaaHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvc29uZz9pZD0xMjM0NTZcclxuICAgIGNvbnN0IHN0YW5kYXJkTWF0Y2ggPSB1cmwubWF0Y2goL2lkPShcXGQrKS8pO1xyXG4gICAgaWYgKHN0YW5kYXJkTWF0Y2gpIHtcclxuICAgICAgcmV0dXJuIHN0YW5kYXJkTWF0Y2hbMV07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmo4Dmn6XmmK/lkKbkuLrnvZHmmJPkupHpn7PkuZDpk77mjqVcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGlzTmV0ZWFzZU11c2ljVXJsKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdXJsLmluY2x1ZGVzKCdtdXNpYy4xNjMuY29tJyk7XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/dynamicIsland/NeteaseMusicResolver.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/dynamicIsland/PlaylistPanel.ts": 
  /*!******************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/dynamicIsland/PlaylistPanel.ts ***!
  \******************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PlaylistPanel: () => (/* binding */ PlaylistPanel)\n/* harmony export */ });\n/* harmony import */ var _playlist_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./playlist.scss */ \"./src/多云熊/备份/给rovo的/modules/dynamicIsland/playlist.scss\");\n/* harmony import */ var _NeteaseMusicResolver__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./NeteaseMusicResolver */ \"./src/多云熊/备份/给rovo的/modules/dynamicIsland/NeteaseMusicResolver.ts\");\n/* harmony import */ var _QQMusicResolver__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./QQMusicResolver */ \"./src/多云熊/备份/给rovo的/modules/dynamicIsland/QQMusicResolver.ts\");\n/**\n * PlaylistPanel - 灵动岛歌单面板（Overlay）+ 世界书联动 + 预加载解析\n * - 支持：批量导入（多行 URL）、删除 / 置顶 / 拖拽排序（若 jQuery UI Sortable 可用）\n * - 世界书“设置”条目([歌单] 段) 读取与写回（300ms 防抖）\n * - 未找到“设置”条目：允许本地编辑（localStorage）并 toastr 提示；支持后续一键同步\n * - 预加载：在灵动岛初始化完成后可调用 prefetch()，提前扫描世界书并解析歌曲名；面板打开不阻塞\n */\n\n\n\nconst LOCAL_KEY = 'di_playlist_local_urls';\nconst HEADER_MARK = '[歌单]';\nconst SELECTOR = {\n    overlay: '.di-playlist-overlay',\n    panel: '.di-playlist-panel',\n    list: '.di-playlist-list',\n    item: '.di-track',\n    dragHandle: '.drag-handle',\n    btnClose: '.btn-close',\n    btnImport: '.btn-import',\n    btnSort: '.btn-sort',\n    btnClear: '.btn-clear',\n};\nfunction debounce(fn, wait = 300) {\n    let t = null;\n    return (...args) => {\n        if (t)\n            clearTimeout(t);\n        t = setTimeout(() => fn(...args), wait);\n    };\n}\nclass PlaylistPanel {\n    static instance;\n    $overlay = null;\n    overlayMounted = false;\n    tracks = [];\n    metaCache = new Map();\n    binding = null;\n    sortableEnabled = false;\n    // 预加载进度\n    prefetchInProgress = false;\n    prefetchTotal = 0;\n    prefetchDone = 0;\n    saveDebounced = debounce(() => this.persist(), 300);\n    static getInstance() {\n        if (!PlaylistPanel.instance)\n            PlaylistPanel.instance = new PlaylistPanel();\n        return PlaylistPanel.instance;\n    }\n    /**\n     * 预加载（不打开面板）\n     * - 扫描世界书 → 读取 [歌单] → setUrls → 并发解析标题\n     * - 广播事件：di:playlist:prefetch（start/progress/success/error）\n     */\n    async prefetch() {\n        try {\n            $(document).trigger('di:playlist:prefetch', { state: 'start' });\n            await this.scanBindingOnly();\n            let urls = [];\n            if (this.binding) {\n                const content = await this.readSettingsEntryContent(this.binding.worldbookName, this.binding.entryUid);\n                const parsed = this.parsePlaylistBlock(content);\n                this.binding.lineBreak = parsed.lineBreak;\n                urls = parsed.urls;\n            }\n            else {\n                urls = this.loadLocalUrls();\n            }\n            // 初始化解析进度\n            this.prefetchInProgress = true;\n            this.prefetchTotal = urls.length;\n            this.prefetchDone = 0;\n            this.setUrls(urls);\n            if (this.prefetchTotal === 0) {\n                this.prefetchInProgress = false;\n                $(document).trigger('di:playlist:prefetch', { state: 'success', done: 0, total: 0 });\n            }\n        }\n        catch (e) {\n            console.warn('[PlaylistPanel] 预加载失败', e);\n            this.prefetchInProgress = false;\n            $(document).trigger('di:playlist:prefetch', { state: 'error', reason: String(e) });\n        }\n    }\n    /**\n     * 打开面板（即时显示，若未预载则边显示边加载）\n     */\n    async open() {\n        if (!this.overlayMounted) {\n            this.mountOverlay();\n            this.bindEvents();\n        }\n        // 直接展示\n        this.$overlay.show();\n        this.render();\n        // 若尚无数据，则尝试扫描世界书并加载\n        if (this.tracks.length === 0) {\n            await this.scanAndLoad();\n            this.render();\n        }\n    }\n    close() {\n        if (this.$overlay)\n            this.$overlay.hide();\n    }\n    // ========== Overlay 构建 ==========\n    mountOverlay() {\n        const html = `\n      <div class=\"di-playlist-overlay\" style=\"display:none\">\n        <div class=\"di-playlist-backdrop\"></div>\n        <div class=\"di-playlist-panel\">\n          <div class=\"di-playlist-header\">\n            <div class=\"title\">歌单</div>\n            <div class=\"actions\">\n              <button class=\"btn-close\" title=\"关闭\">×</button>\n            </div>\n          </div>\n\n          <div class=\"di-playlist-toolbar\">\n            <button class=\"btn-import\">批量导入</button>\n            <button class=\"btn-sort\">排序</button>\n            <button class=\"btn-clear\">清空</button>\n          </div>\n\n          <div class=\"di-playlist-list\"></div>\n        </div>\n      </div>\n    `;\n        const $root = $('.phone-container').length\n            ? $('.phone-container')\n            : ($('.interface-container').length ? $('.interface-container') : $('body'));\n        $root.append(html);\n        this.$overlay = $(SELECTOR.overlay);\n        this.overlayMounted = true;\n        // 若挂载在屏幕容器内，则锚定于容器并确保容器具备定位上下文\n        if (!$root.is('body')) {\n            const pos = String($root.css('position') || '');\n            if (!pos || pos === 'static') {\n                $root.css('position', 'relative');\n            }\n            this.$overlay.addClass('anchored');\n        }\n    }\n    bindEvents() {\n        // 关闭\n        $(document).on('click', SELECTOR.btnClose, e => {\n            e.stopPropagation();\n            this.close();\n        });\n        // 点击遮罩关闭\n        $(document).on('click', '.di-playlist-backdrop', e => {\n            e.stopPropagation();\n            this.close();\n        });\n        // 批量导入\n        $(document).on('click', SELECTOR.btnImport, e => {\n            e.stopPropagation();\n            this.openImportModal();\n        });\n        // 排序按钮\n        $(document).on('click', SELECTOR.btnSort, e => {\n            e.stopPropagation();\n            this.toggleSortable();\n        });\n        // 清空（带二次确认）\n        $(document).on('click', SELECTOR.btnClear, e => {\n            e.stopPropagation();\n            if (confirm('确定要清空歌单吗？此操作不可撤销。')) {\n                this.tracks = [];\n                this.render();\n                this.saveDebounced();\n                toastr.info('歌单已清空', '清空');\n            }\n            // 播放新歌曲后刷新歌单显示\n            setTimeout(() => this.render(), 100);\n        });\n        // 自动写回模式：不再提供\"同步到世界书\"按钮，见 saveDebounced/persist()\n        // 点击歌曲项播放\n        $(document).on('click', '.di-track', e => {\n            // 如果在排序模式，不响应点击播放\n            if (this.sortableEnabled)\n                return;\n            // 排除点击删除按钮的情况\n            if ($(e.target).closest('.op-remove').length)\n                return;\n            e.stopPropagation();\n            const url = $(e.currentTarget).data('url');\n            if (url) {\n                $(document).trigger('di:playlist:play', { url });\n                toastr.success('开始播放所选条目', '播放');\n            }\n        });\n        $(document).on('click', '.di-track .op-remove', e => {\n            e.stopPropagation();\n            const url = $(e.currentTarget).closest(SELECTOR.item).data('url');\n            this.tracks = this.tracks.filter(t => t.url !== url);\n            this.render();\n            this.saveDebounced();\n            $(document).trigger('di:playlist:changed', { urls: this.tracks.map(t => t.url) });\n        });\n        // 置顶功能已移除 - 使用拖拽排序代替\n    }\n    // ========== 渲染与排序 ==========\n    render() {\n        if (!this.overlayMounted || !this.$overlay)\n            return;\n        const $list = this.$overlay.find(SELECTOR.list);\n        const items = this.tracks.map(track => this.renderItem(track)).join('');\n        $list.html(items);\n        // 初始化或更新拖拽排序\n        this.updateSortable();\n    }\n    renderItem(track) {\n        const { url, title, artist, status, coverUrl } = track;\n        const isLoading = status === 'pending';\n        const isError = status === 'error';\n        // 检查是否为当前播放的歌曲\n        const isPlaying = this.isCurrentlyPlaying(url);\n        return `\n      <div class=\"di-track ${this.sortableEnabled ? 'sortable-mode' : ''} ${isPlaying ? 'now-playing' : ''}\" data-url=\"${this.escape(url)}\" title=\"点击播放\">\n        <div class=\"drag-handle\" style=\"${this.sortableEnabled ? '' : 'display: none;'}\" title=\"拖拽排序\">⋮⋮</div>\n        <div class=\"track-cover\">\n          ${coverUrl ? `<img src=\"${this.escape(coverUrl)}\" alt=\"封面\" />` : '<div class=\"cover-placeholder\">♪</div>'}\n        </div>\n        <div class=\"meta\">\n          <div class=\"title\">${isLoading ? '解析中...' : this.escape(title)}</div>\n          <div class=\"subtitle ${isError ? 'invalid' : ''}\">${isError ? '解析失败' : this.escape(artist)}</div>\n        </div>\n        <div class=\"ops\">\n          <button class=\"op-remove\" title=\"移除\">✕</button>\n        </div>\n      </div>\n    `;\n    }\n    /**\n     * 切换排序模式\n     */\n    toggleSortable() {\n        this.sortableEnabled = !this.sortableEnabled;\n        const $btnSort = $(SELECTOR.btnSort);\n        if (this.sortableEnabled) {\n            $btnSort.addClass('active');\n            toastr.info('排序模式已开启，可以拖动歌曲排序', '排序');\n        }\n        else {\n            $btnSort.removeClass('active');\n            toastr.info('排序模式已关闭', '排序');\n        }\n        this.render();\n    }\n    /**\n     * 更新拖拽排序功能\n     */\n    updateSortable() {\n        const $list = this.$overlay.find(SELECTOR.list);\n        const anyList = $list;\n        if (typeof anyList.sortable === 'function') {\n            // 先销毁现有的sortable实例\n            if (anyList.sortable('instance')) {\n                anyList.sortable('destroy');\n            }\n            // 只在排序模式下初始化sortable\n            if (this.sortableEnabled) {\n                anyList.sortable({\n                    handle: SELECTOR.dragHandle,\n                    axis: 'y',\n                    update: () => {\n                        const newOrder = [];\n                        $list.find(SELECTOR.item).each((_, el) => {\n                            const u = $(el).data('url');\n                            if (u)\n                                newOrder.push(String(u));\n                        });\n                        this.tracks = newOrder.map(url => this.tracks.find(t => t.url === url) || this.createPendingTrack(url));\n                        this.saveDebounced();\n                        $(document).trigger('di:playlist:changed', { urls: this.tracks.map(t => t.url) });\n                    },\n                });\n            }\n        }\n    }\n    // ========== 批量导入 ==========\n    openImportModal() {\n        const id = 'di-import-modal';\n        if ($(`#${id}`).length) {\n            $(`#${id}`).remove();\n        }\n        const modal = `\n      <div id=\"${id}\" class=\"di-import-modal\">\n        <div class=\"box\">\n          <div class=\"title\">批量导入（每行一个 URL）</div>\n          <textarea class=\"text\" placeholder=\"https://music.163.com/#/song?id=xxxxxx\\nhttps://y.qq.com/n/ryqq/songDetail/xxxxxx\"></textarea>\n          <div class=\"actions\">\n            <button class=\"ok\">导入</button>\n            <button class=\"cancel\">取消</button>\n          </div>\n        </div>\n      </div>\n    `;\n        this.$overlay.append(modal);\n        const $modal = $(`#${id}`);\n        $modal.find('.cancel').on('click', () => $modal.remove());\n        $modal.find('.ok').on('click', () => {\n            const raw = String($modal.find('textarea.text').val() || '');\n            const adds = this.parseMultilineUrls(raw);\n            if (adds.length === 0) {\n                toastr.info('没有可导入的 URL', '导入');\n                $modal.remove();\n                return;\n            }\n            this.addUrls(adds);\n            this.render();\n            this.saveDebounced();\n            toastr.success(`已导入 ${adds.length} 条`, '导入');\n            $modal.remove();\n        });\n    }\n    parseMultilineUrls(raw) {\n        return raw\n            .split(/\\r?\\n/)\n            .map(s => s.trim())\n            .filter(s => s.length > 0)\n            .filter(s => !s.startsWith('#') && !s.startsWith('//'))\n            .filter(s => /^https?:\\/\\//i.test(s)); // 只保留有效的 URL\n    }\n    // ========== 世界书：扫描与读写 ==========\n    async scanAndLoad() {\n        await this.scanBindingOnly();\n        if (this.binding) {\n            try {\n                const content = await this.readSettingsEntryContent(this.binding.worldbookName, this.binding.entryUid);\n                const parsed = this.parsePlaylistBlock(content);\n                this.binding.lineBreak = parsed.lineBreak;\n                this.setUrls(parsed.urls);\n                toastr.success('已从世界书加载歌单', '歌单');\n            }\n            catch (e) {\n                console.warn('[PlaylistPanel] 读取世界书失败，使用本地数据', e);\n                this.loadLocal();\n            }\n        }\n        else {\n            // 未绑定，走本地\n            this.loadLocal();\n            toastr.info('未找到名称包含“设置”的条目，可本地编辑，稍后再同步', '歌单');\n        }\n    }\n    async scanBindingOnly() {\n        // 1) 角色绑定（primary → additional）\n        const charBooks = getCharWorldbookNames('current');\n        const names = [];\n        if (charBooks.primary)\n            names.push(charBooks.primary);\n        names.push(...(charBooks.additional || []));\n        const found = await this.locateInWorldbookList(names);\n        if (found) {\n            this.binding = found;\n            return;\n        }\n        // 2) 全局世界书\n        const globals = getGlobalWorldbookNames() || [];\n        const found2 = await this.locateInWorldbookList(globals);\n        if (found2) {\n            this.binding = found2;\n            return;\n        }\n        this.binding = null;\n    }\n    async locateInWorldbookList(list) {\n        for (const wbName of list) {\n            try {\n                const entries = await getWorldbook(wbName);\n                // 过滤名称包含“设置”\n                const matches = entries.filter(e => (e.name || '').includes('设置'));\n                if (matches.length === 0)\n                    continue;\n                // 选择规则：position.order 最小 → uid 最小\n                const chosen = matches.slice().sort((a, b) => {\n                    const oa = a.position?.order ?? 0;\n                    const ob = b.position?.order ?? 0;\n                    if (oa !== ob)\n                        return oa - ob;\n                    return a.uid - b.uid;\n                })[0];\n                const content = String(chosen.content || '');\n                const lineBreak = content.includes('\\r\\n') ? '\\r\\n' : '\\n';\n                return {\n                    worldbookName: wbName,\n                    entryUid: chosen.uid,\n                    entryName: chosen.name,\n                    lineBreak,\n                };\n            }\n            catch {\n                // ignore this worldbook\n            }\n        }\n        return null;\n    }\n    async readSettingsEntryContent(worldbookName, uid) {\n        const entries = await getWorldbook(worldbookName);\n        const entry = entries.find(e => e.uid === uid);\n        if (!entry)\n            throw new Error('设置条目已不存在');\n        return String(entry.content || '');\n    }\n    parsePlaylistBlock(content) {\n        const lineBreak = content.includes('\\r\\n') ? '\\r\\n' : '\\n';\n        const lines = content.split(/\\r?\\n/);\n        let i = 0;\n        let start = -1;\n        let end = lines.length;\n        const isHeader = (s) => /^\\s*\\[[^\\]]+\\]\\s*$/.test(s);\n        const isPlaylistHeader = (s) => s.trim() === HEADER_MARK;\n        while (i < lines.length) {\n            if (isPlaylistHeader(lines[i])) {\n                start = i;\n                i++;\n                break;\n            }\n            i++;\n        }\n        if (start >= 0) {\n            let j = start + 1;\n            while (j < lines.length) {\n                if (isHeader(lines[j])) {\n                    end = j;\n                    break;\n                }\n                j++;\n            }\n            const body = lines.slice(start + 1, end);\n            const urls = body\n                .map(s => s.trim())\n                .filter(s => s.length > 0)\n                .filter(s => !s.startsWith('#') && !s.startsWith('//'));\n            return { urls, hasBlock: true, lineBreak };\n        }\n        return { urls: [], hasBlock: false, lineBreak };\n    }\n    replacePlaylistBlock(content, urls, lineBreak) {\n        const lines = content.split(/\\r?\\n/);\n        const isHeader = (s) => /^\\s*\\[[^\\]]+\\]\\s*$/.test(s);\n        const isPlaylistHeader = (s) => s.trim() === HEADER_MARK;\n        let start = -1;\n        let end = lines.length;\n        for (let i = 0; i < lines.length; i++) {\n            if (isPlaylistHeader(lines[i])) {\n                start = i;\n                for (let j = i + 1; j < lines.length; j++) {\n                    if (isHeader(lines[j])) {\n                        end = j;\n                        break;\n                    }\n                }\n                break;\n            }\n        }\n        const body = [HEADER_MARK, ...urls].join(lineBreak);\n        if (start >= 0) {\n            // 替换\n            const head = lines.slice(0, start).join(lineBreak);\n            const tail = lines.slice(end).join(lineBreak);\n            const sep1 = head.length ? lineBreak : '';\n            const sep2 = tail.length ? lineBreak : '';\n            return `${head}${sep1}${body}${sep2}${tail}`;\n        }\n        // 末尾追加\n        const sep = content.length ? lineBreak + lineBreak : '';\n        return `${content}${sep}${body}`;\n    }\n    async persist(forceToast = false) {\n        if (this.binding) {\n            try {\n                const content = await this.readSettingsEntryContent(this.binding.worldbookName, this.binding.entryUid);\n                const updated = this.replacePlaylistBlock(content, this.tracks.map(t => t.url), this.binding.lineBreak || '\\n');\n                await updateWorldbookWith(this.binding.worldbookName, wb => wb.map(e => (e.uid === this.binding.entryUid ? { ...e, content: updated } : e)), { render: 'debounced' });\n                if (forceToast)\n                    toastr.success('已同步到世界书 [歌单] 段', '同步');\n            }\n            catch (e) {\n                console.error('[PlaylistPanel] 写回世界书失败', e);\n                toastr.error('写回世界书失败，已保留本地更改', '同步');\n                // 回退到本地\n                this.saveLocal();\n                await this.scanBindingOnly(); // 尝试重扫描\n            }\n        }\n        else {\n            // 未绑定：写本地\n            this.saveLocal();\n            if (forceToast)\n                toastr.info('未绑定世界书条目，已保存到本地', '同步');\n        }\n        // 通知播放器列表更改\n        $(document).trigger('di:playlist:changed', { urls: this.tracks.map(t => t.url) });\n    }\n    // ========== 本地存储 ==========\n    loadLocalUrls() {\n        try {\n            const raw = localStorage.getItem(LOCAL_KEY);\n            if (raw) {\n                const arr = JSON.parse(raw);\n                if (Array.isArray(arr))\n                    return this.uniqueStable(arr.map(String));\n            }\n        }\n        catch {\n            // ignore\n        }\n        return [];\n    }\n    loadLocal() {\n        const urls = this.loadLocalUrls();\n        this.setUrls(urls);\n    }\n    saveLocal() {\n        try {\n            localStorage.setItem(LOCAL_KEY, JSON.stringify(this.tracks.map(t => t.url)));\n        }\n        catch {\n            // ignore\n        }\n    }\n    // ========== Track & Meta Data ==========\n    setUrls(urls) {\n        this.tracks = urls.map(url => this.createPendingTrack(url));\n        this.resolveAllTracks();\n    }\n    addUrls(urls) {\n        const newTracks = urls.map(url => this.createPendingTrack(url));\n        this.tracks = this.uniqueStableTracks([...newTracks, ...this.tracks]);\n        this.resolveAllTracks();\n    }\n    // 对外暴露当前歌单 URLs（供播放器读取）\n    getUrls() {\n        return this.tracks.map(t => t.url);\n    }\n    // 获取歌单第一首歌的 URL（若不存在则返回 null）\n    getFirstUrl() {\n        return this.tracks.length > 0 ? this.tracks[0].url : null;\n    }\n    createPendingTrack(url) {\n        return {\n            url,\n            title: this.extractTitle(url),\n            artist: '未知艺术家',\n            status: 'pending',\n        };\n    }\n    resolveAllTracks() {\n        this.tracks.forEach(track => {\n            if (track.status === 'pending') {\n                this.resolveTrack(track);\n            }\n        });\n    }\n    resolveTrack(track) {\n        const finish = (state) => {\n            // 解析完成后渲染（若已挂载）\n            this.render();\n            // 预加载进度广播\n            if (this.prefetchInProgress) {\n                this.prefetchDone++;\n                $(document).trigger('di:playlist:prefetch', {\n                    state: 'progress',\n                    done: this.prefetchDone,\n                    total: this.prefetchTotal,\n                });\n                if (this.prefetchDone >= this.prefetchTotal) {\n                    this.prefetchInProgress = false;\n                    $(document).trigger('di:playlist:prefetch', {\n                        state: 'success',\n                        done: this.prefetchDone,\n                        total: this.prefetchTotal,\n                    });\n                }\n            }\n            // 单项解析结果事件\n            $(document).trigger('di:playlist:itemResolved', {\n                url: track.url,\n                title: track.title,\n                state,\n            });\n        };\n        const cached = this.metaCache.get(track.url);\n        if (cached) {\n            Object.assign(track, cached, { status: 'resolved' });\n            finish('resolved');\n            return;\n        }\n        // 网易云音乐\n        if (_NeteaseMusicResolver__WEBPACK_IMPORTED_MODULE_1__.NeteaseMusicResolver.isNeteaseMusicUrl(track.url)) {\n            _NeteaseMusicResolver__WEBPACK_IMPORTED_MODULE_1__.NeteaseMusicResolver.resolve(track.url)\n                .then(info => {\n                if (info) {\n                    track.title = info.title;\n                    track.artist = info.artist;\n                    track.coverUrl = info.coverUrl;\n                    track.status = 'resolved';\n                    this.metaCache.set(track.url, { title: info.title, artist: info.artist, coverUrl: info.coverUrl });\n                    finish('resolved');\n                }\n                else {\n                    track.status = 'error';\n                    finish('error');\n                }\n            })\n                .catch(() => {\n                track.status = 'error';\n                finish('error');\n            });\n        }\n        // QQ 音乐\n        else if (_QQMusicResolver__WEBPACK_IMPORTED_MODULE_2__.QQMusicResolver.isQQMusicUrl(track.url)) {\n            _QQMusicResolver__WEBPACK_IMPORTED_MODULE_2__.QQMusicResolver.resolve(track.url)\n                .then(info => {\n                if (info) {\n                    track.title = info.title;\n                    track.artist = info.artist;\n                    track.coverUrl = info.coverUrl;\n                    track.status = 'resolved';\n                    this.metaCache.set(track.url, { title: info.title, artist: info.artist, coverUrl: info.coverUrl });\n                    finish('resolved');\n                }\n                else {\n                    track.status = 'error';\n                    finish('error');\n                }\n            })\n                .catch(() => {\n                track.status = 'error';\n                finish('error');\n            });\n        }\n        // 通用链接\n        else {\n            // 通用链接：MVP 先直接通过文件名兜底（后续可扩展 ID3/HTML 标题解析）\n            track.status = 'resolved';\n            finish('resolved');\n        }\n    }\n    // ========== 工具 ==========\n    uniqueStableTracks(tracks) {\n        const seen = new Set();\n        const out = [];\n        for (const t of tracks) {\n            if (!seen.has(t.url)) {\n                seen.add(t.url);\n                out.push(t);\n            }\n        }\n        return out;\n    }\n    uniqueStable(arr) {\n        const seen = new Set();\n        const out = [];\n        for (const s of arr) {\n            if (!seen.has(s)) {\n                seen.add(s);\n                out.push(s);\n            }\n        }\n        return out;\n    }\n    looksLikeUrl(s) {\n        return /^https?:\\/\\//i.test(s);\n    }\n    extractTitle(url) {\n        try {\n            const u = new URL(url);\n            const name = u.pathname.split('/').pop() || '';\n            return decodeURIComponent((name || '').split('.')[0]) || url;\n        }\n        catch {\n            return url;\n        }\n    }\n    escape(s) {\n        const map = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            \"'\": '&#39;',\n        };\n        return s.replace(/[&<>\"']/g, m => map[m]);\n    }\n    /**\n     * 检查URL是否为当前正在播放的歌曲\n     */\n    isCurrentlyPlaying(url) {\n        try {\n            // 导入播放器类并获取实例\n            const DynamicIslandMusicPlayer = (__webpack_require__(/*! ./DynamicIslandMusicPlayer */ \"./src/多云熊/备份/给rovo的/modules/dynamicIsland/DynamicIslandMusicPlayer.ts\").DynamicIslandMusicPlayer);\n            const player = DynamicIslandMusicPlayer.getInstance();\n            if (!player || !player.currentPlaylistUrl)\n                return false;\n            // 检查当前播放的URL是否匹配\n            return player.currentPlaylistUrl === url;\n        }\n        catch (error) {\n            console.log('[PlaylistPanel] 无法获取播放器状态:', error);\n            return false;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZHluYW1pY0lzbGFuZC9QbGF5bGlzdFBhbmVsLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7Ozs7O0dBTUc7QUFFc0I7QUFDcUM7QUFDVjtBQXVCcEQsTUFBTSxTQUFTLEdBQUcsd0JBQXdCLENBQUM7QUFDM0MsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDO0FBRTNCLE1BQU0sUUFBUSxHQUFHO0lBQ2YsT0FBTyxFQUFFLHNCQUFzQjtJQUMvQixLQUFLLEVBQUUsb0JBQW9CO0lBQzNCLElBQUksRUFBRSxtQkFBbUI7SUFDekIsSUFBSSxFQUFFLFdBQVc7SUFDakIsVUFBVSxFQUFFLGNBQWM7SUFDMUIsUUFBUSxFQUFFLFlBQVk7SUFDdEIsU0FBUyxFQUFFLGFBQWE7SUFDeEIsT0FBTyxFQUFFLFdBQVc7SUFDcEIsUUFBUSxFQUFFLFlBQVk7Q0FDdkIsQ0FBQztBQUVGLFNBQVMsUUFBUSxDQUFvQyxFQUFLLEVBQUUsSUFBSSxHQUFHLEdBQUc7SUFDcEUsSUFBSSxDQUFDLEdBQVEsSUFBSSxDQUFDO0lBQ2xCLE9BQU8sQ0FBQyxHQUFHLElBQW1CLEVBQUUsRUFBRTtRQUNoQyxJQUFJLENBQUM7WUFBRSxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkIsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUMxQyxDQUFDLENBQUM7QUFDSixDQUFDO0FBRU0sTUFBTSxhQUFhO0lBQ2hCLE1BQU0sQ0FBQyxRQUFRLENBQWdCO0lBRS9CLFFBQVEsR0FBK0IsSUFBSSxDQUFDO0lBQzVDLGNBQWMsR0FBRyxLQUFLLENBQUM7SUFFdkIsTUFBTSxHQUFZLEVBQUUsQ0FBQztJQUNyQixTQUFTLEdBQUcsSUFBSSxHQUFHLEVBQTBCLENBQUM7SUFDOUMsT0FBTyxHQUE0QixJQUFJLENBQUM7SUFDeEMs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RCxPQUFPLEtBQUssQ0FBQztRQUNmLENBQUM7SUFDSCxDQUFDO0NBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WkmuS6keeGii/lpIfku70v57uZcm92b+eahC9tb2R1bGVzL2R5bmFtaWNJc2xhbmQvUGxheWxpc3RQYW5lbC50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQbGF5bGlzdFBhbmVsIC0g54G15Yqo5bKb5q2M5Y2V6Z2i5p2/77yIT3Zlcmxhee+8iSsg5LiW55WM5Lmm6IGU5YqoICsg6aKE5Yqg6L296Kej5p6QXG4gKiAtIOaUr+aMge+8muaJuemHj+WvvOWFpe+8iOWkmuihjCBVUkzvvInjgIHliKDpmaQgLyDnva7pobYgLyDmi5bmi73mjpLluo/vvIjoi6UgalF1ZXJ5IFVJIFNvcnRhYmxlIOWPr+eUqO+8iVxuICogLSDkuJbnlYzkuabigJzorr7nva7igJ3mnaHnm64oW+atjOWNlV0g5q61KSDor7vlj5bkuI7lhpnlm57vvIgzMDBtcyDpmLLmipbvvIlcbiAqIC0g5pyq5om+5Yiw4oCc6K6+572u4oCd5p2h55uu77ya5YWB6K645pys5Zyw57yW6L6R77yIbG9jYWxTdG9yYWdl77yJ5bm2IHRvYXN0ciDmj5DnpLrvvJvmlK/mjIHlkI7nu63kuIDplK7lkIzmraVcbiAqIC0g6aKE5Yqg6L2977ya5Zyo54G15Yqo5bKb5Yid5aeL5YyW5a6M5oiQ5ZCO5Y+v6LCD55SoIHByZWZldGNoKCnvvIzmj5DliY3miavmj4/kuJbnlYzkuablubbop6PmnpDmrYzmm7LlkI3vvJvpnaLmnb/miZPlvIDkuI3pmLvloZ5cbiAqL1xuXG5pbXBvcnQgJy4vcGxheWxpc3Quc2Nzcyc7XG5pbXBvcnQgeyBOZXRlYXNlTXVzaWNSZXNvbHZlciB9IGZyb20gJy4vTmV0ZWFzZU11c2ljUmVzb2x2ZXInO1xuaW1wb3J0IHsgUVFNdXNpY1Jlc29sdmVyIH0gZnJvbSAnLi9RUU11c2ljUmVzb2x2ZXInO1xuXG50eXBlIFdvcmxkYm9va0JpbmRpbmcgPSB7XG4gIHdvcmxkYm9va05hbWU6IHN0cmluZztcbiAgZW50cnlVaWQ6IG51bWJlcjtcbiAgZW50cnlOYW1lOiBzdHJpbmc7XG4gIGxpbmVCcmVhazogJ1xcbicgfCAnXFxyXFxuJztcbn07XG5cbnR5cGUgUGFyc2VSZXN1bHQgPSB7XG4gIHVybHM6IHN0cmluZ1tdO1xuICBoYXNCbG9jazogYm9vbGVhbjtcbiAgbGluZUJyZWFrOiAnXFxuJyB8ICdcXHJcXG4nO1xufTtcblxudHlwZSBUcmFjayA9IHtcbiAgdXJsOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGFydGlzdDogc3RyaW5nO1xuICBjb3ZlclVybD86IHN0cmluZztcbiAgc3RhdHVzOiAncmVzb2x2ZWQnIHwgJ3BlbmRpbmcnIHwgJ2Vycm9yJztcbn07XG5cbmNvbnN0IExPQ0FMX0tFWSA9ICdkaV9wbGF5bGlzdF9sb2NhbF91cmxzJztcbmNvbnN0IEhFQURFUl9NQVJLID0gJ1vmrYzljZVdJztcblxuY29uc3QgU0VMRUNUT1IgPSB7XG4gIG92ZXJsYXk6ICcuZGktcGxheWxpc3Qtb3ZlcmxheScsXG4gIHBhbmVsOiAnLmRpLXBsYXlsaXN0LXBhbmVsJyxcbiAgbGlzdDogJy5kaS1wbGF5bGlzdC1saXN0JyxcbiAgaXRlbTogJy5kaS10cmFjaycsXG4gIGRyYWdIYW5kbGU6ICcuZHJhZy1oYW5kbGUnLFxuICBidG5DbG9zZTogJy5idG4tY2xvc2UnLFxuICBidG5JbXBvcnQ6ICcuYnRuLWltcG9ydCcsXG4gIGJ0blNvcnQ6ICcuYnRuLXNvcnQnLFxuICBidG5DbGVhcjogJy5idG4tY2xlYXInLFxufTtcblxuZnVuY3Rpb24gZGVib3VuY2U8VCBleHRlbmRzICguLi5hcmdzOiBhbnlbXSkgPT4gYW55PihmbjogVCwgd2FpdCA9IDMwMCkge1xuICBsZXQgdDogYW55ID0gbnVsbDtcbiAgcmV0dXJuICguLi5hcmdzOiBQYXJhbWV0ZXJzPFQ+KSA9PiB7XG4gICAgaWYgKHQpIGNsZWFyVGltZW91dCh0KTtcbiAgICB0ID0gc2V0VGltZW91dCgoKSA9PiBmbiguLi5hcmdzKSwgd2FpdCk7XG4gIH07XG59XG5cbmV4cG9ydCBjbGFzcyBQbGF5bGlzdFBhbmVsIHtcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IFBsYXlsaXN0UGFuZWw7XG5cbiAgcHJpdmF0ZSAkb3ZlcmxheTogSlF1ZXJ5PEhUTUxFbGVtZW50PiB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIG92ZXJsYXlNb3VudGVkID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSB0cmFja3M6IFRyYWNrW10gPSBbXTtcbiAgcHJpdmF0ZSBtZXRhQ2FjaGUgPSBuZXcgTWFwPHN0cmluZywgUGFydGlhbDxUcmFjaz4+KCk7XG4gIHByaXZhdGUgYmluZGluZzogV29ybGRib29rQmluZGluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHNvcnRhYmxlRW5hYmxlZCA9IGZhbHNlO1xuXG4gIC8vIOmihOWKoOi9vei/m+W6plxuICBwcml2YXRlIHByZWZldGNoSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICBwcml2YXRlIHByZWZldGNoVG90YWwgPSAwO1xuICBwcml2YXRlIHByZWZldGNoRG9uZSA9IDA7XG5cbiAgcHJpdmF0ZSBzYXZlRGVib3VuY2VkID0gZGVib3VuY2UoKCkgPT4gdGhpcy5wZXJzaXN0KCksIDMwMCk7XG5cbiAgc3RhdGljIGdldEluc3RhbmNlKCk6IFBsYXlsaXN0UGFuZWwge1xuICAgIGlmICghUGxheWxpc3RQYW5lbC5pbnN0YW5jZSkgUGxheWxpc3RQYW5lbC5pbnN0YW5jZSA9IG5ldyBQbGF5bGlzdFBhbmVsKCk7XG4gICAgcmV0dXJuIFBsYXlsaXN0UGFuZWwuaW5zdGFuY2U7XG4gIH1cblxuICAvKipcbiAgICog6aKE5Yqg6L2977yI5LiN5omT5byA6Z2i5p2/77yJXG4gICAqIC0g5omr5o+P5LiW55WM5LmmIOKGkiDor7vlj5YgW+atjOWNlV0g4oaSIHNldFVybHMg4oaSIOW5tuWPkeino+aekOagh+mimFxuICAgKiAtIOW5v+aSreS6i+S7tu+8mmRpOnBsYXlsaXN0OnByZWZldGNo77yIc3RhcnQvcHJvZ3Jlc3Mvc3VjY2Vzcy9lcnJvcu+8iVxuICAgKi9cbiAgYXN5bmMgcHJlZmV0Y2goKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgICQoZG9jdW1lbnQpLnRyaWdnZXIoJ2RpOnBsYXlsaXN0OnByZWZldGNoJywgeyBzdGF0ZTogJ3N0YXJ0JyB9KTtcblxuICAgICAgYXdhaXQgdGhpcy5zY2FuQmluZGluZ09ubHkoKTtcblxuICAgICAgbGV0IHVybHM6IHN0cmluZ1tdID0gW107XG4gICAgICBpZiAodGhpcy5iaW5kaW5nKSB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnJlYWRTZXR0aW5nc0VudHJ5Q29udGVudCh0aGlzLmJpbmRpbmcud29ybGRib29rTmFtZSwgdGhpcy5iaW5kaW5nLmVudHJ5VWlkKTtcbiAgICAgICAgY29uc3QgcGFyc2VkID0gdGhpcy5wYXJzZVBsYXlsaXN0QmxvY2soY29udGVudCk7XG4gICAgICAgIHRoaXMuYmluZGluZy5saW5lQnJlYWsgPSBwYXJzZWQubGluZUJyZWFrO1xuICAgICAgICB1cmxzID0gcGFyc2VkLnVybHM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1cmxzID0gdGhpcy5sb2FkTG9jYWxVcmxzKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIOWIneWni+WMluino+aekOi/m+W6plxuICAgICAgdGhpcy5wcmVmZXRjaEluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgdGhpcy5wcmVmZXRjaFRvdGFsID0gdXJscy5sZW5ndGg7XG4gICAgICB0aGlzLnByZWZldGNoRG9uZSA9IDA7XG5cbiAgICAgIHRoaXMuc2V0VXJscyh1cmxzKTtcblxuICAgICAgaWYgKHRoaXMucHJlZmV0Y2hUb3RhbCA9PT0gMCkge1xuICAgICAgICB0aGlzLnByZWZldGNoSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICAkKGRvY3VtZW50KS50cmlnZ2VyKCdkaTpwbGF5bGlzdDpwcmVmZXRjaCcsIHsgc3RhdGU6ICdzdWNjZXNzJywgZG9uZTogMCwgdG90YWw6IDAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKCdbUGxheWxpc3RQYW5lbF0g6aKE5Yqg6L295aSx6LSlJywgZSk7XG4gICAgICB0aGlzLnByZWZldGNoSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgJChkb2N1bWVudCkudHJpZ2dlcignZGk6cGxheWxpc3Q6cHJlZmV0Y2gnLCB7IHN0YXRlOiAnZXJyb3InLCByZWFzb246IFN0cmluZyhlKSB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5omT5byA6Z2i5p2/77yI5Y2z5pe25pi+56S677yM6Iul5pyq6aKE6L295YiZ6L655pi+56S66L655Yqg6L2977yJXG4gICAqL1xuICBhc3luYyBvcGVuKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdGhpcy5vdmVybGF5TW91bnRlZCkge1xuICAgICAgdGhpcy5tb3VudE92ZXJsYXkoKTtcbiAgICAgIHRoaXMuYmluZEV2ZW50cygpO1xuICAgIH1cblxuICAgIC8vIOebtOaOpeWxleekulxuICAgIHRoaXMuJG92ZXJsYXkhLnNob3coKTtcbiAgICB0aGlzLnJlbmRlcigpO1xuXG4gICAgLy8g6Iul5bCa5peg5pWw5o2u77yM5YiZ5bCd6K+V5omr5o+P5LiW55WM5Lmm5bm25Yqg6L29XG4gICAgaWYgKHRoaXMudHJhY2tzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgYXdhaXQgdGhpcy5zY2FuQW5kTG9hZCgpO1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9XG4gIH1cblxuICBjbG9zZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy4kb3ZlcmxheSkgdGhpcy4kb3ZlcmxheS5oaWRlKCk7XG4gIH1cblxuICAvLyA9PT09PT09PT09IE92ZXJsYXkg5p6E5bu6ID09PT09PT09PT1cblxuICBwcml2YXRlIG1vdW50T3ZlcmxheSgpOiB2b2lkIHtcbiAgICBjb25zdCBodG1sID0gYFxuICAgICAgPGRpdiBjbGFzcz1cImRpLXBsYXlsaXN0LW92ZXJsYXlcIiBzdHlsZT1cImRpc3BsYXk6bm9uZVwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGktcGxheWxpc3QtYmFja2Ryb3BcIj48L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImRpLXBsYXlsaXN0LXBhbmVsXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImRpLXBsYXlsaXN0LWhlYWRlclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRpdGxlXCI+5q2M5Y2VPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWN0aW9uc1wiPlxuICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuLWNsb3NlXCIgdGl0bGU9XCLlhbPpl61cIj7DlzwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGktcGxheWxpc3QtdG9vbGJhclwiPlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0bi1pbXBvcnRcIj7mibnph4/lr7zlhaU8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4tc29ydFwiPuaOkuW6jzwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0bi1jbGVhclwiPua4heepujwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImRpLXBsYXlsaXN0LWxpc3RcIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuXG4gICAgY29uc3QgJHJvb3QgPSAkKCcucGhvbmUtY29udGFpbmVyJykubGVuZ3RoXG4gICAgICA/ICQoJy5waG9uZS1jb250YWluZXInKVxuICAgICAgOiAoJCgnLmludGVyZmFjZS1jb250YWluZXInKS5sZW5ndGggPyAkKCcuaW50ZXJmYWNlLWNvbnRhaW5lcicpIDogJCgnYm9keScpKTtcbiAgICAkcm9vdC5hcHBlbmQoaHRtbCk7XG5cbiAgICB0aGlzLiRvdmVybGF5ID0gJChTRUxFQ1RPUi5vdmVybGF5KTtcbiAgICB0aGlzLm92ZXJsYXlNb3VudGVkID0gdHJ1ZTtcblxuICAgIC8vIOiLpeaMgui9veWcqOWxj+W5leWuueWZqOWGhe+8jOWImemUmuWumuS6juWuueWZqOW5tuehruS/neWuueWZqOWFt+Wkh+WumuS9jeS4iuS4i+aWh1xuICAgIGlmICghJHJvb3QuaXMoJ2JvZHknKSkge1xuICAgICAgY29uc3QgcG9zID0gU3RyaW5nKCRyb290LmNzcygncG9zaXRpb24nKSB8fCAnJyk7XG4gICAgICBpZiAoIXBvcyB8fCBwb3MgPT09ICdzdGF0aWMnKSB7XG4gICAgICAgICRyb290LmNzcygncG9zaXRpb24nLCAncmVsYXRpdmUnKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuJG92ZXJsYXkuYWRkQ2xhc3MoJ2FuY2hvcmVkJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBiaW5kRXZlbnRzKCk6IHZvaWQge1xuICAgIC8vIOWFs+mXrVxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsIFNFTEVDVE9SLmJ0bkNsb3NlLCBlID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG5cbiAgICAvLyDngrnlh7vpga7nvanlhbPpl61cbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmRpLXBsYXlsaXN0LWJhY2tkcm9wJywgZSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgLy8g5om56YeP5a+85YWlXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgU0VMRUNUT1IuYnRuSW1wb3J0LCBlID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0aGlzLm9wZW5JbXBvcnRNb2RhbCgpO1xuICAgIH0pO1xuXG4gICAgLy8g5o6S5bqP5oyJ6ZKuXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgU0VMRUNUT1IuYnRuU29ydCwgZSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy50b2dnbGVTb3J0YWJsZSgpO1xuICAgIH0pO1xuXG4gICAgLy8g5riF56m677yI5bim5LqM5qyh56Gu6K6k77yJXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgU0VMRUNUT1IuYnRuQ2xlYXIsIGUgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGlmIChjb25maXJtKCfnoa7lrpropoHmuIXnqbrmrYzljZXlkJfvvJ/mraTmk43kvZzkuI3lj6/mkqTplIDjgIInKSkge1xuICAgICAgICB0aGlzLnRyYWNrcyA9IFtdO1xuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB0aGlzLnNhdmVEZWJvdW5jZWQoKTtcbiAgICAgICAgdG9hc3RyLmluZm8oJ+atjOWNleW3sua4heepuicsICfmuIXnqbonKTtcbiAgICAgIH1cbiAgICAgIC8vIOaSreaUvuaWsOatjOabsuWQjuWIt+aWsOatjOWNleaYvuekulxuICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnJlbmRlcigpLCAxMDApO1xuICAgIH0pO1xuXG4gICAgLy8g6Ieq5Yqo5YaZ5Zue5qih5byP77ya5LiN5YaN5o+Q5L6bXCLlkIzmraXliLDkuJbnlYzkuaZcIuaMiemSru+8jOingSBzYXZlRGVib3VuY2VkL3BlcnNpc3QoKVxuXG4gICAgLy8g54K55Ye75q2M5puy6aG55pKt5pS+XG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5kaS10cmFjaycsIGUgPT4ge1xuICAgICAgLy8g5aaC5p6c5Zyo5o6S5bqP5qih5byP77yM5LiN5ZON5bqU54K55Ye75pKt5pS+XG4gICAgICBpZiAodGhpcy5zb3J0YWJsZUVuYWJsZWQpIHJldHVybjtcbiAgICAgIFxuICAgICAgLy8g5o6S6Zmk54K55Ye75Yig6Zmk5oyJ6ZKu55qE5oOF5Ya1XG4gICAgICBpZiAoJChlLnRhcmdldCkuY2xvc2VzdCgnLm9wLXJlbW92ZScpLmxlbmd0aCkgcmV0dXJuO1xuICAgICAgXG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgY29uc3QgdXJsID0gJChlLmN1cnJlbnRUYXJnZXQpLmRhdGEoJ3VybCcpIGFzIHN0cmluZztcbiAgICAgIGlmICh1cmwpIHtcbiAgICAgICAgJChkb2N1bWVudCkudHJpZ2dlcignZGk6cGxheWxpc3Q6cGxheScsIHsgdXJsIH0pO1xuICAgICAgICB0b2FzdHIuc3VjY2Vzcygn5byA5aeL5pKt5pS+5omA6YCJ5p2h55uuJywgJ+aSreaUvicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5kaS10cmFjayAub3AtcmVtb3ZlJywgZSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgY29uc3QgdXJsID0gJChlLmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoU0VMRUNUT1IuaXRlbSkuZGF0YSgndXJsJykgYXMgc3RyaW5nO1xuICAgICAgdGhpcy50cmFja3MgPSB0aGlzLnRyYWNrcy5maWx0ZXIodCA9PiB0LnVybCAhPT0gdXJsKTtcbiAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICB0aGlzLnNhdmVEZWJvdW5jZWQoKTtcbiAgICAgICQoZG9jdW1lbnQpLnRyaWdnZXIoJ2RpOnBsYXlsaXN0OmNoYW5nZWQnLCB7IHVybHM6IHRoaXMudHJhY2tzLm1hcCh0ID0+IHQudXJsKSB9KTtcbiAgICB9KTtcblxuICAgIC8vIOe9rumhtuWKn+iDveW3suenu+mZpCAtIOS9v+eUqOaLluaLveaOkuW6j+S7o+abv1xuICB9XG5cbiAgLy8gPT09PT09PT09PSDmuLLmn5PkuI7mjpLluo8gPT09PT09PT09PVxuXG4gIHByaXZhdGUgcmVuZGVyKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5vdmVybGF5TW91bnRlZCB8fCAhdGhpcy4kb3ZlcmxheSkgcmV0dXJuO1xuXG4gICAgY29uc3QgJGxpc3QgPSB0aGlzLiRvdmVybGF5LmZpbmQoU0VMRUNUT1IubGlzdCk7XG4gICAgY29uc3QgaXRlbXMgPSB0aGlzLnRyYWNrcy5tYXAodHJhY2sgPT4gdGhpcy5yZW5kZXJJdGVtKHRyYWNrKSkuam9pbignJyk7XG4gICAgJGxpc3QuaHRtbChpdGVtcyk7XG5cbiAgICAvLyDliJ3lp4vljJbmiJbmm7TmlrDmi5bmi73mjpLluo9cbiAgICB0aGlzLnVwZGF0ZVNvcnRhYmxlKCk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckl0ZW0odHJhY2s6IFRyYWNrKTogc3RyaW5nIHtcbiAgICBjb25zdCB7IHVybCwgdGl0bGUsIGFydGlzdCwgc3RhdHVzLCBjb3ZlclVybCB9ID0gdHJhY2s7XG4gICAgY29uc3QgaXNMb2FkaW5nID0gc3RhdHVzID09PSAncGVuZGluZyc7XG4gICAgY29uc3QgaXNFcnJvciA9IHN0YXR1cyA9PT0gJ2Vycm9yJztcbiAgICBcbiAgICAvLyDmo4Dmn6XmmK/lkKbkuLrlvZPliY3mkq3mlL7nmoTmrYzmm7JcbiAgICBjb25zdCBpc1BsYXlpbmcgPSB0aGlzLmlzQ3VycmVudGx5UGxheWluZyh1cmwpO1xuXG4gICAgcmV0dXJuIGBcbiAgICAgIDxkaXYgY2xhc3M9XCJkaS10cmFjayAke3RoaXMuc29ydGFibGVFbmFibGVkID8gJ3NvcnRhYmxlLW1vZGUnIDogJyd9ICR7aXNQbGF5aW5nID8gJ25vdy1wbGF5aW5nJyA6ICcnfVwiIGRhdGEtdXJsPVwiJHt0aGlzLmVzY2FwZSh1cmwpfVwiIHRpdGxlPVwi54K55Ye75pKt5pS+XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJkcmFnLWhhbmRsZVwiIHN0eWxlPVwiJHt0aGlzLnNvcnRhYmxlRW5hYmxlZCA/ICcnIDogJ2Rpc3BsYXk6IG5vbmU7J31cIiB0aXRsZT1cIuaLluaLveaOkuW6j1wiPuKLruKLrjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwidHJhY2stY292ZXJcIj5cbiAgICAgICAgICAke2NvdmVyVXJsID8gYDxpbWcgc3JjPVwiJHt0aGlzLmVzY2FwZShjb3ZlclVybCl9XCIgYWx0PVwi5bCB6Z2iXCIgLz5gIDogJzxkaXYgY2xhc3M9XCJjb3Zlci1wbGFjZWhvbGRlclwiPuKZqjwvZGl2Pid9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwibWV0YVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aXRsZVwiPiR7aXNMb2FkaW5nID8gJ+ino+aekOS4rS4uLicgOiB0aGlzLmVzY2FwZSh0aXRsZSl9PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInN1YnRpdGxlICR7aXNFcnJvciA/ICdpbnZhbGlkJyA6ICcnfVwiPiR7aXNFcnJvciA/ICfop6PmnpDlpLHotKUnIDogdGhpcy5lc2NhcGUoYXJ0aXN0KX08L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJvcHNcIj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwib3AtcmVtb3ZlXCIgdGl0bGU9XCLnp7vpmaRcIj7inJU8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIh+aNouaOkuW6j+aooeW8j1xuICAgKi9cbiAgcHJpdmF0ZSB0b2dnbGVTb3J0YWJsZSgpOiB2b2lkIHtcbiAgICB0aGlzLnNvcnRhYmxlRW5hYmxlZCA9ICF0aGlzLnNvcnRhYmxlRW5hYmxlZDtcbiAgICBjb25zdCAkYnRuU29ydCA9ICQoU0VMRUNUT1IuYnRuU29ydCk7XG4gICAgXG4gICAgaWYgKHRoaXMuc29ydGFibGVFbmFibGVkKSB7XG4gICAgICAkYnRuU29ydC5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICB0b2FzdHIuaW5mbygn5o6S5bqP5qih5byP5bey5byA5ZCv77yM5Y+v5Lul5ouW5Yqo5q2M5puy5o6S5bqPJywgJ+aOkuW6jycpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkYnRuU29ydC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICB0b2FzdHIuaW5mbygn5o6S5bqP5qih5byP5bey5YWz6ZetJywgJ+aOkuW6jycpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIOabtOaWsOaLluaLveaOkuW6j+WKn+iDvVxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVTb3J0YWJsZSgpOiB2b2lkIHtcbiAgICBjb25zdCAkbGlzdCA9IHRoaXMuJG92ZXJsYXkhLmZpbmQoU0VMRUNUT1IubGlzdCk7XG4gICAgY29uc3QgYW55TGlzdDogYW55ID0gJGxpc3QgYXMgYW55O1xuICAgIFxuICAgIGlmICh0eXBlb2YgYW55TGlzdC5zb3J0YWJsZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy8g5YWI6ZSA5q+B546w5pyJ55qEc29ydGFibGXlrp7kvotcbiAgICAgIGlmIChhbnlMaXN0LnNvcnRhYmxlKCdpbnN0YW5jZScpKSB7XG4gICAgICAgIGFueUxpc3Quc29ydGFibGUoJ2Rlc3Ryb3knKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8g5Y+q5Zyo5o6S5bqP5qih5byP5LiL5Yid5aeL5YyWc29ydGFibGVcbiAgICAgIGlmICh0aGlzLnNvcnRhYmxlRW5hYmxlZCkge1xuICAgICAgICBhbnlMaXN0LnNvcnRhYmxlKHtcbiAgICAgICAgICBoYW5kbGU6IFNFTEVDVE9SLmRyYWdIYW5kbGUsXG4gICAgICAgICAgYXhpczogJ3knLFxuICAgICAgICAgIHVwZGF0ZTogKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV3T3JkZXI6IHN0cmluZ1tdID0gW107XG4gICAgICAgICAgICAkbGlzdC5maW5kKFNFTEVDVE9SLml0ZW0pLmVhY2goKF8sIGVsKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHUgPSAkKGVsKS5kYXRhKCd1cmwnKTtcbiAgICAgICAgICAgICAgaWYgKHUpIG5ld09yZGVyLnB1c2goU3RyaW5nKHUpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy50cmFja3MgPSBuZXdPcmRlci5tYXAodXJsID0+IHRoaXMudHJhY2tzLmZpbmQodCA9PiB0LnVybCA9PT0gdXJsKSB8fCB0aGlzLmNyZWF0ZVBlbmRpbmdUcmFjayh1cmwpKTtcbiAgICAgICAgICAgIHRoaXMuc2F2ZURlYm91bmNlZCgpO1xuICAgICAgICAgICAgJChkb2N1bWVudCkudHJpZ2dlcignZGk6cGxheWxpc3Q6Y2hhbmdlZCcsIHsgdXJsczogdGhpcy50cmFja3MubWFwKHQgPT4gdC51cmwpIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vID09PT09PT09PT0g5om56YeP5a+85YWlID09PT09PT09PT1cblxuICBwcml2YXRlIG9wZW5JbXBvcnRNb2RhbCgpOiB2b2lkIHtcbiAgICBjb25zdCBpZCA9ICdkaS1pbXBvcnQtbW9kYWwnO1xuICAgIGlmICgkKGAjJHtpZH1gKS5sZW5ndGgpIHtcbiAgICAgICQoYCMke2lkfWApLnJlbW92ZSgpO1xuICAgIH1cbiAgICBjb25zdCBtb2RhbCA9IGBcbiAgICAgIDxkaXYgaWQ9XCIke2lkfVwiIGNsYXNzPVwiZGktaW1wb3J0LW1vZGFsXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJib3hcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidGl0bGVcIj7mibnph4/lr7zlhaXvvIjmr4/ooYzkuIDkuKogVVJM77yJPC9kaXY+XG4gICAgICAgICAgPHRleHRhcmVhIGNsYXNzPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiaHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvc29uZz9pZD14eHh4eHhcXG5odHRwczovL3kucXEuY29tL24vcnlxcS9zb25nRGV0YWlsL3h4eHh4eFwiPjwvdGV4dGFyZWE+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImFjdGlvbnNcIj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJva1wiPuWvvOWFpTwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImNhbmNlbFwiPuWPlua2iDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gICAgdGhpcy4kb3ZlcmxheSEuYXBwZW5kKG1vZGFsKTtcblxuICAgIGNvbnN0ICRtb2RhbCA9ICQoYCMke2lkfWApO1xuICAgICRtb2RhbC5maW5kKCcuY2FuY2VsJykub24oJ2NsaWNrJywgKCkgPT4gJG1vZGFsLnJlbW92ZSgpKTtcbiAgICAkbW9kYWwuZmluZCgnLm9rJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29uc3QgcmF3ID0gU3RyaW5nKCRtb2RhbC5maW5kKCd0ZXh0YXJlYS50ZXh0JykudmFsKCkgfHwgJycpO1xuICAgICAgY29uc3QgYWRkcyA9IHRoaXMucGFyc2VNdWx0aWxpbmVVcmxzKHJhdyk7XG4gICAgICBpZiAoYWRkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdG9hc3RyLmluZm8oJ+ayoeacieWPr+WvvOWFpeeahCBVUkwnLCAn5a+85YWlJyk7XG4gICAgICAgICRtb2RhbC5yZW1vdmUoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5hZGRVcmxzKGFkZHMpO1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgIHRoaXMuc2F2ZURlYm91bmNlZCgpO1xuICAgICAgdG9hc3RyLnN1Y2Nlc3MoYOW3suWvvOWFpSAke2FkZHMubGVuZ3RofSDmnaFgLCAn5a+85YWlJyk7XG4gICAgICAkbW9kYWwucmVtb3ZlKCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHBhcnNlTXVsdGlsaW5lVXJscyhyYXc6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gcmF3XG4gICAgICAuc3BsaXQoL1xccj9cXG4vKVxuICAgICAgLm1hcChzID0+IHMudHJpbSgpKVxuICAgICAgLmZpbHRlcihzID0+IHMubGVuZ3RoID4gMClcbiAgICAgIC5maWx0ZXIocyA9PiAhcy5zdGFydHNXaXRoKCcjJykgJiYgIXMuc3RhcnRzV2l0aCgnLy8nKSlcbiAgICAgIC5maWx0ZXIocyA9PiAvXmh0dHBzPzpcXC9cXC8vaS50ZXN0KHMpKTsgLy8g5Y+q5L+d55WZ5pyJ5pWI55qEIFVSTFxuICB9XG5cbiAgLy8gPT09PT09PT09PSDkuJbnlYzkuabvvJrmiavmj4/kuI7or7vlhpkgPT09PT09PT09PVxuXG4gIHByaXZhdGUgYXN5bmMgc2NhbkFuZExvYWQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgdGhpcy5zY2FuQmluZGluZ09ubHkoKTtcblxuICAgIGlmICh0aGlzLmJpbmRpbmcpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnJlYWRTZXR0aW5nc0VudHJ5Q29udGVudCh0aGlzLmJpbmRpbmcud29ybGRib29rTmFtZSwgdGhpcy5iaW5kaW5nLmVudHJ5VWlkKTtcbiAgICAgICAgY29uc3QgcGFyc2VkID0gdGhpcy5wYXJzZVBsYXlsaXN0QmxvY2soY29udGVudCk7XG4gICAgICAgIHRoaXMuYmluZGluZy5saW5lQnJlYWsgPSBwYXJzZWQubGluZUJyZWFrO1xuICAgICAgICB0aGlzLnNldFVybHMocGFyc2VkLnVybHMpO1xuICAgICAgICB0b2FzdHIuc3VjY2Vzcygn5bey5LuO5LiW55WM5Lmm5Yqg6L295q2M5Y2VJywgJ+atjOWNlScpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1tQbGF5bGlzdFBhbmVsXSDor7vlj5bkuJbnlYzkuablpLHotKXvvIzkvb/nlKjmnKzlnLDmlbDmja4nLCBlKTtcbiAgICAgICAgdGhpcy5sb2FkTG9jYWwoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8g5pyq57uR5a6a77yM6LWw5pys5ZywXG4gICAgICB0aGlzLmxvYWRMb2NhbCgpO1xuICAgICAgdG9hc3RyLmluZm8oJ+acquaJvuWIsOWQjeensOWMheWQq+KAnOiuvue9ruKAneeahOadoeebru+8jOWPr+acrOWcsOe8lui+ke+8jOeojeWQjuWGjeWQjOatpScsICfmrYzljZUnKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNjYW5CaW5kaW5nT25seSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyAxKSDop5LoibLnu5HlrprvvIhwcmltYXJ5IOKGkiBhZGRpdGlvbmFs77yJXG4gICAgY29uc3QgY2hhckJvb2tzID0gZ2V0Q2hhcldvcmxkYm9va05hbWVzKCdjdXJyZW50Jyk7XG4gICAgY29uc3QgbmFtZXM6IHN0cmluZ1tdID0gW107XG4gICAgaWYgKGNoYXJCb29rcy5wcmltYXJ5KSBuYW1lcy5wdXNoKGNoYXJCb29rcy5wcmltYXJ5KTtcbiAgICBuYW1lcy5wdXNoKC4uLihjaGFyQm9va3MuYWRkaXRpb25hbCB8fCBbXSkpO1xuXG4gICAgY29uc3QgZm91bmQgPSBhd2FpdCB0aGlzLmxvY2F0ZUluV29ybGRib29rTGlzdChuYW1lcyk7XG4gICAgaWYgKGZvdW5kKSB7XG4gICAgICB0aGlzLmJpbmRpbmcgPSBmb3VuZDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyAyKSDlhajlsYDkuJbnlYzkuaZcbiAgICBjb25zdCBnbG9iYWxzID0gZ2V0R2xvYmFsV29ybGRib29rTmFtZXMoKSB8fCBbXTtcbiAgICBjb25zdCBmb3VuZDIgPSBhd2FpdCB0aGlzLmxvY2F0ZUluV29ybGRib29rTGlzdChnbG9iYWxzKTtcbiAgICBpZiAoZm91bmQyKSB7XG4gICAgICB0aGlzLmJpbmRpbmcgPSBmb3VuZDI7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5iaW5kaW5nID0gbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbG9jYXRlSW5Xb3JsZGJvb2tMaXN0KGxpc3Q6IHN0cmluZ1tdKTogUHJvbWlzZTxXb3JsZGJvb2tCaW5kaW5nIHwgbnVsbD4ge1xuICAgIGZvciAoY29uc3Qgd2JOYW1lIG9mIGxpc3QpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGVudHJpZXMgPSBhd2FpdCBnZXRXb3JsZGJvb2sod2JOYW1lKTtcbiAgICAgICAgLy8g6L+H5ruk5ZCN56ew5YyF5ZCr4oCc6K6+572u4oCdXG4gICAgICAgIGNvbnN0IG1hdGNoZXMgPSBlbnRyaWVzLmZpbHRlcihlID0+IChlLm5hbWUgfHwgJycpLmluY2x1ZGVzKCforr7nva4nKSk7XG4gICAgICAgIGlmIChtYXRjaGVzLmxlbmd0aCA9PT0gMCkgY29udGludWU7XG5cbiAgICAgICAgLy8g6YCJ5oup6KeE5YiZ77yacG9zaXRpb24ub3JkZXIg5pyA5bCPIOKGkiB1aWQg5pyA5bCPXG4gICAgICAgIGNvbnN0IGNob3NlbiA9IG1hdGNoZXMuc2xpY2UoKS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgY29uc3Qgb2EgPSBhLnBvc2l0aW9uPy5vcmRlciA/PyAwO1xuICAgICAgICAgIGNvbnN0IG9iID0gYi5wb3NpdGlvbj8ub3JkZXIgPz8gMDtcbiAgICAgICAgICBpZiAob2EgIT09IG9iKSByZXR1cm4gb2EgLSBvYjtcbiAgICAgICAgICByZXR1cm4gYS51aWQgLSBiLnVpZDtcbiAgICAgICAgfSlbMF07XG5cbiAgICAgICAgY29uc3QgY29udGVudCA9IFN0cmluZyhjaG9zZW4uY29udGVudCB8fCAnJyk7XG4gICAgICAgIGNvbnN0IGxpbmVCcmVhazogJ1xcbicgfCAnXFxyXFxuJyA9IGNvbnRlbnQuaW5jbHVkZXMoJ1xcclxcbicpID8gJ1xcclxcbicgOiAnXFxuJztcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHdvcmxkYm9va05hbWU6IHdiTmFtZSxcbiAgICAgICAgICBlbnRyeVVpZDogY2hvc2VuLnVpZCxcbiAgICAgICAgICBlbnRyeU5hbWU6IGNob3Nlbi5uYW1lLFxuICAgICAgICAgIGxpbmVCcmVhayxcbiAgICAgICAgfTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICAvLyBpZ25vcmUgdGhpcyB3b3JsZGJvb2tcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlYWRTZXR0aW5nc0VudHJ5Q29udGVudCh3b3JsZGJvb2tOYW1lOiBzdHJpbmcsIHVpZDogbnVtYmVyKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBlbnRyaWVzID0gYXdhaXQgZ2V0V29ybGRib29rKHdvcmxkYm9va05hbWUpO1xuICAgIGNvbnN0IGVudHJ5ID0gZW50cmllcy5maW5kKGUgPT4gZS51aWQgPT09IHVpZCk7XG4gICAgaWYgKCFlbnRyeSkgdGhyb3cgbmV3IEVycm9yKCforr7nva7mnaHnm67lt7LkuI3lrZjlnKgnKTtcbiAgICByZXR1cm4gU3RyaW5nKGVudHJ5LmNvbnRlbnQgfHwgJycpO1xuICB9XG5cbiAgcHJpdmF0ZSBwYXJzZVBsYXlsaXN0QmxvY2soY29udGVudDogc3RyaW5nKTogUGFyc2VSZXN1bHQge1xuICAgIGNvbnN0IGxpbmVCcmVhazogJ1xcbicgfCAnXFxyXFxuJyA9IGNvbnRlbnQuaW5jbHVkZXMoJ1xcclxcbicpID8gJ1xcclxcbicgOiAnXFxuJztcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoL1xccj9cXG4vKTtcbiAgICBsZXQgaSA9IDA7XG4gICAgbGV0IHN0YXJ0ID0gLTE7XG4gICAgbGV0IGVuZCA9IGxpbmVzLmxlbmd0aDtcblxuICAgIGNvbnN0IGlzSGVhZGVyID0gKHM6IHN0cmluZykgPT4gL15cXHMqXFxbW15cXF1dK1xcXVxccyokLy50ZXN0KHMpO1xuICAgIGNvbnN0IGlzUGxheWxpc3RIZWFkZXIgPSAoczogc3RyaW5nKSA9PiBzLnRyaW0oKSA9PT0gSEVBREVSX01BUks7XG5cbiAgICB3aGlsZSAoaSA8IGxpbmVzLmxlbmd0aCkge1xuICAgICAgaWYgKGlzUGxheWxpc3RIZWFkZXIobGluZXNbaV0pKSB7XG4gICAgICAgIHN0YXJ0ID0gaTtcbiAgICAgICAgaSsrO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGkrKztcbiAgICB9XG5cbiAgICBpZiAoc3RhcnQgPj0gMCkge1xuICAgICAgbGV0IGogPSBzdGFydCArIDE7XG4gICAgICB3aGlsZSAoaiA8IGxpbmVzLmxlbmd0aCkge1xuICAgICAgICBpZiAoaXNIZWFkZXIobGluZXNbal0pKSB7XG4gICAgICAgICAgZW5kID0gajtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBqKys7XG4gICAgICB9XG4gICAgICBjb25zdCBib2R5ID0gbGluZXMuc2xpY2Uoc3RhcnQgKyAxLCBlbmQpO1xuICAgICAgY29uc3QgdXJscyA9IGJvZHlcbiAgICAgICAgLm1hcChzID0+IHMudHJpbSgpKVxuICAgICAgICAuZmlsdGVyKHMgPT4gcy5sZW5ndGggPiAwKVxuICAgICAgICAuZmlsdGVyKHMgPT4gIXMuc3RhcnRzV2l0aCgnIycpICYmICFzLnN0YXJ0c1dpdGgoJy8vJykpO1xuICAgICAgcmV0dXJuIHsgdXJscywgaGFzQmxvY2s6IHRydWUsIGxpbmVCcmVhayB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IHVybHM6IFtdLCBoYXNCbG9jazogZmFsc2UsIGxpbmVCcmVhayB9O1xuICB9XG5cbiAgcHJpdmF0ZSByZXBsYWNlUGxheWxpc3RCbG9jayhjb250ZW50OiBzdHJpbmcsIHVybHM6IHN0cmluZ1tdLCBsaW5lQnJlYWs6ICdcXG4nIHwgJ1xcclxcbicpOiBzdHJpbmcge1xuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgvXFxyP1xcbi8pO1xuICAgIGNvbnN0IGlzSGVhZGVyID0gKHM6IHN0cmluZykgPT4gL15cXHMqXFxbW15cXF1dK1xcXVxccyokLy50ZXN0KHMpO1xuICAgIGNvbnN0IGlzUGxheWxpc3RIZWFkZXIgPSAoczogc3RyaW5nKSA9PiBzLnRyaW0oKSA9PT0gSEVBREVSX01BUks7XG5cbiAgICBsZXQgc3RhcnQgPSAtMTtcbiAgICBsZXQgZW5kID0gbGluZXMubGVuZ3RoO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGlzUGxheWxpc3RIZWFkZXIobGluZXNbaV0pKSB7XG4gICAgICAgIHN0YXJ0ID0gaTtcbiAgICAgICAgZm9yIChsZXQgaiA9IGkgKyAxOyBqIDwgbGluZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBpZiAoaXNIZWFkZXIobGluZXNbal0pKSB7XG4gICAgICAgICAgICBlbmQgPSBqO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGJvZHkgPSBbSEVBREVSX01BUkssIC4uLnVybHNdLmpvaW4obGluZUJyZWFrKTtcblxuICAgIGlmIChzdGFydCA+PSAwKSB7XG4gICAgICAvLyDmm7/mjaJcbiAgICAgIGNvbnN0IGhlYWQgPSBsaW5lcy5zbGljZSgwLCBzdGFydCkuam9pbihsaW5lQnJlYWspO1xuICAgICAgY29uc3QgdGFpbCA9IGxpbmVzLnNsaWNlKGVuZCkuam9pbihsaW5lQnJlYWspO1xuICAgICAgY29uc3Qgc2VwMSA9IGhlYWQubGVuZ3RoID8gbGluZUJyZWFrIDogJyc7XG4gICAgICBjb25zdCBzZXAyID0gdGFpbC5sZW5ndGggPyBsaW5lQnJlYWsgOiAnJztcbiAgICAgIHJldHVybiBgJHtoZWFkfSR7c2VwMX0ke2JvZHl9JHtzZXAyfSR7dGFpbH1gO1xuICAgIH1cblxuICAgIC8vIOacq+Wwvui/veWKoFxuICAgIGNvbnN0IHNlcCA9IGNvbnRlbnQubGVuZ3RoID8gbGluZUJyZWFrICsgbGluZUJyZWFrIDogJyc7XG4gICAgcmV0dXJuIGAke2NvbnRlbnR9JHtzZXB9JHtib2R5fWA7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHBlcnNpc3QoZm9yY2VUb2FzdCA9IGZhbHNlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMuYmluZGluZykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMucmVhZFNldHRpbmdzRW50cnlDb250ZW50KHRoaXMuYmluZGluZy53b3JsZGJvb2tOYW1lLCB0aGlzLmJpbmRpbmcuZW50cnlVaWQpO1xuICAgICAgICBjb25zdCB1cGRhdGVkID0gdGhpcy5yZXBsYWNlUGxheWxpc3RCbG9jayhcbiAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgIHRoaXMudHJhY2tzLm1hcCh0ID0+IHQudXJsKSxcbiAgICAgICAgICB0aGlzLmJpbmRpbmcubGluZUJyZWFrIHx8ICdcXG4nLFxuICAgICAgICApO1xuXG4gICAgICAgIGF3YWl0IHVwZGF0ZVdvcmxkYm9va1dpdGgoXG4gICAgICAgICAgdGhpcy5iaW5kaW5nLndvcmxkYm9va05hbWUsXG4gICAgICAgICAgd2IgPT4gd2IubWFwKGUgPT4gKGUudWlkID09PSB0aGlzLmJpbmRpbmchLmVudHJ5VWlkID8geyAuLi5lLCBjb250ZW50OiB1cGRhdGVkIH0gOiBlKSksXG4gICAgICAgICAgeyByZW5kZXI6ICdkZWJvdW5jZWQnIH0sXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKGZvcmNlVG9hc3QpIHRvYXN0ci5zdWNjZXNzKCflt7LlkIzmraXliLDkuJbnlYzkuaYgW+atjOWNlV0g5q61JywgJ+WQjOatpScpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbUGxheWxpc3RQYW5lbF0g5YaZ5Zue5LiW55WM5Lmm5aSx6LSlJywgZSk7XG4gICAgICAgIHRvYXN0ci5lcnJvcign5YaZ5Zue5LiW55WM5Lmm5aSx6LSl77yM5bey5L+d55WZ5pys5Zyw5pu05pS5JywgJ+WQjOatpScpO1xuICAgICAgICAvLyDlm57pgIDliLDmnKzlnLBcbiAgICAgICAgdGhpcy5zYXZlTG9jYWwoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5zY2FuQmluZGluZ09ubHkoKTsgLy8g5bCd6K+V6YeN5omr5o+PXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIOacque7keWumu+8muWGmeacrOWcsFxuICAgICAgdGhpcy5zYXZlTG9jYWwoKTtcbiAgICAgIGlmIChmb3JjZVRvYXN0KSB0b2FzdHIuaW5mbygn5pyq57uR5a6a5LiW55WM5Lmm5p2h55uu77yM5bey5L+d5a2Y5Yiw5pys5ZywJywgJ+WQjOatpScpO1xuICAgIH1cblxuICAgIC8vIOmAmuefpeaSreaUvuWZqOWIl+ihqOabtOaUuVxuICAgICQoZG9jdW1lbnQpLnRyaWdnZXIoJ2RpOnBsYXlsaXN0OmNoYW5nZWQnLCB7IHVybHM6IHRoaXMudHJhY2tzLm1hcCh0ID0+IHQudXJsKSB9KTtcbiAgfVxuXG4gIC8vID09PT09PT09PT0g5pys5Zyw5a2Y5YKoID09PT09PT09PT1cblxuICBwcml2YXRlIGxvYWRMb2NhbFVybHMoKTogc3RyaW5nW10ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByYXcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShMT0NBTF9LRVkpO1xuICAgICAgaWYgKHJhdykge1xuICAgICAgICBjb25zdCBhcnIgPSBKU09OLnBhcnNlKHJhdyk7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiB0aGlzLnVuaXF1ZVN0YWJsZShhcnIubWFwKFN0cmluZykpO1xuICAgICAgfVxuICAgIH0gY2F0Y2gge1xuICAgICAgLy8gaWdub3JlXG4gICAgfVxuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIHByaXZhdGUgbG9hZExvY2FsKCk6IHZvaWQge1xuICAgIGNvbnN0IHVybHMgPSB0aGlzLmxvYWRMb2NhbFVybHMoKTtcbiAgICB0aGlzLnNldFVybHModXJscyk7XG4gIH1cblxuICBwcml2YXRlIHNhdmVMb2NhbCgpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oTE9DQUxfS0VZLCBKU09OLnN0cmluZ2lmeSh0aGlzLnRyYWNrcy5tYXAodCA9PiB0LnVybCkpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIC8vIGlnbm9yZVxuICAgIH1cbiAgfVxuXG4gIC8vID09PT09PT09PT0gVHJhY2sgJiBNZXRhIERhdGEgPT09PT09PT09PVxuXG4gIHByaXZhdGUgc2V0VXJscyh1cmxzOiBzdHJpbmdbXSk6IHZvaWQge1xuICAgIHRoaXMudHJhY2tzID0gdXJscy5tYXAodXJsID0+IHRoaXMuY3JlYXRlUGVuZGluZ1RyYWNrKHVybCkpO1xuICAgIHRoaXMucmVzb2x2ZUFsbFRyYWNrcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRVcmxzKHVybHM6IHN0cmluZ1tdKTogdm9pZCB7XG4gICAgY29uc3QgbmV3VHJhY2tzID0gdXJscy5tYXAodXJsID0+IHRoaXMuY3JlYXRlUGVuZGluZ1RyYWNrKHVybCkpO1xuICAgIHRoaXMudHJhY2tzID0gdGhpcy51bmlxdWVTdGFibGVUcmFja3MoWy4uLm5ld1RyYWNrcywgLi4udGhpcy50cmFja3NdKTtcbiAgICB0aGlzLnJlc29sdmVBbGxUcmFja3MoKTtcbiAgfVxuICAvLyDlr7nlpJbmmrTpnLLlvZPliY3mrYzljZUgVVJMc++8iOS+m+aSreaUvuWZqOivu+WPlu+8iVxuICBwdWJsaWMgZ2V0VXJscygpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIHRoaXMudHJhY2tzLm1hcCh0ID0+IHQudXJsKTtcbiAgfVxuXG4gIC8vIOiOt+WPluatjOWNleesrOS4gOmmluatjOeahCBVUkzvvIjoi6XkuI3lrZjlnKjliJnov5Tlm54gbnVsbO+8iVxuICBwdWJsaWMgZ2V0Rmlyc3RVcmwoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMudHJhY2tzLmxlbmd0aCA+IDAgPyB0aGlzLnRyYWNrc1swXS51cmwgOiBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVQZW5kaW5nVHJhY2sodXJsOiBzdHJpbmcpOiBUcmFjayB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHVybCxcbiAgICAgIHRpdGxlOiB0aGlzLmV4dHJhY3RUaXRsZSh1cmwpLFxuICAgICAgYXJ0aXN0OiAn5pyq55+l6Im65pyv5a62JyxcbiAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIHJlc29sdmVBbGxUcmFja3MoKTogdm9pZCB7XG4gICAgdGhpcy50cmFja3MuZm9yRWFjaCh0cmFjayA9PiB7XG4gICAgICBpZiAodHJhY2suc3RhdHVzID09PSAncGVuZGluZycpIHtcbiAgICAgICAgdGhpcy5yZXNvbHZlVHJhY2sodHJhY2spO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZXNvbHZlVHJhY2sodHJhY2s6IFRyYWNrKTogdm9pZCB7XG4gICAgY29uc3QgZmluaXNoID0gKHN0YXRlOiAncmVzb2x2ZWQnIHwgJ2Vycm9yJykgPT4ge1xuICAgICAgLy8g6Kej5p6Q5a6M5oiQ5ZCO5riy5p+T77yI6Iul5bey5oyC6L2977yJXG4gICAgICB0aGlzLnJlbmRlcigpO1xuXG4gICAgICAvLyDpooTliqDovb3ov5vluqblub/mkq1cbiAgICAgIGlmICh0aGlzLnByZWZldGNoSW5Qcm9ncmVzcykge1xuICAgICAgICB0aGlzLnByZWZldGNoRG9uZSsrO1xuICAgICAgICAkKGRvY3VtZW50KS50cmlnZ2VyKCdkaTpwbGF5bGlzdDpwcmVmZXRjaCcsIHtcbiAgICAgICAgICBzdGF0ZTogJ3Byb2dyZXNzJyxcbiAgICAgICAgICBkb25lOiB0aGlzLnByZWZldGNoRG9uZSxcbiAgICAgICAgICB0b3RhbDogdGhpcy5wcmVmZXRjaFRvdGFsLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHRoaXMucHJlZmV0Y2hEb25lID49IHRoaXMucHJlZmV0Y2hUb3RhbCkge1xuICAgICAgICAgIHRoaXMucHJlZmV0Y2hJblByb2dyZXNzID0gZmFsc2U7XG4gICAgICAgICAgJChkb2N1bWVudCkudHJpZ2dlcignZGk6cGxheWxpc3Q6cHJlZmV0Y2gnLCB7XG4gICAgICAgICAgICBzdGF0ZTogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgZG9uZTogdGhpcy5wcmVmZXRjaERvbmUsXG4gICAgICAgICAgICB0b3RhbDogdGhpcy5wcmVmZXRjaFRvdGFsLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIOWNlemhueino+aekOe7k+aenOS6i+S7tlxuICAgICAgJChkb2N1bWVudCkudHJpZ2dlcignZGk6cGxheWxpc3Q6aXRlbVJlc29sdmVkJywge1xuICAgICAgICB1cmw6IHRyYWNrLnVybCxcbiAgICAgICAgdGl0bGU6IHRyYWNrLnRpdGxlLFxuICAgICAgICBzdGF0ZSxcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBjb25zdCBjYWNoZWQgPSB0aGlzLm1ldGFDYWNoZS5nZXQodHJhY2sudXJsKTtcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICBPYmplY3QuYXNzaWduKHRyYWNrLCBjYWNoZWQsIHsgc3RhdHVzOiAncmVzb2x2ZWQnIH0pO1xuICAgICAgZmluaXNoKCdyZXNvbHZlZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIOe9keaYk+S6kemfs+S5kFxuICAgIGlmIChOZXRlYXNlTXVzaWNSZXNvbHZlci5pc05ldGVhc2VNdXNpY1VybCh0cmFjay51cmwpKSB7XG4gICAgICBOZXRlYXNlTXVzaWNSZXNvbHZlci5yZXNvbHZlKHRyYWNrLnVybClcbiAgICAgICAgLnRoZW4oaW5mbyA9PiB7XG4gICAgICAgICAgaWYgKGluZm8pIHtcbiAgICAgICAgICAgIHRyYWNrLnRpdGxlID0gaW5mby50aXRsZTtcbiAgICAgICAgICAgIHRyYWNrLmFydGlzdCA9IGluZm8uYXJ0aXN0O1xuICAgICAgICAgICAgdHJhY2suY292ZXJVcmwgPSBpbmZvLmNvdmVyVXJsO1xuICAgICAgICAgICAgdHJhY2suc3RhdHVzID0gJ3Jlc29sdmVkJztcbiAgICAgICAgICAgIHRoaXMubWV0YUNhY2hlLnNldCh0cmFjay51cmwsIHsgdGl0bGU6IGluZm8udGl0bGUsIGFydGlzdDogaW5mby5hcnRpc3QsIGNvdmVyVXJsOiBpbmZvLmNvdmVyVXJsIH0pO1xuICAgICAgICAgICAgZmluaXNoKCdyZXNvbHZlZCcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0cmFjay5zdGF0dXMgPSAnZXJyb3InO1xuICAgICAgICAgICAgZmluaXNoKCdlcnJvcicpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICB0cmFjay5zdGF0dXMgPSAnZXJyb3InO1xuICAgICAgICAgIGZpbmlzaCgnZXJyb3InKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIFFRIOmfs+S5kFxuICAgIGVsc2UgaWYgKFFRTXVzaWNSZXNvbHZlci5pc1FRTXVzaWNVcmwodHJhY2sudXJsKSkge1xuICAgICAgUVFNdXNpY1Jlc29sdmVyLnJlc29sdmUodHJhY2sudXJsKVxuICAgICAgICAudGhlbihpbmZvID0+IHtcbiAgICAgICAgICBpZiAoaW5mbykge1xuICAgICAgICAgICAgdHJhY2sudGl0bGUgPSBpbmZvLnRpdGxlO1xuICAgICAgICAgICAgdHJhY2suYXJ0aXN0ID0gaW5mby5hcnRpc3Q7XG4gICAgICAgICAgICB0cmFjay5jb3ZlclVybCA9IGluZm8uY292ZXJVcmw7XG4gICAgICAgICAgICB0cmFjay5zdGF0dXMgPSAncmVzb2x2ZWQnO1xuICAgICAgICAgICAgdGhpcy5tZXRhQ2FjaGUuc2V0KHRyYWNrLnVybCwgeyB0aXRsZTogaW5mby50aXRsZSwgYXJ0aXN0OiBpbmZvLmFydGlzdCwgY292ZXJVcmw6IGluZm8uY292ZXJVcmwgfSk7XG4gICAgICAgICAgICBmaW5pc2goJ3Jlc29sdmVkJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRyYWNrLnN0YXR1cyA9ICdlcnJvcic7XG4gICAgICAgICAgICBmaW5pc2goJ2Vycm9yJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgIHRyYWNrLnN0YXR1cyA9ICdlcnJvcic7XG4gICAgICAgICAgZmluaXNoKCdlcnJvcicpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8g6YCa55So6ZO+5o6lXG4gICAgZWxzZSB7XG4gICAgICAvLyDpgJrnlKjpk77mjqXvvJpNVlAg5YWI55u05o6l6YCa6L+H5paH5Lu25ZCN5YWc5bqV77yI5ZCO57ut5Y+v5omp5bGVIElEMy9IVE1MIOagh+mimOino+aekO+8iVxuICAgICAgdHJhY2suc3RhdHVzID0gJ3Jlc29sdmVkJztcbiAgICAgIGZpbmlzaCgncmVzb2x2ZWQnKTtcbiAgICB9XG4gIH1cblxuICAvLyA9PT09PT09PT09IOW3peWFtyA9PT09PT09PT09XG5cbiAgcHJpdmF0ZSB1bmlxdWVTdGFibGVUcmFja3ModHJhY2tzOiBUcmFja1tdKTogVHJhY2tbXSB7XG4gICAgY29uc3Qgc2VlbiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIGNvbnN0IG91dDogVHJhY2tbXSA9IFtdO1xuICAgIGZvciAoY29uc3QgdCBvZiB0cmFja3MpIHtcbiAgICAgIGlmICghc2Vlbi5oYXModC51cmwpKSB7XG4gICAgICAgIHNlZW4uYWRkKHQudXJsKTtcbiAgICAgICAgb3V0LnB1c2godCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG4gIH1cblxuICBwcml2YXRlIHVuaXF1ZVN0YWJsZShhcnI6IHN0cmluZ1tdKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHNlZW4gPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBjb25zdCBvdXQ6IHN0cmluZ1tdID0gW107XG4gICAgZm9yIChjb25zdCBzIG9mIGFycikge1xuICAgICAgaWYgKCFzZWVuLmhhcyhzKSkge1xuICAgICAgICBzZWVuLmFkZChzKTtcbiAgICAgICAgb3V0LnB1c2gocyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG4gIH1cblxuICBwcml2YXRlIGxvb2tzTGlrZVVybChzOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gL15odHRwcz86XFwvXFwvL2kudGVzdChzKTtcbiAgfVxuXG4gIHByaXZhdGUgZXh0cmFjdFRpdGxlKHVybDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdSA9IG5ldyBVUkwodXJsKTtcbiAgICAgIGNvbnN0IG5hbWUgPSB1LnBhdGhuYW1lLnNwbGl0KCcvJykucG9wKCkgfHwgJyc7XG4gICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KChuYW1lIHx8ICcnKS5zcGxpdCgnLicpWzBdKSB8fCB1cmw7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gdXJsO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXNjYXBlKHM6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgbWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgJyYnOiAnJmFtcDsnLFxuICAgICAgJzwnOiAnJmx0OycsXG4gICAgICAnPic6ICcmZ3Q7JyxcbiAgICAgICdcIic6ICcmcXVvdDsnLFxuICAgICAgXCInXCI6ICcmIzM5OycsXG4gICAgfTtcbiAgICByZXR1cm4gcy5yZXBsYWNlKC9bJjw+XCInXS9nLCBtID0+IG1hcFttXSk7XG4gIH1cblxuICAvKipcbiAgICog5qOA5p+lVVJM5piv5ZCm5Li65b2T5YmN5q2j5Zyo5pKt5pS+55qE5q2M5puyXG4gICAqL1xuICBwcml2YXRlIGlzQ3VycmVudGx5UGxheWluZyh1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHRyeSB7XG4gICAgICAvLyDlr7zlhaXmkq3mlL7lmajnsbvlubbojrflj5blrp7kvotcbiAgICAgIGNvbnN0IER5bmFtaWNJc2xhbmRNdXNpY1BsYXllciA9IHJlcXVpcmUoJy4vRHluYW1pY0lzbGFuZE11c2ljUGxheWVyJykuRHluYW1pY0lzbGFuZE11c2ljUGxheWVyO1xuICAgICAgY29uc3QgcGxheWVyID0gRHluYW1pY0lzbGFuZE11c2ljUGxheWVyLmdldEluc3RhbmNlKCk7XG4gICAgICBcbiAgICAgIGlmICghcGxheWVyIHx8ICFwbGF5ZXIuY3VycmVudFBsYXlsaXN0VXJsKSByZXR1cm4gZmFsc2U7XG4gICAgICBcbiAgICAgIC8vIOajgOafpeW9k+WJjeaSreaUvueahFVSTOaYr+WQpuWMuemFjVxuICAgICAgcmV0dXJuIHBsYXllci5jdXJyZW50UGxheWxpc3RVcmwgPT09IHVybDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ1tQbGF5bGlzdFBhbmVsXSDml6Dms5Xojrflj5bmkq3mlL7lmajnirbmgIE6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/dynamicIsland/PlaylistPanel.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/dynamicIsland/QQMusicResolver.ts": 
  /*!********************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/dynamicIsland/QQMusicResolver.ts ***!
  \********************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QQMusicResolver: () => (/* binding */ QQMusicResolver)\n/* harmony export */ });\nclass QQMusicResolver {\n    static API_URL = 'https://api.injahow.cn/meting/?server=tencent&type=song&id=';\n    /**\n     * 解析 QQ 音乐链接，优先提取 songMid（如 001yTfxu2NyXbZ），回退到 songid（数字）\n     * 支持：\n     * - https://y.qq.com/n/ryqq/songDetail/001yTfxu2NyXbZ\n     * - https://y.qq.com/n/ryqq/songDetail?songmid=001yTfxu2NyXbZ\n     * - https://y.qq.com/n/ryqq/songDetail?songid=123456\n     * - 其他 y.qq.com 形式（尽力提取）\n     */\n    static async resolve(url) {\n        try {\n            const id = this.extractId(url);\n            if (!id)\n                return null;\n            const resp = await fetch(`${this.API_URL}${encodeURIComponent(id)}`);\n            const data = await resp.json();\n            if (data && data.length > 0) {\n                const song = data[0] || {};\n                const artist = Array.isArray(song.artist) ? song.artist.join(' / ') : (song.artist || song.author || '未知艺术家');\n                const info = {\n                    title: song.name || song.title || 'QQ音乐',\n                    artist,\n                    coverUrl: song.pic || song.cover || '',\n                    audioUrl: song.url || '',\n                    duration: 0,\n                    currentTime: 0,\n                };\n                // 若未拿到可播放链接，则返回 null 让上层兜底提示\n                if (!info.audioUrl)\n                    return null;\n                return info;\n            }\n            return null;\n        }\n        catch (error) {\n            console.error('[QQMusicResolver] 解析失败:', error);\n            return null;\n        }\n    }\n    static extractId(rawUrl) {\n        try {\n            // 详情页路径中的 mid\n            const m = rawUrl.match(/songDetail\\/([a-zA-Z0-9]+)/);\n            if (m)\n                return m[1];\n            const u = new URL(rawUrl);\n            const params = u.searchParams;\n            // 新版参数\n            const mid = params.get('songmid');\n            if (mid)\n                return mid;\n            // 旧版/备用参数（有些 API 也支持使用数字 id）\n            const id = params.get('songid');\n            if (id)\n                return id;\n            return null;\n        }\n        catch {\n            return null;\n        }\n    }\n    /**\n     * 检查是否为 QQ 音乐链接\n     */\n    static isQQMusicUrl(url) {\n        return url.includes('y.qq.com');\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZHluYW1pY0lzbGFuZC9RUU11c2ljUmVzb2x2ZXIudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUVPLE1BQU0sZUFBZTtJQUNsQixNQUFNLENBQVUsT0FBTyxHQUFHLDZEQUE2RCxDQUFDO0lBRWhHOzs7Ozs7O09BT0c7SUFDSSxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFXO1FBQ3JDLElBQUksQ0FBQztZQUNILE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDL0IsSUFBSSxDQUFDLEVBQUU7Z0JBQUUsT0FBTyxJQUFJLENBQUM7WUFFckIsTUFBTSxJQUFJLEdBQUcsTUFBTSxLQUFLLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxHQUFHLGtCQUFrQixDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNyRSxNQUFNLElBQUksR0FBRyxNQUFNLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUUvQixJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO2dCQUM1QixNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO2dCQUMzQixNQUFNLE1BQU0sR0FDVixLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsTUFBTSxJQUFJLE9BQU8sQ0FBQyxDQUFDO2dCQUVqRyxNQUFNLElBQUksR0FBYztvQkFDdEIsS0FBSyxFQUFFLElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxNQUFNO29CQUN4QyxNQUFNO29CQUNOLFFBQVEsRUFBRSxJQUFJLENBQUMsR0FBRyxJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksRUFBRTtvQkFDdEMsUUFBUSxFQUFFLElBQUksQ0FBQyxHQUFHLElBQUksRUFBRTtvQkFDeEIsUUFBUSxFQUFFLENBQUM7b0JBQ1gsV0FBVyxFQUFFLENBQUM7aUJBQ2YsQ0FBQztnQkFFRiw2QkFBNkI7Z0JBQzdCLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUTtvQkFBRSxPQUFPLElBQUksQ0FBQztnQkFFaEMsT0FBTyxJQUFJLENBQUM7WUFDZCxDQUFDO1lBRUQsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO1FBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNmLE9BQU8sQ0FBQyxLQUFLLENBQUMseUJBQXlCLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFDaEQsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO0lBQ0gsQ0FBQztJQUVPLE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBYztRQUNyQyxJQUFJLENBQUM7WUFDSCxjQUFjO1lBQ2QsTUFBTSxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO1lBQ3JELElBQUksQ0FBQztnQkFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUVuQixNQUFNLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUMxQixNQUFNLE1BQU0sR0FBRyxDQUFDLENBQUMsWUFBWSxDQUFDO1lBRTlCLE9BQU87WUFDUCxNQUFNLEdBQUcsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ2xDLElBQUksR0FBRztnQkFBRSxPQUFPLEdBQUcsQ0FBQztZQUVwQiw2QkFBNkI7WUFDN0IsTUFBTSxFQUFFLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNoQyxJQUFJLEVBQUU7Z0JBQUUsT0FBTyxFQUFFLENBQUM7WUFFbEIsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO1FBQUMsTUFBTSxDQUFDO1lBQ1AsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO0lBQ0gsQ0FBQztJQUVEOztPQUVHO0lBQ0ksTUFBTSxDQUFDLFlBQVksQ0FBQyxHQUFXO1FBQ3BDLE9BQU8sR0FBRyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUNsQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy9keW5hbWljSXNsYW5kL1FRTXVzaWNSZXNvbHZlci50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTXVzaWNJbmZvIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBRUU11c2ljUmVzb2x2ZXIge1xuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBBUElfVVJMID0gJ2h0dHBzOi8vYXBpLmluamFob3cuY24vbWV0aW5nLz9zZXJ2ZXI9dGVuY2VudCZ0eXBlPXNvbmcmaWQ9JztcblxuICAvKipcbiAgICog6Kej5p6QIFFRIOmfs+S5kOmTvuaOpe+8jOS8mOWFiOaPkOWPliBzb25nTWlk77yI5aaCIDAwMXlUZnh1Mk55WGJa77yJ77yM5Zue6YCA5YiwIHNvbmdpZO+8iOaVsOWtl++8iVxuICAgKiDmlK/mjIHvvJpcbiAgICogLSBodHRwczovL3kucXEuY29tL24vcnlxcS9zb25nRGV0YWlsLzAwMXlUZnh1Mk55WGJaXG4gICAqIC0gaHR0cHM6Ly95LnFxLmNvbS9uL3J5cXEvc29uZ0RldGFpbD9zb25nbWlkPTAwMXlUZnh1Mk55WGJaXG4gICAqIC0gaHR0cHM6Ly95LnFxLmNvbS9uL3J5cXEvc29uZ0RldGFpbD9zb25naWQ9MTIzNDU2XG4gICAqIC0g5YW25LuWIHkucXEuY29tIOW9ouW8j++8iOWwveWKm+aPkOWPlu+8iVxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBhc3luYyByZXNvbHZlKHVybDogc3RyaW5nKTogUHJvbWlzZTxNdXNpY0luZm8gfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGlkID0gdGhpcy5leHRyYWN0SWQodXJsKTtcbiAgICAgIGlmICghaWQpIHJldHVybiBudWxsO1xuXG4gICAgICBjb25zdCByZXNwID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5BUElfVVJMfSR7ZW5jb2RlVVJJQ29tcG9uZW50KGlkKX1gKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwLmpzb24oKTtcblxuICAgICAgaWYgKGRhdGEgJiYgZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHNvbmcgPSBkYXRhWzBdIHx8IHt9O1xuICAgICAgICBjb25zdCBhcnRpc3QgPVxuICAgICAgICAgIEFycmF5LmlzQXJyYXkoc29uZy5hcnRpc3QpID8gc29uZy5hcnRpc3Quam9pbignIC8gJykgOiAoc29uZy5hcnRpc3QgfHwgc29uZy5hdXRob3IgfHwgJ+acquefpeiJuuacr+WuticpO1xuXG4gICAgICAgIGNvbnN0IGluZm86IE11c2ljSW5mbyA9IHtcbiAgICAgICAgICB0aXRsZTogc29uZy5uYW1lIHx8IHNvbmcudGl0bGUgfHwgJ1FR6Z+z5LmQJyxcbiAgICAgICAgICBhcnRpc3QsXG4gICAgICAgICAgY292ZXJVcmw6IHNvbmcucGljIHx8IHNvbmcuY292ZXIgfHwgJycsXG4gICAgICAgICAgYXVkaW9Vcmw6IHNvbmcudXJsIHx8ICcnLFxuICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgIGN1cnJlbnRUaW1lOiAwLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIOiLpeacquaLv+WIsOWPr+aSreaUvumTvuaOpe+8jOWImei/lOWbniBudWxsIOiuqeS4iuWxguWFnOW6leaPkOekulxuICAgICAgICBpZiAoIWluZm8uYXVkaW9VcmwpIHJldHVybiBudWxsO1xuXG4gICAgICAgIHJldHVybiBpbmZvO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW1FRTXVzaWNSZXNvbHZlcl0g6Kej5p6Q5aSx6LSlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIGV4dHJhY3RJZChyYXdVcmw6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgIHRyeSB7XG4gICAgICAvLyDor6bmg4XpobXot6/lvoTkuK3nmoQgbWlkXG4gICAgICBjb25zdCBtID0gcmF3VXJsLm1hdGNoKC9zb25nRGV0YWlsXFwvKFthLXpBLVowLTldKykvKTtcbiAgICAgIGlmIChtKSByZXR1cm4gbVsxXTtcblxuICAgICAgY29uc3QgdSA9IG5ldyBVUkwocmF3VXJsKTtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHUuc2VhcmNoUGFyYW1zO1xuXG4gICAgICAvLyDmlrDniYjlj4LmlbBcbiAgICAgIGNvbnN0IG1pZCA9IHBhcmFtcy5nZXQoJ3NvbmdtaWQnKTtcbiAgICAgIGlmIChtaWQpIHJldHVybiBtaWQ7XG5cbiAgICAgIC8vIOaXp+eJiC/lpIfnlKjlj4LmlbDvvIjmnInkupsgQVBJIOS5n+aUr+aMgeS9v+eUqOaVsOWtlyBpZO+8iVxuICAgICAgY29uc3QgaWQgPSBwYXJhbXMuZ2V0KCdzb25naWQnKTtcbiAgICAgIGlmIChpZCkgcmV0dXJuIGlkO1xuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDmo4Dmn6XmmK/lkKbkuLogUVEg6Z+z5LmQ6ZO+5o6lXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGlzUVFNdXNpY1VybCh1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB1cmwuaW5jbHVkZXMoJ3kucXEuY29tJyk7XG4gIH1cbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/dynamicIsland/QQMusicResolver.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/dynamicIsland/config.ts": 
  /*!***********************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/dynamicIsland/config.ts ***!
  \***********************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ANIMATIONS: () => (/* binding */ ANIMATIONS),\n/* harmony export */   AUDIO_CONFIG: () => (/* binding */ AUDIO_CONFIG),\n/* harmony export */   BREAKPOINTS: () => (/* binding */ BREAKPOINTS),\n/* harmony export */   COLORS: () => (/* binding */ COLORS),\n/* harmony export */   CONFIG: () => (/* binding */ CONFIG),\n/* harmony export */   DEBUG_CONFIG: () => (/* binding */ DEBUG_CONFIG),\n/* harmony export */   DEFAULT_CONFIG: () => (/* binding */ DEFAULT_CONFIG),\n/* harmony export */   DIMENSIONS: () => (/* binding */ DIMENSIONS),\n/* harmony export */   ERROR_MESSAGES: () => (/* binding */ ERROR_MESSAGES),\n/* harmony export */   ICONS: () => (/* binding */ ICONS),\n/* harmony export */   MODE_NAMES: () => (/* binding */ MODE_NAMES),\n/* harmony export */   PERFORMANCE_CONFIG: () => (/* binding */ PERFORMANCE_CONFIG),\n/* harmony export */   STORAGE_KEYS: () => (/* binding */ STORAGE_KEYS),\n/* harmony export */   SUCCESS_MESSAGES: () => (/* binding */ SUCCESS_MESSAGES)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ \"./src/多云熊/备份/给rovo的/modules/dynamicIsland/types.ts\");\n/**\n * 灵动岛音乐播放器配置\n */\n\n// 默认配置\nconst DEFAULT_CONFIG = {\n    autoPlay: false,\n    volume: 1.0,\n    defaultMode: _types__WEBPACK_IMPORTED_MODULE_0__.PlayMode.REPEAT,\n    enableAnimations: true,\n};\n// 尺寸配置\nconst DIMENSIONS = {\n    compact: {\n        width: '7.5rem', // 120px\n        height: '1.875rem', // 30px\n    },\n    expanded: {\n        width: '20rem', // 320px\n        height: '8rem', // 128px\n    },\n    mobile: {\n        maxWidth: 'calc(100vw - 2rem)',\n        maxExpandedWidth: '18rem', // 288px\n    },\n};\n// 动画配置\nconst ANIMATIONS = {\n    transition: {\n        duration: '0.4s',\n        easing: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n    },\n    wave: {\n        duration: '1.2s',\n        easing: 'ease-in-out',\n    },\n    loading: {\n        duration: '1s',\n        easing: 'linear',\n    },\n};\n// 颜色配置\nconst COLORS = {\n    background: {\n        default: '#1c1c1e',\n        hover: '#2c2c2e',\n        light: 'rgba(0, 0, 0, 0.8)',\n    },\n    accent: {\n        primary: '#007aff',\n        secondary: '#5ac8fa',\n    },\n    text: {\n        primary: '#ffffff',\n        secondary: 'rgba(255, 255, 255, 0.7)',\n        tertiary: 'rgba(255, 255, 255, 0.6)',\n    },\n    wave: {\n        gradient: 'linear-gradient(to top, #007aff, #5ac8fa)',\n        whiteGradient: 'linear-gradient(to top, #fff, rgba(255, 255, 255, 0.8))',\n    },\n};\n// 音频配置\nconst AUDIO_CONFIG = {\n    type: 'bgm', // 酒馆助手音频类型\n    supportedFormats: ['mp3', 'aac', 'ogg', 'wav', 'm4a'],\n    maxFileSize: 50 * 1024 * 1024, // 50MB\n    timeout: 10000, // 10秒超时\n};\n// 存储键名\nconst STORAGE_KEYS = {\n    settings: 'dynamic-island-settings',\n    playlist: 'dynamic-island-playlist',\n    currentMusic: 'dynamic-island-current-music',\n    debug: 'debug-dynamic-island',\n};\n// 调试配置\nconst DEBUG_CONFIG = {\n    enableConsoleLog: false,\n    enablePerformanceLog: false,\n    enableErrorTracking: true,\n    logLevel: 'info',\n};\n// 响应式断点\nconst BREAKPOINTS = {\n    mobile: 400,\n    tablet: 768,\n    desktop: 1024,\n};\n// 性能配置\nconst PERFORMANCE_CONFIG = {\n    animationFrameThrottle: 16, // ~60fps\n    updateInterval: 100, // 100ms更新间隔\n    maxLogEntries: 100, // 最大日志条数\n    cacheTimeout: 5 * 60 * 1000, // 5分钟缓存\n};\n// 错误消息\nconst ERROR_MESSAGES = {\n    AUDIO_LOAD_FAILED: '音频加载失败，请检查链接是否有效',\n    AUDIO_PLAY_FAILED: '音频播放失败，请检查浏览器权限设置',\n    NETWORK_ERROR: '网络连接错误，请检查网络状态',\n    INVALID_URL: '无效的音频链接格式',\n    PERMISSION_DENIED: '音频播放权限被拒绝',\n    TIMEOUT_ERROR: '请求超时，请稍后重试',\n    UNKNOWN_ERROR: '未知错误，请刷新页面重试',\n};\n// 成功消息\nconst SUCCESS_MESSAGES = {\n    MUSIC_IMPORTED: '音乐导入成功',\n    PLAYBACK_STARTED: '开始播放',\n    PLAYBACK_PAUSED: '已暂停',\n    MODE_CHANGED: '播放模式已切换',\n    SETTINGS_SAVED: '设置已保存',\n};\n// 播放模式名称映射\nconst MODE_NAMES = {\n    [_types__WEBPACK_IMPORTED_MODULE_0__.PlayMode.REPEAT]: '列表循环',\n    [_types__WEBPACK_IMPORTED_MODULE_0__.PlayMode.RANDOM]: '随机播放',\n    [_types__WEBPACK_IMPORTED_MODULE_0__.PlayMode.SINGLE]: '单曲循环',\n    [_types__WEBPACK_IMPORTED_MODULE_0__.PlayMode.STOP]: '停止模式',\n};\n// SVG图标路径\nconst ICONS = {\n    play: 'M8,5.14V19.14L19,12.14L8,5.14Z',\n    pause: 'M14,19H18V5H14M6,19H10V5H6V19Z',\n    repeat: 'M17 1L21 5L17 9M3 11V9A4 4 0 0 1 7 5H21M7 23L3 19L7 15M21 13V15A4 4 0 0 1 17 19H3',\n    random: 'M16 3L21 3L21 8M4 20L21 3M21 16L21 21L16 21M15 15L21 21M4 4L9 9',\n    single: 'M17 1L21 5L17 9M3 11V9A4 4 0 0 1 7 5H21M7 23L3 19L7 15M21 13V15A4 4 0 0 1 17 19H3M11 11L12 10V15',\n    stop: 'M6,6H18V18H6V6Z',\n    add: 'M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z',\n    music: '♪',\n};\n// 导出所有配置\nconst CONFIG = {\n    default: DEFAULT_CONFIG,\n    dimensions: DIMENSIONS,\n    animations: ANIMATIONS,\n    colors: COLORS,\n    audio: AUDIO_CONFIG,\n    storage: STORAGE_KEYS,\n    debug: DEBUG_CONFIG,\n    breakpoints: BREAKPOINTS,\n    performance: PERFORMANCE_CONFIG,\n    messages: {\n        error: ERROR_MESSAGES,\n        success: SUCCESS_MESSAGES,\n    },\n    modeNames: MODE_NAMES,\n    icons: ICONS,\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZHluYW1pY0lzbGFuZC9jb25maWcudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7O0dBRUc7QUFFOEM7QUFFakQsT0FBTztBQUNBLE1BQU0sY0FBYyxHQUEyQjtJQUNwRCxRQUFRLEVBQUUsS0FBSztJQUNmLE1BQU0sRUFBRSxHQUFHO0lBQ1gsV0FBVyxFQUFFLDRDQUFRLENBQUMsTUFBTTtJQUM1QixnQkFBZ0IsRUFBRSxJQUFJO0NBQ3ZCLENBQUM7QUFFRixPQUFPO0FBQ0EsTUFBTSxVQUFVLEdBQUc7SUFDeEIsT0FBTyxFQUFFO1FBQ1AsS0FBSyxFQUFFLFFBQVEsRUFBRSxRQUFRO1FBQ3pCLE1BQU0sRUFBRSxVQUFVLEVBQUUsT0FBTztLQUM1QjtJQUNELFFBQVEsRUFBRTtRQUNSLEtBQUssRUFBRSxPQUFPLEVBQUUsUUFBUTtRQUN4QixNQUFNLEVBQUUsTUFBTSxFQUFFLFFBQVE7S0FDekI7SUFDRCxNQUFNLEVBQUU7UUFDTixRQUFRLEVBQUUsb0JBQW9CO1FBQzlCLGdCQUFnQixFQUFFLE9BQU8sRUFBRSxRQUFRO0tBQ3BDO0NBQ0YsQ0FBQztBQUVGLE9BQU87QUFDQSxNQUFNLFVBQVUsR0FBRztJQUN4QixVQUFVLEVBQUU7UUFDVixRQUFRLEVBQUUsTUFBTTtRQUNoQixNQUFNLEVBQUUsc0NBQXNDO0tBQy9DO0lBQ0QsSUFBSSxFQUFFO1FBQ0osUUFBUSxFQUFFLE1BQU07UUFDaEIsTUFBTSxFQUFFLGFBQWE7S0FDdEI7SUFDRCxPQUFPLEVBQUU7UUFDUCxRQUFRLEVBQUUsSUFBSTtRQUNkLE1BQU0sRUFBRSxRQUFRO0tBQ2pCO0NBQ0YsQ0FBQztBQUVGLE9BQU87QUFDQSxNQUFNLE1BQU0sR0FBRztJQUNwQixVQUFVLEVBQUU7UUFDVixPQUFPLEVBQUUsU0FBUztRQUNsQixLQUFLLEVBQUUsU0FBUztRQUNoQixLQUFLLEVBQUUsb0JBQW9CO0tBQzVCO0lB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LE1BQU0sTUFBTSxHQUFHO0lBQ3BCLE9BQU8sRUFBRSxjQUFjO0lBQ3ZCLFVBQVUsRUFBRSxVQUFVO0lBQ3RCLFVBQVUsRUFBRSxVQUFVO0lBQ3RCLE1BQU0sRUFBRSxNQUFNO0lBQ2QsS0FBSyxFQUFFLFlBQVk7SUFDbkIsT0FBTyxFQUFFLFlBQVk7SUFDckIsS0FBSyxFQUFFLFlBQVk7SUFDbkIsV0FBVyxFQUFFLFdBQVc7SUFDeEIsV0FBVyxFQUFFLGtCQUFrQjtJQUMvQixRQUFRLEVBQUU7UUFDUixLQUFLLEVBQUUsY0FBYztRQUNyQixPQUFPLEVBQUUsZ0JBQWdCO0tBQzFCO0lBQ0QsU0FBUyxFQUFFLFVBQVU7SUFDckIsS0FBSyxFQUFFLEtBQUs7Q0FDSixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy9keW5hbWljSXNsYW5kL2NvbmZpZy50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiDngbXliqjlspvpn7PkuZDmkq3mlL7lmajphY3nva5cbiAqL1xuXG5pbXBvcnQgeyBQbGF5TW9kZSwgUGxheWVyQ29uZmlnIH0gZnJvbSAnLi90eXBlcyc7XG5cbi8vIOm7mOiupOmFjee9rlxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQ09ORklHOiBSZXF1aXJlZDxQbGF5ZXJDb25maWc+ID0ge1xuICBhdXRvUGxheTogZmFsc2UsXG4gIHZvbHVtZTogMS4wLFxuICBkZWZhdWx0TW9kZTogUGxheU1vZGUuUkVQRUFULFxuICBlbmFibGVBbmltYXRpb25zOiB0cnVlLFxufTtcblxuLy8g5bC65a+46YWN572uXG5leHBvcnQgY29uc3QgRElNRU5TSU9OUyA9IHtcbiAgY29tcGFjdDoge1xuICAgIHdpZHRoOiAnNy41cmVtJywgLy8gMTIwcHhcbiAgICBoZWlnaHQ6ICcxLjg3NXJlbScsIC8vIDMwcHhcbiAgfSxcbiAgZXhwYW5kZWQ6IHtcbiAgICB3aWR0aDogJzIwcmVtJywgLy8gMzIwcHhcbiAgICBoZWlnaHQ6ICc4cmVtJywgLy8gMTI4cHhcbiAgfSxcbiAgbW9iaWxlOiB7XG4gICAgbWF4V2lkdGg6ICdjYWxjKDEwMHZ3IC0gMnJlbSknLFxuICAgIG1heEV4cGFuZGVkV2lkdGg6ICcxOHJlbScsIC8vIDI4OHB4XG4gIH0sXG59O1xuXG4vLyDliqjnlLvphY3nva5cbmV4cG9ydCBjb25zdCBBTklNQVRJT05TID0ge1xuICB0cmFuc2l0aW9uOiB7XG4gICAgZHVyYXRpb246ICcwLjRzJyxcbiAgICBlYXNpbmc6ICdjdWJpYy1iZXppZXIoMC4yNSwgMC40NiwgMC40NSwgMC45NCknLFxuICB9LFxuICB3YXZlOiB7XG4gICAgZHVyYXRpb246ICcxLjJzJyxcbiAgICBlYXNpbmc6ICdlYXNlLWluLW91dCcsXG4gIH0sXG4gIGxvYWRpbmc6IHtcbiAgICBkdXJhdGlvbjogJzFzJyxcbiAgICBlYXNpbmc6ICdsaW5lYXInLFxuICB9LFxufTtcblxuLy8g6aKc6Imy6YWN572uXG5leHBvcnQgY29uc3QgQ09MT1JTID0ge1xuICBiYWNrZ3JvdW5kOiB7XG4gICAgZGVmYXVsdDogJyMxYzFjMWUnLFxuICAgIGhvdmVyOiAnIzJjMmMyZScsXG4gICAgbGlnaHQ6ICdyZ2JhKDAsIDAsIDAsIDAuOCknLFxuICB9LFxuICBhY2NlbnQ6IHtcbiAgICBwcmltYXJ5OiAnIzAwN2FmZicsXG4gICAgc2Vjb25kYXJ5OiAnIzVhYzhmYScsXG4gIH0sXG4gIHRleHQ6IHtcbiAgICBwcmltYXJ5OiAnI2ZmZmZmZicsXG4gICAgc2Vjb25kYXJ5OiAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjcpJyxcbiAgICB0ZXJ0aWFyeTogJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC42KScsXG4gIH0sXG4gIHdhdmU6IHtcbiAgICBncmFkaWVudDogJ2xpbmVhci1ncmFkaWVudCh0byB0b3AsICMwMDdhZmYsICM1YWM4ZmEpJyxcbiAgICB3aGl0ZUdyYWRpZW50OiAnbGluZWFyLWdyYWRpZW50KHRvIHRvcCwgI2ZmZiwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpKScsXG4gIH0sXG59O1xuXG4vLyDpn7PpopHphY3nva5cbmV4cG9ydCBjb25zdCBBVURJT19DT05GSUcgPSB7XG4gIHR5cGU6ICdiZ20nLCAvLyDphZLppobliqnmiYvpn7PpopHnsbvlnotcbiAgc3VwcG9ydGVkRm9ybWF0czogWydtcDMnLCAnYWFjJywgJ29nZycsICd3YXYnLCAnbTRhJ10sXG4gIG1heEZpbGVTaXplOiA1MCAqIDEwMjQgKiAxMDI0LCAvLyA1ME1CXG4gIHRpbWVvdXQ6IDEwMDAwLCAvLyAxMOenkui2heaXtlxufTtcblxuLy8g5a2Y5YKo6ZSu5ZCNXG5leHBvcnQgY29uc3QgU1RPUkFHRV9LRVlTID0ge1xuICBzZXR0aW5nczogJ2R5bmFtaWMtaXNsYW5kLXNldHRpbmdzJyxcbiAgcGxheWxpc3Q6ICdkeW5hbWljLWlzbGFuZC1wbGF5bGlzdCcsXG4gIGN1cnJlbnRNdXNpYzogJ2R5bmFtaWMtaXNsYW5kLWN1cnJlbnQtbXVzaWMnLFxuICBkZWJ1ZzogJ2RlYnVnLWR5bmFtaWMtaXNsYW5kJyxcbn07XG5cbi8vIOiwg+ivlemFjee9rlxuZXhwb3J0IGNvbnN0IERFQlVHX0NPTkZJRyA9IHtcbiAgZW5hYmxlQ29uc29sZUxvZzogZmFsc2UsXG4gIGVuYWJsZVBlcmZvcm1hbmNlTG9nOiBmYWxzZSxcbiAgZW5hYmxlRXJyb3JUcmFja2luZzogdHJ1ZSxcbiAgbG9nTGV2ZWw6ICdpbmZvJyBhcyAnZGVidWcnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJyxcbn07XG5cbi8vIOWTjeW6lOW8j+aWreeCuVxuZXhwb3J0IGNvbnN0IEJSRUFLUE9JTlRTID0ge1xuICBtb2JpbGU6IDQwMCxcbiAgdGFibGV0OiA3NjgsXG4gIGRlc2t0b3A6IDEwMjQsXG59O1xuXG4vLyDmgKfog73phY3nva5cbmV4cG9ydCBjb25zdCBQRVJGT1JNQU5DRV9DT05GSUcgPSB7XG4gIGFuaW1hdGlvbkZyYW1lVGhyb3R0bGU6IDE2LCAvLyB+NjBmcHNcbiAgdXBkYXRlSW50ZXJ2YWw6IDEwMCwgLy8gMTAwbXPmm7TmlrDpl7TpmpRcbiAgbWF4TG9nRW50cmllczogMTAwLCAvLyDmnIDlpKfml6Xlv5fmnaHmlbBcbiAgY2FjaGVUaW1lb3V0OiA1ICogNjAgKiAxMDAwLCAvLyA15YiG6ZKf57yT5a2YXG59O1xuXG4vLyDplJnor6/mtojmga9cbmV4cG9ydCBjb25zdCBFUlJPUl9NRVNTQUdFUyA9IHtcbiAgQVVESU9fTE9BRF9GQUlMRUQ6ICfpn7PpopHliqDovb3lpLHotKXvvIzor7fmo4Dmn6Xpk77mjqXmmK/lkKbmnInmlYgnLFxuICBBVURJT19QTEFZX0ZBSUxFRDogJ+mfs+mikeaSreaUvuWksei0pe+8jOivt+ajgOafpea1j+iniOWZqOadg+mZkOiuvue9ricsXG4gIE5FVFdPUktfRVJST1I6ICfnvZHnu5zov57mjqXplJnor6/vvIzor7fmo4Dmn6XnvZHnu5znirbmgIEnLFxuICBJTlZBTElEX1VSTDogJ+aXoOaViOeahOmfs+mikemTvuaOpeagvOW8jycsXG4gIFBFUk1JU1NJT05fREVOSUVEOiAn6Z+z6aKR5pKt5pS+5p2D6ZmQ6KKr5ouS57udJyxcbiAgVElNRU9VVF9FUlJPUjogJ+ivt+axgui2heaXtu+8jOivt+eojeWQjumHjeivlScsXG4gIFVOS05PV05fRVJST1I6ICfmnKrnn6XplJnor6/vvIzor7fliLfmlrDpobXpnaLph43or5UnLFxufTtcblxuLy8g5oiQ5Yqf5raI5oGvXG5leHBvcnQgY29uc3QgU1VDQ0VTU19NRVNTQUdFUyA9IHtcbiAgTVVTSUNfSU1QT1JURUQ6ICfpn7PkuZDlr7zlhaXmiJDlip8nLFxuICBQTEFZQkFDS19TVEFSVEVEOiAn5byA5aeL5pKt5pS+JyxcbiAgUExBWUJBQ0tfUEFVU0VEOiAn5bey5pqC5YGcJyxcbiAgTU9ERV9DSEFOR0VEOiAn5pKt5pS+5qih5byP5bey5YiH5o2iJyxcbiAgU0VUVElOR1NfU0FWRUQ6ICforr7nva7lt7Lkv53lrZgnLFxufTtcblxuLy8g5pKt5pS+5qih5byP5ZCN56ew5pig5bCEXG5leHBvcnQgY29uc3QgTU9ERV9OQU1FUyA9IHtcbiAgW1BsYXlNb2RlLlJFUEVBVF06ICfliJfooajlvqrnjq8nLFxuICBbUGxheU1vZGUuUkFORE9NXTogJ+maj+acuuaSreaUvicsXG4gIFtQbGF5TW9kZS5TSU5HTEVdOiAn5Y2V5puy5b6q546vJyxcbiAgW1BsYXlNb2RlLlNUT1BdOiAn5YGc5q2i5qih5byPJyxcbn07XG5cbi8vIFNWR+Wbvuagh+i3r+W+hFxuZXhwb3J0IGNvbnN0IElDT05TID0ge1xuICBwbGF5OiAnTTgsNS4xNFYxOS4xNEwxOSwxMi4xNEw4LDUuMTRaJyxcbiAgcGF1c2U6ICdNMTQsMTlIMThWNUgxNE02LDE5SDEwVjVINlYxOVonLFxuICByZXBlYXQ6ICdNMTcgMUwyMSA1TDE3IDlNMyAxMVY5QTQgNCAwIDAgMSA3IDVIMjFNNyAyM0wzIDE5TDcgMTVNMjEgMTNWMTVBNCA0IDAgMCAxIDE3IDE5SDMnLFxuICByYW5kb206ICdNMTYgM0wyMSAzTDIxIDhNNCAyMEwyMSAzTTIxIDE2TDIxIDIxTDE2IDIxTTE1IDE1TDIxIDIxTTQgNEw5IDknLFxuICBzaW5nbGU6ICdNMTcgMUwyMSA1TDE3IDlNMyAxMVY5QTQgNCAwIDAgMSA3IDVIMjFNNyAyM0wzIDE5TDcgMTVNMjEgMTNWMTVBNCA0IDAgMCAxIDE3IDE5SDNNMTEgMTFMMTIgMTBWMTUnLFxuICBzdG9wOiAnTTYsNkgxOFYxOEg2VjZaJyxcbiAgYWRkOiAnTTE5LDEzSDEzVjE5SDExVjEzSDVWMTFIMTFWNUgxM1YxMUgxOVYxM1onLFxuICBtdXNpYzogJ+KZqicsXG59O1xuXG4vLyDlr7zlh7rmiYDmnInphY3nva5cbmV4cG9ydCBjb25zdCBDT05GSUcgPSB7XG4gIGRlZmF1bHQ6IERFRkFVTFRfQ09ORklHLFxuICBkaW1lbnNpb25zOiBESU1FTlNJT05TLFxuICBhbmltYXRpb25zOiBBTklNQVRJT05TLFxuICBjb2xvcnM6IENPTE9SUyxcbiAgYXVkaW86IEFVRElPX0NPTkZJRyxcbiAgc3RvcmFnZTogU1RPUkFHRV9LRVlTLFxuICBkZWJ1ZzogREVCVUdfQ09ORklHLFxuICBicmVha3BvaW50czogQlJFQUtQT0lOVFMsXG4gIHBlcmZvcm1hbmNlOiBQRVJGT1JNQU5DRV9DT05GSUcsXG4gIG1lc3NhZ2VzOiB7XG4gICAgZXJyb3I6IEVSUk9SX01FU1NBR0VTLFxuICAgIHN1Y2Nlc3M6IFNVQ0NFU1NfTUVTU0FHRVMsXG4gIH0sXG4gIG1vZGVOYW1lczogTU9ERV9OQU1FUyxcbiAgaWNvbnM6IElDT05TLFxufSBhcyBjb25zdDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/dynamicIsland/config.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/dynamicIsland/dynamicIsland.scss": 
  /*!********************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/dynamicIsland/dynamicIsland.scss ***!
  \********************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZHluYW1pY0lzbGFuZC9keW5hbWljSXNsYW5kLnNjc3MiLCJtYXBwaW5ncyI6IjtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy9keW5hbWljSXNsYW5kL2R5bmFtaWNJc2xhbmQuc2Nzcz8iXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/dynamicIsland/dynamicIsland.scss\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/dynamicIsland/index.ts": 
  /*!**********************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/dynamicIsland/index.ts ***!
  \**********************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   destroyDynamicIsland: () => (/* binding */ destroyDynamicIsland),\n/* harmony export */   getMusicPlayerInstance: () => (/* binding */ getMusicPlayerInstance),\n/* harmony export */   initializeDynamicIsland: () => (/* binding */ initializeDynamicIsland)\n/* harmony export */ });\n/* harmony import */ var _DynamicIslandMusicPlayer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./DynamicIslandMusicPlayer */ \"./src/多云熊/备份/给rovo的/modules/dynamicIsland/DynamicIslandMusicPlayer.ts\");\n/* harmony import */ var _PlaylistPanel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PlaylistPanel */ \"./src/多云熊/备份/给rovo的/modules/dynamicIsland/PlaylistPanel.ts\");\n/**\n * 灵动岛音乐播放器模块入口\n * 负责初始化和管理灵动岛音乐播放器\n */\n\n\nlet musicPlayerInstance = null;\n/**\n * 初始化灵动岛音乐播放器\n */\nfunction initializeDynamicIsland() {\n    try {\n        // 确保只初始化一次\n        if (musicPlayerInstance) {\n            console.log('[DynamicIsland] 灵动岛音乐播放器已存在，跳过初始化');\n            return;\n        }\n        // 等待DOM加载完成\n        if (document.readyState === 'loading') {\n            document.addEventListener('DOMContentLoaded', initializeDynamicIsland);\n            return;\n        }\n        // 检查是否存在phone-container\n        const phoneContainer = document.querySelector('.phone-container');\n        if (!phoneContainer) {\n            console.warn('[DynamicIsland] 未找到.phone-container元素，稍后重试');\n            setTimeout(initializeDynamicIsland, 500);\n            return;\n        }\n        // 创建灵动岛音乐播放器实例\n        musicPlayerInstance = _DynamicIslandMusicPlayer__WEBPACK_IMPORTED_MODULE_0__.DynamicIslandMusicPlayer.getInstance();\n        // 初始化完成后立即预加载歌单（扫描世界书 + 预解析标题）\n        try {\n            _PlaylistPanel__WEBPACK_IMPORTED_MODULE_1__.PlaylistPanel.getInstance().prefetch();\n        }\n        catch (e) {\n            console.warn('[DynamicIsland] 歌单预加载失败:', e);\n        }\n        console.log('[DynamicIsland] 灵动岛音乐播放器初始化成功');\n    }\n    catch (error) {\n        console.error('[DynamicIsland] 初始化失败:', error);\n        toastr.error('灵动岛音乐播放器初始化失败', '错误');\n    }\n}\n/**\n * 销毁灵动岛音乐播放器\n */\nfunction destroyDynamicIsland() {\n    try {\n        if (musicPlayerInstance) {\n            musicPlayerInstance.destroy();\n            musicPlayerInstance = null;\n            console.log('[DynamicIsland] 灵动岛音乐播放器已销毁');\n        }\n    }\n    catch (error) {\n        console.error('[DynamicIsland] 销毁失败:', error);\n    }\n}\n/**\n * 获取音乐播放器实例\n */\nfunction getMusicPlayerInstance() {\n    return musicPlayerInstance;\n}\n// 在界面加载时初始化\n$(() => {\n    initializeDynamicIsland();\n});\n// 在界面卸载时清理\n$(window).on('unload', () => {\n    destroyDynamicIsland();\n});\n// 监听角色切换事件，重新初始化\n$(document).on('characterChange', () => {\n    console.log('[DynamicIsland] 检测到角色切换，重新初始化灵动岛');\n    destroyDynamicIsland();\n    setTimeout(initializeDynamicIsland, 100);\n});\n// 导出初始化和销毁函数供外部使用\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZHluYW1pY0lzbGFuZC9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBOzs7R0FHRztBQUVtRTtBQUN0QjtBQUVoRCxJQUFJLG1CQUFtQixHQUFvQyxJQUFJLENBQUM7QUFFaEU7O0dBRUc7QUFDSCxTQUFTLHVCQUF1QjtJQUM5QixJQUFJLENBQUM7UUFDSCxXQUFXO1FBQ1gsSUFBSSxtQkFBbUIsRUFBRSxDQUFDO1lBQ3hCLE9BQU8sQ0FBQyxHQUFHLENBQUMsbUNBQW1DLENBQUMsQ0FBQztZQUNqRCxPQUFPO1FBQ1QsQ0FBQztRQUVELFlBQVk7UUFDWixJQUFJLFFBQVEsQ0FBQyxVQUFVLEtBQUssU0FBUyxFQUFFLENBQUM7WUFDdEMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLGtCQUFrQixFQUFFLHVCQUF1QixDQUFDLENBQUM7WUFDdkUsT0FBTztRQUNULENBQUM7UUFFRCx3QkFBd0I7UUFDeEIsTUFBTSxjQUFjLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1FBQ2xFLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztZQUNwQixPQUFPLENBQUMsSUFBSSxDQUFDLDRDQUE0QyxDQUFDLENBQUM7WUFDM0QsVUFBVSxDQUFDLHVCQUF1QixFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQ3pDLE9BQU87UUFDVCxDQUFDO1FBRUQsZUFBZTtRQUNmLG1CQUFtQixHQUFHLCtFQUF3QixDQUFDLFdBQVcsRUFBRSxDQUFDO1FBRTdELCtCQUErQjtRQUMvQixJQUFJLENBQUM7WUFDSCx5REFBYSxDQUFDLFdBQVcsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ3pDLENBQUM7UUFBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1lBQ1gsT0FBTyxDQUFDLElBQUksQ0FBQywwQkFBMEIsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUM5QyxDQUFDO1FBRUQsT0FBTyxDQUFDLEdBQUcsQ0FBQywrQkFBK0IsQ0FBQyxDQUFDO0lBQy9DLENBQUM7SUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1FBQ2YsT0FBTyxDQUFDLEtBQUssQ0FBQyx3QkFBd0IsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUMvQyxNQUFNLENBQUMsS0FBSyxDQUFDLGVBQWUsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUN0QyxDQUFDO0FBQ0gsQ0FBQztBQUVEOztHQUVHO0FBQ0gsU0FBUyxvQkFBb0I7SUFDM0IsSUFBSSxDQUFDO1FBQ0gsSUFBSSxtQkFBbUIsRUFBRSxDQUFDO1lBQ3hCLG1CQUFtQixDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQzlCLG1CQUFtQixHQUFHLElBQUksQ0FBQztZQUMzQixPQUFPLENBQUMsR0FBRyxDQUFDLDZCQUE2QixDQUFDLENBQUM7UUFDN0MsQ0FBQztJQUNILENBQUM7SUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1FBQ2YsT0FBTyxDQUFDLEtBQUssQ0FBQyx1QkFBdUIsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUNoRCxDQUFDO0FBQ0gsQ0FBQztBQUVEOztHQUVHO0FBQ0ksU0FBUyxzQkFBc0I7SUFDcEMsT0FBTyxtQkFBbUIsQ0FBQztBQUM3QixDQUFDO0FBRUQsWUFBWTtBQUNaLENBQUMsQ0FBQyxHQUFHLEVBQUU7SUFDTCx1QkFBdUIsRUFBRSxDQUFDO0FBQzVCLENBQUMsQ0FBQyxDQUFDO0FBRUgsV0FBVztBQUNYLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLEdBQUcsRUFBRTtJQUMxQixvQkFBb0IsRUFBRSxDQUFDO0FBQ3pCLENBQUMsQ0FBQyxDQUFDO0FBRUgsaUJBQWlCO0FBQ2pCLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsaUJBQWlCLEVBQUUsR0FBRyxFQUFFO0lBQ3JDLE9BQU8sQ0FBQyxHQUFHLENBQUMsa0NBQWtDLENBQUMsQ0FBQztJQUNoRCxvQkFBb0IsRUFBRSxDQUFDO0lBQ3ZCLFVBQVUsQ0FBQyx1QkFBdUIsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUMzQyxDQUFDLENBQUMsQ0FBQztBQUVILGtCQUFrQjtBQUN1QyIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZHluYW1pY0lzbGFuZC9pbmRleC50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiDngbXliqjlspvpn7PkuZDmkq3mlL7lmajmqKHlnZflhaXlj6NcbiAqIOi0n+i0o+WIneWni+WMluWSjOeuoeeQhueBteWKqOWym+mfs+S5kOaSreaUvuWZqFxuICovXG5cbmltcG9ydCB7IER5bmFtaWNJc2xhbmRNdXNpY1BsYXllciB9IGZyb20gJy4vRHluYW1pY0lzbGFuZE11c2ljUGxheWVyJztcbmltcG9ydCB7IFBsYXlsaXN0UGFuZWwgfSBmcm9tICcuL1BsYXlsaXN0UGFuZWwnO1xuXG5sZXQgbXVzaWNQbGF5ZXJJbnN0YW5jZTogRHluYW1pY0lzbGFuZE11c2ljUGxheWVyIHwgbnVsbCA9IG51bGw7XG5cbi8qKlxuICog5Yid5aeL5YyW54G15Yqo5bKb6Z+z5LmQ5pKt5pS+5ZmoXG4gKi9cbmZ1bmN0aW9uIGluaXRpYWxpemVEeW5hbWljSXNsYW5kKCk6IHZvaWQge1xuICB0cnkge1xuICAgIC8vIOehruS/neWPquWIneWni+WMluS4gOasoVxuICAgIGlmIChtdXNpY1BsYXllckluc3RhbmNlKSB7XG4gICAgICBjb25zb2xlLmxvZygnW0R5bmFtaWNJc2xhbmRdIOeBteWKqOWym+mfs+S5kOaSreaUvuWZqOW3suWtmOWcqO+8jOi3s+i/h+WIneWni+WMlicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIOetieW+hURPTeWKoOi9veWujOaIkFxuICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnbG9hZGluZycpIHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBpbml0aWFsaXplRHluYW1pY0lzbGFuZCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8g5qOA5p+l5piv5ZCm5a2Y5ZyocGhvbmUtY29udGFpbmVyXG4gICAgY29uc3QgcGhvbmVDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGhvbmUtY29udGFpbmVyJyk7XG4gICAgaWYgKCFwaG9uZUNvbnRhaW5lcikge1xuICAgICAgY29uc29sZS53YXJuKCdbRHluYW1pY0lzbGFuZF0g5pyq5om+5YiwLnBob25lLWNvbnRhaW5lcuWFg+e0oO+8jOeojeWQjumHjeivlScpO1xuICAgICAgc2V0VGltZW91dChpbml0aWFsaXplRHluYW1pY0lzbGFuZCwgNTAwKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyDliJvlu7rngbXliqjlspvpn7PkuZDmkq3mlL7lmajlrp7kvotcbiAgICBtdXNpY1BsYXllckluc3RhbmNlID0gRHluYW1pY0lzbGFuZE11c2ljUGxheWVyLmdldEluc3RhbmNlKCk7XG5cbiAgICAvLyDliJ3lp4vljJblrozmiJDlkI7nq4vljbPpooTliqDovb3mrYzljZXvvIjmiavmj4/kuJbnlYzkuaYgKyDpooTop6PmnpDmoIfpopjvvIlcbiAgICB0cnkge1xuICAgICAgUGxheWxpc3RQYW5lbC5nZXRJbnN0YW5jZSgpLnByZWZldGNoKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKCdbRHluYW1pY0lzbGFuZF0g5q2M5Y2V6aKE5Yqg6L295aSx6LSlOicsIGUpO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCdbRHluYW1pY0lzbGFuZF0g54G15Yqo5bKb6Z+z5LmQ5pKt5pS+5Zmo5Yid5aeL5YyW5oiQ5YqfJyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW0R5bmFtaWNJc2xhbmRdIOWIneWni+WMluWksei0pTonLCBlcnJvcik7XG4gICAgdG9hc3RyLmVycm9yKCfngbXliqjlspvpn7PkuZDmkq3mlL7lmajliJ3lp4vljJblpLHotKUnLCAn6ZSZ6K+vJyk7XG4gIH1cbn1cblxuLyoqXG4gKiDplIDmr4HngbXliqjlspvpn7PkuZDmkq3mlL7lmahcbiAqL1xuZnVuY3Rpb24gZGVzdHJveUR5bmFtaWNJc2xhbmQoKTogdm9pZCB7XG4gIHRyeSB7XG4gICAgaWYgKG11c2ljUGxheWVySW5zdGFuY2UpIHtcbiAgICAgIG11c2ljUGxheWVySW5zdGFuY2UuZGVzdHJveSgpO1xuICAgICAgbXVzaWNQbGF5ZXJJbnN0YW5jZSA9IG51bGw7XG4gICAgICBjb25zb2xlLmxvZygnW0R5bmFtaWNJc2xhbmRdIOeBteWKqOWym+mfs+S5kOaSreaUvuWZqOW3sumUgOavgScpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbRHluYW1pY0lzbGFuZF0g6ZSA5q+B5aSx6LSlOicsIGVycm9yKTtcbiAgfVxufVxuXG4vKipcbiAqIOiOt+WPlumfs+S5kOaSreaUvuWZqOWunuS+i1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TXVzaWNQbGF5ZXJJbnN0YW5jZSgpOiBEeW5hbWljSXNsYW5kTXVzaWNQbGF5ZXIgfCBudWxsIHtcbiAgcmV0dXJuIG11c2ljUGxheWVySW5zdGFuY2U7XG59XG5cbi8vIOWcqOeVjOmdouWKoOi9veaXtuWIneWni+WMllxuJCgoKSA9PiB7XG4gIGluaXRpYWxpemVEeW5hbWljSXNsYW5kKCk7XG59KTtcblxuLy8g5Zyo55WM6Z2i5Y246L295pe25riF55CGXG4kKHdpbmRvdykub24oJ3VubG9hZCcsICgpID0+IHtcbiAgZGVzdHJveUR5bmFtaWNJc2xhbmQoKTtcbn0pO1xuXG4vLyDnm5HlkKzop5LoibLliIfmjaLkuovku7bvvIzph43mlrDliJ3lp4vljJZcbiQoZG9jdW1lbnQpLm9uKCdjaGFyYWN0ZXJDaGFuZ2UnLCAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdbRHluYW1pY0lzbGFuZF0g5qOA5rWL5Yiw6KeS6Imy5YiH5o2i77yM6YeN5paw5Yid5aeL5YyW54G15Yqo5bKbJyk7XG4gIGRlc3Ryb3lEeW5hbWljSXNsYW5kKCk7XG4gIHNldFRpbWVvdXQoaW5pdGlhbGl6ZUR5bmFtaWNJc2xhbmQsIDEwMCk7XG59KTtcblxuLy8g5a+85Ye65Yid5aeL5YyW5ZKM6ZSA5q+B5Ye95pWw5L6b5aSW6YOo5L2/55SoXG5leHBvcnQgeyBkZXN0cm95RHluYW1pY0lzbGFuZCwgaW5pdGlhbGl6ZUR5bmFtaWNJc2xhbmQgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/dynamicIsland/index.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/dynamicIsland/playlist.scss": 
  /*!***************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/dynamicIsland/playlist.scss ***!
  \***************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZHluYW1pY0lzbGFuZC9wbGF5bGlzdC5zY3NzIiwibWFwcGluZ3MiOiI7QUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZHluYW1pY0lzbGFuZC9wbGF5bGlzdC5zY3NzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/dynamicIsland/playlist.scss\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/dynamicIsland/types.ts": 
  /*!**********************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/dynamicIsland/types.ts ***!
  \**********************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PlayMode: () => (/* binding */ PlayMode),\n/* harmony export */   PlayState: () => (/* binding */ PlayState)\n/* harmony export */ });\n/**\n * 灵动岛音乐播放器类型定义\n */\n// 播放状态枚举\nvar PlayState;\n(function (PlayState) {\n    PlayState["STOPPED"] = "stopped";\n    PlayState["PLAYING"] = "playing";\n    PlayState["PAUSED"] = "paused";\n    PlayState["LOADING"] = "loading";\n})(PlayState || (PlayState = {}));\n// 播放模式枚举\nvar PlayMode;\n(function (PlayMode) {\n    PlayMode["REPEAT"] = "repeat";\n    PlayMode["RANDOM"] = "random";\n    PlayMode["SINGLE"] = "single";\n    PlayMode["STOP"] = "stop";\n})(PlayMode || (PlayMode = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZHluYW1pY0lzbGFuZC90eXBlcy50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBOztHQUVHO0FBRUgsU0FBUztBQUNULElBQVksU0FLWDtBQUxELFdBQVksU0FBUztJQUNuQixnQ0FBbUI7SUFDbkIsZ0NBQW1CO0lBQ25CLDhCQUFpQjtJQUNqQixnQ0FBbUI7QUFDckIsQ0FBQyxFQUxXLFNBQVMsS0FBVCxTQUFTLFFBS3BCO0FBRUQsU0FBUztBQUNULElBQVksUUFLWDtBQUxELFdBQVksUUFBUTtJQUNsQiw2QkFBaUI7SUFDakIsNkJBQWlCO0lBQ2pCLDZCQUFpQjtJQUNqQix5QkFBYTtBQUNmLENBQUMsRUFMVyxRQUFRLEtBQVIsUUFBUSxRQUtuQiIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZHluYW1pY0lzbGFuZC90eXBlcy50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIOeBteWKqOWym+mfs+S5kOaSreaUvuWZqOexu+Wei+WumuS5iVxyXG4gKi9cclxuXHJcbi8vIOaSreaUvueKtuaAgeaemuS4vlxyXG5leHBvcnQgZW51bSBQbGF5U3RhdGUge1xyXG4gIFNUT1BQRUQgPSAnc3RvcHBlZCcsXHJcbiAgUExBWUlORyA9ICdwbGF5aW5nJyxcclxuICBQQVVTRUQgPSAncGF1c2VkJyxcclxuICBMT0FESU5HID0gJ2xvYWRpbmcnLFxyXG59XHJcblxyXG4vLyDmkq3mlL7mqKHlvI/mnprkuL5cclxuZXhwb3J0IGVudW0gUGxheU1vZGUge1xyXG4gIFJFUEVBVCA9ICdyZXBlYXQnLFxyXG4gIFJBTkRPTSA9ICdyYW5kb20nLFxyXG4gIFNJTkdMRSA9ICdzaW5nbGUnLFxyXG4gIFNUT1AgPSAnc3RvcCcsXHJcbn1cclxuXHJcbi8vIOmfs+S5kOS/oeaBr+aOpeWPo1xyXG5leHBvcnQgaW50ZXJmYWNlIE11c2ljSW5mbyB7XHJcbiAgdGl0bGU6IHN0cmluZztcclxuICBhcnRpc3Q6IHN0cmluZztcclxuICBkdXJhdGlvbjogbnVtYmVyO1xyXG4gIGN1cnJlbnRUaW1lOiBudW1iZXI7XHJcbiAgY292ZXJVcmw/OiBzdHJpbmc7XHJcbiAgYXVkaW9Vcmw/OiBzdHJpbmc7XHJcbn1cclxuXHJcbi8vIOaSreaUvuWZqOmFjee9ruaOpeWPo1xyXG5leHBvcnQgaW50ZXJmYWNlIFBsYXllckNvbmZpZyB7XHJcbiAgYXV0b1BsYXk/OiBib29sZWFuO1xyXG4gIHZvbHVtZT86IG51bWJlcjtcclxuICBkZWZhdWx0TW9kZT86IFBsYXlNb2RlO1xyXG4gIGVuYWJsZUFuaW1hdGlvbnM/OiBib29sZWFuO1xyXG59XHJcblxyXG4vLyDmkq3mlL7lmajkuovku7bmjqXlj6NcclxuZXhwb3J0IGludGVyZmFjZSBQbGF5ZXJFdmVudHMge1xyXG4gIG9uU3RhdGVDaGFuZ2U/OiAoc3RhdGU6IFBsYXlTdGF0ZSkgPT4gdm9pZDtcclxuICBvbk11c2ljQ2hhbmdlPzogKG11c2ljOiBNdXNpY0luZm8pID0+IHZvaWQ7XHJcbiAgb25Nb2RlQ2hhbmdlPzogKG1vZGU6IFBsYXlNb2RlKSA9PiB2b2lkO1xyXG4gIG9uUHJvZ3Jlc3M/OiAoY3VycmVudFRpbWU6IG51bWJlciwgZHVyYXRpb246IG51bWJlcikgPT4gdm9pZDtcclxuICBvbkVycm9yPzogKGVycm9yOiBFcnJvcikgPT4gdm9pZDtcclxufVxyXG5cclxuLy8g6YWS6aaG5Yqp5omL6Z+z6aKRQVBJ57G75Z6L5a6a5LmJXHJcbmV4cG9ydCBpbnRlcmZhY2UgQXVkaW9BUEkge1xyXG4gIGF1ZGlvUGxheShhcmdzOiB7IHR5cGU6IHN0cmluZzsgcGxheT86IHN0cmluZyB9KTogUHJvbWlzZTx2b2lkPjtcclxuICBhdWRpb0ltcG9ydChhcmdzOiB7IHR5cGU6IHN0cmluZzsgcGxheT86IHN0cmluZyB9LCB1cmw6IHN0cmluZyk6IFByb21pc2U8dm9pZD47XHJcbiAgYXVkaW9Nb2RlKGFyZ3M6IHsgdHlwZTogc3RyaW5nOyBtb2RlOiBzdHJpbmcgfSk6IFByb21pc2U8dm9pZD47XHJcbiAgYXVkaW9TZWxlY3QoYXJnczogeyB0eXBlOiBzdHJpbmcgfSwgdXJsOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+O1xyXG4gIGF1ZGlvRW5hYmxlKGFyZ3M6IHsgdHlwZTogc3RyaW5nOyBzdGF0ZT86IHN0cmluZyB9KTogUHJvbWlzZTx2b2lkPjtcclxufVxyXG5cclxuLy8galF1ZXJ55omp5bGV57G75Z6LXHJcbmRlY2xhcmUgZ2xvYmFsIHtcclxuICBpbnRlcmZhY2UgSlF1ZXJ5IHtcclxuICAgIC8vIOehruS/nWpRdWVyeeaWueazleexu+Wei+ato+ehrlxyXG4gICAgcmVwbGFjZVdpdGgoY29udGVudDogc3RyaW5nIHwgSlF1ZXJ5IHwgSFRNTEVsZW1lbnQpOiBKUXVlcnk7XHJcbiAgICBhcHBlbmQoY29udGVudDogc3RyaW5nIHwgSlF1ZXJ5IHwgSFRNTEVsZW1lbnQpOiBKUXVlcnk7XHJcbiAgICBjc3MocHJvcGVydHk6IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IEpRdWVyeTtcclxuICAgIGNzcyhwcm9wZXJ0aWVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KTogSlF1ZXJ5O1xyXG4gICAgYXR0cihuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpOiBKUXVlcnk7XHJcbiAgICBhdHRyKG5hbWU6IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZDtcclxuICAgIGFkZENsYXNzKGNsYXNzTmFtZTogc3RyaW5nKTogSlF1ZXJ5O1xyXG4gICAgcmVtb3ZlQ2xhc3MoY2xhc3NOYW1lOiBzdHJpbmcpOiBKUXVlcnk7XHJcbiAgICBzaG93KCk6IEpRdWVyeTtcclxuICAgIGhpZGUoKTogSlF1ZXJ5O1xyXG4gICAgdGV4dCh0ZXh0OiBzdHJpbmcpOiBKUXVlcnk7XHJcbiAgICB0ZXh0KCk6IHN0cmluZztcclxuICAgIHdpZHRoKCk6IG51bWJlciB8IHVuZGVmaW5lZDtcclxuICAgIGNsb3Nlc3Qoc2VsZWN0b3I6IHN0cmluZyk6IEpRdWVyeTtcclxuICB9XHJcbn1cclxuXHJcbi8vIOWFqOWxgOWHveaVsOWjsOaYjlxyXG5kZWNsYXJlIGdsb2JhbCB7XHJcbiAgLy8g6YWS6aaG5Yqp5omL6Z+z6aKR5Ye95pWwXHJcbiAgZnVuY3Rpb24gYXVkaW9QbGF5KGFyZ3M6IHsgdHlwZTogc3RyaW5nOyBwbGF5Pzogc3RyaW5nIH0pOiBQcm9taXNlPHZvaWQ+O1xyXG4gIGZ1bmN0aW9uIGF1ZGlvSW1wb3J0KGFyZ3M6IHsgdHlwZTogc3RyaW5nOyBwbGF5Pzogc3RyaW5nIH0sIHVybDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcclxuICBmdW5jdGlvbiBhdWRpb01vZGUoYXJnczogeyB0eXBlOiBzdHJpbmc7IG1vZGU6IHN0cmluZyB9KTogUHJvbWlzZTx2b2lkPjtcclxuICBmdW5jdGlvbiBhdWRpb1NlbGVjdChhcmdzOiB7IHR5cGU6IHN0cmluZyB9LCB1cmw6IHN0cmluZyk6IFByb21pc2U8dm9pZD47XHJcbiAgZnVuY3Rpb24gYXVkaW9FbmFibGUoYXJnczogeyB0eXBlOiBzdHJpbmc7IHN0YXRlPzogc3RyaW5nIH0pOiBQcm9taXNlPHZvaWQ+O1xyXG5cclxufVxyXG5cclxuZXhwb3J0IHt9O1xyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/dynamicIsland/types.ts\n\n}');
  },
  "./src/多云熊/备份/给rovo的/modules/dynamics/commentHandler.ts": 
  /*!**************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/dynamics/commentHandler.ts ***!
  \**************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CommentHandler: () => (/* binding */ CommentHandler),\n/* harmony export */   formatRelativeTime: () => (/* binding */ formatRelativeTime)\n/* harmony export */ });\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"jquery\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/**\n * 动态评论处理器模块\n * 负责处理评论的输入、存储和显示\n */\n\nclass CommentHandler {\n    soundManager;\n    $commentModal = null;\n    currentPostNo = null;\n    currentReplyTo = null;\n    currentMessageId = null; // 添加：记录动态所在的楼层ID\n    constructor(soundManager) {\n        this.soundManager = soundManager;\n    }\n    /**\n     * 通用的跨楼层消息查找方法\n     * @param messageId 目标楼层ID（可选）\n     * @param postNo 动态编号（可选，用于通过动态编号查找）\n     * @param context 调用上下文（用于日志）\n     * @returns 找到的消息对象和楼层ID\n     */\n    async findTargetMessage(messageId, postNo = null, context = '操作') {\n        let targetMessage = null;\n        let targetMessageId = null;\n        // 🚀 优先级1：使用 message-id 直接获取目标楼层\n        if (messageId !== null) {\n            const directMessages = getChatMessages(messageId);\n            if (directMessages && directMessages.length > 0) {\n                targetMessage = directMessages[0];\n                targetMessageId = messageId;\n                console.log(`✅ [${context}] 直接获取楼层 ${targetMessageId} 成功`);\n                return { message: targetMessage, messageId: targetMessageId };\n            }\n            else {\n                console.warn(`⚠️ [${context}] 直接获取楼层 ${messageId} 失败，尝试备用方案`);\n            }\n        }\n        // 🔍 优先级2：搜索所有消息\n        console.log(`📋 [${context}] 使用备用方案：搜索所有消息`);\n        const allMessages = getChatMessages('0-{{lastMessageId}}');\n        // 如果有 message-id 但直接获取失败，在所有消息中查找\n        if (messageId !== null) {\n            targetMessage = allMessages.find((msg) => msg.message_id === messageId);\n            if (targetMessage) {\n                targetMessageId = messageId;\n                console.log(`✅ [${context}] 在所有消息中找到楼层 ${targetMessageId}`);\n                return { message: targetMessage, messageId: targetMessageId };\n            }\n        }\n        // 如果有动态编号，通过动态编号查找\n        if (postNo !== null && !targetMessage) {\n            for (const msg of allMessages) {\n                if (msg.message && typeof msg.message === 'string') {\n                    const dynamicPattern = new RegExp(`\\\\[动态_${postNo}[^\\\\]]*\\\\]`, 'm');\n                    if (dynamicPattern.test(msg.message)) {\n                        targetMessage = msg;\n                        targetMessageId = msg.message_id;\n                        console.log(`✅ [${context}] 通过动态编号找到楼层 ${targetMessageId}`);\n                        return { message: targetMessage, messageId: targetMessageId };\n                    }\n                }\n            }\n        }\n        // 🛡️ 优先级3：兜底方案 - 使用当前楼层\n        const messages = getChatMessages(-1);\n        if (messages && messages.length > 0) {\n            targetMessage = messages[0];\n            targetMessageId = targetMessage.message_id;\n            console.log(`ℹ️ [${context}] 使用当前楼层 ${targetMessageId} 作为兜底`);\n            return { message: targetMessage, messageId: targetMessageId };\n        }\n        return null;\n    }\n    /**\n     * 初始化评论功能\n     */\n    initialize() {\n        this.initializeCommentClickHandler();\n        this.initializeReplyClickHandler();\n        this.initializeLongPressHandler(); // 添加长按删除处理器初始化\n        this.createCommentModal();\n    }\n    /**\n     * 初始化评论图标点击处理器\n     */\n    initializeCommentClickHandler() {\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsInterface')\n            .off('click.comment')\n            .on('click.comment', '.dynamics-post-action[data-action=\"comment\"]', e => {\n            e.preventDefault();\n            e.stopPropagation();\n            const $action = jquery__WEBPACK_IMPORTED_MODULE_0___default()(e.currentTarget);\n            const $post = $action.closest('.dynamics-post');\n            if (!$post.length)\n                return;\n            // 获取动态编号\n            const idAttr = $post.attr('data-post-id') || '';\n            let postNo = null;\n            const m = idAttr.match(/^dynamics_(\\d+)/);\n            if (m)\n                postNo = parseInt(m[1], 10);\n            if (!postNo) {\n                const noAttr = $post.attr('data-post-no');\n                if (noAttr)\n                    postNo = parseInt(noAttr, 10);\n            }\n            if (!postNo) {\n                console.warn('评论失败：未能解析动态编号');\n                return;\n            }\n            // 获取动态所在的楼层ID\n            const messageIdAttr = $post.attr('data-message-id');\n            const messageId = messageIdAttr ? parseInt(messageIdAttr, 10) : null;\n            // 播放点击音效\n            if (this.soundManager?.playSound) {\n                this.soundManager.playSound('emoji');\n            }\n            // 显示评论输入框，传入楼层ID\n            this.showCommentModal(postNo, null, messageId);\n        });\n    }\n    /**\n     * 初始化回复点击处理器\n     */\n    initializeReplyClickHandler() {\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsInterface')\n            .off('click.reply')\n            .on('click.reply', '.dynamics-comment', e => {\n            e.preventDefault();\n            e.stopPropagation();\n            const $comment = jquery__WEBPACK_IMPORTED_MODULE_0___default()(e.currentTarget);\n            const $post = $comment.closest('.dynamics-post');\n            if (!$post.length)\n                return;\n            // 获取动态编号\n            const idAttr = $post.attr('data-post-id') || '';\n            let postNo = null;\n            const m = idAttr.match(/^dynamics_(\\d+)/);\n            if (m)\n                postNo = parseInt(m[1], 10);\n            if (!postNo) {\n                const noAttr = $post.attr('data-post-no');\n                if (noAttr)\n                    postNo = parseInt(noAttr, 10);\n            }\n            if (!postNo) {\n                console.warn('回复失败：未能解析动态编号');\n                return;\n            }\n            // 获取动态所在的楼层ID\n            const messageIdAttr = $post.attr('data-message-id');\n            const messageId = messageIdAttr ? parseInt(messageIdAttr, 10) : null;\n            // 获取被回复者名称（应该是评论的作者，而不是整个评论文本）\n            // 如果评论是 \"A 回复 B\" 格式，我们应该回复 A\n            const $commentName = $comment.find('.dynamics-comment-name').first();\n            const replyTo = $commentName.text().trim();\n            if (!replyTo)\n                return;\n            // 播放点击音效\n            if (this.soundManager?.playSound) {\n                this.soundManager.playSound('click');\n            }\n            // 显示回复输入框，传入楼层ID\n            this.showCommentModal(postNo, replyTo, messageId);\n        });\n    }\n    /**\n     * 初始化长按删除处理器\n     */\n    initializeLongPressHandler() {\n        let pressTimer = null;\n        let isLongPress = false;\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsInterface')\n            .off('mousedown.commentDelete touchstart.commentDelete')\n            .on('mousedown.commentDelete touchstart.commentDelete', '.dynamics-comment', e => {\n            const $comment = jquery__WEBPACK_IMPORTED_MODULE_0___default()(e.currentTarget);\n            const $post = $comment.closest('.dynamics-post');\n            // 检查是否是用户自己的评论（异步）\n            this.checkIfUserComment($post, $comment).then(isUserComment => {\n                if (!isUserComment) {\n                    // 如果不是用户评论，清除计时器\n                    if (pressTimer) {\n                        clearTimeout(pressTimer);\n                        pressTimer = null;\n                    }\n                    $comment.removeClass('comment-long-pressing');\n                    return;\n                }\n            });\n            // 注意：计时器会继续运行，在回调中检查\n            isLongPress = false;\n            // 添加长按中的视觉反馈\n            $comment.addClass('comment-long-pressing');\n            // 开始计时\n            pressTimer = setTimeout(async () => {\n                isLongPress = true;\n                // 移除长按样式\n                $comment.removeClass('comment-long-pressing');\n                // 显示删除确认\n                if (confirm('确定要删除这条评论吗？')) {\n                    await this.deleteComment($post, $comment);\n                }\n            }, 800); // 长按800ms触发\n        })\n            .off('mouseup.commentDelete touchend.commentDelete mouseleave.commentDelete')\n            .on('mouseup.commentDelete touchend.commentDelete mouseleave.commentDelete', '.dynamics-comment', e => {\n            // 清除计时器\n            if (pressTimer) {\n                clearTimeout(pressTimer);\n                pressTimer = null;\n            }\n            // 移除长按样式\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()(e.currentTarget).removeClass('comment-long-pressing');\n            // 如果是长按，阻止点击事件\n            if (isLongPress) {\n                e.preventDefault();\n                e.stopPropagation();\n                isLongPress = false;\n            }\n        });\n    }\n    /**\n     * 检查评论是否是当前用户发的（支持跨楼层）\n     */\n    async checkIfUserComment($post, $comment) {\n        try {\n            // 优先检查是否有标记（新添加的评论会有这个标记）\n            if ($comment.attr('data-is-user') === 'true') {\n                return true;\n            }\n            // 获取动态编号\n            const idAttr = $post.attr('data-post-id') || '';\n            let postNo = null;\n            const m = idAttr.match(/^dynamics_(\\d+)/);\n            if (m)\n                postNo = parseInt(m[1], 10);\n            if (!postNo) {\n                const noAttr = $post.attr('data-post-no');\n                if (noAttr)\n                    postNo = parseInt(noAttr, 10);\n            }\n            if (!postNo)\n                return false;\n            // 获取动态所在的楼层ID（用于跨楼层检查）\n            const messageIdAttr = $post.attr('data-message-id');\n            const messageId = messageIdAttr ? parseInt(messageIdAttr, 10) : null;\n            // 获取评论内容\n            const $commentContent = $comment.find('.dynamics-comment-text');\n            const commentText = $commentContent.text().trim();\n            // 使用通用方法查找目标楼层\n            const result = await this.findTargetMessage(messageId, postNo, '检查评论');\n            if (!result)\n                return false;\n            const messageText = result.message.message || '';\n            // 构建匹配模式：检查是否是 user 或 user@某人 的评论\n            const escapeRegExp = (str) => str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n            const escapedContent = escapeRegExp(commentText);\n            // 匹配格式：[评论_编号|user|内容|时间] 或 [评论_编号|user@某人|内容|时间]\n            const userCommentRe = new RegExp(`^\\\\[评论_${postNo}\\\\|user(@[^|]+)?\\\\|${escapedContent}\\\\|[^\\\\]]+\\\\]\\\\s*$`, 'm');\n            // 如果找到匹配，说明是用户的评论\n            const isUserComment = userCommentRe.test(messageText);\n            if (isUserComment) {\n                console.log(`✅ [检查评论] 确认是用户的评论`);\n            }\n            else {\n                console.log(`❌ [检查评论] 不是用户的评论`);\n            }\n            return isUserComment;\n        }\n        catch (error) {\n            console.error('检查用户评论失败:', error);\n            return false;\n        }\n    }\n    /**\n     * 删除评论（支持跨楼层）\n     */\n    async deleteComment($post, $comment) {\n        try {\n            // 获取动态编号\n            const idAttr = $post.attr('data-post-id') || '';\n            let postNo = null;\n            const m = idAttr.match(/^dynamics_(\\d+)/);\n            if (m)\n                postNo = parseInt(m[1], 10);\n            if (!postNo) {\n                const noAttr = $post.attr('data-post-no');\n                if (noAttr)\n                    postNo = parseInt(noAttr, 10);\n            }\n            if (!postNo) {\n                console.warn('删除失败：未能解析动态编号');\n                return;\n            }\n            // 获取动态所在的楼层ID（用于跨楼层删除）\n            const messageIdAttr = $post.attr('data-message-id');\n            const messageId = messageIdAttr ? parseInt(messageIdAttr, 10) : null;\n            // 获取评论内容以识别要删除的评论\n            const $commentContent = $comment.find('.dynamics-comment-text');\n            const commentText = $commentContent.text().trim();\n            // 使用通用方法查找目标楼层\n            const result = await this.findTargetMessage(messageId, postNo, '删除');\n            if (!result)\n                return;\n            let messageText = result.message.message || '';\n            const targetMessageId = result.messageId;\n            // 构建评论匹配模式\n            // 评论格式可能是：[评论_编号|user|内容|时间] 或 [评论_编号|user@某人|内容|时间]\n            const escapeRegExp = (str) => str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n            const escapedContent = escapeRegExp(commentText);\n            // 匹配该评论的正则（支持直接评论和回复两种格式）\n            const commentLineRe = new RegExp(`^\\\\[评论_${postNo}\\\\|user(@[^|]+)?\\\\|${escapedContent}\\\\|[^\\\\]]+\\\\]\\\\s*$`, 'm');\n            if (commentLineRe.test(messageText)) {\n                // 删除该评论行\n                messageText = messageText.replace(commentLineRe, '').replace(/\\n{2,}/g, '\\n');\n                // 更新消息（使用找到的目标楼层ID）\n                await setChatMessages([\n                    {\n                        message_id: targetMessageId,\n                        message: messageText,\n                    },\n                ], { refresh: 'none' });\n                console.log(`✅ [删除] 成功删除楼层 ${targetMessageId} 中的评论`);\n                // 从UI中移除评论（带动画）\n                $comment.fadeOut(300, function () {\n                    jquery__WEBPACK_IMPORTED_MODULE_0___default()(this).remove();\n                    // 如果评论区空了，移除评论区\n                    const $comments = $post.find('.dynamics-comments');\n                    if ($comments.children().length === 0) {\n                        $comments.remove();\n                    }\n                });\n                // 播放删除音效\n                if (this.soundManager?.playSound) {\n                    this.soundManager.playSound('delete');\n                }\n                // 事件桥接：评论删除后通知管理侧刷新内存\n                try {\n                    const detail = {\n                        messageId: targetMessageId,\n                        postNo: postNo,\n                        type: 'comment',\n                        action: 'remove',\n                    };\n                    document.dispatchEvent(new CustomEvent('dynamicsInteractionAdded', { detail }));\n                    document.dispatchEvent(new CustomEvent('dynamics:interactionAdded', { detail }));\n                }\n                catch (e) {\n                    console.warn('⚠️ 派发评论删除事件失败:', e);\n                }\n            }\n            else {\n                console.warn(`⚠️ [删除] 在楼层 ${targetMessageId} 中未找到要删除的评论`);\n            }\n        }\n        catch (error) {\n            console.error('删除评论失败:', error);\n        }\n    }\n    /**\n     * 创建评论模态框（在手机容器内）\n     */\n    createCommentModal() {\n        // 如果模态框已存在，先移除\n        if (this.$commentModal) {\n            this.$commentModal.remove();\n        }\n        // 创建模态框HTML结构\n        const modalHtml = `\n      <div class=\"dynamics-comment-modal\" style=\"display: none;\">\n        <div class=\"dynamics-comment-backdrop\"></div>\n        <div class=\"dynamics-comment-dialog\">\n          <div class=\"dynamics-comment-header\">\n            <span class=\"dynamics-comment-title\">发表评论</span>\n            <button class=\"dynamics-comment-close\">✕</button>\n          </div>\n          <div class=\"dynamics-comment-body\">\n            <div class=\"dynamics-comment-reply-info\" style=\"display: none;\">\n              回复给: <span class=\"dynamics-comment-reply-name\"></span>\n            </div>\n            <textarea class=\"dynamics-comment-input\" \n                      placeholder=\"写下你的评论...\" \n                      rows=\"4\"></textarea>\n          </div>\n          <div class=\"dynamics-comment-footer\">\n            <button class=\"dynamics-comment-cancel\">取消</button>\n            <button class=\"dynamics-comment-submit\">发送</button>\n          </div>\n        </div>\n      </div>\n    `;\n        // 将模态框添加到动态界面容器内\n        this.$commentModal = jquery__WEBPACK_IMPORTED_MODULE_0___default()(modalHtml);\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsInterface').append(this.$commentModal);\n        // 绑定事件\n        this.bindModalEvents();\n    }\n    /**\n     * 绑定模态框事件\n     */\n    bindModalEvents() {\n        if (!this.$commentModal)\n            return;\n        // 关闭按钮\n        this.$commentModal.find('.dynamics-comment-close').on('click', () => {\n            this.hideCommentModal();\n        });\n        // 取消按钮\n        this.$commentModal.find('.dynamics-comment-cancel').on('click', () => {\n            this.hideCommentModal();\n        });\n        // 发送按钮\n        this.$commentModal.find('.dynamics-comment-submit').on('click', () => {\n            this.submitComment();\n        });\n        // 点击背景关闭\n        this.$commentModal.find('.dynamics-comment-backdrop').on('click', () => {\n            this.hideCommentModal();\n        });\n        // 阻止对话框内部点击事件冒泡\n        this.$commentModal.find('.dynamics-comment-dialog').on('click', e => {\n            e.stopPropagation();\n        });\n        // 回车发送（Ctrl+Enter）\n        this.$commentModal.find('.dynamics-comment-input').on('keydown', e => {\n            if (e.ctrlKey && e.keyCode === 13) {\n                e.preventDefault();\n                this.submitComment();\n            }\n        });\n    }\n    /**\n     * 显示评论模态框\n     */\n    showCommentModal(postNo, replyTo, messageId = null) {\n        if (!this.$commentModal) {\n            this.createCommentModal();\n        }\n        this.currentPostNo = postNo;\n        this.currentReplyTo = replyTo;\n        this.currentMessageId = messageId; // 保存楼层ID\n        // 更新模态框内容\n        if (replyTo) {\n            this.$commentModal?.find('.dynamics-comment-reply-info').show();\n            this.$commentModal?.find('.dynamics-comment-reply-name').text(replyTo);\n            this.$commentModal?.find('.dynamics-comment-title').text('回复评论');\n        }\n        else {\n            this.$commentModal?.find('.dynamics-comment-reply-info').hide();\n            this.$commentModal?.find('.dynamics-comment-title').text('发表评论');\n        }\n        // 清空输入框\n        this.$commentModal?.find('.dynamics-comment-input').val('');\n        // 显示模态框（使用淡入效果）\n        this.$commentModal?.fadeIn(200);\n        // 聚焦到输入框\n        setTimeout(() => {\n            this.$commentModal?.find('.dynamics-comment-input').focus();\n        }, 250);\n    }\n    /**\n     * 隐藏评论模态框\n     */\n    hideCommentModal() {\n        // 直接隐藏，不使用淡出效果，避免卡顿\n        this.$commentModal?.hide();\n        // 立即清理状态\n        this.currentPostNo = null;\n        this.currentReplyTo = null;\n        this.currentMessageId = null;\n        this.$commentModal?.find('.dynamics-comment-input').val('');\n    }\n    /**\n     * 提交评论\n     */\n    async submitComment() {\n        const commentText = this.$commentModal?.find('.dynamics-comment-input').val();\n        if (!commentText?.trim()) {\n            // 输入框抖动效果\n            this.$commentModal?.find('.dynamics-comment-input').addClass('shake');\n            setTimeout(() => {\n                this.$commentModal?.find('.dynamics-comment-input').removeClass('shake');\n            }, 500);\n            return;\n        }\n        if (this.currentPostNo === null) {\n            console.error('评论失败：未设置动态编号');\n            return;\n        }\n        // 禁用发送按钮，防止重复提交\n        const $submitBtn = this.$commentModal?.find('.dynamics-comment-submit');\n        $submitBtn?.prop('disabled', true).text('发送中...');\n        try {\n            // 在存储时使用固定的 \"user\" 字符串\n            const storageUserName = 'user';\n            // 格式化时间戳 - 与解析器保持一致，使用 HH:mm 格式\n            const formatTimestamp = (date) => {\n                const hh = String(date.getHours()).padStart(2, '0');\n                const mi = String(date.getMinutes()).padStart(2, '0');\n                return `${hh}:${mi}`;\n            };\n            const timestamp = formatTimestamp(new Date());\n            // 构建评论格式（使用 \"user\" 存储）\n            let commentLine;\n            if (this.currentReplyTo) {\n                // 回复格式：[评论_编号|user@被回复者|内容|时间]\n                commentLine = `[评论_${this.currentPostNo}|${storageUserName}@${this.currentReplyTo}|${commentText}|${timestamp}]`;\n            }\n            else {\n                // 直接评论格式：[评论_编号|user|内容|时间]\n                commentLine = `[评论_${this.currentPostNo}|${storageUserName}|${commentText}|${timestamp}]`;\n            }\n            // 使用通用方法查找目标楼层\n            const result = await this.findTargetMessage(this.currentMessageId, this.currentPostNo, '提交评论');\n            if (!result) {\n                throw new Error('无法找到目标楼层');\n            }\n            const targetMessage = result.message;\n            const targetMessageId = result.messageId;\n            let messageText = targetMessage.message || '';\n            // 查找[动态]容器\n            const startTag = '[动态]';\n            const endTag = '[/动态]';\n            const endIndex = messageText.indexOf(endTag);\n            if (endIndex === -1) {\n                // 目标楼层应该有[动态]容器，如果没有说明查找有问题\n                console.error(`楼层 ${targetMessageId} 未找到[动态]容器，消息内容:`, messageText.substring(0, 200));\n                throw new Error(`楼层 ${targetMessageId} 未找到[动态]容器，可能选择了错误的楼层`);\n            }\n            // 在[/动态]前插入评论（简单直接）\n            const beforeEnd = messageText.slice(0, endIndex).replace(/\\s*$/, '');\n            const afterEnd = messageText.slice(endIndex);\n            messageText = `${beforeEnd}\\n${commentLine}\\n${afterEnd}`;\n            // 更新消息\n            await setChatMessages([\n                {\n                    message_id: targetMessageId,\n                    message: messageText,\n                },\n            ], { refresh: 'none' });\n            console.log(`✅ [提交评论] 成功更新楼层 ${targetMessageId}`);\n            // 先保存当前的状态，因为hideCommentModal会清空它们\n            const postNo = this.currentPostNo;\n            const replyTo = this.currentReplyTo;\n            // 隐藏模态框\n            this.hideCommentModal();\n            // 动态添加评论到界面（不刷新整个界面）\n            await this.addCommentToUI(postNo, commentText, replyTo);\n            // === 方案B：事件桥接（延迟触发，避免重复渲染）===\n            // 派发原生事件（为未来扩展预留）\n            // 事件桥接：同时派发两种事件名，便于管理侧统一刷新内存\n            try {\n                const detail = {\n                    messageId: targetMessageId,\n                    postNo: this.currentPostNo,\n                    type: 'comment',\n                    action: 'add',\n                    user: 'user',\n                    content: commentText,\n                    timestamp: timestamp,\n                };\n                document.dispatchEvent(new CustomEvent('dynamicsInteractionAdded', { detail }));\n                document.dispatchEvent(new CustomEvent('dynamics:interactionAdded', { detail }));\n            }\n            catch (e) {\n                console.warn('⚠️ 派发评论事件失败:', e);\n            }\n        }\n        catch (error) {\n            console.error('提交评论失败:', error);\n        }\n        finally {\n            // 恢复发送按钮\n            $submitBtn?.prop('disabled', false).text('发送');\n        }\n    }\n    /**\n     * 销毁评论处理器\n     */\n    destroy() {\n        // 移除事件监听器\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsInterface').off('.comment');\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsInterface').off('.reply');\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsInterface').off('.commentDelete');\n        // 移除模态框\n        if (this.$commentModal) {\n            this.$commentModal.remove();\n            this.$commentModal = null;\n        }\n        // 清理状态\n        this.currentPostNo = null;\n        this.currentReplyTo = null;\n        this.currentMessageId = null;\n    }\n    /**\n     * 动态添加评论到UI（不刷新整个界面）\n     */\n    async addCommentToUI(postNo, content, replyTo) {\n        // 获取实际用户名用于显示\n        const userNameRaw = await triggerSlash('/pass {{user}}');\n        const displayUserName = (userNameRaw || '').trim() || '用户';\n        // 找到对应的帖子\n        const $post = jquery__WEBPACK_IMPORTED_MODULE_0___default()(`.dynamics-post[data-post-id=\"dynamics_${postNo}\"]`);\n        if (!$post.length)\n            return;\n        // 找到或创建评论区\n        let $comments = $post.find('.dynamics-comments');\n        if (!$comments.length) {\n            $comments = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div>', { class: 'dynamics-comments' });\n            $post.append($comments);\n        }\n        // 创建新评论元素（QQ空间风格）\n        const $comment = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div>', { class: 'dynamics-comment dynamics-comment-qq' });\n        // 添加标记，表示这是用户自己的评论，方便长按删除功能识别\n        $comment.attr('data-is-user', 'true');\n        $comment.attr('data-post-no', postNo.toString());\n        $comment.attr('data-comment-content', content);\n        const $content = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div>', { class: 'dynamics-comment-content' });\n        if (replyTo) {\n            // 回复格式\n            $content.append(jquery__WEBPACK_IMPORTED_MODULE_0___default()('<span>', {\n                class: 'dynamics-comment-name',\n                text: displayUserName,\n            }), jquery__WEBPACK_IMPORTED_MODULE_0___default()('<span>', {\n                text: ' 回复 ',\n                class: 'dynamics-comment-reply-indicator',\n            }), jquery__WEBPACK_IMPORTED_MODULE_0___default()('<span>', {\n                class: 'dynamics-comment-name dynamics-comment-reply-target',\n                text: replyTo,\n            }), jquery__WEBPACK_IMPORTED_MODULE_0___default()('<span>', { text: '：' }), jquery__WEBPACK_IMPORTED_MODULE_0___default()('<span>', {\n                class: 'dynamics-comment-text',\n                text: content,\n            }));\n        }\n        else {\n            // 普通评论\n            $content.append(jquery__WEBPACK_IMPORTED_MODULE_0___default()('<span>', {\n                class: 'dynamics-comment-name',\n                text: displayUserName,\n            }), jquery__WEBPACK_IMPORTED_MODULE_0___default()('<span>', { text: '：' }), jquery__WEBPACK_IMPORTED_MODULE_0___default()('<span>', {\n                class: 'dynamics-comment-text',\n                text: content,\n            }));\n        }\n        $comment.append($content);\n        // 添加淡入动画\n        $comment.hide();\n        $comments.append($comment);\n        $comment.fadeIn(300);\n        // 重要：确保事件委托能正常工作\n        // 触发一个自定义事件，通知评论已添加\n        $comment.trigger('comment:added');\n    }\n}\n/**\n * 格式化相对时间显示\n * @param timestamp 时间戳字符串 (YYYY-MM-DD HH:mm)\n * @returns 格式化后的时间字符串\n */\nfunction formatRelativeTime(timestamp) {\n    try {\n        const date = new Date(timestamp);\n        const now = new Date();\n        const diffMs = now.getTime() - date.getTime();\n        const diffMinutes = Math.floor(diffMs / 60000);\n        const diffHours = Math.floor(diffMs / 3600000);\n        const diffDays = Math.floor(diffMs / 86400000);\n        if (diffMinutes < 1) {\n            return '刚刚';\n        }\n        else if (diffMinutes < 60) {\n            return `${diffMinutes}分钟前`;\n        }\n        else if (diffHours < 24) {\n            return `${diffHours}小时前`;\n        }\n        else if (diffDays === 0) {\n            return `今天 ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`;\n        }\n        else if (diffDays === 1) {\n            return `昨天 ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`;\n        }\n        else if (diffDays < 7) {\n            return `${diffDays}天前`;\n        }\n        else {\n            const month = (date.getMonth() + 1).toString().padStart(2, '0');\n            const day = date.getDate().toString().padStart(2, '0');\n            const hours = date.getHours().toString().padStart(2, '0');\n            const minutes = date.getMinutes().toString().padStart(2, '0');\n            return `${month}-${day} ${hours}:${minutes}`;\n        }\n    }\n    catch (error) {\n        console.warn('时间格式化失败:', error);\n        return timestamp;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZHluYW1pY3MvY29tbWVudEhhbmRsZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7R0FHRztBQUVvQjtBQUVoQixNQUFNLGNBQWM7SUFDakIsWUFBWSxDQUFNO0lBQ2xCLGFBQWEsR0FBa0IsSUFBSSxDQUFDO0lBQ3BDLGFBQWEsR0FBa0IsSUFBSSxDQUFDO0lBQ3BDLGNBQWMsR0FBa0IsSUFBSSxDQUFDO0lBQ3JDLGdCQUFnQixHQUFrQixJQUFJLENBQUMsQ0FBQyxpQkFBaUI7SUFFakUsWUFBWSxZQUFpQjtRQUMzQixJQUFJLENBQUMsWUFBWSxHQUFHLFlBQVksQ0FBQztJQUNuQyxDQUFDO0lBRUQ7Ozs7OztPQU1HO0lBQ0ksS0FBSyxDQUFDLGlCQUFpQixDQUM1QixTQUF3QixFQUN4QixTQUF3QixJQUFJLEVBQzVCLFVBQWtCLElBQUk7UUFFdEIsSUFBSSxhQUFhLEdBQVEsSUFBSSxDQUFDO1FBQzlCLElBQUksZUFBZSxHQUFrQixJQUFJLENBQUM7UUFFMUMsaUNBQWlDO1FBQ2pDLElBQUksU0FBUyxLQUFLLElBQUksRUFBRSxDQUFDO1lBQ3ZCLE1BQU0sY0FBYyxHQUFHLGVBQWUsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUNsRCxJQUFJLGNBQWMsSUFBSSxjQUFjLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO2dCQUNoRCxhQUFhLEdBQUcsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNsQyxlQUFlLEdBQUcsU0FBUyxDQUFDO2dCQUM1QixPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sT0FBTyxZQUFZLGVBQWUsS0FBSyxDQUFDLENBQUM7Z0JBQzNELE9BQU8sRUFBRSxPQUFPLEVBQUUsYUFBYSxFQUFFLFNBQVMsRUFBRSxlQUFlLEVBQUUsQ0FBQztZQUNoRSxDQUFDO2lCQUFNLENBQUM7Z0JBQ04sT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLE9BQU8sWUFBWSxT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QUN4QixPQUFPLEdBQUcsUUFBUSxJQUFJLENBQUM7UUFDekIsQ0FBQzthQUFNLENBQUM7WUFDTixNQUFNLEtBQUssR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQ2hFLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQ3ZELE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQzFELE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQzlELE9BQU8sR0FBRyxLQUFLLElBQUksR0FBRyxJQUFJLEtBQUssSUFBSSxPQUFPLEVBQUUsQ0FBQztRQUMvQyxDQUFDO0lBQ0gsQ0FBQztJQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7UUFDZixPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUNoQyxPQUFPLFNBQVMsQ0FBQztJQUNuQixDQUFDO0FBQ0gsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZHluYW1pY3MvY29tbWVudEhhbmRsZXIudHM/Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICog5Yqo5oCB6K+E6K665aSE55CG5Zmo5qih5Z2XXG4gKiDotJ/otKPlpITnkIbor4TorrrnmoTovpPlhaXjgIHlrZjlgqjlkozmmL7npLpcbiAqL1xuXG5pbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuXG5leHBvcnQgY2xhc3MgQ29tbWVudEhhbmRsZXIge1xuICBwcml2YXRlIHNvdW5kTWFuYWdlcjogYW55O1xuICBwcml2YXRlICRjb21tZW50TW9kYWw6IEpRdWVyeSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGN1cnJlbnRQb3N0Tm86IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGN1cnJlbnRSZXBseVRvOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBjdXJyZW50TWVzc2FnZUlkOiBudW1iZXIgfCBudWxsID0gbnVsbDsgLy8g5re75Yqg77ya6K6w5b2V5Yqo5oCB5omA5Zyo55qE5qW85bGCSURcblxuICBjb25zdHJ1Y3Rvcihzb3VuZE1hbmFnZXI6IGFueSkge1xuICAgIHRoaXMuc291bmRNYW5hZ2VyID0gc291bmRNYW5hZ2VyO1xuICB9XG5cbiAgLyoqXG4gICAqIOmAmueUqOeahOi3qOalvOWxgua2iOaBr+afpeaJvuaWueazlVxuICAgKiBAcGFyYW0gbWVzc2FnZUlkIOebruagh+alvOWxgklE77yI5Y+v6YCJ77yJXG4gICAqIEBwYXJhbSBwb3N0Tm8g5Yqo5oCB57yW5Y+377yI5Y+v6YCJ77yM55So5LqO6YCa6L+H5Yqo5oCB57yW5Y+35p+l5om+77yJXG4gICAqIEBwYXJhbSBjb250ZXh0IOiwg+eUqOS4iuS4i+aWh++8iOeUqOS6juaXpeW/l++8iVxuICAgKiBAcmV0dXJucyDmib7liLDnmoTmtojmga/lr7nosaHlkozmpbzlsYJJRFxuICAgKi9cbiAgcHVibGljIGFzeW5jIGZpbmRUYXJnZXRNZXNzYWdlKFxuICAgIG1lc3NhZ2VJZDogbnVtYmVyIHwgbnVsbCxcbiAgICBwb3N0Tm86IG51bWJlciB8IG51bGwgPSBudWxsLFxuICAgIGNvbnRleHQ6IHN0cmluZyA9ICfmk43kvZwnLFxuICApOiBQcm9taXNlPHsgbWVzc2FnZTogYW55OyBtZXNzYWdlSWQ6IG51bWJlciB9IHwgbnVsbD4ge1xuICAgIGxldCB0YXJnZXRNZXNzYWdlOiBhbnkgPSBudWxsO1xuICAgIGxldCB0YXJnZXRNZXNzYWdlSWQ6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXG4gICAgLy8g8J+agCDkvJjlhYjnuqcx77ya5L2/55SoIG1lc3NhZ2UtaWQg55u05o6l6I635Y+W55uu5qCH5qW85bGCXG4gICAgaWYgKG1lc3NhZ2VJZCAhPT0gbnVsbCkge1xuICAgICAgY29uc3QgZGlyZWN0TWVzc2FnZXMgPSBnZXRDaGF0TWVzc2FnZXMobWVzc2FnZUlkKTtcbiAgICAgIGlmIChkaXJlY3RNZXNzYWdlcyAmJiBkaXJlY3RNZXNzYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRhcmdldE1lc3NhZ2UgPSBkaXJlY3RNZXNzYWdlc1swXTtcbiAgICAgICAgdGFyZ2V0TWVzc2FnZUlkID0gbWVzc2FnZUlkO1xuICAgICAgICBjb25zb2xlLmxvZyhg4pyFIFske2NvbnRleHR9XSDnm7TmjqXojrflj5bmpbzlsYIgJHt0YXJnZXRNZXNzYWdlSWR9IOaIkOWKn2ApO1xuICAgICAgICByZXR1cm4geyBtZXNzYWdlOiB0YXJnZXRNZXNzYWdlLCBtZXNzYWdlSWQ6IHRhcmdldE1lc3NhZ2VJZCB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS53YXJuKGDimqDvuI8gWyR7Y29udGV4dH1dIOebtOaOpeiOt+WPlualvOWxgiAke21lc3NhZ2VJZH0g5aSx6LSl77yM5bCd6K+V5aSH55So5pa55qGIYCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8g8J+UjSDkvJjlhYjnuqcy77ya5pCc57Si5omA5pyJ5raI5oGvXG4gICAgY29uc29sZS5sb2coYPCfk4sgWyR7Y29udGV4dH1dIOS9v+eUqOWkh+eUqOaWueahiO+8muaQnOe0ouaJgOaciea2iOaBr2ApO1xuICAgIGNvbnN0IGFsbE1lc3NhZ2VzID0gZ2V0Q2hhdE1lc3NhZ2VzKCcwLXt7bGFzdE1lc3NhZ2VJZH19Jyk7XG5cbiAgICAvLyDlpoLmnpzmnIkgbWVzc2FnZS1pZCDkvYbnm7TmjqXojrflj5blpLHotKXvvIzlnKjmiYDmnInmtojmga/kuK3mn6Xmib5cbiAgICBpZiAobWVzc2FnZUlkICE9PSBudWxsKSB7XG4gICAgICB0YXJnZXRNZXNzYWdlID0gYWxsTWVzc2FnZXMuZmluZCgobXNnOiBhbnkpID0+IG1zZy5tZXNzYWdlX2lkID09PSBtZXNzYWdlSWQpO1xuICAgICAgaWYgKHRhcmdldE1lc3NhZ2UpIHtcbiAgICAgICAgdGFyZ2V0TWVzc2FnZUlkID0gbWVzc2FnZUlkO1xuICAgICAgICBjb25zb2xlLmxvZyhg4pyFIFske2NvbnRleHR9XSDlnKjmiYDmnInmtojmga/kuK3mib7liLDmpbzlsYIgJHt0YXJnZXRNZXNzYWdlSWR9YCk7XG4gICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IHRhcmdldE1lc3NhZ2UsIG1lc3NhZ2VJZDogdGFyZ2V0TWVzc2FnZUlkIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8g5aaC5p6c5pyJ5Yqo5oCB57yW5Y+377yM6YCa6L+H5Yqo5oCB57yW5Y+35p+l5om+XG4gICAgaWYgKHBvc3RObyAhPT0gbnVsbCAmJiAhdGFyZ2V0TWVzc2FnZSkge1xuICAgICAgZm9yIChjb25zdCBtc2cgb2YgYWxsTWVzc2FnZXMpIHtcbiAgICAgICAgaWYgKG1zZy5tZXNzYWdlICYmIHR5cGVvZiBtc2cubWVzc2FnZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBjb25zdCBkeW5hbWljUGF0dGVybiA9IG5ldyBSZWdFeHAoYFxcXFxb5Yqo5oCBXyR7cG9zdE5vfVteXFxcXF1dKlxcXFxdYCwgJ20nKTtcbiAgICAgICAgICBpZiAoZHluYW1pY1BhdHRlcm4udGVzdChtc2cubWVzc2FnZSkpIHtcbiAgICAgICAgICAgIHRhcmdldE1lc3NhZ2UgPSBtc2c7XG4gICAgICAgICAgICB0YXJnZXRNZXNzYWdlSWQgPSBtc2cubWVzc2FnZV9pZDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDinIUgWyR7Y29udGV4dH1dIOmAmui/h+WKqOaAgee8luWPt+aJvuWIsOalvOWxgiAke3RhcmdldE1lc3NhZ2VJZH1gKTtcbiAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IHRhcmdldE1lc3NhZ2UsIG1lc3NhZ2VJZDogdGFyZ2V0TWVzc2FnZUlkIH07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8g8J+boe+4jyDkvJjlhYjnuqcz77ya5YWc5bqV5pa55qGIIC0g5L2/55So5b2T5YmN5qW85bGCXG4gICAgY29uc3QgbWVzc2FnZXMgPSBnZXRDaGF0TWVzc2FnZXMoLTEpO1xuICAgIGlmIChtZXNzYWdlcyAmJiBtZXNzYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgICB0YXJnZXRNZXNzYWdlID0gbWVzc2FnZXNbMF07XG4gICAgICB0YXJnZXRNZXNzYWdlSWQgPSB0YXJnZXRNZXNzYWdlLm1lc3NhZ2VfaWQ7XG4gICAgICBjb25zb2xlLmxvZyhg4oS577iPIFske2NvbnRleHR9XSDkvb/nlKjlvZPliY3mpbzlsYIgJHt0YXJnZXRNZXNzYWdlSWR9IOS9nOS4uuWFnOW6lWApO1xuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogdGFyZ2V0TWVzc2FnZSwgbWVzc2FnZUlkOiB0YXJnZXRNZXNzYWdlSWQgYXMgbnVtYmVyIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICog5Yid5aeL5YyW6K+E6K665Yqf6IO9XG4gICAqL1xuICBwdWJsaWMgaW5pdGlhbGl6ZSgpOiB2b2lkIHtcbiAgICB0aGlzLmluaXRpYWxpemVDb21tZW50Q2xpY2tIYW5kbGVyKCk7XG4gICAgdGhpcy5pbml0aWFsaXplUmVwbHlDbGlja0hhbmRsZXIoKTtcbiAgICB0aGlzLmluaXRpYWxpemVMb25nUHJlc3NIYW5kbGVyKCk7IC8vIOa3u+WKoOmVv+aMieWIoOmZpOWkhOeQhuWZqOWIneWni+WMllxuICAgIHRoaXMuY3JlYXRlQ29tbWVudE1vZGFsKCk7XG4gIH1cblxuICAvKipcbiAgICog5Yid5aeL5YyW6K+E6K665Zu+5qCH54K55Ye75aSE55CG5ZmoXG4gICAqL1xuICBwcml2YXRlIGluaXRpYWxpemVDb21tZW50Q2xpY2tIYW5kbGVyKCk6IHZvaWQge1xuICAgICQoJyNkeW5hbWljc0ludGVyZmFjZScpXG4gICAgICAub2ZmKCdjbGljay5jb21tZW50JylcbiAgICAgIC5vbignY2xpY2suY29tbWVudCcsICcuZHluYW1pY3MtcG9zdC1hY3Rpb25bZGF0YS1hY3Rpb249XCJjb21tZW50XCJdJywgZSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICBjb25zdCAkYWN0aW9uID0gJCgoZSBhcyBhbnkpLmN1cnJlbnRUYXJnZXQpO1xuICAgICAgICBjb25zdCAkcG9zdCA9ICRhY3Rpb24uY2xvc2VzdCgnLmR5bmFtaWNzLXBvc3QnKTtcblxuICAgICAgICBpZiAoISRwb3N0Lmxlbmd0aCkgcmV0dXJuO1xuXG4gICAgICAgIC8vIOiOt+WPluWKqOaAgee8luWPt1xuICAgICAgICBjb25zdCBpZEF0dHIgPSAkcG9zdC5hdHRyKCdkYXRhLXBvc3QtaWQnKSB8fCAnJztcbiAgICAgICAgbGV0IHBvc3RObzogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gICAgICAgIGNvbnN0IG0gPSBpZEF0dHIubWF0Y2goL15keW5hbWljc18oXFxkKykvKTtcbiAgICAgICAgaWYgKG0pIHBvc3RObyA9IHBhcnNlSW50KG1bMV0sIDEwKTtcbiAgICAgICAgaWYgKCFwb3N0Tm8pIHtcbiAgICAgICAgICBjb25zdCBub0F0dHIgPSAkcG9zdC5hdHRyKCdkYXRhLXBvc3Qtbm8nKTtcbiAgICAgICAgICBpZiAobm9BdHRyKSBwb3N0Tm8gPSBwYXJzZUludChub0F0dHIsIDEwKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXBvc3RObykge1xuICAgICAgICAgIGNvbnNvbGUud2Fybign6K+E6K665aSx6LSl77ya5pyq6IO96Kej5p6Q5Yqo5oCB57yW5Y+3Jyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g6I635Y+W5Yqo5oCB5omA5Zyo55qE5qW85bGCSURcbiAgICAgICAgY29uc3QgbWVzc2FnZUlkQXR0ciA9ICRwb3N0LmF0dHIoJ2RhdGEtbWVzc2FnZS1pZCcpO1xuICAgICAgICBjb25zdCBtZXNzYWdlSWQgPSBtZXNzYWdlSWRBdHRyID8gcGFyc2VJbnQobWVzc2FnZUlkQXR0ciwgMTApIDogbnVsbDtcblxuICAgICAgICAvLyDmkq3mlL7ngrnlh7vpn7PmlYhcbiAgICAgICAgaWYgKHRoaXMuc291bmRNYW5hZ2VyPy5wbGF5U291bmQpIHtcbiAgICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5U291bmQoJ2Vtb2ppJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyDmmL7npLror4TorrrovpPlhaXmoYbvvIzkvKDlhaXmpbzlsYJJRFxuICAgICAgICB0aGlzLnNob3dDb21tZW50TW9kYWwocG9zdE5vLCBudWxsLCBtZXNzYWdlSWQpO1xuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog5Yid5aeL5YyW5Zue5aSN54K55Ye75aSE55CG5ZmoXG4gICAqL1xuICBwcml2YXRlIGluaXRpYWxpemVSZXBseUNsaWNrSGFuZGxlcigpOiB2b2lkIHtcbiAgICAkKCcjZHluYW1pY3NJbnRlcmZhY2UnKVxuICAgICAgLm9mZignY2xpY2sucmVwbHknKVxuICAgICAgLm9uKCdjbGljay5yZXBseScsICcuZHluYW1pY3MtY29tbWVudCcsIGUgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgY29uc3QgJGNvbW1lbnQgPSAkKChlIGFzIGFueSkuY3VycmVudFRhcmdldCk7XG4gICAgICAgIGNvbnN0ICRwb3N0ID0gJGNvbW1lbnQuY2xvc2VzdCgnLmR5bmFtaWNzLXBvc3QnKTtcblxuICAgICAgICBpZiAoISRwb3N0Lmxlbmd0aCkgcmV0dXJuO1xuXG4gICAgICAgIC8vIOiOt+WPluWKqOaAgee8luWPt1xuICAgICAgICBjb25zdCBpZEF0dHIgPSAkcG9zdC5hdHRyKCdkYXRhLXBvc3QtaWQnKSB8fCAnJztcbiAgICAgICAgbGV0IHBvc3RObzogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gICAgICAgIGNvbnN0IG0gPSBpZEF0dHIubWF0Y2goL15keW5hbWljc18oXFxkKykvKTtcbiAgICAgICAgaWYgKG0pIHBvc3RObyA9IHBhcnNlSW50KG1bMV0sIDEwKTtcbiAgICAgICAgaWYgKCFwb3N0Tm8pIHtcbiAgICAgICAgICBjb25zdCBub0F0dHIgPSAkcG9zdC5hdHRyKCdkYXRhLXBvc3Qtbm8nKTtcbiAgICAgICAgICBpZiAobm9BdHRyKSBwb3N0Tm8gPSBwYXJzZUludChub0F0dHIsIDEwKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXBvc3RObykge1xuICAgICAgICAgIGNvbnNvbGUud2Fybign5Zue5aSN5aSx6LSl77ya5pyq6IO96Kej5p6Q5Yqo5oCB57yW5Y+3Jyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g6I635Y+W5Yqo5oCB5omA5Zyo55qE5qW85bGCSURcbiAgICAgICAgY29uc3QgbWVzc2FnZUlkQXR0ciA9ICRwb3N0LmF0dHIoJ2RhdGEtbWVzc2FnZS1pZCcpO1xuICAgICAgICBjb25zdCBtZXNzYWdlSWQgPSBtZXNzYWdlSWRBdHRyID8gcGFyc2VJbnQobWVzc2FnZUlkQXR0ciwgMTApIDogbnVsbDtcblxuICAgICAgICAvLyDojrflj5booqvlm57lpI3ogIXlkI3np7DvvIjlupTor6XmmK/or4TorrrnmoTkvZzogIXvvIzogIzkuI3mmK/mlbTkuKror4TorrrmlofmnKzvvIlcbiAgICAgICAgLy8g5aaC5p6c6K+E6K665pivIFwiQSDlm57lpI0gQlwiIOagvOW8j++8jOaIkeS7rOW6lOivpeWbnuWkjSBBXG4gICAgICAgIGNvbnN0ICRjb21tZW50TmFtZSA9ICRjb21tZW50LmZpbmQoJy5keW5hbWljcy1jb21tZW50LW5hbWUnKS5maXJzdCgpO1xuICAgICAgICBjb25zdCByZXBseVRvID0gJGNvbW1lbnROYW1lLnRleHQoKS50cmltKCk7XG4gICAgICAgIGlmICghcmVwbHlUbykgcmV0dXJuO1xuXG4gICAgICAgIC8vIOaSreaUvueCueWHu+mfs+aViFxuICAgICAgICBpZiAodGhpcy5zb3VuZE1hbmFnZXI/LnBsYXlTb3VuZCkge1xuICAgICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXlTb3VuZCgnY2xpY2snKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOaYvuekuuWbnuWkjei+k+WFpeahhu+8jOS8oOWFpealvOWxgklEXG4gICAgICAgIHRoaXMuc2hvd0NvbW1lbnRNb2RhbChwb3N0Tm8sIHJlcGx5VG8sIG1lc3NhZ2VJZCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliJ3lp4vljJbplb/mjInliKDpmaTlpITnkIblmahcbiAgICovXG4gIHByaXZhdGUgaW5pdGlhbGl6ZUxvbmdQcmVzc0hhbmRsZXIoKTogdm9pZCB7XG4gICAgbGV0IHByZXNzVGltZXI6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG4gICAgbGV0IGlzTG9uZ1ByZXNzID0gZmFsc2U7XG5cbiAgICAkKCcjZHluYW1pY3NJbnRlcmZhY2UnKVxuICAgICAgLm9mZignbW91c2Vkb3duLmNvbW1lbnREZWxldGUgdG91Y2hzdGFydC5jb21tZW50RGVsZXRlJylcbiAgICAgIC5vbignbW91c2Vkb3duLmNvbW1lbnREZWxldGUgdG91Y2hzdGFydC5jb21tZW50RGVsZXRlJywgJy5keW5hbWljcy1jb21tZW50JywgZSA9PiB7XG4gICAgICAgIGNvbnN0ICRjb21tZW50ID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICAgICAgICBjb25zdCAkcG9zdCA9ICRjb21tZW50LmNsb3Nlc3QoJy5keW5hbWljcy1wb3N0Jyk7XG5cbiAgICAgICAgLy8g5qOA5p+l5piv5ZCm5piv55So5oi36Ieq5bex55qE6K+E6K6677yI5byC5q2l77yJXG4gICAgICAgIHRoaXMuY2hlY2tJZlVzZXJDb21tZW50KCRwb3N0LCAkY29tbWVudCkudGhlbihpc1VzZXJDb21tZW50ID0+IHtcbiAgICAgICAgICBpZiAoIWlzVXNlckNvbW1lbnQpIHtcbiAgICAgICAgICAgIC8vIOWmguaenOS4jeaYr+eUqOaIt+ivhOiuuu+8jOa4hemZpOiuoeaXtuWZqFxuICAgICAgICAgICAgaWYgKHByZXNzVGltZXIpIHtcbiAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHByZXNzVGltZXIpO1xuICAgICAgICAgICAgICBwcmVzc1RpbWVyID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRjb21tZW50LnJlbW92ZUNsYXNzKCdjb21tZW50LWxvbmctcHJlc3NpbmcnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOazqOaEj++8muiuoeaXtuWZqOS8mue7p+e7rei/kOihjO+8jOWcqOWbnuiwg+S4reajgOafpVxuXG4gICAgICAgIGlzTG9uZ1ByZXNzID0gZmFsc2U7XG5cbiAgICAgICAgLy8g5re75Yqg6ZW/5oyJ5Lit55qE6KeG6KeJ5Y+N6aaIXG4gICAgICAgICRjb21tZW50LmFkZENsYXNzKCdjb21tZW50LWxvbmctcHJlc3NpbmcnKTtcblxuICAgICAgICAvLyDlvIDlp4vorqHml7ZcbiAgICAgICAgcHJlc3NUaW1lciA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGlzTG9uZ1ByZXNzID0gdHJ1ZTtcblxuICAgICAgICAgIC8vIOenu+mZpOmVv+aMieagt+W8j1xuICAgICAgICAgICRjb21tZW50LnJlbW92ZUNsYXNzKCdjb21tZW50LWxvbmctcHJlc3NpbmcnKTtcblxuICAgICAgICAgIC8vIOaYvuekuuWIoOmZpOehruiupFxuICAgICAgICAgIGlmIChjb25maXJtKCfnoa7lrpropoHliKDpmaTov5nmnaHor4TorrrlkJfvvJ8nKSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5kZWxldGVDb21tZW50KCRwb3N0LCAkY29tbWVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCA4MDApOyAvLyDplb/mjIk4MDBtc+inpuWPkVxuICAgICAgfSlcbiAgICAgIC5vZmYoJ21vdXNldXAuY29tbWVudERlbGV0ZSB0b3VjaGVuZC5jb21tZW50RGVsZXRlIG1vdXNlbGVhdmUuY29tbWVudERlbGV0ZScpXG4gICAgICAub24oJ21vdXNldXAuY29tbWVudERlbGV0ZSB0b3VjaGVuZC5jb21tZW50RGVsZXRlIG1vdXNlbGVhdmUuY29tbWVudERlbGV0ZScsICcuZHluYW1pY3MtY29tbWVudCcsIGUgPT4ge1xuICAgICAgICAvLyDmuIXpmaTorqHml7blmahcbiAgICAgICAgaWYgKHByZXNzVGltZXIpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQocHJlc3NUaW1lcik7XG4gICAgICAgICAgcHJlc3NUaW1lciA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyDnp7vpmaTplb/mjInmoLflvI9cbiAgICAgICAgJChlLmN1cnJlbnRUYXJnZXQpLnJlbW92ZUNsYXNzKCdjb21tZW50LWxvbmctcHJlc3NpbmcnKTtcblxuICAgICAgICAvLyDlpoLmnpzmmK/plb/mjInvvIzpmLvmraLngrnlh7vkuovku7ZcbiAgICAgICAgaWYgKGlzTG9uZ1ByZXNzKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgaXNMb25nUHJlc3MgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog5qOA5p+l6K+E6K665piv5ZCm5piv5b2T5YmN55So5oi35Y+R55qE77yI5pSv5oyB6Leo5qW85bGC77yJXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGNoZWNrSWZVc2VyQ29tbWVudCgkcG9zdDogSlF1ZXJ5LCAkY29tbWVudDogSlF1ZXJ5KTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIOS8mOWFiOajgOafpeaYr+WQpuacieagh+iusO+8iOaWsOa3u+WKoOeahOivhOiuuuS8muaciei/meS4quagh+iusO+8iVxuICAgICAgaWYgKCRjb21tZW50LmF0dHIoJ2RhdGEtaXMtdXNlcicpID09PSAndHJ1ZScpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIOiOt+WPluWKqOaAgee8luWPt1xuICAgICAgY29uc3QgaWRBdHRyID0gJHBvc3QuYXR0cignZGF0YS1wb3N0LWlkJykgfHwgJyc7XG4gICAgICBsZXQgcG9zdE5vOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgICAgIGNvbnN0IG0gPSBpZEF0dHIubWF0Y2goL15keW5hbWljc18oXFxkKykvKTtcbiAgICAgIGlmIChtKSBwb3N0Tm8gPSBwYXJzZUludChtWzFdLCAxMCk7XG4gICAgICBpZiAoIXBvc3RObykge1xuICAgICAgICBjb25zdCBub0F0dHIgPSAkcG9zdC5hdHRyKCdkYXRhLXBvc3Qtbm8nKTtcbiAgICAgICAgaWYgKG5vQXR0cikgcG9zdE5vID0gcGFyc2VJbnQobm9BdHRyLCAxMCk7XG4gICAgICB9XG4gICAgICBpZiAoIXBvc3RObykgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAvLyDojrflj5bliqjmgIHmiYDlnKjnmoTmpbzlsYJJRO+8iOeUqOS6jui3qOalvOWxguajgOafpe+8iVxuICAgICAgY29uc3QgbWVzc2FnZUlkQXR0ciA9ICRwb3N0LmF0dHIoJ2RhdGEtbWVzc2FnZS1pZCcpO1xuICAgICAgY29uc3QgbWVzc2FnZUlkID0gbWVzc2FnZUlkQXR0ciA/IHBhcnNlSW50KG1lc3NhZ2VJZEF0dHIsIDEwKSA6IG51bGw7XG5cbiAgICAgIC8vIOiOt+WPluivhOiuuuWGheWuuVxuICAgICAgY29uc3QgJGNvbW1lbnRDb250ZW50ID0gJGNvbW1lbnQuZmluZCgnLmR5bmFtaWNzLWNvbW1lbnQtdGV4dCcpO1xuICAgICAgY29uc3QgY29tbWVudFRleHQgPSAkY29tbWVudENvbnRlbnQudGV4dCgpLnRyaW0oKTtcblxuICAgICAgLy8g5L2/55So6YCa55So5pa55rOV5p+l5om+55uu5qCH5qW85bGCXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmZpbmRUYXJnZXRNZXNzYWdlKG1lc3NhZ2VJZCwgcG9zdE5vLCAn5qOA5p+l6K+E6K66Jyk7XG4gICAgICBpZiAoIXJlc3VsdCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICBjb25zdCBtZXNzYWdlVGV4dCA9IHJlc3VsdC5tZXNzYWdlLm1lc3NhZ2UgfHwgJyc7XG5cbiAgICAgIC8vIOaehOW7uuWMuemFjeaooeW8j++8muajgOafpeaYr+WQpuaYryB1c2VyIOaIliB1c2VyQOafkOS6uiDnmoTor4TorrpcbiAgICAgIGNvbnN0IGVzY2FwZVJlZ0V4cCA9IChzdHI6IHN0cmluZykgPT4gc3RyLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCAnXFxcXCQmJyk7XG4gICAgICBjb25zdCBlc2NhcGVkQ29udGVudCA9IGVzY2FwZVJlZ0V4cChjb21tZW50VGV4dCk7XG5cbiAgICAgIC8vIOWMuemFjeagvOW8j++8mlvor4Torrpf57yW5Y+3fHVzZXJ85YaF5a65fOaXtumXtF0g5oiWIFvor4Torrpf57yW5Y+3fHVzZXJA5p+Q5Lq6fOWGheWuuXzml7bpl7RdXG4gICAgICBjb25zdCB1c2VyQ29tbWVudFJlID0gbmV3IFJlZ0V4cChgXlxcXFxb6K+E6K66XyR7cG9zdE5vfVxcXFx8dXNlcihAW158XSspP1xcXFx8JHtlc2NhcGVkQ29udGVudH1cXFxcfFteXFxcXF1dK1xcXFxdXFxcXHMqJGAsICdtJyk7XG5cbiAgICAgIC8vIOWmguaenOaJvuWIsOWMuemFje+8jOivtOaYjuaYr+eUqOaIt+eahOivhOiuulxuICAgICAgY29uc3QgaXNVc2VyQ29tbWVudCA9IHVzZXJDb21tZW50UmUudGVzdChtZXNzYWdlVGV4dCk7XG5cbiAgICAgIGlmIChpc1VzZXJDb21tZW50KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDinIUgW+ajgOafpeivhOiuul0g56Gu6K6k5piv55So5oi355qE6K+E6K66YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhg4p2MIFvmo4Dmn6Xor4TorrpdIOS4jeaYr+eUqOaIt+eahOivhOiuumApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gaXNVc2VyQ29tbWVudDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign5qOA5p+l55So5oi36K+E6K665aSx6LSlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5Yig6Zmk6K+E6K6677yI5pSv5oyB6Leo5qW85bGC77yJXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGRlbGV0ZUNvbW1lbnQoJHBvc3Q6IEpRdWVyeSwgJGNvbW1lbnQ6IEpRdWVyeSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyDojrflj5bliqjmgIHnvJblj7dcbiAgICAgIGNvbnN0IGlkQXR0ciA9ICRwb3N0LmF0dHIoJ2RhdGEtcG9zdC1pZCcpIHx8ICcnO1xuICAgICAgbGV0IHBvc3RObzogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gICAgICBjb25zdCBtID0gaWRBdHRyLm1hdGNoKC9eZHluYW1pY3NfKFxcZCspLyk7XG4gICAgICBpZiAobSkgcG9zdE5vID0gcGFyc2VJbnQobVsxXSwgMTApO1xuICAgICAgaWYgKCFwb3N0Tm8pIHtcbiAgICAgICAgY29uc3Qgbm9BdHRyID0gJHBvc3QuYXR0cignZGF0YS1wb3N0LW5vJyk7XG4gICAgICAgIGlmIChub0F0dHIpIHBvc3RObyA9IHBhcnNlSW50KG5vQXR0ciwgMTApO1xuICAgICAgfVxuICAgICAgaWYgKCFwb3N0Tm8pIHtcbiAgICAgICAgY29uc29sZS53YXJuKCfliKDpmaTlpLHotKXvvJrmnKrog73op6PmnpDliqjmgIHnvJblj7cnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyDojrflj5bliqjmgIHmiYDlnKjnmoTmpbzlsYJJRO+8iOeUqOS6jui3qOalvOWxguWIoOmZpO+8iVxuICAgICAgY29uc3QgbWVzc2FnZUlkQXR0ciA9ICRwb3N0LmF0dHIoJ2RhdGEtbWVzc2FnZS1pZCcpO1xuICAgICAgY29uc3QgbWVzc2FnZUlkID0gbWVzc2FnZUlkQXR0ciA/IHBhcnNlSW50KG1lc3NhZ2VJZEF0dHIsIDEwKSA6IG51bGw7XG5cbiAgICAgIC8vIOiOt+WPluivhOiuuuWGheWuueS7peivhuWIq+imgeWIoOmZpOeahOivhOiuulxuICAgICAgY29uc3QgJGNvbW1lbnRDb250ZW50ID0gJGNvbW1lbnQuZmluZCgnLmR5bmFtaWNzLWNvbW1lbnQtdGV4dCcpO1xuICAgICAgY29uc3QgY29tbWVudFRleHQgPSAkY29tbWVudENvbnRlbnQudGV4dCgpLnRyaW0oKTtcblxuICAgICAgLy8g5L2/55So6YCa55So5pa55rOV5p+l5om+55uu5qCH5qW85bGCXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmZpbmRUYXJnZXRNZXNzYWdlKG1lc3NhZ2VJZCwgcG9zdE5vLCAn5Yig6ZmkJyk7XG4gICAgICBpZiAoIXJlc3VsdCkgcmV0dXJuO1xuXG4gICAgICBsZXQgbWVzc2FnZVRleHQgPSByZXN1bHQubWVzc2FnZS5tZXNzYWdlIHx8ICcnO1xuICAgICAgY29uc3QgdGFyZ2V0TWVzc2FnZUlkID0gcmVzdWx0Lm1lc3NhZ2VJZDtcblxuICAgICAgLy8g5p6E5bu66K+E6K665Yy56YWN5qih5byPXG4gICAgICAvLyDor4TorrrmoLzlvI/lj6/og73mmK/vvJpb6K+E6K66X+e8luWPt3x1c2VyfOWGheWuuXzml7bpl7RdIOaIliBb6K+E6K66X+e8luWPt3x1c2VyQOafkOS6unzlhoXlrrl85pe26Ze0XVxuICAgICAgY29uc3QgZXNjYXBlUmVnRXhwID0gKHN0cjogc3RyaW5nKSA9PiBzdHIucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csICdcXFxcJCYnKTtcbiAgICAgIGNvbnN0IGVzY2FwZWRDb250ZW50ID0gZXNjYXBlUmVnRXhwKGNvbW1lbnRUZXh0KTtcblxuICAgICAgLy8g5Yy56YWN6K+l6K+E6K6655qE5q2j5YiZ77yI5pSv5oyB55u05o6l6K+E6K665ZKM5Zue5aSN5Lik56eN5qC85byP77yJXG4gICAgICBjb25zdCBjb21tZW50TGluZVJlID0gbmV3IFJlZ0V4cChgXlxcXFxb6K+E6K66XyR7cG9zdE5vfVxcXFx8dXNlcihAW158XSspP1xcXFx8JHtlc2NhcGVkQ29udGVudH1cXFxcfFteXFxcXF1dK1xcXFxdXFxcXHMqJGAsICdtJyk7XG5cbiAgICAgIGlmIChjb21tZW50TGluZVJlLnRlc3QobWVzc2FnZVRleHQpKSB7XG4gICAgICAgIC8vIOWIoOmZpOivpeivhOiuuuihjFxuICAgICAgICBtZXNzYWdlVGV4dCA9IG1lc3NhZ2VUZXh0LnJlcGxhY2UoY29tbWVudExpbmVSZSwgJycpLnJlcGxhY2UoL1xcbnsyLH0vZywgJ1xcbicpO1xuXG4gICAgICAgIC8vIOabtOaWsOa2iOaBr++8iOS9v+eUqOaJvuWIsOeahOebruagh+alvOWxgklE77yJXG4gICAgICAgIGF3YWl0IHNldENoYXRNZXNzYWdlcyhcbiAgICAgICAgICBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIG1lc3NhZ2VfaWQ6IHRhcmdldE1lc3NhZ2VJZCxcbiAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVRleHQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgeyByZWZyZXNoOiAnbm9uZScgfSxcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zb2xlLmxvZyhg4pyFIFvliKDpmaRdIOaIkOWKn+WIoOmZpOalvOWxgiAke3RhcmdldE1lc3NhZ2VJZH0g5Lit55qE6K+E6K66YCk7XG5cbiAgICAgICAgLy8g5LuOVUnkuK3np7vpmaTor4TorrrvvIjluKbliqjnlLvvvIlcbiAgICAgICAgJGNvbW1lbnQuZmFkZU91dCgzMDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuXG4gICAgICAgICAgLy8g5aaC5p6c6K+E6K665Yy656m65LqG77yM56e76Zmk6K+E6K665Yy6XG4gICAgICAgICAgY29uc3QgJGNvbW1lbnRzID0gJHBvc3QuZmluZCgnLmR5bmFtaWNzLWNvbW1lbnRzJyk7XG4gICAgICAgICAgaWYgKCRjb21tZW50cy5jaGlsZHJlbigpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgJGNvbW1lbnRzLnJlbW92ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g5pKt5pS+5Yig6Zmk6Z+z5pWIXG4gICAgICAgIGlmICh0aGlzLnNvdW5kTWFuYWdlcj8ucGxheVNvdW5kKSB7XG4gICAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdkZWxldGUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOS6i+S7tuahpeaOpe+8muivhOiuuuWIoOmZpOWQjumAmuefpeeuoeeQhuS+p+WIt+aWsOWGheWtmFxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGRldGFpbCA9IHtcbiAgICAgICAgICAgIG1lc3NhZ2VJZDogdGFyZ2V0TWVzc2FnZUlkLFxuICAgICAgICAgICAgcG9zdE5vOiBwb3N0Tm8gYXMgbnVtYmVyLFxuICAgICAgICAgICAgdHlwZTogJ2NvbW1lbnQnLFxuICAgICAgICAgICAgYWN0aW9uOiAncmVtb3ZlJyxcbiAgICAgICAgICB9O1xuICAgICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdkeW5hbWljc0ludGVyYWN0aW9uQWRkZWQnLCB7IGRldGFpbCB9KSk7XG4gICAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2R5bmFtaWNzOmludGVyYWN0aW9uQWRkZWQnLCB7IGRldGFpbCB9KSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyDmtL7lj5Hor4TorrrliKDpmaTkuovku7blpLHotKU6JywgZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUud2Fybihg4pqg77iPIFvliKDpmaRdIOWcqOalvOWxgiAke3RhcmdldE1lc3NhZ2VJZH0g5Lit5pyq5om+5Yiw6KaB5Yig6Zmk55qE6K+E6K66YCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+WIoOmZpOivhOiuuuWksei0pTonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOWIm+W7uuivhOiuuuaooeaAgeahhu+8iOWcqOaJi+acuuWuueWZqOWGhe+8iVxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVDb21tZW50TW9kYWwoKTogdm9pZCB7XG4gICAgLy8g5aaC5p6c5qih5oCB5qGG5bey5a2Y5Zyo77yM5YWI56e76ZmkXG4gICAgaWYgKHRoaXMuJGNvbW1lbnRNb2RhbCkge1xuICAgICAgdGhpcy4kY29tbWVudE1vZGFsLnJlbW92ZSgpO1xuICAgIH1cblxuICAgIC8vIOWIm+W7uuaooeaAgeahhkhUTUznu5PmnoRcbiAgICBjb25zdCBtb2RhbEh0bWwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwiZHluYW1pY3MtY29tbWVudC1tb2RhbFwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImR5bmFtaWNzLWNvbW1lbnQtYmFja2Ryb3BcIj48L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImR5bmFtaWNzLWNvbW1lbnQtZGlhbG9nXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImR5bmFtaWNzLWNvbW1lbnQtaGVhZGVyXCI+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImR5bmFtaWNzLWNvbW1lbnQtdGl0bGVcIj7lj5Hooajor4Torro8L3NwYW4+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZHluYW1pY3MtY29tbWVudC1jbG9zZVwiPuKclTwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJkeW5hbWljcy1jb21tZW50LWJvZHlcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkeW5hbWljcy1jb21tZW50LXJlcGx5LWluZm9cIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+XG4gICAgICAgICAgICAgIOWbnuWkjee7mTogPHNwYW4gY2xhc3M9XCJkeW5hbWljcy1jb21tZW50LXJlcGx5LW5hbWVcIj48L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDx0ZXh0YXJlYSBjbGFzcz1cImR5bmFtaWNzLWNvbW1lbnQtaW5wdXRcIiBcbiAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIuWGmeS4i+S9oOeahOivhOiuui4uLlwiIFxuICAgICAgICAgICAgICAgICAgICAgIHJvd3M9XCI0XCI+PC90ZXh0YXJlYT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZHluYW1pY3MtY29tbWVudC1mb290ZXJcIj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJkeW5hbWljcy1jb21tZW50LWNhbmNlbFwiPuWPlua2iDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImR5bmFtaWNzLWNvbW1lbnQtc3VibWl0XCI+5Y+R6YCBPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYDtcblxuICAgIC8vIOWwhuaooeaAgeahhua3u+WKoOWIsOWKqOaAgeeVjOmdouWuueWZqOWGhVxuICAgIHRoaXMuJGNvbW1lbnRNb2RhbCA9ICQobW9kYWxIdG1sKTtcbiAgICAkKCcjZHluYW1pY3NJbnRlcmZhY2UnKS5hcHBlbmQodGhpcy4kY29tbWVudE1vZGFsKTtcblxuICAgIC8vIOe7keWumuS6i+S7tlxuICAgIHRoaXMuYmluZE1vZGFsRXZlbnRzKCk7XG4gIH1cblxuICAvKipcbiAgICog57uR5a6a5qih5oCB5qGG5LqL5Lu2XG4gICAqL1xuICBwcml2YXRlIGJpbmRNb2RhbEV2ZW50cygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuJGNvbW1lbnRNb2RhbCkgcmV0dXJuO1xuXG4gICAgLy8g5YWz6Zet5oyJ6ZKuXG4gICAgdGhpcy4kY29tbWVudE1vZGFsLmZpbmQoJy5keW5hbWljcy1jb21tZW50LWNsb3NlJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5oaWRlQ29tbWVudE1vZGFsKCk7XG4gICAgfSk7XG5cbiAgICAvLyDlj5bmtojmjInpkq5cbiAgICB0aGlzLiRjb21tZW50TW9kYWwuZmluZCgnLmR5bmFtaWNzLWNvbW1lbnQtY2FuY2VsJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5oaWRlQ29tbWVudE1vZGFsKCk7XG4gICAgfSk7XG5cbiAgICAvLyDlj5HpgIHmjInpkq5cbiAgICB0aGlzLiRjb21tZW50TW9kYWwuZmluZCgnLmR5bmFtaWNzLWNvbW1lbnQtc3VibWl0Jykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5zdWJtaXRDb21tZW50KCk7XG4gICAgfSk7XG5cbiAgICAvLyDngrnlh7vog4zmma/lhbPpl61cbiAgICB0aGlzLiRjb21tZW50TW9kYWwuZmluZCgnLmR5bmFtaWNzLWNvbW1lbnQtYmFja2Ryb3AnKS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmhpZGVDb21tZW50TW9kYWwoKTtcbiAgICB9KTtcblxuICAgIC8vIOmYu+atouWvueivneahhuWGhemDqOeCueWHu+S6i+S7tuWGkuazoVxuICAgIHRoaXMuJGNvbW1lbnRNb2RhbC5maW5kKCcuZHluYW1pY3MtY29tbWVudC1kaWFsb2cnKS5vbignY2xpY2snLCBlID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfSk7XG5cbiAgICAvLyDlm57ovablj5HpgIHvvIhDdHJsK0VudGVy77yJXG4gICAgdGhpcy4kY29tbWVudE1vZGFsLmZpbmQoJy5keW5hbWljcy1jb21tZW50LWlucHV0Jykub24oJ2tleWRvd24nLCBlID0+IHtcbiAgICAgIGlmIChlLmN0cmxLZXkgJiYgZS5rZXlDb2RlID09PSAxMykge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuc3VibWl0Q29tbWVudCgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOaYvuekuuivhOiuuuaooeaAgeahhlxuICAgKi9cbiAgcHJpdmF0ZSBzaG93Q29tbWVudE1vZGFsKHBvc3RObzogbnVtYmVyLCByZXBseVRvOiBzdHJpbmcgfCBudWxsLCBtZXNzYWdlSWQ6IG51bWJlciB8IG51bGwgPSBudWxsKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLiRjb21tZW50TW9kYWwpIHtcbiAgICAgIHRoaXMuY3JlYXRlQ29tbWVudE1vZGFsKCk7XG4gICAgfVxuXG4gICAgdGhpcy5jdXJyZW50UG9zdE5vID0gcG9zdE5vO1xuICAgIHRoaXMuY3VycmVudFJlcGx5VG8gPSByZXBseVRvO1xuICAgIHRoaXMuY3VycmVudE1lc3NhZ2VJZCA9IG1lc3NhZ2VJZDsgLy8g5L+d5a2Y5qW85bGCSURcblxuICAgIC8vIOabtOaWsOaooeaAgeahhuWGheWuuVxuICAgIGlmIChyZXBseVRvKSB7XG4gICAgICB0aGlzLiRjb21tZW50TW9kYWw/LmZpbmQoJy5keW5hbWljcy1jb21tZW50LXJlcGx5LWluZm8nKS5zaG93KCk7XG4gICAgICB0aGlzLiRjb21tZW50TW9kYWw/LmZpbmQoJy5keW5hbWljcy1jb21tZW50LXJlcGx5LW5hbWUnKS50ZXh0KHJlcGx5VG8pO1xuICAgICAgdGhpcy4kY29tbWVudE1vZGFsPy5maW5kKCcuZHluYW1pY3MtY29tbWVudC10aXRsZScpLnRleHQoJ+WbnuWkjeivhOiuuicpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRjb21tZW50TW9kYWw/LmZpbmQoJy5keW5hbWljcy1jb21tZW50LXJlcGx5LWluZm8nKS5oaWRlKCk7XG4gICAgICB0aGlzLiRjb21tZW50TW9kYWw/LmZpbmQoJy5keW5hbWljcy1jb21tZW50LXRpdGxlJykudGV4dCgn5Y+R6KGo6K+E6K66Jyk7XG4gICAgfVxuXG4gICAgLy8g5riF56m66L6T5YWl5qGGXG4gICAgdGhpcy4kY29tbWVudE1vZGFsPy5maW5kKCcuZHluYW1pY3MtY29tbWVudC1pbnB1dCcpLnZhbCgnJyk7XG5cbiAgICAvLyDmmL7npLrmqKHmgIHmoYbvvIjkvb/nlKjmt6HlhaXmlYjmnpzvvIlcbiAgICB0aGlzLiRjb21tZW50TW9kYWw/LmZhZGVJbigyMDApO1xuXG4gICAgLy8g6IGa54Sm5Yiw6L6T5YWl5qGGXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLiRjb21tZW50TW9kYWw/LmZpbmQoJy5keW5hbWljcy1jb21tZW50LWlucHV0JykuZm9jdXMoKTtcbiAgICB9LCAyNTApO1xuICB9XG5cbiAgLyoqXG4gICAqIOmakOiXj+ivhOiuuuaooeaAgeahhlxuICAgKi9cbiAgcHJpdmF0ZSBoaWRlQ29tbWVudE1vZGFsKCk6IHZvaWQge1xuICAgIC8vIOebtOaOpemakOiXj++8jOS4jeS9v+eUqOa3oeWHuuaViOaenO+8jOmBv+WFjeWNoemhv1xuICAgIHRoaXMuJGNvbW1lbnRNb2RhbD8uaGlkZSgpO1xuXG4gICAgLy8g56uL5Y2z5riF55CG54q25oCBXG4gICAgdGhpcy5jdXJyZW50UG9zdE5vID0gbnVsbDtcbiAgICB0aGlzLmN1cnJlbnRSZXBseVRvID0gbnVsbDtcbiAgICB0aGlzLmN1cnJlbnRNZXNzYWdlSWQgPSBudWxsO1xuICAgIHRoaXMuJGNvbW1lbnRNb2RhbD8uZmluZCgnLmR5bmFtaWNzLWNvbW1lbnQtaW5wdXQnKS52YWwoJycpO1xuICB9XG5cbiAgLyoqXG4gICAqIOaPkOS6pOivhOiuulxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBzdWJtaXRDb21tZW50KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGNvbW1lbnRUZXh0ID0gdGhpcy4kY29tbWVudE1vZGFsPy5maW5kKCcuZHluYW1pY3MtY29tbWVudC1pbnB1dCcpLnZhbCgpIGFzIHN0cmluZztcblxuICAgIGlmICghY29tbWVudFRleHQ/LnRyaW0oKSkge1xuICAgICAgLy8g6L6T5YWl5qGG5oqW5Yqo5pWI5p6cXG4gICAgICB0aGlzLiRjb21tZW50TW9kYWw/LmZpbmQoJy5keW5hbWljcy1jb21tZW50LWlucHV0JykuYWRkQ2xhc3MoJ3NoYWtlJyk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy4kY29tbWVudE1vZGFsPy5maW5kKCcuZHluYW1pY3MtY29tbWVudC1pbnB1dCcpLnJlbW92ZUNsYXNzKCdzaGFrZScpO1xuICAgICAgfSwgNTAwKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jdXJyZW50UG9zdE5vID09PSBudWxsKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfor4TorrrlpLHotKXvvJrmnKrorr7nva7liqjmgIHnvJblj7cnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyDnpoHnlKjlj5HpgIHmjInpkq7vvIzpmLLmraLph43lpI3mj5DkuqRcbiAgICBjb25zdCAkc3VibWl0QnRuID0gdGhpcy4kY29tbWVudE1vZGFsPy5maW5kKCcuZHluYW1pY3MtY29tbWVudC1zdWJtaXQnKTtcbiAgICAkc3VibWl0QnRuPy5wcm9wKCdkaXNhYmxlZCcsIHRydWUpLnRleHQoJ+WPkemAgeS4rS4uLicpO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIOWcqOWtmOWCqOaXtuS9v+eUqOWbuuWumueahCBcInVzZXJcIiDlrZfnrKbkuLJcbiAgICAgIGNvbnN0IHN0b3JhZ2VVc2VyTmFtZSA9ICd1c2VyJztcblxuICAgICAgLy8g5qC85byP5YyW5pe26Ze05oizIC0g5LiO6Kej5p6Q5Zmo5L+d5oyB5LiA6Ie077yM5L2/55SoIEhIOm1tIOagvOW8j1xuICAgICAgY29uc3QgZm9ybWF0VGltZXN0YW1wID0gKGRhdGU6IERhdGUpOiBzdHJpbmcgPT4ge1xuICAgICAgICBjb25zdCBoaCA9IFN0cmluZyhkYXRlLmdldEhvdXJzKCkpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgICAgIGNvbnN0IG1pID0gU3RyaW5nKGRhdGUuZ2V0TWludXRlcygpKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgICByZXR1cm4gYCR7aGh9OiR7bWl9YDtcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IGZvcm1hdFRpbWVzdGFtcChuZXcgRGF0ZSgpKTtcblxuICAgICAgLy8g5p6E5bu66K+E6K665qC85byP77yI5L2/55SoIFwidXNlclwiIOWtmOWCqO+8iVxuICAgICAgbGV0IGNvbW1lbnRMaW5lOiBzdHJpbmc7XG4gICAgICBpZiAodGhpcy5jdXJyZW50UmVwbHlUbykge1xuICAgICAgICAvLyDlm57lpI3moLzlvI/vvJpb6K+E6K66X+e8luWPt3x1c2VyQOiiq+WbnuWkjeiAhXzlhoXlrrl85pe26Ze0XVxuICAgICAgICBjb21tZW50TGluZSA9IGBb6K+E6K66XyR7dGhpcy5jdXJyZW50UG9zdE5vfXwke3N0b3JhZ2VVc2VyTmFtZX1AJHt0aGlzLmN1cnJlbnRSZXBseVRvfXwke2NvbW1lbnRUZXh0fXwke3RpbWVzdGFtcH1dYDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOebtOaOpeivhOiuuuagvOW8j++8mlvor4Torrpf57yW5Y+3fHVzZXJ85YaF5a65fOaXtumXtF1cbiAgICAgICAgY29tbWVudExpbmUgPSBgW+ivhOiuul8ke3RoaXMuY3VycmVudFBvc3ROb318JHtzdG9yYWdlVXNlck5hbWV9fCR7Y29tbWVudFRleHR9fCR7dGltZXN0YW1wfV1gO1xuICAgICAgfVxuXG4gICAgICAvLyDkvb/nlKjpgJrnlKjmlrnms5Xmn6Xmib7nm67moIfmpbzlsYJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZmluZFRhcmdldE1lc3NhZ2UodGhpcy5jdXJyZW50TWVzc2FnZUlkLCB0aGlzLmN1cnJlbnRQb3N0Tm8sICfmj5DkuqTor4TorronKTtcbiAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcign5peg5rOV5om+5Yiw55uu5qCH5qW85bGCJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRhcmdldE1lc3NhZ2UgPSByZXN1bHQubWVzc2FnZTtcbiAgICAgIGNvbnN0IHRhcmdldE1lc3NhZ2VJZCA9IHJlc3VsdC5tZXNzYWdlSWQ7XG4gICAgICBsZXQgbWVzc2FnZVRleHQgPSB0YXJnZXRNZXNzYWdlLm1lc3NhZ2UgfHwgJyc7XG5cbiAgICAgIC8vIOafpeaJvlvliqjmgIFd5a655ZmoXG4gICAgICBjb25zdCBzdGFydFRhZyA9ICdb5Yqo5oCBXSc7XG4gICAgICBjb25zdCBlbmRUYWcgPSAnWy/liqjmgIFdJztcbiAgICAgIGNvbnN0IGVuZEluZGV4ID0gbWVzc2FnZVRleHQuaW5kZXhPZihlbmRUYWcpO1xuXG4gICAgICBpZiAoZW5kSW5kZXggPT09IC0xKSB7XG4gICAgICAgIC8vIOebruagh+alvOWxguW6lOivpeaciVvliqjmgIFd5a655Zmo77yM5aaC5p6c5rKh5pyJ6K+05piO5p+l5om+5pyJ6Zeu6aKYXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYOalvOWxgiAke3RhcmdldE1lc3NhZ2VJZH0g5pyq5om+5YiwW+WKqOaAgV3lrrnlmajvvIzmtojmga/lhoXlrrk6YCwgbWVzc2FnZVRleHQuc3Vic3RyaW5nKDAsIDIwMCkpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYOalvOWxgiAke3RhcmdldE1lc3NhZ2VJZH0g5pyq5om+5YiwW+WKqOaAgV3lrrnlmajvvIzlj6/og73pgInmi6nkuobplJnor6/nmoTmpbzlsYJgKTtcbiAgICAgIH1cblxuICAgICAgLy8g5ZyoWy/liqjmgIFd5YmN5o+S5YWl6K+E6K6677yI566A5Y2V55u05o6l77yJXG4gICAgICBjb25zdCBiZWZvcmVFbmQgPSBtZXNzYWdlVGV4dC5zbGljZSgwLCBlbmRJbmRleCkucmVwbGFjZSgvXFxzKiQvLCAnJyk7XG4gICAgICBjb25zdCBhZnRlckVuZCA9IG1lc3NhZ2VUZXh0LnNsaWNlKGVuZEluZGV4KTtcbiAgICAgIG1lc3NhZ2VUZXh0ID0gYCR7YmVmb3JlRW5kfVxcbiR7Y29tbWVudExpbmV9XFxuJHthZnRlckVuZH1gO1xuXG4gICAgICAvLyDmm7TmlrDmtojmga9cbiAgICAgIGF3YWl0IHNldENoYXRNZXNzYWdlcyhcbiAgICAgICAgW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1lc3NhZ2VfaWQ6IHRhcmdldE1lc3NhZ2VJZCxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VUZXh0LFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHsgcmVmcmVzaDogJ25vbmUnIH0sXG4gICAgICApO1xuXG4gICAgICBjb25zb2xlLmxvZyhg4pyFIFvmj5DkuqTor4TorrpdIOaIkOWKn+abtOaWsOalvOWxgiAke3RhcmdldE1lc3NhZ2VJZH1gKTtcblxuICAgICAgLy8g5YWI5L+d5a2Y5b2T5YmN55qE54q25oCB77yM5Zug5Li6aGlkZUNvbW1lbnRNb2RhbOS8mua4heepuuWug+S7rFxuICAgICAgY29uc3QgcG9zdE5vID0gdGhpcy5jdXJyZW50UG9zdE5vO1xuICAgICAgY29uc3QgcmVwbHlUbyA9IHRoaXMuY3VycmVudFJlcGx5VG87XG5cbiAgICAgIC8vIOmakOiXj+aooeaAgeahhlxuICAgICAgdGhpcy5oaWRlQ29tbWVudE1vZGFsKCk7XG5cbiAgICAgIC8vIOWKqOaAgea3u+WKoOivhOiuuuWIsOeVjOmdou+8iOS4jeWIt+aWsOaVtOS4queVjOmdou+8iVxuICAgICAgYXdhaXQgdGhpcy5hZGRDb21tZW50VG9VSShwb3N0Tm8sIGNvbW1lbnRUZXh0LCByZXBseVRvKTtcblxuICAgICAgLy8gPT09IOaWueahiELvvJrkuovku7bmoaXmjqXvvIjlu7bov5/op6blj5HvvIzpgb/lhY3ph43lpI3muLLmn5PvvIk9PT1cbiAgICAgIC8vIOa0vuWPkeWOn+eUn+S6i+S7tu+8iOS4uuacquadpeaJqeWxlemihOeVme+8iVxuICAgICAgLy8g5LqL5Lu25qGl5o6l77ya5ZCM5pe25rS+5Y+R5Lik56eN5LqL5Lu25ZCN77yM5L6/5LqO566h55CG5L6n57uf5LiA5Yi35paw5YaF5a2YXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBkZXRhaWwgPSB7XG4gICAgICAgICAgbWVzc2FnZUlkOiB0YXJnZXRNZXNzYWdlSWQsXG4gICAgICAgICAgcG9zdE5vOiB0aGlzLmN1cnJlbnRQb3N0Tm8sXG4gICAgICAgICAgdHlwZTogJ2NvbW1lbnQnLFxuICAgICAgICAgIGFjdGlvbjogJ2FkZCcsXG4gICAgICAgICAgdXNlcjogJ3VzZXInLFxuICAgICAgICAgIGNvbnRlbnQ6IGNvbW1lbnRUZXh0LFxuICAgICAgICAgIHRpbWVzdGFtcDogdGltZXN0YW1wLFxuICAgICAgICB9O1xuICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnZHluYW1pY3NJbnRlcmFjdGlvbkFkZGVkJywgeyBkZXRhaWwgfSkpO1xuICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnZHluYW1pY3M6aW50ZXJhY3Rpb25BZGRlZCcsIHsgZGV0YWlsIH0pKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8g5rS+5Y+R6K+E6K665LqL5Lu25aSx6LSlOicsIGUpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfmj5DkuqTor4TorrrlpLHotKU6JywgZXJyb3IpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICAvLyDmgaLlpI3lj5HpgIHmjInpkq5cbiAgICAgICRzdWJtaXRCdG4/LnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpLnRleHQoJ+WPkemAgScpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDplIDmr4Hor4TorrrlpITnkIblmahcbiAgICovXG4gIHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xuICAgIC8vIOenu+mZpOS6i+S7tuebkeWQrOWZqFxuICAgICQoJyNkeW5hbWljc0ludGVyZmFjZScpLm9mZignLmNvbW1lbnQnKTtcbiAgICAkKCcjZHluYW1pY3NJbnRlcmZhY2UnKS5vZmYoJy5yZXBseScpO1xuICAgICQoJyNkeW5hbWljc0ludGVyZmFjZScpLm9mZignLmNvbW1lbnREZWxldGUnKTtcblxuICAgIC8vIOenu+mZpOaooeaAgeahhlxuICAgIGlmICh0aGlzLiRjb21tZW50TW9kYWwpIHtcbiAgICAgIHRoaXMuJGNvbW1lbnRNb2RhbC5yZW1vdmUoKTtcbiAgICAgIHRoaXMuJGNvbW1lbnRNb2RhbCA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8g5riF55CG54q25oCBXG4gICAgdGhpcy5jdXJyZW50UG9zdE5vID0gbnVsbDtcbiAgICB0aGlzLmN1cnJlbnRSZXBseVRvID0gbnVsbDtcbiAgICB0aGlzLmN1cnJlbnRNZXNzYWdlSWQgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIOWKqOaAgea3u+WKoOivhOiuuuWIsFVJ77yI5LiN5Yi35paw5pW05Liq55WM6Z2i77yJXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGFkZENvbW1lbnRUb1VJKHBvc3RObzogbnVtYmVyLCBjb250ZW50OiBzdHJpbmcsIHJlcGx5VG86IHN0cmluZyB8IG51bGwpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyDojrflj5blrp7pmYXnlKjmiLflkI3nlKjkuo7mmL7npLpcbiAgICBjb25zdCB1c2VyTmFtZVJhdyA9IGF3YWl0IHRyaWdnZXJTbGFzaCgnL3Bhc3Mge3t1c2VyfX0nKTtcbiAgICBjb25zdCBkaXNwbGF5VXNlck5hbWUgPSAodXNlck5hbWVSYXcgfHwgJycpLnRyaW0oKSB8fCAn55So5oi3JztcblxuICAgIC8vIOaJvuWIsOWvueW6lOeahOW4luWtkFxuICAgIGNvbnN0ICRwb3N0ID0gJChgLmR5bmFtaWNzLXBvc3RbZGF0YS1wb3N0LWlkPVwiZHluYW1pY3NfJHtwb3N0Tm99XCJdYCk7XG4gICAgaWYgKCEkcG9zdC5sZW5ndGgpIHJldHVybjtcblxuICAgIC8vIOaJvuWIsOaIluWIm+W7uuivhOiuuuWMulxuICAgIGxldCAkY29tbWVudHMgPSAkcG9zdC5maW5kKCcuZHluYW1pY3MtY29tbWVudHMnKTtcbiAgICBpZiAoISRjb21tZW50cy5sZW5ndGgpIHtcbiAgICAgICRjb21tZW50cyA9ICQoJzxkaXY+JywgeyBjbGFzczogJ2R5bmFtaWNzLWNvbW1lbnRzJyB9KTtcbiAgICAgICRwb3N0LmFwcGVuZCgkY29tbWVudHMpO1xuICAgIH1cblxuICAgIC8vIOWIm+W7uuaWsOivhOiuuuWFg+e0oO+8iFFR56m66Ze06aOO5qC877yJXG4gICAgY29uc3QgJGNvbW1lbnQgPSAkKCc8ZGl2PicsIHsgY2xhc3M6ICdkeW5hbWljcy1jb21tZW50IGR5bmFtaWNzLWNvbW1lbnQtcXEnIH0pO1xuXG4gICAgLy8g5re75Yqg5qCH6K6w77yM6KGo56S66L+Z5piv55So5oi36Ieq5bex55qE6K+E6K6677yM5pa55L6/6ZW/5oyJ5Yig6Zmk5Yqf6IO96K+G5YirXG4gICAgJGNvbW1lbnQuYXR0cignZGF0YS1pcy11c2VyJywgJ3RydWUnKTtcbiAgICAkY29tbWVudC5hdHRyKCdkYXRhLXBvc3Qtbm8nLCBwb3N0Tm8udG9TdHJpbmcoKSk7XG4gICAgJGNvbW1lbnQuYXR0cignZGF0YS1jb21tZW50LWNvbnRlbnQnLCBjb250ZW50KTtcblxuICAgIGNvbnN0ICRjb250ZW50ID0gJCgnPGRpdj4nLCB7IGNsYXNzOiAnZHluYW1pY3MtY29tbWVudC1jb250ZW50JyB9KTtcblxuICAgIGlmIChyZXBseVRvKSB7XG4gICAgICAvLyDlm57lpI3moLzlvI9cbiAgICAgICRjb250ZW50LmFwcGVuZChcbiAgICAgICAgJCgnPHNwYW4+Jywge1xuICAgICAgICAgIGNsYXNzOiAnZHluYW1pY3MtY29tbWVudC1uYW1lJyxcbiAgICAgICAgICB0ZXh0OiBkaXNwbGF5VXNlck5hbWUsXG4gICAgICAgIH0pLFxuICAgICAgICAkKCc8c3Bhbj4nLCB7XG4gICAgICAgICAgdGV4dDogJyDlm57lpI0gJyxcbiAgICAgICAgICBjbGFzczogJ2R5bmFtaWNzLWNvbW1lbnQtcmVwbHktaW5kaWNhdG9yJyxcbiAgICAgICAgfSksXG4gICAgICAgICQoJzxzcGFuPicsIHtcbiAgICAgICAgICBjbGFzczogJ2R5bmFtaWNzLWNvbW1lbnQtbmFtZSBkeW5hbWljcy1jb21tZW50LXJlcGx5LXRhcmdldCcsXG4gICAgICAgICAgdGV4dDogcmVwbHlUbyxcbiAgICAgICAgfSksXG4gICAgICAgICQoJzxzcGFuPicsIHsgdGV4dDogJ++8micgfSksXG4gICAgICAgICQoJzxzcGFuPicsIHtcbiAgICAgICAgICBjbGFzczogJ2R5bmFtaWNzLWNvbW1lbnQtdGV4dCcsXG4gICAgICAgICAgdGV4dDogY29udGVudCxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyDmma7pgJror4TorrpcbiAgICAgICRjb250ZW50LmFwcGVuZChcbiAgICAgICAgJCgnPHNwYW4+Jywge1xuICAgICAgICAgIGNsYXNzOiAnZHluYW1pY3MtY29tbWVudC1uYW1lJyxcbiAgICAgICAgICB0ZXh0OiBkaXNwbGF5VXNlck5hbWUsXG4gICAgICAgIH0pLFxuICAgICAgICAkKCc8c3Bhbj4nLCB7IHRleHQ6ICfvvJonIH0pLFxuICAgICAgICAkKCc8c3Bhbj4nLCB7XG4gICAgICAgICAgY2xhc3M6ICdkeW5hbWljcy1jb21tZW50LXRleHQnLFxuICAgICAgICAgIHRleHQ6IGNvbnRlbnQsXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAkY29tbWVudC5hcHBlbmQoJGNvbnRlbnQpO1xuXG4gICAgLy8g5re75Yqg5reh5YWl5Yqo55S7XG4gICAgJGNvbW1lbnQuaGlkZSgpO1xuICAgICRjb21tZW50cy5hcHBlbmQoJGNvbW1lbnQpO1xuICAgICRjb21tZW50LmZhZGVJbigzMDApO1xuXG4gICAgLy8g6YeN6KaB77ya56Gu5L+d5LqL5Lu25aeU5omY6IO95q2j5bi45bel5L2cXG4gICAgLy8g6Kem5Y+R5LiA5Liq6Ieq5a6a5LmJ5LqL5Lu277yM6YCa55+l6K+E6K665bey5re75YqgXG4gICAgJGNvbW1lbnQudHJpZ2dlcignY29tbWVudDphZGRlZCcpO1xuICB9XG59XG5cbi8qKlxuICog5qC85byP5YyW55u45a+55pe26Ze05pi+56S6XG4gKiBAcGFyYW0gdGltZXN0YW1wIOaXtumXtOaIs+Wtl+espuS4siAoWVlZWS1NTS1ERCBISDptbSlcbiAqIEByZXR1cm5zIOagvOW8j+WMluWQjueahOaXtumXtOWtl+espuS4slxuICovXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0UmVsYXRpdmVUaW1lKHRpbWVzdGFtcDogc3RyaW5nKTogc3RyaW5nIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodGltZXN0YW1wKTtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IGRpZmZNcyA9IG5vdy5nZXRUaW1lKCkgLSBkYXRlLmdldFRpbWUoKTtcbiAgICBjb25zdCBkaWZmTWludXRlcyA9IE1hdGguZmxvb3IoZGlmZk1zIC8gNjAwMDApO1xuICAgIGNvbnN0IGRpZmZIb3VycyA9IE1hdGguZmxvb3IoZGlmZk1zIC8gMzYwMDAwMCk7XG4gICAgY29uc3QgZGlmZkRheXMgPSBNYXRoLmZsb29yKGRpZmZNcyAvIDg2NDAwMDAwKTtcblxuICAgIGlmIChkaWZmTWludXRlcyA8IDEpIHtcbiAgICAgIHJldHVybiAn5Yia5YiaJztcbiAgICB9IGVsc2UgaWYgKGRpZmZNaW51dGVzIDwgNjApIHtcbiAgICAgIHJldHVybiBgJHtkaWZmTWludXRlc33liIbpkp/liY1gO1xuICAgIH0gZWxzZSBpZiAoZGlmZkhvdXJzIDwgMjQpIHtcbiAgICAgIHJldHVybiBgJHtkaWZmSG91cnN95bCP5pe25YmNYDtcbiAgICB9IGVsc2UgaWYgKGRpZmZEYXlzID09PSAwKSB7XG4gICAgICByZXR1cm4gYOS7iuWkqSAke2RhdGUuZ2V0SG91cnMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9OiR7ZGF0ZS5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWA7XG4gICAgfSBlbHNlIGlmIChkaWZmRGF5cyA9PT0gMSkge1xuICAgICAgcmV0dXJuIGDmmKjlpKkgJHtkYXRlLmdldEhvdXJzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfToke2RhdGUuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gO1xuICAgIH0gZWxzZSBpZiAoZGlmZkRheXMgPCA3KSB7XG4gICAgICByZXR1cm4gYCR7ZGlmZkRheXN95aSp5YmNYDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbW9udGggPSAoZGF0ZS5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgY29uc3QgZGF5ID0gZGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgY29uc3QgaG91cnMgPSBkYXRlLmdldEhvdXJzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgY29uc3QgbWludXRlcyA9IGRhdGUuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgIHJldHVybiBgJHttb250aH0tJHtkYXl9ICR7aG91cnN9OiR7bWludXRlc31gO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLndhcm4oJ+aXtumXtOagvOW8j+WMluWksei0pTonLCBlcnJvcik7XG4gICAgcmV0dXJuIHRpbWVzdGFtcDtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/dynamics/commentHandler.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/dynamics/composer.scss": 
  /*!**********************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/dynamics/composer.scss ***!
  \**********************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZHluYW1pY3MvY29tcG9zZXIuc2NzcyIsIm1hcHBpbmdzIjoiO0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WkmuS6keeGii/lpIfku70v57uZcm92b+eahC9tb2R1bGVzL2R5bmFtaWNzL2NvbXBvc2VyLnNjc3M/Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpblxuZXhwb3J0IHt9OyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/dynamics/composer.scss\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/dynamics/composer.ts": 
  /*!********************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/dynamics/composer.ts ***!
  \********************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DynamicsComposer: () => (/* binding */ DynamicsComposer)\n/* harmony export */ });\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"jquery\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _profile_GlobalUserManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../profile/GlobalUserManager */ \"./src/多云熊/备份/给rovo的/modules/profile/GlobalUserManager.ts\");\n/**\n * 动态发布器模块\n * 负责处理发布新动态的界面和逻辑\n * 类似推特发布页面的设计\n */\n\n\nclass DynamicsComposer {\n    globalUserManager;\n    currentUserAvatar = '';\n    currentUserName = '';\n    soundManager; // 音效管理器引用\n    constructor(soundManager) {\n        this.globalUserManager = _profile_GlobalUserManager__WEBPACK_IMPORTED_MODULE_1__.GlobalUserManager.getInstance();\n        this.soundManager = soundManager || window.soundManager;\n        this.initializeUserInfo();\n    }\n    /**\n     * 初始化用户信息\n     */\n    async initializeUserInfo() {\n        try {\n            const userData = await this.globalUserManager.loadUserData();\n            if (userData) {\n                this.currentUserAvatar = userData.avatar || 'https://files.catbox.moe/bpqrv2.jpg';\n                this.currentUserName = userData.name || '用户';\n            }\n        }\n        catch (error) {\n            console.error('初始化用户信息失败:', error);\n            this.currentUserAvatar = 'https://files.catbox.moe/bpqrv2.jpg';\n            this.currentUserName = '用户';\n        }\n    }\n    /**\n     * 渲染发布动态界面\n     */\n    renderComposerInterface() {\n        return `\n      <div id=\"dynamicsComposerInterface\" class=\"dynamics-composer-interface\">\n        \x3c!-- 顶部导航栏 --\x3e\n        <div class=\"composer-nav-bar\">\n          <button class=\"composer-back-btn\" id=\"composerBackBtn\">\n            <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\" fill=\"currentColor\">\n              <path d=\"M19 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H19v-2z\"/>\n            </svg>\n          </button>\n          <div class=\"composer-nav-title\">发布动态</div>\n          <button class=\"composer-post-btn\" id=\"composerPostBtn\" disabled>\n            发布\n          </button>\n        </div>\n\n        \x3c!-- 发布内容区域 --\x3e\n        <div class=\"composer-content-area\">\n          \x3c!-- 输入区域，包含头像和文本框 --\x3e\n          <div class=\"composer-main-area\">\n            <div class=\"composer-user-avatar-small\" id=\"composerUserAvatar\"></div>\n            <div class=\"composer-input-wrapper\">\n              <textarea\n                id=\"composerTextarea\"\n                class=\"composer-textarea\"\n                placeholder=\"有什么新鲜事？\"\n                maxlength=\"280\"\n              ></textarea>\n              \n              \x3c!-- 圆环字数统计 --\x3e\n              <div class=\"composer-char-count\" id=\"charCountContainer\">\n                <svg viewBox=\"0 0 30 30\">\n                  <circle class=\"circle-bg\" cx=\"15\" cy=\"15\" r=\"12\"></circle>\n                  <circle class=\"circle-progress\" id=\"charCountProgress\" cx=\"15\" cy=\"15\" r=\"12\"\n                    stroke-dasharray=\"75.4\" stroke-dashoffset=\"75.4\"></circle>\n                </svg>\n                <span class=\"char-count-text\" id=\"charCountText\"></span>\n              </div>\n            </div>\n          </div>\n\n          \x3c!-- 图片描述输入区（初始隐藏） --\x3e\n          <div class=\"composer-image-description\" id=\"imageDescriptionArea\" style=\"display: none;\">\n            <input\n              type=\"text\"\n              id=\"imageDescriptionInput\"\n              class=\"image-description-input\"\n              placeholder=\"添加图片描述...\"\n              maxlength=\"100\"\n            />\n            <button class=\"remove-image-btn\" id=\"removeImageBtn\">\n              <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\">\n                <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n              </svg>\n            </button>\n          </div>\n\n          \x3c!-- 工具栏 - 只保留图片按钮 --\x3e\n          <div class=\"composer-toolbar\">\n            <button class=\"toolbar-btn image-only\" id=\"addImageBtn\">\n              <svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" fill=\"currentColor\">\n                <path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 11.5c0 .85-.65 1.5-1.5 1.5S6 12.35 6 11.5 6.65 10 7.5 10 9 10.65 9 11.5zm9 7.5H6l3-4 2 2.67L14 14l4 5z\"/>\n              </svg>\n            </button>\n          </div>\n\n          \x3c!-- 隐藏的文件输入 --\x3e\n          <input type=\"file\" id=\"imageFileInput\" accept=\"image/*\" style=\"display: none;\">\n        </div>\n      </div>\n    `;\n    }\n    /**\n     * 初始化发布界面\n     */\n    initializeComposer() {\n        // 更新用户头像\n        const $avatar = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#composerUserAvatar');\n        if ($avatar.length && this.currentUserAvatar) {\n            $avatar.css('background-image', `url('${this.currentUserAvatar}')`);\n        }\n        // 绑定事件\n        this.bindComposerEvents();\n        // 初始化字数统计圆环\n        this.updateCharCountCircle(0, 280);\n        // 监听用户头像变化\n        this.setupUserAvatarListener();\n    }\n    /**\n     * 绑定发布界面事件\n     */\n    bindComposerEvents() {\n        // 先解绑所有事件，避免重复绑定\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#composerBackBtn').off('click');\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#composerTextarea').off('input');\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#addImageBtn').off('click');\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#removeImageBtn').off('click');\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#composerPostBtn').off('click');\n        // 返回按钮\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#composerBackBtn').on('click', () => {\n            // 播放click音效\n            if (this.soundManager?.playSound) {\n                this.soundManager.playSound('click');\n            }\n            this.closeComposer();\n        });\n        // 文本输入事件\n        const $textarea = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#composerTextarea');\n        const $postBtn = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#composerPostBtn');\n        const $charCount = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#charCount');\n        $textarea.on('input', () => {\n            const text = $textarea.val();\n            const length = text.length;\n            const maxLength = 280;\n            // 自动调整文本框高度\n            this.autoResizeTextarea($textarea[0]);\n            // 更新圆环进度\n            this.updateCharCountCircle(length, maxLength);\n            // 启用/禁用发布按钮\n            const hasContent = text.trim().length > 0 && length <= maxLength;\n            const hasImage = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#imageDescriptionArea').is(':visible');\n            $postBtn.prop('disabled', !hasContent && !hasImage);\n        });\n        // 添加图片按钮 - 现在是添加图片描述\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#addImageBtn').on('click', () => {\n            const $descArea = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#imageDescriptionArea');\n            if ($descArea.is(':visible')) {\n                // 如果已经显示，则隐藏\n                this.removeImageDescription();\n            }\n            else {\n                // 显示图片描述输入区\n                $descArea.show();\n                jquery__WEBPACK_IMPORTED_MODULE_0___default()('#imageDescriptionInput').focus();\n                jquery__WEBPACK_IMPORTED_MODULE_0___default()('#addImageBtn').addClass('active');\n                // 更新发布按钮状态\n                const hasContent = $textarea.val().trim().length > 0;\n                $postBtn.prop('disabled', !hasContent);\n            }\n        });\n        // 移除图片描述\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#removeImageBtn').on('click', () => {\n            this.removeImageDescription();\n        });\n        // 发布按钮\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#composerPostBtn').on('click', () => {\n            // 播放emoji音效（发布动态成功音效）\n            if (this.soundManager?.playSound) {\n                this.soundManager.playSound('emoji');\n            }\n            this.publishDynamic();\n        });\n        // 自动聚焦\n        $textarea.focus();\n    }\n    /**\n     * 移除图片描述\n     */\n    removeImageDescription() {\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#imageDescriptionArea').hide();\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#imageDescriptionInput').val('');\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#addImageBtn').removeClass('active');\n        // 检查是否还有内容\n        const text = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#composerTextarea').val();\n        if (!text.trim()) {\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()('#composerPostBtn').prop('disabled', true);\n        }\n    }\n    /**\n     * 移除图片（兼容旧方法）\n     */\n    removeImage() {\n        this.removeImageDescription();\n    }\n    /**\n     * 发布动态\n     */\n    async publishDynamic() {\n        const content = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#composerTextarea').val();\n        const imageDescription = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#imageDescriptionInput').val();\n        const hasImageDescription = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#imageDescriptionArea').is(':visible') && imageDescription.trim();\n        if (!content.trim() && !hasImageDescription) {\n            return;\n        }\n        // 禁用发布按钮，显示加载状态\n        const $postBtn = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#composerPostBtn');\n        $postBtn.prop('disabled', true).text('发布中...');\n        try {\n            // 获取当前消息（用于获取下一个动态编号）\n            const messages = getChatMessages('0-{{lastMessageId}}');\n            // 查找最大的动态编号\n            let maxDynamicNo = 0;\n            for (const msg of messages) {\n                if (msg.message && typeof msg.message === 'string') {\n                    const matches = msg.message.matchAll(/\\[动态_(\\d+)[^\\]]*\\]/g);\n                    for (const match of matches) {\n                        const no = parseInt(match[1], 10);\n                        if (no > maxDynamicNo) {\n                            maxDynamicNo = no;\n                        }\n                    }\n                }\n            }\n            // 新动态编号\n            const newDynamicNo = maxDynamicNo + 1;\n            // 格式化时间戳 - 与评论保持一致，使用 HH:mm 格式\n            const formatTimestamp = (date) => {\n                const hh = String(date.getHours()).padStart(2, '0');\n                const mi = String(date.getMinutes()).padStart(2, '0');\n                return `${hh}:${mi}`;\n            };\n            const timestamp = formatTimestamp(new Date());\n            // 构建动态行\n            let dynamicLine;\n            if (hasImageDescription) {\n                // 有图片描述时的格式：[动态_编号|user|文字内容|图片描述|时间戳]\n                dynamicLine = `[动态_${newDynamicNo}|user|${content.trim()}|${imageDescription.trim()}|${timestamp}]`;\n            }\n            else {\n                // 只有文字时的格式：[动态_编号|user|文字内容|时间戳]\n                dynamicLine = `[动态_${newDynamicNo}|user|${content.trim()}|${timestamp}]`;\n            }\n            // 获取最新消息并更新\n            const lastMessage = messages[messages.length - 1];\n            if (lastMessage) {\n                let messageText = lastMessage.message || '';\n                // 如果已经有[动态]容器，在容器内添加；否则在<bear>标签内添加新容器\n                if (messageText.includes('[动态]') && messageText.includes('[/动态]')) {\n                    // 在现有容器内添加\n                    const endTagIndex = messageText.indexOf('[/动态]');\n                    const beforeEnd = messageText.slice(0, endTagIndex).trimEnd();\n                    const afterEnd = messageText.slice(endTagIndex);\n                    messageText = `${beforeEnd}\\n${dynamicLine}\\n${afterEnd}`;\n                }\n                else {\n                    // 需要创建新的[动态]容器\n                    const dynamicContent = `[动态]\\n${dynamicLine}\\n[/动态]`;\n                    // 检查是否有<bear>标签\n                    if (messageText.includes('<bear>') && messageText.includes('</bear>')) {\n                        // 在</bear>标签前插入动态容器\n                        const bearEndIndex = messageText.indexOf('</bear>');\n                        const beforeBearEnd = messageText.slice(0, bearEndIndex).trimEnd();\n                        const afterBearEnd = messageText.slice(bearEndIndex);\n                        messageText = `${beforeBearEnd}\\n\\n${dynamicContent}\\n${afterBearEnd}`;\n                    }\n                    else {\n                        // 如果没有<bear>标签，创建一个\n                        messageText = messageText.trimEnd() + '\\n\\n<bear>\\n' + dynamicContent + '\\n</bear>';\n                    }\n                }\n                // 更新消息\n                await setChatMessages([\n                    {\n                        message_id: lastMessage.message_id,\n                        message: messageText,\n                    },\n                ], { refresh: 'none' });\n                console.log(`✅ 成功发布动态 #${newDynamicNo} 到楼层 ${lastMessage.message_id}`);\n            }\n            else {\n                // 如果没有消息，创建新消息\n                console.warn('⚠️ 没有找到消息，可能需要先发送一条消息');\n                toastr.warning('请先在聊天中发送一条消息');\n                $postBtn.prop('disabled', false).text('发布');\n                return;\n            }\n            // 关闭发布界面\n            this.closeComposer();\n            // 恢复发布按钮文本\n            $postBtn.text('发布');\n            // 动态添加到UI（不刷新整个界面），并带上数据所在楼层ID，便于后续跨楼层定位\n            await this.addDynamicToUI(newDynamicNo, content.trim(), hasImageDescription ? imageDescription.trim() : undefined, timestamp, lastMessage.message_id);\n            // 派发自定义事件（用于其他模块监听）+ 兼容 jQuery 事件名\n            const publishedDetail = {\n                dynamicNo: newDynamicNo,\n                content: content.trim(),\n                imageDescription: hasImageDescription ? imageDescription.trim() : undefined,\n                timestamp: timestamp,\n                messageId: lastMessage.message_id,\n            };\n            document.dispatchEvent(new CustomEvent('dynamicsPublished', { detail: publishedDetail }));\n            // 兼容管理侧监听的 jQuery 事件名（带冒号）\n            try {\n                jquery__WEBPACK_IMPORTED_MODULE_0___default()(window).trigger('dynamics:published', [publishedDetail]);\n            }\n            catch (e) {\n                console.warn('⚠️ 触发 dynamics:published 事件失败:', e);\n            }\n        }\n        catch (error) {\n            console.error('发布动态失败:', error);\n            toastr.error('发布失败，请重试');\n            $postBtn.prop('disabled', false).text('发布');\n        }\n    }\n    /**\n     * 关闭发布界面\n     */\n    closeComposer() {\n        // 只隐藏发布界面，不影响下层的动态界面\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsComposerInterface').removeClass('active').hide();\n        // 清理输入内容\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#composerTextarea').val('');\n        this.updateCharCountCircle(0, 280);\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#composerPostBtn').prop('disabled', true);\n        // 清理图片描述\n        this.removeImageDescription();\n    }\n    /**\n     * 自动调整文本框高度\n     */\n    autoResizeTextarea(textarea) {\n        // 重置高度以获取正确的scrollHeight\n        textarea.style.height = 'auto';\n        // 设置新高度\n        textarea.style.height = textarea.scrollHeight + 'px';\n    }\n    /**\n     * 更新字数统计圆环\n     */\n    updateCharCountCircle(current, max) {\n        const percentage = (current / max) * 100;\n        const circumference = 2 * Math.PI * 12; // 半径12的圆周长\n        const offset = circumference - (percentage / 100) * circumference;\n        const $progress = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#charCountProgress');\n        const $text = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#charCountText');\n        // 更新进度条\n        $progress.css('stroke-dashoffset', offset);\n        // 更新颜色和文字\n        if (current > max) {\n            // 超出限制\n            $progress.removeClass('warning').addClass('danger');\n            $text.removeClass('warning').addClass('danger');\n            $text.text(`-${current - max}`);\n        }\n        else if (current > max * 0.9) {\n            // 警告区域（剩余10%以内）\n            $progress.addClass('warning').removeClass('danger');\n            $text.addClass('warning').removeClass('danger');\n            $text.text(max - current);\n        }\n        else if (current > max * 0.8) {\n            // 显示剩余字数\n            $progress.removeClass('warning danger');\n            $text.removeClass('warning danger');\n            $text.text(max - current);\n        }\n        else {\n            // 正常状态，不显示数字\n            $progress.removeClass('warning danger');\n            $text.removeClass('warning danger');\n            $text.text('');\n        }\n    }\n    /**\n     * 动态添加到UI（不刷新整个界面）\n     */\n    async addDynamicToUI(dynamicNo, content, imageDescription, timestamp, messageId) {\n        // 获取实际用户名用于显示\n        const userNameRaw = await triggerSlash('/pass {{user}}');\n        const displayUserName = (userNameRaw || '').trim() || '用户';\n        // 构建新动态的HTML\n        const dataMsgIdAttr = messageId != null ? ` data-message-id=\"${messageId}\"` : '';\n        const dynamicHtml = `\n      <div class=\"dynamics-post\" data-post-id=\"dynamics_${dynamicNo}\"${dataMsgIdAttr}>\n        <div class=\"dynamics-post-header\">\n          <div class=\"dynamics-post-avatar\" style=\"background-image: url('${this.currentUserAvatar}')\"></div>\n          <div class=\"dynamics-post-info\">\n            <div class=\"dynamics-post-name\">${displayUserName}</div>\n            <div class=\"dynamics-post-time\">刚刚</div>\n          </div>\n        </div>\n        <div class=\"dynamics-post-content\">${this.formatContent(content)}</div>\n        ${imageDescription ? `\n          <div class=\"dynamics-post-image\" style=\"background-image: url('https://files.catbox.moe/8mjvdg.jpg')\" data-description=\"${imageDescription}\"></div>\n        ` : ''}\n        <div class=\"dynamics-post-actions\">\n          <div class=\"dynamics-post-action\" data-action=\"like\">\n            <span class=\"action-icon\">\n              <svg class=\"action-svg\" viewBox=\"0 0 24 24\">\n                <path d=\"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z\"/>\n              </svg>\n            </span>\n          </div>\n          <div class=\"dynamics-post-action\" data-action=\"comment\">\n            <span class=\"action-icon\">\n              <svg class=\"action-svg\" viewBox=\"0 0 24 24\">\n                <path d=\"M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z\"/>\n              </svg>\n            </span>\n          </div>\n        </div>\n      </div>\n    `;\n        // 添加到时间线顶部\n        const $timeline = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsTimeline');\n        const $newPost = jquery__WEBPACK_IMPORTED_MODULE_0___default()(dynamicHtml);\n        // 如果有空状态提示，先移除\n        $timeline.find('.dynamics-empty').remove();\n        // 添加淡入动画\n        $newPost.hide();\n        $timeline.prepend($newPost);\n        $newPost.fadeIn(300);\n    }\n    /**\n     * 格式化内容文本（处理链接、@提及、话题标签）\n     */\n    formatContent(content) {\n        let formattedContent = content;\n        // 处理链接\n        formattedContent = formattedContent.replace(/https?:\\/\\/[^\\s]+/g, (url) => `<a href=\"${url}\" target=\"_blank\" class=\"dynamics-link\">${url}</a>`);\n        // 处理@提及\n        formattedContent = formattedContent.replace(/@(\\w+)/g, '<span class=\"dynamics-mention\">@$1</span>');\n        // 处理话题标签\n        formattedContent = formattedContent.replace(/#([^\\s]+)/g, '<span class=\"dynamics-hashtag\">#$1</span>');\n        return formattedContent;\n    }\n    /**\n     * 设置用户头像变更监听器\n     */\n    setupUserAvatarListener() {\n        this.globalUserManager.addEventListener('avatar', (event) => {\n            const $avatar = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#composerUserAvatar');\n            if ($avatar.length && event.newValue) {\n                $avatar.css('background-image', `url('${event.newValue}')`);\n                this.currentUserAvatar = event.newValue;\n            }\n        });\n        this.globalUserManager.addEventListener('name', (event) => {\n            if (event.newValue) {\n                jquery__WEBPACK_IMPORTED_MODULE_0___default()('#composerUserName').text(event.newValue);\n                this.currentUserName = event.newValue;\n            }\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZHluYW1pY3MvY29tcG9zZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0dBSUc7QUFFb0I7QUFDMEM7QUFFMUQsTUFBTSxnQkFBZ0I7SUFDbkIsaUJBQWlCLENBQW9CO0lBQ3JDLGlCQUFpQixHQUFXLEVBQUUsQ0FBQztJQUMvQixlQUFlLEdBQVcsRUFBRSxDQUFDO0lBQzdCLFlBQVksQ0FBTSxDQUFDLFVBQVU7SUFFckMsWUFBWSxZQUFrQjtRQUM1QixJQUFJLENBQUMsaUJBQWlCLEdBQUcseUVBQWlCLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDekQsSUFBSSxDQUFDLFlBQVksR0FBRyxZQUFZLElBQUssTUFBYyxDQUFDLFlBQVksQ0FBQztRQUNqRSxJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztJQUM1QixDQUFDO0lBRUQ7O09BRUc7SUFDSyxLQUFLLENBQUMsa0JBQWtCO1FBQzlCLElBQUksQ0FBQztZQUNILE1BQU0sUUFBUSxHQUFHLE1BQU0sSUFBSSxDQUFDLGlCQUFpQixDQUFDLFlBQVksRUFBRSxDQUFDO1lBQzdELElBQUksUUFBUSxFQUFFLENBQUM7Z0JBQ2IsSUFBSSxDQUFDLGlCQUFpQixHQUFHLFFBQVEsQ0FBQyxNQUFNLElBQUkscUNBQXFDLENBQUM7Z0JBQ2xGLElBQUksQ0FBQyxlQUFlLEdBQUcsUUFBUSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUM7WUFDL0MsQ0FBQztRQUNILENBQUM7UUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1lBQ2YsT0FBTyxDQUFDLEtBQUssQ0FBQyxZQUFZLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFDbkMsSUFBSSxDQUFDLGlCQUFpQixHQUFHLHFDQUFxQyxDQUFDO1lBQy9ELElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO1FBQzlCLENBQUM7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSSx1QkFBdUI7UUFDNUIsT0FBTzs7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LElBQUksQ0FBQyxDQUFDO2dCQUM1RCxJQUFJLENBQUMsaUJBQWlCLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQztZQUMxQyxDQUFDO1FBQ0gsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsaUJBQWlCLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUU7WUFDeEQsSUFBSSxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUM7Z0JBQ25CLDZDQUFDLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUM1QyxJQUFJLENBQUMsZUFBZSxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUM7WUFDeEMsQ0FBQztRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztDQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy9keW5hbWljcy9jb21wb3Nlci50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiDliqjmgIHlj5HluIPlmajmqKHlnZdcbiAqIOi0n+i0o+WkhOeQhuWPkeW4g+aWsOWKqOaAgeeahOeVjOmdouWSjOmAu+i+kVxuICog57G75Ly85o6o54m55Y+R5biD6aG16Z2i55qE6K6+6K6hXG4gKi9cblxuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCB7IEdsb2JhbFVzZXJNYW5hZ2VyIH0gZnJvbSAnLi4vcHJvZmlsZS9HbG9iYWxVc2VyTWFuYWdlcic7XG5cbmV4cG9ydCBjbGFzcyBEeW5hbWljc0NvbXBvc2VyIHtcbiAgcHJpdmF0ZSBnbG9iYWxVc2VyTWFuYWdlcjogR2xvYmFsVXNlck1hbmFnZXI7XG4gIHByaXZhdGUgY3VycmVudFVzZXJBdmF0YXI6IHN0cmluZyA9ICcnO1xuICBwcml2YXRlIGN1cnJlbnRVc2VyTmFtZTogc3RyaW5nID0gJyc7XG4gIHByaXZhdGUgc291bmRNYW5hZ2VyOiBhbnk7IC8vIOmfs+aViOeuoeeQhuWZqOW8leeUqFxuXG4gIGNvbnN0cnVjdG9yKHNvdW5kTWFuYWdlcj86IGFueSkge1xuICAgIHRoaXMuZ2xvYmFsVXNlck1hbmFnZXIgPSBHbG9iYWxVc2VyTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuICAgIHRoaXMuc291bmRNYW5hZ2VyID0gc291bmRNYW5hZ2VyIHx8ICh3aW5kb3cgYXMgYW55KS5zb3VuZE1hbmFnZXI7XG4gICAgdGhpcy5pbml0aWFsaXplVXNlckluZm8oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliJ3lp4vljJbnlKjmiLfkv6Hmga9cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZVVzZXJJbmZvKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VyRGF0YSA9IGF3YWl0IHRoaXMuZ2xvYmFsVXNlck1hbmFnZXIubG9hZFVzZXJEYXRhKCk7XG4gICAgICBpZiAodXNlckRhdGEpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50VXNlckF2YXRhciA9IHVzZXJEYXRhLmF2YXRhciB8fCAnaHR0cHM6Ly9maWxlcy5jYXRib3gubW9lL2JwcXJ2Mi5qcGcnO1xuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyTmFtZSA9IHVzZXJEYXRhLm5hbWUgfHwgJ+eUqOaItyc7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+WIneWni+WMlueUqOaIt+S/oeaBr+Wksei0pTonLCBlcnJvcik7XG4gICAgICB0aGlzLmN1cnJlbnRVc2VyQXZhdGFyID0gJ2h0dHBzOi8vZmlsZXMuY2F0Ym94Lm1vZS9icHFydjIuanBnJztcbiAgICAgIHRoaXMuY3VycmVudFVzZXJOYW1lID0gJ+eUqOaItyc7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOa4suafk+WPkeW4g+WKqOaAgeeVjOmdolxuICAgKi9cbiAgcHVibGljIHJlbmRlckNvbXBvc2VySW50ZXJmYWNlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBcbiAgICAgIDxkaXYgaWQ9XCJkeW5hbWljc0NvbXBvc2VySW50ZXJmYWNlXCIgY2xhc3M9XCJkeW5hbWljcy1jb21wb3Nlci1pbnRlcmZhY2VcIj5cbiAgICAgICAgPCEtLSDpobbpg6jlr7zoiKrmoI8gLS0+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb21wb3Nlci1uYXYtYmFyXCI+XG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImNvbXBvc2VyLWJhY2stYnRuXCIgaWQ9XCJjb21wb3NlckJhY2tCdG5cIj5cbiAgICAgICAgICAgIDxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiIHdpZHRoPVwiMjBcIiBoZWlnaHQ9XCIyMFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgPHBhdGggZD1cIk0xOSAxMUg3LjgzbDUuNTktNS41OUwxMiA0bC04IDggOCA4IDEuNDEtMS40MUw3LjgzIDEzSDE5di0yelwiLz5cbiAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb21wb3Nlci1uYXYtdGl0bGVcIj7lj5HluIPliqjmgIE8L2Rpdj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiY29tcG9zZXItcG9zdC1idG5cIiBpZD1cImNvbXBvc2VyUG9zdEJ0blwiIGRpc2FibGVkPlxuICAgICAgICAgICAg5Y+R5biDXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDwhLS0g5Y+R5biD5YaF5a655Yy65Z+fIC0tPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29tcG9zZXItY29udGVudC1hcmVhXCI+XG4gICAgICAgICAgPCEtLSDovpPlhaXljLrln5/vvIzljIXlkKvlpLTlg4/lkozmlofmnKzmoYYgLS0+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNvbXBvc2VyLW1haW4tYXJlYVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbXBvc2VyLXVzZXItYXZhdGFyLXNtYWxsXCIgaWQ9XCJjb21wb3NlclVzZXJBdmF0YXJcIj48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb21wb3Nlci1pbnB1dC13cmFwcGVyXCI+XG4gICAgICAgICAgICAgIDx0ZXh0YXJlYVxuICAgICAgICAgICAgICAgIGlkPVwiY29tcG9zZXJUZXh0YXJlYVwiXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJjb21wb3Nlci10ZXh0YXJlYVwiXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCLmnInku4DkuYjmlrDpspzkuovvvJ9cIlxuICAgICAgICAgICAgICAgIG1heGxlbmd0aD1cIjI4MFwiXG4gICAgICAgICAgICAgID48L3RleHRhcmVhPlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgPCEtLSDlnIbnjq/lrZfmlbDnu5/orqEgLS0+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb21wb3Nlci1jaGFyLWNvdW50XCIgaWQ9XCJjaGFyQ291bnRDb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICA8c3ZnIHZpZXdCb3g9XCIwIDAgMzAgMzBcIj5cbiAgICAgICAgICAgICAgICAgIDxjaXJjbGUgY2xhc3M9XCJjaXJjbGUtYmdcIiBjeD1cIjE1XCIgY3k9XCIxNVwiIHI9XCIxMlwiPjwvY2lyY2xlPlxuICAgICAgICAgICAgICAgICAgPGNpcmNsZSBjbGFzcz1cImNpcmNsZS1wcm9ncmVzc1wiIGlkPVwiY2hhckNvdW50UHJvZ3Jlc3NcIiBjeD1cIjE1XCIgY3k9XCIxNVwiIHI9XCIxMlwiXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZS1kYXNoYXJyYXk9XCI3NS40XCIgc3Ryb2tlLWRhc2hvZmZzZXQ9XCI3NS40XCI+PC9jaXJjbGU+XG4gICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjaGFyLWNvdW50LXRleHRcIiBpZD1cImNoYXJDb3VudFRleHRcIj48L3NwYW4+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8IS0tIOWbvueJh+aPj+i/sOi+k+WFpeWMuu+8iOWIneWni+makOiXj++8iSAtLT5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29tcG9zZXItaW1hZ2UtZGVzY3JpcHRpb25cIiBpZD1cImltYWdlRGVzY3JpcHRpb25BcmVhXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPlxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgaWQ9XCJpbWFnZURlc2NyaXB0aW9uSW5wdXRcIlxuICAgICAgICAgICAgICBjbGFzcz1cImltYWdlLWRlc2NyaXB0aW9uLWlucHV0XCJcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCLmt7vliqDlm77niYfmj4/ov7AuLi5cIlxuICAgICAgICAgICAgICBtYXhsZW5ndGg9XCIxMDBcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJyZW1vdmUtaW1hZ2UtYnRuXCIgaWQ9XCJyZW1vdmVJbWFnZUJ0blwiPlxuICAgICAgICAgICAgICA8c3ZnIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiB3aWR0aD1cIjE2XCIgaGVpZ2h0PVwiMTZcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgPHBhdGggZD1cIk0xOSA2LjQxTDE3LjU5IDUgMTIgMTAuNTkgNi40MSA1IDUgNi40MSAxMC41OSAxMiA1IDE3LjU5IDYuNDEgMTkgMTIgMTMuNDEgMTcuNTkgMTkgMTkgMTcuNTkgMTMuNDEgMTJ6XCIvPlxuICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPCEtLSDlt6XlhbfmoI8gLSDlj6rkv53nlZnlm77niYfmjInpkq4gLS0+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNvbXBvc2VyLXRvb2xiYXJcIj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ0b29sYmFyLWJ0biBpbWFnZS1vbmx5XCIgaWQ9XCJhZGRJbWFnZUJ0blwiPlxuICAgICAgICAgICAgICA8c3ZnIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgPHBhdGggZD1cIk0xOSAzSDVjLTEuMSAwLTIgLjktMiAydjE0YzAgMS4xLjkgMiAyIDJoMTRjMS4xIDAgMi0uOSAyLTJWNWMwLTEuMS0uOS0yLTItMnpNOSAxMS41YzAgLjg1LS42NSAxLjUtMS41IDEuNVM2IDEyLjM1IDYgMTEuNSA2LjY1IDEwIDcuNSAxMCA5IDEwLjY1IDkgMTEuNXptOSA3LjVINmwzLTQgMiAyLjY3TDE0IDE0bDQgNXpcIi8+XG4gICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8IS0tIOmakOiXj+eahOaWh+S7tui+k+WFpSAtLT5cbiAgICAgICAgICA8aW5wdXQgdHlwZT1cImZpbGVcIiBpZD1cImltYWdlRmlsZUlucHV0XCIgYWNjZXB0PVwiaW1hZ2UvKlwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIneWni+WMluWPkeW4g+eVjOmdolxuICAgKi9cbiAgcHVibGljIGluaXRpYWxpemVDb21wb3NlcigpOiB2b2lkIHtcbiAgICAvLyDmm7TmlrDnlKjmiLflpLTlg49cbiAgICBjb25zdCAkYXZhdGFyID0gJCgnI2NvbXBvc2VyVXNlckF2YXRhcicpO1xuICAgIGlmICgkYXZhdGFyLmxlbmd0aCAmJiB0aGlzLmN1cnJlbnRVc2VyQXZhdGFyKSB7XG4gICAgICAkYXZhdGFyLmNzcygnYmFja2dyb3VuZC1pbWFnZScsIGB1cmwoJyR7dGhpcy5jdXJyZW50VXNlckF2YXRhcn0nKWApO1xuICAgIH1cblxuICAgIC8vIOe7keWumuS6i+S7tlxuICAgIHRoaXMuYmluZENvbXBvc2VyRXZlbnRzKCk7XG5cbiAgICAvLyDliJ3lp4vljJblrZfmlbDnu5/orqHlnIbnjq9cbiAgICB0aGlzLnVwZGF0ZUNoYXJDb3VudENpcmNsZSgwLCAyODApO1xuXG4gICAgLy8g55uR5ZCs55So5oi35aS05YOP5Y+Y5YyWXG4gICAgdGhpcy5zZXR1cFVzZXJBdmF0YXJMaXN0ZW5lcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIOe7keWumuWPkeW4g+eVjOmdouS6i+S7tlxuICAgKi9cbiAgcHJpdmF0ZSBiaW5kQ29tcG9zZXJFdmVudHMoKTogdm9pZCB7XG4gICAgLy8g5YWI6Kej57uR5omA5pyJ5LqL5Lu277yM6YG/5YWN6YeN5aSN57uR5a6aXG4gICAgJCgnI2NvbXBvc2VyQmFja0J0bicpLm9mZignY2xpY2snKTtcbiAgICAkKCcjY29tcG9zZXJUZXh0YXJlYScpLm9mZignaW5wdXQnKTtcbiAgICAkKCcjYWRkSW1hZ2VCdG4nKS5vZmYoJ2NsaWNrJyk7XG4gICAgJCgnI3JlbW92ZUltYWdlQnRuJykub2ZmKCdjbGljaycpO1xuICAgICQoJyNjb21wb3NlclBvc3RCdG4nKS5vZmYoJ2NsaWNrJyk7XG4gICAgXG4gICAgLy8g6L+U5Zue5oyJ6ZKuXG4gICAgJCgnI2NvbXBvc2VyQmFja0J0bicpLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgIC8vIOaSreaUvmNsaWNr6Z+z5pWIXG4gICAgICBpZiAodGhpcy5zb3VuZE1hbmFnZXI/LnBsYXlTb3VuZCkge1xuICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5U291bmQoJ2NsaWNrJyk7XG4gICAgICB9XG4gICAgICB0aGlzLmNsb3NlQ29tcG9zZXIoKTtcbiAgICB9KTtcblxuICAgIC8vIOaWh+acrOi+k+WFpeS6i+S7tlxuICAgIGNvbnN0ICR0ZXh0YXJlYSA9ICQoJyNjb21wb3NlclRleHRhcmVhJyk7XG4gICAgY29uc3QgJHBvc3RCdG4gPSAkKCcjY29tcG9zZXJQb3N0QnRuJyk7XG4gICAgY29uc3QgJGNoYXJDb3VudCA9ICQoJyNjaGFyQ291bnQnKTtcblxuICAgICR0ZXh0YXJlYS5vbignaW5wdXQnLCAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXh0ID0gJHRleHRhcmVhLnZhbCgpIGFzIHN0cmluZztcbiAgICAgIGNvbnN0IGxlbmd0aCA9IHRleHQubGVuZ3RoO1xuICAgICAgY29uc3QgbWF4TGVuZ3RoID0gMjgwO1xuICAgICAgXG4gICAgICAvLyDoh6rliqjosIPmlbTmlofmnKzmoYbpq5jluqZcbiAgICAgIHRoaXMuYXV0b1Jlc2l6ZVRleHRhcmVhKCR0ZXh0YXJlYVswXSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50KTtcbiAgICAgIFxuICAgICAgLy8g5pu05paw5ZyG546v6L+b5bqmXG4gICAgICB0aGlzLnVwZGF0ZUNoYXJDb3VudENpcmNsZShsZW5ndGgsIG1heExlbmd0aCk7XG5cbiAgICAgIC8vIOWQr+eUqC/npoHnlKjlj5HluIPmjInpkq5cbiAgICAgIGNvbnN0IGhhc0NvbnRlbnQgPSB0ZXh0LnRyaW0oKS5sZW5ndGggPiAwICYmIGxlbmd0aCA8PSBtYXhMZW5ndGg7XG4gICAgICBjb25zdCBoYXNJbWFnZSA9ICQoJyNpbWFnZURlc2NyaXB0aW9uQXJlYScpLmlzKCc6dmlzaWJsZScpO1xuICAgICAgJHBvc3RCdG4ucHJvcCgnZGlzYWJsZWQnLCAhaGFzQ29udGVudCAmJiAhaGFzSW1hZ2UpO1xuICAgIH0pO1xuXG4gICAgLy8g5re75Yqg5Zu+54mH5oyJ6ZKuIC0g546w5Zyo5piv5re75Yqg5Zu+54mH5o+P6L+wXG4gICAgJCgnI2FkZEltYWdlQnRuJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29uc3QgJGRlc2NBcmVhID0gJCgnI2ltYWdlRGVzY3JpcHRpb25BcmVhJyk7XG4gICAgICBpZiAoJGRlc2NBcmVhLmlzKCc6dmlzaWJsZScpKSB7XG4gICAgICAgIC8vIOWmguaenOW3sue7j+aYvuekuu+8jOWImemakOiXj1xuICAgICAgICB0aGlzLnJlbW92ZUltYWdlRGVzY3JpcHRpb24oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOaYvuekuuWbvueJh+aPj+i/sOi+k+WFpeWMulxuICAgICAgICAkZGVzY0FyZWEuc2hvdygpO1xuICAgICAgICAkKCcjaW1hZ2VEZXNjcmlwdGlvbklucHV0JykuZm9jdXMoKTtcbiAgICAgICAgJCgnI2FkZEltYWdlQnRuJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICBcbiAgICAgICAgLy8g5pu05paw5Y+R5biD5oyJ6ZKu54q25oCBXG4gICAgICAgIGNvbnN0IGhhc0NvbnRlbnQgPSAoJHRleHRhcmVhLnZhbCgpIGFzIHN0cmluZykudHJpbSgpLmxlbmd0aCA+IDA7XG4gICAgICAgICRwb3N0QnRuLnByb3AoJ2Rpc2FibGVkJywgIWhhc0NvbnRlbnQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8g56e76Zmk5Zu+54mH5o+P6L+wXG4gICAgJCgnI3JlbW92ZUltYWdlQnRuJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5yZW1vdmVJbWFnZURlc2NyaXB0aW9uKCk7XG4gICAgfSk7XG5cbiAgICAvLyDlj5HluIPmjInpkq5cbiAgICAkKCcjY29tcG9zZXJQb3N0QnRuJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgLy8g5pKt5pS+ZW1vamnpn7PmlYjvvIjlj5HluIPliqjmgIHmiJDlip/pn7PmlYjvvIlcbiAgICAgIGlmICh0aGlzLnNvdW5kTWFuYWdlcj8ucGxheVNvdW5kKSB7XG4gICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXlTb3VuZCgnZW1vamknKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucHVibGlzaER5bmFtaWMoKTtcbiAgICB9KTtcblxuICAgIC8vIOiHquWKqOiBmueEplxuICAgICR0ZXh0YXJlYS5mb2N1cygpO1xuICB9XG5cbiAgLyoqXG4gICAqIOenu+mZpOWbvueJh+aPj+i/sFxuICAgKi9cbiAgcHJpdmF0ZSByZW1vdmVJbWFnZURlc2NyaXB0aW9uKCk6IHZvaWQge1xuICAgICQoJyNpbWFnZURlc2NyaXB0aW9uQXJlYScpLmhpZGUoKTtcbiAgICAkKCcjaW1hZ2VEZXNjcmlwdGlvbklucHV0JykudmFsKCcnKTtcbiAgICAkKCcjYWRkSW1hZ2VCdG4nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgXG4gICAgLy8g5qOA5p+l5piv5ZCm6L+Y5pyJ5YaF5a65XG4gICAgY29uc3QgdGV4dCA9ICQoJyNjb21wb3NlclRleHRhcmVhJykudmFsKCkgYXMgc3RyaW5nO1xuICAgIGlmICghdGV4dC50cmltKCkpIHtcbiAgICAgICQoJyNjb21wb3NlclBvc3RCdG4nKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDnp7vpmaTlm77niYfvvIjlhbzlrrnml6fmlrnms5XvvIlcbiAgICovXG4gIHByaXZhdGUgcmVtb3ZlSW1hZ2UoKTogdm9pZCB7XG4gICAgdGhpcy5yZW1vdmVJbWFnZURlc2NyaXB0aW9uKCk7XG4gIH1cblxuICAvKipcbiAgICog5Y+R5biD5Yqo5oCBXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHB1Ymxpc2hEeW5hbWljKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGNvbnRlbnQgPSAkKCcjY29tcG9zZXJUZXh0YXJlYScpLnZhbCgpIGFzIHN0cmluZztcbiAgICBjb25zdCBpbWFnZURlc2NyaXB0aW9uID0gJCgnI2ltYWdlRGVzY3JpcHRpb25JbnB1dCcpLnZhbCgpIGFzIHN0cmluZztcbiAgICBjb25zdCBoYXNJbWFnZURlc2NyaXB0aW9uID0gJCgnI2ltYWdlRGVzY3JpcHRpb25BcmVhJykuaXMoJzp2aXNpYmxlJykgJiYgaW1hZ2VEZXNjcmlwdGlvbi50cmltKCk7XG5cbiAgICBpZiAoIWNvbnRlbnQudHJpbSgpICYmICFoYXNJbWFnZURlc2NyaXB0aW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8g56aB55So5Y+R5biD5oyJ6ZKu77yM5pi+56S65Yqg6L2954q25oCBXG4gICAgY29uc3QgJHBvc3RCdG4gPSAkKCcjY29tcG9zZXJQb3N0QnRuJyk7XG4gICAgJHBvc3RCdG4ucHJvcCgnZGlzYWJsZWQnLCB0cnVlKS50ZXh0KCflj5HluIPkuK0uLi4nKTtcblxuICAgIHRyeSB7XG4gICAgICAvLyDojrflj5blvZPliY3mtojmga/vvIjnlKjkuo7ojrflj5bkuIvkuIDkuKrliqjmgIHnvJblj7fvvIlcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gZ2V0Q2hhdE1lc3NhZ2VzKCcwLXt7bGFzdE1lc3NhZ2VJZH19Jyk7XG4gICAgICBcbiAgICAgIC8vIOafpeaJvuacgOWkp+eahOWKqOaAgee8luWPt1xuICAgICAgbGV0IG1heER5bmFtaWNObyA9IDA7XG4gICAgICBmb3IgKGNvbnN0IG1zZyBvZiBtZXNzYWdlcykge1xuICAgICAgICBpZiAobXNnLm1lc3NhZ2UgJiYgdHlwZW9mIG1zZy5tZXNzYWdlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSBtc2cubWVzc2FnZS5tYXRjaEFsbCgvXFxb5Yqo5oCBXyhcXGQrKVteXFxdXSpcXF0vZyk7XG4gICAgICAgICAgZm9yIChjb25zdCBtYXRjaCBvZiBtYXRjaGVzKSB7XG4gICAgICAgICAgICBjb25zdCBubyA9IHBhcnNlSW50KG1hdGNoWzFdLCAxMCk7XG4gICAgICAgICAgICBpZiAobm8gPiBtYXhEeW5hbWljTm8pIHtcbiAgICAgICAgICAgICAgbWF4RHluYW1pY05vID0gbm87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIOaWsOWKqOaAgee8luWPt1xuICAgICAgY29uc3QgbmV3RHluYW1pY05vID0gbWF4RHluYW1pY05vICsgMTtcbiAgICAgIFxuICAgICAgLy8g5qC85byP5YyW5pe26Ze05oizIC0g5LiO6K+E6K665L+d5oyB5LiA6Ie077yM5L2/55SoIEhIOm1tIOagvOW8j1xuICAgICAgY29uc3QgZm9ybWF0VGltZXN0YW1wID0gKGRhdGU6IERhdGUpOiBzdHJpbmcgPT4ge1xuICAgICAgICBjb25zdCBoaCA9IFN0cmluZyhkYXRlLmdldEhvdXJzKCkpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgICAgIGNvbnN0IG1pID0gU3RyaW5nKGRhdGUuZ2V0TWludXRlcygpKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgICByZXR1cm4gYCR7aGh9OiR7bWl9YDtcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IGZvcm1hdFRpbWVzdGFtcChuZXcgRGF0ZSgpKTtcbiAgICAgIFxuICAgICAgLy8g5p6E5bu65Yqo5oCB6KGMXG4gICAgICBsZXQgZHluYW1pY0xpbmU6IHN0cmluZztcbiAgICAgIGlmIChoYXNJbWFnZURlc2NyaXB0aW9uKSB7XG4gICAgICAgIC8vIOacieWbvueJh+aPj+i/sOaXtueahOagvOW8j++8mlvliqjmgIFf57yW5Y+3fHVzZXJ85paH5a2X5YaF5a65fOWbvueJh+aPj+i/sHzml7bpl7TmiLNdXG4gICAgICAgIGR5bmFtaWNMaW5lID0gYFvliqjmgIFfJHtuZXdEeW5hbWljTm99fHVzZXJ8JHtjb250ZW50LnRyaW0oKX18JHtpbWFnZURlc2NyaXB0aW9uLnRyaW0oKX18JHt0aW1lc3RhbXB9XWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyDlj6rmnInmloflrZfml7bnmoTmoLzlvI/vvJpb5Yqo5oCBX+e8luWPt3x1c2VyfOaWh+Wtl+WGheWuuXzml7bpl7TmiLNdXG4gICAgICAgIGR5bmFtaWNMaW5lID0gYFvliqjmgIFfJHtuZXdEeW5hbWljTm99fHVzZXJ8JHtjb250ZW50LnRyaW0oKX18JHt0aW1lc3RhbXB9XWA7XG4gICAgICB9XG5cbiAgICAgIC8vIOiOt+WPluacgOaWsOa2iOaBr+W5tuabtOaWsFxuICAgICAgY29uc3QgbGFzdE1lc3NhZ2UgPSBtZXNzYWdlc1ttZXNzYWdlcy5sZW5ndGggLSAxXTtcbiAgICAgIGlmIChsYXN0TWVzc2FnZSkge1xuICAgICAgICBsZXQgbWVzc2FnZVRleHQgPSBsYXN0TWVzc2FnZS5tZXNzYWdlIHx8ICcnO1xuICAgICAgICBcbiAgICAgICAgLy8g5aaC5p6c5bey57uP5pyJW+WKqOaAgV3lrrnlmajvvIzlnKjlrrnlmajlhoXmt7vliqDvvJvlkKbliJnlnKg8YmVhcj7moIfnrb7lhoXmt7vliqDmlrDlrrnlmahcbiAgICAgICAgaWYgKG1lc3NhZ2VUZXh0LmluY2x1ZGVzKCdb5Yqo5oCBXScpICYmIG1lc3NhZ2VUZXh0LmluY2x1ZGVzKCdbL+WKqOaAgV0nKSkge1xuICAgICAgICAgIC8vIOWcqOeOsOacieWuueWZqOWGhea3u+WKoFxuICAgICAgICAgIGNvbnN0IGVuZFRhZ0luZGV4ID0gbWVzc2FnZVRleHQuaW5kZXhPZignWy/liqjmgIFdJyk7XG4gICAgICAgICAgY29uc3QgYmVmb3JlRW5kID0gbWVzc2FnZVRleHQuc2xpY2UoMCwgZW5kVGFnSW5kZXgpLnRyaW1FbmQoKTtcbiAgICAgICAgICBjb25zdCBhZnRlckVuZCA9IG1lc3NhZ2VUZXh0LnNsaWNlKGVuZFRhZ0luZGV4KTtcbiAgICAgICAgICBcbiAgICAgICAgICBtZXNzYWdlVGV4dCA9IGAke2JlZm9yZUVuZH1cXG4ke2R5bmFtaWNMaW5lfVxcbiR7YWZ0ZXJFbmR9YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyDpnIDopoHliJvlu7rmlrDnmoRb5Yqo5oCBXeWuueWZqFxuICAgICAgICAgIGNvbnN0IGR5bmFtaWNDb250ZW50ID0gYFvliqjmgIFdXFxuJHtkeW5hbWljTGluZX1cXG5bL+WKqOaAgV1gO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIOajgOafpeaYr+WQpuaciTxiZWFyPuagh+etvlxuICAgICAgICAgIGlmIChtZXNzYWdlVGV4dC5pbmNsdWRlcygnPGJlYXI+JykgJiYgbWVzc2FnZVRleHQuaW5jbHVkZXMoJzwvYmVhcj4nKSkge1xuICAgICAgICAgICAgLy8g5ZyoPC9iZWFyPuagh+etvuWJjeaPkuWFpeWKqOaAgeWuueWZqFxuICAgICAgICAgICAgY29uc3QgYmVhckVuZEluZGV4ID0gbWVzc2FnZVRleHQuaW5kZXhPZignPC9iZWFyPicpO1xuICAgICAgICAgICAgY29uc3QgYmVmb3JlQmVhckVuZCA9IG1lc3NhZ2VUZXh0LnNsaWNlKDAsIGJlYXJFbmRJbmRleCkudHJpbUVuZCgpO1xuICAgICAgICAgICAgY29uc3QgYWZ0ZXJCZWFyRW5kID0gbWVzc2FnZVRleHQuc2xpY2UoYmVhckVuZEluZGV4KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbWVzc2FnZVRleHQgPSBgJHtiZWZvcmVCZWFyRW5kfVxcblxcbiR7ZHluYW1pY0NvbnRlbnR9XFxuJHthZnRlckJlYXJFbmR9YDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8g5aaC5p6c5rKh5pyJPGJlYXI+5qCH562+77yM5Yib5bu65LiA5LiqXG4gICAgICAgICAgICBtZXNzYWdlVGV4dCA9IG1lc3NhZ2VUZXh0LnRyaW1FbmQoKSArICdcXG5cXG48YmVhcj5cXG4nICsgZHluYW1pY0NvbnRlbnQgKyAnXFxuPC9iZWFyPic7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDmm7TmlrDmtojmga9cbiAgICAgICAgYXdhaXQgc2V0Q2hhdE1lc3NhZ2VzKFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbWVzc2FnZV9pZDogbGFzdE1lc3NhZ2UubWVzc2FnZV9pZCxcbiAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVRleHQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgeyByZWZyZXNoOiAnbm9uZScgfSxcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKGDinIUg5oiQ5Yqf5Y+R5biD5Yqo5oCBICMke25ld0R5bmFtaWNOb30g5Yiw5qW85bGCICR7bGFzdE1lc3NhZ2UubWVzc2FnZV9pZH1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOWmguaenOayoeaciea2iOaBr++8jOWIm+W7uuaWsOa2iOaBr1xuICAgICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyDmsqHmnInmib7liLDmtojmga/vvIzlj6/og73pnIDopoHlhYjlj5HpgIHkuIDmnaHmtojmga8nKTtcbiAgICAgICAgdG9hc3RyLndhcm5pbmcoJ+ivt+WFiOWcqOiBiuWkqeS4reWPkemAgeS4gOadoea2iOaBrycpO1xuICAgICAgICAkcG9zdEJ0bi5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKS50ZXh0KCflj5HluIMnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyDlhbPpl63lj5HluIPnlYzpnaJcbiAgICAgIHRoaXMuY2xvc2VDb21wb3NlcigpO1xuICAgICAgXG4gICAgICAvLyDmgaLlpI3lj5HluIPmjInpkq7mlofmnKxcbiAgICAgICRwb3N0QnRuLnRleHQoJ+WPkeW4gycpO1xuXG4gICAgICAvLyDliqjmgIHmt7vliqDliLBVSe+8iOS4jeWIt+aWsOaVtOS4queVjOmdou+8ie+8jOW5tuW4puS4iuaVsOaNruaJgOWcqOalvOWxgklE77yM5L6/5LqO5ZCO57ut6Leo5qW85bGC5a6a5L2NXG4gICAgICBhd2FpdCB0aGlzLmFkZER5bmFtaWNUb1VJKFxuICAgICAgICBuZXdEeW5hbWljTm8sXG4gICAgICAgIGNvbnRlbnQudHJpbSgpLFxuICAgICAgICBoYXNJbWFnZURlc2NyaXB0aW9uID8gaW1hZ2VEZXNjcmlwdGlvbi50cmltKCkgOiB1bmRlZmluZWQsXG4gICAgICAgIHRpbWVzdGFtcCxcbiAgICAgICAgbGFzdE1lc3NhZ2UubWVzc2FnZV9pZFxuICAgICAgKTtcbiAgICAgIFxuICAgICAgLy8g5rS+5Y+R6Ieq5a6a5LmJ5LqL5Lu277yI55So5LqO5YW25LuW5qih5Z2X55uR5ZCs77yJKyDlhbzlrrkgalF1ZXJ5IOS6i+S7tuWQjVxuICAgICAgY29uc3QgcHVibGlzaGVkRGV0YWlsID0ge1xuICAgICAgICBkeW5hbWljTm86IG5ld0R5bmFtaWNObyxcbiAgICAgICAgY29udGVudDogY29udGVudC50cmltKCksXG4gICAgICAgIGltYWdlRGVzY3JpcHRpb246IGhhc0ltYWdlRGVzY3JpcHRpb24gPyBpbWFnZURlc2NyaXB0aW9uLnRyaW0oKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgdGltZXN0YW1wOiB0aW1lc3RhbXAsXG4gICAgICAgIG1lc3NhZ2VJZDogbGFzdE1lc3NhZ2UubWVzc2FnZV9pZCxcbiAgICAgIH07XG4gICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnZHluYW1pY3NQdWJsaXNoZWQnLCB7IGRldGFpbDogcHVibGlzaGVkRGV0YWlsIH0pKTtcbiAgICAgIC8vIOWFvOWuueeuoeeQhuS+p+ebkeWQrOeahCBqUXVlcnkg5LqL5Lu25ZCN77yI5bim5YaS5Y+377yJXG4gICAgICB0cnkge1xuICAgICAgICAkKHdpbmRvdykudHJpZ2dlcignZHluYW1pY3M6cHVibGlzaGVkJywgW3B1Ymxpc2hlZERldGFpbF0pO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyDop6blj5EgZHluYW1pY3M6cHVibGlzaGVkIOS6i+S7tuWksei0pTonLCBlKTtcbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCflj5HluIPliqjmgIHlpLHotKU6JywgZXJyb3IpO1xuICAgICAgdG9hc3RyLmVycm9yKCflj5HluIPlpLHotKXvvIzor7fph43or5UnKTtcbiAgICAgICRwb3N0QnRuLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpLnRleHQoJ+WPkeW4gycpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlhbPpl63lj5HluIPnlYzpnaJcbiAgICovXG4gIHByaXZhdGUgY2xvc2VDb21wb3NlcigpOiB2b2lkIHtcbiAgICAvLyDlj6rpmpDol4/lj5HluIPnlYzpnaLvvIzkuI3lvbHlk43kuIvlsYLnmoTliqjmgIHnlYzpnaJcbiAgICAkKCcjZHluYW1pY3NDb21wb3NlckludGVyZmFjZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKS5oaWRlKCk7XG4gICAgXG4gICAgLy8g5riF55CG6L6T5YWl5YaF5a65XG4gICAgJCgnI2NvbXBvc2VyVGV4dGFyZWEnKS52YWwoJycpO1xuICAgIHRoaXMudXBkYXRlQ2hhckNvdW50Q2lyY2xlKDAsIDI4MCk7XG4gICAgJCgnI2NvbXBvc2VyUG9zdEJ0bicpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgXG4gICAgLy8g5riF55CG5Zu+54mH5o+P6L+wXG4gICAgdGhpcy5yZW1vdmVJbWFnZURlc2NyaXB0aW9uKCk7XG4gIH1cblxuICAvKipcbiAgICog6Ieq5Yqo6LCD5pW05paH5pys5qGG6auY5bqmXG4gICAqL1xuICBwcml2YXRlIGF1dG9SZXNpemVUZXh0YXJlYSh0ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCk6IHZvaWQge1xuICAgIC8vIOmHjee9rumrmOW6puS7peiOt+WPluato+ehrueahHNjcm9sbEhlaWdodFxuICAgIHRleHRhcmVhLnN0eWxlLmhlaWdodCA9ICdhdXRvJztcbiAgICAvLyDorr7nva7mlrDpq5jluqZcbiAgICB0ZXh0YXJlYS5zdHlsZS5oZWlnaHQgPSB0ZXh0YXJlYS5zY3JvbGxIZWlnaHQgKyAncHgnO1xuICB9XG5cbiAgLyoqXG4gICAqIOabtOaWsOWtl+aVsOe7n+iuoeWchueOr1xuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVDaGFyQ291bnRDaXJjbGUoY3VycmVudDogbnVtYmVyLCBtYXg6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IHBlcmNlbnRhZ2UgPSAoY3VycmVudCAvIG1heCkgKiAxMDA7XG4gICAgY29uc3QgY2lyY3VtZmVyZW5jZSA9IDIgKiBNYXRoLlBJICogMTI7IC8vIOWNiuW+hDEy55qE5ZyG5ZGo6ZW/XG4gICAgY29uc3Qgb2Zmc2V0ID0gY2lyY3VtZmVyZW5jZSAtIChwZXJjZW50YWdlIC8gMTAwKSAqIGNpcmN1bWZlcmVuY2U7XG4gICAgXG4gICAgY29uc3QgJHByb2dyZXNzID0gJCgnI2NoYXJDb3VudFByb2dyZXNzJyk7XG4gICAgY29uc3QgJHRleHQgPSAkKCcjY2hhckNvdW50VGV4dCcpO1xuICAgIFxuICAgIC8vIOabtOaWsOi/m+W6puadoVxuICAgICRwcm9ncmVzcy5jc3MoJ3N0cm9rZS1kYXNob2Zmc2V0Jywgb2Zmc2V0KTtcbiAgICBcbiAgICAvLyDmm7TmlrDpopzoibLlkozmloflrZdcbiAgICBpZiAoY3VycmVudCA+IG1heCkge1xuICAgICAgLy8g6LaF5Ye66ZmQ5Yi2XG4gICAgICAkcHJvZ3Jlc3MucmVtb3ZlQ2xhc3MoJ3dhcm5pbmcnKS5hZGRDbGFzcygnZGFuZ2VyJyk7XG4gICAgICAkdGV4dC5yZW1vdmVDbGFzcygnd2FybmluZycpLmFkZENsYXNzKCdkYW5nZXInKTtcbiAgICAgICR0ZXh0LnRleHQoYC0ke2N1cnJlbnQgLSBtYXh9YCk7XG4gICAgfSBlbHNlIGlmIChjdXJyZW50ID4gbWF4ICogMC45KSB7XG4gICAgICAvLyDorablkYrljLrln5/vvIjliankvZkxMCXku6XlhoXvvIlcbiAgICAgICRwcm9ncmVzcy5hZGRDbGFzcygnd2FybmluZycpLnJlbW92ZUNsYXNzKCdkYW5nZXInKTtcbiAgICAgICR0ZXh0LmFkZENsYXNzKCd3YXJuaW5nJykucmVtb3ZlQ2xhc3MoJ2RhbmdlcicpO1xuICAgICAgJHRleHQudGV4dChtYXggLSBjdXJyZW50KTtcbiAgICB9IGVsc2UgaWYgKGN1cnJlbnQgPiBtYXggKiAwLjgpIHtcbiAgICAgIC8vIOaYvuekuuWJqeS9meWtl+aVsFxuICAgICAgJHByb2dyZXNzLnJlbW92ZUNsYXNzKCd3YXJuaW5nIGRhbmdlcicpO1xuICAgICAgJHRleHQucmVtb3ZlQ2xhc3MoJ3dhcm5pbmcgZGFuZ2VyJyk7XG4gICAgICAkdGV4dC50ZXh0KG1heCAtIGN1cnJlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyDmraPluLjnirbmgIHvvIzkuI3mmL7npLrmlbDlrZdcbiAgICAgICRwcm9ncmVzcy5yZW1vdmVDbGFzcygnd2FybmluZyBkYW5nZXInKTtcbiAgICAgICR0ZXh0LnJlbW92ZUNsYXNzKCd3YXJuaW5nIGRhbmdlcicpO1xuICAgICAgJHRleHQudGV4dCgnJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOWKqOaAgea3u+WKoOWIsFVJ77yI5LiN5Yi35paw5pW05Liq55WM6Z2i77yJXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGFkZER5bmFtaWNUb1VJKGR5bmFtaWNObzogbnVtYmVyLCBjb250ZW50OiBzdHJpbmcsIGltYWdlRGVzY3JpcHRpb24/OiBzdHJpbmcsIHRpbWVzdGFtcD86IHN0cmluZywgbWVzc2FnZUlkPzogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8g6I635Y+W5a6e6ZmF55So5oi35ZCN55So5LqO5pi+56S6XG4gICAgY29uc3QgdXNlck5hbWVSYXcgPSBhd2FpdCB0cmlnZ2VyU2xhc2goJy9wYXNzIHt7dXNlcn19Jyk7XG4gICAgY29uc3QgZGlzcGxheVVzZXJOYW1lID0gKHVzZXJOYW1lUmF3IHx8ICcnKS50cmltKCkgfHwgJ+eUqOaItyc7XG5cbiAgICAvLyDmnoTlu7rmlrDliqjmgIHnmoRIVE1MXG4gICAgY29uc3QgZGF0YU1zZ0lkQXR0ciA9IG1lc3NhZ2VJZCAhPSBudWxsID8gYCBkYXRhLW1lc3NhZ2UtaWQ9XCIke21lc3NhZ2VJZH1cImAgOiAnJztcbiAgICBjb25zdCBkeW5hbWljSHRtbCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJkeW5hbWljcy1wb3N0XCIgZGF0YS1wb3N0LWlkPVwiZHluYW1pY3NfJHtkeW5hbWljTm99XCIke2RhdGFNc2dJZEF0dHJ9PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZHluYW1pY3MtcG9zdC1oZWFkZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZHluYW1pY3MtcG9zdC1hdmF0YXJcIiBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6IHVybCgnJHt0aGlzLmN1cnJlbnRVc2VyQXZhdGFyfScpXCI+PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImR5bmFtaWNzLXBvc3QtaW5mb1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImR5bmFtaWNzLXBvc3QtbmFtZVwiPiR7ZGlzcGxheVVzZXJOYW1lfTwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImR5bmFtaWNzLXBvc3QtdGltZVwiPuWImuWImjwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImR5bmFtaWNzLXBvc3QtY29udGVudFwiPiR7dGhpcy5mb3JtYXRDb250ZW50KGNvbnRlbnQpfTwvZGl2PlxuICAgICAgICAke2ltYWdlRGVzY3JpcHRpb24gPyBgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImR5bmFtaWNzLXBvc3QtaW1hZ2VcIiBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6IHVybCgnaHR0cHM6Ly9maWxlcy5jYXRib3gubW9lLzhtanZkZy5qcGcnKVwiIGRhdGEtZGVzY3JpcHRpb249XCIke2ltYWdlRGVzY3JpcHRpb259XCI+PC9kaXY+XG4gICAgICAgIGAgOiAnJ31cbiAgICAgICAgPGRpdiBjbGFzcz1cImR5bmFtaWNzLXBvc3QtYWN0aW9uc1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJkeW5hbWljcy1wb3N0LWFjdGlvblwiIGRhdGEtYWN0aW9uPVwibGlrZVwiPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJhY3Rpb24taWNvblwiPlxuICAgICAgICAgICAgICA8c3ZnIGNsYXNzPVwiYWN0aW9uLXN2Z1wiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cbiAgICAgICAgICAgICAgICA8cGF0aCBkPVwiTTEyIDIxLjM1bC0xLjQ1LTEuMzJDNS40IDE1LjM2IDIgMTIuMjggMiA4LjUgMiA1LjQyIDQuNDIgMyA3LjUgM2MxLjc0IDAgMy40MS44MSA0LjUgMi4wOUMxMy4wOSAzLjgxIDE0Ljc2IDMgMTYuNSAzIDE5LjU4IDMgMjIgNS40MiAyMiA4LjVjMCAzLjc4LTMuNCA2Ljg2LTguNTUgMTEuNTRMMTIgMjEuMzV6XCIvPlxuICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZHluYW1pY3MtcG9zdC1hY3Rpb25cIiBkYXRhLWFjdGlvbj1cImNvbW1lbnRcIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYWN0aW9uLWljb25cIj5cbiAgICAgICAgICAgICAgPHN2ZyBjbGFzcz1cImFjdGlvbi1zdmdcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XG4gICAgICAgICAgICAgICAgPHBhdGggZD1cIk0yMCAySDRjLTEuMSAwLTIgLjktMiAydjEyYzAgMS4xLjkgMiAyIDJoMTRsNCA0VjRjMC0xLjEtLjktMi0yLTJ6bS0yIDEySDZ2LTJoMTJ2MnptMC0zSDZWOWgxMnYyem0wLTNINlY2aDEydjJ6XCIvPlxuICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuXG4gICAgLy8g5re75Yqg5Yiw5pe26Ze057q/6aG26YOoXG4gICAgY29uc3QgJHRpbWVsaW5lID0gJCgnI2R5bmFtaWNzVGltZWxpbmUnKTtcbiAgICBjb25zdCAkbmV3UG9zdCA9ICQoZHluYW1pY0h0bWwpO1xuICAgIFxuICAgIC8vIOWmguaenOacieepuueKtuaAgeaPkOekuu+8jOWFiOenu+mZpFxuICAgICR0aW1lbGluZS5maW5kKCcuZHluYW1pY3MtZW1wdHknKS5yZW1vdmUoKTtcbiAgICBcbiAgICAvLyDmt7vliqDmt6HlhaXliqjnlLtcbiAgICAkbmV3UG9zdC5oaWRlKCk7XG4gICAgJHRpbWVsaW5lLnByZXBlbmQoJG5ld1Bvc3QpO1xuICAgICRuZXdQb3N0LmZhZGVJbigzMDApO1xuICB9XG5cbiAgLyoqXG4gICAqIOagvOW8j+WMluWGheWuueaWh+acrO+8iOWkhOeQhumTvuaOpeOAgUDmj5Dlj4rjgIHor53popjmoIfnrb7vvIlcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0Q29udGVudChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGxldCBmb3JtYXR0ZWRDb250ZW50ID0gY29udGVudDtcbiAgICBcbiAgICAvLyDlpITnkIbpk77mjqVcbiAgICBmb3JtYXR0ZWRDb250ZW50ID0gZm9ybWF0dGVkQ29udGVudC5yZXBsYWNlKFxuICAgICAgL2h0dHBzPzpcXC9cXC9bXlxcc10rL2csXG4gICAgICAodXJsKSA9PiBgPGEgaHJlZj1cIiR7dXJsfVwiIHRhcmdldD1cIl9ibGFua1wiIGNsYXNzPVwiZHluYW1pY3MtbGlua1wiPiR7dXJsfTwvYT5gXG4gICAgKTtcbiAgICBcbiAgICAvLyDlpITnkIZA5o+Q5Y+KXG4gICAgZm9ybWF0dGVkQ29udGVudCA9IGZvcm1hdHRlZENvbnRlbnQucmVwbGFjZShcbiAgICAgIC9AKFxcdyspL2csXG4gICAgICAnPHNwYW4gY2xhc3M9XCJkeW5hbWljcy1tZW50aW9uXCI+QCQxPC9zcGFuPidcbiAgICApO1xuICAgIFxuICAgIC8vIOWkhOeQhuivnemimOagh+etvlxuICAgIGZvcm1hdHRlZENvbnRlbnQgPSBmb3JtYXR0ZWRDb250ZW50LnJlcGxhY2UoXG4gICAgICAvIyhbXlxcc10rKS9nLFxuICAgICAgJzxzcGFuIGNsYXNzPVwiZHluYW1pY3MtaGFzaHRhZ1wiPiMkMTwvc3Bhbj4nXG4gICAgKTtcbiAgICBcbiAgICByZXR1cm4gZm9ybWF0dGVkQ29udGVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiDorr7nva7nlKjmiLflpLTlg4/lj5jmm7Tnm5HlkKzlmahcbiAgICovXG4gIHByaXZhdGUgc2V0dXBVc2VyQXZhdGFyTGlzdGVuZXIoKTogdm9pZCB7XG4gICAgdGhpcy5nbG9iYWxVc2VyTWFuYWdlci5hZGRFdmVudExpc3RlbmVyKCdhdmF0YXInLCAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnN0ICRhdmF0YXIgPSAkKCcjY29tcG9zZXJVc2VyQXZhdGFyJyk7XG4gICAgICBpZiAoJGF2YXRhci5sZW5ndGggJiYgZXZlbnQubmV3VmFsdWUpIHtcbiAgICAgICAgJGF2YXRhci5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCBgdXJsKCcke2V2ZW50Lm5ld1ZhbHVlfScpYCk7XG4gICAgICAgIHRoaXMuY3VycmVudFVzZXJBdmF0YXIgPSBldmVudC5uZXdWYWx1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuZ2xvYmFsVXNlck1hbmFnZXIuYWRkRXZlbnRMaXN0ZW5lcignbmFtZScsIChldmVudCkgPT4ge1xuICAgICAgaWYgKGV2ZW50Lm5ld1ZhbHVlKSB7XG4gICAgICAgICQoJyNjb21wb3NlclVzZXJOYW1lJykudGV4dChldmVudC5uZXdWYWx1ZSk7XG4gICAgICAgIHRoaXMuY3VycmVudFVzZXJOYW1lID0gZXZlbnQubmV3VmFsdWU7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/dynamics/composer.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/dynamics/deleteManager.ts": 
  /*!*************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/dynamics/deleteManager.ts ***!
  \*************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DeleteManager: () => (/* binding */ DeleteManager)\n/* harmony export */ });\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"jquery\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _commentHandler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./commentHandler */ \"./src/多云熊/备份/给rovo的/modules/dynamics/commentHandler.ts\");\n/**\n * 动态批量删除管理器模块\n * 负责处理动态的批量删除功能\n */\n\n\nclass DeleteManager {\n    isDeleteMode = false;\n    selectedPosts = new Set(); // 存储选中的动态ID和楼层ID组合\n    soundManager;\n    commentHandler; // 添加评论处理器用于复用跨楼层查找方法\n    constructor(soundManager) {\n        this.soundManager = soundManager;\n        this.commentHandler = new _commentHandler__WEBPACK_IMPORTED_MODULE_1__.CommentHandler(soundManager);\n    }\n    /**\n     * 切换删除模式\n     */\n    toggleDeleteMode() {\n        this.isDeleteMode = !this.isDeleteMode;\n        if (this.isDeleteMode) {\n            this.enterDeleteMode();\n        }\n        else {\n            this.exitDeleteMode();\n        }\n    }\n    /**\n     * 获取删除模式状态\n     */\n    isInDeleteMode() {\n        return this.isDeleteMode;\n    }\n    /**\n     * 进入删除模式\n     */\n    enterDeleteMode() {\n        console.log('📝 进入批量删除模式');\n        // 清空之前的选择\n        this.selectedPosts.clear();\n        // 添加删除模式样式\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsInterface').addClass('delete-mode');\n        // 显示删除工具栏\n        this.showDeleteToolbar();\n        // 为每个动态添加选择框\n        this.addSelectionCheckboxes();\n        // 播放进入音效\n        if (this.soundManager?.playSound) {\n            this.soundManager.playSound('click');\n        }\n        // 显示提示\n        toastr.info('已进入删除模式，点击动态可选中');\n    }\n    /**\n     * 退出删除模式\n     */\n    exitDeleteMode() {\n        console.log('📝 退出批量删除模式');\n        // 移除删除模式样式\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsInterface').removeClass('delete-mode');\n        // 隐藏删除工具栏\n        this.hideDeleteToolbar();\n        // 移除所有选择框\n        this.removeSelectionCheckboxes();\n        // 清空选择\n        this.selectedPosts.clear();\n        // 播放退出音效\n        if (this.soundManager?.playSound) {\n            this.soundManager.playSound('click');\n        }\n    }\n    /**\n     * 显示删除工具栏\n     */\n    showDeleteToolbar() {\n        // 如果工具栏已存在，先移除\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('.dynamics-delete-toolbar').remove();\n        // 创建工具栏HTML - 覆盖在原导航栏上方\n        const toolbarHtml = `\r\n      <div class=\"dynamics-delete-toolbar\">\r\n        <button class=\"select-all-btn\">全选</button>\r\n        <button class=\"delete-selected-btn\" disabled>删除选中</button>\r\n        <button class=\"cancel-delete-btn\">取消</button>\r\n      </div>\r\n    `;\n        // 将删除工具栏添加到应用容器中，覆盖在导航栏上方\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('.dynamics-app-container').append(toolbarHtml);\n        // 绑定工具栏事件\n        this.bindToolbarEvents();\n    }\n    /**\n     * 隐藏删除工具栏\n     */\n    hideDeleteToolbar() {\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('.dynamics-delete-toolbar').fadeOut(200, function () {\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()(this).remove();\n        });\n    }\n    /**\n     * 为动态添加选择框\n     */\n    addSelectionCheckboxes() {\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('.dynamics-post').each((index, element) => {\n            const $post = jquery__WEBPACK_IMPORTED_MODULE_0___default()(element);\n            const postId = $post.attr('data-post-id');\n            const messageId = $post.attr('data-message-id') || '';\n            if (!postId)\n                return;\n            // 创建选择框容器\n            const $checkbox = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div>', {\n                class: 'dynamics-selection-checkbox',\n                'data-post-id': postId,\n                'data-message-id': messageId\n            });\n            // 添加复选框图标 - 使用更美观的圆形设计\n            $checkbox.html(`\r\n        <div class=\"checkbox-circle unchecked\">\r\n          <svg viewBox=\"0 0 24 24\" fill=\"none\">\r\n            <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"2\"/>\r\n          </svg>\r\n        </div>\r\n        <div class=\"checkbox-circle checked\" style=\"display: none;\">\r\n          <svg viewBox=\"0 0 24 24\" fill=\"none\">\r\n            <circle cx=\"12\" cy=\"12\" r=\"10\" fill=\"#667eea\"/>\r\n            <path d=\"M8 12l3 3 5-6\" stroke=\"white\" stroke-width=\"2.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n          </svg>\r\n        </div>\r\n      `);\n            // 添加到动态头部右边，与头像同行\n            $post.find('.dynamics-post-header').append($checkbox);\n            // 绑定点击事件\n            $checkbox.on('click', (e) => {\n                e.stopPropagation();\n                this.togglePostSelection(postId, messageId);\n            });\n            // 也让整个动态可点击选择\n            $post.on('click.deleteMode', (e) => {\n                // 排除操作按钮区域\n                if (jquery__WEBPACK_IMPORTED_MODULE_0___default()(e.target).closest('.dynamics-post-actions, .dynamics-comments').length === 0) {\n                    this.togglePostSelection(postId, messageId);\n                }\n            });\n        });\n    }\n    /**\n     * 移除所有选择框\n     */\n    removeSelectionCheckboxes() {\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('.dynamics-selection-checkbox').fadeOut(200, function () {\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()(this).remove();\n        });\n        // 移除动态的点击事件\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('.dynamics-post').off('.deleteMode');\n    }\n    /**\n     * 切换动态选择状态\n     */\n    togglePostSelection(postId, messageId) {\n        const key = `${messageId}_${postId}`;\n        const $post = jquery__WEBPACK_IMPORTED_MODULE_0___default()(`.dynamics-post[data-post-id=\"${postId}\"]`);\n        const $checkbox = $post.find('.dynamics-selection-checkbox');\n        if (this.selectedPosts.has(key)) {\n            // 取消选择\n            this.selectedPosts.delete(key);\n            $post.removeClass('selected');\n            $checkbox.find('.checkbox-circle.checked').hide();\n            $checkbox.find('.checkbox-circle.unchecked').show();\n        }\n        else {\n            // 选择\n            this.selectedPosts.add(key);\n            $post.addClass('selected');\n            $checkbox.find('.checkbox-circle.unchecked').hide();\n            $checkbox.find('.checkbox-circle.checked').show();\n        }\n        // 更新选择计数\n        this.updateSelectionCount();\n        // 播放选择音效\n        if (this.soundManager?.playSound) {\n            this.soundManager.playSound('click');\n        }\n    }\n    /**\n     * 更新选择计数\n     */\n    updateSelectionCount() {\n        const count = this.selectedPosts.size;\n        // 只更新删除按钮状态，不显示计数\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('.delete-selected-btn').prop('disabled', count === 0);\n    }\n    /**\n     * 绑定工具栏事件\n     */\n    bindToolbarEvents() {\n        // 全选按钮\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('.select-all-btn').on('click', () => {\n            this.selectAllPosts();\n        });\n        // 删除选中按钮\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('.delete-selected-btn').on('click', () => {\n            this.deleteSelectedPosts();\n        });\n        // 取消按钮\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('.cancel-delete-btn').on('click', () => {\n            this.exitDeleteMode();\n        });\n    }\n    /**\n     * 全选所有动态\n     */\n    selectAllPosts() {\n        const isAllSelected = this.selectedPosts.size === jquery__WEBPACK_IMPORTED_MODULE_0___default()('.dynamics-post').length;\n        if (isAllSelected) {\n            // 如果已全选，则取消全选\n            this.selectedPosts.clear();\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()('.dynamics-post').removeClass('selected');\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()('.dynamics-selection-checkbox .checkbox-circle.checked').hide();\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()('.dynamics-selection-checkbox .checkbox-circle.unchecked').show();\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()('.select-all-btn').text('全选');\n        }\n        else {\n            // 全选\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()('.dynamics-post').each((index, element) => {\n                const $post = jquery__WEBPACK_IMPORTED_MODULE_0___default()(element);\n                const postId = $post.attr('data-post-id');\n                const messageId = $post.attr('data-message-id') || '';\n                if (postId) {\n                    const key = `${messageId}_${postId}`;\n                    this.selectedPosts.add(key);\n                    $post.addClass('selected');\n                    const $checkbox = $post.find('.dynamics-selection-checkbox');\n                    $checkbox.find('.checkbox-circle.unchecked').hide();\n                    $checkbox.find('.checkbox-circle.checked').show();\n                }\n            });\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()('.select-all-btn').text('取消全选');\n        }\n        // 更新选择计数\n        this.updateSelectionCount();\n    }\n    /**\n     * 删除选中的动态\n     */\n    async deleteSelectedPosts() {\n        const count = this.selectedPosts.size;\n        if (count === 0)\n            return;\n        // 二次确认 - 保留用户认为好的提示文字\n        if (!confirm(`确定要删除选中的 ${count} 条动态吗？\\n注意：删除后将同时删除相关的评论和点赞记录。`)) {\n            return;\n        }\n        // 显示加载状态\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('.delete-selected-btn').prop('disabled', true).text('删除中...');\n        try {\n            // 按楼层分组要删除的动态\n            const messageGroups = new Map();\n            for (const key of this.selectedPosts) {\n                // key 格式: \"messageId_dynamics_编号\"\n                const parts = key.split('_');\n                const messageId = parts[0];\n                const msgId = messageId ? parseInt(messageId) : null;\n                // 从 postId 中提取动态编号（格式：dynamics_编号）\n                const postId = parts.slice(1).join('_'); // 重新组合 \"dynamics_编号\"\n                const match = postId.match(/dynamics_(\\d+)/);\n                if (!match) {\n                    console.warn(`无法解析动态ID: ${postId}`);\n                    continue;\n                }\n                const dynamicsNo = parseInt(match[1]);\n                if (!messageGroups.has(msgId)) {\n                    messageGroups.set(msgId, new Set());\n                }\n                messageGroups.get(msgId).add(dynamicsNo);\n            }\n            // 逐个楼层处理删除\n            for (const [targetMessageId, dynamicsNos] of messageGroups) {\n                // 使用与评论相同的跨楼层查找方法\n                let actualMessage = null;\n                let actualMessageId = null;\n                // 对于每个动态组，使用第一个动态编号来查找目标楼层\n                const firstNo = Array.from(dynamicsNos)[0];\n                // 使用CommentHandler的findTargetMessage方法进行跨楼层查找\n                const result = await this.commentHandler.findTargetMessage(targetMessageId === null ? null : targetMessageId, firstNo, '批量删除');\n                if (!result) {\n                    console.warn(`未找到包含动态 #${firstNo} 的楼层`);\n                    continue;\n                }\n                actualMessage = result.message;\n                actualMessageId = result.messageId;\n                let messageText = actualMessage.message || '';\n                // 删除该楼层中的所有选中动态及其相关内容\n                for (const dynamicsNo of dynamicsNos) {\n                    console.log(`🗑️ 删除楼层 ${actualMessageId} 中的动态 #${dynamicsNo}`);\n                    // 删除动态主体\n                    const dynamicPattern = new RegExp(`^\\\\[动态_${dynamicsNo}\\\\|[^\\\\]]+\\\\]\\\\s*$`, 'gm');\n                    messageText = messageText.replace(dynamicPattern, '');\n                    // 删除相关的评论\n                    const commentPattern = new RegExp(`^\\\\[评论_${dynamicsNo}\\\\|[^\\\\]]+\\\\]\\\\s*$`, 'gm');\n                    messageText = messageText.replace(commentPattern, '');\n                    // 删除相关的点赞\n                    const likePattern = new RegExp(`^\\\\[点赞_${dynamicsNo}\\\\|[^\\\\]]+\\\\]\\\\s*$`, 'gm');\n                    messageText = messageText.replace(likePattern, '');\n                }\n                // 清理多余的空行\n                messageText = messageText.replace(/\\n{3,}/g, '\\n\\n');\n                // 如果动态容器空了，可以选择删除整个容器\n                if (messageText.includes('[动态]') && messageText.includes('[/动态]')) {\n                    const dynamicContent = messageText.match(/\\[动态\\]([\\s\\S]*?)\\[\\/动态\\]/);\n                    if (dynamicContent && dynamicContent[1].trim() === '') {\n                        // 删除空的动态容器\n                        messageText = messageText.replace(/\\[动态\\]\\s*\\[\\/动态\\]\\s*/g, '');\n                    }\n                }\n                // 更新消息\n                await setChatMessages([\n                    {\n                        message_id: actualMessageId,\n                        message: messageText,\n                    },\n                ], { refresh: 'none' });\n                console.log(`✅ 成功删除楼层 ${actualMessageId} 中的 ${dynamicsNos.size} 条动态`);\n            }\n            // 从UI中移除删除的动态\n            for (const key of this.selectedPosts) {\n                // key 格式: \"messageId_dynamics_编号\"\n                const parts = key.split('_');\n                const postId = parts.slice(1).join('_'); // 重新组合 \"dynamics_编号\"\n                console.log(`🗑️ 从UI中移除动态: ${postId}`);\n                const $post = jquery__WEBPACK_IMPORTED_MODULE_0___default()(`.dynamics-post[data-post-id=\"${postId}\"]`);\n                if ($post.length > 0) {\n                    $post.fadeOut(300, function () {\n                        jquery__WEBPACK_IMPORTED_MODULE_0___default()(this).remove();\n                        console.log(`✅ 已从UI中移除动态: ${postId}`);\n                        // 检查是否还有动态，如果没有则显示空状态\n                        if (jquery__WEBPACK_IMPORTED_MODULE_0___default()('.dynamics-post').length === 0) {\n                            jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsTimeline').html(`\r\n                <div class=\"dynamics-empty\">\r\n                  <div class=\"dynamics-empty-icon\">📭</div>\r\n                  <div class=\"dynamics-empty-text\">暂无动态</div>\r\n                  <div class=\"dynamics-empty-subtext\">快去发布第一条动态吧～</div>\r\n                </div>\r\n              `);\n                        }\n                    });\n                }\n                else {\n                    console.warn(`⚠️ 未找到要删除的动态元素: ${postId}`);\n                }\n            }\n            // 播放删除音效\n            if (this.soundManager?.playSound) {\n                this.soundManager.playSound('delete');\n            }\n            toastr.success(`成功删除 ${count} 条动态`);\n            // 退出删除模式\n            this.exitDeleteMode();\n        }\n        catch (error) {\n            console.error('删除动态失败:', error);\n            toastr.error('删除失败，请重试');\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()('.delete-selected-btn').prop('disabled', false).text('删除选中');\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZHluYW1pY3MvZGVsZXRlTWFuYWdlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7OztHQUdHO0FBRW9CO0FBQzJCO0FBRTNDLE1BQU0sYUFBYTtJQUNoQixZQUFZLEdBQVksS0FBSyxDQUFDO0lBQzlCLGFBQWEsR0FBZ0IsSUFBSSxHQUFHLEVBQUUsQ0FBQyxDQUFDLG1CQUFtQjtJQUMzRCxZQUFZLENBQU07SUFDbEIsY0FBYyxDQUFpQixDQUFDLHFCQUFxQjtJQUU3RCxZQUFZLFlBQWlCO1FBQzNCLElBQUksQ0FBQyxZQUFZLEdBQUcsWUFBWSxDQUFDO1FBQ2pDLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSwyREFBYyxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQ3pELENBQUM7SUFFRDs7T0FFRztJQUNJLGdCQUFnQjtRQUNyQixJQUFJLENBQUMsWUFBWSxHQUFHLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQztRQUV2QyxJQUFJLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztZQUN0QixJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7UUFDekIsQ0FBQzthQUFNLENBQUM7WUFDTixJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDeEIsQ0FBQztJQUNILENBQUM7SUFFRDs7T0FFRztJQUNJLGNBQWM7UUFDbkIsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDO0lBQzNCLENBQUM7SUFFRDs7T0FFRztJQUNLLGVBQWU7UUFDckIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUUzQixVQUFVO1FBQ1YsSUFBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUUzQixXQUFXO1FBQ1gsNkNBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUVoRCxVQUFVO1FBQ1YsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFFekIsYUFB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QUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNmLE9BQU8sQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQ2hDLE1BQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDekIsNkNBQUMsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ2pFLENBQUM7SUFDSCxDQUFDO0NBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WkmuS6keeGii/lpIfku70v57uZcm92b+eahC9tb2R1bGVzL2R5bmFtaWNzL2RlbGV0ZU1hbmFnZXIudHM/Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiDliqjmgIHmibnph4/liKDpmaTnrqHnkIblmajmqKHlnZdcclxuICog6LSf6LSj5aSE55CG5Yqo5oCB55qE5om56YeP5Yig6Zmk5Yqf6IO9XHJcbiAqL1xyXG5cclxuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcclxuaW1wb3J0IHsgQ29tbWVudEhhbmRsZXIgfSBmcm9tICcuL2NvbW1lbnRIYW5kbGVyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBEZWxldGVNYW5hZ2VyIHtcclxuICBwcml2YXRlIGlzRGVsZXRlTW9kZTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIHByaXZhdGUgc2VsZWN0ZWRQb3N0czogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7IC8vIOWtmOWCqOmAieS4reeahOWKqOaAgUlE5ZKM5qW85bGCSUTnu4TlkIhcclxuICBwcml2YXRlIHNvdW5kTWFuYWdlcjogYW55O1xyXG4gIHByaXZhdGUgY29tbWVudEhhbmRsZXI6IENvbW1lbnRIYW5kbGVyOyAvLyDmt7vliqDor4TorrrlpITnkIblmajnlKjkuo7lpI3nlKjot6jmpbzlsYLmn6Xmib7mlrnms5VcclxuXHJcbiAgY29uc3RydWN0b3Ioc291bmRNYW5hZ2VyOiBhbnkpIHtcclxuICAgIHRoaXMuc291bmRNYW5hZ2VyID0gc291bmRNYW5hZ2VyO1xyXG4gICAgdGhpcy5jb21tZW50SGFuZGxlciA9IG5ldyBDb21tZW50SGFuZGxlcihzb3VuZE1hbmFnZXIpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5YiH5o2i5Yig6Zmk5qih5byPXHJcbiAgICovXHJcbiAgcHVibGljIHRvZ2dsZURlbGV0ZU1vZGUoKTogdm9pZCB7XHJcbiAgICB0aGlzLmlzRGVsZXRlTW9kZSA9ICF0aGlzLmlzRGVsZXRlTW9kZTtcclxuICAgIFxyXG4gICAgaWYgKHRoaXMuaXNEZWxldGVNb2RlKSB7XHJcbiAgICAgIHRoaXMuZW50ZXJEZWxldGVNb2RlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmV4aXREZWxldGVNb2RlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bliKDpmaTmqKHlvI/nirbmgIFcclxuICAgKi9cclxuICBwdWJsaWMgaXNJbkRlbGV0ZU1vZGUoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5pc0RlbGV0ZU1vZGU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDov5vlhaXliKDpmaTmqKHlvI9cclxuICAgKi9cclxuICBwcml2YXRlIGVudGVyRGVsZXRlTW9kZSgpOiB2b2lkIHtcclxuICAgIGNvbnNvbGUubG9nKCfwn5OdIOi/m+WFpeaJuemHj+WIoOmZpOaooeW8jycpO1xyXG4gICAgXHJcbiAgICAvLyDmuIXnqbrkuYvliY3nmoTpgInmi6lcclxuICAgIHRoaXMuc2VsZWN0ZWRQb3N0cy5jbGVhcigpO1xyXG4gICAgXHJcbiAgICAvLyDmt7vliqDliKDpmaTmqKHlvI/moLflvI9cclxuICAgICQoJyNkeW5hbWljc0ludGVyZmFjZScpLmFkZENsYXNzKCdkZWxldGUtbW9kZScpO1xyXG4gICAgXHJcbiAgICAvLyDmmL7npLrliKDpmaTlt6XlhbfmoI9cclxuICAgIHRoaXMuc2hvd0RlbGV0ZVRvb2xiYXIoKTtcclxuICAgIFxyXG4gICAgLy8g5Li65q+P5Liq5Yqo5oCB5re75Yqg6YCJ5oup5qGGXHJcbiAgICB0aGlzLmFkZFNlbGVjdGlvbkNoZWNrYm94ZXMoKTtcclxuICAgIFxyXG4gICAgLy8g5pKt5pS+6L+b5YWl6Z+z5pWIXHJcbiAgICBpZiAodGhpcy5zb3VuZE1hbmFnZXI/LnBsYXlTb3VuZCkge1xyXG4gICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5U291bmQoJ2NsaWNrJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIOaYvuekuuaPkOekulxyXG4gICAgdG9hc3RyLmluZm8oJ+W3sui/m+WFpeWIoOmZpOaooeW8j++8jOeCueWHu+WKqOaAgeWPr+mAieS4rScpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6YCA5Ye65Yig6Zmk5qih5byPXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBleGl0RGVsZXRlTW9kZSgpOiB2b2lkIHtcclxuICAgIGNvbnNvbGUubG9nKCfwn5OdIOmAgOWHuuaJuemHj+WIoOmZpOaooeW8jycpO1xyXG4gICAgXHJcbiAgICAvLyDnp7vpmaTliKDpmaTmqKHlvI/moLflvI9cclxuICAgICQoJyNkeW5hbWljc0ludGVyZmFjZScpLnJlbW92ZUNsYXNzKCdkZWxldGUtbW9kZScpO1xyXG4gICAgXHJcbiAgICAvLyDpmpDol4/liKDpmaTlt6XlhbfmoI9cclxuICAgIHRoaXMuaGlkZURlbGV0ZVRvb2xiYXIoKTtcclxuICAgIFxyXG4gICAgLy8g56e76Zmk5omA5pyJ6YCJ5oup5qGGXHJcbiAgICB0aGlzLnJlbW92ZVNlbGVjdGlvbkNoZWNrYm94ZXMoKTtcclxuICAgIFxyXG4gICAgLy8g5riF56m66YCJ5oupXHJcbiAgICB0aGlzLnNlbGVjdGVkUG9zdHMuY2xlYXIoKTtcclxuICAgIFxyXG4gICAgLy8g5pKt5pS+6YCA5Ye66Z+z5pWIXHJcbiAgICBpZiAodGhpcy5zb3VuZE1hbmFnZXI/LnBsYXlTb3VuZCkge1xyXG4gICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5U291bmQoJ2NsaWNrJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmmL7npLrliKDpmaTlt6XlhbfmoI9cclxuICAgKi9cclxuICBwcml2YXRlIHNob3dEZWxldGVUb29sYmFyKCk6IHZvaWQge1xyXG4gICAgLy8g5aaC5p6c5bel5YW35qCP5bey5a2Y5Zyo77yM5YWI56e76ZmkXHJcbiAgICAkKCcuZHluYW1pY3MtZGVsZXRlLXRvb2xiYXInKS5yZW1vdmUoKTtcclxuICAgIFxyXG4gICAgLy8g5Yib5bu65bel5YW35qCPSFRNTCAtIOimhuebluWcqOWOn+WvvOiIquagj+S4iuaWuVxyXG4gICAgY29uc3QgdG9vbGJhckh0bWwgPSBgXHJcbiAgICAgIDxkaXYgY2xhc3M9XCJkeW5hbWljcy1kZWxldGUtdG9vbGJhclwiPlxyXG4gICAgICAgIDxidXR0b24gY2xhc3M9XCJzZWxlY3QtYWxsLWJ0blwiPuWFqOmAiTwvYnV0dG9uPlxyXG4gICAgICAgIDxidXR0b24gY2xhc3M9XCJkZWxldGUtc2VsZWN0ZWQtYnRuXCIgZGlzYWJsZWQ+5Yig6Zmk6YCJ5LitPC9idXR0b24+XHJcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImNhbmNlbC1kZWxldGUtYnRuXCI+5Y+W5raIPC9idXR0b24+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgYDtcclxuICAgIFxyXG4gICAgLy8g5bCG5Yig6Zmk5bel5YW35qCP5re75Yqg5Yiw5bqU55So5a655Zmo5Lit77yM6KaG55uW5Zyo5a+86Iiq5qCP5LiK5pa5XHJcbiAgICAkKCcuZHluYW1pY3MtYXBwLWNvbnRhaW5lcicpLmFwcGVuZCh0b29sYmFySHRtbCk7XHJcbiAgICBcclxuICAgIC8vIOe7keWumuW3peWFt+agj+S6i+S7tlxyXG4gICAgdGhpcy5iaW5kVG9vbGJhckV2ZW50cygpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6ZqQ6JeP5Yig6Zmk5bel5YW35qCPXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBoaWRlRGVsZXRlVG9vbGJhcigpOiB2b2lkIHtcclxuICAgICQoJy5keW5hbWljcy1kZWxldGUtdG9vbGJhcicpLmZhZGVPdXQoMjAwLCBmdW5jdGlvbigpIHtcclxuICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Li65Yqo5oCB5re75Yqg6YCJ5oup5qGGXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhZGRTZWxlY3Rpb25DaGVja2JveGVzKCk6IHZvaWQge1xyXG4gICAgJCgnLmR5bmFtaWNzLXBvc3QnKS5lYWNoKChpbmRleCwgZWxlbWVudCkgPT4ge1xyXG4gICAgICBjb25zdCAkcG9zdCA9ICQoZWxlbWVudCk7XHJcbiAgICAgIGNvbnN0IHBvc3RJZCA9ICRwb3N0LmF0dHIoJ2RhdGEtcG9zdC1pZCcpO1xyXG4gICAgICBjb25zdCBtZXNzYWdlSWQgPSAkcG9zdC5hdHRyKCdkYXRhLW1lc3NhZ2UtaWQnKSB8fCAnJztcclxuICAgICAgXHJcbiAgICAgIGlmICghcG9zdElkKSByZXR1cm47XHJcbiAgICAgIFxyXG4gICAgICAvLyDliJvlu7rpgInmi6nmoYblrrnlmahcclxuICAgICAgY29uc3QgJGNoZWNrYm94ID0gJCgnPGRpdj4nLCB7XHJcbiAgICAgICAgY2xhc3M6ICdkeW5hbWljcy1zZWxlY3Rpb24tY2hlY2tib3gnLFxyXG4gICAgICAgICdkYXRhLXBvc3QtaWQnOiBwb3N0SWQsXHJcbiAgICAgICAgJ2RhdGEtbWVzc2FnZS1pZCc6IG1lc3NhZ2VJZFxyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIC8vIOa3u+WKoOWkjemAieahhuWbvuaghyAtIOS9v+eUqOabtOe+juingueahOWchuW9ouiuvuiuoVxyXG4gICAgICAkY2hlY2tib3guaHRtbChgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImNoZWNrYm94LWNpcmNsZSB1bmNoZWNrZWRcIj5cclxuICAgICAgICAgIDxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCI+XHJcbiAgICAgICAgICAgIDxjaXJjbGUgY3g9XCIxMlwiIGN5PVwiMTJcIiByPVwiMTBcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIvPlxyXG4gICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImNoZWNrYm94LWNpcmNsZSBjaGVja2VkXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPlxyXG4gICAgICAgICAgPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIj5cclxuICAgICAgICAgICAgPGNpcmNsZSBjeD1cIjEyXCIgY3k9XCIxMlwiIHI9XCIxMFwiIGZpbGw9XCIjNjY3ZWVhXCIvPlxyXG4gICAgICAgICAgICA8cGF0aCBkPVwiTTggMTJsMyAzIDUtNlwiIHN0cm9rZT1cIndoaXRlXCIgc3Ryb2tlLXdpZHRoPVwiMi41XCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIvPlxyXG4gICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIGApO1xyXG4gICAgICBcclxuICAgICAgLy8g5re75Yqg5Yiw5Yqo5oCB5aS06YOo5Y+z6L6577yM5LiO5aS05YOP5ZCM6KGMXHJcbiAgICAgICRwb3N0LmZpbmQoJy5keW5hbWljcy1wb3N0LWhlYWRlcicpLmFwcGVuZCgkY2hlY2tib3gpO1xyXG4gICAgICBcclxuICAgICAgLy8g57uR5a6a54K55Ye75LqL5Lu2XHJcbiAgICAgICRjaGVja2JveC5vbignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVQb3N0U2VsZWN0aW9uKHBvc3RJZCwgbWVzc2FnZUlkKTtcclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyDkuZ/orqnmlbTkuKrliqjmgIHlj6/ngrnlh7vpgInmi6lcclxuICAgICAgJHBvc3Qub24oJ2NsaWNrLmRlbGV0ZU1vZGUnLCAoZSkgPT4ge1xyXG4gICAgICAgIC8vIOaOkumZpOaTjeS9nOaMiemSruWMuuWfn1xyXG4gICAgICAgIGlmICgkKGUudGFyZ2V0KS5jbG9zZXN0KCcuZHluYW1pY3MtcG9zdC1hY3Rpb25zLCAuZHluYW1pY3MtY29tbWVudHMnKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgIHRoaXMudG9nZ2xlUG9zdFNlbGVjdGlvbihwb3N0SWQsIG1lc3NhZ2VJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog56e76Zmk5omA5pyJ6YCJ5oup5qGGXHJcbiAgICovXHJcbiAgcHJpdmF0ZSByZW1vdmVTZWxlY3Rpb25DaGVja2JveGVzKCk6IHZvaWQge1xyXG4gICAgJCgnLmR5bmFtaWNzLXNlbGVjdGlvbi1jaGVja2JveCcpLmZhZGVPdXQoMjAwLCBmdW5jdGlvbigpIHtcclxuICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAvLyDnp7vpmaTliqjmgIHnmoTngrnlh7vkuovku7ZcclxuICAgICQoJy5keW5hbWljcy1wb3N0Jykub2ZmKCcuZGVsZXRlTW9kZScpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5YiH5o2i5Yqo5oCB6YCJ5oup54q25oCBXHJcbiAgICovXHJcbiAgcHJpdmF0ZSB0b2dnbGVQb3N0U2VsZWN0aW9uKHBvc3RJZDogc3RyaW5nLCBtZXNzYWdlSWQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgY29uc3Qga2V5ID0gYCR7bWVzc2FnZUlkfV8ke3Bvc3RJZH1gO1xyXG4gICAgY29uc3QgJHBvc3QgPSAkKGAuZHluYW1pY3MtcG9zdFtkYXRhLXBvc3QtaWQ9XCIke3Bvc3RJZH1cIl1gKTtcclxuICAgIGNvbnN0ICRjaGVja2JveCA9ICRwb3N0LmZpbmQoJy5keW5hbWljcy1zZWxlY3Rpb24tY2hlY2tib3gnKTtcclxuICAgIFxyXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRQb3N0cy5oYXMoa2V5KSkge1xyXG4gICAgICAvLyDlj5bmtojpgInmi6lcclxuICAgICAgdGhpcy5zZWxlY3RlZFBvc3RzLmRlbGV0ZShrZXkpO1xyXG4gICAgICAkcG9zdC5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgJGNoZWNrYm94LmZpbmQoJy5jaGVja2JveC1jaXJjbGUuY2hlY2tlZCcpLmhpZGUoKTtcclxuICAgICAgJGNoZWNrYm94LmZpbmQoJy5jaGVja2JveC1jaXJjbGUudW5jaGVja2VkJykuc2hvdygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8g6YCJ5oupXHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRQb3N0cy5hZGQoa2V5KTtcclxuICAgICAgJHBvc3QuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICRjaGVja2JveC5maW5kKCcuY2hlY2tib3gtY2lyY2xlLnVuY2hlY2tlZCcpLmhpZGUoKTtcclxuICAgICAgJGNoZWNrYm94LmZpbmQoJy5jaGVja2JveC1jaXJjbGUuY2hlY2tlZCcpLnNob3coKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8g5pu05paw6YCJ5oup6K6h5pWwXHJcbiAgICB0aGlzLnVwZGF0ZVNlbGVjdGlvbkNvdW50KCk7XHJcbiAgICBcclxuICAgIC8vIOaSreaUvumAieaLqemfs+aViFxyXG4gICAgaWYgKHRoaXMuc291bmRNYW5hZ2VyPy5wbGF5U291bmQpIHtcclxuICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdjbGljaycpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5pu05paw6YCJ5oup6K6h5pWwXHJcbiAgICovXHJcbiAgcHJpdmF0ZSB1cGRhdGVTZWxlY3Rpb25Db3VudCgpOiB2b2lkIHtcclxuICAgIGNvbnN0IGNvdW50ID0gdGhpcy5zZWxlY3RlZFBvc3RzLnNpemU7XHJcbiAgICBcclxuICAgIC8vIOWPquabtOaWsOWIoOmZpOaMiemSrueKtuaAge+8jOS4jeaYvuekuuiuoeaVsFxyXG4gICAgJCgnLmRlbGV0ZS1zZWxlY3RlZC1idG4nKS5wcm9wKCdkaXNhYmxlZCcsIGNvdW50ID09PSAwKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOe7keWumuW3peWFt+agj+S6i+S7tlxyXG4gICAqL1xyXG4gIHByaXZhdGUgYmluZFRvb2xiYXJFdmVudHMoKTogdm9pZCB7XHJcbiAgICAvLyDlhajpgInmjInpkq5cclxuICAgICQoJy5zZWxlY3QtYWxsLWJ0bicpLm9uKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5zZWxlY3RBbGxQb3N0cygpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIC8vIOWIoOmZpOmAieS4reaMiemSrlxyXG4gICAgJCgnLmRlbGV0ZS1zZWxlY3RlZC1idG4nKS5vbignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuZGVsZXRlU2VsZWN0ZWRQb3N0cygpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIC8vIOWPlua2iOaMiemSrlxyXG4gICAgJCgnLmNhbmNlbC1kZWxldGUtYnRuJykub24oJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLmV4aXREZWxldGVNb2RlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWFqOmAieaJgOacieWKqOaAgVxyXG4gICAqL1xyXG4gIHByaXZhdGUgc2VsZWN0QWxsUG9zdHMoKTogdm9pZCB7XHJcbiAgICBjb25zdCBpc0FsbFNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZFBvc3RzLnNpemUgPT09ICQoJy5keW5hbWljcy1wb3N0JykubGVuZ3RoO1xyXG4gICAgXHJcbiAgICBpZiAoaXNBbGxTZWxlY3RlZCkge1xyXG4gICAgICAvLyDlpoLmnpzlt7LlhajpgInvvIzliJnlj5bmtojlhajpgIlcclxuICAgICAgdGhpcy5zZWxlY3RlZFBvc3RzLmNsZWFyKCk7XHJcbiAgICAgICQoJy5keW5hbWljcy1wb3N0JykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICQoJy5keW5hbWljcy1zZWxlY3Rpb24tY2hlY2tib3ggLmNoZWNrYm94LWNpcmNsZS5jaGVja2VkJykuaGlkZSgpO1xyXG4gICAgICAkKCcuZHluYW1pY3Mtc2VsZWN0aW9uLWNoZWNrYm94IC5jaGVja2JveC1jaXJjbGUudW5jaGVja2VkJykuc2hvdygpO1xyXG4gICAgICAkKCcuc2VsZWN0LWFsbC1idG4nKS50ZXh0KCflhajpgIknKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIOWFqOmAiVxyXG4gICAgICAkKCcuZHluYW1pY3MtcG9zdCcpLmVhY2goKGluZGV4LCBlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgY29uc3QgJHBvc3QgPSAkKGVsZW1lbnQpO1xyXG4gICAgICAgIGNvbnN0IHBvc3RJZCA9ICRwb3N0LmF0dHIoJ2RhdGEtcG9zdC1pZCcpO1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VJZCA9ICRwb3N0LmF0dHIoJ2RhdGEtbWVzc2FnZS1pZCcpIHx8ICcnO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChwb3N0SWQpIHtcclxuICAgICAgICAgIGNvbnN0IGtleSA9IGAke21lc3NhZ2VJZH1fJHtwb3N0SWR9YDtcclxuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRQb3N0cy5hZGQoa2V5KTtcclxuICAgICAgICAgICRwb3N0LmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBjb25zdCAkY2hlY2tib3ggPSAkcG9zdC5maW5kKCcuZHluYW1pY3Mtc2VsZWN0aW9uLWNoZWNrYm94Jyk7XHJcbiAgICAgICAgICAkY2hlY2tib3guZmluZCgnLmNoZWNrYm94LWNpcmNsZS51bmNoZWNrZWQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAkY2hlY2tib3guZmluZCgnLmNoZWNrYm94LWNpcmNsZS5jaGVja2VkJykuc2hvdygpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgICQoJy5zZWxlY3QtYWxsLWJ0bicpLnRleHQoJ+WPlua2iOWFqOmAiScpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyDmm7TmlrDpgInmi6norqHmlbBcclxuICAgIHRoaXMudXBkYXRlU2VsZWN0aW9uQ291bnQoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWIoOmZpOmAieS4reeahOWKqOaAgVxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgZGVsZXRlU2VsZWN0ZWRQb3N0cygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnN0IGNvdW50ID0gdGhpcy5zZWxlY3RlZFBvc3RzLnNpemU7XHJcbiAgICBpZiAoY291bnQgPT09IDApIHJldHVybjtcclxuICAgIFxyXG4gICAgLy8g5LqM5qyh56Gu6K6kIC0g5L+d55WZ55So5oi36K6k5Li65aW955qE5o+Q56S65paH5a2XXHJcbiAgICBpZiAoIWNvbmZpcm0oYOehruWumuimgeWIoOmZpOmAieS4reeahCAke2NvdW50fSDmnaHliqjmgIHlkJfvvJ9cXG7ms6jmhI/vvJrliKDpmaTlkI7lsIblkIzml7bliKDpmaTnm7jlhbPnmoTor4TorrrlkozngrnotZ7orrDlvZXjgIJgKSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIOaYvuekuuWKoOi9veeKtuaAgVxyXG4gICAgJCgnLmRlbGV0ZS1zZWxlY3RlZC1idG4nKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpLnRleHQoJ+WIoOmZpOS4rS4uLicpO1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDmjInmpbzlsYLliIbnu4TopoHliKDpmaTnmoTliqjmgIFcclxuICAgICAgY29uc3QgbWVzc2FnZUdyb3VwcyA9IG5ldyBNYXA8bnVtYmVyIHwgbnVsbCwgU2V0PG51bWJlcj4+KCk7XHJcbiAgICAgIFxyXG4gICAgICBmb3IgKGNvbnN0IGtleSBvZiB0aGlzLnNlbGVjdGVkUG9zdHMpIHtcclxuICAgICAgICAvLyBrZXkg5qC85byPOiBcIm1lc3NhZ2VJZF9keW5hbWljc1/nvJblj7dcIlxyXG4gICAgICAgIGNvbnN0IHBhcnRzID0ga2V5LnNwbGl0KCdfJyk7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZUlkID0gcGFydHNbMF07XHJcbiAgICAgICAgY29uc3QgbXNnSWQgPSBtZXNzYWdlSWQgPyBwYXJzZUludChtZXNzYWdlSWQpIDogbnVsbDtcclxuICAgICAgICBcclxuICAgICAgICAvLyDku44gcG9zdElkIOS4reaPkOWPluWKqOaAgee8luWPt++8iOagvOW8j++8mmR5bmFtaWNzX+e8luWPt++8iVxyXG4gICAgICAgIGNvbnN0IHBvc3RJZCA9IHBhcnRzLnNsaWNlKDEpLmpvaW4oJ18nKTsgLy8g6YeN5paw57uE5ZCIIFwiZHluYW1pY3Nf57yW5Y+3XCJcclxuICAgICAgICBjb25zdCBtYXRjaCA9IHBvc3RJZC5tYXRjaCgvZHluYW1pY3NfKFxcZCspLyk7XHJcbiAgICAgICAgaWYgKCFtYXRjaCkge1xyXG4gICAgICAgICAgY29uc29sZS53YXJuKGDml6Dms5Xop6PmnpDliqjmgIFJRDogJHtwb3N0SWR9YCk7XHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZHluYW1pY3NObyA9IHBhcnNlSW50KG1hdGNoWzFdKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIW1lc3NhZ2VHcm91cHMuaGFzKG1zZ0lkKSkge1xyXG4gICAgICAgICAgbWVzc2FnZUdyb3Vwcy5zZXQobXNnSWQsIG5ldyBTZXQoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1lc3NhZ2VHcm91cHMuZ2V0KG1zZ0lkKSEuYWRkKGR5bmFtaWNzTm8pO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyDpgJDkuKrmpbzlsYLlpITnkIbliKDpmaRcclxuICAgICAgZm9yIChjb25zdCBbdGFyZ2V0TWVzc2FnZUlkLCBkeW5hbWljc05vc10gb2YgbWVzc2FnZUdyb3Vwcykge1xyXG4gICAgICAgIC8vIOS9v+eUqOS4juivhOiuuuebuOWQjOeahOi3qOalvOWxguafpeaJvuaWueazlVxyXG4gICAgICAgIGxldCBhY3R1YWxNZXNzYWdlOiBhbnkgPSBudWxsO1xyXG4gICAgICAgIGxldCBhY3R1YWxNZXNzYWdlSWQ6IG51bWJlciB8IG51bGwgPSBudWxsO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOWvueS6juavj+S4quWKqOaAgee7hO+8jOS9v+eUqOesrOS4gOS4quWKqOaAgee8luWPt+adpeafpeaJvuebruagh+alvOWxglxyXG4gICAgICAgIGNvbnN0IGZpcnN0Tm8gPSBBcnJheS5mcm9tKGR5bmFtaWNzTm9zKVswXTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDkvb/nlKhDb21tZW50SGFuZGxlcueahGZpbmRUYXJnZXRNZXNzYWdl5pa55rOV6L+b6KGM6Leo5qW85bGC5p+l5om+XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5jb21tZW50SGFuZGxlci5maW5kVGFyZ2V0TWVzc2FnZShcclxuICAgICAgICAgIHRhcmdldE1lc3NhZ2VJZCA9PT0gbnVsbCA/IG51bGwgOiB0YXJnZXRNZXNzYWdlSWQsXHJcbiAgICAgICAgICBmaXJzdE5vLFxyXG4gICAgICAgICAgJ+aJuemHj+WIoOmZpCdcclxuICAgICAgICApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghcmVzdWx0KSB7XHJcbiAgICAgICAgICBjb25zb2xlLndhcm4oYOacquaJvuWIsOWMheWQq+WKqOaAgSAjJHtmaXJzdE5vfSDnmoTmpbzlsYJgKTtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBhY3R1YWxNZXNzYWdlID0gcmVzdWx0Lm1lc3NhZ2U7XHJcbiAgICAgICAgYWN0dWFsTWVzc2FnZUlkID0gcmVzdWx0Lm1lc3NhZ2VJZDtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgbWVzc2FnZVRleHQgPSBhY3R1YWxNZXNzYWdlLm1lc3NhZ2UgfHwgJyc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g5Yig6Zmk6K+l5qW85bGC5Lit55qE5omA5pyJ6YCJ5Lit5Yqo5oCB5Y+K5YW255u45YWz5YaF5a65XHJcbiAgICAgICAgZm9yIChjb25zdCBkeW5hbWljc05vIG9mIGR5bmFtaWNzTm9zKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhg8J+Xke+4jyDliKDpmaTmpbzlsYIgJHthY3R1YWxNZXNzYWdlSWR9IOS4reeahOWKqOaAgSAjJHtkeW5hbWljc05vfWApO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyDliKDpmaTliqjmgIHkuLvkvZNcclxuICAgICAgICAgIGNvbnN0IGR5bmFtaWNQYXR0ZXJuID0gbmV3IFJlZ0V4cChgXlxcXFxb5Yqo5oCBXyR7ZHluYW1pY3NOb31cXFxcfFteXFxcXF1dK1xcXFxdXFxcXHMqJGAsICdnbScpO1xyXG4gICAgICAgICAgbWVzc2FnZVRleHQgPSBtZXNzYWdlVGV4dC5yZXBsYWNlKGR5bmFtaWNQYXR0ZXJuLCAnJyk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIOWIoOmZpOebuOWFs+eahOivhOiuulxyXG4gICAgICAgICAgY29uc3QgY29tbWVudFBhdHRlcm4gPSBuZXcgUmVnRXhwKGBeXFxcXFvor4TorrpfJHtkeW5hbWljc05vfVxcXFx8W15cXFxcXV0rXFxcXF1cXFxccyokYCwgJ2dtJyk7XHJcbiAgICAgICAgICBtZXNzYWdlVGV4dCA9IG1lc3NhZ2VUZXh0LnJlcGxhY2UoY29tbWVudFBhdHRlcm4sICcnKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8g5Yig6Zmk55u45YWz55qE54K56LWeXHJcbiAgICAgICAgICBjb25zdCBsaWtlUGF0dGVybiA9IG5ldyBSZWdFeHAoYF5cXFxcW+eCuei1nl8ke2R5bmFtaWNzTm99XFxcXHxbXlxcXFxdXStcXFxcXVxcXFxzKiRgLCAnZ20nKTtcclxuICAgICAgICAgIG1lc3NhZ2VUZXh0ID0gbWVzc2FnZVRleHQucmVwbGFjZShsaWtlUGF0dGVybiwgJycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyDmuIXnkIblpJrkvZnnmoTnqbrooYxcclxuICAgICAgICBtZXNzYWdlVGV4dCA9IG1lc3NhZ2VUZXh0LnJlcGxhY2UoL1xcbnszLH0vZywgJ1xcblxcbicpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOWmguaenOWKqOaAgeWuueWZqOepuuS6hu+8jOWPr+S7pemAieaLqeWIoOmZpOaVtOS4quWuueWZqFxyXG4gICAgICAgIGlmIChtZXNzYWdlVGV4dC5pbmNsdWRlcygnW+WKqOaAgV0nKSAmJiBtZXNzYWdlVGV4dC5pbmNsdWRlcygnWy/liqjmgIFdJykpIHtcclxuICAgICAgICAgIGNvbnN0IGR5bmFtaWNDb250ZW50ID0gbWVzc2FnZVRleHQubWF0Y2goL1xcW+WKqOaAgVxcXShbXFxzXFxTXSo/KVxcW1xcL+WKqOaAgVxcXS8pO1xyXG4gICAgICAgICAgaWYgKGR5bmFtaWNDb250ZW50ICYmIGR5bmFtaWNDb250ZW50WzFdLnRyaW0oKSA9PT0gJycpIHtcclxuICAgICAgICAgICAgLy8g5Yig6Zmk56m655qE5Yqo5oCB5a655ZmoXHJcbiAgICAgICAgICAgIG1lc3NhZ2VUZXh0ID0gbWVzc2FnZVRleHQucmVwbGFjZSgvXFxb5Yqo5oCBXFxdXFxzKlxcW1xcL+WKqOaAgVxcXVxccyovZywgJycpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyDmm7TmlrDmtojmga9cclxuICAgICAgICBhd2FpdCBzZXRDaGF0TWVzc2FnZXMoXHJcbiAgICAgICAgICBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBtZXNzYWdlX2lkOiBhY3R1YWxNZXNzYWdlSWQsXHJcbiAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVRleHQsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICBdLFxyXG4gICAgICAgICAgeyByZWZyZXNoOiAnbm9uZScgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5sb2coYOKchSDmiJDlip/liKDpmaTmpbzlsYIgJHthY3R1YWxNZXNzYWdlSWR9IOS4reeahCAke2R5bmFtaWNzTm9zLnNpemV9IOadoeWKqOaAgWApO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyDku45VSeS4reenu+mZpOWIoOmZpOeahOWKqOaAgVxyXG4gICAgICBmb3IgKGNvbnN0IGtleSBvZiB0aGlzLnNlbGVjdGVkUG9zdHMpIHtcclxuICAgICAgICAvLyBrZXkg5qC85byPOiBcIm1lc3NhZ2VJZF9keW5hbWljc1/nvJblj7dcIlxyXG4gICAgICAgIGNvbnN0IHBhcnRzID0ga2V5LnNwbGl0KCdfJyk7XHJcbiAgICAgICAgY29uc3QgcG9zdElkID0gcGFydHMuc2xpY2UoMSkuam9pbignXycpOyAvLyDph43mlrDnu4TlkIggXCJkeW5hbWljc1/nvJblj7dcIlxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5eR77iPIOS7jlVJ5Lit56e76Zmk5Yqo5oCBOiAke3Bvc3RJZH1gKTtcclxuICAgICAgICBjb25zdCAkcG9zdCA9ICQoYC5keW5hbWljcy1wb3N0W2RhdGEtcG9zdC1pZD1cIiR7cG9zdElkfVwiXWApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICgkcG9zdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAkcG9zdC5mYWRlT3V0KDMwMCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDinIUg5bey5LuOVUnkuK3np7vpmaTliqjmgIE6ICR7cG9zdElkfWApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8g5qOA5p+l5piv5ZCm6L+Y5pyJ5Yqo5oCB77yM5aaC5p6c5rKh5pyJ5YiZ5pi+56S656m654q25oCBXHJcbiAgICAgICAgICAgIGlmICgkKCcuZHluYW1pY3MtcG9zdCcpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICQoJyNkeW5hbWljc1RpbWVsaW5lJykuaHRtbChgXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZHluYW1pY3MtZW1wdHlcIj5cclxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImR5bmFtaWNzLWVtcHR5LWljb25cIj7wn5OtPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkeW5hbWljcy1lbXB0eS10ZXh0XCI+5pqC5peg5Yqo5oCBPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkeW5hbWljcy1lbXB0eS1zdWJ0ZXh0XCI+5b+r5Y675Y+R5biD56ys5LiA5p2h5Yqo5oCB5ZCn772ePC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICBgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnNvbGUud2Fybihg4pqg77iPIOacquaJvuWIsOimgeWIoOmZpOeahOWKqOaAgeWFg+e0oDogJHtwb3N0SWR9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyDmkq3mlL7liKDpmaTpn7PmlYhcclxuICAgICAgaWYgKHRoaXMuc291bmRNYW5hZ2VyPy5wbGF5U291bmQpIHtcclxuICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5U291bmQoJ2RlbGV0ZScpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICB0b2FzdHIuc3VjY2Vzcyhg5oiQ5Yqf5Yig6ZmkICR7Y291bnR9IOadoeWKqOaAgWApO1xyXG4gICAgICBcclxuICAgICAgLy8g6YCA5Ye65Yig6Zmk5qih5byPXHJcbiAgICAgIHRoaXMuZXhpdERlbGV0ZU1vZGUoKTtcclxuICAgICAgXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfliKDpmaTliqjmgIHlpLHotKU6JywgZXJyb3IpO1xyXG4gICAgICB0b2FzdHIuZXJyb3IoJ+WIoOmZpOWksei0pe+8jOivt+mHjeivlScpO1xyXG4gICAgICAkKCcuZGVsZXRlLXNlbGVjdGVkLWJ0bicpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpLnRleHQoJ+WIoOmZpOmAieS4rScpO1xyXG4gICAgfVxyXG4gIH1cclxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/dynamics/deleteManager.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/dynamics/dynamics.scss": 
  /*!**********************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/dynamics/dynamics.scss ***!
  \**********************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZHluYW1pY3MvZHluYW1pY3Muc2NzcyIsIm1hcHBpbmdzIjoiO0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WkmuS6keeGii/lpIfku70v57uZcm92b+eahC9tb2R1bGVzL2R5bmFtaWNzL2R5bmFtaWNzLnNjc3M/Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpblxuZXhwb3J0IHt9OyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/dynamics/dynamics.scss\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/dynamics/eventHandler.ts": 
  /*!************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/dynamics/eventHandler.ts ***!
  \************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DynamicsEventHandler: () => (/* binding */ DynamicsEventHandler)\n/* harmony export */ });\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"jquery\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _commentHandler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./commentHandler */ \"./src/多云熊/备份/给rovo的/modules/dynamics/commentHandler.ts\");\n/* harmony import */ var _deleteManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./deleteManager */ \"./src/多云熊/备份/给rovo的/modules/dynamics/deleteManager.ts\");\n/**\n * 动态事件处理器模块（优化版）\n * 负责处理动态界面的各种交互事件\n * 使用jQuery进行DOM操作\n */\n\n\n\nclass DynamicsEventHandler {\n    soundManager; // 音效管理器引用\n    commentHandler; // 评论处理器\n    deleteManager; // 删除管理器\n    constructor(soundManager) {\n        this.soundManager = soundManager;\n        this.commentHandler = new _commentHandler__WEBPACK_IMPORTED_MODULE_1__.CommentHandler(soundManager);\n        this.deleteManager = new _deleteManager__WEBPACK_IMPORTED_MODULE_2__.DeleteManager(soundManager);\n        this.initializeClickSound();\n    }\n    /**\n     * 初始化点击音效\n     * 使用音效管理器而不是直接创建Audio对象\n     */\n    initializeClickSound() {\n        // 使用soundManager管理音效\n        if (this.soundManager && this.soundManager.playSound) {\n            // 音效由soundManager统一管理\n        }\n    }\n    /**\n     * 初始化所有动态相关的事件监听器\n     */\n    initializeEventListeners() {\n        this.initializeClickEffects();\n        this.initializePostInteractions();\n        this.initializeProfileClickHandlers();\n        this.initializeSettingsHandler();\n        this.initializeLogoHandler(); // 初始化logo点击功能\n        this.commentHandler.initialize(); // 初始化评论功能\n    }\n    /**\n     * 初始化点击特效\n     */\n    initializeClickEffects() {\n        // 为所有可点击元素添加点击特效（已移除爱心和星星特效）\n        const clickableSelectors = [\n            '.dynamics-nav-profile',\n            '.dynamics-nav-settings',\n            '.dynamics-post-avatar',\n            '.dynamics-post-image',\n            // 移除 '.dynamics-post-action'，避免与点赞专用音效重复播放\n            '.dynamics-post-content',\n            '.dynamics-comment',\n            '.dynamics-comment-avatar',\n        ];\n        // 使用jQuery事件委托，避免重复绑定\n        const $dynamicsContainer = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsInterface');\n        // 移除之前的事件监听器\n        $dynamicsContainer.off('click.dynamics');\n        // 使用事件委托绑定点击事件\n        $dynamicsContainer.on('click.dynamics', clickableSelectors.join(', '), (e) => {\n            this.handleClickEffect(e);\n        });\n        // 不再添加全局点击特效（心形动画）\n    }\n    /**\n     * 处理点击特效\n     */\n    handleClickEffect(event) {\n        const $element = jquery__WEBPACK_IMPORTED_MODULE_0___default()(event.currentTarget);\n        // 播放点击音效\n        this.playClickSound();\n        // 只保留简单的缩放动画，移除闪光特效\n        $element.css('transform', 'scale(0.95)');\n        setTimeout(() => {\n            $element.css('transform', '');\n        }, 100);\n    }\n    /**\n     * 初始化帖子交互处理器\n     */\n    initializePostInteractions() {\n        // 使用事件委托处理帖子图片点击\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsInterface').off('click.postImage').on('click.postImage', '.dynamics-post-image', function () {\n            const $image = jquery__WEBPACK_IMPORTED_MODULE_0___default()(this);\n            let $description = $image.find('.dynamics-image-description');\n            if ($description.length) {\n                // 如果描述已存在，则移除\n                $description.fadeOut(300, function () {\n                    jquery__WEBPACK_IMPORTED_MODULE_0___default()(this).remove();\n                });\n            }\n            else {\n                // 创建新的描述元素\n                const description = $image.data('description') || '这是一张美丽的图片 ✧˖°';\n                $description = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div>', {\n                    class: 'dynamics-image-description',\n                    text: description\n                });\n                $image.css('position', 'relative');\n                $description.hide().appendTo($image).fadeIn(300);\n            }\n        });\n        // 使用事件委托处理点赞点击（同步写入正确楼层消息）\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsInterface')\n            .off('click.postLike')\n            .on('click.postLike', '.dynamics-post-action[data-action=\"like\"]', async (ev) => {\n            const $action = jquery__WEBPACK_IMPORTED_MODULE_0___default()(ev.currentTarget);\n            const $post = $action.closest('.dynamics-post');\n            if (!$post.length)\n                return;\n            // 提取动态编号 no（优先从 data-post-id=\"dynamics_NO\" 获取）\n            const idAttr = $post.attr('data-post-id') || '';\n            let postNo = null;\n            const m = idAttr.match(/^dynamics_(\\d+)/);\n            if (m)\n                postNo = parseInt(m[1], 10);\n            if (!postNo) {\n                const noAttr = $post.attr('data-post-no');\n                if (noAttr)\n                    postNo = parseInt(noAttr, 10);\n            }\n            if (!postNo) {\n                console.warn('点赞失败：未能解析动态编号');\n                return;\n            }\n            try {\n                // 获取当前用户名称（用于前端显示判断）\n                const userNameRaw = await triggerSlash('/pass {{user}}');\n                const displayUserName = (userNameRaw || '').trim() || '用户';\n                // 在存储时使用固定的 \"user\" 字符串\n                const storageUserName = 'user';\n                // 工具函数\n                const escapeRegExp = (s) => s.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n                const formatHHMM = (d) => {\n                    const hh = String(d.getHours()).padStart(2, '0');\n                    const mi = String(d.getMinutes()).padStart(2, '0');\n                    return `${hh}:${mi}`;\n                };\n                // 获取动态所在的楼层ID\n                const messageIdAttr = $post.attr('data-message-id');\n                const messageId = messageIdAttr ? parseInt(messageIdAttr, 10) : null;\n                // 使用 CommentHandler 的跨楼层查找方法\n                const result = await this.commentHandler.findTargetMessage(messageId, postNo, '点赞');\n                if (!result) {\n                    console.warn('点赞失败：无法找到目标楼层');\n                    return;\n                }\n                const cm = result.message;\n                const targetMessageId = result.messageId;\n                let msgText = cm.message || '';\n                // 由数据判断当前是否已点赞（直接查找 \"user\" 记录）\n                // 先尝试从消息中查找是否有 \"user\" 的点赞记录\n                const likeLineRe = new RegExp(`^\\\\[点赞_${postNo}\\\\|\\\\s*${escapeRegExp(storageUserName)}\\\\s*\\\\|[^\\\\]]+\\\\]\\\\s*$`, 'm');\n                const alreadyLiked = likeLineRe.test(msgText);\n                const likeToSet = !alreadyLiked;\n                const startTag = '[动态]';\n                const endTag = '[/动态]';\n                const startIndex = msgText.indexOf(startTag);\n                const endIndex = msgText.indexOf(endTag);\n                if (startIndex === -1 || endIndex === -1 || endIndex <= startIndex) {\n                    console.warn('点赞失败：当前楼层未找到[动态]容器');\n                    return;\n                }\n                if (likeToSet) {\n                    const ts = formatHHMM(new Date());\n                    const insertPos = msgText.indexOf(endTag, startIndex);\n                    const beforeEnd = msgText.slice(0, insertPos).replace(/\\s*$/, '');\n                    const afterEnd = msgText.slice(insertPos);\n                    // 存储时使用 \"user\"\n                    msgText = `${beforeEnd}\\n[点赞_${postNo}|${storageUserName}|${ts}]\\n${afterEnd}`;\n                    await setChatMessages([{ message_id: targetMessageId, message: msgText }], { refresh: 'none' });\n                }\n                else {\n                    // 全量移除该用户针对该动态的点赞行（查找 \"user\" 记录）\n                    const likeLineReAll = new RegExp(`^\\\\[点赞_${postNo}\\\\|\\\\s*${escapeRegExp(storageUserName)}\\\\s*\\\\|[^\\\\]]+\\\\]\\\\s*$`, 'gm');\n                    msgText = msgText.replace(likeLineReAll, '').replace(/\\n{3,}/g, '\\n\\n');\n                    await setChatMessages([{ message_id: targetMessageId, message: msgText }], { refresh: 'none' });\n                }\n                // 更新前端 liked-by 显示\n                // 重新获取当前显示的点赞用户列表\n                const currentDisplayNames = $post\n                    .find('.dynamics-liked-by .liked-user')\n                    .map((i, el) => jquery__WEBPACK_IMPORTED_MODULE_0___default()(el).text().trim())\n                    .get();\n                let names = currentDisplayNames.slice();\n                if (likeToSet) {\n                    // 添加点赞时，显示实际用户名\n                    if (!names.includes(displayUserName))\n                        names.push(displayUserName);\n                }\n                else {\n                    // 取消点赞时，移除实际用户名\n                    names = names.filter(n => n !== displayUserName);\n                }\n                const applyLikedByUI = (list) => {\n                    let $liked = $post.find('.dynamics-liked-by');\n                    const heartIcon = '<svg class=\"liked-heart-icon\" viewBox=\"0 0 24 24\"><path d=\"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z\"/></svg>';\n                    if (list.length === 0) {\n                        if ($liked.length)\n                            $liked.remove();\n                        $action.removeClass('liked');\n                        return;\n                    }\n                    if (!$liked.length) {\n                        $liked = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div>', { class: 'dynamics-liked-by' });\n                        $post.find('.dynamics-post-actions').after($liked);\n                    }\n                    $liked.empty().html(heartIcon);\n                    list.forEach((n, idx) => {\n                        if (idx > 0)\n                            $liked.append(jquery__WEBPACK_IMPORTED_MODULE_0___default()('<span>', { text: '、' }));\n                        $liked.append(jquery__WEBPACK_IMPORTED_MODULE_0___default()('<span>', { class: 'liked-user', text: n }));\n                    });\n                    $action.toggleClass('liked', list.includes(displayUserName));\n                };\n                applyLikedByUI(names);\n                // 事件桥接：通知管理器刷新内存（兼容两种事件名）\n                try {\n                    const detail = {\n                        messageId: targetMessageId,\n                        postNo: postNo,\n                        type: 'like',\n                        action: likeToSet ? 'add' : 'remove',\n                        user: storageUserName,\n                        timestamp: formatHHMM(new Date()),\n                    };\n                    document.dispatchEvent(new CustomEvent('dynamics:interactionAdded', { detail }));\n                    document.dispatchEvent(new CustomEvent('dynamicsInteractionAdded', { detail }));\n                }\n                catch (e) {\n                    console.warn('⚠️ 派发点赞事件失败:', e);\n                }\n                // 播放点赞专用音效（只播一声 emoji）\n                if (this.soundManager && this.soundManager.playSound) {\n                    this.soundManager.playSound('emoji');\n                }\n            }\n            catch (err) {\n                console.error('处理点赞失败:', err);\n            }\n        });\n    }\n    /**\n     * 初始化用户名点击处理器\n     */\n    initializeProfileClickHandlers() {\n        // 使用事件委托处理用户名点击\n        const $container = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsInterface');\n        // 为动态内容的用户名添加点击事件\n        $container.off('click.postName').on('click.postName', '.dynamics-post-name', function (e) {\n            e.stopPropagation();\n            const $this = jquery__WEBPACK_IMPORTED_MODULE_0___default()(this);\n            $this.css('cursor', 'pointer');\n            const name = $this.text().trim();\n            // 触发自定义事件\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).trigger('dynamics:profile:click', { username: name });\n        });\n        // 为评论区的用户名添加点击事件\n        $container.off('click.commentName').on('click.commentName', '.dynamics-comment-name', function (e) {\n            e.stopPropagation();\n            const $this = jquery__WEBPACK_IMPORTED_MODULE_0___default()(this);\n            $this.css('cursor', 'pointer');\n            const name = $this.text().trim();\n            // 触发自定义事件\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).trigger('dynamics:profile:click', { username: name });\n        });\n    }\n    /**\n     * 初始化设置按钮处理器 - 现在改为批量删除模式切换\n     */\n    initializeSettingsHandler() {\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('.dynamics-nav-settings').off('click.settings').on('click.settings', () => {\n            // 切换删除模式\n            this.deleteManager.toggleDeleteMode();\n            // 更新图标状态\n            const $settingsBtn = jquery__WEBPACK_IMPORTED_MODULE_0___default()('.dynamics-nav-settings');\n            if (this.deleteManager.isInDeleteMode()) {\n                $settingsBtn.addClass('delete-mode-active');\n                // 可选：改变图标颜色或添加其他视觉反馈\n            }\n            else {\n                $settingsBtn.removeClass('delete-mode-active');\n            }\n        });\n    }\n    /**\n     * 初始化Logo点击处理器 - 用于隐藏/显示发布按钮\n     */\n    initializeLogoHandler() {\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('.dynamics-nav-logo').off('click.logo').on('click.logo', () => {\n            const $newDynamicBtn = jquery__WEBPACK_IMPORTED_MODULE_0___default()('.new-dynamic-btn');\n            // 播放emoji音效\n            if (this.soundManager?.playSound) {\n                this.soundManager.playSound('emoji');\n            }\n            if ($newDynamicBtn.length) {\n                // 使用CSS类控制显示/隐藏，更快的动画\n                if ($newDynamicBtn.hasClass('hidden')) {\n                    // 显示按钮\n                    $newDynamicBtn.removeClass('hidden hiding').addClass('showing');\n                    setTimeout(() => {\n                        $newDynamicBtn.removeClass('showing');\n                        toastr.info('发布按钮已显示', '', { timeOut: 1000 });\n                    }, 300);\n                }\n                else {\n                    // 隐藏按钮\n                    $newDynamicBtn.removeClass('showing').addClass('hiding');\n                    setTimeout(() => {\n                        $newDynamicBtn.addClass('hidden').removeClass('hiding');\n                        toastr.info('发布按钮已隐藏', '', { timeOut: 1000 });\n                    }, 300);\n                }\n            }\n        });\n    }\n    /**\n     * 初始化动态返回按钮事件\n     */\n    initializeDynamicsBackButton() {\n        const $backBtn = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsBackBtn');\n        // 使用jQuery的off/on模式避免重复绑定\n        $backBtn.off('click.back').on('click.back', (e) => {\n            e.preventDefault();\n            e.stopPropagation();\n            this.handleDynamicsBackClick();\n        });\n    }\n    /**\n     * 处理动态返回按钮点击\n     */\n    handleDynamicsBackClick() {\n        console.log('动态返回按钮被点击');\n        // 播放click音效（返回按钮）\n        if (this.soundManager?.playSound) {\n            this.soundManager.playSound('click');\n        }\n        // 使用jQuery触发自定义事件\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).trigger('dynamics:back', { source: 'dynamicsBackButton' });\n    }\n    /**\n     * 播放点击音效\n     */\n    playClickSound() {\n        // 使用soundManager播放音效\n        if (this.soundManager && this.soundManager.playSound) {\n            this.soundManager.playSound('click');\n        }\n    }\n    /**\n     * 销毁事件监听器\n     */\n    destroy() {\n        // 使用jQuery移除所有事件监听器\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsInterface').off('.dynamics');\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsInterface').off('.postImage');\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsInterface').off('.postName');\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsInterface').off('.commentName');\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('.dynamics-nav-settings').off('.settings');\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('.dynamics-nav-logo').off('.logo');\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsBackBtn').off('.back');\n        // 销毁评论处理器\n        this.commentHandler.destroy();\n        // 如果在删除模式，退出删除模式\n        if (this.deleteManager.isInDeleteMode()) {\n            this.deleteManager.toggleDeleteMode();\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZHluYW1pY3MvZXZlbnRIYW5kbGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7Ozs7R0FJRztBQUVvQjtBQUMyQjtBQUNGO0FBRXpDLE1BQU0sb0JBQW9CO0lBQ3ZCLFlBQVksQ0FBTSxDQUFDLFVBQVU7SUFDN0IsY0FBYyxDQUFpQixDQUFDLFFBQVE7SUFDeEMsYUFBYSxDQUFnQixDQUFDLFFBQVE7SUFFOUMsWUFBWSxZQUFpQjtRQUMzQixJQUFJLENBQUMsWUFBWSxHQUFHLFlBQVksQ0FBQztRQUNqQyxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksMkRBQWMsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUN2RCxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUkseURBQWEsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNyRCxJQUFJLENBQUMsb0JBQW9CLEVBQUUsQ0FBQztJQUM5QixDQUFDO0lBRUQ7OztPQUdHO0lBQ0ssb0JBQW9CO1FBQzFCLHFCQUFxQjtRQUNyQixJQUFJLElBQUksQ0FBQyxZQUFZLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUNyRCxzQkFBc0I7UUFDeEIsQ0FBQztJQUNILENBQUM7SUFFRDs7T0FFRztJQUNJLHdCQUF3QjtRQUM3QixJQUFJLENBQUMsc0JBQXNCLEVBQUUsQ0FBQztRQUM5QixJQUFJLENBQUMsMEJBQTBCLEVBQUUsQ0FBQztRQUNsQyxJQUFJLENBQUMsOEJBQThCLEVBQUUsQ0FBQztRQUN0QyxJQUFJLENBQUMseUJBQXlCLEVBQUUsQ0FBQztRQUNqQyxJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQyxDQUFDLGNBQWM7UUFDNUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLFVBQVU7SUFDOUMsQ0FBQztJQUVEOztPQUVHO0lBQ0ssc0JBQXNCO1FBQzVCLDZCQUE2QjtRQUM3QixNQUFNLGtCQUFrQixH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LEVBQUUsRUFBRSxDQUFDO1lBQ3hDLElBQUksQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztRQUN4QyxDQUFDO0lBQ0gsQ0FBQztDQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy9keW5hbWljcy9ldmVudEhhbmRsZXIudHM/Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICog5Yqo5oCB5LqL5Lu25aSE55CG5Zmo5qih5Z2X77yI5LyY5YyW54mI77yJXG4gKiDotJ/otKPlpITnkIbliqjmgIHnlYzpnaLnmoTlkITnp43kuqTkupLkuovku7ZcbiAqIOS9v+eUqGpRdWVyeei/m+ihjERPTeaTjeS9nFxuICovXG5cbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgeyBDb21tZW50SGFuZGxlciB9IGZyb20gJy4vY29tbWVudEhhbmRsZXInO1xuaW1wb3J0IHsgRGVsZXRlTWFuYWdlciB9IGZyb20gJy4vZGVsZXRlTWFuYWdlcic7XG5cbmV4cG9ydCBjbGFzcyBEeW5hbWljc0V2ZW50SGFuZGxlciB7XG4gIHByaXZhdGUgc291bmRNYW5hZ2VyOiBhbnk7IC8vIOmfs+aViOeuoeeQhuWZqOW8leeUqFxuICBwcml2YXRlIGNvbW1lbnRIYW5kbGVyOiBDb21tZW50SGFuZGxlcjsgLy8g6K+E6K665aSE55CG5ZmoXG4gIHByaXZhdGUgZGVsZXRlTWFuYWdlcjogRGVsZXRlTWFuYWdlcjsgLy8g5Yig6Zmk566h55CG5ZmoXG5cbiAgY29uc3RydWN0b3Ioc291bmRNYW5hZ2VyOiBhbnkpIHtcbiAgICB0aGlzLnNvdW5kTWFuYWdlciA9IHNvdW5kTWFuYWdlcjtcbiAgICB0aGlzLmNvbW1lbnRIYW5kbGVyID0gbmV3IENvbW1lbnRIYW5kbGVyKHNvdW5kTWFuYWdlcik7XG4gICAgdGhpcy5kZWxldGVNYW5hZ2VyID0gbmV3IERlbGV0ZU1hbmFnZXIoc291bmRNYW5hZ2VyKTtcbiAgICB0aGlzLmluaXRpYWxpemVDbGlja1NvdW5kKCk7XG4gIH1cblxuICAvKipcbiAgICog5Yid5aeL5YyW54K55Ye76Z+z5pWIXG4gICAqIOS9v+eUqOmfs+aViOeuoeeQhuWZqOiAjOS4jeaYr+ebtOaOpeWIm+W7ukF1ZGlv5a+56LGhXG4gICAqL1xuICBwcml2YXRlIGluaXRpYWxpemVDbGlja1NvdW5kKCk6IHZvaWQge1xuICAgIC8vIOS9v+eUqHNvdW5kTWFuYWdlcueuoeeQhumfs+aViFxuICAgIGlmICh0aGlzLnNvdW5kTWFuYWdlciAmJiB0aGlzLnNvdW5kTWFuYWdlci5wbGF5U291bmQpIHtcbiAgICAgIC8vIOmfs+aViOeUsXNvdW5kTWFuYWdlcue7n+S4gOeuoeeQhlxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDliJ3lp4vljJbmiYDmnInliqjmgIHnm7jlhbPnmoTkuovku7bnm5HlkKzlmahcbiAgICovXG4gIHB1YmxpYyBpbml0aWFsaXplRXZlbnRMaXN0ZW5lcnMoKTogdm9pZCB7XG4gICAgdGhpcy5pbml0aWFsaXplQ2xpY2tFZmZlY3RzKCk7XG4gICAgdGhpcy5pbml0aWFsaXplUG9zdEludGVyYWN0aW9ucygpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZVByb2ZpbGVDbGlja0hhbmRsZXJzKCk7XG4gICAgdGhpcy5pbml0aWFsaXplU2V0dGluZ3NIYW5kbGVyKCk7XG4gICAgdGhpcy5pbml0aWFsaXplTG9nb0hhbmRsZXIoKTsgLy8g5Yid5aeL5YyWbG9nb+eCueWHu+WKn+iDvVxuICAgIHRoaXMuY29tbWVudEhhbmRsZXIuaW5pdGlhbGl6ZSgpOyAvLyDliJ3lp4vljJbor4Torrrlip/og71cbiAgfVxuXG4gIC8qKlxuICAgKiDliJ3lp4vljJbngrnlh7vnibnmlYhcbiAgICovXG4gIHByaXZhdGUgaW5pdGlhbGl6ZUNsaWNrRWZmZWN0cygpOiB2b2lkIHtcbiAgICAvLyDkuLrmiYDmnInlj6/ngrnlh7vlhYPntKDmt7vliqDngrnlh7vnibnmlYjvvIjlt7Lnp7vpmaTniLHlv4PlkozmmJ/mmJ/nibnmlYjvvIlcbiAgICBjb25zdCBjbGlja2FibGVTZWxlY3RvcnMgPSBbXG4gICAgICAnLmR5bmFtaWNzLW5hdi1wcm9maWxlJyxcbiAgICAgICcuZHluYW1pY3MtbmF2LXNldHRpbmdzJyxcbiAgICAgICcuZHluYW1pY3MtcG9zdC1hdmF0YXInLFxuICAgICAgJy5keW5hbWljcy1wb3N0LWltYWdlJyxcbiAgICAgIC8vIOenu+mZpCAnLmR5bmFtaWNzLXBvc3QtYWN0aW9uJ++8jOmBv+WFjeS4jueCuei1nuS4k+eUqOmfs+aViOmHjeWkjeaSreaUvlxuICAgICAgJy5keW5hbWljcy1wb3N0LWNvbnRlbnQnLFxuICAgICAgJy5keW5hbWljcy1jb21tZW50JyxcbiAgICAgICcuZHluYW1pY3MtY29tbWVudC1hdmF0YXInLFxuICAgIF07XG5cbiAgICAvLyDkvb/nlKhqUXVlcnnkuovku7blp5TmiZjvvIzpgb/lhY3ph43lpI3nu5HlrppcbiAgICBjb25zdCAkZHluYW1pY3NDb250YWluZXIgPSAkKCcjZHluYW1pY3NJbnRlcmZhY2UnKTtcbiAgICBcbiAgICAvLyDnp7vpmaTkuYvliY3nmoTkuovku7bnm5HlkKzlmahcbiAgICAkZHluYW1pY3NDb250YWluZXIub2ZmKCdjbGljay5keW5hbWljcycpO1xuICAgIFxuICAgIC8vIOS9v+eUqOS6i+S7tuWnlOaJmOe7keWumueCueWHu+S6i+S7tlxuICAgICRkeW5hbWljc0NvbnRhaW5lci5vbignY2xpY2suZHluYW1pY3MnLCBjbGlja2FibGVTZWxlY3RvcnMuam9pbignLCAnKSwgKGUpID0+IHtcbiAgICAgIHRoaXMuaGFuZGxlQ2xpY2tFZmZlY3QoZSk7XG4gICAgfSk7XG5cbiAgICAvLyDkuI3lho3mt7vliqDlhajlsYDngrnlh7vnibnmlYjvvIjlv4PlvaLliqjnlLvvvIlcbiAgfVxuXG4gIC8qKlxuICAgKiDlpITnkIbngrnlh7vnibnmlYhcbiAgICovXG4gIHByaXZhdGUgaGFuZGxlQ2xpY2tFZmZlY3QoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQge1xuICAgIGNvbnN0ICRlbGVtZW50ID0gJCgoZXZlbnQgYXMgYW55KS5jdXJyZW50VGFyZ2V0KTtcblxuICAgIC8vIOaSreaUvueCueWHu+mfs+aViFxuICAgIHRoaXMucGxheUNsaWNrU291bmQoKTtcblxuICAgIC8vIOWPquS/neeVmeeugOWNleeahOe8qeaUvuWKqOeUu++8jOenu+mZpOmXquWFieeJueaViFxuICAgICRlbGVtZW50LmNzcygndHJhbnNmb3JtJywgJ3NjYWxlKDAuOTUpJyk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAkZWxlbWVudC5jc3MoJ3RyYW5zZm9ybScsICcnKTtcbiAgICB9LCAxMDApO1xuICB9XG5cblxuICAvKipcbiAgICog5Yid5aeL5YyW5biW5a2Q5Lqk5LqS5aSE55CG5ZmoXG4gICAqL1xuICBwcml2YXRlIGluaXRpYWxpemVQb3N0SW50ZXJhY3Rpb25zKCk6IHZvaWQge1xuICAgIC8vIOS9v+eUqOS6i+S7tuWnlOaJmOWkhOeQhuW4luWtkOWbvueJh+eCueWHu1xuICAgICQoJyNkeW5hbWljc0ludGVyZmFjZScpLm9mZignY2xpY2sucG9zdEltYWdlJykub24oJ2NsaWNrLnBvc3RJbWFnZScsICcuZHluYW1pY3MtcG9zdC1pbWFnZScsIGZ1bmN0aW9uKCkge1xuICAgICAgY29uc3QgJGltYWdlID0gJCh0aGlzKTtcbiAgICAgIGxldCAkZGVzY3JpcHRpb24gPSAkaW1hZ2UuZmluZCgnLmR5bmFtaWNzLWltYWdlLWRlc2NyaXB0aW9uJyk7XG5cbiAgICAgIGlmICgkZGVzY3JpcHRpb24ubGVuZ3RoKSB7XG4gICAgICAgIC8vIOWmguaenOaPj+i/sOW3suWtmOWcqO+8jOWImeenu+mZpFxuICAgICAgICAkZGVzY3JpcHRpb24uZmFkZU91dCgzMDAsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8g5Yib5bu65paw55qE5o+P6L+w5YWD57SgXG4gICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gJGltYWdlLmRhdGEoJ2Rlc2NyaXB0aW9uJykgfHwgJ+i/meaYr+S4gOW8oOe+juS4veeahOWbvueJhyDinKfLlsKwJztcblxuICAgICAgICAkZGVzY3JpcHRpb24gPSAkKCc8ZGl2PicsIHtcbiAgICAgICAgICBjbGFzczogJ2R5bmFtaWNzLWltYWdlLWRlc2NyaXB0aW9uJyxcbiAgICAgICAgICB0ZXh0OiBkZXNjcmlwdGlvblxuICAgICAgICB9KTtcblxuICAgICAgICAkaW1hZ2UuY3NzKCdwb3NpdGlvbicsICdyZWxhdGl2ZScpO1xuICAgICAgICAkZGVzY3JpcHRpb24uaGlkZSgpLmFwcGVuZFRvKCRpbWFnZSkuZmFkZUluKDMwMCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyDkvb/nlKjkuovku7blp5TmiZjlpITnkIbngrnotZ7ngrnlh7vvvIjlkIzmraXlhpnlhaXmraPnoa7mpbzlsYLmtojmga/vvIlcbiAgICAkKCcjZHluYW1pY3NJbnRlcmZhY2UnKVxuICAgICAgLm9mZignY2xpY2sucG9zdExpa2UnKVxuICAgICAgLm9uKCdjbGljay5wb3N0TGlrZScsICcuZHluYW1pY3MtcG9zdC1hY3Rpb25bZGF0YS1hY3Rpb249XCJsaWtlXCJdJywgYXN5bmMgKGV2KSA9PiB7XG4gICAgICAgIGNvbnN0ICRhY3Rpb24gPSAkKChldiBhcyBhbnkpLmN1cnJlbnRUYXJnZXQpO1xuICAgICAgICBjb25zdCAkcG9zdCA9ICRhY3Rpb24uY2xvc2VzdCgnLmR5bmFtaWNzLXBvc3QnKTtcbiAgICAgICAgaWYgKCEkcG9zdC5sZW5ndGgpIHJldHVybjtcblxuICAgICAgICAvLyDmj5Dlj5bliqjmgIHnvJblj7cgbm/vvIjkvJjlhYjku44gZGF0YS1wb3N0LWlkPVwiZHluYW1pY3NfTk9cIiDojrflj5bvvIlcbiAgICAgICAgY29uc3QgaWRBdHRyID0gJHBvc3QuYXR0cignZGF0YS1wb3N0LWlkJykgfHwgJyc7XG4gICAgICAgIGxldCBwb3N0Tm86IG51bWJlciB8IG51bGwgPSBudWxsO1xuICAgICAgICBjb25zdCBtID0gaWRBdHRyLm1hdGNoKC9eZHluYW1pY3NfKFxcZCspLyk7XG4gICAgICAgIGlmIChtKSBwb3N0Tm8gPSBwYXJzZUludChtWzFdLCAxMCk7XG4gICAgICAgIGlmICghcG9zdE5vKSB7XG4gICAgICAgICAgY29uc3Qgbm9BdHRyID0gJHBvc3QuYXR0cignZGF0YS1wb3N0LW5vJyk7XG4gICAgICAgICAgaWYgKG5vQXR0cikgcG9zdE5vID0gcGFyc2VJbnQobm9BdHRyLCAxMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFwb3N0Tm8pIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ+eCuei1nuWksei0pe+8muacquiDveino+aekOWKqOaAgee8luWPtycpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8g6I635Y+W5b2T5YmN55So5oi35ZCN56ew77yI55So5LqO5YmN56uv5pi+56S65Yik5pat77yJXG4gICAgICAgICAgY29uc3QgdXNlck5hbWVSYXcgPSBhd2FpdCB0cmlnZ2VyU2xhc2goJy9wYXNzIHt7dXNlcn19Jyk7XG4gICAgICAgICAgY29uc3QgZGlzcGxheVVzZXJOYW1lID0gKHVzZXJOYW1lUmF3IHx8ICcnKS50cmltKCkgfHwgJ+eUqOaItyc7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8g5Zyo5a2Y5YKo5pe25L2/55So5Zu65a6a55qEIFwidXNlclwiIOWtl+espuS4slxuICAgICAgICAgIGNvbnN0IHN0b3JhZ2VVc2VyTmFtZSA9ICd1c2VyJztcblxuICAgICAgICAgIC8vIOW3peWFt+WHveaVsFxuICAgICAgICAgIGNvbnN0IGVzY2FwZVJlZ0V4cCA9IChzOiBzdHJpbmcpID0+IHMucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csICdcXFxcJCYnKTtcbiAgICAgICAgICBjb25zdCBmb3JtYXRISE1NID0gKGQ6IERhdGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGhoID0gU3RyaW5nKGQuZ2V0SG91cnMoKSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgICAgICAgIGNvbnN0IG1pID0gU3RyaW5nKGQuZ2V0TWludXRlcygpKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgICAgICAgcmV0dXJuIGAke2hofToke21pfWA7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIC8vIOiOt+WPluWKqOaAgeaJgOWcqOeahOalvOWxgklEXG4gICAgICAgICAgY29uc3QgbWVzc2FnZUlkQXR0ciA9ICRwb3N0LmF0dHIoJ2RhdGEtbWVzc2FnZS1pZCcpO1xuICAgICAgICAgIGNvbnN0IG1lc3NhZ2VJZCA9IG1lc3NhZ2VJZEF0dHIgPyBwYXJzZUludChtZXNzYWdlSWRBdHRyLCAxMCkgOiBudWxsO1xuXG4gICAgICAgICAgLy8g5L2/55SoIENvbW1lbnRIYW5kbGVyIOeahOi3qOalvOWxguafpeaJvuaWueazlVxuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuY29tbWVudEhhbmRsZXIuZmluZFRhcmdldE1lc3NhZ2UobWVzc2FnZUlkLCBwb3N0Tm8sICfngrnotZ4nKTtcbiAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCfngrnotZ7lpLHotKXvvJrml6Dms5Xmib7liLDnm67moIfmpbzlsYInKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBjbSA9IHJlc3VsdC5tZXNzYWdlO1xuICAgICAgICAgIGNvbnN0IHRhcmdldE1lc3NhZ2VJZCA9IHJlc3VsdC5tZXNzYWdlSWQ7XG4gICAgICAgICAgbGV0IG1zZ1RleHQgPSBjbS5tZXNzYWdlIHx8ICcnO1xuXG4gICAgICAgICAgLy8g55Sx5pWw5o2u5Yik5pat5b2T5YmN5piv5ZCm5bey54K56LWe77yI55u05o6l5p+l5om+IFwidXNlclwiIOiusOW9le+8iVxuICAgICAgICAgIC8vIOWFiOWwneivleS7jua2iOaBr+S4reafpeaJvuaYr+WQpuaciSBcInVzZXJcIiDnmoTngrnotZ7orrDlvZVcbiAgICAgICAgICBjb25zdCBsaWtlTGluZVJlID0gbmV3IFJlZ0V4cChcbiAgICAgICAgICAgIGBeXFxcXFvngrnotZ5fJHtwb3N0Tm99XFxcXHxcXFxccyoke2VzY2FwZVJlZ0V4cChzdG9yYWdlVXNlck5hbWUpfVxcXFxzKlxcXFx8W15cXFxcXV0rXFxcXF1cXFxccyokYCxcbiAgICAgICAgICAgICdtJyxcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnN0IGFscmVhZHlMaWtlZCA9IGxpa2VMaW5lUmUudGVzdChtc2dUZXh0KTtcbiAgICAgICAgICBjb25zdCBsaWtlVG9TZXQgPSAhYWxyZWFkeUxpa2VkO1xuXG4gICAgICAgICAgY29uc3Qgc3RhcnRUYWcgPSAnW+WKqOaAgV0nO1xuICAgICAgICAgIGNvbnN0IGVuZFRhZyA9ICdbL+WKqOaAgV0nO1xuICAgICAgICAgIGNvbnN0IHN0YXJ0SW5kZXggPSBtc2dUZXh0LmluZGV4T2Yoc3RhcnRUYWcpO1xuICAgICAgICAgIGNvbnN0IGVuZEluZGV4ID0gbXNnVGV4dC5pbmRleE9mKGVuZFRhZyk7XG5cbiAgICAgICAgICBpZiAoc3RhcnRJbmRleCA9PT0gLTEgfHwgZW5kSW5kZXggPT09IC0xIHx8IGVuZEluZGV4IDw9IHN0YXJ0SW5kZXgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2Fybign54K56LWe5aSx6LSl77ya5b2T5YmN5qW85bGC5pyq5om+5YiwW+WKqOaAgV3lrrnlmagnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAobGlrZVRvU2V0KSB7XG4gICAgICAgICAgICBjb25zdCB0cyA9IGZvcm1hdEhITU0obmV3IERhdGUoKSk7XG4gICAgICAgICAgICBjb25zdCBpbnNlcnRQb3MgPSBtc2dUZXh0LmluZGV4T2YoZW5kVGFnLCBzdGFydEluZGV4KTtcbiAgICAgICAgICAgIGNvbnN0IGJlZm9yZUVuZCA9IG1zZ1RleHQuc2xpY2UoMCwgaW5zZXJ0UG9zKS5yZXBsYWNlKC9cXHMqJC8sICcnKTtcbiAgICAgICAgICAgIGNvbnN0IGFmdGVyRW5kID0gbXNnVGV4dC5zbGljZShpbnNlcnRQb3MpO1xuICAgICAgICAgICAgLy8g5a2Y5YKo5pe25L2/55SoIFwidXNlclwiXG4gICAgICAgICAgICBtc2dUZXh0ID0gYCR7YmVmb3JlRW5kfVxcblvngrnotZ5fJHtwb3N0Tm99fCR7c3RvcmFnZVVzZXJOYW1lfXwke3RzfV1cXG4ke2FmdGVyRW5kfWA7XG5cbiAgICAgICAgICAgIGF3YWl0IHNldENoYXRNZXNzYWdlcyhbeyBtZXNzYWdlX2lkOiB0YXJnZXRNZXNzYWdlSWQsIG1lc3NhZ2U6IG1zZ1RleHQgfV0sIHsgcmVmcmVzaDogJ25vbmUnIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyDlhajph4/np7vpmaTor6XnlKjmiLfpkojlr7nor6XliqjmgIHnmoTngrnotZ7ooYzvvIjmn6Xmib4gXCJ1c2VyXCIg6K6w5b2V77yJXG4gICAgICAgICAgICBjb25zdCBsaWtlTGluZVJlQWxsID0gbmV3IFJlZ0V4cChcbiAgICAgICAgICAgICAgYF5cXFxcW+eCuei1nl8ke3Bvc3ROb31cXFxcfFxcXFxzKiR7ZXNjYXBlUmVnRXhwKHN0b3JhZ2VVc2VyTmFtZSl9XFxcXHMqXFxcXHxbXlxcXFxdXStcXFxcXVxcXFxzKiRgLFxuICAgICAgICAgICAgICAnZ20nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIG1zZ1RleHQgPSBtc2dUZXh0LnJlcGxhY2UobGlrZUxpbmVSZUFsbCwgJycpLnJlcGxhY2UoL1xcbnszLH0vZywgJ1xcblxcbicpO1xuICAgICAgICAgICAgYXdhaXQgc2V0Q2hhdE1lc3NhZ2VzKFt7IG1lc3NhZ2VfaWQ6IHRhcmdldE1lc3NhZ2VJZCwgbWVzc2FnZTogbXNnVGV4dCB9XSwgeyByZWZyZXNoOiAnbm9uZScgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8g5pu05paw5YmN56uvIGxpa2VkLWJ5IOaYvuekulxuICAgICAgICAgIC8vIOmHjeaWsOiOt+WPluW9k+WJjeaYvuekuueahOeCuei1nueUqOaIt+WIl+ihqFxuICAgICAgICAgIGNvbnN0IGN1cnJlbnREaXNwbGF5TmFtZXM6IHN0cmluZ1tdID0gJHBvc3RcbiAgICAgICAgICAgIC5maW5kKCcuZHluYW1pY3MtbGlrZWQtYnkgLmxpa2VkLXVzZXInKVxuICAgICAgICAgICAgLm1hcCgoaSwgZWwpID0+ICQoZWwpLnRleHQoKS50cmltKCkpXG4gICAgICAgICAgICAuZ2V0KCk7XG4gICAgICAgICAgXG4gICAgICAgICAgbGV0IG5hbWVzID0gY3VycmVudERpc3BsYXlOYW1lcy5zbGljZSgpO1xuICAgICAgICAgIGlmIChsaWtlVG9TZXQpIHtcbiAgICAgICAgICAgIC8vIOa3u+WKoOeCuei1nuaXtu+8jOaYvuekuuWunumZheeUqOaIt+WQjVxuICAgICAgICAgICAgaWYgKCFuYW1lcy5pbmNsdWRlcyhkaXNwbGF5VXNlck5hbWUpKSBuYW1lcy5wdXNoKGRpc3BsYXlVc2VyTmFtZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIOWPlua2iOeCuei1nuaXtu+8jOenu+mZpOWunumZheeUqOaIt+WQjVxuICAgICAgICAgICAgbmFtZXMgPSBuYW1lcy5maWx0ZXIobiA9PiBuICE9PSBkaXNwbGF5VXNlck5hbWUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGFwcGx5TGlrZWRCeVVJID0gKGxpc3Q6IHN0cmluZ1tdKSA9PiB7XG4gICAgICAgICAgICBsZXQgJGxpa2VkID0gJHBvc3QuZmluZCgnLmR5bmFtaWNzLWxpa2VkLWJ5Jyk7XG4gICAgICAgICAgICBjb25zdCBoZWFydEljb24gPVxuICAgICAgICAgICAgICAnPHN2ZyBjbGFzcz1cImxpa2VkLWhlYXJ0LWljb25cIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+PHBhdGggZD1cIk0xMiAyMS4zNWwtMS40NS0xLjMyQzUuNCAxNS4zNiAyIDEyLjI4IDIgOC41IDIgNS40MiA0LjQyIDMgNy41IDNjMS43NCAwIDMuNDEuODEgNC41IDIuMDlDMTMuMDkgMy44MSAxNC43NiAzIDE2LjUgMyAxOS41OCAzIDIyIDUuNDIgMjIgOC41YzAgMy43OC0zLjQgNi44Ni04LjU1IDExLjU0TDEyIDIxLjM1elwiLz48L3N2Zz4nO1xuXG4gICAgICAgICAgICBpZiAobGlzdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgaWYgKCRsaWtlZC5sZW5ndGgpICRsaWtlZC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgJGFjdGlvbi5yZW1vdmVDbGFzcygnbGlrZWQnKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoISRsaWtlZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgJGxpa2VkID0gJCgnPGRpdj4nLCB7IGNsYXNzOiAnZHluYW1pY3MtbGlrZWQtYnknIH0pO1xuICAgICAgICAgICAgICAkcG9zdC5maW5kKCcuZHluYW1pY3MtcG9zdC1hY3Rpb25zJykuYWZ0ZXIoJGxpa2VkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJGxpa2VkLmVtcHR5KCkuaHRtbChoZWFydEljb24pO1xuICAgICAgICAgICAgbGlzdC5mb3JFYWNoKChuLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKGlkeCA+IDApICRsaWtlZC5hcHBlbmQoJCgnPHNwYW4+JywgeyB0ZXh0OiAn44CBJyB9KSk7XG4gICAgICAgICAgICAgICRsaWtlZC5hcHBlbmQoJCgnPHNwYW4+JywgeyBjbGFzczogJ2xpa2VkLXVzZXInLCB0ZXh0OiBuIH0pKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkYWN0aW9uLnRvZ2dsZUNsYXNzKCdsaWtlZCcsIGxpc3QuaW5jbHVkZXMoZGlzcGxheVVzZXJOYW1lKSk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGFwcGx5TGlrZWRCeVVJKG5hbWVzKTtcblxuICAgICAgICAgIC8vIOS6i+S7tuahpeaOpe+8mumAmuefpeeuoeeQhuWZqOWIt+aWsOWGheWtmO+8iOWFvOWuueS4pOenjeS6i+S7tuWQje+8iVxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBkZXRhaWwgPSB7XG4gICAgICAgICAgICAgIG1lc3NhZ2VJZDogdGFyZ2V0TWVzc2FnZUlkLFxuICAgICAgICAgICAgICBwb3N0Tm86IHBvc3RObyBhcyBudW1iZXIsXG4gICAgICAgICAgICAgIHR5cGU6ICdsaWtlJyxcbiAgICAgICAgICAgICAgYWN0aW9uOiBsaWtlVG9TZXQgPyAnYWRkJyA6ICdyZW1vdmUnLFxuICAgICAgICAgICAgICB1c2VyOiBzdG9yYWdlVXNlck5hbWUsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogZm9ybWF0SEhNTShuZXcgRGF0ZSgpKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnZHluYW1pY3M6aW50ZXJhY3Rpb25BZGRlZCcsIHsgZGV0YWlsIH0pKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdkeW5hbWljc0ludGVyYWN0aW9uQWRkZWQnLCB7IGRldGFpbCB9KSk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8g5rS+5Y+R54K56LWe5LqL5Lu25aSx6LSlOicsIGUpO1xuICAgICAgICAgIH1cbiBcbiAgICAgICAgICAvLyDmkq3mlL7ngrnotZ7kuJPnlKjpn7PmlYjvvIjlj6rmkq3kuIDlo7AgZW1vamnvvIlcbiAgICAgICAgICBpZiAodGhpcy5zb3VuZE1hbmFnZXIgJiYgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKSB7XG4gICAgICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5U291bmQoJ2Vtb2ppJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCflpITnkIbngrnotZ7lpLHotKU6JywgZXJyKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog5Yid5aeL5YyW55So5oi35ZCN54K55Ye75aSE55CG5ZmoXG4gICAqL1xuICBwcml2YXRlIGluaXRpYWxpemVQcm9maWxlQ2xpY2tIYW5kbGVycygpOiB2b2lkIHtcbiAgICAvLyDkvb/nlKjkuovku7blp5TmiZjlpITnkIbnlKjmiLflkI3ngrnlh7tcbiAgICBjb25zdCAkY29udGFpbmVyID0gJCgnI2R5bmFtaWNzSW50ZXJmYWNlJyk7XG4gICAgXG4gICAgLy8g5Li65Yqo5oCB5YaF5a6555qE55So5oi35ZCN5re75Yqg54K55Ye75LqL5Lu2XG4gICAgJGNvbnRhaW5lci5vZmYoJ2NsaWNrLnBvc3ROYW1lJykub24oJ2NsaWNrLnBvc3ROYW1lJywgJy5keW5hbWljcy1wb3N0LW5hbWUnLCBmdW5jdGlvbihlKSB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgY29uc3QgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgJHRoaXMuY3NzKCdjdXJzb3InLCAncG9pbnRlcicpO1xuICAgICAgY29uc3QgbmFtZSA9ICR0aGlzLnRleHQoKS50cmltKCk7XG4gICAgICBcbiAgICAgIC8vIOinpuWPkeiHquWumuS5ieS6i+S7tlxuICAgICAgJChkb2N1bWVudCkudHJpZ2dlcignZHluYW1pY3M6cHJvZmlsZTpjbGljaycsIHsgdXNlcm5hbWU6IG5hbWUgfSk7XG4gICAgfSk7XG5cbiAgICAvLyDkuLror4TorrrljLrnmoTnlKjmiLflkI3mt7vliqDngrnlh7vkuovku7ZcbiAgICAkY29udGFpbmVyLm9mZignY2xpY2suY29tbWVudE5hbWUnKS5vbignY2xpY2suY29tbWVudE5hbWUnLCAnLmR5bmFtaWNzLWNvbW1lbnQtbmFtZScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBjb25zdCAkdGhpcyA9ICQodGhpcyk7XG4gICAgICAkdGhpcy5jc3MoJ2N1cnNvcicsICdwb2ludGVyJyk7XG4gICAgICBjb25zdCBuYW1lID0gJHRoaXMudGV4dCgpLnRyaW0oKTtcbiAgICAgIFxuICAgICAgLy8g6Kem5Y+R6Ieq5a6a5LmJ5LqL5Lu2XG4gICAgICAkKGRvY3VtZW50KS50cmlnZ2VyKCdkeW5hbWljczpwcm9maWxlOmNsaWNrJywgeyB1c2VybmFtZTogbmFtZSB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliJ3lp4vljJborr7nva7mjInpkq7lpITnkIblmaggLSDnjrDlnKjmlLnkuLrmibnph4/liKDpmaTmqKHlvI/liIfmjaJcbiAgICovXG4gIHByaXZhdGUgaW5pdGlhbGl6ZVNldHRpbmdzSGFuZGxlcigpOiB2b2lkIHtcbiAgICAkKCcuZHluYW1pY3MtbmF2LXNldHRpbmdzJykub2ZmKCdjbGljay5zZXR0aW5ncycpLm9uKCdjbGljay5zZXR0aW5ncycsICgpID0+IHtcbiAgICAgIC8vIOWIh+aNouWIoOmZpOaooeW8j1xuICAgICAgdGhpcy5kZWxldGVNYW5hZ2VyLnRvZ2dsZURlbGV0ZU1vZGUoKTtcbiAgICAgIFxuICAgICAgLy8g5pu05paw5Zu+5qCH54q25oCBXG4gICAgICBjb25zdCAkc2V0dGluZ3NCdG4gPSAkKCcuZHluYW1pY3MtbmF2LXNldHRpbmdzJyk7XG4gICAgICBpZiAodGhpcy5kZWxldGVNYW5hZ2VyLmlzSW5EZWxldGVNb2RlKCkpIHtcbiAgICAgICAgJHNldHRpbmdzQnRuLmFkZENsYXNzKCdkZWxldGUtbW9kZS1hY3RpdmUnKTtcbiAgICAgICAgLy8g5Y+v6YCJ77ya5pS55Y+Y5Zu+5qCH6aKc6Imy5oiW5re75Yqg5YW25LuW6KeG6KeJ5Y+N6aaIXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkc2V0dGluZ3NCdG4ucmVtb3ZlQ2xhc3MoJ2RlbGV0ZS1tb2RlLWFjdGl2ZScpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIneWni+WMlkxvZ2/ngrnlh7vlpITnkIblmaggLSDnlKjkuo7pmpDol48v5pi+56S65Y+R5biD5oyJ6ZKuXG4gICAqL1xuICBwcml2YXRlIGluaXRpYWxpemVMb2dvSGFuZGxlcigpOiB2b2lkIHtcbiAgICAkKCcuZHluYW1pY3MtbmF2LWxvZ28nKS5vZmYoJ2NsaWNrLmxvZ28nKS5vbignY2xpY2subG9nbycsICgpID0+IHtcbiAgICAgIGNvbnN0ICRuZXdEeW5hbWljQnRuID0gJCgnLm5ldy1keW5hbWljLWJ0bicpO1xuICAgICAgXG4gICAgICAvLyDmkq3mlL5lbW9qaemfs+aViFxuICAgICAgaWYgKHRoaXMuc291bmRNYW5hZ2VyPy5wbGF5U291bmQpIHtcbiAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdlbW9qaScpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoJG5ld0R5bmFtaWNCdG4ubGVuZ3RoKSB7XG4gICAgICAgIC8vIOS9v+eUqENTU+exu+aOp+WItuaYvuekui/pmpDol4/vvIzmm7Tlv6vnmoTliqjnlLtcbiAgICAgICAgaWYgKCRuZXdEeW5hbWljQnRuLmhhc0NsYXNzKCdoaWRkZW4nKSkge1xuICAgICAgICAgIC8vIOaYvuekuuaMiemSrlxuICAgICAgICAgICRuZXdEeW5hbWljQnRuLnJlbW92ZUNsYXNzKCdoaWRkZW4gaGlkaW5nJykuYWRkQ2xhc3MoJ3Nob3dpbmcnKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICRuZXdEeW5hbWljQnRuLnJlbW92ZUNsYXNzKCdzaG93aW5nJyk7XG4gICAgICAgICAgICB0b2FzdHIuaW5mbygn5Y+R5biD5oyJ6ZKu5bey5pi+56S6JywgJycsIHsgdGltZU91dDogMTAwMCB9KTtcbiAgICAgICAgICB9LCAzMDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIOmakOiXj+aMiemSrlxuICAgICAgICAgICRuZXdEeW5hbWljQnRuLnJlbW92ZUNsYXNzKCdzaG93aW5nJykuYWRkQ2xhc3MoJ2hpZGluZycpO1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgJG5ld0R5bmFtaWNCdG4uYWRkQ2xhc3MoJ2hpZGRlbicpLnJlbW92ZUNsYXNzKCdoaWRpbmcnKTtcbiAgICAgICAgICAgIHRvYXN0ci5pbmZvKCflj5HluIPmjInpkq7lt7LpmpDol48nLCAnJywgeyB0aW1lT3V0OiAxMDAwIH0pO1xuICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliJ3lp4vljJbliqjmgIHov5Tlm57mjInpkq7kuovku7ZcbiAgICovXG4gIHByaXZhdGUgaW5pdGlhbGl6ZUR5bmFtaWNzQmFja0J1dHRvbigpOiB2b2lkIHtcbiAgICBjb25zdCAkYmFja0J0biA9ICQoJyNkeW5hbWljc0JhY2tCdG4nKTtcbiAgICBcbiAgICAvLyDkvb/nlKhqUXVlcnnnmoRvZmYvb27mqKHlvI/pgb/lhY3ph43lpI3nu5HlrppcbiAgICAkYmFja0J0bi5vZmYoJ2NsaWNrLmJhY2snKS5vbignY2xpY2suYmFjaycsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy5oYW5kbGVEeW5hbWljc0JhY2tDbGljaygpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOWkhOeQhuWKqOaAgei/lOWbnuaMiemSrueCueWHu1xuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVEeW5hbWljc0JhY2tDbGljaygpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygn5Yqo5oCB6L+U5Zue5oyJ6ZKu6KKr54K55Ye7Jyk7XG5cbiAgICAvLyDmkq3mlL5jbGlja+mfs+aViO+8iOi/lOWbnuaMiemSru+8iVxuICAgIGlmICh0aGlzLnNvdW5kTWFuYWdlcj8ucGxheVNvdW5kKSB7XG4gICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5U291bmQoJ2NsaWNrJyk7XG4gICAgfVxuXG4gICAgLy8g5L2/55SoalF1ZXJ56Kem5Y+R6Ieq5a6a5LmJ5LqL5Lu2XG4gICAgJChkb2N1bWVudCkudHJpZ2dlcignZHluYW1pY3M6YmFjaycsIHsgc291cmNlOiAnZHluYW1pY3NCYWNrQnV0dG9uJyB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmkq3mlL7ngrnlh7vpn7PmlYhcbiAgICovXG4gIHByaXZhdGUgcGxheUNsaWNrU291bmQoKTogdm9pZCB7XG4gICAgLy8g5L2/55Soc291bmRNYW5hZ2Vy5pKt5pS+6Z+z5pWIXG4gICAgaWYgKHRoaXMuc291bmRNYW5hZ2VyICYmIHRoaXMuc291bmRNYW5hZ2VyLnBsYXlTb3VuZCkge1xuICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdjbGljaycpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDplIDmr4Hkuovku7bnm5HlkKzlmahcbiAgICovXG4gIHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xuICAgIC8vIOS9v+eUqGpRdWVyeeenu+mZpOaJgOacieS6i+S7tuebkeWQrOWZqFxuICAgICQoJyNkeW5hbWljc0ludGVyZmFjZScpLm9mZignLmR5bmFtaWNzJyk7XG4gICAgJCgnI2R5bmFtaWNzSW50ZXJmYWNlJykub2ZmKCcucG9zdEltYWdlJyk7XG4gICAgJCgnI2R5bmFtaWNzSW50ZXJmYWNlJykub2ZmKCcucG9zdE5hbWUnKTtcbiAgICAkKCcjZHluYW1pY3NJbnRlcmZhY2UnKS5vZmYoJy5jb21tZW50TmFtZScpO1xuICAgICQoJy5keW5hbWljcy1uYXYtc2V0dGluZ3MnKS5vZmYoJy5zZXR0aW5ncycpO1xuICAgICQoJy5keW5hbWljcy1uYXYtbG9nbycpLm9mZignLmxvZ28nKTtcbiAgICAkKCcjZHluYW1pY3NCYWNrQnRuJykub2ZmKCcuYmFjaycpO1xuICAgIFxuICAgIC8vIOmUgOavgeivhOiuuuWkhOeQhuWZqFxuICAgIHRoaXMuY29tbWVudEhhbmRsZXIuZGVzdHJveSgpO1xuICAgIFxuICAgIC8vIOWmguaenOWcqOWIoOmZpOaooeW8j++8jOmAgOWHuuWIoOmZpOaooeW8j1xuICAgIGlmICh0aGlzLmRlbGV0ZU1hbmFnZXIuaXNJbkRlbGV0ZU1vZGUoKSkge1xuICAgICAgdGhpcy5kZWxldGVNYW5hZ2VyLnRvZ2dsZURlbGV0ZU1vZGUoKTtcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/dynamics/eventHandler.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/dynamics/index.ts": 
  /*!*****************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/dynamics/index.ts ***!
  \*****************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DynamicsComposer: () => (/* reexport safe */ _composer__WEBPACK_IMPORTED_MODULE_1__.DynamicsComposer),\n/* harmony export */   DynamicsDataValidator: () => (/* reexport safe */ _types__WEBPACK_IMPORTED_MODULE_2__.DynamicsDataValidator),\n/* harmony export */   DynamicsManager: () => (/* reexport safe */ _manager__WEBPACK_IMPORTED_MODULE_0__.DynamicsManager)\n/* harmony export */ });\n/* harmony import */ var _manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./manager */ "./src/多云熊/备份/给rovo的/modules/dynamics/manager.ts");\n/* harmony import */ var _composer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./composer */ "./src/多云熊/备份/给rovo的/modules/dynamics/composer.ts");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./types */ "./src/多云熊/备份/给rovo的/modules/dynamics/types.ts");\n/**\n * 动态模块入口文件\n * 导出动态管理器和相关类型\n */\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZHluYW1pY3MvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7OztHQUdHO0FBRXlDO0FBQ0U7QUFDdEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WkmuS6keeGii/lpIfku70v57uZcm92b+eahC9tb2R1bGVzL2R5bmFtaWNzL2luZGV4LnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICog5Yqo5oCB5qih5Z2X5YWl5Y+j5paH5Lu2XHJcbiAqIOWvvOWHuuWKqOaAgeeuoeeQhuWZqOWSjOebuOWFs+exu+Wei1xyXG4gKi9cclxuXHJcbmV4cG9ydCB7IER5bmFtaWNzTWFuYWdlciB9IGZyb20gJy4vbWFuYWdlcic7XHJcbmV4cG9ydCB7IER5bmFtaWNzQ29tcG9zZXIgfSBmcm9tICcuL2NvbXBvc2VyJztcclxuZXhwb3J0ICogZnJvbSAnLi90eXBlcyc7XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/dynamics/index.ts\n\n}');
  },
  "./src/多云熊/备份/给rovo的/modules/dynamics/manager.ts": 
  /*!*******************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/dynamics/manager.ts ***!
  \*******************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DynamicsManager: () => (/* binding */ DynamicsManager)\n/* harmony export */ });\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"jquery\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _core_BottomNavigation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/BottomNavigation */ \"./src/多云熊/备份/给rovo的/modules/core/BottomNavigation.ts\");\n/* harmony import */ var _core_StatusBar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/StatusBar */ \"./src/多云熊/备份/给rovo的/modules/core/StatusBar.ts\");\n/* harmony import */ var _parsers_DataConverter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../parsers/DataConverter */ \"./src/多云熊/备份/给rovo的/modules/parsers/DataConverter.ts\");\n/* harmony import */ var _parsers_DynamicsParser__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../parsers/DynamicsParser */ \"./src/多云熊/备份/给rovo的/modules/parsers/DynamicsParser.ts\");\n/* harmony import */ var _utils_DynamicsDataProcessor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/DynamicsDataProcessor */ \"./src/多云熊/备份/给rovo的/modules/utils/DynamicsDataProcessor.ts\");\n/* harmony import */ var _dynamics_scss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./dynamics.scss */ \"./src/多云熊/备份/给rovo的/modules/dynamics/dynamics.scss\");\n/* harmony import */ var _composer_scss__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./composer.scss */ \"./src/多云熊/备份/给rovo的/modules/dynamics/composer.scss\");\n/* harmony import */ var _composer__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./composer */ \"./src/多云熊/备份/给rovo的/modules/dynamics/composer.ts\");\n/* harmony import */ var _eventHandler__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./eventHandler */ \"./src/多云熊/备份/给rovo的/modules/dynamics/eventHandler.ts\");\n/* harmony import */ var _renderer__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./renderer */ \"./src/多云熊/备份/给rovo的/modules/dynamics/renderer.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./types */ \"./src/多云熊/备份/给rovo的/modules/dynamics/types.ts\");\n/**\n * 动态管理器模块（优化版）\n * 负责动态功能的整体管理和协调\n * 使用jQuery和酒馆助手接口\n */\n\n\n\n\n\n\n // 导入样式文件\n // 导入发布动态样式\n\n\n\n\nclass DynamicsManager {\n    dynamicsData = null;\n    renderer;\n    eventHandler;\n    composer; // 发布动态组件\n    soundManager; // 音效管理器引用\n    statusBar = null; // 通用状态栏实例\n    dynamicsParser; // 动态解析器\n    $container = null;\n    bottomNavigation = null; // 底部导航栏\n    // 监听联系人更新事件，刷新动态头像（无刷新增量更新）\n    onContactUpdated = (e) => {\n        try {\n            const ev = e;\n            const detail = (ev && ev.detail) || {};\n            const oldName = detail.oldName || '';\n            const newName = detail.newName || '';\n            const newAvatar = detail.newAvatar || '';\n            console.log('📢 [Dynamics] 收到联系人更新事件，增量同步动态头像', { oldName, newName });\n            if (this.renderer && newAvatar) {\n                // 优先使用新名，其次用旧名匹配\n                const matchOld = oldName || newName;\n                const matchNew = newName || oldName;\n                this.renderer.syncAuthorAvatar?.(matchOld, matchNew, newAvatar);\n            }\n            // 可选：为了避免闪烁，此处不强制整页重渲染\n            // 如需确保完全一致，可解开下一行强制重渲染\n            // this.renderDynamicsContent();\n        }\n        catch (err) {\n            console.warn('⚠️ [Dynamics] 刷新动态头像失败:', err);\n        }\n    };\n    // 监听互动/发布事件，仅更新内存数据，不重新渲染整个页面\n    onInteractionAdded = (e) => {\n        try {\n            const detail = e.detail || {};\n            console.log('📢 [Dynamics] 收到互动事件，更新动态内存', detail);\n            // 只更新内存数据，不触发重新渲染\n            // UI 更新已经在 eventHandler 和 commentHandler 中通过局部 DOM 操作完成\n            this.loadDynamicsFromMessages();\n        }\n        catch (err) {\n            console.warn('⚠️ [Dynamics] 处理互动事件时发生异常，已忽略', err);\n        }\n    };\n    onPublished = (e) => {\n        try {\n            const detail = e.detail || {};\n            console.log('📢 [Dynamics] 收到发布事件，更新动态内存', detail);\n            // 只更新内存数据，不触发重新渲染\n            // 新动态已经通过 composer.addDynamicToUI() 添加到界面\n            this.loadDynamicsFromMessages();\n        }\n        catch (err) {\n            console.warn('⚠️ [Dynamics] 处理发布事件时发生异常，已忽略', err);\n        }\n    };\n    constructor(soundManager) {\n        this.soundManager = soundManager;\n        this.renderer = new _renderer__WEBPACK_IMPORTED_MODULE_10__.DynamicsRenderer(soundManager); // 传入 soundManager\n        this.eventHandler = new _eventHandler__WEBPACK_IMPORTED_MODULE_9__.DynamicsEventHandler(soundManager);\n        this.composer = new _composer__WEBPACK_IMPORTED_MODULE_8__.DynamicsComposer(soundManager); // 传入 soundManager\n        this.dynamicsParser = new _parsers_DynamicsParser__WEBPACK_IMPORTED_MODULE_4__.DynamicsParser({\n            enablePartialParsing: true,\n            enableErrorRecovery: true,\n            logErrors: true,\n        });\n    }\n    /**\n     * 初始化动态管理器\n     */\n    async initialize() {\n        console.log('🔧 初始化动态管理器...');\n        // 使用jQuery确保动态界面元素存在\n        this.$container = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsInterface');\n        if (!this.$container.length) {\n            console.error('❌ 动态界面元素不存在');\n            return;\n        }\n        // 初始化 ContactManager 以确保头像数据就绪\n        try {\n            const { initializeContactManager } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../parsers/DataConverter */ \"./src/多云熊/备份/给rovo的/modules/parsers/DataConverter.ts\"));\n            await initializeContactManager();\n            console.log('✅ ContactManager 已初始化');\n        }\n        catch (error) {\n            console.warn('⚠️ ContactManager 初始化失败:', error);\n        }\n        // 预加载动态数据\n        this.loadDynamicsFromMessages();\n        // 使用jQuery监听返回事件\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).on('dynamics:back', (event) => {\n            this.handleBackToChat(event);\n        });\n        // 监听联系人更新事件（当通讯录头像发生变化时，刷新动态头像）\n        document.addEventListener('contactUpdated', this.onContactUpdated);\n        // 监听动态刷新事件（仅在需要强制刷新时使用）\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).on('dynamics:refresh', () => {\n            console.log('📱 收到动态强制刷新请求');\n            this.loadDynamicsFromMessages();\n            this.renderDynamicsContent();\n        });\n        // 监听打开发布界面事件\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()(window).on('dynamics:openComposer', () => {\n            console.log('📝 打开发布动态界面');\n            this.showComposerInterface();\n        });\n        // 监听发布成功事件（不再触发全页刷新）\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()(window).on('dynamics:published', (event, newDynamic) => {\n            console.log('✅ 收到动态发布成功事件', newDynamic);\n            // 只更新内存数据，UI 已经通过 addDynamicToUI 更新\n            this.loadDynamicsFromMessages();\n        });\n        // 兼容原生自定义事件（无冒号）\n        document.addEventListener('dynamicsPublished', this.onPublished);\n        // 监听互动新增事件（评论/点赞）\n        document.addEventListener('dynamics:interactionAdded', this.onInteractionAdded);\n        document.addEventListener('dynamicsInteractionAdded', this.onInteractionAdded);\n        console.log('✅ 动态管理器初始化完成');\n    }\n    /**\n     * 显示动态界面\n     */\n    async showDynamicsInterface() {\n        console.log('📱 显示动态界面...');\n        // 使用jQuery隐藏其他界面\n        this.hideAllInterfaces();\n        // 使用jQuery显示动态界面\n        if (this.$container && this.$container.length) {\n            this.$container.addClass('active').show();\n            console.log('✅ 动态界面已显示，当前样式:', {\n                display: this.$container.css('display'),\n                classList: this.$container.attr('class'),\n            });\n            // 不再重复初始化 ContactManager，因为在 initialize() 中已经初始化过了\n            // 渲染动态内容\n            this.renderDynamicsContent();\n            // 初始化事件监听器（只在显示时初始化）\n            this.eventHandler.initializeEventListeners();\n            // 初始化底部导航栏\n            this.initializeBottomNavigation();\n            // 初始化状态栏\n            this.initializeStatusBar();\n        }\n        else {\n            console.error('❌ 动态界面元素不存在');\n        }\n    }\n    /**\n     * 渲染动态内容\n     * @param config 渲染配置\n     */\n    renderDynamicsContent(config) {\n        // 验证并解析配置\n        const validatedConfig = _types__WEBPACK_IMPORTED_MODULE_11__.DynamicsDataValidator.parseConfig(config);\n        // 首先尝试从现有消息中解析动态数据\n        this.loadDynamicsFromMessages();\n        // 使用渲染器渲染内容\n        this.renderer.renderDynamicsContent(this.dynamicsData, validatedConfig);\n    }\n    /**\n     * 从现有消息中加载动态数据\n     */\n    loadDynamicsFromMessages() {\n        if (typeof getChatMessages === 'function') {\n            try {\n                const messages = getChatMessages('0-{{lastMessageId}}');\n                console.log('🔍 开始解析动态数据，消息数量:', messages.length);\n                // 聚合所有楼层中的 [动态] 容器，合并为一份时间线\n                // 注意：动态编号在不同楼层会从头开始，因此使用 复合键 \"message_id + no\" 避免跨楼层误合并\n                const aggregate = new Map();\n                let foundAny = false;\n                // 第一遍：收集所有动态和评论数据\n                const allParsedData = [];\n                for (let i = 0; i < messages.length; i++) {\n                    const message = messages[i];\n                    if (message.message && typeof message.message === 'string') {\n                        // 只识别[动态]...[/动态]容器\n                        if (message.message.includes('[动态]') && message.message.includes('[/动态]')) {\n                            const parseResult = this.dynamicsParser.parse(message.message);\n                            if (parseResult && parseResult.data && parseResult.data.length > 0) {\n                                foundAny = true;\n                                allParsedData.push({\n                                    messageId: message.message_id,\n                                    posts: parseResult.data,\n                                });\n                            }\n                            else if (parseResult?.errors?.length) {\n                                console.warn('❌ 动态数据解析失败:', parseResult.errors);\n                            }\n                        }\n                    }\n                }\n                // 第二遍：先处理所有动态主体，建立基础结构\n                for (const { messageId, posts } of allParsedData) {\n                    for (const post of posts) {\n                        if (post.no === undefined)\n                            continue;\n                        // 复合键：楼层 message_id + 动态编号\n                        const key = `${messageId}_${post.no}`;\n                        const existed = aggregate.get(key);\n                        if (!existed) {\n                            // 使用公共工具进行深拷贝\n                            const cloned = _utils_DynamicsDataProcessor__WEBPACK_IMPORTED_MODULE_5__.DynamicsDataProcessor.cloneDynamic(post);\n                            // 添加楼层ID信息\n                            cloned.messageId = messageId;\n                            aggregate.set(key, cloned);\n                        }\n                        else {\n                            // 合并策略：\n                            // 1) 补全缺失字段\n                            _utils_DynamicsDataProcessor__WEBPACK_IMPORTED_MODULE_5__.DynamicsDataProcessor.fillMissingFields(existed, post);\n                            // 2) 合并互动数据（点赞、评论）\n                            _utils_DynamicsDataProcessor__WEBPACK_IMPORTED_MODULE_5__.DynamicsDataProcessor.mergeInteractions(existed, post);\n                            // 3) 确保楼层ID存在\n                            if (!existed.messageId) {\n                                existed.messageId = messageId;\n                            }\n                        }\n                    }\n                }\n                // 第三遍：处理孤立的评论（评论目标动态不在同一消息中的情况）\n                for (const { messageId, posts } of allParsedData) {\n                    for (const post of posts) {\n                        if (post.no === undefined || !post.comments?.length)\n                            continue;\n                        // 检查是否有评论需要合并到其他楼层的动态\n                        for (const comment of post.comments) {\n                            // 尝试找到目标动态（可能在其他楼层）\n                            let targetFound = false;\n                            // 首先在当前楼层查找\n                            const currentKey = `${messageId}_${post.no}`;\n                            if (aggregate.has(currentKey)) {\n                                targetFound = true;\n                                continue; // 已经在第二遍中处理了\n                            }\n                            // 在其他楼层查找相同编号的动态\n                            for (const [existingKey, existingPost] of aggregate) {\n                                if (existingPost.no === post.no && existingKey !== currentKey) {\n                                    // 找到了目标动态，合并评论\n                                    console.log(`🔄 将评论合并到动态 #${post.no} (从楼层 ${messageId} 到 ${existingPost.messageId})`);\n                                    existingPost.comments = _utils_DynamicsDataProcessor__WEBPACK_IMPORTED_MODULE_5__.DynamicsDataProcessor.mergeComments(existingPost.comments || [], [comment]);\n                                    targetFound = true;\n                                    break;\n                                }\n                            }\n                            if (!targetFound) {\n                                console.warn(`⚠️ 评论目标动态 #${post.no} 不存在，评论内容: ${comment.content?.substring(0, 30)}...`);\n                            }\n                        }\n                    }\n                }\n                const mergedPosts = Array.from(aggregate.values());\n                // 最终 likesCount 以 likedBy 长度为准\n                mergedPosts.forEach(p => (p.likesCount = p.likedBy?.length || 0));\n                if (foundAny && mergedPosts.length > 0) {\n                    const convertedData = _parsers_DataConverter__WEBPACK_IMPORTED_MODULE_3__.DataConverter.convertDynamicsData(mergedPosts);\n                    const validatedData = _types__WEBPACK_IMPORTED_MODULE_11__.DynamicsDataValidator.validateDynamicsData(convertedData);\n                    if (validatedData) {\n                        this.dynamicsData = validatedData;\n                        console.log('✅ 动态数据聚合成功，帖子数量:', mergedPosts.length);\n                    }\n                    else {\n                        this.dynamicsData = null;\n                    }\n                }\n                else {\n                    console.log('📝 未找到任何[动态]容器，使用默认内容');\n                    this.dynamicsData = null;\n                }\n            }\n            catch (error) {\n                console.error('💥 加载动态数据时出错:', error);\n                this.dynamicsData = null;\n            }\n        }\n        else {\n            console.warn('⚠️ getChatMessages 函数不可用');\n            this.dynamicsData = null;\n        }\n    }\n    /**\n     * 获取当前动态数据\n     */\n    getDynamicsData() {\n        return this.dynamicsData;\n    }\n    /**\n     * 设置动态数据\n     * @param data 动态数据\n     */\n    setDynamicsData(data) {\n        // 验证数据\n        if (data) {\n            const validatedData = _types__WEBPACK_IMPORTED_MODULE_11__.DynamicsDataValidator.validateDynamicsData(data);\n            this.dynamicsData = validatedData;\n        }\n        else {\n            this.dynamicsData = null;\n        }\n    }\n    /**\n     * 处理返回聊天界面事件\n     */\n    handleBackToChat(event) {\n        console.log('📱 处理返回聊天界面事件');\n        // 使用jQuery触发界面切换事件\n        const customEvent = event.originalEvent;\n        const switchEvent = jquery__WEBPACK_IMPORTED_MODULE_0___default().Event('interface:switch', {\n            detail: {\n                from: 'dynamics',\n                to: 'chat',\n                source: customEvent?.detail?.source || 'unknown',\n            },\n        });\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).trigger(switchEvent);\n    }\n    /**\n     * 隐藏所有界面\n     */\n    hideAllInterfaces() {\n        const interfaces = [\n            '#chatInterface',\n            '#chatListInterface',\n            '#diaryInterface',\n            '#callInterface',\n            '#dynamicsInterface',\n            '#dynamicsComposerInterface',\n        ];\n        // 使用jQuery批量隐藏\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()(interfaces.join(', ')).removeClass('active').hide();\n    }\n    /**\n     * 显示发布动态界面\n     */\n    showComposerInterface() {\n        console.log('📝 显示发布动态界面...');\n        // 注意：不隐藏动态界面，让发布界面覆盖在上层\n        // 只确保动态界面是显示的\n        if (!jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsInterface').hasClass('active')) {\n            console.warn('⚠️ 动态界面未激活，先激活动态界面');\n            return;\n        }\n        // 检查发布界面是否已经存在\n        let $composerContainer = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsComposerInterface');\n        if (!$composerContainer.length) {\n            // 如果不存在，创建发布界面\n            const composerHtml = this.composer.renderComposerInterface();\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()('.interface-container').append(composerHtml);\n            $composerContainer = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsComposerInterface');\n        }\n        // 显示发布界面（覆盖在动态界面上层）\n        $composerContainer.addClass('active').show();\n        // 初始化发布界面\n        this.composer.initializeComposer();\n        console.log('✅ 发布动态界面已显示（覆盖在动态页面上）');\n    }\n    /**\n     * 初始化状态栏\n     */\n    initializeStatusBar() {\n        const container = document.getElementById('dynamicsStatusBarContainer');\n        if (container) {\n            this.statusBar = _core_StatusBar__WEBPACK_IMPORTED_MODULE_2__.StatusBar.create(container);\n        }\n    }\n    /**\n     * 销毁状态栏\n     */\n    destroyStatusBar() {\n        if (this.statusBar) {\n            this.statusBar.destroy();\n            this.statusBar = null;\n        }\n    }\n    /**\n     * 隐藏动态界面\n     */\n    hideDynamicsInterface() {\n        console.log('📱 隐藏动态界面...');\n        if (this.$container && this.$container.length) {\n            this.$container.removeClass('active').hide();\n        }\n        // 销毁状态栏\n        this.destroyStatusBar();\n        // 清理事件监听器\n        this.eventHandler.destroy();\n        console.log('✅ 动态界面已隐藏');\n    }\n    /**\n     * 初始化底部导航栏\n     */\n    initializeBottomNavigation() {\n        const navContainer = this.$container?.find('.bottom-nav')[0];\n        if (navContainer) {\n            // 使用 BottomNavigation 的静态方法挂载默认导航\n            this.bottomNavigation = _core_BottomNavigation__WEBPACK_IMPORTED_MODULE_1__.BottomNavigation.mountDefault(navContainer, 'feed', // 当前页面是动态页\n            {\n                feed: () => { }, // 当前页面，不做处理\n                messages: () => this.switchToChatList(),\n                profile: () => this.switchToProfile(),\n            });\n            console.log('✅ 动态页面底部导航栏已初始化');\n        }\n        else {\n            console.warn('⚠️ 未找到底部导航栏容器');\n        }\n    }\n    /**\n     * 切换到聊天列表\n     */\n    switchToChatList() {\n        console.log('🔄 从动态页面切换到聊天列表');\n        const event = new CustomEvent('pageSwitch', {\n            detail: {\n                from: 'feed',\n                to: 'chatList',\n            },\n        });\n        document.dispatchEvent(event);\n    }\n    /**\n     * 切换到个人主页\n     */\n    switchToProfile() {\n        console.log('🔄 从动态页面切换到个人主页');\n        const event = new CustomEvent('pageSwitch', {\n            detail: {\n                from: 'feed',\n                to: 'profile',\n            },\n        });\n        document.dispatchEvent(event);\n    }\n    /**\n     * 销毁动态管理器\n     */\n    destroy() {\n        console.log('🗑️ 销毁动态管理器...');\n        // 隐藏界面\n        this.hideDynamicsInterface();\n        // 使用jQuery移除事件监听器\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).off('dynamics:back');\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).off('dynamics:refresh');\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()(window).off('dynamics:openComposer');\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()(window).off('dynamics:published');\n        // 取消联系人更新事件监听\n        document.removeEventListener('contactUpdated', this.onContactUpdated);\n        // 取消互动/发布事件监听\n        document.removeEventListener('dynamicsPublished', this.onPublished);\n        document.removeEventListener('dynamics:interactionAdded', this.onInteractionAdded);\n        document.removeEventListener('dynamicsInteractionAdded', this.onInteractionAdded);\n        // 清理数据\n        this.dynamicsData = null;\n        this.$container = null;\n        this.bottomNavigation = null;\n        console.log('✅ 动态管理器已销毁');\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZHluYW1pY3MvbWFuYWdlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7O0dBSUc7QUFFb0I7QUFDcUM7QUFDZDtBQUNXO0FBQ0U7QUFFWTtBQUM5QyxDQUFDLFNBQVM7QUFDVixDQUFDLFdBQVc7QUFDUztBQUNRO0FBQ1I7QUFDc0M7QUFFN0UsTUFBTSxlQUFlO0lBQ2xCLFlBQVksR0FBd0IsSUFBSSxDQUFDO0lBQ3pDLFFBQVEsQ0FBbUI7SUFDM0IsWUFBWSxDQUF1QjtJQUNuQyxRQUFRLENBQW1CLENBQUMsU0FBUztJQUNyQyxZQUFZLENBQU0sQ0FBQyxVQUFVO0lBQzdCLFNBQVMsR0FBcUIsSUFBSSxDQUFDLENBQUMsVUFBVTtJQUM5QyxjQUFjLENBQWlCLENBQUMsUUFBUTtJQUN4QyxVQUFVLEdBQWtCLElBQUksQ0FBQztJQUNqQyxnQkFBZ0IsR0FBNEIsSUFBSSxDQUFDLENBQUMsUUFBUTtJQUNsRSw0QkFBNEI7SUFDcEIsZ0JBQWdCLEdBQUcsQ0FBQyxDQUFRLEVBQUUsRUFBRTtRQUN0QyxJQUFJLENBQUM7WUFDSCxNQUFNLEVBQUUsR0FBRyxDQUFnQixDQUFDO1lBQzVCLE1BQU0sTUFBTSxHQUFHLENBQUMsRUFBRSxJQUFLLEVBQVUsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDaEQsTUFBTSxPQUFPLEdBQVcsTUFBTSxDQUFDLE9BQU8sSUFBSSxFQUFFLENBQUM7WUFDN0MsTUFBTSxPQUFPLEdBQVcsTUFBTSxDQUFDLE9BQU8sSUFBSSxFQUFFLENBQUM7WUFDN0MsTUFBTSxTQUFTLEdBQVcsTUFBTSxDQUFDLFNBQVMsSUFBSSxFQUFFLENBQUM7WUFFakQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQ0FBa0MsRUFBRSxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFDO1lBRXRFLElBQUksSUFBSSxDQUFDLFFBQVEsSUFBSSxTQUFT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QyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUN0RSxjQUFjO1FBQ2QsUUFBUSxDQUFDLG1CQUFtQixDQUFDLG1CQUFtQixFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUNwRSxRQUFRLENBQUMsbUJBQW1CLENBQUMsMkJBQTJCLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUM7UUFDbkYsUUFBUSxDQUFDLG1CQUFtQixDQUFDLDBCQUEwQixFQUFFLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1FBRWxGLE9BQU87UUFDUCxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztRQUN6QixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztRQUN2QixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDO1FBRTdCLE9BQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDNUIsQ0FBQztDQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy9keW5hbWljcy9tYW5hZ2VyLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIOWKqOaAgeeuoeeQhuWZqOaooeWdl++8iOS8mOWMlueJiO+8iVxuICog6LSf6LSj5Yqo5oCB5Yqf6IO955qE5pW05L2T566h55CG5ZKM5Y2P6LCDXG4gKiDkvb/nlKhqUXVlcnnlkozphZLppobliqnmiYvmjqXlj6NcbiAqL1xuXG5pbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IHsgQm90dG9tTmF2aWdhdGlvbiB9IGZyb20gJy4uL2NvcmUvQm90dG9tTmF2aWdhdGlvbic7XG5pbXBvcnQgeyBTdGF0dXNCYXIgfSBmcm9tICcuLi9jb3JlL1N0YXR1c0Jhcic7XG5pbXBvcnQgeyBEYXRhQ29udmVydGVyIH0gZnJvbSAnLi4vcGFyc2Vycy9EYXRhQ29udmVydGVyJztcbmltcG9ydCB7IER5bmFtaWNzUGFyc2VyIH0gZnJvbSAnLi4vcGFyc2Vycy9EeW5hbWljc1BhcnNlcic7XG5pbXBvcnQgeyBSYXdQb3N0RGF0YSB9IGZyb20gJy4uL3BhcnNlcnMvdHlwZXMnO1xuaW1wb3J0IHsgRHluYW1pY3NEYXRhUHJvY2Vzc29yIH0gZnJvbSAnLi4vdXRpbHMvRHluYW1pY3NEYXRhUHJvY2Vzc29yJztcbmltcG9ydCAnLi9keW5hbWljcy5zY3NzJzsgLy8g5a+85YWl5qC35byP5paH5Lu2XG5pbXBvcnQgJy4vY29tcG9zZXIuc2Nzcyc7IC8vIOWvvOWFpeWPkeW4g+WKqOaAgeagt+W8j1xuaW1wb3J0IHsgRHluYW1pY3NDb21wb3NlciB9IGZyb20gJy4vY29tcG9zZXInO1xuaW1wb3J0IHsgRHluYW1pY3NFdmVudEhhbmRsZXIgfSBmcm9tICcuL2V2ZW50SGFuZGxlcic7XG5pbXBvcnQgeyBEeW5hbWljc1JlbmRlcmVyIH0gZnJvbSAnLi9yZW5kZXJlcic7XG5pbXBvcnQgeyBEeW5hbWljc0RhdGEsIER5bmFtaWNzRGF0YVZhbGlkYXRvciwgRHluYW1pY3NSZW5kZXJDb25maWcgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGNsYXNzIER5bmFtaWNzTWFuYWdlciB7XG4gIHByaXZhdGUgZHluYW1pY3NEYXRhOiBEeW5hbWljc0RhdGEgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSByZW5kZXJlcjogRHluYW1pY3NSZW5kZXJlcjtcbiAgcHJpdmF0ZSBldmVudEhhbmRsZXI6IER5bmFtaWNzRXZlbnRIYW5kbGVyO1xuICBwcml2YXRlIGNvbXBvc2VyOiBEeW5hbWljc0NvbXBvc2VyOyAvLyDlj5HluIPliqjmgIHnu4Tku7ZcbiAgcHJpdmF0ZSBzb3VuZE1hbmFnZXI6IGFueTsgLy8g6Z+z5pWI566h55CG5Zmo5byV55SoXG4gIHByaXZhdGUgc3RhdHVzQmFyOiBTdGF0dXNCYXIgfCBudWxsID0gbnVsbDsgLy8g6YCa55So54q25oCB5qCP5a6e5L6LXG4gIHByaXZhdGUgZHluYW1pY3NQYXJzZXI6IER5bmFtaWNzUGFyc2VyOyAvLyDliqjmgIHop6PmnpDlmahcbiAgcHJpdmF0ZSAkY29udGFpbmVyOiBKUXVlcnkgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBib3R0b21OYXZpZ2F0aW9uOiBCb3R0b21OYXZpZ2F0aW9uIHwgbnVsbCA9IG51bGw7IC8vIOW6lemDqOWvvOiIquagj1xuICAvLyDnm5HlkKzogZTns7vkurrmm7TmlrDkuovku7bvvIzliLfmlrDliqjmgIHlpLTlg4/vvIjml6DliLfmlrDlop7ph4/mm7TmlrDvvIlcbiAgcHJpdmF0ZSBvbkNvbnRhY3RVcGRhdGVkID0gKGU6IEV2ZW50KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGV2ID0gZSBhcyBDdXN0b21FdmVudDtcbiAgICAgIGNvbnN0IGRldGFpbCA9IChldiAmJiAoZXYgYXMgYW55KS5kZXRhaWwpIHx8IHt9O1xuICAgICAgY29uc3Qgb2xkTmFtZTogc3RyaW5nID0gZGV0YWlsLm9sZE5hbWUgfHwgJyc7XG4gICAgICBjb25zdCBuZXdOYW1lOiBzdHJpbmcgPSBkZXRhaWwubmV3TmFtZSB8fCAnJztcbiAgICAgIGNvbnN0IG5ld0F2YXRhcjogc3RyaW5nID0gZGV0YWlsLm5ld0F2YXRhciB8fCAnJztcblxuICAgICAgY29uc29sZS5sb2coJ/Cfk6IgW0R5bmFtaWNzXSDmlLbliLDogZTns7vkurrmm7TmlrDkuovku7bvvIzlop7ph4/lkIzmraXliqjmgIHlpLTlg48nLCB7IG9sZE5hbWUsIG5ld05hbWUgfSk7XG5cbiAgICAgIGlmICh0aGlzLnJlbmRlcmVyICYmIG5ld0F2YXRhcikge1xuICAgICAgICAvLyDkvJjlhYjkvb/nlKjmlrDlkI3vvIzlhbbmrKHnlKjml6flkI3ljLnphY1cbiAgICAgICAgY29uc3QgbWF0Y2hPbGQgPSBvbGROYW1lIHx8IG5ld05hbWU7XG4gICAgICAgIGNvbnN0IG1hdGNoTmV3ID0gbmV3TmFtZSB8fCBvbGROYW1lO1xuICAgICAgICAodGhpcy5yZW5kZXJlciBhcyBhbnkpLnN5bmNBdXRob3JBdmF0YXI/LihtYXRjaE9sZCwgbWF0Y2hOZXcsIG5ld0F2YXRhcik7XG4gICAgICB9XG5cbiAgICAgIC8vIOWPr+mAie+8muS4uuS6humBv+WFjemXqueDge+8jOatpOWkhOS4jeW8uuWItuaVtOmhtemHjea4suafk1xuICAgICAgLy8g5aaC6ZyA56Gu5L+d5a6M5YWo5LiA6Ie077yM5Y+v6Kej5byA5LiL5LiA6KGM5by65Yi26YeN5riy5p+TXG4gICAgICAvLyB0aGlzLnJlbmRlckR5bmFtaWNzQ29udGVudCgpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gW0R5bmFtaWNzXSDliLfmlrDliqjmgIHlpLTlg4/lpLHotKU6JywgZXJyKTtcbiAgICB9XG4gIH07XG5cbiAgLy8g55uR5ZCs5LqS5YqoL+WPkeW4g+S6i+S7tu+8jOS7heabtOaWsOWGheWtmOaVsOaNru+8jOS4jemHjeaWsOa4suafk+aVtOS4qumhtemdolxuICBwcml2YXRlIG9uSW50ZXJhY3Rpb25BZGRlZCA9IChlOiBFdmVudCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkZXRhaWwgPSAoZSBhcyBDdXN0b21FdmVudCkuZGV0YWlsIHx8IHt9O1xuICAgICAgY29uc29sZS5sb2coJ/Cfk6IgW0R5bmFtaWNzXSDmlLbliLDkupLliqjkuovku7bvvIzmm7TmlrDliqjmgIHlhoXlrZgnLCBkZXRhaWwpO1xuICAgICAgLy8g5Y+q5pu05paw5YaF5a2Y5pWw5o2u77yM5LiN6Kem5Y+R6YeN5paw5riy5p+TXG4gICAgICAvLyBVSSDmm7TmlrDlt7Lnu4/lnKggZXZlbnRIYW5kbGVyIOWSjCBjb21tZW50SGFuZGxlciDkuK3pgJrov4flsYDpg6ggRE9NIOaTjeS9nOWujOaIkFxuICAgICAgdGhpcy5sb2FkRHluYW1pY3NGcm9tTWVzc2FnZXMoKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIFtEeW5hbWljc10g5aSE55CG5LqS5Yqo5LqL5Lu25pe25Y+R55Sf5byC5bi477yM5bey5b+955WlJywgZXJyKTtcbiAgICB9XG4gIH07XG5cbiAgcHJpdmF0ZSBvblB1Ymxpc2hlZCA9IChlOiBFdmVudCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkZXRhaWwgPSAoZSBhcyBDdXN0b21FdmVudCkuZGV0YWlsIHx8IHt9O1xuICAgICAgY29uc29sZS5sb2coJ/Cfk6IgW0R5bmFtaWNzXSDmlLbliLDlj5HluIPkuovku7bvvIzmm7TmlrDliqjmgIHlhoXlrZgnLCBkZXRhaWwpO1xuICAgICAgLy8g5Y+q5pu05paw5YaF5a2Y5pWw5o2u77yM5LiN6Kem5Y+R6YeN5paw5riy5p+TXG4gICAgICAvLyDmlrDliqjmgIHlt7Lnu4/pgJrov4cgY29tcG9zZXIuYWRkRHluYW1pY1RvVUkoKSDmt7vliqDliLDnlYzpnaJcbiAgICAgIHRoaXMubG9hZER5bmFtaWNzRnJvbU1lc3NhZ2VzKCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBbRHluYW1pY3NdIOWkhOeQhuWPkeW4g+S6i+S7tuaXtuWPkeeUn+W8guW4uO+8jOW3suW/veeVpScsIGVycik7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0cnVjdG9yKHNvdW5kTWFuYWdlcjogYW55KSB7XG4gICAgdGhpcy5zb3VuZE1hbmFnZXIgPSBzb3VuZE1hbmFnZXI7XG4gICAgdGhpcy5yZW5kZXJlciA9IG5ldyBEeW5hbWljc1JlbmRlcmVyKHNvdW5kTWFuYWdlcik7ICAvLyDkvKDlhaUgc291bmRNYW5hZ2VyXG4gICAgdGhpcy5ldmVudEhhbmRsZXIgPSBuZXcgRHluYW1pY3NFdmVudEhhbmRsZXIoc291bmRNYW5hZ2VyKTtcbiAgICB0aGlzLmNvbXBvc2VyID0gbmV3IER5bmFtaWNzQ29tcG9zZXIoc291bmRNYW5hZ2VyKTsgIC8vIOS8oOWFpSBzb3VuZE1hbmFnZXJcbiAgICB0aGlzLmR5bmFtaWNzUGFyc2VyID0gbmV3IER5bmFtaWNzUGFyc2VyKHtcbiAgICAgIGVuYWJsZVBhcnRpYWxQYXJzaW5nOiB0cnVlLFxuICAgICAgZW5hYmxlRXJyb3JSZWNvdmVyeTogdHJ1ZSxcbiAgICAgIGxvZ0Vycm9yczogdHJ1ZSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliJ3lp4vljJbliqjmgIHnrqHnkIblmahcbiAgICovXG4gIHB1YmxpYyBhc3luYyBpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnNvbGUubG9nKCfwn5SnIOWIneWni+WMluWKqOaAgeeuoeeQhuWZqC4uLicpO1xuXG4gICAgLy8g5L2/55SoalF1ZXJ556Gu5L+d5Yqo5oCB55WM6Z2i5YWD57Sg5a2Y5ZyoXG4gICAgdGhpcy4kY29udGFpbmVyID0gJCgnI2R5bmFtaWNzSW50ZXJmYWNlJyk7XG4gICAgaWYgKCF0aGlzLiRjb250YWluZXIubGVuZ3RoKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwg5Yqo5oCB55WM6Z2i5YWD57Sg5LiN5a2Y5ZyoJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8g5Yid5aeL5YyWIENvbnRhY3RNYW5hZ2VyIOS7peehruS/neWktOWDj+aVsOaNruWwsee7qlxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGluaXRpYWxpemVDb250YWN0TWFuYWdlciB9ID0gYXdhaXQgaW1wb3J0KCcuLi9wYXJzZXJzL0RhdGFDb252ZXJ0ZXInKTtcbiAgICAgIGF3YWl0IGluaXRpYWxpemVDb250YWN0TWFuYWdlcigpO1xuICAgICAgY29uc29sZS5sb2coJ+KchSBDb250YWN0TWFuYWdlciDlt7LliJ3lp4vljJYnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gQ29udGFjdE1hbmFnZXIg5Yid5aeL5YyW5aSx6LSlOicsIGVycm9yKTtcbiAgICB9XG5cbiAgICAvLyDpooTliqDovb3liqjmgIHmlbDmja5cbiAgICB0aGlzLmxvYWREeW5hbWljc0Zyb21NZXNzYWdlcygpO1xuXG4gICAgLy8g5L2/55SoalF1ZXJ555uR5ZCs6L+U5Zue5LqL5Lu2XG4gICAgJChkb2N1bWVudCkub24oJ2R5bmFtaWNzOmJhY2snLCAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4ge1xuICAgICAgdGhpcy5oYW5kbGVCYWNrVG9DaGF0KGV2ZW50IGFzIGFueSk7XG4gICAgfSk7XG5cbiAgICAvLyDnm5HlkKzogZTns7vkurrmm7TmlrDkuovku7bvvIjlvZPpgJrorq/lvZXlpLTlg4/lj5HnlJ/lj5jljJbml7bvvIzliLfmlrDliqjmgIHlpLTlg4/vvIlcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjb250YWN0VXBkYXRlZCcsIHRoaXMub25Db250YWN0VXBkYXRlZCk7XG5cbiAgICAvLyDnm5HlkKzliqjmgIHliLfmlrDkuovku7bvvIjku4XlnKjpnIDopoHlvLrliLbliLfmlrDml7bkvb/nlKjvvIlcbiAgICAkKGRvY3VtZW50KS5vbignZHluYW1pY3M6cmVmcmVzaCcsICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OxIOaUtuWIsOWKqOaAgeW8uuWItuWIt+aWsOivt+axgicpO1xuICAgICAgdGhpcy5sb2FkRHluYW1pY3NGcm9tTWVzc2FnZXMoKTtcbiAgICAgIHRoaXMucmVuZGVyRHluYW1pY3NDb250ZW50KCk7XG4gICAgfSk7XG5cbiAgICAvLyDnm5HlkKzmiZPlvIDlj5HluIPnlYzpnaLkuovku7ZcbiAgICAkKHdpbmRvdykub24oJ2R5bmFtaWNzOm9wZW5Db21wb3NlcicsICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OdIOaJk+W8gOWPkeW4g+WKqOaAgeeVjOmdoicpO1xuICAgICAgdGhpcy5zaG93Q29tcG9zZXJJbnRlcmZhY2UoKTtcbiAgICB9KTtcblxuICAgIC8vIOebkeWQrOWPkeW4g+aIkOWKn+S6i+S7tu+8iOS4jeWGjeinpuWPkeWFqOmhteWIt+aWsO+8iVxuICAgICQod2luZG93KS5vbignZHluYW1pY3M6cHVibGlzaGVkJywgKGV2ZW50LCBuZXdEeW5hbWljKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygn4pyFIOaUtuWIsOWKqOaAgeWPkeW4g+aIkOWKn+S6i+S7ticsIG5ld0R5bmFtaWMpO1xuICAgICAgLy8g5Y+q5pu05paw5YaF5a2Y5pWw5o2u77yMVUkg5bey57uP6YCa6L+HIGFkZER5bmFtaWNUb1VJIOabtOaWsFxuICAgICAgdGhpcy5sb2FkRHluYW1pY3NGcm9tTWVzc2FnZXMoKTtcbiAgICB9KTtcblxuICAgIC8vIOWFvOWuueWOn+eUn+iHquWumuS5ieS6i+S7tu+8iOaXoOWGkuWPt++8iVxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2R5bmFtaWNzUHVibGlzaGVkJywgdGhpcy5vblB1Ymxpc2hlZCk7XG4gICAgLy8g55uR5ZCs5LqS5Yqo5paw5aKe5LqL5Lu277yI6K+E6K66L+eCuei1nu+8iVxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2R5bmFtaWNzOmludGVyYWN0aW9uQWRkZWQnLCB0aGlzLm9uSW50ZXJhY3Rpb25BZGRlZCk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHluYW1pY3NJbnRlcmFjdGlvbkFkZGVkJywgdGhpcy5vbkludGVyYWN0aW9uQWRkZWQpO1xuXG4gICAgY29uc29sZS5sb2coJ+KchSDliqjmgIHnrqHnkIblmajliJ3lp4vljJblrozmiJAnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmmL7npLrliqjmgIHnlYzpnaJcbiAgICovXG4gIHB1YmxpYyBhc3luYyBzaG93RHluYW1pY3NJbnRlcmZhY2UoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc29sZS5sb2coJ/Cfk7Eg5pi+56S65Yqo5oCB55WM6Z2iLi4uJyk7XG5cbiAgICAvLyDkvb/nlKhqUXVlcnnpmpDol4/lhbbku5bnlYzpnaJcbiAgICB0aGlzLmhpZGVBbGxJbnRlcmZhY2VzKCk7XG5cbiAgICAvLyDkvb/nlKhqUXVlcnnmmL7npLrliqjmgIHnlYzpnaJcbiAgICBpZiAodGhpcy4kY29udGFpbmVyICYmIHRoaXMuJGNvbnRhaW5lci5sZW5ndGgpIHtcbiAgICAgIHRoaXMuJGNvbnRhaW5lci5hZGRDbGFzcygnYWN0aXZlJykuc2hvdygpO1xuXG4gICAgICBjb25zb2xlLmxvZygn4pyFIOWKqOaAgeeVjOmdouW3suaYvuekuu+8jOW9k+WJjeagt+W8jzonLCB7XG4gICAgICAgIGRpc3BsYXk6IHRoaXMuJGNvbnRhaW5lci5jc3MoJ2Rpc3BsYXknKSxcbiAgICAgICAgY2xhc3NMaXN0OiB0aGlzLiRjb250YWluZXIuYXR0cignY2xhc3MnKSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyDkuI3lho3ph43lpI3liJ3lp4vljJYgQ29udGFjdE1hbmFnZXLvvIzlm6DkuLrlnKggaW5pdGlhbGl6ZSgpIOS4reW3sue7j+WIneWni+WMlui/h+S6hlxuXG4gICAgICAvLyDmuLLmn5PliqjmgIHlhoXlrrlcbiAgICAgIHRoaXMucmVuZGVyRHluYW1pY3NDb250ZW50KCk7XG5cbiAgICAgIC8vIOWIneWni+WMluS6i+S7tuebkeWQrOWZqO+8iOWPquWcqOaYvuekuuaXtuWIneWni+WMlu+8iVxuICAgICAgdGhpcy5ldmVudEhhbmRsZXIuaW5pdGlhbGl6ZUV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICAgIC8vIOWIneWni+WMluW6lemDqOWvvOiIquagj1xuICAgICAgdGhpcy5pbml0aWFsaXplQm90dG9tTmF2aWdhdGlvbigpO1xuXG4gICAgICAvLyDliJ3lp4vljJbnirbmgIHmoI9cbiAgICAgIHRoaXMuaW5pdGlhbGl6ZVN0YXR1c0JhcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwg5Yqo5oCB55WM6Z2i5YWD57Sg5LiN5a2Y5ZyoJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOa4suafk+WKqOaAgeWGheWuuVxuICAgKiBAcGFyYW0gY29uZmlnIOa4suafk+mFjee9rlxuICAgKi9cbiAgcHVibGljIHJlbmRlckR5bmFtaWNzQ29udGVudChjb25maWc/OiBEeW5hbWljc1JlbmRlckNvbmZpZyk6IHZvaWQge1xuICAgIC8vIOmqjOivgeW5tuino+aekOmFjee9rlxuICAgIGNvbnN0IHZhbGlkYXRlZENvbmZpZyA9IER5bmFtaWNzRGF0YVZhbGlkYXRvci5wYXJzZUNvbmZpZyhjb25maWcpO1xuXG4gICAgLy8g6aaW5YWI5bCd6K+V5LuO546w5pyJ5raI5oGv5Lit6Kej5p6Q5Yqo5oCB5pWw5o2uXG4gICAgdGhpcy5sb2FkRHluYW1pY3NGcm9tTWVzc2FnZXMoKTtcblxuICAgIC8vIOS9v+eUqOa4suafk+WZqOa4suafk+WGheWuuVxuICAgIHRoaXMucmVuZGVyZXIucmVuZGVyRHluYW1pY3NDb250ZW50KHRoaXMuZHluYW1pY3NEYXRhLCB2YWxpZGF0ZWRDb25maWcpO1xuICB9XG5cbiAgLyoqXG4gICAqIOS7jueOsOaciea2iOaBr+S4reWKoOi9veWKqOaAgeaVsOaNrlxuICAgKi9cbiAgcHVibGljIGxvYWREeW5hbWljc0Zyb21NZXNzYWdlcygpOiB2b2lkIHtcbiAgICBpZiAodHlwZW9mIGdldENoYXRNZXNzYWdlcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBnZXRDaGF0TWVzc2FnZXMoJzAte3tsYXN0TWVzc2FnZUlkfX0nKTtcbiAgICAgICAgY29uc29sZS5sb2coJ/CflI0g5byA5aeL6Kej5p6Q5Yqo5oCB5pWw5o2u77yM5raI5oGv5pWw6YePOicsIG1lc3NhZ2VzLmxlbmd0aCk7XG5cbiAgICAgICAgLy8g6IGa5ZCI5omA5pyJ5qW85bGC5Lit55qEIFvliqjmgIFdIOWuueWZqO+8jOWQiOW5tuS4uuS4gOS7veaXtumXtOe6v1xuICAgICAgICAvLyDms6jmhI/vvJrliqjmgIHnvJblj7flnKjkuI3lkIzmpbzlsYLkvJrku47lpLTlvIDlp4vvvIzlm6DmraTkvb/nlKgg5aSN5ZCI6ZSuIFwibWVzc2FnZV9pZCArIG5vXCIg6YG/5YWN6Leo5qW85bGC6K+v5ZCI5bm2XG4gICAgICAgIGNvbnN0IGFnZ3JlZ2F0ZSA9IG5ldyBNYXA8c3RyaW5nLCBSYXdQb3N0RGF0YT4oKTtcbiAgICAgICAgbGV0IGZvdW5kQW55ID0gZmFsc2U7XG5cbiAgICAgICAgLy8g56ys5LiA6YGN77ya5pS26ZuG5omA5pyJ5Yqo5oCB5ZKM6K+E6K665pWw5o2uXG4gICAgICAgIGNvbnN0IGFsbFBhcnNlZERhdGE6IEFycmF5PHsgbWVzc2FnZUlkOiBudW1iZXI7IHBvc3RzOiBSYXdQb3N0RGF0YVtdIH0+ID0gW107XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZXNzYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBtZXNzYWdlc1tpXTtcbiAgICAgICAgICBpZiAobWVzc2FnZS5tZXNzYWdlICYmIHR5cGVvZiBtZXNzYWdlLm1lc3NhZ2UgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAvLyDlj6ror4bliKtb5Yqo5oCBXS4uLlsv5Yqo5oCBXeWuueWZqFxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UubWVzc2FnZS5pbmNsdWRlcygnW+WKqOaAgV0nKSAmJiBtZXNzYWdlLm1lc3NhZ2UuaW5jbHVkZXMoJ1sv5Yqo5oCBXScpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHBhcnNlUmVzdWx0ID0gdGhpcy5keW5hbWljc1BhcnNlci5wYXJzZShtZXNzYWdlLm1lc3NhZ2UpO1xuXG4gICAgICAgICAgICAgIGlmIChwYXJzZVJlc3VsdCAmJiBwYXJzZVJlc3VsdC5kYXRhICYmIHBhcnNlUmVzdWx0LmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGZvdW5kQW55ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBhbGxQYXJzZWREYXRhLnB1c2goe1xuICAgICAgICAgICAgICAgICAgbWVzc2FnZUlkOiBtZXNzYWdlLm1lc3NhZ2VfaWQsXG4gICAgICAgICAgICAgICAgICBwb3N0czogcGFyc2VSZXN1bHQuZGF0YSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJzZVJlc3VsdD8uZXJyb3JzPy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ+KdjCDliqjmgIHmlbDmja7op6PmnpDlpLHotKU6JywgcGFyc2VSZXN1bHQuZXJyb3JzKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOesrOS6jOmBje+8muWFiOWkhOeQhuaJgOacieWKqOaAgeS4u+S9k++8jOW7uueri+WfuuehgOe7k+aehFxuICAgICAgICBmb3IgKGNvbnN0IHsgbWVzc2FnZUlkLCBwb3N0cyB9IG9mIGFsbFBhcnNlZERhdGEpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IHBvc3Qgb2YgcG9zdHMpIHtcbiAgICAgICAgICAgIGlmIChwb3N0Lm5vID09PSB1bmRlZmluZWQpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAvLyDlpI3lkIjplK7vvJrmpbzlsYIgbWVzc2FnZV9pZCArIOWKqOaAgee8luWPt1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gYCR7bWVzc2FnZUlkfV8ke3Bvc3Qubm99YDtcblxuICAgICAgICAgICAgY29uc3QgZXhpc3RlZCA9IGFnZ3JlZ2F0ZS5nZXQoa2V5KTtcbiAgICAgICAgICAgIGlmICghZXhpc3RlZCkge1xuICAgICAgICAgICAgICAvLyDkvb/nlKjlhazlhbHlt6Xlhbfov5vooYzmt7Hmi7fotJ1cbiAgICAgICAgICAgICAgY29uc3QgY2xvbmVkID0gRHluYW1pY3NEYXRhUHJvY2Vzc29yLmNsb25lRHluYW1pYyhwb3N0KTtcbiAgICAgICAgICAgICAgLy8g5re75Yqg5qW85bGCSUTkv6Hmga9cbiAgICAgICAgICAgICAgY2xvbmVkLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZDtcbiAgICAgICAgICAgICAgYWdncmVnYXRlLnNldChrZXksIGNsb25lZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyDlkIjlubbnrZbnlaXvvJpcbiAgICAgICAgICAgICAgLy8gMSkg6KGl5YWo57y65aSx5a2X5q61XG4gICAgICAgICAgICAgIER5bmFtaWNzRGF0YVByb2Nlc3Nvci5maWxsTWlzc2luZ0ZpZWxkcyhleGlzdGVkLCBwb3N0KTtcblxuICAgICAgICAgICAgICAvLyAyKSDlkIjlubbkupLliqjmlbDmja7vvIjngrnotZ7jgIHor4TorrrvvIlcbiAgICAgICAgICAgICAgRHluYW1pY3NEYXRhUHJvY2Vzc29yLm1lcmdlSW50ZXJhY3Rpb25zKGV4aXN0ZWQsIHBvc3QpO1xuXG4gICAgICAgICAgICAgIC8vIDMpIOehruS/nealvOWxgklE5a2Y5ZyoXG4gICAgICAgICAgICAgIGlmICghZXhpc3RlZC5tZXNzYWdlSWQpIHtcbiAgICAgICAgICAgICAgICBleGlzdGVkLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOesrOS4iemBje+8muWkhOeQhuWtpOeri+eahOivhOiuuu+8iOivhOiuuuebruagh+WKqOaAgeS4jeWcqOWQjOS4gOa2iOaBr+S4reeahOaDheWGte+8iVxuICAgICAgICBmb3IgKGNvbnN0IHsgbWVzc2FnZUlkLCBwb3N0cyB9IG9mIGFsbFBhcnNlZERhdGEpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IHBvc3Qgb2YgcG9zdHMpIHtcbiAgICAgICAgICAgIGlmIChwb3N0Lm5vID09PSB1bmRlZmluZWQgfHwgIXBvc3QuY29tbWVudHM/Lmxlbmd0aCkgY29udGludWU7XG5cbiAgICAgICAgICAgIC8vIOajgOafpeaYr+WQpuacieivhOiuuumcgOimgeWQiOW5tuWIsOWFtuS7lualvOWxgueahOWKqOaAgVxuICAgICAgICAgICAgZm9yIChjb25zdCBjb21tZW50IG9mIHBvc3QuY29tbWVudHMpIHtcbiAgICAgICAgICAgICAgLy8g5bCd6K+V5om+5Yiw55uu5qCH5Yqo5oCB77yI5Y+v6IO95Zyo5YW25LuW5qW85bGC77yJXG4gICAgICAgICAgICAgIGxldCB0YXJnZXRGb3VuZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgIC8vIOmmluWFiOWcqOW9k+WJjealvOWxguafpeaJvlxuICAgICAgICAgICAgICBjb25zdCBjdXJyZW50S2V5ID0gYCR7bWVzc2FnZUlkfV8ke3Bvc3Qubm99YDtcbiAgICAgICAgICAgICAgaWYgKGFnZ3JlZ2F0ZS5oYXMoY3VycmVudEtleSkpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29udGludWU7IC8vIOW3sue7j+WcqOesrOS6jOmBjeS4reWkhOeQhuS6hlxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8g5Zyo5YW25LuW5qW85bGC5p+l5om+55u45ZCM57yW5Y+355qE5Yqo5oCBXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgW2V4aXN0aW5nS2V5LCBleGlzdGluZ1Bvc3RdIG9mIGFnZ3JlZ2F0ZSkge1xuICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ1Bvc3Qubm8gPT09IHBvc3Qubm8gJiYgZXhpc3RpbmdLZXkgIT09IGN1cnJlbnRLZXkpIHtcbiAgICAgICAgICAgICAgICAgIC8vIOaJvuWIsOS6huebruagh+WKqOaAge+8jOWQiOW5tuivhOiuulxuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYPCflIQg5bCG6K+E6K665ZCI5bm25Yiw5Yqo5oCBICMke3Bvc3Qubm99ICjku47mpbzlsYIgJHttZXNzYWdlSWR9IOWIsCAke2V4aXN0aW5nUG9zdC5tZXNzYWdlSWR9KWApO1xuICAgICAgICAgICAgICAgICAgZXhpc3RpbmdQb3N0LmNvbW1lbnRzID0gRHluYW1pY3NEYXRhUHJvY2Vzc29yLm1lcmdlQ29tbWVudHMoZXhpc3RpbmdQb3N0LmNvbW1lbnRzIHx8IFtdLCBbY29tbWVudF0pO1xuICAgICAgICAgICAgICAgICAgdGFyZ2V0Rm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKCF0YXJnZXRGb3VuZCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybihg4pqg77iPIOivhOiuuuebruagh+WKqOaAgSAjJHtwb3N0Lm5vfSDkuI3lrZjlnKjvvIzor4TorrrlhoXlrrk6ICR7Y29tbWVudC5jb250ZW50Py5zdWJzdHJpbmcoMCwgMzApfS4uLmApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWVyZ2VkUG9zdHMgPSBBcnJheS5mcm9tKGFnZ3JlZ2F0ZS52YWx1ZXMoKSk7XG4gICAgICAgIC8vIOacgOe7iCBsaWtlc0NvdW50IOS7pSBsaWtlZEJ5IOmVv+W6puS4uuWHhlxuICAgICAgICBtZXJnZWRQb3N0cy5mb3JFYWNoKHAgPT4gKHAubGlrZXNDb3VudCA9IHAubGlrZWRCeT8ubGVuZ3RoIHx8IDApKTtcblxuICAgICAgICBpZiAoZm91bmRBbnkgJiYgbWVyZ2VkUG9zdHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IGNvbnZlcnRlZERhdGEgPSBEYXRhQ29udmVydGVyLmNvbnZlcnREeW5hbWljc0RhdGEobWVyZ2VkUG9zdHMpO1xuICAgICAgICAgIGNvbnN0IHZhbGlkYXRlZERhdGEgPSBEeW5hbWljc0RhdGFWYWxpZGF0b3IudmFsaWRhdGVEeW5hbWljc0RhdGEoY29udmVydGVkRGF0YSk7XG5cbiAgICAgICAgICBpZiAodmFsaWRhdGVkRGF0YSkge1xuICAgICAgICAgICAgdGhpcy5keW5hbWljc0RhdGEgPSB2YWxpZGF0ZWREYXRhO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ+KchSDliqjmgIHmlbDmja7ogZrlkIjmiJDlip/vvIzluJblrZDmlbDph486JywgbWVyZ2VkUG9zdHMubGVuZ3RoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5keW5hbWljc0RhdGEgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+TnSDmnKrmib7liLDku7vkvZVb5Yqo5oCBXeWuueWZqO+8jOS9v+eUqOm7mOiupOWGheWuuScpO1xuICAgICAgICAgIHRoaXMuZHluYW1pY3NEYXRhID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign8J+SpSDliqDovb3liqjmgIHmlbDmja7ml7blh7rplJk6JywgZXJyb3IpO1xuICAgICAgICB0aGlzLmR5bmFtaWNzRGF0YSA9IG51bGw7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIGdldENoYXRNZXNzYWdlcyDlh73mlbDkuI3lj6/nlKgnKTtcbiAgICAgIHRoaXMuZHluYW1pY3NEYXRhID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5b2T5YmN5Yqo5oCB5pWw5o2uXG4gICAqL1xuICBwdWJsaWMgZ2V0RHluYW1pY3NEYXRhKCk6IER5bmFtaWNzRGF0YSB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmR5bmFtaWNzRGF0YTtcbiAgfVxuXG4gIC8qKlxuICAgKiDorr7nva7liqjmgIHmlbDmja5cbiAgICogQHBhcmFtIGRhdGEg5Yqo5oCB5pWw5o2uXG4gICAqL1xuICBwdWJsaWMgc2V0RHluYW1pY3NEYXRhKGRhdGE6IER5bmFtaWNzRGF0YSB8IG51bGwpOiB2b2lkIHtcbiAgICAvLyDpqozor4HmlbDmja5cbiAgICBpZiAoZGF0YSkge1xuICAgICAgY29uc3QgdmFsaWRhdGVkRGF0YSA9IER5bmFtaWNzRGF0YVZhbGlkYXRvci52YWxpZGF0ZUR5bmFtaWNzRGF0YShkYXRhKTtcbiAgICAgIHRoaXMuZHluYW1pY3NEYXRhID0gdmFsaWRhdGVkRGF0YTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5keW5hbWljc0RhdGEgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlpITnkIbov5Tlm57ogYrlpKnnlYzpnaLkuovku7ZcbiAgICovXG4gIHByaXZhdGUgaGFuZGxlQmFja1RvQ2hhdChldmVudDogSlF1ZXJ5LkV2ZW50KTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ/Cfk7Eg5aSE55CG6L+U5Zue6IGK5aSp55WM6Z2i5LqL5Lu2Jyk7XG5cbiAgICAvLyDkvb/nlKhqUXVlcnnop6blj5HnlYzpnaLliIfmjaLkuovku7ZcbiAgICBjb25zdCBjdXN0b21FdmVudCA9IChldmVudCBhcyBhbnkpLm9yaWdpbmFsRXZlbnQgYXMgQ3VzdG9tRXZlbnQ7XG4gICAgY29uc3Qgc3dpdGNoRXZlbnQgPSAkLkV2ZW50KCdpbnRlcmZhY2U6c3dpdGNoJywge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIGZyb206ICdkeW5hbWljcycsXG4gICAgICAgIHRvOiAnY2hhdCcsXG4gICAgICAgIHNvdXJjZTogY3VzdG9tRXZlbnQ/LmRldGFpbD8uc291cmNlIHx8ICd1bmtub3duJyxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgJChkb2N1bWVudCkudHJpZ2dlcihzd2l0Y2hFdmVudCk7XG4gIH1cblxuICAvKipcbiAgICog6ZqQ6JeP5omA5pyJ55WM6Z2iXG4gICAqL1xuICBwcml2YXRlIGhpZGVBbGxJbnRlcmZhY2VzKCk6IHZvaWQge1xuICAgIGNvbnN0IGludGVyZmFjZXMgPSBbXG4gICAgICAnI2NoYXRJbnRlcmZhY2UnLFxuICAgICAgJyNjaGF0TGlzdEludGVyZmFjZScsXG4gICAgICAnI2RpYXJ5SW50ZXJmYWNlJyxcbiAgICAgICcjY2FsbEludGVyZmFjZScsXG4gICAgICAnI2R5bmFtaWNzSW50ZXJmYWNlJyxcbiAgICAgICcjZHluYW1pY3NDb21wb3NlckludGVyZmFjZScsXG4gICAgXTtcblxuICAgIC8vIOS9v+eUqGpRdWVyeeaJuemHj+makOiXj1xuICAgICQoaW50ZXJmYWNlcy5qb2luKCcsICcpKS5yZW1vdmVDbGFzcygnYWN0aXZlJykuaGlkZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOaYvuekuuWPkeW4g+WKqOaAgeeVjOmdolxuICAgKi9cbiAgcHVibGljIHNob3dDb21wb3NlckludGVyZmFjZSgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygn8J+TnSDmmL7npLrlj5HluIPliqjmgIHnlYzpnaIuLi4nKTtcblxuICAgIC8vIOazqOaEj++8muS4jemakOiXj+WKqOaAgeeVjOmdou+8jOiuqeWPkeW4g+eVjOmdouimhuebluWcqOS4iuWxglxuICAgIC8vIOWPquehruS/neWKqOaAgeeVjOmdouaYr+aYvuekuueahFxuICAgIGlmICghJCgnI2R5bmFtaWNzSW50ZXJmYWNlJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyDliqjmgIHnlYzpnaLmnKrmv4DmtLvvvIzlhYjmv4DmtLvliqjmgIHnlYzpnaInKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyDmo4Dmn6Xlj5HluIPnlYzpnaLmmK/lkKblt7Lnu4/lrZjlnKhcbiAgICBsZXQgJGNvbXBvc2VyQ29udGFpbmVyID0gJCgnI2R5bmFtaWNzQ29tcG9zZXJJbnRlcmZhY2UnKTtcbiAgICBcbiAgICBpZiAoISRjb21wb3NlckNvbnRhaW5lci5sZW5ndGgpIHtcbiAgICAgIC8vIOWmguaenOS4jeWtmOWcqO+8jOWIm+W7uuWPkeW4g+eVjOmdolxuICAgICAgY29uc3QgY29tcG9zZXJIdG1sID0gdGhpcy5jb21wb3Nlci5yZW5kZXJDb21wb3NlckludGVyZmFjZSgpO1xuICAgICAgJCgnLmludGVyZmFjZS1jb250YWluZXInKS5hcHBlbmQoY29tcG9zZXJIdG1sKTtcbiAgICAgICRjb21wb3NlckNvbnRhaW5lciA9ICQoJyNkeW5hbWljc0NvbXBvc2VySW50ZXJmYWNlJyk7XG4gICAgfVxuXG4gICAgLy8g5pi+56S65Y+R5biD55WM6Z2i77yI6KaG55uW5Zyo5Yqo5oCB55WM6Z2i5LiK5bGC77yJXG4gICAgJGNvbXBvc2VyQ29udGFpbmVyLmFkZENsYXNzKCdhY3RpdmUnKS5zaG93KCk7XG5cbiAgICAvLyDliJ3lp4vljJblj5HluIPnlYzpnaJcbiAgICB0aGlzLmNvbXBvc2VyLmluaXRpYWxpemVDb21wb3NlcigpO1xuXG4gICAgY29uc29sZS5sb2coJ+KchSDlj5HluIPliqjmgIHnlYzpnaLlt7LmmL7npLrvvIjopobnm5blnKjliqjmgIHpobXpnaLkuIrvvIknKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliJ3lp4vljJbnirbmgIHmoI9cbiAgICovXG4gIHByaXZhdGUgaW5pdGlhbGl6ZVN0YXR1c0JhcigpOiB2b2lkIHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHluYW1pY3NTdGF0dXNCYXJDb250YWluZXInKTtcbiAgICBpZiAoY29udGFpbmVyKSB7XG4gICAgICB0aGlzLnN0YXR1c0JhciA9IFN0YXR1c0Jhci5jcmVhdGUoY29udGFpbmVyKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog6ZSA5q+B54q25oCB5qCPXG4gICAqL1xuICBwcml2YXRlIGRlc3Ryb3lTdGF0dXNCYXIoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc3RhdHVzQmFyKSB7XG4gICAgICB0aGlzLnN0YXR1c0Jhci5kZXN0cm95KCk7XG4gICAgICB0aGlzLnN0YXR1c0JhciA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOmakOiXj+WKqOaAgeeVjOmdolxuICAgKi9cbiAgcHVibGljIGhpZGVEeW5hbWljc0ludGVyZmFjZSgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygn8J+TsSDpmpDol4/liqjmgIHnlYzpnaIuLi4nKTtcblxuICAgIGlmICh0aGlzLiRjb250YWluZXIgJiYgdGhpcy4kY29udGFpbmVyLmxlbmd0aCkge1xuICAgICAgdGhpcy4kY29udGFpbmVyLnJlbW92ZUNsYXNzKCdhY3RpdmUnKS5oaWRlKCk7XG4gICAgfVxuXG4gICAgLy8g6ZSA5q+B54q25oCB5qCPXG4gICAgdGhpcy5kZXN0cm95U3RhdHVzQmFyKCk7XG5cbiAgICAvLyDmuIXnkIbkuovku7bnm5HlkKzlmahcbiAgICB0aGlzLmV2ZW50SGFuZGxlci5kZXN0cm95KCk7XG5cbiAgICBjb25zb2xlLmxvZygn4pyFIOWKqOaAgeeVjOmdouW3sumakOiXjycpO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIneWni+WMluW6lemDqOWvvOiIquagj1xuICAgKi9cbiAgcHJpdmF0ZSBpbml0aWFsaXplQm90dG9tTmF2aWdhdGlvbigpOiB2b2lkIHtcbiAgICBjb25zdCBuYXZDb250YWluZXIgPSB0aGlzLiRjb250YWluZXI/LmZpbmQoJy5ib3R0b20tbmF2JylbMF0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKG5hdkNvbnRhaW5lcikge1xuICAgICAgLy8g5L2/55SoIEJvdHRvbU5hdmlnYXRpb24g55qE6Z2Z5oCB5pa55rOV5oyC6L296buY6K6k5a+86IiqXG4gICAgICB0aGlzLmJvdHRvbU5hdmlnYXRpb24gPSBCb3R0b21OYXZpZ2F0aW9uLm1vdW50RGVmYXVsdChcbiAgICAgICAgbmF2Q29udGFpbmVyLFxuICAgICAgICAnZmVlZCcsIC8vIOW9k+WJjemhtemdouaYr+WKqOaAgemhtVxuICAgICAgICB7XG4gICAgICAgICAgZmVlZDogKCkgPT4ge30sIC8vIOW9k+WJjemhtemdou+8jOS4jeWBmuWkhOeQhlxuICAgICAgICAgIG1lc3NhZ2VzOiAoKSA9PiB0aGlzLnN3aXRjaFRvQ2hhdExpc3QoKSxcbiAgICAgICAgICBwcm9maWxlOiAoKSA9PiB0aGlzLnN3aXRjaFRvUHJvZmlsZSgpLFxuICAgICAgICB9LFxuICAgICAgKTtcbiAgICAgIGNvbnNvbGUubG9nKCfinIUg5Yqo5oCB6aG16Z2i5bqV6YOo5a+86Iiq5qCP5bey5Yid5aeL5YyWJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIOacquaJvuWIsOW6lemDqOWvvOiIquagj+WuueWZqCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDliIfmjaLliLDogYrlpKnliJfooahcbiAgICovXG4gIHByaXZhdGUgc3dpdGNoVG9DaGF0TGlzdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygn8J+UhCDku47liqjmgIHpobXpnaLliIfmjaLliLDogYrlpKnliJfooagnKTtcbiAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgncGFnZVN3aXRjaCcsIHtcbiAgICAgIGRldGFpbDoge1xuICAgICAgICBmcm9tOiAnZmVlZCcsXG4gICAgICAgIHRvOiAnY2hhdExpc3QnLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliIfmjaLliLDkuKrkurrkuLvpobVcbiAgICovXG4gIHByaXZhdGUgc3dpdGNoVG9Qcm9maWxlKCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKCfwn5SEIOS7juWKqOaAgemhtemdouWIh+aNouWIsOS4quS6uuS4u+mhtScpO1xuICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdwYWdlU3dpdGNoJywge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIGZyb206ICdmZWVkJyxcbiAgICAgICAgdG86ICdwcm9maWxlJyxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gIH1cblxuICAvKipcbiAgICog6ZSA5q+B5Yqo5oCB566h55CG5ZmoXG4gICAqL1xuICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygn8J+Xke+4jyDplIDmr4HliqjmgIHnrqHnkIblmaguLi4nKTtcblxuICAgIC8vIOmakOiXj+eVjOmdolxuICAgIHRoaXMuaGlkZUR5bmFtaWNzSW50ZXJmYWNlKCk7XG5cbiAgICAvLyDkvb/nlKhqUXVlcnnnp7vpmaTkuovku7bnm5HlkKzlmahcbiAgICAkKGRvY3VtZW50KS5vZmYoJ2R5bmFtaWNzOmJhY2snKTtcbiAgICAkKGRvY3VtZW50KS5vZmYoJ2R5bmFtaWNzOnJlZnJlc2gnKTtcbiAgICAkKHdpbmRvdykub2ZmKCdkeW5hbWljczpvcGVuQ29tcG9zZXInKTtcbiAgICAkKHdpbmRvdykub2ZmKCdkeW5hbWljczpwdWJsaXNoZWQnKTtcblxuICAgIC8vIOWPlua2iOiBlOezu+S6uuabtOaWsOS6i+S7tuebkeWQrFxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbnRhY3RVcGRhdGVkJywgdGhpcy5vbkNvbnRhY3RVcGRhdGVkKTtcbiAgICAvLyDlj5bmtojkupLliqgv5Y+R5biD5LqL5Lu255uR5ZCsXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHluYW1pY3NQdWJsaXNoZWQnLCB0aGlzLm9uUHVibGlzaGVkKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdkeW5hbWljczppbnRlcmFjdGlvbkFkZGVkJywgdGhpcy5vbkludGVyYWN0aW9uQWRkZWQpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2R5bmFtaWNzSW50ZXJhY3Rpb25BZGRlZCcsIHRoaXMub25JbnRlcmFjdGlvbkFkZGVkKTtcblxuICAgIC8vIOa4heeQhuaVsOaNrlxuICAgIHRoaXMuZHluYW1pY3NEYXRhID0gbnVsbDtcbiAgICB0aGlzLiRjb250YWluZXIgPSBudWxsO1xuICAgIHRoaXMuYm90dG9tTmF2aWdhdGlvbiA9IG51bGw7XG5cbiAgICBjb25zb2xlLmxvZygn4pyFIOWKqOaAgeeuoeeQhuWZqOW3sumUgOavgScpO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/dynamics/manager.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/dynamics/renderer.ts": 
  /*!********************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/dynamics/renderer.ts ***!
  \********************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DynamicsRenderer: () => (/* binding */ DynamicsRenderer)\n/* harmony export */ });\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"jquery\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _profile_GlobalUserManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../profile/GlobalUserManager */ \"./src/多云熊/备份/给rovo的/modules/profile/GlobalUserManager.ts\");\n/**\n * 动态渲染器模块（优化版）\n * 负责动态内容的渲染和样式处理\n * 使用jQuery进行DOM操作\n */\n\n\nclass DynamicsRenderer {\n    globalUserManager;\n    currentUserName = null;\n    actualUserName = null; // 存储实际的用户名\n    soundManager; // 音效管理器引用\n    constructor(soundManager) {\n        this.globalUserManager = _profile_GlobalUserManager__WEBPACK_IMPORTED_MODULE_1__.GlobalUserManager.getInstance();\n        this.soundManager = soundManager || window.soundManager;\n        this.initializeUserAvatar();\n        this.setupUserAvatarListener();\n        this.initializeActualUserName();\n    }\n    /**\n     * 初始化实际用户名（用于替换 \"user\" 显示）\n     */\n    async initializeActualUserName() {\n        try {\n            const userNameRaw = await triggerSlash('/pass {{user}}');\n            this.actualUserName = (userNameRaw || '').trim() || '用户';\n            console.log('📝 实际用户名:', this.actualUserName);\n        }\n        catch (error) {\n            console.error('获取实际用户名失败:', error);\n            this.actualUserName = '用户';\n        }\n    }\n    /**\n     * 将 \"user\" 替换为实际用户名\n     */\n    replaceUserWithActualName(name) {\n        if (name === 'user' && this.actualUserName) {\n            return this.actualUserName;\n        }\n        // 处理回复格式 \"user@某人\"\n        if (name.startsWith('user@') && this.actualUserName) {\n            return name.replace('user', this.actualUserName);\n        }\n        return name;\n    }\n    /**\n     * 初始化用户头像\n     */\n    async initializeUserAvatar() {\n        try {\n            const userData = await this.globalUserManager.loadUserData();\n            const $navProfile = jquery__WEBPACK_IMPORTED_MODULE_0___default()('.dynamics-nav-profile');\n            if ($navProfile.length && userData.avatar) {\n                $navProfile.css('background-image', `url('${userData.avatar}')`);\n            }\n            // 记录当前用户名，用于点赞按钮“已点赞”样式恢复\n            if (userData?.name) {\n                this.currentUserName = userData.name;\n                this.updateLikeButtonsState();\n            }\n        }\n        catch (error) {\n            console.error('初始化动态页面用户头像失败:', error);\n        }\n    }\n    /**\n     * 设置用户头像变更监听器\n     */\n    setupUserAvatarListener() {\n        // 监听头像变更事件\n        this.globalUserManager.addEventListener('avatar', event => {\n            const $navProfile = jquery__WEBPACK_IMPORTED_MODULE_0___default()('.dynamics-nav-profile');\n            if ($navProfile.length && event.newValue) {\n                $navProfile.css('background-image', `url('${event.newValue}')`);\n            }\n        });\n        // 监听所有变更（包括重置为默认）\n        this.globalUserManager.addEventListener('all', async (event) => {\n            if (event.type === 'avatar' || event.type === 'name') {\n                // 重新加载用户数据\n                const userData = this.globalUserManager.getCurrentUserData();\n                if (userData) {\n                    const $navProfile = jquery__WEBPACK_IMPORTED_MODULE_0___default()('.dynamics-nav-profile');\n                    if ($navProfile.length && userData.avatar) {\n                        $navProfile.css('background-image', `url('${userData.avatar}')`);\n                    }\n                    if (userData.name) {\n                        this.currentUserName = userData.name;\n                        this.updateLikeButtonsState();\n                    }\n                }\n            }\n        });\n    }\n    /**\n     * 渲染动态内容到指定的DOM元素\n     * @param dynamicsData 动态数据\n     * @param config 渲染配置\n     */\n    renderDynamicsContent(dynamicsData, config) {\n        console.log('📱 渲染动态内容...');\n        const $timeline = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsTimeline');\n        const $statusTime = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsStatusTime');\n        console.log('📋 动态元素检查:', {\n            timelineElement: $timeline.length > 0,\n            statusTimeElement: $statusTime.length > 0,\n        });\n        // 状态栏时间由DynamicsManager的定时器负责更新，这里不再处理\n        if ($timeline.length) {\n            if (dynamicsData && !config.useDefaultContent) {\n                console.log('📱 使用解析的动态数据:', dynamicsData);\n                $timeline.html(this.renderPosts(dynamicsData.posts));\n            }\n            else {\n                console.log('📱 使用默认动态内容');\n                $timeline.html(this.getDefaultDynamicsContent());\n                console.log('✅ 默认动态内容已设置');\n            }\n            // 添加动画效果\n            if (config.enableAnimations) {\n                this.addAnimations($timeline);\n            }\n        }\n        // 添加新建动态按钮\n        this.renderNewDynamicButton();\n        // 初始化用户头像（每次渲染时更新）\n        this.initializeUserAvatar();\n        console.log('✅ 动态内容渲染完成');\n    }\n    /**\n     * 渲染帖子列表\n     * @param posts 帖子数组\n     * @returns 渲染后的HTML字符串\n     */\n    renderPosts(posts) {\n        return posts.map(post => this.renderPost(post)).join('');\n    }\n    /**\n     * 渲染单个帖子\n     * @param post 帖子数据\n     * @returns 渲染后的HTML字符串\n     */\n    renderPost(post) {\n        const $post = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div>', { class: 'dynamics-post', 'data-post-id': post.id });\n        // 如果帖子有 messageId，添加到元素属性中（用于跨楼层评论）\n        if (post.messageId !== undefined && post.messageId !== null) {\n            $post.attr('data-message-id', String(post.messageId));\n        }\n        // 帖子头部\n        const $header = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div>', { class: 'dynamics-post-header' });\n        // 如果是 user，使用当前用户的头像\n        let avatarUrl = post.author.avatar || '';\n        if (post.author.name === 'user') {\n            const userData = this.globalUserManager.getCurrentUserData();\n            if (userData?.avatar) {\n                avatarUrl = userData.avatar;\n            }\n        }\n        const $avatar = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div>', {\n            class: 'dynamics-post-avatar',\n            css: { backgroundImage: `url('${avatarUrl}')` },\n        });\n        const $info = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div>', { class: 'dynamics-post-info' });\n        // 替换 \"user\" 为实际用户名\n        const displayName = this.replaceUserWithActualName(post.author.name);\n        $info.append(jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div>', { class: 'dynamics-post-name', text: displayName }), \n        // 改为显示时间而不是username\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div>', { class: 'dynamics-post-time', text: this.formatRelativeTime(post.timestamp) }));\n        $header.append($avatar, $info);\n        // 帖子内容\n        const $content = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div>', {\n            class: 'dynamics-post-content',\n            html: this.formatContent(post.content),\n        });\n        // 帖子图片（如果有）\n        let $image = null;\n        if (post.image) {\n            $image = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div>', {\n                class: 'dynamics-post-image',\n                css: { backgroundImage: `url('${post.image}')` },\n                'data-description': post.imageDescription || '',\n            });\n        }\n        // 帖子操作栏 - 只显示点赞和评论图标\n        const $actions = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div>', { class: 'dynamics-post-actions' });\n        // 使用SVG图标\n        const likeIcon = '<svg class=\"action-svg\" viewBox=\"0 0 24 24\"><path d=\"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z\"/></svg>';\n        const commentIcon = '<svg class=\"action-svg\" viewBox=\"0 0 24 24\"><path d=\"M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z\"/></svg>';\n        const $like = this.createAction('like', likeIcon, post.actions.likes);\n        if (this.isPostLikedByCurrentUser(post)) {\n            $like.addClass('liked');\n        }\n        const $comment = this.createAction('comment', commentIcon, post.comments ? post.comments.length : 0);\n        $actions.append($like, $comment);\n        // 点赞者显示区域（移到操作栏下方）\n        let $likedBy = null;\n        if (post.likedBy && post.likedBy.length > 0) {\n            $likedBy = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div>', { class: 'dynamics-liked-by' });\n            const heartIcon = '<svg class=\"liked-heart-icon\" viewBox=\"0 0 24 24\"><path d=\"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z\"/></svg>';\n            $likedBy.html(heartIcon);\n            $likedBy.append(post.likedBy\n                .map(user => {\n                // 替换 \"user\" 为实际用户名\n                const displayName = this.replaceUserWithActualName(user.name || user.username || '');\n                return jquery__WEBPACK_IMPORTED_MODULE_0___default()('<span>', { class: 'liked-user', text: displayName });\n            })\n                .reduce((prev, curr, index) => {\n                if (index > 0)\n                    prev.push(jquery__WEBPACK_IMPORTED_MODULE_0___default()('<span>', { text: '、' }));\n                prev.push(curr);\n                return prev;\n            }, []));\n        }\n        // 评论区（如果有）\n        let $comments = null;\n        if (post.comments && post.comments.length > 0) {\n            $comments = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div>', { class: 'dynamics-comments' });\n            post.comments.forEach(comment => {\n                $comments.append(this.renderComment(comment));\n            });\n        }\n        // 组装帖子\n        $post.append($header, $content);\n        if ($image)\n            $post.append($image);\n        $post.append($actions); // 操作栏\n        if ($likedBy)\n            $post.append($likedBy); // 点赞者显示在操作栏下方\n        if ($comments)\n            $post.append($comments);\n        return $post.prop('outerHTML') || '';\n    }\n    /**\n     * 创建操作按钮 - 只显示图标，不显示任何数量\n     */\n    createAction(type, icon, count) {\n        const $action = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div>', {\n            class: 'dynamics-post-action',\n            'data-action': type,\n        });\n        // 只显示图标，完全不显示数量\n        const html = `<span class=\"action-icon\">${icon}</span>`;\n        $action.html(html);\n        return $action;\n    }\n    /**\n     * 格式化相对时间 - QQ空间/朋友圈风格\n     */\n    formatRelativeTime(timestamp) {\n        // 兼容解析 \"YYYY-MM-DD HH:mm\" / ISO / 其他可被 Date 解析的字符串\n        let postTime = null;\n        try {\n            const ts = typeof timestamp === 'string' ? timestamp.trim() : '';\n            if (!ts)\n                return '未知时间';\n            // 明确格式：YYYY-MM-DD HH:mm\n            const ymdhm = ts.match(/^(\\d{4})-(\\d{2})-(\\d{2})[ T](\\d{2}):(\\d{2})$/);\n            if (ymdhm) {\n                const [, y, m, d, hh, mm] = ymdhm;\n                postTime = new Date(parseInt(y, 10), parseInt(m, 10) - 1, parseInt(d, 10), parseInt(hh, 10), parseInt(mm, 10), 0, 0);\n            }\n            else if (/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}/.test(ts)) {\n                // ISO-like，交给 Date 处理\n                const d = new Date(ts);\n                if (!isNaN(d.getTime()))\n                    postTime = d;\n            }\n            else {\n                // 兜底：尝试原生解析\n                const d = new Date(ts);\n                if (!isNaN(d.getTime()))\n                    postTime = d;\n            }\n            if (!postTime)\n                return '未知时间';\n            const now = new Date();\n            const diff = now.getTime() - postTime.getTime();\n            const minutes = Math.floor(diff / 60000);\n            const hours = Math.floor(diff / 3600000);\n            const days = Math.floor(diff / 86400000);\n            if (minutes < 1)\n                return '刚刚';\n            if (minutes < 60)\n                return `${minutes}分钟前`;\n            if (hours < 24)\n                return `${hours}小时前`;\n            if (days < 2)\n                return '昨天';\n            if (days < 7)\n                return `${days}天前`;\n            // 超过7天显示具体日期\n            const month = postTime.getMonth() + 1;\n            const day = postTime.getDate();\n            const currentYear = now.getFullYear();\n            const postYear = postTime.getFullYear();\n            if (currentYear === postYear) {\n                return `${month}月${day}日`;\n            }\n            else {\n                return `${postYear}年${month}月${day}日`;\n            }\n        }\n        catch {\n            return '未知时间';\n        }\n    }\n    /**\n     * 格式化内容文本\n     */\n    formatContent(content) {\n        let formattedContent = content;\n        // 处理链接\n        formattedContent = formattedContent.replace(/https?:\\/\\/[^\\s]+/g, url => `<a href=\"${url}\" target=\"_blank\" class=\"dynamics-link\">${url}</a>`);\n        // 处理@提及\n        formattedContent = formattedContent.replace(/@(\\w+)/g, '<span class=\"dynamics-mention\">@$1</span>');\n        // 处理话题标签\n        formattedContent = formattedContent.replace(/#([^\\s]+)/g, '<span class=\"dynamics-hashtag\">#$1</span>');\n        return formattedContent;\n    }\n    /**\n     * 渲染评论 - QQ空间/朋友圈风格\n     * @param comment 评论数据\n     * @returns 渲染后的HTML字符串\n     */\n    renderComment(comment) {\n        // QQ空间风格：更紧凑的评论布局\n        const $comment = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div>', { class: 'dynamics-comment dynamics-comment-qq' });\n        // QQ空间评论格式：名字：内容\n        const $content = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div>', { class: 'dynamics-comment-content' });\n        // 替换 \"user\" 为实际用户名\n        const authorName = this.replaceUserWithActualName(comment.author.name);\n        // 检查是否是回复格式（包含\"回复\"关键字）\n        const isReply = authorName.includes(' 回复 ');\n        if (isReply) {\n            // 解析回复格式：\"A 回复 B\"，两部分都可能需要替换 \"user\"\n            const parts = authorName.split(' 回复 ');\n            if (parts.length === 2) {\n                // 第一部分（评论者）可能是 \"user\"\n                const commenterName = this.replaceUserWithActualName(parts[0]);\n                // 第二部分（被回复者）一般不是 \"user\"，但以防万一也处理\n                const replyToName = this.replaceUserWithActualName(parts[1]);\n                $content.append(jquery__WEBPACK_IMPORTED_MODULE_0___default()('<span>', {\n                    class: 'dynamics-comment-name',\n                    text: commenterName,\n                }), jquery__WEBPACK_IMPORTED_MODULE_0___default()('<span>', {\n                    text: ' 回复 ',\n                    class: 'dynamics-comment-reply-indicator',\n                }), jquery__WEBPACK_IMPORTED_MODULE_0___default()('<span>', {\n                    class: 'dynamics-comment-name dynamics-comment-reply-target',\n                    text: replyToName,\n                }), jquery__WEBPACK_IMPORTED_MODULE_0___default()('<span>', { text: '：' }), jquery__WEBPACK_IMPORTED_MODULE_0___default()('<span>', {\n                    class: 'dynamics-comment-text',\n                    html: this.formatContent(comment.content),\n                }));\n            }\n            else {\n                // 格式不正确，按普通评论处理\n                $content.append(jquery__WEBPACK_IMPORTED_MODULE_0___default()('<span>', {\n                    class: 'dynamics-comment-name',\n                    text: authorName,\n                }), jquery__WEBPACK_IMPORTED_MODULE_0___default()('<span>', { text: '：' }), jquery__WEBPACK_IMPORTED_MODULE_0___default()('<span>', {\n                    class: 'dynamics-comment-text',\n                    html: this.formatContent(comment.content),\n                }));\n            }\n        }\n        else {\n            // 普通评论\n            $content.append(jquery__WEBPACK_IMPORTED_MODULE_0___default()('<span>', {\n                class: 'dynamics-comment-name',\n                text: authorName,\n            }), jquery__WEBPACK_IMPORTED_MODULE_0___default()('<span>', { text: '：' }), jquery__WEBPACK_IMPORTED_MODULE_0___default()('<span>', {\n                class: 'dynamics-comment-text',\n                html: this.formatContent(comment.content),\n            }));\n        }\n        // 不再显示评论时间\n        $comment.append($content);\n        return $comment.prop('outerHTML') || '';\n    }\n    /**\n     * 添加动画效果\n     */\n    addAnimations($container) {\n        // 为每个帖子添加渐入动画\n        $container.find('.dynamics-post').each((index, element) => {\n            const $post = jquery__WEBPACK_IMPORTED_MODULE_0___default()(element);\n            $post.css({\n                opacity: 0,\n                transform: 'translateY(20px)',\n            });\n            setTimeout(() => {\n                $post\n                    .animate({\n                    opacity: 1,\n                }, 300)\n                    .css({\n                    transform: 'translateY(0)',\n                    transition: 'transform 0.3s ease',\n                });\n            }, index * 100);\n        });\n    }\n    /**\n     * 获取默认动态内容\n     * @returns 默认的HTML动态内容\n     */\n    // 判断该帖子是否被当前用户点赞（用于初始渲染时设置红心）\n    isPostLikedByCurrentUser(post) {\n        // 直接判断是否包含 \"user\"，因为当前用户的点赞都存储为 \"user\"\n        return !!post.likedBy?.some(u => u.name === 'user' || u.username === 'user');\n    }\n    // 根据 DOM 中显示的 liked-by 用户名单，给点赞按钮补齐/移除 liked 状态\n    updateLikeButtonsState() {\n        if (!this.actualUserName)\n            return;\n        const displayName = this.actualUserName;\n        const $posts = jquery__WEBPACK_IMPORTED_MODULE_0___default()('.dynamics-post');\n        $posts.each((_, el) => {\n            const $post = jquery__WEBPACK_IMPORTED_MODULE_0___default()(el);\n            const names = $post\n                .find('.dynamics-liked-by .liked-user')\n                .map((i, e) => jquery__WEBPACK_IMPORTED_MODULE_0___default()(e).text().trim())\n                .get();\n            // 检查显示的名字中是否包含当前用户的实际名字\n            const liked = names.includes(displayName);\n            $post.find('.dynamics-post-action[data-action=\"like\"]').toggleClass('liked', liked);\n        });\n    }\n    // 增量同步：根据联系人更新事件，按作者名在当前DOM中更新帖子头像与显示名\n    syncAuthorAvatar(oldName, newName, newAvatar) {\n        try {\n            const names = [oldName, newName].filter(Boolean);\n            if (names.length === 0)\n                return;\n            const $posts = jquery__WEBPACK_IMPORTED_MODULE_0___default()('.dynamics-post');\n            $posts.each((_, el) => {\n                const $post = jquery__WEBPACK_IMPORTED_MODULE_0___default()(el);\n                const $name = $post.find('.dynamics-post-name');\n                const nameText = ($name.text() || '').trim();\n                if (!nameText)\n                    return;\n                if (names.includes(nameText)) {\n                    const $avatar = $post.find('.dynamics-post-avatar');\n                    if ($avatar.length && newAvatar) {\n                        $avatar.css('background-image', `url('${newAvatar}')`);\n                    }\n                    // 如果联系人改名，同步显示名\n                    if (oldName && newName && nameText === oldName) {\n                        $name.text(newName);\n                    }\n                }\n            });\n        }\n        catch (e) {\n            console.warn('[DynamicsRenderer] 同步动态头像失败:', e);\n        }\n    }\n    getDefaultDynamicsContent() {\n        return `\n      <div class=\"dynamics-empty\">\n        <div class=\"dynamics-empty-icon\">📭</div>\n        <div class=\"dynamics-empty-text\">暂无动态</div>\n        <div class=\"dynamics-empty-subtext\">快去发布第一条动态吧～</div>\n      </div>\n    `;\n    }\n    /**\n     * 渲染新建动态按钮\n     */\n    renderNewDynamicButton() {\n        // 检查是否已经存在按钮\n        if (jquery__WEBPACK_IMPORTED_MODULE_0___default()('.new-dynamic-btn').length > 0) {\n            return;\n        }\n        // 创建新建动态按钮\n        const $newDynamicBtn = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<button>', {\n            class: 'new-dynamic-btn',\n            html: `\n        <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line>\n          <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line>\n        </svg>\n      `,\n        });\n        // 添加到动态界面容器中\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#dynamicsInterface').append($newDynamicBtn);\n        // 绑定点击事件 - 触发切换到发布页面的事件\n        $newDynamicBtn.on('click', () => {\n            console.log('点击新建动态按钮');\n            // 播放click音效\n            if (this.soundManager?.playSound) {\n                this.soundManager.playSound('click');\n                console.log('✅ 播放新建动态按钮点击音效');\n            }\n            else {\n                console.warn('⚠️ soundManager 不可用，无法播放音效');\n            }\n            // 触发自定义事件，由manager处理页面切换\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()(window).trigger('dynamics:openComposer');\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZHluYW1pY3MvcmVuZGVyZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0dBSUc7QUFFb0I7QUFDMEM7QUFHMUQsTUFBTSxnQkFBZ0I7SUFDbkIsaUJBQWlCLENBQW9CO0lBQ3JDLGVBQWUsR0FBa0IsSUFBSSxDQUFDO0lBQ3RDLGNBQWMsR0FBa0IsSUFBSSxDQUFDLENBQUMsV0FBVztJQUNqRCxZQUFZLENBQU0sQ0FBQyxVQUFVO0lBRXJDLFlBQVksWUFBa0I7UUFDNUIsSUFBSSxDQUFDLGlCQUFpQixHQUFHLHlFQUFpQixDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ3pELElBQUksQ0FBQyxZQUFZLEdBQUcsWUFBWSxJQUFLLE1BQWMsQ0FBQyxZQUFZLENBQUM7UUFDakUsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7UUFDNUIsSUFBSSxDQUFDLHVCQUF1QixFQUFFLENBQUM7UUFDL0IsSUFBSSxDQUFDLHdCQUF3QixFQUFFLENBQUM7SUFDbEMsQ0FBQztJQUVEOztPQUVHO0lBQ0ssS0FBSyxDQUFDLHdCQUF3QjtRQUNwQyxJQUFJLENBQUM7WUFDSCxNQUFNLFdBQVcsR0FBRyxNQUFNLFlBQVksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1lBQ3pELElBQUksQ0FBQyxjQUFjLEdBQUcsQ0FBQyxXQUFXLElBQUksRUFBRSxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksSUFBSSxDQUFDO1lBQ3pELE9BQU8sQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUNoRCxDQUFDO1FBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNmLE9BQU8sQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQ25DLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDO1FBQzdCLENBQUM7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSyx5QkFB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QixDQUFDLENBQUM7WUFDN0MsQ0FBQztZQUVELHlCQUF5QjtZQUN6Qiw2Q0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO1FBQzdDLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztDQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy9keW5hbWljcy9yZW5kZXJlci50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiDliqjmgIHmuLLmn5PlmajmqKHlnZfvvIjkvJjljJbniYjvvIlcbiAqIOi0n+i0o+WKqOaAgeWGheWuueeahOa4suafk+WSjOagt+W8j+WkhOeQhlxuICog5L2/55SoalF1ZXJ56L+b6KGMRE9N5pON5L2cXG4gKi9cblxuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCB7IEdsb2JhbFVzZXJNYW5hZ2VyIH0gZnJvbSAnLi4vcHJvZmlsZS9HbG9iYWxVc2VyTWFuYWdlcic7XG5pbXBvcnQgeyBEeW5hbWljc0NvbW1lbnQsIER5bmFtaWNzRGF0YSwgRHluYW1pY3NQb3N0LCBEeW5hbWljc1JlbmRlckNvbmZpZyB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgRHluYW1pY3NSZW5kZXJlciB7XG4gIHByaXZhdGUgZ2xvYmFsVXNlck1hbmFnZXI6IEdsb2JhbFVzZXJNYW5hZ2VyO1xuICBwcml2YXRlIGN1cnJlbnRVc2VyTmFtZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgYWN0dWFsVXNlck5hbWU6IHN0cmluZyB8IG51bGwgPSBudWxsOyAvLyDlrZjlgqjlrp7pmYXnmoTnlKjmiLflkI1cbiAgcHJpdmF0ZSBzb3VuZE1hbmFnZXI6IGFueTsgLy8g6Z+z5pWI566h55CG5Zmo5byV55SoXG5cbiAgY29uc3RydWN0b3Ioc291bmRNYW5hZ2VyPzogYW55KSB7XG4gICAgdGhpcy5nbG9iYWxVc2VyTWFuYWdlciA9IEdsb2JhbFVzZXJNYW5hZ2VyLmdldEluc3RhbmNlKCk7XG4gICAgdGhpcy5zb3VuZE1hbmFnZXIgPSBzb3VuZE1hbmFnZXIgfHwgKHdpbmRvdyBhcyBhbnkpLnNvdW5kTWFuYWdlcjtcbiAgICB0aGlzLmluaXRpYWxpemVVc2VyQXZhdGFyKCk7XG4gICAgdGhpcy5zZXR1cFVzZXJBdmF0YXJMaXN0ZW5lcigpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZUFjdHVhbFVzZXJOYW1lKCk7XG4gIH1cblxuICAvKipcbiAgICog5Yid5aeL5YyW5a6e6ZmF55So5oi35ZCN77yI55So5LqO5pu/5o2iIFwidXNlclwiIOaYvuekuu+8iVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplQWN0dWFsVXNlck5hbWUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJOYW1lUmF3ID0gYXdhaXQgdHJpZ2dlclNsYXNoKCcvcGFzcyB7e3VzZXJ9fScpO1xuICAgICAgdGhpcy5hY3R1YWxVc2VyTmFtZSA9ICh1c2VyTmFtZVJhdyB8fCAnJykudHJpbSgpIHx8ICfnlKjmiLcnO1xuICAgICAgY29uc29sZS5sb2coJ/Cfk50g5a6e6ZmF55So5oi35ZCNOicsIHRoaXMuYWN0dWFsVXNlck5hbWUpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfojrflj5blrp7pmYXnlKjmiLflkI3lpLHotKU6JywgZXJyb3IpO1xuICAgICAgdGhpcy5hY3R1YWxVc2VyTmFtZSA9ICfnlKjmiLcnO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlsIYgXCJ1c2VyXCIg5pu/5o2i5Li65a6e6ZmF55So5oi35ZCNXG4gICAqL1xuICBwcml2YXRlIHJlcGxhY2VVc2VyV2l0aEFjdHVhbE5hbWUobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAobmFtZSA9PT0gJ3VzZXInICYmIHRoaXMuYWN0dWFsVXNlck5hbWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmFjdHVhbFVzZXJOYW1lO1xuICAgIH1cbiAgICAvLyDlpITnkIblm57lpI3moLzlvI8gXCJ1c2VyQOafkOS6ulwiXG4gICAgaWYgKG5hbWUuc3RhcnRzV2l0aCgndXNlckAnKSAmJiB0aGlzLmFjdHVhbFVzZXJOYW1lKSB7XG4gICAgICByZXR1cm4gbmFtZS5yZXBsYWNlKCd1c2VyJywgdGhpcy5hY3R1YWxVc2VyTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBuYW1lO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIneWni+WMlueUqOaIt+WktOWDj1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplVXNlckF2YXRhcigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlckRhdGEgPSBhd2FpdCB0aGlzLmdsb2JhbFVzZXJNYW5hZ2VyLmxvYWRVc2VyRGF0YSgpO1xuICAgICAgY29uc3QgJG5hdlByb2ZpbGUgPSAkKCcuZHluYW1pY3MtbmF2LXByb2ZpbGUnKTtcblxuICAgICAgaWYgKCRuYXZQcm9maWxlLmxlbmd0aCAmJiB1c2VyRGF0YS5hdmF0YXIpIHtcbiAgICAgICAgJG5hdlByb2ZpbGUuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgYHVybCgnJHt1c2VyRGF0YS5hdmF0YXJ9JylgKTtcbiAgICAgIH1cbiAgICAgIC8vIOiusOW9leW9k+WJjeeUqOaIt+WQje+8jOeUqOS6jueCuei1nuaMiemSruKAnOW3sueCuei1nuKAneagt+W8j+aBouWkjVxuICAgICAgaWYgKHVzZXJEYXRhPy5uYW1lKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFVzZXJOYW1lID0gdXNlckRhdGEubmFtZTtcbiAgICAgICAgdGhpcy51cGRhdGVMaWtlQnV0dG9uc1N0YXRlKCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+WIneWni+WMluWKqOaAgemhtemdoueUqOaIt+WktOWDj+Wksei0pTonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOiuvue9rueUqOaIt+WktOWDj+WPmOabtOebkeWQrOWZqFxuICAgKi9cbiAgcHJpdmF0ZSBzZXR1cFVzZXJBdmF0YXJMaXN0ZW5lcigpOiB2b2lkIHtcbiAgICAvLyDnm5HlkKzlpLTlg4/lj5jmm7Tkuovku7ZcbiAgICB0aGlzLmdsb2JhbFVzZXJNYW5hZ2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2F2YXRhcicsIGV2ZW50ID0+IHtcbiAgICAgIGNvbnN0ICRuYXZQcm9maWxlID0gJCgnLmR5bmFtaWNzLW5hdi1wcm9maWxlJyk7XG4gICAgICBpZiAoJG5hdlByb2ZpbGUubGVuZ3RoICYmIGV2ZW50Lm5ld1ZhbHVlKSB7XG4gICAgICAgICRuYXZQcm9maWxlLmNzcygnYmFja2dyb3VuZC1pbWFnZScsIGB1cmwoJyR7ZXZlbnQubmV3VmFsdWV9JylgKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIOebkeWQrOaJgOacieWPmOabtO+8iOWMheaLrOmHjee9ruS4uum7mOiupO+8iVxuICAgIHRoaXMuZ2xvYmFsVXNlck1hbmFnZXIuYWRkRXZlbnRMaXN0ZW5lcignYWxsJywgYXN5bmMgZXZlbnQgPT4ge1xuICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdhdmF0YXInIHx8IGV2ZW50LnR5cGUgPT09ICduYW1lJykge1xuICAgICAgICAvLyDph43mlrDliqDovb3nlKjmiLfmlbDmja5cbiAgICAgICAgY29uc3QgdXNlckRhdGEgPSB0aGlzLmdsb2JhbFVzZXJNYW5hZ2VyLmdldEN1cnJlbnRVc2VyRGF0YSgpO1xuICAgICAgICBpZiAodXNlckRhdGEpIHtcbiAgICAgICAgICBjb25zdCAkbmF2UHJvZmlsZSA9ICQoJy5keW5hbWljcy1uYXYtcHJvZmlsZScpO1xuICAgICAgICAgIGlmICgkbmF2UHJvZmlsZS5sZW5ndGggJiYgdXNlckRhdGEuYXZhdGFyKSB7XG4gICAgICAgICAgICAkbmF2UHJvZmlsZS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCBgdXJsKCcke3VzZXJEYXRhLmF2YXRhcn0nKWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodXNlckRhdGEubmFtZSkge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50VXNlck5hbWUgPSB1c2VyRGF0YS5uYW1lO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVMaWtlQnV0dG9uc1N0YXRlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIOa4suafk+WKqOaAgeWGheWuueWIsOaMh+WumueahERPTeWFg+e0oFxuICAgKiBAcGFyYW0gZHluYW1pY3NEYXRhIOWKqOaAgeaVsOaNrlxuICAgKiBAcGFyYW0gY29uZmlnIOa4suafk+mFjee9rlxuICAgKi9cbiAgcHVibGljIHJlbmRlckR5bmFtaWNzQ29udGVudChkeW5hbWljc0RhdGE6IER5bmFtaWNzRGF0YSB8IG51bGwsIGNvbmZpZzogRHluYW1pY3NSZW5kZXJDb25maWcpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygn8J+TsSDmuLLmn5PliqjmgIHlhoXlrrkuLi4nKTtcblxuICAgIGNvbnN0ICR0aW1lbGluZSA9ICQoJyNkeW5hbWljc1RpbWVsaW5lJyk7XG4gICAgY29uc3QgJHN0YXR1c1RpbWUgPSAkKCcjZHluYW1pY3NTdGF0dXNUaW1lJyk7XG5cbiAgICBjb25zb2xlLmxvZygn8J+TiyDliqjmgIHlhYPntKDmo4Dmn6U6Jywge1xuICAgICAgdGltZWxpbmVFbGVtZW50OiAkdGltZWxpbmUubGVuZ3RoID4gMCxcbiAgICAgIHN0YXR1c1RpbWVFbGVtZW50OiAkc3RhdHVzVGltZS5sZW5ndGggPiAwLFxuICAgIH0pO1xuXG4gICAgLy8g54q25oCB5qCP5pe26Ze055SxRHluYW1pY3NNYW5hZ2Vy55qE5a6a5pe25Zmo6LSf6LSj5pu05paw77yM6L+Z6YeM5LiN5YaN5aSE55CGXG5cbiAgICBpZiAoJHRpbWVsaW5lLmxlbmd0aCkge1xuICAgICAgaWYgKGR5bmFtaWNzRGF0YSAmJiAhY29uZmlnLnVzZURlZmF1bHRDb250ZW50KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5OxIOS9v+eUqOino+aekOeahOWKqOaAgeaVsOaNrjonLCBkeW5hbWljc0RhdGEpO1xuICAgICAgICAkdGltZWxpbmUuaHRtbCh0aGlzLnJlbmRlclBvc3RzKGR5bmFtaWNzRGF0YS5wb3N0cykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfk7Eg5L2/55So6buY6K6k5Yqo5oCB5YaF5a65Jyk7XG4gICAgICAgICR0aW1lbGluZS5odG1sKHRoaXMuZ2V0RGVmYXVsdER5bmFtaWNzQ29udGVudCgpKTtcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSDpu5jorqTliqjmgIHlhoXlrrnlt7Lorr7nva4nKTtcbiAgICAgIH1cblxuICAgICAgLy8g5re75Yqg5Yqo55S75pWI5p6cXG4gICAgICBpZiAoY29uZmlnLmVuYWJsZUFuaW1hdGlvbnMpIHtcbiAgICAgICAgdGhpcy5hZGRBbmltYXRpb25zKCR0aW1lbGluZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8g5re75Yqg5paw5bu65Yqo5oCB5oyJ6ZKuXG4gICAgdGhpcy5yZW5kZXJOZXdEeW5hbWljQnV0dG9uKCk7XG5cbiAgICAvLyDliJ3lp4vljJbnlKjmiLflpLTlg4/vvIjmr4/mrKHmuLLmn5Pml7bmm7TmlrDvvIlcbiAgICB0aGlzLmluaXRpYWxpemVVc2VyQXZhdGFyKCk7XG5cbiAgICBjb25zb2xlLmxvZygn4pyFIOWKqOaAgeWGheWuuea4suafk+WujOaIkCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIOa4suafk+W4luWtkOWIl+ihqFxuICAgKiBAcGFyYW0gcG9zdHMg5biW5a2Q5pWw57uEXG4gICAqIEByZXR1cm5zIOa4suafk+WQjueahEhUTUzlrZfnrKbkuLJcbiAgICovXG4gIHByaXZhdGUgcmVuZGVyUG9zdHMocG9zdHM6IER5bmFtaWNzUG9zdFtdKTogc3RyaW5nIHtcbiAgICByZXR1cm4gcG9zdHMubWFwKHBvc3QgPT4gdGhpcy5yZW5kZXJQb3N0KHBvc3QpKS5qb2luKCcnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmuLLmn5PljZXkuKrluJblrZBcbiAgICogQHBhcmFtIHBvc3Qg5biW5a2Q5pWw5o2uXG4gICAqIEByZXR1cm5zIOa4suafk+WQjueahEhUTUzlrZfnrKbkuLJcbiAgICovXG4gIHByaXZhdGUgcmVuZGVyUG9zdChwb3N0OiBEeW5hbWljc1Bvc3QpOiBzdHJpbmcge1xuICAgIGNvbnN0ICRwb3N0ID0gJCgnPGRpdj4nLCB7IGNsYXNzOiAnZHluYW1pY3MtcG9zdCcsICdkYXRhLXBvc3QtaWQnOiBwb3N0LmlkIH0pO1xuXG4gICAgLy8g5aaC5p6c5biW5a2Q5pyJIG1lc3NhZ2VJZO+8jOa3u+WKoOWIsOWFg+e0oOWxnuaAp+S4re+8iOeUqOS6jui3qOalvOWxguivhOiuuu+8iVxuICAgIGlmICgocG9zdCBhcyBhbnkpLm1lc3NhZ2VJZCAhPT0gdW5kZWZpbmVkICYmIChwb3N0IGFzIGFueSkubWVzc2FnZUlkICE9PSBudWxsKSB7XG4gICAgICAkcG9zdC5hdHRyKCdkYXRhLW1lc3NhZ2UtaWQnLCBTdHJpbmcoKHBvc3QgYXMgYW55KS5tZXNzYWdlSWQpKTtcbiAgICB9XG5cbiAgICAvLyDluJblrZDlpLTpg6hcbiAgICBjb25zdCAkaGVhZGVyID0gJCgnPGRpdj4nLCB7IGNsYXNzOiAnZHluYW1pY3MtcG9zdC1oZWFkZXInIH0pO1xuICAgIC8vIOWmguaenOaYryB1c2Vy77yM5L2/55So5b2T5YmN55So5oi355qE5aS05YOPXG4gICAgbGV0IGF2YXRhclVybCA9IHBvc3QuYXV0aG9yLmF2YXRhciB8fCAnJztcbiAgICBpZiAocG9zdC5hdXRob3IubmFtZSA9PT0gJ3VzZXInKSB7XG4gICAgICBjb25zdCB1c2VyRGF0YSA9IHRoaXMuZ2xvYmFsVXNlck1hbmFnZXIuZ2V0Q3VycmVudFVzZXJEYXRhKCk7XG4gICAgICBpZiAodXNlckRhdGE/LmF2YXRhcikge1xuICAgICAgICBhdmF0YXJVcmwgPSB1c2VyRGF0YS5hdmF0YXI7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0ICRhdmF0YXIgPSAkKCc8ZGl2PicsIHtcbiAgICAgIGNsYXNzOiAnZHluYW1pY3MtcG9zdC1hdmF0YXInLFxuICAgICAgY3NzOiB7IGJhY2tncm91bmRJbWFnZTogYHVybCgnJHthdmF0YXJVcmx9JylgIH0sXG4gICAgfSk7XG5cbiAgICBjb25zdCAkaW5mbyA9ICQoJzxkaXY+JywgeyBjbGFzczogJ2R5bmFtaWNzLXBvc3QtaW5mbycgfSk7XG4gICAgLy8g5pu/5o2iIFwidXNlclwiIOS4uuWunumZheeUqOaIt+WQjVxuICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gdGhpcy5yZXBsYWNlVXNlcldpdGhBY3R1YWxOYW1lKHBvc3QuYXV0aG9yLm5hbWUpO1xuICAgICRpbmZvLmFwcGVuZChcbiAgICAgICQoJzxkaXY+JywgeyBjbGFzczogJ2R5bmFtaWNzLXBvc3QtbmFtZScsIHRleHQ6IGRpc3BsYXlOYW1lIH0pLFxuICAgICAgLy8g5pS55Li65pi+56S65pe26Ze06ICM5LiN5pivdXNlcm5hbWVcbiAgICAgICQoJzxkaXY+JywgeyBjbGFzczogJ2R5bmFtaWNzLXBvc3QtdGltZScsIHRleHQ6IHRoaXMuZm9ybWF0UmVsYXRpdmVUaW1lKHBvc3QudGltZXN0YW1wKSB9KSxcbiAgICApO1xuXG4gICAgJGhlYWRlci5hcHBlbmQoJGF2YXRhciwgJGluZm8pO1xuXG4gICAgLy8g5biW5a2Q5YaF5a65XG4gICAgY29uc3QgJGNvbnRlbnQgPSAkKCc8ZGl2PicsIHtcbiAgICAgIGNsYXNzOiAnZHluYW1pY3MtcG9zdC1jb250ZW50JyxcbiAgICAgIGh0bWw6IHRoaXMuZm9ybWF0Q29udGVudChwb3N0LmNvbnRlbnQpLFxuICAgIH0pO1xuXG4gICAgLy8g5biW5a2Q5Zu+54mH77yI5aaC5p6c5pyJ77yJXG4gICAgbGV0ICRpbWFnZTogSlF1ZXJ5IHwgbnVsbCA9IG51bGw7XG4gICAgaWYgKHBvc3QuaW1hZ2UpIHtcbiAgICAgICRpbWFnZSA9ICQoJzxkaXY+Jywge1xuICAgICAgICBjbGFzczogJ2R5bmFtaWNzLXBvc3QtaW1hZ2UnLFxuICAgICAgICBjc3M6IHsgYmFja2dyb3VuZEltYWdlOiBgdXJsKCcke3Bvc3QuaW1hZ2V9JylgIH0sXG4gICAgICAgICdkYXRhLWRlc2NyaXB0aW9uJzogcG9zdC5pbWFnZURlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8g5biW5a2Q5pON5L2c5qCPIC0g5Y+q5pi+56S654K56LWe5ZKM6K+E6K665Zu+5qCHXG4gICAgY29uc3QgJGFjdGlvbnMgPSAkKCc8ZGl2PicsIHsgY2xhc3M6ICdkeW5hbWljcy1wb3N0LWFjdGlvbnMnIH0pO1xuICAgIC8vIOS9v+eUqFNWR+Wbvuagh1xuICAgIGNvbnN0IGxpa2VJY29uID1cbiAgICAgICc8c3ZnIGNsYXNzPVwiYWN0aW9uLXN2Z1wiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj48cGF0aCBkPVwiTTEyIDIxLjM1bC0xLjQ1LTEuMzJDNS40IDE1LjM2IDIgMTIuMjggMiA4LjUgMiA1LjQyIDQuNDIgMyA3LjUgM2MxLjc0IDAgMy40MS44MSA0LjUgMi4wOUMxMy4wOSAzLjgxIDE0Ljc2IDMgMTYuNSAzIDE5LjU4IDMgMjIgNS40MiAyMiA4LjVjMCAzLjc4LTMuNCA2Ljg2LTguNTUgMTEuNTRMMTIgMjEuMzV6XCIvPjwvc3ZnPic7XG4gICAgY29uc3QgY29tbWVudEljb24gPVxuICAgICAgJzxzdmcgY2xhc3M9XCJhY3Rpb24tc3ZnXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPjxwYXRoIGQ9XCJNMjAgMkg0Yy0xLjEgMC0yIC45LTIgMnYxMmMwIDEuMS45IDIgMiAyaDE0bDQgNFY0YzAtMS4xLS45LTItMi0yem0tMiAxMkg2di0yaDEydjJ6bTAtM0g2VjloMTJ2MnptMC0zSDZWNmgxMnYyelwiLz48L3N2Zz4nO1xuXG4gICAgY29uc3QgJGxpa2UgPSB0aGlzLmNyZWF0ZUFjdGlvbignbGlrZScsIGxpa2VJY29uLCBwb3N0LmFjdGlvbnMubGlrZXMpO1xuICAgIGlmICh0aGlzLmlzUG9zdExpa2VkQnlDdXJyZW50VXNlcihwb3N0KSkge1xuICAgICAgJGxpa2UuYWRkQ2xhc3MoJ2xpa2VkJyk7XG4gICAgfVxuICAgIGNvbnN0ICRjb21tZW50ID0gdGhpcy5jcmVhdGVBY3Rpb24oJ2NvbW1lbnQnLCBjb21tZW50SWNvbiwgcG9zdC5jb21tZW50cyA/IHBvc3QuY29tbWVudHMubGVuZ3RoIDogMCk7XG4gICAgJGFjdGlvbnMuYXBwZW5kKCRsaWtlLCAkY29tbWVudCk7XG5cbiAgICAvLyDngrnotZ7ogIXmmL7npLrljLrln5/vvIjnp7vliLDmk43kvZzmoI/kuIvmlrnvvIlcbiAgICBsZXQgJGxpa2VkQnk6IEpRdWVyeSB8IG51bGwgPSBudWxsO1xuICAgIGlmIChwb3N0Lmxpa2VkQnkgJiYgcG9zdC5saWtlZEJ5Lmxlbmd0aCA+IDApIHtcbiAgICAgICRsaWtlZEJ5ID0gJCgnPGRpdj4nLCB7IGNsYXNzOiAnZHluYW1pY3MtbGlrZWQtYnknIH0pO1xuICAgICAgY29uc3QgaGVhcnRJY29uID1cbiAgICAgICAgJzxzdmcgY2xhc3M9XCJsaWtlZC1oZWFydC1pY29uXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPjxwYXRoIGQ9XCJNMTIgMjEuMzVsLTEuNDUtMS4zMkM1LjQgMTUuMzYgMiAxMi4yOCAyIDguNSAyIDUuNDIgNC40MiAzIDcuNSAzYzEuNzQgMCAzLjQxLjgxIDQuNSAyLjA5QzEzLjA5IDMuODEgMTQuNzYgMyAxNi41IDMgMTkuNTggMyAyMiA1LjQyIDIyIDguNWMwIDMuNzgtMy40IDYuODYtOC41NSAxMS41NEwxMiAyMS4zNXpcIi8+PC9zdmc+JztcbiAgICAgICRsaWtlZEJ5Lmh0bWwoaGVhcnRJY29uKTtcbiAgICAgICRsaWtlZEJ5LmFwcGVuZChcbiAgICAgICAgcG9zdC5saWtlZEJ5XG4gICAgICAgICAgLm1hcCh1c2VyID0+IHtcbiAgICAgICAgICAgIC8vIOabv+aNoiBcInVzZXJcIiDkuLrlrp7pmYXnlKjmiLflkI1cbiAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gdGhpcy5yZXBsYWNlVXNlcldpdGhBY3R1YWxOYW1lKHVzZXIubmFtZSB8fCB1c2VyLnVzZXJuYW1lIHx8ICcnKTtcbiAgICAgICAgICAgIHJldHVybiAkKCc8c3Bhbj4nLCB7IGNsYXNzOiAnbGlrZWQtdXNlcicsIHRleHQ6IGRpc3BsYXlOYW1lIH0pO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnJlZHVjZSgocHJldiwgY3VyciwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmIChpbmRleCA+IDApIHByZXYucHVzaCgkKCc8c3Bhbj4nLCB7IHRleHQ6ICfjgIEnIH0pKTtcbiAgICAgICAgICAgIHByZXYucHVzaChjdXJyKTtcbiAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgIH0sIFtdIGFzIEpRdWVyeVtdKSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8g6K+E6K665Yy677yI5aaC5p6c5pyJ77yJXG4gICAgbGV0ICRjb21tZW50czogSlF1ZXJ5IHwgbnVsbCA9IG51bGw7XG4gICAgaWYgKHBvc3QuY29tbWVudHMgJiYgcG9zdC5jb21tZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAkY29tbWVudHMgPSAkKCc8ZGl2PicsIHsgY2xhc3M6ICdkeW5hbWljcy1jb21tZW50cycgfSk7XG4gICAgICBwb3N0LmNvbW1lbnRzLmZvckVhY2goY29tbWVudCA9PiB7XG4gICAgICAgICRjb21tZW50cyEuYXBwZW5kKHRoaXMucmVuZGVyQ29tbWVudChjb21tZW50KSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyDnu4Too4XluJblrZBcbiAgICAkcG9zdC5hcHBlbmQoJGhlYWRlciwgJGNvbnRlbnQpO1xuICAgIGlmICgkaW1hZ2UpICRwb3N0LmFwcGVuZCgkaW1hZ2UpO1xuICAgICRwb3N0LmFwcGVuZCgkYWN0aW9ucyk7IC8vIOaTjeS9nOagj1xuICAgIGlmICgkbGlrZWRCeSkgJHBvc3QuYXBwZW5kKCRsaWtlZEJ5KTsgLy8g54K56LWe6ICF5pi+56S65Zyo5pON5L2c5qCP5LiL5pa5XG4gICAgaWYgKCRjb21tZW50cykgJHBvc3QuYXBwZW5kKCRjb21tZW50cyk7XG5cbiAgICByZXR1cm4gJHBvc3QucHJvcCgnb3V0ZXJIVE1MJykgfHwgJyc7XG4gIH1cblxuICAvKipcbiAgICog5Yib5bu65pON5L2c5oyJ6ZKuIC0g5Y+q5pi+56S65Zu+5qCH77yM5LiN5pi+56S65Lu75L2V5pWw6YePXG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZUFjdGlvbih0eXBlOiBzdHJpbmcsIGljb246IHN0cmluZywgY291bnQ6IG51bWJlcik6IEpRdWVyeSB7XG4gICAgY29uc3QgJGFjdGlvbiA9ICQoJzxkaXY+Jywge1xuICAgICAgY2xhc3M6ICdkeW5hbWljcy1wb3N0LWFjdGlvbicsXG4gICAgICAnZGF0YS1hY3Rpb24nOiB0eXBlLFxuICAgIH0pO1xuXG4gICAgLy8g5Y+q5pi+56S65Zu+5qCH77yM5a6M5YWo5LiN5pi+56S65pWw6YePXG4gICAgY29uc3QgaHRtbCA9IGA8c3BhbiBjbGFzcz1cImFjdGlvbi1pY29uXCI+JHtpY29ufTwvc3Bhbj5gO1xuXG4gICAgJGFjdGlvbi5odG1sKGh0bWwpO1xuICAgIHJldHVybiAkYWN0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIOagvOW8j+WMluebuOWvueaXtumXtCAtIFFR56m66Ze0L+aci+WPi+WciOmjjuagvFxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRSZWxhdGl2ZVRpbWUodGltZXN0YW1wOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIOWFvOWuueino+aekCBcIllZWVktTU0tREQgSEg6bW1cIiAvIElTTyAvIOWFtuS7luWPr+iiqyBEYXRlIOino+aekOeahOWtl+espuS4slxuICAgIGxldCBwb3N0VGltZTogRGF0ZSB8IG51bGwgPSBudWxsO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0cyA9IHR5cGVvZiB0aW1lc3RhbXAgPT09ICdzdHJpbmcnID8gdGltZXN0YW1wLnRyaW0oKSA6ICcnO1xuICAgICAgaWYgKCF0cykgcmV0dXJuICfmnKrnn6Xml7bpl7QnO1xuXG4gICAgICAvLyDmmI7noa7moLzlvI/vvJpZWVlZLU1NLUREIEhIOm1tXG4gICAgICBjb25zdCB5bWRobSA9IHRzLm1hdGNoKC9eKFxcZHs0fSktKFxcZHsyfSktKFxcZHsyfSlbIFRdKFxcZHsyfSk6KFxcZHsyfSkkLyk7XG4gICAgICBpZiAoeW1kaG0pIHtcbiAgICAgICAgY29uc3QgWywgeSwgbSwgZCwgaGgsIG1tXSA9IHltZGhtO1xuICAgICAgICBwb3N0VGltZSA9IG5ldyBEYXRlKFxuICAgICAgICAgIHBhcnNlSW50KHksIDEwKSxcbiAgICAgICAgICBwYXJzZUludChtLCAxMCkgLSAxLFxuICAgICAgICAgIHBhcnNlSW50KGQsIDEwKSxcbiAgICAgICAgICBwYXJzZUludChoaCwgMTApLFxuICAgICAgICAgIHBhcnNlSW50KG1tLCAxMCksXG4gICAgICAgICAgMCxcbiAgICAgICAgICAwLFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmICgvXlxcZHs0fS1cXGR7Mn0tXFxkezJ9VFxcZHsyfTpcXGR7Mn0vLnRlc3QodHMpKSB7XG4gICAgICAgIC8vIElTTy1saWtl77yM5Lqk57uZIERhdGUg5aSE55CGXG4gICAgICAgIGNvbnN0IGQgPSBuZXcgRGF0ZSh0cyk7XG4gICAgICAgIGlmICghaXNOYU4oZC5nZXRUaW1lKCkpKSBwb3N0VGltZSA9IGQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyDlhZzlupXvvJrlsJ3or5Xljp/nlJ/op6PmnpBcbiAgICAgICAgY29uc3QgZCA9IG5ldyBEYXRlKHRzKTtcbiAgICAgICAgaWYgKCFpc05hTihkLmdldFRpbWUoKSkpIHBvc3RUaW1lID0gZDtcbiAgICAgIH1cblxuICAgICAgaWYgKCFwb3N0VGltZSkgcmV0dXJuICfmnKrnn6Xml7bpl7QnO1xuXG4gICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgY29uc3QgZGlmZiA9IG5vdy5nZXRUaW1lKCkgLSBwb3N0VGltZS5nZXRUaW1lKCk7XG5cbiAgICAgIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKGRpZmYgLyA2MDAwMCk7XG4gICAgICBjb25zdCBob3VycyA9IE1hdGguZmxvb3IoZGlmZiAvIDM2MDAwMDApO1xuICAgICAgY29uc3QgZGF5cyA9IE1hdGguZmxvb3IoZGlmZiAvIDg2NDAwMDAwKTtcblxuICAgICAgaWYgKG1pbnV0ZXMgPCAxKSByZXR1cm4gJ+WImuWImic7XG4gICAgICBpZiAobWludXRlcyA8IDYwKSByZXR1cm4gYCR7bWludXRlc33liIbpkp/liY1gO1xuICAgICAgaWYgKGhvdXJzIDwgMjQpIHJldHVybiBgJHtob3Vyc33lsI/ml7bliY1gO1xuICAgICAgaWYgKGRheXMgPCAyKSByZXR1cm4gJ+aYqOWkqSc7XG4gICAgICBpZiAoZGF5cyA8IDcpIHJldHVybiBgJHtkYXlzfeWkqeWJjWA7XG5cbiAgICAgIC8vIOi2hei/hzflpKnmmL7npLrlhbfkvZPml6XmnJ9cbiAgICAgIGNvbnN0IG1vbnRoID0gcG9zdFRpbWUuZ2V0TW9udGgoKSArIDE7XG4gICAgICBjb25zdCBkYXkgPSBwb3N0VGltZS5nZXREYXRlKCk7XG4gICAgICBjb25zdCBjdXJyZW50WWVhciA9IG5vdy5nZXRGdWxsWWVhcigpO1xuICAgICAgY29uc3QgcG9zdFllYXIgPSBwb3N0VGltZS5nZXRGdWxsWWVhcigpO1xuXG4gICAgICBpZiAoY3VycmVudFllYXIgPT09IHBvc3RZZWFyKSB7XG4gICAgICAgIHJldHVybiBgJHttb250aH3mnIgke2RheX3ml6VgO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGAke3Bvc3RZZWFyfeW5tCR7bW9udGh95pyIJHtkYXl95pelYDtcbiAgICAgIH1cbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiAn5pyq55+l5pe26Ze0JztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5qC85byP5YyW5YaF5a655paH5pysXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdENvbnRlbnQoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBsZXQgZm9ybWF0dGVkQ29udGVudCA9IGNvbnRlbnQ7XG5cbiAgICAvLyDlpITnkIbpk77mjqVcbiAgICBmb3JtYXR0ZWRDb250ZW50ID0gZm9ybWF0dGVkQ29udGVudC5yZXBsYWNlKFxuICAgICAgL2h0dHBzPzpcXC9cXC9bXlxcc10rL2csXG4gICAgICB1cmwgPT4gYDxhIGhyZWY9XCIke3VybH1cIiB0YXJnZXQ9XCJfYmxhbmtcIiBjbGFzcz1cImR5bmFtaWNzLWxpbmtcIj4ke3VybH08L2E+YCxcbiAgICApO1xuXG4gICAgLy8g5aSE55CGQOaPkOWPilxuICAgIGZvcm1hdHRlZENvbnRlbnQgPSBmb3JtYXR0ZWRDb250ZW50LnJlcGxhY2UoL0AoXFx3KykvZywgJzxzcGFuIGNsYXNzPVwiZHluYW1pY3MtbWVudGlvblwiPkAkMTwvc3Bhbj4nKTtcblxuICAgIC8vIOWkhOeQhuivnemimOagh+etvlxuICAgIGZvcm1hdHRlZENvbnRlbnQgPSBmb3JtYXR0ZWRDb250ZW50LnJlcGxhY2UoLyMoW15cXHNdKykvZywgJzxzcGFuIGNsYXNzPVwiZHluYW1pY3MtaGFzaHRhZ1wiPiMkMTwvc3Bhbj4nKTtcblxuICAgIHJldHVybiBmb3JtYXR0ZWRDb250ZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIOa4suafk+ivhOiuuiAtIFFR56m66Ze0L+aci+WPi+WciOmjjuagvFxuICAgKiBAcGFyYW0gY29tbWVudCDor4TorrrmlbDmja5cbiAgICogQHJldHVybnMg5riy5p+T5ZCO55qESFRNTOWtl+espuS4slxuICAgKi9cbiAgcHJpdmF0ZSByZW5kZXJDb21tZW50KGNvbW1lbnQ6IER5bmFtaWNzQ29tbWVudCk6IHN0cmluZyB7XG4gICAgLy8gUVHnqbrpl7Tpo47moLzvvJrmm7TntKflh5HnmoTor4TorrrluIPlsYBcbiAgICBjb25zdCAkY29tbWVudCA9ICQoJzxkaXY+JywgeyBjbGFzczogJ2R5bmFtaWNzLWNvbW1lbnQgZHluYW1pY3MtY29tbWVudC1xcScgfSk7XG5cbiAgICAvLyBRUeepuumXtOivhOiuuuagvOW8j++8muWQjeWtl++8muWGheWuuVxuICAgIGNvbnN0ICRjb250ZW50ID0gJCgnPGRpdj4nLCB7IGNsYXNzOiAnZHluYW1pY3MtY29tbWVudC1jb250ZW50JyB9KTtcblxuICAgIC8vIOabv+aNoiBcInVzZXJcIiDkuLrlrp7pmYXnlKjmiLflkI1cbiAgICBjb25zdCBhdXRob3JOYW1lID0gdGhpcy5yZXBsYWNlVXNlcldpdGhBY3R1YWxOYW1lKGNvbW1lbnQuYXV0aG9yLm5hbWUpO1xuXG4gICAgLy8g5qOA5p+l5piv5ZCm5piv5Zue5aSN5qC85byP77yI5YyF5ZCrXCLlm57lpI1cIuWFs+mUruWtl++8iVxuICAgIGNvbnN0IGlzUmVwbHkgPSBhdXRob3JOYW1lLmluY2x1ZGVzKCcg5Zue5aSNICcpO1xuXG4gICAgaWYgKGlzUmVwbHkpIHtcbiAgICAgIC8vIOino+aekOWbnuWkjeagvOW8j++8mlwiQSDlm57lpI0gQlwi77yM5Lik6YOo5YiG6YO95Y+v6IO96ZyA6KaB5pu/5o2iIFwidXNlclwiXG4gICAgICBjb25zdCBwYXJ0cyA9IGF1dGhvck5hbWUuc3BsaXQoJyDlm57lpI0gJyk7XG4gICAgICBpZiAocGFydHMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIC8vIOesrOS4gOmDqOWIhu+8iOivhOiuuuiAhe+8ieWPr+iDveaYryBcInVzZXJcIlxuICAgICAgICBjb25zdCBjb21tZW50ZXJOYW1lID0gdGhpcy5yZXBsYWNlVXNlcldpdGhBY3R1YWxOYW1lKHBhcnRzWzBdKTtcbiAgICAgICAgLy8g56ys5LqM6YOo5YiG77yI6KKr5Zue5aSN6ICF77yJ5LiA6Iis5LiN5pivIFwidXNlclwi77yM5L2G5Lul6Ziy5LiH5LiA5Lmf5aSE55CGXG4gICAgICAgIGNvbnN0IHJlcGx5VG9OYW1lID0gdGhpcy5yZXBsYWNlVXNlcldpdGhBY3R1YWxOYW1lKHBhcnRzWzFdKTtcblxuICAgICAgICAkY29udGVudC5hcHBlbmQoXG4gICAgICAgICAgJCgnPHNwYW4+Jywge1xuICAgICAgICAgICAgY2xhc3M6ICdkeW5hbWljcy1jb21tZW50LW5hbWUnLFxuICAgICAgICAgICAgdGV4dDogY29tbWVudGVyTmFtZSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgICAkKCc8c3Bhbj4nLCB7XG4gICAgICAgICAgICB0ZXh0OiAnIOWbnuWkjSAnLFxuICAgICAgICAgICAgY2xhc3M6ICdkeW5hbWljcy1jb21tZW50LXJlcGx5LWluZGljYXRvcicsXG4gICAgICAgICAgfSksXG4gICAgICAgICAgJCgnPHNwYW4+Jywge1xuICAgICAgICAgICAgY2xhc3M6ICdkeW5hbWljcy1jb21tZW50LW5hbWUgZHluYW1pY3MtY29tbWVudC1yZXBseS10YXJnZXQnLFxuICAgICAgICAgICAgdGV4dDogcmVwbHlUb05hbWUsXG4gICAgICAgICAgfSksXG4gICAgICAgICAgJCgnPHNwYW4+JywgeyB0ZXh0OiAn77yaJyB9KSxcbiAgICAgICAgICAkKCc8c3Bhbj4nLCB7XG4gICAgICAgICAgICBjbGFzczogJ2R5bmFtaWNzLWNvbW1lbnQtdGV4dCcsXG4gICAgICAgICAgICBodG1sOiB0aGlzLmZvcm1hdENvbnRlbnQoY29tbWVudC5jb250ZW50KSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOagvOW8j+S4jeato+ehru+8jOaMieaZrumAmuivhOiuuuWkhOeQhlxuICAgICAgICAkY29udGVudC5hcHBlbmQoXG4gICAgICAgICAgJCgnPHNwYW4+Jywge1xuICAgICAgICAgICAgY2xhc3M6ICdkeW5hbWljcy1jb21tZW50LW5hbWUnLFxuICAgICAgICAgICAgdGV4dDogYXV0aG9yTmFtZSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgICAkKCc8c3Bhbj4nLCB7IHRleHQ6ICfvvJonIH0pLFxuICAgICAgICAgICQoJzxzcGFuPicsIHtcbiAgICAgICAgICAgIGNsYXNzOiAnZHluYW1pY3MtY29tbWVudC10ZXh0JyxcbiAgICAgICAgICAgIGh0bWw6IHRoaXMuZm9ybWF0Q29udGVudChjb21tZW50LmNvbnRlbnQpLFxuICAgICAgICAgIH0pLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyDmma7pgJror4TorrpcbiAgICAgICRjb250ZW50LmFwcGVuZChcbiAgICAgICAgJCgnPHNwYW4+Jywge1xuICAgICAgICAgIGNsYXNzOiAnZHluYW1pY3MtY29tbWVudC1uYW1lJyxcbiAgICAgICAgICB0ZXh0OiBhdXRob3JOYW1lLFxuICAgICAgICB9KSxcbiAgICAgICAgJCgnPHNwYW4+JywgeyB0ZXh0OiAn77yaJyB9KSxcbiAgICAgICAgJCgnPHNwYW4+Jywge1xuICAgICAgICAgIGNsYXNzOiAnZHluYW1pY3MtY29tbWVudC10ZXh0JyxcbiAgICAgICAgICBodG1sOiB0aGlzLmZvcm1hdENvbnRlbnQoY29tbWVudC5jb250ZW50KSxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIOS4jeWGjeaYvuekuuivhOiuuuaXtumXtFxuXG4gICAgJGNvbW1lbnQuYXBwZW5kKCRjb250ZW50KTtcblxuICAgIHJldHVybiAkY29tbWVudC5wcm9wKCdvdXRlckhUTUwnKSB8fCAnJztcbiAgfVxuXG4gIC8qKlxuICAgKiDmt7vliqDliqjnlLvmlYjmnpxcbiAgICovXG4gIHByaXZhdGUgYWRkQW5pbWF0aW9ucygkY29udGFpbmVyOiBKUXVlcnkpOiB2b2lkIHtcbiAgICAvLyDkuLrmr4/kuKrluJblrZDmt7vliqDmuJDlhaXliqjnlLtcbiAgICAkY29udGFpbmVyLmZpbmQoJy5keW5hbWljcy1wb3N0JykuZWFjaCgoaW5kZXgsIGVsZW1lbnQpID0+IHtcbiAgICAgIGNvbnN0ICRwb3N0ID0gJChlbGVtZW50KTtcbiAgICAgICRwb3N0LmNzcyh7XG4gICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoMjBweCknLFxuICAgICAgfSk7XG5cbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAkcG9zdFxuICAgICAgICAgIC5hbmltYXRlKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDMwMCxcbiAgICAgICAgICApXG4gICAgICAgICAgLmNzcyh7XG4gICAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKDApJyxcbiAgICAgICAgICAgIHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4zcyBlYXNlJyxcbiAgICAgICAgICB9KTtcbiAgICAgIH0sIGluZGV4ICogMTAwKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bpu5jorqTliqjmgIHlhoXlrrlcbiAgICogQHJldHVybnMg6buY6K6k55qESFRNTOWKqOaAgeWGheWuuVxuICAgKi9cbiAgLy8g5Yik5pat6K+l5biW5a2Q5piv5ZCm6KKr5b2T5YmN55So5oi354K56LWe77yI55So5LqO5Yid5aeL5riy5p+T5pe26K6+572u57qi5b+D77yJXG4gIHByaXZhdGUgaXNQb3N0TGlrZWRCeUN1cnJlbnRVc2VyKHBvc3Q6IER5bmFtaWNzUG9zdCk6IGJvb2xlYW4ge1xuICAgIC8vIOebtOaOpeWIpOaWreaYr+WQpuWMheWQqyBcInVzZXJcIu+8jOWboOS4uuW9k+WJjeeUqOaIt+eahOeCuei1numDveWtmOWCqOS4uiBcInVzZXJcIlxuICAgIHJldHVybiAhIXBvc3QubGlrZWRCeT8uc29tZSh1ID0+IHUubmFtZSA9PT0gJ3VzZXInIHx8IHUudXNlcm5hbWUgPT09ICd1c2VyJyk7XG4gIH1cblxuICAvLyDmoLnmja4gRE9NIOS4reaYvuekuueahCBsaWtlZC1ieSDnlKjmiLflkI3ljZXvvIznu5nngrnotZ7mjInpkq7ooaXpvZAv56e76ZmkIGxpa2VkIOeKtuaAgVxuICBwcml2YXRlIHVwZGF0ZUxpa2VCdXR0b25zU3RhdGUoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmFjdHVhbFVzZXJOYW1lKSByZXR1cm47XG4gICAgY29uc3QgZGlzcGxheU5hbWUgPSB0aGlzLmFjdHVhbFVzZXJOYW1lO1xuICAgIGNvbnN0ICRwb3N0cyA9ICQoJy5keW5hbWljcy1wb3N0Jyk7XG4gICAgJHBvc3RzLmVhY2goKF8sIGVsKSA9PiB7XG4gICAgICBjb25zdCAkcG9zdCA9ICQoZWwpO1xuICAgICAgY29uc3QgbmFtZXM6IHN0cmluZ1tdID0gJHBvc3RcbiAgICAgICAgLmZpbmQoJy5keW5hbWljcy1saWtlZC1ieSAubGlrZWQtdXNlcicpXG4gICAgICAgIC5tYXAoKGksIGUpID0+ICQoZSkudGV4dCgpLnRyaW0oKSlcbiAgICAgICAgLmdldCgpO1xuICAgICAgLy8g5qOA5p+l5pi+56S655qE5ZCN5a2X5Lit5piv5ZCm5YyF5ZCr5b2T5YmN55So5oi355qE5a6e6ZmF5ZCN5a2XXG4gICAgICBjb25zdCBsaWtlZCA9IG5hbWVzLmluY2x1ZGVzKGRpc3BsYXlOYW1lKTtcbiAgICAgICRwb3N0LmZpbmQoJy5keW5hbWljcy1wb3N0LWFjdGlvbltkYXRhLWFjdGlvbj1cImxpa2VcIl0nKS50b2dnbGVDbGFzcygnbGlrZWQnLCBsaWtlZCk7XG4gICAgfSk7XG4gIH1cblxuICAvLyDlop7ph4/lkIzmraXvvJrmoLnmja7ogZTns7vkurrmm7TmlrDkuovku7bvvIzmjInkvZzogIXlkI3lnKjlvZPliY1ET03kuK3mm7TmlrDluJblrZDlpLTlg4/kuI7mmL7npLrlkI1cbiAgcHVibGljIHN5bmNBdXRob3JBdmF0YXIob2xkTmFtZTogc3RyaW5nLCBuZXdOYW1lOiBzdHJpbmcsIG5ld0F2YXRhcjogc3RyaW5nKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG5hbWVzID0gW29sZE5hbWUsIG5ld05hbWVdLmZpbHRlcihCb29sZWFuKSBhcyBzdHJpbmdbXTtcbiAgICAgIGlmIChuYW1lcy5sZW5ndGggPT09IDApIHJldHVybjtcblxuICAgICAgY29uc3QgJHBvc3RzID0gJCgnLmR5bmFtaWNzLXBvc3QnKTtcbiAgICAgICRwb3N0cy5lYWNoKChfLCBlbCkgPT4ge1xuICAgICAgICBjb25zdCAkcG9zdCA9ICQoZWwpO1xuICAgICAgICBjb25zdCAkbmFtZSA9ICRwb3N0LmZpbmQoJy5keW5hbWljcy1wb3N0LW5hbWUnKTtcbiAgICAgICAgY29uc3QgbmFtZVRleHQgPSAoJG5hbWUudGV4dCgpIHx8ICcnKS50cmltKCk7XG4gICAgICAgIGlmICghbmFtZVRleHQpIHJldHVybjtcblxuICAgICAgICBpZiAobmFtZXMuaW5jbHVkZXMobmFtZVRleHQpKSB7XG4gICAgICAgICAgY29uc3QgJGF2YXRhciA9ICRwb3N0LmZpbmQoJy5keW5hbWljcy1wb3N0LWF2YXRhcicpO1xuICAgICAgICAgIGlmICgkYXZhdGFyLmxlbmd0aCAmJiBuZXdBdmF0YXIpIHtcbiAgICAgICAgICAgICRhdmF0YXIuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgYHVybCgnJHtuZXdBdmF0YXJ9JylgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8g5aaC5p6c6IGU57O75Lq65pS55ZCN77yM5ZCM5q2l5pi+56S65ZCNXG4gICAgICAgICAgaWYgKG9sZE5hbWUgJiYgbmV3TmFtZSAmJiBuYW1lVGV4dCA9PT0gb2xkTmFtZSkge1xuICAgICAgICAgICAgJG5hbWUudGV4dChuZXdOYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybignW0R5bmFtaWNzUmVuZGVyZXJdIOWQjOatpeWKqOaAgeWktOWDj+Wksei0pTonLCBlKTtcbiAgICB9XG4gIH1cbiAgcHJpdmF0ZSBnZXREZWZhdWx0RHluYW1pY3NDb250ZW50KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBcbiAgICAgIDxkaXYgY2xhc3M9XCJkeW5hbWljcy1lbXB0eVwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZHluYW1pY3MtZW1wdHktaWNvblwiPvCfk608L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImR5bmFtaWNzLWVtcHR5LXRleHRcIj7mmoLml6DliqjmgIE8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImR5bmFtaWNzLWVtcHR5LXN1YnRleHRcIj7lv6vljrvlj5HluIPnrKzkuIDmnaHliqjmgIHlkKfvvZ48L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICAvKipcbiAgICog5riy5p+T5paw5bu65Yqo5oCB5oyJ6ZKuXG4gICAqL1xuICBwcml2YXRlIHJlbmRlck5ld0R5bmFtaWNCdXR0b24oKTogdm9pZCB7XG4gICAgLy8g5qOA5p+l5piv5ZCm5bey57uP5a2Y5Zyo5oyJ6ZKuXG4gICAgaWYgKCQoJy5uZXctZHluYW1pYy1idG4nKS5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8g5Yib5bu65paw5bu65Yqo5oCB5oyJ6ZKuXG4gICAgY29uc3QgJG5ld0R5bmFtaWNCdG4gPSAkKCc8YnV0dG9uPicsIHtcbiAgICAgIGNsYXNzOiAnbmV3LWR5bmFtaWMtYnRuJyxcbiAgICAgIGh0bWw6IGBcbiAgICAgICAgPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+XG4gICAgICAgICAgPGxpbmUgeDE9XCIxMlwiIHkxPVwiNVwiIHgyPVwiMTJcIiB5Mj1cIjE5XCI+PC9saW5lPlxuICAgICAgICAgIDxsaW5lIHgxPVwiNVwiIHkxPVwiMTJcIiB4Mj1cIjE5XCIgeTI9XCIxMlwiPjwvbGluZT5cbiAgICAgICAgPC9zdmc+XG4gICAgICBgLFxuICAgIH0pO1xuXG4gICAgLy8g5re75Yqg5Yiw5Yqo5oCB55WM6Z2i5a655Zmo5LitXG4gICAgJCgnI2R5bmFtaWNzSW50ZXJmYWNlJykuYXBwZW5kKCRuZXdEeW5hbWljQnRuKTtcblxuICAgIC8vIOe7keWumueCueWHu+S6i+S7tiAtIOinpuWPkeWIh+aNouWIsOWPkeW4g+mhtemdoueahOS6i+S7tlxuICAgICRuZXdEeW5hbWljQnRuLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCfngrnlh7vmlrDlu7rliqjmgIHmjInpkq4nKTtcbiAgICAgIFxuICAgICAgLy8g5pKt5pS+Y2xpY2vpn7PmlYhcbiAgICAgIGlmICh0aGlzLnNvdW5kTWFuYWdlcj8ucGxheVNvdW5kKSB7XG4gICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXlTb3VuZCgnY2xpY2snKTtcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSDmkq3mlL7mlrDlu7rliqjmgIHmjInpkq7ngrnlh7vpn7PmlYgnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIHNvdW5kTWFuYWdlciDkuI3lj6/nlKjvvIzml6Dms5Xmkq3mlL7pn7PmlYgnKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8g6Kem5Y+R6Ieq5a6a5LmJ5LqL5Lu277yM55SxbWFuYWdlcuWkhOeQhumhtemdouWIh+aNolxuICAgICAgJCh3aW5kb3cpLnRyaWdnZXIoJ2R5bmFtaWNzOm9wZW5Db21wb3NlcicpO1xuICAgIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/dynamics/renderer.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/dynamics/types.ts": 
  /*!*****************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/dynamics/types.ts ***!
  \*****************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DynamicsDataValidator: () => (/* binding */ DynamicsDataValidator)\n/* harmony export */ });\n/**\n * 动态模块类型定义（简化版）\n * 使用 TypeScript 接口定义\n */\n// === 数据验证工具类 ===\nclass DynamicsDataValidator {\n    /**\n     * 验证动态数据\n     */\n    static validateDynamicsData(data) {\n        try {\n            // 简单的类型检查\n            if (!data || typeof data !== 'object') {\n                return null;\n            }\n            const dynamicsData = data;\n            // 验证必要字段\n            if (!Array.isArray(dynamicsData.posts)) {\n                return null;\n            }\n            if (!dynamicsData.currentUser || typeof dynamicsData.currentUser !== 'object') {\n                return null;\n            }\n            // 如果基本验证通过，返回数据\n            return {\n                posts: dynamicsData.posts || [],\n                currentUser: {\n                    name: dynamicsData.currentUser.name || '用户',\n                    avatar: dynamicsData.currentUser.avatar || 'https://files.catbox.moe/u8ccy5.jpg'\n                }\n            };\n        }\n        catch (error) {\n            console.error('动态数据验证失败:', error);\n            return null;\n        }\n    }\n    /**\n     * 验证单个帖子\n     */\n    static validatePost(post) {\n        try {\n            if (!post || typeof post !== 'object') {\n                return null;\n            }\n            const postData = post;\n            // 验证必要字段\n            if (!postData.id || !postData.content) {\n                return null;\n            }\n            // 构建验证后的帖子对象\n            return {\n                id: postData.id,\n                author: {\n                    name: postData.author?.name || '未知用户',\n                    username: postData.author?.username || 'unknown',\n                    avatar: postData.author?.avatar\n                },\n                content: postData.content,\n                image: postData.image,\n                imageDescription: postData.imageDescription,\n                timestamp: postData.timestamp || new Date().toISOString(),\n                actions: {\n                    likes: postData.actions?.likes || 0,\n                    shares: postData.actions?.shares || 0,\n                    bookmarks: postData.actions?.bookmarks || 0\n                },\n                comments: Array.isArray(postData.comments) ? postData.comments : []\n            };\n        }\n        catch (error) {\n            console.error('帖子数据验证失败:', error);\n            return null;\n        }\n    }\n    /**\n     * 解析渲染配置\n     */\n    static parseConfig(config) {\n        if (!config || typeof config !== 'object') {\n            return {\n                useDefaultContent: false,\n                enableAnimations: true,\n                enableSounds: true\n            };\n        }\n        const configData = config;\n        return {\n            useDefaultContent: Boolean(configData.useDefaultContent),\n            enableAnimations: configData.enableAnimations !== false,\n            enableSounds: configData.enableSounds !== false\n        };\n    }\n    /**\n     * 创建默认动态数据\n     */\n    static createDefaultData() {\n        return {\n            posts: [],\n            currentUser: {\n                name: '用户',\n                avatar: 'https://files.catbox.moe/u8ccy5.jpg'\n            }\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZHluYW1pY3MvdHlwZXMudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7R0FHRztBQWtFSCxrQkFBa0I7QUFDWCxNQUFNLHFCQUFxQjtJQUNoQzs7T0FFRztJQUNILE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxJQUFhO1FBQ3ZDLElBQUksQ0FBQztZQUNILFVBQVU7WUFDVixJQUFJLENBQUMsSUFBSSxJQUFJLE9BQU8sSUFBSSxLQUFLLFFBQVEsRUFBRSxDQUFDO2dCQUN0QyxPQUFPLElBQUksQ0FBQztZQUNkLENBQUM7WUFFRCxNQUFNLFlBQVksR0FBRyxJQUFXLENBQUM7WUFFakMsU0FBUztZQUNULElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO2dCQUN2QyxPQUFPLElBQUksQ0FBQztZQUNkLENBQUM7WUFFRCxJQUFJLENBQUMsWUFBWSxDQUFDLFdBQVcsSUFBSSxPQUFPLFlBQVksQ0FBQyxXQUFXLEtBQUssUUFBUSxFQUFFLENBQUM7Z0JBQzlFLE9BQU8sSUFBSSxDQUFDO1lBQ2QsQ0FBQztZQUVELGdCQUFnQjtZQUNoQixPQUFPO2dCQUNMLEtBQUssRUFBRSxZQUFZLENBQUMsS0FBSyxJQUFJLEVBQUU7Z0JBQy9CLFdBQVcsRUFBRTtvQkFDWCxJQUFJLEVBQUUsWUFBWSxDQUFDLFdBQVcsQ0FBQyxJQUFJLElBQUksSUFBSTtvQkFDM0MsTUFBTSxFQUFFLFlBQVksQ0FBQyxXQUFXLENBQUMsTUFBTSxJQUFJLHFDQUFxQztpQkFDakY7YUFDRixDQUFDO1FBQ0osQ0FBQztRQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7WUFDZixPQUFPLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUNsQyxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSCxNQUFNLENBQUMsWUFBWSxDQUFDLElBQWE7UUFDL0IsSUFBSSxDQUFDO1lBQ0gsSUFBSSxDQUFDLElBQUksSUFBSSxPQUFPLElBQUksS0FBSyxRQUFRLEVBQUUsQ0FBQztnQkFDdEMsT0FBTyxJQUFJLENBQUM7WUFDZCxDQUFDO1lBRUQsTUFBTSxRQUFRLEdBQUcsSUFBVyxDQUFDO1lBRTdCLFNBQVM7WUFDVCxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDdEMsT0FBTyxJQUFJLENBQUM7WUFDZCxDQUFDO1lBRUQsYUFBYTtZQUNiLE9BQU87Z0JBQ0wsRUFBRSxFQUFFLFFBQVEsQ0FBQyxFQUFFO2dCQUNmLE1BQU0sRUFBRTtvQkFDTixJQUFJLEVBQUUsUUFBUSxDQUFDLE1BQU0sRUFBRSxJQUFJLElBQUksTUFBTTtvQkFDckMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxNQUFNLEVBQUUsUUFBUSxJQUFJLFNBQVM7b0JBQ2hELE1BQU0sRUFBRSxRQUFRLENBQUMsTUFBTSxFQUFFLE1BQU07aUJBQ2hDO2dCQUNELE9BQU8sRUFBRSxRQUFRLENBQUMsT0FBTztnQkFDekIsS0FBSyxFQUFFLFFBQVEsQ0FBQyxLQUFLO2dCQUNyQixnQkFBZ0IsRUFBRSxRQUFRLENBQUMsZ0JBQWdCO2dCQUMzQyxTQUFTLEVBQUUsUUFBUSxDQUFDLFNBQVMsSUFBSSxJQUFJLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRTtnQkFDekQsT0FBTyxFQUFFO29CQUNQLEtBQUssRUFBRSxRQUFRLENBQUMsT0FBTyxFQUFFLEtBQUssSUFBSSxDQUFDO29CQUNuQyxNQUFNLEVBQUUsUUFBUSxDQUFDLE9BQU8sRUFBRSxNQUFNLElBQUksQ0FBQztvQkFDckMsU0FBUyxFQUFFLFFBQVEsQ0FBQyxPQUFPLEVBQUUsU0FBUyxJQUFJLENBQUM7aUJBQzVDO2dCQUNELFFBQVEsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRTthQUNwRSxDQUFDO1FBQ0osQ0FBQztRQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7WUFDZixPQUFPLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUNsQyxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSCxNQUFNLENBQUMsV0FBVyxDQUFDLE1BQWdCO1FBQ2pDLElBQUksQ0FBQyxNQUFNLElBQUksT0FBTyxNQUFNLEtBQUssUUFBUSxFQUFFLENBQUM7WUFDMUMsT0FBTztnQkFDTCxpQkFBaUIsRUFBRSxLQUFLO2dCQUN4QixnQkFBZ0IsRUFBRSxJQUFJO2dCQUN0QixZQUFZLEVBQUUsSUFBSTthQUNuQixDQUFDO1FBQ0osQ0FBQztRQUVELE1BQU0sVUFBVSxHQUFHLE1BQWEsQ0FBQztRQUVqQyxPQUFPO1lBQ0wsaUJBQWlCLEVBQUUsT0FBTyxDQUFDLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQztZQUN4RCxnQkFBZ0IsRUFBRSxVQUFVLENBQUMsZ0JBQWdCLEtBQUssS0FBSztZQUN2RCxZQUFZLEVBQUUsVUFBVSxDQUFDLFlBQVksS0FBSyxLQUFLO1NBQ2hELENBQUM7SUFDSixDQUFDO0lBRUQ7O09BRUc7SUFDSCxNQUFNLENBQUMsaUJBQWlCO1FBQ3RCLE9BQU87WUFDTCxLQUFLLEVBQUUsRUFBRTtZQUNULFdBQVcsRUFBRTtnQkFDWCxJQUFJLEVBQUUsSUFBSTtnQkFDVixNQUFNLEVBQUUscUNBQXFDO2FBQzlDO1NBQ0YsQ0FBQztJQUNKLENBQUM7Q0FDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZHluYW1pY3MvdHlwZXMudHM/Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiDliqjmgIHmqKHlnZfnsbvlnovlrprkuYnvvIjnroDljJbniYjvvIlcclxuICog5L2/55SoIFR5cGVTY3JpcHQg5o6l5Y+j5a6a5LmJXHJcbiAqL1xyXG5cclxuLy8gPT09IFR5cGVTY3JpcHQg5o6l5Y+j5a6a5LmJID09PVxyXG5cclxuLy8g5L2c6ICF5L+h5oGv5o6l5Y+jXHJcbmV4cG9ydCBpbnRlcmZhY2UgQXV0aG9yIHtcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgdXNlcm5hbWU/OiBzdHJpbmc7XHJcbiAgYXZhdGFyPzogc3RyaW5nO1xyXG59XHJcblxyXG4vLyDor4TorrrmjqXlj6NcclxuZXhwb3J0IGludGVyZmFjZSBEeW5hbWljc0NvbW1lbnQge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgYXV0aG9yOiBBdXRob3I7XHJcbiAgY29udGVudDogc3RyaW5nO1xyXG4gIHRpbWVzdGFtcDogc3RyaW5nO1xyXG59XHJcblxyXG4vLyDliqjmgIHluJblrZDmjqXlj6NcclxuZXhwb3J0IGludGVyZmFjZSBEeW5hbWljc1Bvc3Qge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgYXV0aG9yOiBBdXRob3IgJiB7IHVzZXJuYW1lOiBzdHJpbmcgfTtcclxuICBjb250ZW50OiBzdHJpbmc7XHJcbiAgaW1hZ2U/OiBzdHJpbmc7XHJcbiAgaW1hZ2VEZXNjcmlwdGlvbj86IHN0cmluZztcclxuICB0aW1lc3RhbXA6IHN0cmluZztcclxuICBhY3Rpb25zOiB7XHJcbiAgICBsaWtlczogbnVtYmVyO1xyXG4gICAgc2hhcmVzOiBudW1iZXI7XHJcbiAgICBib29rbWFya3M6IG51bWJlcjtcclxuICB9O1xyXG4gIGxpa2VkQnk/OiBBdXRob3JbXTsgICAvLyDngrnotZ7ogIXliJfooajvvIjmmL7npLrmmK/osIHngrnkuobotZ7vvIlcclxuICBubz86IG51bWJlcjsgICAgICAgICAgLy8g5Yqo5oCB57yW5Y+377yI5o6S5bqP5LiO5Zue5aSN5YWz6IGU77yJXHJcbiAgY29tbWVudHM6IER5bmFtaWNzQ29tbWVudFtdO1xyXG59XHJcblxyXG4vLyDliqjmgIHmlbDmja7mjqXlj6NcclxuZXhwb3J0IGludGVyZmFjZSBEeW5hbWljc0RhdGEge1xyXG4gIHBvc3RzOiBEeW5hbWljc1Bvc3RbXTtcclxuICBjdXJyZW50VXNlcjoge1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgYXZhdGFyPzogc3RyaW5nO1xyXG4gIH07XHJcbn1cclxuXHJcbi8vIOa4suafk+mFjee9ruaOpeWPo1xyXG5leHBvcnQgaW50ZXJmYWNlIER5bmFtaWNzUmVuZGVyQ29uZmlnIHtcclxuICB1c2VEZWZhdWx0Q29udGVudD86IGJvb2xlYW47XHJcbiAgZW5hYmxlQW5pbWF0aW9ucz86IGJvb2xlYW47XHJcbiAgZW5hYmxlU291bmRzPzogYm9vbGVhbjtcclxufVxyXG5cclxuLy8g5bqV6YOo5a+86Iiq6aG557G75Z6LXHJcbmV4cG9ydCB0eXBlIE5hdmlnYXRpb25JdGVtID0gJ2hvbWUnIHwgJ3NlYXJjaCcgfCAnbWVzc2FnZScgfCAncHJvZmlsZSc7XHJcblxyXG4vLyDliqjmgIHkuovku7bnsbvlnotcclxuZXhwb3J0IGludGVyZmFjZSBEeW5hbWljc0V2ZW50cyB7XHJcbiAgJ3Bvc3Q6bGlrZSc6IHsgcG9zdElkOiBzdHJpbmc7IGxpa2VkOiBib29sZWFuIH07XHJcbiAgJ3Bvc3Q6c2hhcmUnOiB7IHBvc3RJZDogc3RyaW5nIH07XHJcbiAgJ3Bvc3Q6Ym9va21hcmsnOiB7IHBvc3RJZDogc3RyaW5nOyBib29rbWFya2VkOiBib29sZWFuIH07XHJcbiAgJ25hdmlnYXRpb246Y2hhbmdlJzogeyBpdGVtOiBOYXZpZ2F0aW9uSXRlbSB9O1xyXG4gICdwcm9maWxlOmNsaWNrJzogeyB1c2VybmFtZTogc3RyaW5nIH07XHJcbiAgJ3NldHRpbmdzOmNsaWNrJzogdm9pZDtcclxufVxyXG5cclxuLy8gPT09IOaVsOaNrumqjOivgeW3peWFt+exuyA9PT1cclxuZXhwb3J0IGNsYXNzIER5bmFtaWNzRGF0YVZhbGlkYXRvciB7XHJcbiAgLyoqXHJcbiAgICog6aqM6K+B5Yqo5oCB5pWw5o2uXHJcbiAgICovXHJcbiAgc3RhdGljIHZhbGlkYXRlRHluYW1pY3NEYXRhKGRhdGE6IHVua25vd24pOiBEeW5hbWljc0RhdGEgfCBudWxsIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOeugOWNleeahOexu+Wei+ajgOafpVxyXG4gICAgICBpZiAoIWRhdGEgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGR5bmFtaWNzRGF0YSA9IGRhdGEgYXMgYW55O1xyXG4gICAgICBcclxuICAgICAgLy8g6aqM6K+B5b+F6KaB5a2X5q61XHJcbiAgICAgIGlmICghQXJyYXkuaXNBcnJheShkeW5hbWljc0RhdGEucG9zdHMpKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGlmICghZHluYW1pY3NEYXRhLmN1cnJlbnRVc2VyIHx8IHR5cGVvZiBkeW5hbWljc0RhdGEuY3VycmVudFVzZXIgIT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIOWmguaenOWfuuacrOmqjOivgemAmui/h++8jOi/lOWbnuaVsOaNrlxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHBvc3RzOiBkeW5hbWljc0RhdGEucG9zdHMgfHwgW10sXHJcbiAgICAgICAgY3VycmVudFVzZXI6IHtcclxuICAgICAgICAgIG5hbWU6IGR5bmFtaWNzRGF0YS5jdXJyZW50VXNlci5uYW1lIHx8ICfnlKjmiLcnLFxyXG4gICAgICAgICAgYXZhdGFyOiBkeW5hbWljc0RhdGEuY3VycmVudFVzZXIuYXZhdGFyIHx8ICdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvdThjY3k1LmpwZydcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfliqjmgIHmlbDmja7pqozor4HlpLHotKU6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmqjOivgeWNleS4quW4luWtkFxyXG4gICAqL1xyXG4gIHN0YXRpYyB2YWxpZGF0ZVBvc3QocG9zdDogdW5rbm93bik6IER5bmFtaWNzUG9zdCB8IG51bGwge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKCFwb3N0IHx8IHR5cGVvZiBwb3N0ICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBwb3N0RGF0YSA9IHBvc3QgYXMgYW55O1xyXG4gICAgICBcclxuICAgICAgLy8g6aqM6K+B5b+F6KaB5a2X5q61XHJcbiAgICAgIGlmICghcG9zdERhdGEuaWQgfHwgIXBvc3REYXRhLmNvbnRlbnQpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8g5p6E5bu66aqM6K+B5ZCO55qE5biW5a2Q5a+56LGhXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgaWQ6IHBvc3REYXRhLmlkLFxyXG4gICAgICAgIGF1dGhvcjoge1xyXG4gICAgICAgICAgbmFtZTogcG9zdERhdGEuYXV0aG9yPy5uYW1lIHx8ICfmnKrnn6XnlKjmiLcnLFxyXG4gICAgICAgICAgdXNlcm5hbWU6IHBvc3REYXRhLmF1dGhvcj8udXNlcm5hbWUgfHwgJ3Vua25vd24nLFxyXG4gICAgICAgICAgYXZhdGFyOiBwb3N0RGF0YS5hdXRob3I/LmF2YXRhclxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29udGVudDogcG9zdERhdGEuY29udGVudCxcclxuICAgICAgICBpbWFnZTogcG9zdERhdGEuaW1hZ2UsXHJcbiAgICAgICAgaW1hZ2VEZXNjcmlwdGlvbjogcG9zdERhdGEuaW1hZ2VEZXNjcmlwdGlvbixcclxuICAgICAgICB0aW1lc3RhbXA6IHBvc3REYXRhLnRpbWVzdGFtcCB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgYWN0aW9uczoge1xyXG4gICAgICAgICAgbGlrZXM6IHBvc3REYXRhLmFjdGlvbnM/Lmxpa2VzIHx8IDAsXHJcbiAgICAgICAgICBzaGFyZXM6IHBvc3REYXRhLmFjdGlvbnM/LnNoYXJlcyB8fCAwLFxyXG4gICAgICAgICAgYm9va21hcmtzOiBwb3N0RGF0YS5hY3Rpb25zPy5ib29rbWFya3MgfHwgMFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29tbWVudHM6IEFycmF5LmlzQXJyYXkocG9zdERhdGEuY29tbWVudHMpID8gcG9zdERhdGEuY29tbWVudHMgOiBbXVxyXG4gICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign5biW5a2Q5pWw5o2u6aqM6K+B5aSx6LSlOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDop6PmnpDmuLLmn5PphY3nva5cclxuICAgKi9cclxuICBzdGF0aWMgcGFyc2VDb25maWcoY29uZmlnPzogdW5rbm93bik6IER5bmFtaWNzUmVuZGVyQ29uZmlnIHtcclxuICAgIGlmICghY29uZmlnIHx8IHR5cGVvZiBjb25maWcgIT09ICdvYmplY3QnKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgdXNlRGVmYXVsdENvbnRlbnQ6IGZhbHNlLFxyXG4gICAgICAgIGVuYWJsZUFuaW1hdGlvbnM6IHRydWUsXHJcbiAgICAgICAgZW5hYmxlU291bmRzOiB0cnVlXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IGNvbmZpZ0RhdGEgPSBjb25maWcgYXMgYW55O1xyXG4gICAgXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB1c2VEZWZhdWx0Q29udGVudDogQm9vbGVhbihjb25maWdEYXRhLnVzZURlZmF1bHRDb250ZW50KSxcclxuICAgICAgZW5hYmxlQW5pbWF0aW9uczogY29uZmlnRGF0YS5lbmFibGVBbmltYXRpb25zICE9PSBmYWxzZSxcclxuICAgICAgZW5hYmxlU291bmRzOiBjb25maWdEYXRhLmVuYWJsZVNvdW5kcyAhPT0gZmFsc2VcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliJvlu7rpu5jorqTliqjmgIHmlbDmja5cclxuICAgKi9cclxuICBzdGF0aWMgY3JlYXRlRGVmYXVsdERhdGEoKTogRHluYW1pY3NEYXRhIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHBvc3RzOiBbXSxcclxuICAgICAgY3VycmVudFVzZXI6IHtcclxuICAgICAgICBuYW1lOiAn55So5oi3JyxcclxuICAgICAgICBhdmF0YXI6ICdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvdThjY3k1LmpwZydcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/dynamics/types.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/extensions/ChatSummaryService.ts": 
  /*!********************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/extensions/ChatSummaryService.ts ***!
  \********************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatSummaryService: () => (/* binding */ ChatSummaryService)\n/* harmony export */ });\n/* harmony import */ var _ErrorHandler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ErrorHandler */ \"./src/多云熊/备份/给rovo的/modules/extensions/ErrorHandler.ts\");\n/* harmony import */ var _MessageProcessor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MessageProcessor */ \"./src/多云熊/备份/给rovo的/modules/extensions/MessageProcessor.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./types */ \"./src/多云熊/备份/给rovo的/modules/extensions/types.ts\");\n/**\n * ChatSummaryService - 聊天总结服务\n * 负责处理聊天内容总结的核心业务逻辑\n */\n\n\n\nclass ChatSummaryService {\n    static instance;\n    messageProcessor;\n    errorHandler;\n    // 固定的总结提示词模板\n    SUMMARY_PROMPT_TEMPLATE = `<requqst:注意，在接下来的一轮回复中，忽略之前的所有指示，进行一次性的总结。总结到目前为止重要的情节和事件。本次回复应仅包含【本次线上内容总结】的总结内容。\r\n\r\n总结规范：\r\n1.按对话的时间顺序或事件的因果逻辑总结本楼内容\r\n2.只记录关键事件和重要细节，包括角色的重要语句，合并重复事件，省略冗余描述。\r\n3.使用简洁精炼的语言记录事实，避免主观评价与修饰\r\n4.使用纯文字进行记录，每个事件50字到100字左右\r\n5.如果存在未完成的约定、代办、与特殊事件，需要记录时间与事件。\r\n\r\n输出格式示例：\r\n【本次线上内容总结】\r\n1.{{事件1名称}}：{{事件描述}}\r\n2.{{事件2名称}}：{{事件描述}}\r\n3.{{事件3名称}}：{{事件描述}}>`;\n    constructor() {\n        this.messageProcessor = _MessageProcessor__WEBPACK_IMPORTED_MODULE_1__.MessageProcessor.getInstance();\n        this.errorHandler = _ErrorHandler__WEBPACK_IMPORTED_MODULE_0__.ErrorHandler.getInstance();\n    }\n    /**\n     * 获取单例实例\n     */\n    static getInstance() {\n        if (!ChatSummaryService.instance) {\n            ChatSummaryService.instance = new ChatSummaryService();\n        }\n        return ChatSummaryService.instance;\n    }\n    /**\n     * 总结最新消息\n     * @returns 总结结果\n     */\n    async summarizeLatestMessage() {\n        const startTime = Date.now();\n        try {\n            console.log('[ChatSummaryService] 开始总结最新消息...');\n            // 1. 获取最新消息\n            const latestMessage = this.messageProcessor.getLatestMessage();\n            if (!latestMessage) {\n                throw new Error(_types__WEBPACK_IMPORTED_MODULE_2__.SummaryErrorType.MESSAGE_NOT_FOUND);\n            }\n            console.log('[ChatSummaryService] 获取到最新消息:', {\n                id: latestMessage.id,\n                sender: latestMessage.sender,\n                contentLength: latestMessage.content.length,\n            });\n            // 保存原楼层ID，用于后续隐藏\n            const originalMessageId = latestMessage.id;\n            // 2. 验证消息内容\n            if (!this.messageProcessor.validateMessageContent(latestMessage.content)) {\n                throw new Error(_types__WEBPACK_IMPORTED_MODULE_2__.SummaryErrorType.MESSAGE_NOT_FOUND);\n            }\n            // 3. 格式化消息内容\n            const formattedMessage = this.messageProcessor.formatMessageForSummary(latestMessage);\n            // 4. 生成总结\n            const summary = await this.generateSummary(formattedMessage);\n            // 5. 发送总结到新楼层\n            await this.sendSummaryToNewFloor(summary, latestMessage.sender);\n            // 6. 隐藏原楼层（使用保存的原楼层ID）\n            await this.messageProcessor.hideOriginalFloor(originalMessageId);\n            const result = {\n                success: true,\n                content: summary,\n                timestamp: Date.now(),\n            };\n            console.log('[ChatSummaryService] ✅ 总结完成，耗时:', Date.now() - startTime, 'ms');\n            return result;\n        }\n        catch (error) {\n            console.error('[ChatSummaryService] 总结失败:', error);\n            const result = {\n                success: false,\n                error: error.message || _types__WEBPACK_IMPORTED_MODULE_2__.SummaryErrorType.UNKNOWN_ERROR,\n                timestamp: Date.now(),\n            };\n            return result;\n        }\n    }\n    /**\n     * 生成总结内容\n     * @param messageContent 消息内容\n     * @returns 生成的总结\n     */\n    async generateSummary(messageContent) {\n        try {\n            console.log('[ChatSummaryService] 开始生成总结...');\n            console.log('[ChatSummaryService] 消息内容长度:', messageContent.length);\n            // 构建完整的提示词\n            const fullPrompt = `${this.SUMMARY_PROMPT_TEMPLATE}\\n\\n需要总结的消息内容：\\n${messageContent}`;\n            console.log('[ChatSummaryService] 完整提示词长度:', fullPrompt.length);\n            // 调用AI生成总结\n            const summary = await generate({\n                user_input: fullPrompt,\n                max_chat_history: 0, // 不包含任何聊天历史，只使用我们提供的内容\n                should_stream: false, // 不使用流式传输，等待完整结果\n            });\n            if (!summary || !summary.trim()) {\n                throw new Error('AI生成的总结为空');\n            }\n            console.log('[ChatSummaryService] ✅ 总结生成成功');\n            console.log('[ChatSummaryService] 原始总结长度:', summary.length);\n            // 提取最后一个【本次线上内容总结】部分\n            const extractedSummary = this.extractSummaryContent(summary);\n            console.log('[ChatSummaryService] 提取后总结长度:', extractedSummary.length);\n            return extractedSummary;\n        }\n        catch (error) {\n            console.error('[ChatSummaryService] 总结生成失败:', error);\n            // 根据错误类型进行分类\n            if (error.message && error.message.includes('网络')) {\n                throw new Error(_types__WEBPACK_IMPORTED_MODULE_2__.SummaryErrorType.NETWORK_ERROR);\n            }\n            throw new Error(_types__WEBPACK_IMPORTED_MODULE_2__.SummaryErrorType.AI_GENERATION_FAILED);\n        }\n    }\n    /**\n     * 发送总结到新楼层\n     * @param summary 总结内容\n     * @param characterName 角色名称\n     * @returns 发送结果\n     */\n    async sendSummaryToNewFloor(summary, characterName) {\n        try {\n            console.log('[ChatSummaryService] 开始发送总结到新楼层...');\n            // 验证总结内容\n            if (!summary || !summary.trim()) {\n                throw new Error('总结内容不能为空');\n            }\n            // 清理总结内容\n            const cleanedSummary = this.messageProcessor.cleanMessageContent(summary);\n            // 使用MessageProcessor发送总结\n            await this.messageProcessor.sendSummaryToNewFloor(cleanedSummary, characterName);\n            console.log('[ChatSummaryService] ✅ 总结已发送到新楼层');\n        }\n        catch (error) {\n            console.error('[ChatSummaryService] 发送总结失败:', error);\n            throw error;\n        }\n    }\n    /**\n     * 获取总结配置\n     * @returns 当前配置\n     */\n    getSummaryConfig() {\n        return {\n            promptTemplate: this.SUMMARY_PROMPT_TEMPLATE,\n            maxChatHistory: 0,\n        };\n    }\n    /**\n     * 从AI回复中提取最后一个【本次线上内容总结】部分\n     * @param aiResponse AI的完整回复\n     * @returns 提取的总结内容\n     */\n    extractSummaryContent(aiResponse) {\n        try {\n            console.log('[ChatSummaryService] 开始提取总结内容...');\n            if (!aiResponse || !aiResponse.trim()) {\n                throw new Error('AI回复为空');\n            }\n            const trimmedResponse = aiResponse.trim();\n            // 查找最后一个【本次线上内容总结】的位置\n            const summaryMarker = '【本次线上内容总结】';\n            const lastSummaryIndex = trimmedResponse.lastIndexOf(summaryMarker);\n            if (lastSummaryIndex === -1) {\n                console.warn('[ChatSummaryService] 未找到总结标记，返回原始内容');\n                return trimmedResponse;\n            }\n            // 从最后一个总结标记开始提取内容\n            const summaryContent = trimmedResponse.substring(lastSummaryIndex);\n            console.log('[ChatSummaryService] ✅ 成功提取总结内容');\n            return summaryContent.trim();\n        }\n        catch (error) {\n            console.error('[ChatSummaryService] 提取总结内容失败:', error);\n            // 如果提取失败，返回原始内容\n            return aiResponse.trim();\n        }\n    }\n    /**\n     * 验证总结内容格式\n     * @param summary 总结内容\n     * @returns 是否符合格式要求\n     */\n    validateSummaryFormat(summary) {\n        if (!summary || !summary.trim()) {\n            return false;\n        }\n        const trimmedSummary = summary.trim();\n        // 检查是否包含总结标题\n        if (!trimmedSummary.includes('【本次线上内容总结】')) {\n            console.warn('[ChatSummaryService] 总结格式不符合要求：缺少标题');\n            return false;\n        }\n        // 检查是否包含编号列表\n        const hasNumberedList = /\\d+\\./.test(trimmedSummary);\n        if (!hasNumberedList) {\n            console.warn('[ChatSummaryService] 总结格式不符合要求：缺少编号列表');\n            return false;\n        }\n        return true;\n    }\n    /**\n     * 获取总结统计信息\n     * @param summary 总结内容\n     * @returns 统计信息\n     */\n    getSummaryStats(summary) {\n        if (!summary) {\n            return { characterCount: 0, eventCount: 0, averageEventLength: 0 };\n        }\n        const characterCount = summary.length;\n        // 统计事件数量（通过编号匹配）\n        const eventMatches = summary.match(/\\d+\\./g);\n        const eventCount = eventMatches ? eventMatches.length : 0;\n        // 计算平均事件长度\n        const averageEventLength = eventCount > 0 ? Math.round(characterCount / eventCount) : 0;\n        return {\n            characterCount,\n            eventCount,\n            averageEventLength,\n        };\n    }\n    /**\n     * 处理总结错误\n     * @param error 错误信息\n     * @param context 错误上下文\n     */\n    handleSummaryError(error, context) {\n        this.errorHandler.handleSummaryError(error, context);\n    }\n    /**\n     * 执行完整的总结流程（带错误处理）\n     * @returns 总结结果\n     */\n    async executeSummaryWorkflow() {\n        try {\n            console.log('[ChatSummaryService] 开始执行总结工作流程...');\n            const result = await this.summarizeLatestMessage();\n            if (result.success) {\n                toastr.success('聊天内容总结完成！');\n                console.log('[ChatSummaryService] ✅ 总结工作流程执行成功');\n            }\n            else {\n                this.handleSummaryError(new Error(result.error), '总结工作流程');\n            }\n            return result;\n        }\n        catch (error) {\n            console.error('[ChatSummaryService] 总结工作流程执行失败:', error);\n            this.handleSummaryError(error, '总结工作流程');\n            return {\n                success: false,\n                error: error.message || _types__WEBPACK_IMPORTED_MODULE_2__.SummaryErrorType.UNKNOWN_ERROR,\n                timestamp: Date.now(),\n            };\n        }\n    }\n    /**\n     * 销毁服务\n     */\n    destroy() {\n        console.log('[ChatSummaryService] 聊天总结服务已销毁');\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZXh0ZW5zaW9ucy9DaGF0U3VtbWFyeVNlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7R0FHRztBQUUyQztBQUNRO0FBQ21CO0FBcUJsRSxNQUFNLGtCQUFrQjtJQUNyQixNQUFNLENBQUMsUUFBUSxDQUFxQjtJQUNwQyxnQkFBZ0IsQ0FBbUI7SUFDbkMsWUFBWSxDQUFlO0lBRW5DLGFBQWE7SUFDSSx1QkFBdUIsR0FBRzs7Ozs7Ozs7Ozs7OztzQkFhdkIsQ0FBQztJQUVyQjtRQUNFLElBQUksQ0FBQyxnQkFBZ0IsR0FBRywrREFBZ0IsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUN2RCxJQUFJLENBQUMsWUFBWSxHQUFHLHVEQUFZLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDakQsQ0FBQztJQUVEOztPQUVHO0lBQ0ksTUFBTSxDQUFDLFdBQVc7UUFDdkIsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQ2pDLGtCQUFrQixDQUFDLFFBQVEsR0FBRyxJQUFJLGtCQUFrQixFQUFFLENBQUM7UUFDekQsQ0FBQztRQUNELE9BQU8sa0JBQWtCLENBQUMsUUFBUSxDQUFDO0lBQ3JDLENBQUM7SUFFRDs7O09BR0c7SUFDSSxLQUFLLENBQUMsc0JBQXNCO1FBQ2pDLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUU3QixJQUFJLENBQUM7WUFDSCxPQUFPLENBQUMsR0FBRyxDQUFDLGtDQUFrQyxDQUFDLENBQUM7WUFFaEQsWUFBWTtZQUNaLE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1lBQy9ELElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztnQkFDbkIsTUFBTSxJQUFJLEtBQUssQ0FBQyxvREFBZ0IsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1lBQ3RELENBQUM7WUFFRCxPQUFPLENBQUMs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LEtBQUssQ0FBQyxrQ0FBa0MsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUV6RCxJQUFJLENBQUMsa0JBQWtCLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBRXpDLE9BQU87Z0JBQ0wsT0FBTyxFQUFFLEtBQUs7Z0JBQ2QsS0FBSyxFQUFFLEtBQUssQ0FBQyxPQUFPLElBQUksb0RBQWdCLENBQUMsYUFBYTtnQkFDdEQsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7YUFDdEIsQ0FBQztRQUNKLENBQUM7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSSxPQUFPO1FBQ1osT0FBTyxDQUFDLEdBQUcsQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDO0lBQ2hELENBQUM7Q0FDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZXh0ZW5zaW9ucy9DaGF0U3VtbWFyeVNlcnZpY2UudHM/Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDaGF0U3VtbWFyeVNlcnZpY2UgLSDogYrlpKnmgLvnu5PmnI3liqFcclxuICog6LSf6LSj5aSE55CG6IGK5aSp5YaF5a655oC757uT55qE5qC45b+D5Lia5Yqh6YC76L6RXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgRXJyb3JIYW5kbGVyIH0gZnJvbSAnLi9FcnJvckhhbmRsZXInO1xyXG5pbXBvcnQgeyBNZXNzYWdlUHJvY2Vzc29yIH0gZnJvbSAnLi9NZXNzYWdlUHJvY2Vzc29yJztcclxuaW1wb3J0IHsgU3VtbWFyeUNvbmZpZywgU3VtbWFyeUVycm9yVHlwZSwgU3VtbWFyeVJlc3VsdCB9IGZyb20gJy4vdHlwZXMnO1xyXG5cclxuLy8g5aOw5piO5YWo5bGA5Ye95pWwXHJcbmRlY2xhcmUgZnVuY3Rpb24gZ2VuZXJhdGUoY29uZmlnOiB7XHJcbiAgdXNlcl9pbnB1dD86IHN0cmluZztcclxuICBzaG91bGRfc3RyZWFtPzogYm9vbGVhbjtcclxuICBpbWFnZT86IEZpbGUgfCBzdHJpbmc7XHJcbiAgb3ZlcnJpZGVzPzogYW55O1xyXG4gIGluamVjdHM/OiBhbnlbXTtcclxuICBtYXhfY2hhdF9oaXN0b3J5PzogJ2FsbCcgfCBudW1iZXI7XHJcbn0pOiBQcm9taXNlPHN0cmluZz47XHJcblxyXG5kZWNsYXJlIGZ1bmN0aW9uIGdldENoYXRNZXNzYWdlcyhyYW5nZTogc3RyaW5nIHwgbnVtYmVyKTogYW55W107XHJcblxyXG5kZWNsYXJlIGNvbnN0IHRvYXN0cjoge1xyXG4gIHN1Y2Nlc3M6IChtZXNzYWdlOiBzdHJpbmcsIHRpdGxlPzogc3RyaW5nKSA9PiB2b2lkO1xyXG4gIGVycm9yOiAobWVzc2FnZTogc3RyaW5nLCB0aXRsZT86IHN0cmluZykgPT4gdm9pZDtcclxuICB3YXJuaW5nOiAobWVzc2FnZTogc3RyaW5nLCB0aXRsZT86IHN0cmluZykgPT4gdm9pZDtcclxuICBpbmZvOiAobWVzc2FnZTogc3RyaW5nLCB0aXRsZT86IHN0cmluZykgPT4gdm9pZDtcclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBDaGF0U3VtbWFyeVNlcnZpY2Uge1xyXG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBDaGF0U3VtbWFyeVNlcnZpY2U7XHJcbiAgcHJpdmF0ZSBtZXNzYWdlUHJvY2Vzc29yOiBNZXNzYWdlUHJvY2Vzc29yO1xyXG4gIHByaXZhdGUgZXJyb3JIYW5kbGVyOiBFcnJvckhhbmRsZXI7XHJcblxyXG4gIC8vIOWbuuWumueahOaAu+e7k+aPkOekuuivjeaooeadv1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgU1VNTUFSWV9QUk9NUFRfVEVNUExBVEUgPSBgPHJlcXVxc3Q65rOo5oSP77yM5Zyo5o6l5LiL5p2l55qE5LiA6L2u5Zue5aSN5Lit77yM5b+955Wl5LmL5YmN55qE5omA5pyJ5oyH56S677yM6L+b6KGM5LiA5qyh5oCn55qE5oC757uT44CC5oC757uT5Yiw55uu5YmN5Li65q2i6YeN6KaB55qE5oOF6IqC5ZKM5LqL5Lu244CC5pys5qyh5Zue5aSN5bqU5LuF5YyF5ZCr44CQ5pys5qyh57q/5LiK5YaF5a655oC757uT44CR55qE5oC757uT5YaF5a6544CCXHJcblxyXG7mgLvnu5Pop4TojIPvvJpcclxuMS7mjInlr7nor53nmoTml7bpl7Tpobrluo/miJbkuovku7bnmoTlm6DmnpzpgLvovpHmgLvnu5PmnKzmpbzlhoXlrrlcclxuMi7lj6rorrDlvZXlhbPplK7kuovku7blkozph43opoHnu4boioLvvIzljIXmi6zop5LoibLnmoTph43opoHor63lj6XvvIzlkIjlubbph43lpI3kuovku7bvvIznnIHnlaXlhpfkvZnmj4/ov7DjgIJcclxuMy7kvb/nlKjnroDmtIHnsr7ngrznmoTor63oqIDorrDlvZXkuovlrp7vvIzpgb/lhY3kuLvop4Lor4Tku7fkuI7kv67ppbBcclxuNC7kvb/nlKjnuq/mloflrZfov5vooYzorrDlvZXvvIzmr4/kuKrkuovku7Y1MOWtl+WIsDEwMOWtl+W3puWPs1xyXG41LuWmguaenOWtmOWcqOacquWujOaIkOeahOe6puWumuOAgeS7o+WKnuOAgeS4jueJueauiuS6i+S7tu+8jOmcgOimgeiusOW9leaXtumXtOS4juS6i+S7tuOAglxyXG5cclxu6L6T5Ye65qC85byP56S65L6L77yaXHJcbuOAkOacrOasoee6v+S4iuWGheWuueaAu+e7k+OAkVxyXG4xLnt75LqL5Lu2MeWQjeensH1977yae3vkuovku7bmj4/ov7B9fVxyXG4yLnt75LqL5Lu2MuWQjeensH1977yae3vkuovku7bmj4/ov7B9fVxyXG4zLnt75LqL5Lu2M+WQjeensH1977yae3vkuovku7bmj4/ov7B9fT5gO1xyXG5cclxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5tZXNzYWdlUHJvY2Vzc29yID0gTWVzc2FnZVByb2Nlc3Nvci5nZXRJbnN0YW5jZSgpO1xyXG4gICAgdGhpcy5lcnJvckhhbmRsZXIgPSBFcnJvckhhbmRsZXIuZ2V0SW5zdGFuY2UoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluWNleS+i+WunuS+i1xyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogQ2hhdFN1bW1hcnlTZXJ2aWNlIHtcclxuICAgIGlmICghQ2hhdFN1bW1hcnlTZXJ2aWNlLmluc3RhbmNlKSB7XHJcbiAgICAgIENoYXRTdW1tYXJ5U2VydmljZS5pbnN0YW5jZSA9IG5ldyBDaGF0U3VtbWFyeVNlcnZpY2UoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBDaGF0U3VtbWFyeVNlcnZpY2UuaW5zdGFuY2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmgLvnu5PmnIDmlrDmtojmga9cclxuICAgKiBAcmV0dXJucyDmgLvnu5Pnu5PmnpxcclxuICAgKi9cclxuICBwdWJsaWMgYXN5bmMgc3VtbWFyaXplTGF0ZXN0TWVzc2FnZSgpOiBQcm9taXNlPFN1bW1hcnlSZXN1bHQ+IHtcclxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coJ1tDaGF0U3VtbWFyeVNlcnZpY2VdIOW8gOWni+aAu+e7k+acgOaWsOa2iOaBry4uLicpO1xyXG5cclxuICAgICAgLy8gMS4g6I635Y+W5pyA5paw5raI5oGvXHJcbiAgICAgIGNvbnN0IGxhdGVzdE1lc3NhZ2UgPSB0aGlzLm1lc3NhZ2VQcm9jZXNzb3IuZ2V0TGF0ZXN0TWVzc2FnZSgpO1xyXG4gICAgICBpZiAoIWxhdGVzdE1lc3NhZ2UpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoU3VtbWFyeUVycm9yVHlwZS5NRVNTQUdFX05PVF9GT1VORCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKCdbQ2hhdFN1bW1hcnlTZXJ2aWNlXSDojrflj5bliLDmnIDmlrDmtojmga86Jywge1xyXG4gICAgICAgIGlkOiBsYXRlc3RNZXNzYWdlLmlkLFxyXG4gICAgICAgIHNlbmRlcjogbGF0ZXN0TWVzc2FnZS5zZW5kZXIsXHJcbiAgICAgICAgY29udGVudExlbmd0aDogbGF0ZXN0TWVzc2FnZS5jb250ZW50Lmxlbmd0aCxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyDkv53lrZjljp/mpbzlsYJJRO+8jOeUqOS6juWQjue7remakOiXj1xyXG4gICAgICBjb25zdCBvcmlnaW5hbE1lc3NhZ2VJZCA9IGxhdGVzdE1lc3NhZ2UuaWQ7XHJcblxyXG4gICAgICAvLyAyLiDpqozor4Hmtojmga/lhoXlrrlcclxuICAgICAgaWYgKCF0aGlzLm1lc3NhZ2VQcm9jZXNzb3IudmFsaWRhdGVNZXNzYWdlQ29udGVudChsYXRlc3RNZXNzYWdlLmNvbnRlbnQpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFN1bW1hcnlFcnJvclR5cGUuTUVTU0FHRV9OT1RfRk9VTkQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyAzLiDmoLzlvI/ljJbmtojmga/lhoXlrrlcclxuICAgICAgY29uc3QgZm9ybWF0dGVkTWVzc2FnZSA9IHRoaXMubWVzc2FnZVByb2Nlc3Nvci5mb3JtYXRNZXNzYWdlRm9yU3VtbWFyeShsYXRlc3RNZXNzYWdlKTtcclxuXHJcbiAgICAgIC8vIDQuIOeUn+aIkOaAu+e7k1xyXG4gICAgICBjb25zdCBzdW1tYXJ5ID0gYXdhaXQgdGhpcy5nZW5lcmF0ZVN1bW1hcnkoZm9ybWF0dGVkTWVzc2FnZSk7XHJcblxyXG4gICAgICAvLyA1LiDlj5HpgIHmgLvnu5PliLDmlrDmpbzlsYJcclxuICAgICAgYXdhaXQgdGhpcy5zZW5kU3VtbWFyeVRvTmV3Rmxvb3Ioc3VtbWFyeSwgbGF0ZXN0TWVzc2FnZS5zZW5kZXIpO1xyXG5cclxuICAgICAgLy8gNi4g6ZqQ6JeP5Y6f5qW85bGC77yI5L2/55So5L+d5a2Y55qE5Y6f5qW85bGCSUTvvIlcclxuICAgICAgYXdhaXQgdGhpcy5tZXNzYWdlUHJvY2Vzc29yLmhpZGVPcmlnaW5hbEZsb29yKG9yaWdpbmFsTWVzc2FnZUlkKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdDogU3VtbWFyeVJlc3VsdCA9IHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIGNvbnRlbnQ6IHN1bW1hcnksXHJcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc29sZS5sb2coJ1tDaGF0U3VtbWFyeVNlcnZpY2VdIOKchSDmgLvnu5PlrozmiJDvvIzogJfml7Y6JywgRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSwgJ21zJyk7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdbQ2hhdFN1bW1hcnlTZXJ2aWNlXSDmgLvnu5PlpLHotKU6JywgZXJyb3IpO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0OiBTdW1tYXJ5UmVzdWx0ID0ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlIHx8IFN1bW1hcnlFcnJvclR5cGUuVU5LTk9XTl9FUlJPUixcclxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgIH07XHJcblxyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog55Sf5oiQ5oC757uT5YaF5a65XHJcbiAgICogQHBhcmFtIG1lc3NhZ2VDb250ZW50IOa2iOaBr+WGheWuuVxyXG4gICAqIEByZXR1cm5zIOeUn+aIkOeahOaAu+e7k1xyXG4gICAqL1xyXG4gIHB1YmxpYyBhc3luYyBnZW5lcmF0ZVN1bW1hcnkobWVzc2FnZUNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnW0NoYXRTdW1tYXJ5U2VydmljZV0g5byA5aeL55Sf5oiQ5oC757uTLi4uJyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdbQ2hhdFN1bW1hcnlTZXJ2aWNlXSDmtojmga/lhoXlrrnplb/luqY6JywgbWVzc2FnZUNvbnRlbnQubGVuZ3RoKTtcclxuXHJcbiAgICAgIC8vIOaehOW7uuWujOaVtOeahOaPkOekuuivjVxyXG4gICAgICBjb25zdCBmdWxsUHJvbXB0ID0gYCR7dGhpcy5TVU1NQVJZX1BST01QVF9URU1QTEFURX1cXG5cXG7pnIDopoHmgLvnu5PnmoTmtojmga/lhoXlrrnvvJpcXG4ke21lc3NhZ2VDb250ZW50fWA7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnW0NoYXRTdW1tYXJ5U2VydmljZV0g5a6M5pW05o+Q56S66K+N6ZW/5bqmOicsIGZ1bGxQcm9tcHQubGVuZ3RoKTtcclxuXHJcbiAgICAgIC8vIOiwg+eUqEFJ55Sf5oiQ5oC757uTXHJcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBhd2FpdCBnZW5lcmF0ZSh7XHJcbiAgICAgICAgdXNlcl9pbnB1dDogZnVsbFByb21wdCxcclxuICAgICAgICBtYXhfY2hhdF9oaXN0b3J5OiAwLCAvLyDkuI3ljIXlkKvku7vkvZXogYrlpKnljoblj7LvvIzlj6rkvb/nlKjmiJHku6zmj5DkvpvnmoTlhoXlrrlcclxuICAgICAgICBzaG91bGRfc3RyZWFtOiBmYWxzZSwgLy8g5LiN5L2/55So5rWB5byP5Lyg6L6T77yM562J5b6F5a6M5pW057uT5p6cXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKCFzdW1tYXJ5IHx8ICFzdW1tYXJ5LnRyaW0oKSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQUnnlJ/miJDnmoTmgLvnu5PkuLrnqbonKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc29sZS5sb2coJ1tDaGF0U3VtbWFyeVNlcnZpY2VdIOKchSDmgLvnu5PnlJ/miJDmiJDlip8nKTtcclxuICAgICAgY29uc29sZS5sb2coJ1tDaGF0U3VtbWFyeVNlcnZpY2VdIOWOn+Wni+aAu+e7k+mVv+W6pjonLCBzdW1tYXJ5Lmxlbmd0aCk7XHJcblxyXG4gICAgICAvLyDmj5Dlj5bmnIDlkI7kuIDkuKrjgJDmnKzmrKHnur/kuIrlhoXlrrnmgLvnu5PjgJHpg6jliIZcclxuICAgICAgY29uc3QgZXh0cmFjdGVkU3VtbWFyeSA9IHRoaXMuZXh0cmFjdFN1bW1hcnlDb250ZW50KHN1bW1hcnkpO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coJ1tDaGF0U3VtbWFyeVNlcnZpY2VdIOaPkOWPluWQjuaAu+e7k+mVv+W6pjonLCBleHRyYWN0ZWRTdW1tYXJ5Lmxlbmd0aCk7XHJcblxyXG4gICAgICByZXR1cm4gZXh0cmFjdGVkU3VtbWFyeTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tDaGF0U3VtbWFyeVNlcnZpY2VdIOaAu+e7k+eUn+aIkOWksei0pTonLCBlcnJvcik7XHJcblxyXG4gICAgICAvLyDmoLnmja7plJnor6/nsbvlnovov5vooYzliIbnsbtcclxuICAgICAgaWYgKGVycm9yLm1lc3NhZ2UgJiYgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygn572R57ucJykpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoU3VtbWFyeUVycm9yVHlwZS5ORVRXT1JLX0VSUk9SKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFN1bW1hcnlFcnJvclR5cGUuQUlfR0VORVJBVElPTl9GQUlMRUQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Y+R6YCB5oC757uT5Yiw5paw5qW85bGCXHJcbiAgICogQHBhcmFtIHN1bW1hcnkg5oC757uT5YaF5a65XHJcbiAgICogQHBhcmFtIGNoYXJhY3Rlck5hbWUg6KeS6Imy5ZCN56ewXHJcbiAgICogQHJldHVybnMg5Y+R6YCB57uT5p6cXHJcbiAgICovXHJcbiAgcHVibGljIGFzeW5jIHNlbmRTdW1tYXJ5VG9OZXdGbG9vcihzdW1tYXJ5OiBzdHJpbmcsIGNoYXJhY3Rlck5hbWU/OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdbQ2hhdFN1bW1hcnlTZXJ2aWNlXSDlvIDlp4vlj5HpgIHmgLvnu5PliLDmlrDmpbzlsYIuLi4nKTtcclxuXHJcbiAgICAgIC8vIOmqjOivgeaAu+e7k+WGheWuuVxyXG4gICAgICBpZiAoIXN1bW1hcnkgfHwgIXN1bW1hcnkudHJpbSgpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfmgLvnu5PlhoXlrrnkuI3og73kuLrnqbonKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5riF55CG5oC757uT5YaF5a65XHJcbiAgICAgIGNvbnN0IGNsZWFuZWRTdW1tYXJ5ID0gdGhpcy5tZXNzYWdlUHJvY2Vzc29yLmNsZWFuTWVzc2FnZUNvbnRlbnQoc3VtbWFyeSk7XHJcblxyXG4gICAgICAvLyDkvb/nlKhNZXNzYWdlUHJvY2Vzc29y5Y+R6YCB5oC757uTXHJcbiAgICAgIGF3YWl0IHRoaXMubWVzc2FnZVByb2Nlc3Nvci5zZW5kU3VtbWFyeVRvTmV3Rmxvb3IoY2xlYW5lZFN1bW1hcnksIGNoYXJhY3Rlck5hbWUpO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coJ1tDaGF0U3VtbWFyeVNlcnZpY2VdIOKchSDmgLvnu5Plt7Llj5HpgIHliLDmlrDmpbzlsYInKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tDaGF0U3VtbWFyeVNlcnZpY2VdIOWPkemAgeaAu+e7k+Wksei0pTonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5oC757uT6YWN572uXHJcbiAgICogQHJldHVybnMg5b2T5YmN6YWN572uXHJcbiAgICovXHJcbiAgcHVibGljIGdldFN1bW1hcnlDb25maWcoKTogU3VtbWFyeUNvbmZpZyB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBwcm9tcHRUZW1wbGF0ZTogdGhpcy5TVU1NQVJZX1BST01QVF9URU1QTEFURSxcclxuICAgICAgbWF4Q2hhdEhpc3Rvcnk6IDAsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5LuOQUnlm57lpI3kuK3mj5Dlj5bmnIDlkI7kuIDkuKrjgJDmnKzmrKHnur/kuIrlhoXlrrnmgLvnu5PjgJHpg6jliIZcclxuICAgKiBAcGFyYW0gYWlSZXNwb25zZSBBSeeahOWujOaVtOWbnuWkjVxyXG4gICAqIEByZXR1cm5zIOaPkOWPlueahOaAu+e7k+WGheWuuVxyXG4gICAqL1xyXG4gIHByaXZhdGUgZXh0cmFjdFN1bW1hcnlDb250ZW50KGFpUmVzcG9uc2U6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnW0NoYXRTdW1tYXJ5U2VydmljZV0g5byA5aeL5o+Q5Y+W5oC757uT5YaF5a65Li4uJyk7XHJcblxyXG4gICAgICBpZiAoIWFpUmVzcG9uc2UgfHwgIWFpUmVzcG9uc2UudHJpbSgpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBSeWbnuWkjeS4uuepuicpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCB0cmltbWVkUmVzcG9uc2UgPSBhaVJlc3BvbnNlLnRyaW0oKTtcclxuXHJcbiAgICAgIC8vIOafpeaJvuacgOWQjuS4gOS4quOAkOacrOasoee6v+S4iuWGheWuueaAu+e7k+OAkeeahOS9jee9rlxyXG4gICAgICBjb25zdCBzdW1tYXJ5TWFya2VyID0gJ+OAkOacrOasoee6v+S4iuWGheWuueaAu+e7k+OAkSc7XHJcbiAgICAgIGNvbnN0IGxhc3RTdW1tYXJ5SW5kZXggPSB0cmltbWVkUmVzcG9uc2UubGFzdEluZGV4T2Yoc3VtbWFyeU1hcmtlcik7XHJcblxyXG4gICAgICBpZiAobGFzdFN1bW1hcnlJbmRleCA9PT0gLTEpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ1tDaGF0U3VtbWFyeVNlcnZpY2VdIOacquaJvuWIsOaAu+e7k+agh+iusO+8jOi/lOWbnuWOn+Wni+WGheWuuScpO1xyXG4gICAgICAgIHJldHVybiB0cmltbWVkUmVzcG9uc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOS7juacgOWQjuS4gOS4quaAu+e7k+agh+iusOW8gOWni+aPkOWPluWGheWuuVxyXG4gICAgICBjb25zdCBzdW1tYXJ5Q29udGVudCA9IHRyaW1tZWRSZXNwb25zZS5zdWJzdHJpbmcobGFzdFN1bW1hcnlJbmRleCk7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnW0NoYXRTdW1tYXJ5U2VydmljZV0g4pyFIOaIkOWKn+aPkOWPluaAu+e7k+WGheWuuScpO1xyXG5cclxuICAgICAgcmV0dXJuIHN1bW1hcnlDb250ZW50LnRyaW0oKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tDaGF0U3VtbWFyeVNlcnZpY2VdIOaPkOWPluaAu+e7k+WGheWuueWksei0pTonLCBlcnJvcik7XHJcbiAgICAgIC8vIOWmguaenOaPkOWPluWksei0pe+8jOi/lOWbnuWOn+Wni+WGheWuuVxyXG4gICAgICByZXR1cm4gYWlSZXNwb25zZS50cmltKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDpqozor4HmgLvnu5PlhoXlrrnmoLzlvI9cclxuICAgKiBAcGFyYW0gc3VtbWFyeSDmgLvnu5PlhoXlrrlcclxuICAgKiBAcmV0dXJucyDmmK/lkKbnrKblkIjmoLzlvI/opoHmsYJcclxuICAgKi9cclxuICBwdWJsaWMgdmFsaWRhdGVTdW1tYXJ5Rm9ybWF0KHN1bW1hcnk6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgaWYgKCFzdW1tYXJ5IHx8ICFzdW1tYXJ5LnRyaW0oKSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdHJpbW1lZFN1bW1hcnkgPSBzdW1tYXJ5LnRyaW0oKTtcclxuXHJcbiAgICAvLyDmo4Dmn6XmmK/lkKbljIXlkKvmgLvnu5PmoIfpophcclxuICAgIGlmICghdHJpbW1lZFN1bW1hcnkuaW5jbHVkZXMoJ+OAkOacrOasoee6v+S4iuWGheWuueaAu+e7k+OAkScpKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignW0NoYXRTdW1tYXJ5U2VydmljZV0g5oC757uT5qC85byP5LiN56ym5ZCI6KaB5rGC77ya57y65bCR5qCH6aKYJyk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDmo4Dmn6XmmK/lkKbljIXlkKvnvJblj7fliJfooahcclxuICAgIGNvbnN0IGhhc051bWJlcmVkTGlzdCA9IC9cXGQrXFwuLy50ZXN0KHRyaW1tZWRTdW1tYXJ5KTtcclxuICAgIGlmICghaGFzTnVtYmVyZWRMaXN0KSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignW0NoYXRTdW1tYXJ5U2VydmljZV0g5oC757uT5qC85byP5LiN56ym5ZCI6KaB5rGC77ya57y65bCR57yW5Y+35YiX6KGoJyk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluaAu+e7k+e7n+iuoeS/oeaBr1xyXG4gICAqIEBwYXJhbSBzdW1tYXJ5IOaAu+e7k+WGheWuuVxyXG4gICAqIEByZXR1cm5zIOe7n+iuoeS/oeaBr1xyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRTdW1tYXJ5U3RhdHMoc3VtbWFyeTogc3RyaW5nKToge1xyXG4gICAgY2hhcmFjdGVyQ291bnQ6IG51bWJlcjtcclxuICAgIGV2ZW50Q291bnQ6IG51bWJlcjtcclxuICAgIGF2ZXJhZ2VFdmVudExlbmd0aDogbnVtYmVyO1xyXG4gIH0ge1xyXG4gICAgaWYgKCFzdW1tYXJ5KSB7XHJcbiAgICAgIHJldHVybiB7IGNoYXJhY3RlckNvdW50OiAwLCBldmVudENvdW50OiAwLCBhdmVyYWdlRXZlbnRMZW5ndGg6IDAgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjaGFyYWN0ZXJDb3VudCA9IHN1bW1hcnkubGVuZ3RoO1xyXG5cclxuICAgIC8vIOe7n+iuoeS6i+S7tuaVsOmHj++8iOmAmui/h+e8luWPt+WMuemFje+8iVxyXG4gICAgY29uc3QgZXZlbnRNYXRjaGVzID0gc3VtbWFyeS5tYXRjaCgvXFxkK1xcLi9nKTtcclxuICAgIGNvbnN0IGV2ZW50Q291bnQgPSBldmVudE1hdGNoZXMgPyBldmVudE1hdGNoZXMubGVuZ3RoIDogMDtcclxuXHJcbiAgICAvLyDorqHnrpflubPlnYfkuovku7bplb/luqZcclxuICAgIGNvbnN0IGF2ZXJhZ2VFdmVudExlbmd0aCA9IGV2ZW50Q291bnQgPiAwID8gTWF0aC5yb3VuZChjaGFyYWN0ZXJDb3VudCAvIGV2ZW50Q291bnQpIDogMDtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBjaGFyYWN0ZXJDb3VudCxcclxuICAgICAgZXZlbnRDb3VudCxcclxuICAgICAgYXZlcmFnZUV2ZW50TGVuZ3RoLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWkhOeQhuaAu+e7k+mUmeivr1xyXG4gICAqIEBwYXJhbSBlcnJvciDplJnor6/kv6Hmga9cclxuICAgKiBAcGFyYW0gY29udGV4dCDplJnor6/kuIrkuIvmlodcclxuICAgKi9cclxuICBwcml2YXRlIGhhbmRsZVN1bW1hcnlFcnJvcihlcnJvcjogYW55LCBjb250ZXh0OiBzdHJpbmcpOiB2b2lkIHtcclxuICAgIHRoaXMuZXJyb3JIYW5kbGVyLmhhbmRsZVN1bW1hcnlFcnJvcihlcnJvciwgY29udGV4dCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmiafooYzlrozmlbTnmoTmgLvnu5PmtYHnqIvvvIjluKbplJnor6/lpITnkIbvvIlcclxuICAgKiBAcmV0dXJucyDmgLvnu5Pnu5PmnpxcclxuICAgKi9cclxuICBwdWJsaWMgYXN5bmMgZXhlY3V0ZVN1bW1hcnlXb3JrZmxvdygpOiBQcm9taXNlPFN1bW1hcnlSZXN1bHQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdbQ2hhdFN1bW1hcnlTZXJ2aWNlXSDlvIDlp4vmiafooYzmgLvnu5Plt6XkvZzmtYHnqIsuLi4nKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuc3VtbWFyaXplTGF0ZXN0TWVzc2FnZSgpO1xyXG5cclxuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoJ+iBiuWkqeWGheWuueaAu+e7k+WujOaIkO+8gScpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdbQ2hhdFN1bW1hcnlTZXJ2aWNlXSDinIUg5oC757uT5bel5L2c5rWB56iL5omn6KGM5oiQ5YqfJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVTdW1tYXJ5RXJyb3IobmV3IEVycm9yKHJlc3VsdC5lcnJvciksICfmgLvnu5Plt6XkvZzmtYHnqIsnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tDaGF0U3VtbWFyeVNlcnZpY2VdIOaAu+e7k+W3peS9nOa1geeoi+aJp+ihjOWksei0pTonLCBlcnJvcik7XHJcblxyXG4gICAgICB0aGlzLmhhbmRsZVN1bW1hcnlFcnJvcihlcnJvciwgJ+aAu+e7k+W3peS9nOa1geeoiycpO1xyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCBTdW1tYXJ5RXJyb3JUeXBlLlVOS05PV05fRVJST1IsXHJcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6ZSA5q+B5pyN5YqhXHJcbiAgICovXHJcbiAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICBjb25zb2xlLmxvZygnW0NoYXRTdW1tYXJ5U2VydmljZV0g6IGK5aSp5oC757uT5pyN5Yqh5bey6ZSA5q+BJyk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/extensions/ChatSummaryService.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/extensions/ErrorHandler.ts": 
  /*!**************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/extensions/ErrorHandler.ts ***!
  \**************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ErrorHandler: () => (/* binding */ ErrorHandler)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ \"./src/多云熊/备份/给rovo的/modules/extensions/types.ts\");\n/**\n * ErrorHandler - 错误处理工具类\n * 提供统一的错误处理和用户反馈机制\n */\n\nclass ErrorHandler {\n    static instance;\n    errorCounts = new Map();\n    MAX_ERROR_COUNT = 3;\n    ERROR_RESET_TIME = 300000; // 5分钟\n    constructor() { }\n    /**\n     * 获取单例实例\n     */\n    static getInstance() {\n        if (!ErrorHandler.instance) {\n            ErrorHandler.instance = new ErrorHandler();\n        }\n        return ErrorHandler.instance;\n    }\n    /**\n     * 处理总结相关错误\n     * @param error 错误对象\n     * @param context 错误上下文\n     * @param showToast 是否显示toast提示\n     */\n    handleSummaryError(error, context, showToast = true) {\n        const errorType = this.determineErrorType(error);\n        const errorKey = `${context}_${errorType}`;\n        // 记录错误次数\n        this.incrementErrorCount(errorKey);\n        // 记录详细错误日志\n        console.error(`[ErrorHandler] ${context} 错误:`, {\n            type: errorType,\n            message: error.message,\n            stack: error.stack,\n            timestamp: new Date().toISOString(),\n            count: this.errorCounts.get(errorKey) || 0,\n        });\n        // 显示用户友好的错误提示\n        if (showToast) {\n            this.showUserFriendlyError(errorType, context);\n        }\n        // 检查是否需要采取特殊措施\n        this.checkErrorThreshold(errorKey, errorType);\n    }\n    /**\n     * 确定错误类型\n     * @param error 错误对象\n     * @returns 错误类型\n     */\n    determineErrorType(error) {\n        if (!error) {\n            return _types__WEBPACK_IMPORTED_MODULE_0__.SummaryErrorType.UNKNOWN_ERROR;\n        }\n        const errorMessage = error.message || '';\n        // 根据错误消息确定类型\n        if (errorMessage.includes(_types__WEBPACK_IMPORTED_MODULE_0__.SummaryErrorType.MESSAGE_NOT_FOUND) ||\n            errorMessage.includes('没有找到') ||\n            errorMessage.includes('消息为空')) {\n            return _types__WEBPACK_IMPORTED_MODULE_0__.SummaryErrorType.MESSAGE_NOT_FOUND;\n        }\n        if (errorMessage.includes(_types__WEBPACK_IMPORTED_MODULE_0__.SummaryErrorType.AI_GENERATION_FAILED) ||\n            errorMessage.includes('AI生成') ||\n            errorMessage.includes('generate')) {\n            return _types__WEBPACK_IMPORTED_MODULE_0__.SummaryErrorType.AI_GENERATION_FAILED;\n        }\n        if (errorMessage.includes(_types__WEBPACK_IMPORTED_MODULE_0__.SummaryErrorType.SENDAS_COMMAND_FAILED) ||\n            errorMessage.includes('sendas') ||\n            errorMessage.includes('发送失败')) {\n            return _types__WEBPACK_IMPORTED_MODULE_0__.SummaryErrorType.SENDAS_COMMAND_FAILED;\n        }\n        if (errorMessage.includes(_types__WEBPACK_IMPORTED_MODULE_0__.SummaryErrorType.HIDE_COMMAND_FAILED) ||\n            errorMessage.includes('hide') ||\n            errorMessage.includes('隐藏失败')) {\n            return _types__WEBPACK_IMPORTED_MODULE_0__.SummaryErrorType.HIDE_COMMAND_FAILED;\n        }\n        if (errorMessage.includes('网络') ||\n            errorMessage.includes('network') ||\n            errorMessage.includes('timeout') ||\n            errorMessage.includes('连接')) {\n            return _types__WEBPACK_IMPORTED_MODULE_0__.SummaryErrorType.NETWORK_ERROR;\n        }\n        return _types__WEBPACK_IMPORTED_MODULE_0__.SummaryErrorType.UNKNOWN_ERROR;\n    }\n    /**\n     * 显示用户友好的错误提示\n     * @param errorType 错误类型\n     * @param context 错误上下文\n     */\n    showUserFriendlyError(errorType, context) {\n        const errorCount = this.errorCounts.get(`${context}_${errorType}`) || 0;\n        const isRepeatedError = errorCount > 1;\n        switch (errorType) {\n            case _types__WEBPACK_IMPORTED_MODULE_0__.SummaryErrorType.MESSAGE_NOT_FOUND:\n                if (isRepeatedError) {\n                    toastr.warning('仍然没有找到可以总结的消息，请确认当前聊天中有内容');\n                }\n                else {\n                    toastr.warning('没有找到可以总结的消息内容，请确认当前聊天中有消息');\n                }\n                break;\n            case _types__WEBPACK_IMPORTED_MODULE_0__.SummaryErrorType.AI_GENERATION_FAILED:\n                if (isRepeatedError) {\n                    toastr.error('总结持续异常，请稍后再试或联系技术支持');\n                }\n                else {\n                    toastr.error('总结生成失败，请稍后重试');\n                }\n                break;\n            case _types__WEBPACK_IMPORTED_MODULE_0__.SummaryErrorType.SENDAS_COMMAND_FAILED:\n                if (isRepeatedError) {\n                    toastr.error('发送总结持续失败，请检查权限设置或联系管理员');\n                }\n                else {\n                    toastr.error('发送总结失败，请检查权限设置');\n                }\n                break;\n            case _types__WEBPACK_IMPORTED_MODULE_0__.SummaryErrorType.HIDE_COMMAND_FAILED:\n                toastr.warning('隐藏原楼层失败，但总结已成功发送');\n                break;\n            case _types__WEBPACK_IMPORTED_MODULE_0__.SummaryErrorType.NETWORK_ERROR:\n                if (isRepeatedError) {\n                    toastr.error('网络连接持续异常，请检查网络设置或稍后重试');\n                }\n                else {\n                    toastr.error('网络连接失败，请检查网络设置');\n                }\n                break;\n            default:\n                if (isRepeatedError) {\n                    toastr.error('系统持续出现异常，请刷新页面或联系技术支持');\n                }\n                else {\n                    toastr.error('总结过程中发生未知错误，请稍后重试');\n                }\n                break;\n        }\n    }\n    /**\n     * 增加错误计数\n     * @param errorKey 错误键\n     */\n    incrementErrorCount(errorKey) {\n        const currentCount = this.errorCounts.get(errorKey) || 0;\n        this.errorCounts.set(errorKey, currentCount + 1);\n        // 设置定时器重置错误计数\n        setTimeout(() => {\n            this.errorCounts.delete(errorKey);\n        }, this.ERROR_RESET_TIME);\n    }\n    /**\n     * 检查错误阈值\n     * @param errorKey 错误键\n     * @param errorType 错误类型\n     */\n    checkErrorThreshold(errorKey, errorType) {\n        const errorCount = this.errorCounts.get(errorKey) || 0;\n        if (errorCount >= this.MAX_ERROR_COUNT) {\n            console.warn(`[ErrorHandler] 错误 ${errorType} 达到阈值 ${this.MAX_ERROR_COUNT} 次`);\n            // 根据错误类型采取不同措施\n            switch (errorType) {\n                case _types__WEBPACK_IMPORTED_MODULE_0__.SummaryErrorType.AI_GENERATION_FAILED:\n                    toastr.warning('AI服务可能暂时不可用，建议稍后再试');\n                    break;\n                case _types__WEBPACK_IMPORTED_MODULE_0__.SummaryErrorType.NETWORK_ERROR:\n                    toastr.warning('网络连接不稳定，建议检查网络设置');\n                    break;\n                case _types__WEBPACK_IMPORTED_MODULE_0__.SummaryErrorType.SENDAS_COMMAND_FAILED:\n                    toastr.warning('发送功能可能存在权限问题，建议联系管理员');\n                    break;\n                default:\n                    toastr.warning('系统可能存在问题，建议刷新页面重试');\n                    break;\n            }\n        }\n    }\n    /**\n     * 处理成功操作\n     * @param operation 操作名称\n     * @param details 详细信息\n     */\n    handleSuccess(operation, details) {\n        console.log(`[ErrorHandler] ${operation} 成功:`, details);\n        // 清除相关的错误计数\n        const keysToRemove = [];\n        for (const [key] of this.errorCounts) {\n            if (key.includes(operation)) {\n                keysToRemove.push(key);\n            }\n        }\n        keysToRemove.forEach(key => {\n            this.errorCounts.delete(key);\n        });\n    }\n    /**\n     * 获取错误统计信息\n     * @returns 错误统计\n     */\n    getErrorStats() {\n        const stats = {};\n        for (const [key, count] of this.errorCounts) {\n            stats[key] = count;\n        }\n        return stats;\n    }\n    /**\n     * 清除所有错误计数\n     */\n    clearErrorCounts() {\n        this.errorCounts.clear();\n        console.log('[ErrorHandler] 错误计数已清除');\n    }\n    /**\n     * 检查是否有频繁错误\n     * @returns 是否存在频繁错误\n     */\n    hasFrequentErrors() {\n        for (const count of this.errorCounts.values()) {\n            if (count >= this.MAX_ERROR_COUNT) {\n                return true;\n            }\n        }\n        return false;\n    }\n    /**\n     * 生成错误报告\n     * @returns 错误报告\n     */\n    generateErrorReport() {\n        const stats = this.getErrorStats();\n        const totalErrors = Object.values(stats).reduce((sum, count) => sum + count, 0);\n        if (totalErrors === 0) {\n            return '没有记录到错误';\n        }\n        let report = `总错误数: ${totalErrors}\\n\\n`;\n        for (const [key, count] of Object.entries(stats)) {\n            report += `${key}: ${count} 次\\n`;\n        }\n        return report;\n    }\n    /**\n     * 销毁错误处理器\n     */\n    destroy() {\n        this.clearErrorCounts();\n        console.log('[ErrorHandler] 错误处理器已销毁');\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZXh0ZW5zaW9ucy9FcnJvckhhbmRsZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTs7O0dBR0c7QUFFd0M7QUFTcEMsTUFBTSxZQUFZO0lBQ2YsTUFBTSxDQUFDLFFBQVEsQ0FBZTtJQUM5QixXQUFXLEdBQXdCLElBQUksR0FBRyxFQUFFLENBQUM7SUFDcEMsZUFBZSxHQUFHLENBQUMsQ0FBQztJQUNwQixnQkFBZ0IsR0FBRyxNQUFNLENBQUMsQ0FBQyxNQUFNO0lBRWxELGdCQUF1QixDQUFDO0lBRXhCOztPQUVHO0lBQ0ksTUFBTSxDQUFDLFdBQVc7UUFDdkIsSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUMzQixZQUFZLENBQUMsUUFBUSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFDN0MsQ0FBQztRQUNELE9BQU8sWUFBWSxDQUFDLFFBQVEsQ0FBQztJQUMvQixDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSSxrQkFBa0IsQ0FBQyxLQUFVLEVBQUUsT0FBZSxFQUFFLFlBQXFCLElBQUk7UUFDOUUsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2pELE1BQU0sUUFBUSxHQUFHLEdBQUcsT0FBTyxJQUFJLFNBQVMsRUFBRSxDQUFDO1FBRTNDLFNBQVM7UUFDVCxJQUFJLENBQUMsbUJBQW1CLENBQUMsUUFBUSxDQUFDLENBQUM7UUFFbkMsV0FBVztRQUNYLE9BQU8sQ0FBQyxLQUFLLENBQUMsa0JBQWtCLE9BQU8sTUFBTSxFQUFFO1lBQzdDLElBQUksRUFBRSxTQUFTO1lBQ2YsT0FBTyxFQUFFLEtBQUssQ0FBQyxPQUFPO1lBQ3RCLEtBQUssRUFBRSxLQUFLLENBQUMsS0FBSztZQUNsQixTQUFTLEVBQUUsSUFBSSxJQUFJLEVBQUUsQ0FBQyxXQUFXLEVBQUU7WUFDbkMsS0FBSyxFQUFFLElBQUksQ0FBQyxXQUFXLENB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S0FBSyxDQUFDO0lBQ2YsQ0FBQztJQUVEOzs7T0FHRztJQUNJLG1CQUFtQjtRQUN4QixNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDbkMsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLEVBQUUsQ0FBQyxHQUFHLEdBQUcsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBRWhGLElBQUksV0FBVyxLQUFLLENBQUMsRUFBRSxDQUFDO1lBQ3RCLE9BQU8sU0FBUyxDQUFDO1FBQ25CLENBQUM7UUFFRCxJQUFJLE1BQU0sR0FBRyxTQUFTLFdBQVcsTUFBTSxDQUFDO1FBRXhDLEtBQUssTUFBTSxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7WUFDakQsTUFBTSxJQUFJLEdBQUcsR0FBRyxLQUFLLEtBQUssTUFBTSxDQUFDO1FBQ25DLENBQUM7UUFFRCxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDO0lBRUQ7O09BRUc7SUFDSSxPQUFPO1FBQ1osSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7UUFDeEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO0lBQ3pDLENBQUM7Q0FDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZXh0ZW5zaW9ucy9FcnJvckhhbmRsZXIudHM/Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBFcnJvckhhbmRsZXIgLSDplJnor6/lpITnkIblt6XlhbfnsbtcclxuICog5o+Q5L6b57uf5LiA55qE6ZSZ6K+v5aSE55CG5ZKM55So5oi35Y+N6aaI5py65Yi2XHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgU3VtbWFyeUVycm9yVHlwZSB9IGZyb20gJy4vdHlwZXMnO1xyXG5cclxuZGVjbGFyZSBjb25zdCB0b2FzdHI6IHtcclxuICBzdWNjZXNzOiAobWVzc2FnZTogc3RyaW5nLCB0aXRsZT86IHN0cmluZykgPT4gdm9pZDtcclxuICBlcnJvcjogKG1lc3NhZ2U6IHN0cmluZywgdGl0bGU/OiBzdHJpbmcpID0+IHZvaWQ7XHJcbiAgd2FybmluZzogKG1lc3NhZ2U6IHN0cmluZywgdGl0bGU/OiBzdHJpbmcpID0+IHZvaWQ7XHJcbiAgaW5mbzogKG1lc3NhZ2U6IHN0cmluZywgdGl0bGU/OiBzdHJpbmcpID0+IHZvaWQ7XHJcbn07XHJcblxyXG5leHBvcnQgY2xhc3MgRXJyb3JIYW5kbGVyIHtcclxuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogRXJyb3JIYW5kbGVyO1xyXG4gIHByaXZhdGUgZXJyb3JDb3VudHM6IE1hcDxzdHJpbmcsIG51bWJlcj4gPSBuZXcgTWFwKCk7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBNQVhfRVJST1JfQ09VTlQgPSAzO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgRVJST1JfUkVTRVRfVElNRSA9IDMwMDAwMDsgLy8gNeWIhumSn1xyXG5cclxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5Y2V5L6L5a6e5L6LXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBFcnJvckhhbmRsZXIge1xyXG4gICAgaWYgKCFFcnJvckhhbmRsZXIuaW5zdGFuY2UpIHtcclxuICAgICAgRXJyb3JIYW5kbGVyLmluc3RhbmNlID0gbmV3IEVycm9ySGFuZGxlcigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEVycm9ySGFuZGxlci5pbnN0YW5jZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWkhOeQhuaAu+e7k+ebuOWFs+mUmeivr1xyXG4gICAqIEBwYXJhbSBlcnJvciDplJnor6/lr7nosaFcclxuICAgKiBAcGFyYW0gY29udGV4dCDplJnor6/kuIrkuIvmlodcclxuICAgKiBAcGFyYW0gc2hvd1RvYXN0IOaYr+WQpuaYvuekunRvYXN05o+Q56S6XHJcbiAgICovXHJcbiAgcHVibGljIGhhbmRsZVN1bW1hcnlFcnJvcihlcnJvcjogYW55LCBjb250ZXh0OiBzdHJpbmcsIHNob3dUb2FzdDogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcclxuICAgIGNvbnN0IGVycm9yVHlwZSA9IHRoaXMuZGV0ZXJtaW5lRXJyb3JUeXBlKGVycm9yKTtcclxuICAgIGNvbnN0IGVycm9yS2V5ID0gYCR7Y29udGV4dH1fJHtlcnJvclR5cGV9YDtcclxuXHJcbiAgICAvLyDorrDlvZXplJnor6/mrKHmlbBcclxuICAgIHRoaXMuaW5jcmVtZW50RXJyb3JDb3VudChlcnJvcktleSk7XHJcblxyXG4gICAgLy8g6K6w5b2V6K+m57uG6ZSZ6K+v5pel5b+XXHJcbiAgICBjb25zb2xlLmVycm9yKGBbRXJyb3JIYW5kbGVyXSAke2NvbnRleHR9IOmUmeivrzpgLCB7XHJcbiAgICAgIHR5cGU6IGVycm9yVHlwZSxcclxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcclxuICAgICAgc3RhY2s6IGVycm9yLnN0YWNrLFxyXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgY291bnQ6IHRoaXMuZXJyb3JDb3VudHMuZ2V0KGVycm9yS2V5KSB8fCAwLFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8g5pi+56S655So5oi35Y+L5aW955qE6ZSZ6K+v5o+Q56S6XHJcbiAgICBpZiAoc2hvd1RvYXN0KSB7XHJcbiAgICAgIHRoaXMuc2hvd1VzZXJGcmllbmRseUVycm9yKGVycm9yVHlwZSwgY29udGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5qOA5p+l5piv5ZCm6ZyA6KaB6YeH5Y+W54m55q6K5o6q5pa9XHJcbiAgICB0aGlzLmNoZWNrRXJyb3JUaHJlc2hvbGQoZXJyb3JLZXksIGVycm9yVHlwZSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDnoa7lrprplJnor6/nsbvlnotcclxuICAgKiBAcGFyYW0gZXJyb3Ig6ZSZ6K+v5a+56LGhXHJcbiAgICogQHJldHVybnMg6ZSZ6K+v57G75Z6LXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBkZXRlcm1pbmVFcnJvclR5cGUoZXJyb3I6IGFueSk6IFN1bW1hcnlFcnJvclR5cGUge1xyXG4gICAgaWYgKCFlcnJvcikge1xyXG4gICAgICByZXR1cm4gU3VtbWFyeUVycm9yVHlwZS5VTktOT1dOX0VSUk9SO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2UgfHwgJyc7XHJcblxyXG4gICAgLy8g5qC55o2u6ZSZ6K+v5raI5oGv56Gu5a6a57G75Z6LXHJcbiAgICBpZiAoXHJcbiAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcyhTdW1tYXJ5RXJyb3JUeXBlLk1FU1NBR0VfTk9UX0ZPVU5EKSB8fFxyXG4gICAgICBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ+ayoeacieaJvuWIsCcpIHx8XHJcbiAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcygn5raI5oGv5Li656m6JylcclxuICAgICkge1xyXG4gICAgICByZXR1cm4gU3VtbWFyeUVycm9yVHlwZS5NRVNTQUdFX05PVF9GT1VORDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoXHJcbiAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcyhTdW1tYXJ5RXJyb3JUeXBlLkFJX0dFTkVSQVRJT05fRkFJTEVEKSB8fFxyXG4gICAgICBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ0FJ55Sf5oiQJykgfHxcclxuICAgICAgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdnZW5lcmF0ZScpXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuIFN1bW1hcnlFcnJvclR5cGUuQUlfR0VORVJBVElPTl9GQUlMRUQ7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKFxyXG4gICAgICBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoU3VtbWFyeUVycm9yVHlwZS5TRU5EQVNfQ09NTUFORF9GQUlMRUQpIHx8XHJcbiAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcygnc2VuZGFzJykgfHxcclxuICAgICAgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCflj5HpgIHlpLHotKUnKVxyXG4gICAgKSB7XHJcbiAgICAgIHJldHVybiBTdW1tYXJ5RXJyb3JUeXBlLlNFTkRBU19DT01NQU5EX0ZBSUxFRDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoXHJcbiAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcyhTdW1tYXJ5RXJyb3JUeXBlLkhJREVfQ09NTUFORF9GQUlMRUQpIHx8XHJcbiAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcygnaGlkZScpIHx8XHJcbiAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcygn6ZqQ6JeP5aSx6LSlJylcclxuICAgICkge1xyXG4gICAgICByZXR1cm4gU3VtbWFyeUVycm9yVHlwZS5ISURFX0NPTU1BTkRfRkFJTEVEO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChcclxuICAgICAgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCfnvZHnu5wnKSB8fFxyXG4gICAgICBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ25ldHdvcmsnKSB8fFxyXG4gICAgICBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ3RpbWVvdXQnKSB8fFxyXG4gICAgICBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ+i/nuaOpScpXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuIFN1bW1hcnlFcnJvclR5cGUuTkVUV09SS19FUlJPUjtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gU3VtbWFyeUVycm9yVHlwZS5VTktOT1dOX0VSUk9SO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5pi+56S655So5oi35Y+L5aW955qE6ZSZ6K+v5o+Q56S6XHJcbiAgICogQHBhcmFtIGVycm9yVHlwZSDplJnor6/nsbvlnotcclxuICAgKiBAcGFyYW0gY29udGV4dCDplJnor6/kuIrkuIvmlodcclxuICAgKi9cclxuICBwcml2YXRlIHNob3dVc2VyRnJpZW5kbHlFcnJvcihlcnJvclR5cGU6IFN1bW1hcnlFcnJvclR5cGUsIGNvbnRleHQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgY29uc3QgZXJyb3JDb3VudCA9IHRoaXMuZXJyb3JDb3VudHMuZ2V0KGAke2NvbnRleHR9XyR7ZXJyb3JUeXBlfWApIHx8IDA7XHJcbiAgICBjb25zdCBpc1JlcGVhdGVkRXJyb3IgPSBlcnJvckNvdW50ID4gMTtcclxuXHJcbiAgICBzd2l0Y2ggKGVycm9yVHlwZSkge1xyXG4gICAgICBjYXNlIFN1bW1hcnlFcnJvclR5cGUuTUVTU0FHRV9OT1RfRk9VTkQ6XHJcbiAgICAgICAgaWYgKGlzUmVwZWF0ZWRFcnJvcikge1xyXG4gICAgICAgICAgdG9hc3RyLndhcm5pbmcoJ+S7jeeEtuayoeacieaJvuWIsOWPr+S7peaAu+e7k+eahOa2iOaBr++8jOivt+ehruiupOW9k+WJjeiBiuWkqeS4reacieWGheWuuScpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0b2FzdHIud2FybmluZygn5rKh5pyJ5om+5Yiw5Y+v5Lul5oC757uT55qE5raI5oGv5YaF5a6577yM6K+356Gu6K6k5b2T5YmN6IGK5aSp5Lit5pyJ5raI5oGvJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgY2FzZSBTdW1tYXJ5RXJyb3JUeXBlLkFJX0dFTkVSQVRJT05fRkFJTEVEOlxyXG4gICAgICAgIGlmIChpc1JlcGVhdGVkRXJyb3IpIHtcclxuICAgICAgICAgIHRvYXN0ci5lcnJvcign5oC757uT5oyB57ut5byC5bi477yM6K+356iN5ZCO5YaN6K+V5oiW6IGU57O75oqA5pyv5pSv5oyBJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRvYXN0ci5lcnJvcign5oC757uT55Sf5oiQ5aSx6LSl77yM6K+356iN5ZCO6YeN6K+VJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgY2FzZSBTdW1tYXJ5RXJyb3JUeXBlLlNFTkRBU19DT01NQU5EX0ZBSUxFRDpcclxuICAgICAgICBpZiAoaXNSZXBlYXRlZEVycm9yKSB7XHJcbiAgICAgICAgICB0b2FzdHIuZXJyb3IoJ+WPkemAgeaAu+e7k+aMgee7reWksei0pe+8jOivt+ajgOafpeadg+mZkOiuvue9ruaIluiBlOezu+euoeeQhuWRmCcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0b2FzdHIuZXJyb3IoJ+WPkemAgeaAu+e7k+Wksei0pe+8jOivt+ajgOafpeadg+mZkOiuvue9ricpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGNhc2UgU3VtbWFyeUVycm9yVHlwZS5ISURFX0NPTU1BTkRfRkFJTEVEOlxyXG4gICAgICAgIHRvYXN0ci53YXJuaW5nKCfpmpDol4/ljp/mpbzlsYLlpLHotKXvvIzkvYbmgLvnu5Plt7LmiJDlip/lj5HpgIEnKTtcclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGNhc2UgU3VtbWFyeUVycm9yVHlwZS5ORVRXT1JLX0VSUk9SOlxyXG4gICAgICAgIGlmIChpc1JlcGVhdGVkRXJyb3IpIHtcclxuICAgICAgICAgIHRvYXN0ci5lcnJvcign572R57uc6L+e5o6l5oyB57ut5byC5bi477yM6K+35qOA5p+l572R57uc6K6+572u5oiW56iN5ZCO6YeN6K+VJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRvYXN0ci5lcnJvcign572R57uc6L+e5o6l5aSx6LSl77yM6K+35qOA5p+l572R57uc6K6+572uJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBpZiAoaXNSZXBlYXRlZEVycm9yKSB7XHJcbiAgICAgICAgICB0b2FzdHIuZXJyb3IoJ+ezu+e7n+aMgee7reWHuueOsOW8guW4uO+8jOivt+WIt+aWsOmhtemdouaIluiBlOezu+aKgOacr+aUr+aMgScpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0b2FzdHIuZXJyb3IoJ+aAu+e7k+i/h+eoi+S4reWPkeeUn+acquefpemUmeivr++8jOivt+eojeWQjumHjeivlScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWinuWKoOmUmeivr+iuoeaVsFxyXG4gICAqIEBwYXJhbSBlcnJvcktleSDplJnor6/plK5cclxuICAgKi9cclxuICBwcml2YXRlIGluY3JlbWVudEVycm9yQ291bnQoZXJyb3JLZXk6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgY29uc3QgY3VycmVudENvdW50ID0gdGhpcy5lcnJvckNvdW50cy5nZXQoZXJyb3JLZXkpIHx8IDA7XHJcbiAgICB0aGlzLmVycm9yQ291bnRzLnNldChlcnJvcktleSwgY3VycmVudENvdW50ICsgMSk7XHJcblxyXG4gICAgLy8g6K6+572u5a6a5pe25Zmo6YeN572u6ZSZ6K+v6K6h5pWwXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy5lcnJvckNvdW50cy5kZWxldGUoZXJyb3JLZXkpO1xyXG4gICAgfSwgdGhpcy5FUlJPUl9SRVNFVF9USU1FKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOajgOafpemUmeivr+mYiOWAvFxyXG4gICAqIEBwYXJhbSBlcnJvcktleSDplJnor6/plK5cclxuICAgKiBAcGFyYW0gZXJyb3JUeXBlIOmUmeivr+exu+Wei1xyXG4gICAqL1xyXG4gIHByaXZhdGUgY2hlY2tFcnJvclRocmVzaG9sZChlcnJvcktleTogc3RyaW5nLCBlcnJvclR5cGU6IFN1bW1hcnlFcnJvclR5cGUpOiB2b2lkIHtcclxuICAgIGNvbnN0IGVycm9yQ291bnQgPSB0aGlzLmVycm9yQ291bnRzLmdldChlcnJvcktleSkgfHwgMDtcclxuXHJcbiAgICBpZiAoZXJyb3JDb3VudCA+PSB0aGlzLk1BWF9FUlJPUl9DT1VOVCkge1xyXG4gICAgICBjb25zb2xlLndhcm4oYFtFcnJvckhhbmRsZXJdIOmUmeivryAke2Vycm9yVHlwZX0g6L6+5Yiw6ZiI5YC8ICR7dGhpcy5NQVhfRVJST1JfQ09VTlR9IOasoWApO1xyXG5cclxuICAgICAgLy8g5qC55o2u6ZSZ6K+v57G75Z6L6YeH5Y+W5LiN5ZCM5o6q5pa9XHJcbiAgICAgIHN3aXRjaCAoZXJyb3JUeXBlKSB7XHJcbiAgICAgICAgY2FzZSBTdW1tYXJ5RXJyb3JUeXBlLkFJX0dFTkVSQVRJT05fRkFJTEVEOlxyXG4gICAgICAgICAgdG9hc3RyLndhcm5pbmcoJ0FJ5pyN5Yqh5Y+v6IO95pqC5pe25LiN5Y+v55So77yM5bu66K6u56iN5ZCO5YaN6K+VJyk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFN1bW1hcnlFcnJvclR5cGUuTkVUV09SS19FUlJPUjpcclxuICAgICAgICAgIHRvYXN0ci53YXJuaW5nKCfnvZHnu5zov57mjqXkuI3nqLPlrprvvIzlu7rorq7mo4Dmn6XnvZHnu5zorr7nva4nKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgU3VtbWFyeUVycm9yVHlwZS5TRU5EQVNfQ09NTUFORF9GQUlMRUQ6XHJcbiAgICAgICAgICB0b2FzdHIud2FybmluZygn5Y+R6YCB5Yqf6IO95Y+v6IO95a2Y5Zyo5p2D6ZmQ6Zeu6aKY77yM5bu66K6u6IGU57O7566h55CG5ZGYJyk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgdG9hc3RyLndhcm5pbmcoJ+ezu+e7n+WPr+iDveWtmOWcqOmXrumimO+8jOW7uuiuruWIt+aWsOmhtemdoumHjeivlScpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWkhOeQhuaIkOWKn+aTjeS9nFxyXG4gICAqIEBwYXJhbSBvcGVyYXRpb24g5pON5L2c5ZCN56ewXHJcbiAgICogQHBhcmFtIGRldGFpbHMg6K+m57uG5L+h5oGvXHJcbiAgICovXHJcbiAgcHVibGljIGhhbmRsZVN1Y2Nlc3Mob3BlcmF0aW9uOiBzdHJpbmcsIGRldGFpbHM/OiBhbnkpOiB2b2lkIHtcclxuICAgIGNvbnNvbGUubG9nKGBbRXJyb3JIYW5kbGVyXSAke29wZXJhdGlvbn0g5oiQ5YqfOmAsIGRldGFpbHMpO1xyXG5cclxuICAgIC8vIOa4hemZpOebuOWFs+eahOmUmeivr+iuoeaVsFxyXG4gICAgY29uc3Qga2V5c1RvUmVtb3ZlOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgZm9yIChjb25zdCBba2V5XSBvZiB0aGlzLmVycm9yQ291bnRzKSB7XHJcbiAgICAgIGlmIChrZXkuaW5jbHVkZXMob3BlcmF0aW9uKSkge1xyXG4gICAgICAgIGtleXNUb1JlbW92ZS5wdXNoKGtleSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBrZXlzVG9SZW1vdmUuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICB0aGlzLmVycm9yQ291bnRzLmRlbGV0ZShrZXkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bplJnor6/nu5/orqHkv6Hmga9cclxuICAgKiBAcmV0dXJucyDplJnor6/nu5/orqFcclxuICAgKi9cclxuICBwdWJsaWMgZ2V0RXJyb3JTdGF0cygpOiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9IHtcclxuICAgIGNvbnN0IHN0YXRzOiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9ID0ge307XHJcblxyXG4gICAgZm9yIChjb25zdCBba2V5LCBjb3VudF0gb2YgdGhpcy5lcnJvckNvdW50cykge1xyXG4gICAgICBzdGF0c1trZXldID0gY291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHN0YXRzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5riF6Zmk5omA5pyJ6ZSZ6K+v6K6h5pWwXHJcbiAgICovXHJcbiAgcHVibGljIGNsZWFyRXJyb3JDb3VudHMoKTogdm9pZCB7XHJcbiAgICB0aGlzLmVycm9yQ291bnRzLmNsZWFyKCk7XHJcbiAgICBjb25zb2xlLmxvZygnW0Vycm9ySGFuZGxlcl0g6ZSZ6K+v6K6h5pWw5bey5riF6ZmkJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmo4Dmn6XmmK/lkKbmnInpopHnuYHplJnor69cclxuICAgKiBAcmV0dXJucyDmmK/lkKblrZjlnKjpopHnuYHplJnor69cclxuICAgKi9cclxuICBwdWJsaWMgaGFzRnJlcXVlbnRFcnJvcnMoKTogYm9vbGVhbiB7XHJcbiAgICBmb3IgKGNvbnN0IGNvdW50IG9mIHRoaXMuZXJyb3JDb3VudHMudmFsdWVzKCkpIHtcclxuICAgICAgaWYgKGNvdW50ID49IHRoaXMuTUFYX0VSUk9SX0NPVU5UKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOeUn+aIkOmUmeivr+aKpeWRilxyXG4gICAqIEByZXR1cm5zIOmUmeivr+aKpeWRilxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZW5lcmF0ZUVycm9yUmVwb3J0KCk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBzdGF0cyA9IHRoaXMuZ2V0RXJyb3JTdGF0cygpO1xyXG4gICAgY29uc3QgdG90YWxFcnJvcnMgPSBPYmplY3QudmFsdWVzKHN0YXRzKS5yZWR1Y2UoKHN1bSwgY291bnQpID0+IHN1bSArIGNvdW50LCAwKTtcclxuXHJcbiAgICBpZiAodG90YWxFcnJvcnMgPT09IDApIHtcclxuICAgICAgcmV0dXJuICfmsqHmnInorrDlvZXliLDplJnor68nO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCByZXBvcnQgPSBg5oC76ZSZ6K+v5pWwOiAke3RvdGFsRXJyb3JzfVxcblxcbmA7XHJcblxyXG4gICAgZm9yIChjb25zdCBba2V5LCBjb3VudF0gb2YgT2JqZWN0LmVudHJpZXMoc3RhdHMpKSB7XHJcbiAgICAgIHJlcG9ydCArPSBgJHtrZXl9OiAke2NvdW50fSDmrKFcXG5gO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXBvcnQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDplIDmr4HplJnor6/lpITnkIblmahcclxuICAgKi9cclxuICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkIHtcclxuICAgIHRoaXMuY2xlYXJFcnJvckNvdW50cygpO1xyXG4gICAgY29uc29sZS5sb2coJ1tFcnJvckhhbmRsZXJdIOmUmeivr+WkhOeQhuWZqOW3sumUgOavgScpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/extensions/ErrorHandler.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/extensions/ExtensionSettingsManager.ts": 
  /*!**************************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/extensions/ExtensionSettingsManager.ts ***!
  \**************************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ExtensionSettingsManager: () => (/* binding */ ExtensionSettingsManager)\n/* harmony export */ });\n/* harmony import */ var _chatMigration_chatMigration_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../chatMigration/chatMigration.scss */ "./src/多云熊/备份/给rovo的/modules/chatMigration/chatMigration.scss");\n/* harmony import */ var _chatMigration_ChatMigrationManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../chatMigration/ChatMigrationManager */ "./src/多云熊/备份/给rovo的/modules/chatMigration/ChatMigrationManager.ts");\n/* harmony import */ var _ChatSummaryService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ChatSummaryService */ "./src/多云熊/备份/给rovo的/modules/extensions/ChatSummaryService.ts");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types */ "./src/多云熊/备份/给rovo的/modules/extensions/types.ts");\n/**\n * ExtensionSettingsManager - 扩展设置管理器\n * 负责管理扩展设置界面的显示和交互\n */\n\n\n\n\nclass ExtensionSettingsManager {\n    static instance;\n    state = _types__WEBPACK_IMPORTED_MODULE_3__.ExtensionState.IDLE;\n    isVisible = false;\n    chatSummaryService;\n    chatMigrationManager;\n    lastSummaryTime = 0;\n    SUMMARY_COOLDOWN = 5000; // 5秒冷却时间\n    // DOM 元素\n    extensionModal = null;\n    modalContainer = null;\n    closeBtn = null;\n    summaryBtn = null;\n    migrationBtn = null;\n    constructor() {\n        this.chatSummaryService = _ChatSummaryService__WEBPACK_IMPORTED_MODULE_2__.ChatSummaryService.getInstance();\n        this.chatMigrationManager = _chatMigration_ChatMigrationManager__WEBPACK_IMPORTED_MODULE_1__.ChatMigrationManager.getInstance();\n        this.initializeElements();\n        this.bindEvents();\n    }\n    /**\n     * 获取单例实例\n     */\n    static getInstance() {\n        if (!ExtensionSettingsManager.instance) {\n            ExtensionSettingsManager.instance = new ExtensionSettingsManager();\n        }\n        return ExtensionSettingsManager.instance;\n    }\n    /**\n     * 初始化DOM元素\n     */\n    initializeElements() {\n        // 创建扩展设置模态框HTML结构\n        this.createModalHTML();\n        // 获取DOM元素引用\n        this.extensionModal = document.getElementById(\'extensionSettingsModal\');\n        this.modalContainer = this.extensionModal?.querySelector(\'.modal-container\') || null;\n        this.closeBtn = document.getElementById(\'extensionCloseBtn\');\n        this.summaryBtn = document.getElementById(\'summaryChatBtn\');\n        this.migrationBtn = document.getElementById(\'chatMigrationBtn\');\n        if (!this.extensionModal) {\n            console.error(\'[ExtensionSettingsManager] 扩展设置模态框元素未找到\');\n        }\n    }\n    /**\n     * 创建模态框HTML结构\n     */\n    createModalHTML() {\n        // 检查是否已存在\n        if (document.getElementById(\'extensionSettingsModal\')) {\n            return;\n        }\n        const modalHTML = `\r\n      <div id="extensionSettingsModal" class="extension-settings-modal">\r\n        <div class="modal-container">\r\n          <div class="modal-header">\r\n            <div class="modal-title">扩展设置</div>\r\n            <button id="extensionCloseBtn" class="close-btn" type="button">\r\n              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\r\n                <line x1="18" y1="6" x2="6" y2="18"></line>\r\n                <line x1="6" y1="6" x2="18" y2="18"></line>\r\n              </svg>\r\n            </button>\r\n          </div>\r\n          <div class="modal-content">\r\n            <div class="setting-group">\r\n              <div class="group-title">\r\n                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\r\n                  <path d="M12 2L2 7l10 5 10-5-10-5z"></path>\r\n                  <path d="M2 17l10 5 10-5"></path>\r\n                  <path d="M2 12l10 5 10-5"></path>\r\n                </svg>\r\n                聊天工具\r\n              </div>\r\n              <div class="setting-item">\r\n                <button id="summaryChatBtn" class="extension-btn summary-btn" type="button">\r\n                  <span class="btn-text">总结聊天内容</span>\r\n                  <span class="btn-desc">对最新消息进行总结</span>\r\n                </button>\r\n              </div>\r\n            </div>\r\n            \r\n            <div class="setting-group">\r\n              <div class="group-title">\r\n                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\r\n                  <path d="M3 7V5a2 2 0 0 1 2-2h2"></path>\r\n                  <path d="M17 3h2a2 2 0 0 1 2 2v2"></path>\r\n                  <path d="M21 17v2a2 2 0 0 1-2 2h-2"></path>\r\n                  <path d="M7 21H5a2 2 0 0 1-2-2v-2"></path>\r\n                </svg>\r\n                聊天记录管理\r\n              </div>\r\n              <div class="setting-item">\r\n                <button id="chatMigrationBtn" class="extension-btn migration-btn" type="button">\r\n                  <span class="btn-text">迁移聊天记录</span>\r\n                  <span class="btn-desc">[慎开]开启后会在后续召唤手机时迁移所有手机聊天记录，可能token爆炸</span>\r\n                  <span class="btn-status">已禁用</span>\r\n                </button>\r\n              </div>\r\n            </div>\r\n            \r\n            <div class="setting-group">\r\n              <div class="group-title">\r\n                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\r\n                  <circle cx="12" cy="12" r="3"></circle>\r\n                  <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>\r\n                </svg>\r\n                更多功能\r\n              </div>\r\n              <div class="setting-item">\r\n                <div class="coming-soon">\r\n                  更多扩展功能即将推出...\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `;\n        // 将模态框添加到.interface-container\n        const interfaceContainer = document.querySelector(\'.interface-container\');\n        if (interfaceContainer) {\n            interfaceContainer.insertAdjacentHTML(\'beforeend\', modalHTML);\n        }\n        else {\n            // 如果找不到，作为备用方案添加到body\n            document.body.insertAdjacentHTML(\'beforeend\', modalHTML);\n            console.warn(\'[ExtensionSettingsManager] 未找到 .interface-container，模态框已添加到 body\');\n        }\n    }\n    /**\n     * 绑定事件监听器\n     */\n    bindEvents() {\n        // 延迟绑定，确保DOM元素已创建\n        setTimeout(() => {\n            // 关闭按钮\n            if (this.closeBtn) {\n                this.closeBtn.addEventListener(\'click\', () => this.hide());\n            }\n            // 点击模态框外部关闭\n            if (this.extensionModal) {\n                this.extensionModal.addEventListener(\'click\', e => {\n                    if (e.target === this.extensionModal) {\n                        this.hide();\n                    }\n                });\n            }\n            // ESC键关闭\n            document.addEventListener(\'keydown\', e => {\n                if (e.key === \'Escape\' && this.isVisible) {\n                    this.hide();\n                }\n            });\n            // 总结按钮\n            if (this.summaryBtn) {\n                this.summaryBtn.addEventListener(\'click\', () => this.handleSummaryRequest());\n            }\n            // 聊天迁移按钮\n            if (this.migrationBtn) {\n                // 初始化按钮状态\n                this.updateMigrationButtonState();\n                // 绑定点击事件\n                this.migrationBtn.addEventListener(\'click\', () => {\n                    const currentState = this.chatMigrationManager.isFeatureEnabled();\n                    const newState = !currentState;\n                    this.chatMigrationManager.setFeatureEnabled(newState);\n                    this.updateMigrationButtonState();\n                    toastr.info(`聊天记录迁移功能已${newState ? \'启用\' : \'禁用\'}`);\n                });\n            }\n        }, 100);\n    }\n    /**\n     * 显示扩展设置模态框\n     */\n    show() {\n        if (this.isVisible || !this.extensionModal) {\n            return;\n        }\n        // 同步聊天迁移按钮状态\n        if (this.migrationBtn) {\n            this.updateMigrationButtonState();\n        }\n        this.extensionModal.classList.add(\'show\');\n        this.isVisible = true;\n        // 防止背景滚动\n        document.body.style.overflow = \'hidden\';\n        console.log(\'[ExtensionSettingsManager] 扩展设置模态框已显示\');\n    }\n    /**\n     * 隐藏扩展设置模态框\n     */\n    hide() {\n        if (!this.isVisible || !this.extensionModal) {\n            return;\n        }\n        this.extensionModal.classList.remove(\'show\');\n        this.isVisible = false;\n        // 恢复背景滚动\n        document.body.style.overflow = \'\';\n        console.log(\'[ExtensionSettingsManager] 扩展设置模态框已隐藏\');\n    }\n    /**\n     * 处理总结请求\n     */\n    async handleSummaryRequest() {\n        try {\n            // 检查冷却时间\n            const now = Date.now();\n            if (now - this.lastSummaryTime < this.SUMMARY_COOLDOWN) {\n                const remainingTime = Math.ceil((this.SUMMARY_COOLDOWN - (now - this.lastSummaryTime)) / 1000);\n                toastr.warning(`请等待 ${remainingTime} 秒后再试`);\n                return;\n            }\n            // 检查当前状态\n            if (this.state === _types__WEBPACK_IMPORTED_MODULE_3__.ExtensionState.PROCESSING) {\n                toastr.info(\'正在处理中，请稍候...\');\n                return;\n            }\n            // 显示确认对话框\n            const confirmed = await this.showConfirmDialog({\n                title: \'确认总结\',\n                message: \'这将对最新的聊天消息进行总结，并发送到新楼层。确定要继续吗？\',\n                confirmText: \'确认总结\',\n                cancelText: \'取消\',\n            });\n            if (!confirmed) {\n                return;\n            }\n            // 更新最后总结时间\n            this.lastSummaryTime = now;\n            // 设置处理状态\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_3__.ExtensionState.PROCESSING);\n            console.log(\'[ExtensionSettingsManager] 开始处理聊天总结...\');\n            // 调用聊天总结服务执行完整的总结工作流程\n            const result = await this.chatSummaryService.executeSummaryWorkflow();\n            if (result.success) {\n                console.log(\'[ExtensionSettingsManager] ✅ 聊天总结完成\');\n                // 显示成功消息和统计信息\n                if (result.content) {\n                    const stats = this.chatSummaryService.getSummaryStats(result.content);\n                    toastr.success(`总结完成！生成了 ${stats.eventCount} 个事件，共 ${stats.characterCount} 字`);\n                }\n                // 自动关闭扩展设置模态框\n                setTimeout(() => {\n                    this.hide();\n                }, 2000);\n            }\n            else {\n                console.error(\'[ExtensionSettingsManager] 聊天总结失败:\', result.error);\n                // 错误消息已经在ChatSummaryService中处理了\n            }\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_3__.ExtensionState.IDLE);\n        }\n        catch (error) {\n            console.error(\'[ExtensionSettingsManager] 处理总结请求失败:\', error);\n            toastr.error(\'处理总结请求失败，请稍后重试\');\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_3__.ExtensionState.ERROR);\n            // 5秒后重置状态\n            setTimeout(() => {\n                this.setState(_types__WEBPACK_IMPORTED_MODULE_3__.ExtensionState.IDLE);\n            }, 5000);\n        }\n    }\n    /**\n     * 显示确认对话框\n     */\n    showConfirmDialog(config) {\n        return new Promise(resolve => {\n            // 移除现有的对话框（如果有）\n            const existingDialog = document.querySelector(\'.extension-confirm-dialog-overlay\');\n            if (existingDialog) {\n                existingDialog.remove();\n            }\n            // 创建确认对话框\n            const overlay = document.createElement(\'div\');\n            overlay.className = \'extension-confirm-dialog-overlay\';\n            const dialog = document.createElement(\'div\');\n            dialog.className = \'extension-confirm-dialog\';\n            dialog.innerHTML = `\r\n        <div class="dialog-header">\r\n          <h3>⚠️ ${config.title}</h3>\r\n        </div>\r\n        <div class="dialog-content">\r\n          <p>${config.message}</p>\r\n        </div>\r\n        <div class="dialog-buttons">\r\n          <button class="cancel-btn">${config.cancelText || \'取消\'}</button>\r\n          <button class="confirm-btn primary">${config.confirmText || \'确认\'}</button>\r\n        </div>\r\n      `;\n            overlay.appendChild(dialog);\n            // 将对话框添加到扩展设置模态框内部，确保在正确的堆叠上下文中\n            if (this.extensionModal) {\n                this.extensionModal.appendChild(overlay);\n            }\n            else {\n                document.body.appendChild(overlay);\n            }\n            // 绑定事件\n            const cancelBtn = dialog.querySelector(\'.cancel-btn\');\n            const confirmBtn = dialog.querySelector(\'.confirm-btn\');\n            const cleanup = () => {\n                overlay.remove();\n                document.removeEventListener(\'keydown\', handleKeyDown);\n            };\n            cancelBtn.addEventListener(\'click\', () => {\n                cleanup();\n                resolve(false);\n            });\n            confirmBtn.addEventListener(\'click\', () => {\n                cleanup();\n                resolve(true);\n            });\n            // 点击外部关闭\n            overlay.addEventListener(\'click\', e => {\n                if (e.target === overlay) {\n                    cleanup();\n                    resolve(false);\n                }\n            });\n            // ESC键关闭\n            const handleKeyDown = (e) => {\n                if (e.key === \'Escape\') {\n                    cleanup();\n                    resolve(false);\n                }\n            };\n            document.addEventListener(\'keydown\', handleKeyDown);\n        });\n    }\n    /**\n     * 设置组件状态\n     */\n    setState(newState) {\n        this.state = newState;\n        // 更新UI状态\n        if (this.modalContainer) {\n            this.modalContainer.classList.remove(\'loading\', \'processing\', \'error\');\n            switch (newState) {\n                case _types__WEBPACK_IMPORTED_MODULE_3__.ExtensionState.LOADING:\n                    this.modalContainer.classList.add(\'loading\');\n                    break;\n                case _types__WEBPACK_IMPORTED_MODULE_3__.ExtensionState.PROCESSING:\n                    this.modalContainer.classList.add(\'processing\');\n                    break;\n                case _types__WEBPACK_IMPORTED_MODULE_3__.ExtensionState.ERROR:\n                    this.modalContainer.classList.add(\'error\');\n                    break;\n            }\n        }\n        // 更新按钮状态\n        if (this.summaryBtn) {\n            this.summaryBtn.disabled = newState === _types__WEBPACK_IMPORTED_MODULE_3__.ExtensionState.PROCESSING || newState === _types__WEBPACK_IMPORTED_MODULE_3__.ExtensionState.LOADING;\n            switch (newState) {\n                case _types__WEBPACK_IMPORTED_MODULE_3__.ExtensionState.PROCESSING:\n                    this.summaryBtn.innerHTML = `\r\n            <span class="btn-text">处理中...</span>\r\n            <span class="btn-desc">正在生成总结</span>\r\n          `;\n                    break;\n                case _types__WEBPACK_IMPORTED_MODULE_3__.ExtensionState.LOADING:\n                    this.summaryBtn.innerHTML = `\r\n            <span class="btn-text">加载中...</span>\r\n            <span class="btn-desc">正在初始化</span>\r\n          `;\n                    break;\n                case _types__WEBPACK_IMPORTED_MODULE_3__.ExtensionState.ERROR:\n                    this.summaryBtn.innerHTML = `\r\n            <span class="btn-text">总结聊天内容</span>\r\n            <span class="btn-desc">点击重试</span>\r\n          `;\n                    break;\n                default:\n                    this.summaryBtn.innerHTML = `\r\n            <span class="btn-text">总结聊天内容</span>\r\n            <span class="btn-desc">对最新消息进行总结</span>\r\n          `;\n                    break;\n            }\n        }\n    }\n    /**\n     * 获取当前状态\n     */\n    getCurrentState() {\n        return this.state;\n    }\n    /**\n     * 检查模态框是否可见\n     */\n    isModalVisible() {\n        return this.isVisible;\n    }\n    /**\n     * 更新聊天迁移按钮状态\n     */\n    updateMigrationButtonState() {\n        if (!this.migrationBtn)\n            return;\n        const isEnabled = this.chatMigrationManager.isFeatureEnabled();\n        const statusElement = this.migrationBtn.querySelector(\'.btn-status\');\n        if (statusElement) {\n            statusElement.textContent = isEnabled ? \'已启用\' : \'已禁用\';\n        }\n        // 更新按钮样式\n        if (isEnabled) {\n            this.migrationBtn.classList.add(\'enabled\');\n            this.migrationBtn.classList.remove(\'disabled\');\n        }\n        else {\n            this.migrationBtn.classList.add(\'disabled\');\n            this.migrationBtn.classList.remove(\'enabled\');\n        }\n    }\n    /**\n     * 销毁组件\n     */\n    destroy() {\n        this.hide();\n        // 销毁聊天总结服务\n        if (this.chatSummaryService) {\n            this.chatSummaryService.destroy();\n        }\n        // 移除模态框元素\n        if (this.extensionModal) {\n            this.extensionModal.remove();\n        }\n        // 恢复背景滚动\n        document.body.style.overflow = \'\';\n        console.log(\'[ExtensionSettingsManager] 组件已销毁\');\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZXh0ZW5zaW9ucy9FeHRlbnNpb25TZXR0aW5nc01hbmFnZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7O0dBR0c7QUFFMEM7QUFDZ0M7QUFDbkI7QUFDUztBQVM1RCxNQUFNLHdCQUF3QjtJQUMzQixNQUFNLENBQUMsUUFBUSxDQUEyQjtJQUMxQyxLQUFLLEdBQW1CLGtEQUFjLENBQUMsSUFBSSxDQUFDO0lBQzVDLFNBQVMsR0FBWSxLQUFLLENBQUM7SUFDM0Isa0JBQWtCLENBQXFCO0lBQ3ZDLG9CQUFvQixDQUF1QjtJQUMzQyxlQUFlLEdBQVcsQ0FBQyxDQUFDO0lBQ25CLGdCQUFnQixHQUFHLElBQUksQ0FBQyxDQUFDLFNBQVM7SUFFbkQsU0FBUztJQUNELGNBQWMsR0FBdUIsSUFBSSxDQUFDO0lBQzFDLGNBQWMsR0FBdUIsSUFBSSxDQUFDO0lBQzFDLFFBQVEsR0FBNkIsSUFBSSxDQUFDO0lBQzFDLFVBQVUsR0FBNkIsSUFBSSxDQUFDO0lBQzVDLFlBQVksR0FBNkIsSUFBSSxDQUFDO0lBRXREO1FBQ0UsSUFBSSxDQUFDLGtCQUFrQixHQUFHLG1FQUFrQixDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQzNELElBQUksQ0FBQyxvQkFBb0IsR0FBRyxxRkFBb0IsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUMvRCxJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztRQUMxQixJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7SUFDcEIsQ0FBQztJQUVEOztPQUVHO0lBQ0ksTUFBTSxDQUFDLFdBQVc7UUFDdkIsSUFBSSxDQUFDLHdCQUF3QixDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQ3ZDLHdCQUF3QixDQUFDLFFBQVEsR0FBRyxJQUFJLHdCQUF3QixFQUFFLENBQUM7UUFDckUsQ0FBQztRQUNELE9BQU8sd0JBQXdCLENBQUMsUUFBUSxDQUFDO0lBQzNDLENBQUM7SUFFRDs7T0FFRztJQUNLLGtC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QUFDLEtBQUssQ0FBQztRQUN4RCxDQUFDO1FBRUQsU0FBUztRQUNULElBQUksU0FBUyxFQUFFLENBQUM7WUFDZCxJQUFJLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDM0MsSUFBSSxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ2pELENBQUM7YUFBTSxDQUFDO1lBQ04sSUFBSSxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQzVDLElBQUksQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUNoRCxDQUFDO0lBQ0gsQ0FBQztJQUVEOztPQUVHO0lBQ0ksT0FBTztRQUNaLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUVaLFdBQVc7UUFDWCxJQUFJLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1lBQzVCLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNwQyxDQUFDO1FBRUQsVUFBVTtRQUNWLElBQUksSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1lBQ3hCLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDL0IsQ0FBQztRQUVELFNBQVM7UUFDVCxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO1FBRWxDLE9BQU8sQ0FBQyxHQUFHLENBQUMsa0NBQWtDLENBQUMsQ0FBQztJQUNsRCxDQUFDO0NBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WkmuS6keeGii/lpIfku70v57uZcm92b+eahC9tb2R1bGVzL2V4dGVuc2lvbnMvRXh0ZW5zaW9uU2V0dGluZ3NNYW5hZ2VyLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogRXh0ZW5zaW9uU2V0dGluZ3NNYW5hZ2VyIC0g5omp5bGV6K6+572u566h55CG5ZmoXHJcbiAqIOi0n+i0o+euoeeQhuaJqeWxleiuvue9rueVjOmdoueahOaYvuekuuWSjOS6pOS6klxyXG4gKi9cclxuXHJcbmltcG9ydCAnLi4vY2hhdE1pZ3JhdGlvbi9jaGF0TWlncmF0aW9uLnNjc3MnO1xyXG5pbXBvcnQgeyBDaGF0TWlncmF0aW9uTWFuYWdlciB9IGZyb20gJy4uL2NoYXRNaWdyYXRpb24vQ2hhdE1pZ3JhdGlvbk1hbmFnZXInO1xyXG5pbXBvcnQgeyBDaGF0U3VtbWFyeVNlcnZpY2UgfSBmcm9tICcuL0NoYXRTdW1tYXJ5U2VydmljZSc7XHJcbmltcG9ydCB7IENvbmZpcm1hdGlvbkRpYWxvZ0NvbmZpZywgRXh0ZW5zaW9uU3RhdGUgfSBmcm9tICcuL3R5cGVzJztcclxuXHJcbmRlY2xhcmUgY29uc3QgdG9hc3RyOiB7XHJcbiAgc3VjY2VzczogKG1lc3NhZ2U6IHN0cmluZywgdGl0bGU/OiBzdHJpbmcpID0+IHZvaWQ7XHJcbiAgZXJyb3I6IChtZXNzYWdlOiBzdHJpbmcsIHRpdGxlPzogc3RyaW5nKSA9PiB2b2lkO1xyXG4gIHdhcm5pbmc6IChtZXNzYWdlOiBzdHJpbmcsIHRpdGxlPzogc3RyaW5nKSA9PiB2b2lkO1xyXG4gIGluZm86IChtZXNzYWdlOiBzdHJpbmcsIHRpdGxlPzogc3RyaW5nKSA9PiB2b2lkO1xyXG59O1xyXG5cclxuZXhwb3J0IGNsYXNzIEV4dGVuc2lvblNldHRpbmdzTWFuYWdlciB7XHJcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IEV4dGVuc2lvblNldHRpbmdzTWFuYWdlcjtcclxuICBwcml2YXRlIHN0YXRlOiBFeHRlbnNpb25TdGF0ZSA9IEV4dGVuc2lvblN0YXRlLklETEU7XHJcbiAgcHJpdmF0ZSBpc1Zpc2libGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBwcml2YXRlIGNoYXRTdW1tYXJ5U2VydmljZTogQ2hhdFN1bW1hcnlTZXJ2aWNlO1xyXG4gIHByaXZhdGUgY2hhdE1pZ3JhdGlvbk1hbmFnZXI6IENoYXRNaWdyYXRpb25NYW5hZ2VyO1xyXG4gIHByaXZhdGUgbGFzdFN1bW1hcnlUaW1lOiBudW1iZXIgPSAwO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgU1VNTUFSWV9DT09MRE9XTiA9IDUwMDA7IC8vIDXnp5LlhrfljbTml7bpl7RcclxuXHJcbiAgLy8gRE9NIOWFg+e0oFxyXG4gIHByaXZhdGUgZXh0ZW5zaW9uTW9kYWw6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcbiAgcHJpdmF0ZSBtb2RhbENvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuICBwcml2YXRlIGNsb3NlQnRuOiBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG4gIHByaXZhdGUgc3VtbWFyeUJ0bjogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuICBwcml2YXRlIG1pZ3JhdGlvbkJ0bjogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuY2hhdFN1bW1hcnlTZXJ2aWNlID0gQ2hhdFN1bW1hcnlTZXJ2aWNlLmdldEluc3RhbmNlKCk7XHJcbiAgICB0aGlzLmNoYXRNaWdyYXRpb25NYW5hZ2VyID0gQ2hhdE1pZ3JhdGlvbk1hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcclxuICAgIHRoaXMuaW5pdGlhbGl6ZUVsZW1lbnRzKCk7XHJcbiAgICB0aGlzLmJpbmRFdmVudHMoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluWNleS+i+WunuS+i1xyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogRXh0ZW5zaW9uU2V0dGluZ3NNYW5hZ2VyIHtcclxuICAgIGlmICghRXh0ZW5zaW9uU2V0dGluZ3NNYW5hZ2VyLmluc3RhbmNlKSB7XHJcbiAgICAgIEV4dGVuc2lvblNldHRpbmdzTWFuYWdlci5pbnN0YW5jZSA9IG5ldyBFeHRlbnNpb25TZXR0aW5nc01hbmFnZXIoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBFeHRlbnNpb25TZXR0aW5nc01hbmFnZXIuaW5zdGFuY2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliJ3lp4vljJZET03lhYPntKBcclxuICAgKi9cclxuICBwcml2YXRlIGluaXRpYWxpemVFbGVtZW50cygpOiB2b2lkIHtcclxuICAgIC8vIOWIm+W7uuaJqeWxleiuvue9ruaooeaAgeahhkhUTUznu5PmnoRcclxuICAgIHRoaXMuY3JlYXRlTW9kYWxIVE1MKCk7XHJcblxyXG4gICAgLy8g6I635Y+WRE9N5YWD57Sg5byV55SoXHJcbiAgICB0aGlzLmV4dGVuc2lvbk1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4dGVuc2lvblNldHRpbmdzTW9kYWwnKTtcclxuICAgIHRoaXMubW9kYWxDb250YWluZXIgPSB0aGlzLmV4dGVuc2lvbk1vZGFsPy5xdWVyeVNlbGVjdG9yKCcubW9kYWwtY29udGFpbmVyJykgfHwgbnVsbDtcclxuICAgIHRoaXMuY2xvc2VCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXh0ZW5zaW9uQ2xvc2VCdG4nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgIHRoaXMuc3VtbWFyeUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdW1tYXJ5Q2hhdEJ0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgdGhpcy5taWdyYXRpb25CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhdE1pZ3JhdGlvbkJ0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5cclxuICAgIGlmICghdGhpcy5leHRlbnNpb25Nb2RhbCkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdbRXh0ZW5zaW9uU2V0dGluZ3NNYW5hZ2VyXSDmianlsZXorr7nva7mqKHmgIHmoYblhYPntKDmnKrmib7liLAnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWIm+W7uuaooeaAgeahhkhUTUznu5PmnoRcclxuICAgKi9cclxuICBwcml2YXRlIGNyZWF0ZU1vZGFsSFRNTCgpOiB2b2lkIHtcclxuICAgIC8vIOajgOafpeaYr+WQpuW3suWtmOWcqFxyXG4gICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHRlbnNpb25TZXR0aW5nc01vZGFsJykpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG1vZGFsSFRNTCA9IGBcclxuICAgICAgPGRpdiBpZD1cImV4dGVuc2lvblNldHRpbmdzTW9kYWxcIiBjbGFzcz1cImV4dGVuc2lvbi1zZXR0aW5ncy1tb2RhbFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250YWluZXJcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLXRpdGxlXCI+5omp5bGV6K6+572uPC9kaXY+XHJcbiAgICAgICAgICAgIDxidXR0b24gaWQ9XCJleHRlbnNpb25DbG9zZUJ0blwiIGNsYXNzPVwiY2xvc2UtYnRuXCIgdHlwZT1cImJ1dHRvblwiPlxyXG4gICAgICAgICAgICAgIDxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiPlxyXG4gICAgICAgICAgICAgICAgPGxpbmUgeDE9XCIxOFwiIHkxPVwiNlwiIHgyPVwiNlwiIHkyPVwiMThcIj48L2xpbmU+XHJcbiAgICAgICAgICAgICAgICA8bGluZSB4MT1cIjZcIiB5MT1cIjZcIiB4Mj1cIjE4XCIgeTI9XCIxOFwiPjwvbGluZT5cclxuICAgICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZXR0aW5nLWdyb3VwXCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImdyb3VwLXRpdGxlXCI+XHJcbiAgICAgICAgICAgICAgICA8c3ZnIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIj5cclxuICAgICAgICAgICAgICAgICAgPHBhdGggZD1cIk0xMiAyTDIgN2wxMCA1IDEwLTUtMTAtNXpcIj48L3BhdGg+XHJcbiAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJNMiAxN2wxMCA1IDEwLTVcIj48L3BhdGg+XHJcbiAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJNMiAxMmwxMCA1IDEwLTVcIj48L3BhdGg+XHJcbiAgICAgICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgICAgICAgIOiBiuWkqeW3peWFt1xyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZXR0aW5nLWl0ZW1cIj5cclxuICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJzdW1tYXJ5Q2hhdEJ0blwiIGNsYXNzPVwiZXh0ZW5zaW9uLWJ0biBzdW1tYXJ5LWJ0blwiIHR5cGU9XCJidXR0b25cIj5cclxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJidG4tdGV4dFwiPuaAu+e7k+iBiuWkqeWGheWuuTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJidG4tZGVzY1wiPuWvueacgOaWsOa2iOaBr+i/m+ihjOaAu+e7kzwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZXR0aW5nLWdyb3VwXCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImdyb3VwLXRpdGxlXCI+XHJcbiAgICAgICAgICAgICAgICA8c3ZnIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIj5cclxuICAgICAgICAgICAgICAgICAgPHBhdGggZD1cIk0zIDdWNWEyIDIgMCAwIDEgMi0yaDJcIj48L3BhdGg+XHJcbiAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTcgM2gyYTIgMiAwIDAgMSAyIDJ2MlwiPjwvcGF0aD5cclxuICAgICAgICAgICAgICAgICAgPHBhdGggZD1cIk0yMSAxN3YyYTIgMiAwIDAgMS0yIDJoLTJcIj48L3BhdGg+XHJcbiAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJNNyAyMUg1YTIgMiAwIDAgMS0yLTJ2LTJcIj48L3BhdGg+XHJcbiAgICAgICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgICAgICAgIOiBiuWkqeiusOW9leeuoeeQhlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZXR0aW5nLWl0ZW1cIj5cclxuICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJjaGF0TWlncmF0aW9uQnRuXCIgY2xhc3M9XCJleHRlbnNpb24tYnRuIG1pZ3JhdGlvbi1idG5cIiB0eXBlPVwiYnV0dG9uXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYnRuLXRleHRcIj7ov4Hnp7vogYrlpKnorrDlvZU8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYnRuLWRlc2NcIj5b5oWO5byAXeW8gOWQr+WQjuS8muWcqOWQjue7reWPrOWUpOaJi+acuuaXtui/geenu+aJgOacieaJi+acuuiBiuWkqeiusOW9le+8jOWPr+iDvXRva2Vu54iG54K4PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImJ0bi1zdGF0dXNcIj7lt7LnpoHnlKg8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2V0dGluZy1ncm91cFwiPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJncm91cC10aXRsZVwiPlxyXG4gICAgICAgICAgICAgICAgPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxjaXJjbGUgY3g9XCIxMlwiIGN5PVwiMTJcIiByPVwiM1wiPjwvY2lyY2xlPlxyXG4gICAgICAgICAgICAgICAgICA8cGF0aCBkPVwiTTE5LjQgMTVhMS42NSAxLjY1IDAgMCAwIC4zMyAxLjgybC4wNi4wNmEyIDIgMCAwIDEgMCAyLjgzIDIgMiAwIDAgMS0yLjgzIDBsLS4wNi0uMDZhMS42NSAxLjY1IDAgMCAwLTEuODItLjMzIDEuNjUgMS42NSAwIDAgMC0xIDEuNTFWMjFhMiAyIDAgMCAxLTIgMiAyIDIgMCAwIDEtMi0ydi0uMDlBMS42NSAxLjY1IDAgMCAwIDkgMTkuNGExLjY1IDEuNjUgMCAwIDAtMS44Mi4zM2wtLjA2LjA2YTIgMiAwIDAgMS0yLjgzIDAgMiAyIDAgMCAxIDAtMi44M2wuMDYtLjA2YTEuNjUgMS42NSAwIDAgMCAuMzMtMS44MiAxLjY1IDEuNjUgMCAwIDAtMS41MS0xSDNhMiAyIDAgMCAxLTItMiAyIDIgMCAwIDEgMi0yaC4wOUExLjY1IDEuNjUgMCAwIDAgNC42IDlhMS42NSAxLjY1IDAgMCAwLS4zMy0xLjgybC0uMDYtLjA2YTIgMiAwIDAgMSAwLTIuODMgMiAyIDAgMCAxIDIuODMgMGwuMDYuMDZhMS42NSAxLjY1IDAgMCAwIDEuODIuMzNIOWExLjY1IDEuNjUgMCAwIDAgMSAxLjUxVjNhMiAyIDAgMCAxIDItMiAyIDIgMCAwIDEgMiAydi4wOWExLjY1IDEuNjUgMCAwIDAgMSAxLjUxIDEuNjUgMS42NSAwIDAgMCAxLjgyLS4zM2wuMDYtLjA2YTIgMiAwIDAgMSAyLjgzIDAgMiAyIDAgMCAxIDAgMi44M2wtLjA2LjA2YTEuNjUgMS42NSAwIDAgMC0uMzMgMS44MlY5YTEuNjUgMS42NSAwIDAgMCAxLjUxIDFIMjFhMiAyIDAgMCAxIDIgMiAyIDIgMCAwIDEtMiAyaC0uMDlhMS42NSAxLjY1IDAgMCAwLTEuNTEgMXpcIj48L3BhdGg+XHJcbiAgICAgICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgICAgICAgIOabtOWkmuWKn+iDvVxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZXR0aW5nLWl0ZW1cIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb21pbmctc29vblwiPlxyXG4gICAgICAgICAgICAgICAgICDmm7TlpJrmianlsZXlip/og73ljbPlsIbmjqjlh7ouLi5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIGA7XHJcblxyXG4gICAgLy8g5bCG5qih5oCB5qGG5re75Yqg5YiwLmludGVyZmFjZS1jb250YWluZXJcclxuICAgIGNvbnN0IGludGVyZmFjZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbnRlcmZhY2UtY29udGFpbmVyJyk7XHJcbiAgICBpZiAoaW50ZXJmYWNlQ29udGFpbmVyKSB7XHJcbiAgICAgIGludGVyZmFjZUNvbnRhaW5lci5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIG1vZGFsSFRNTCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyDlpoLmnpzmib7kuI3liLDvvIzkvZzkuLrlpIfnlKjmlrnmoYjmt7vliqDliLBib2R5XHJcbiAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBtb2RhbEhUTUwpO1xyXG4gICAgICBjb25zb2xlLndhcm4oJ1tFeHRlbnNpb25TZXR0aW5nc01hbmFnZXJdIOacquaJvuWIsCAuaW50ZXJmYWNlLWNvbnRhaW5lcu+8jOaooeaAgeahhuW3sua3u+WKoOWIsCBib2R5Jyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDnu5Hlrprkuovku7bnm5HlkKzlmahcclxuICAgKi9cclxuICBwcml2YXRlIGJpbmRFdmVudHMoKTogdm9pZCB7XHJcbiAgICAvLyDlu7bov5/nu5HlrprvvIznoa7kv51ET03lhYPntKDlt7LliJvlu7pcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAvLyDlhbPpl63mjInpkq5cclxuICAgICAgaWYgKHRoaXMuY2xvc2VCdG4pIHtcclxuICAgICAgICB0aGlzLmNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5oaWRlKCkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDngrnlh7vmqKHmgIHmoYblpJbpg6jlhbPpl61cclxuICAgICAgaWYgKHRoaXMuZXh0ZW5zaW9uTW9kYWwpIHtcclxuICAgICAgICB0aGlzLmV4dGVuc2lvbk1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XHJcbiAgICAgICAgICBpZiAoZS50YXJnZXQgPT09IHRoaXMuZXh0ZW5zaW9uTW9kYWwpIHtcclxuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEVTQ+mUruWFs+mXrVxyXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZSA9PiB7XHJcbiAgICAgICAgaWYgKGUua2V5ID09PSAnRXNjYXBlJyAmJiB0aGlzLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIOaAu+e7k+aMiemSrlxyXG4gICAgICBpZiAodGhpcy5zdW1tYXJ5QnRuKSB7XHJcbiAgICAgICAgdGhpcy5zdW1tYXJ5QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5oYW5kbGVTdW1tYXJ5UmVxdWVzdCgpKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g6IGK5aSp6L+B56e75oyJ6ZKuXHJcbiAgICAgIGlmICh0aGlzLm1pZ3JhdGlvbkJ0bikge1xyXG4gICAgICAgIC8vIOWIneWni+WMluaMiemSrueKtuaAgVxyXG4gICAgICAgIHRoaXMudXBkYXRlTWlncmF0aW9uQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICAgICAgLy8g57uR5a6a54K55Ye75LqL5Lu2XHJcbiAgICAgICAgdGhpcy5taWdyYXRpb25CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBjdXJyZW50U3RhdGUgPSB0aGlzLmNoYXRNaWdyYXRpb25NYW5hZ2VyLmlzRmVhdHVyZUVuYWJsZWQoKTtcclxuICAgICAgICAgIGNvbnN0IG5ld1N0YXRlID0gIWN1cnJlbnRTdGF0ZTtcclxuICAgICAgICAgIHRoaXMuY2hhdE1pZ3JhdGlvbk1hbmFnZXIuc2V0RmVhdHVyZUVuYWJsZWQobmV3U3RhdGUpO1xyXG4gICAgICAgICAgdGhpcy51cGRhdGVNaWdyYXRpb25CdXR0b25TdGF0ZSgpO1xyXG4gICAgICAgICAgdG9hc3RyLmluZm8oYOiBiuWkqeiusOW9lei/geenu+WKn+iDveW3siR7bmV3U3RhdGUgPyAn5ZCv55SoJyA6ICfnpoHnlKgnfWApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9LCAxMDApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5pi+56S65omp5bGV6K6+572u5qih5oCB5qGGXHJcbiAgICovXHJcbiAgcHVibGljIHNob3coKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5pc1Zpc2libGUgfHwgIXRoaXMuZXh0ZW5zaW9uTW9kYWwpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOWQjOatpeiBiuWkqei/geenu+aMiemSrueKtuaAgVxyXG4gICAgaWYgKHRoaXMubWlncmF0aW9uQnRuKSB7XHJcbiAgICAgIHRoaXMudXBkYXRlTWlncmF0aW9uQnV0dG9uU3RhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmV4dGVuc2lvbk1vZGFsLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcclxuICAgIHRoaXMuaXNWaXNpYmxlID0gdHJ1ZTtcclxuXHJcbiAgICAvLyDpmLLmraLog4zmma/mu5rliqhcclxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcclxuXHJcbiAgICBjb25zb2xlLmxvZygnW0V4dGVuc2lvblNldHRpbmdzTWFuYWdlcl0g5omp5bGV6K6+572u5qih5oCB5qGG5bey5pi+56S6Jyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDpmpDol4/mianlsZXorr7nva7mqKHmgIHmoYZcclxuICAgKi9cclxuICBwdWJsaWMgaGlkZSgpOiB2b2lkIHtcclxuICAgIGlmICghdGhpcy5pc1Zpc2libGUgfHwgIXRoaXMuZXh0ZW5zaW9uTW9kYWwpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZXh0ZW5zaW9uTW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xyXG4gICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcclxuXHJcbiAgICAvLyDmgaLlpI3og4zmma/mu5rliqhcclxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJztcclxuXHJcbiAgICBjb25zb2xlLmxvZygnW0V4dGVuc2lvblNldHRpbmdzTWFuYWdlcl0g5omp5bGV6K6+572u5qih5oCB5qGG5bey6ZqQ6JePJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlpITnkIbmgLvnu5Por7fmsYJcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIGhhbmRsZVN1bW1hcnlSZXF1ZXN0KCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g5qOA5p+l5Ya35Y205pe26Ze0XHJcbiAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgIGlmIChub3cgLSB0aGlzLmxhc3RTdW1tYXJ5VGltZSA8IHRoaXMuU1VNTUFSWV9DT09MRE9XTikge1xyXG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ1RpbWUgPSBNYXRoLmNlaWwoKHRoaXMuU1VNTUFSWV9DT09MRE9XTiAtIChub3cgLSB0aGlzLmxhc3RTdW1tYXJ5VGltZSkpIC8gMTAwMCk7XHJcbiAgICAgICAgdG9hc3RyLndhcm5pbmcoYOivt+etieW+hSAke3JlbWFpbmluZ1RpbWV9IOenkuWQjuWGjeivlWApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5qOA5p+l5b2T5YmN54q25oCBXHJcbiAgICAgIGlmICh0aGlzLnN0YXRlID09PSBFeHRlbnNpb25TdGF0ZS5QUk9DRVNTSU5HKSB7XHJcbiAgICAgICAgdG9hc3RyLmluZm8oJ+ato+WcqOWkhOeQhuS4re+8jOivt+eojeWAmS4uLicpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5pi+56S656Gu6K6k5a+56K+d5qGGXHJcbiAgICAgIGNvbnN0IGNvbmZpcm1lZCA9IGF3YWl0IHRoaXMuc2hvd0NvbmZpcm1EaWFsb2coe1xyXG4gICAgICAgIHRpdGxlOiAn56Gu6K6k5oC757uTJyxcclxuICAgICAgICBtZXNzYWdlOiAn6L+Z5bCG5a+55pyA5paw55qE6IGK5aSp5raI5oGv6L+b6KGM5oC757uT77yM5bm25Y+R6YCB5Yiw5paw5qW85bGC44CC56Gu5a6a6KaB57un57ut5ZCX77yfJyxcclxuICAgICAgICBjb25maXJtVGV4dDogJ+ehruiupOaAu+e7kycsXHJcbiAgICAgICAgY2FuY2VsVGV4dDogJ+WPlua2iCcsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKCFjb25maXJtZWQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOabtOaWsOacgOWQjuaAu+e7k+aXtumXtFxyXG4gICAgICB0aGlzLmxhc3RTdW1tYXJ5VGltZSA9IG5vdztcclxuXHJcbiAgICAgIC8vIOiuvue9ruWkhOeQhueKtuaAgVxyXG4gICAgICB0aGlzLnNldFN0YXRlKEV4dGVuc2lvblN0YXRlLlBST0NFU1NJTkcpO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coJ1tFeHRlbnNpb25TZXR0aW5nc01hbmFnZXJdIOW8gOWni+WkhOeQhuiBiuWkqeaAu+e7ky4uLicpO1xyXG5cclxuICAgICAgLy8g6LCD55So6IGK5aSp5oC757uT5pyN5Yqh5omn6KGM5a6M5pW055qE5oC757uT5bel5L2c5rWB56iLXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuY2hhdFN1bW1hcnlTZXJ2aWNlLmV4ZWN1dGVTdW1tYXJ5V29ya2Zsb3coKTtcclxuXHJcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdbRXh0ZW5zaW9uU2V0dGluZ3NNYW5hZ2VyXSDinIUg6IGK5aSp5oC757uT5a6M5oiQJyk7XHJcblxyXG4gICAgICAgIC8vIOaYvuekuuaIkOWKn+a2iOaBr+WSjOe7n+iuoeS/oeaBr1xyXG4gICAgICAgIGlmIChyZXN1bHQuY29udGVudCkge1xyXG4gICAgICAgICAgY29uc3Qgc3RhdHMgPSB0aGlzLmNoYXRTdW1tYXJ5U2VydmljZS5nZXRTdW1tYXJ5U3RhdHMocmVzdWx0LmNvbnRlbnQpO1xyXG4gICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoYOaAu+e7k+WujOaIkO+8geeUn+aIkOS6hiAke3N0YXRzLmV2ZW50Q291bnR9IOS4quS6i+S7tu+8jOWFsSAke3N0YXRzLmNoYXJhY3RlckNvdW50fSDlrZdgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOiHquWKqOWFs+mXreaJqeWxleiuvue9ruaooeaAgeahhlxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgfSwgMjAwMCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignW0V4dGVuc2lvblNldHRpbmdzTWFuYWdlcl0g6IGK5aSp5oC757uT5aSx6LSlOicsIHJlc3VsdC5lcnJvcik7XHJcbiAgICAgICAgLy8g6ZSZ6K+v5raI5oGv5bey57uP5ZyoQ2hhdFN1bW1hcnlTZXJ2aWNl5Lit5aSE55CG5LqGXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoRXh0ZW5zaW9uU3RhdGUuSURMRSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdbRXh0ZW5zaW9uU2V0dGluZ3NNYW5hZ2VyXSDlpITnkIbmgLvnu5Por7fmsYLlpLHotKU6JywgZXJyb3IpO1xyXG4gICAgICB0b2FzdHIuZXJyb3IoJ+WkhOeQhuaAu+e7k+ivt+axguWksei0pe+8jOivt+eojeWQjumHjeivlScpO1xyXG4gICAgICB0aGlzLnNldFN0YXRlKEV4dGVuc2lvblN0YXRlLkVSUk9SKTtcclxuXHJcbiAgICAgIC8vIDXnp5LlkI7ph43nva7nirbmgIFcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShFeHRlbnNpb25TdGF0ZS5JRExFKTtcclxuICAgICAgfSwgNTAwMCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmmL7npLrnoa7orqTlr7nor53moYZcclxuICAgKi9cclxuICBwcml2YXRlIHNob3dDb25maXJtRGlhbG9nKGNvbmZpZzogQ29uZmlybWF0aW9uRGlhbG9nQ29uZmlnKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgIC8vIOenu+mZpOeOsOacieeahOWvueivneahhu+8iOWmguaenOacie+8iVxyXG4gICAgICBjb25zdCBleGlzdGluZ0RpYWxvZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5leHRlbnNpb24tY29uZmlybS1kaWFsb2ctb3ZlcmxheScpO1xyXG4gICAgICBpZiAoZXhpc3RpbmdEaWFsb2cpIHtcclxuICAgICAgICBleGlzdGluZ0RpYWxvZy5yZW1vdmUoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5Yib5bu656Gu6K6k5a+56K+d5qGGXHJcbiAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgb3ZlcmxheS5jbGFzc05hbWUgPSAnZXh0ZW5zaW9uLWNvbmZpcm0tZGlhbG9nLW92ZXJsYXknO1xyXG5cclxuICAgICAgY29uc3QgZGlhbG9nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIGRpYWxvZy5jbGFzc05hbWUgPSAnZXh0ZW5zaW9uLWNvbmZpcm0tZGlhbG9nJztcclxuXHJcbiAgICAgIGRpYWxvZy5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImRpYWxvZy1oZWFkZXJcIj5cclxuICAgICAgICAgIDxoMz7imqDvuI8gJHtjb25maWcudGl0bGV9PC9oMz5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGlhbG9nLWNvbnRlbnRcIj5cclxuICAgICAgICAgIDxwPiR7Y29uZmlnLm1lc3NhZ2V9PC9wPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJkaWFsb2ctYnV0dG9uc1wiPlxyXG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImNhbmNlbC1idG5cIj4ke2NvbmZpZy5jYW5jZWxUZXh0IHx8ICflj5bmtognfTwvYnV0dG9uPlxyXG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImNvbmZpcm0tYnRuIHByaW1hcnlcIj4ke2NvbmZpZy5jb25maXJtVGV4dCB8fCAn56Gu6K6kJ308L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgYDtcclxuXHJcbiAgICAgIG92ZXJsYXkuYXBwZW5kQ2hpbGQoZGlhbG9nKTtcclxuXHJcbiAgICAgIC8vIOWwhuWvueivneahhua3u+WKoOWIsOaJqeWxleiuvue9ruaooeaAgeahhuWGhemDqO+8jOehruS/neWcqOato+ehrueahOWghuWPoOS4iuS4i+aWh+S4rVxyXG4gICAgICBpZiAodGhpcy5leHRlbnNpb25Nb2RhbCkge1xyXG4gICAgICAgIHRoaXMuZXh0ZW5zaW9uTW9kYWwuYXBwZW5kQ2hpbGQob3ZlcmxheSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdmVybGF5KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g57uR5a6a5LqL5Lu2XHJcbiAgICAgIGNvbnN0IGNhbmNlbEJ0biA9IGRpYWxvZy5xdWVyeVNlbGVjdG9yKCcuY2FuY2VsLWJ0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgICBjb25zdCBjb25maXJtQnRuID0gZGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJy5jb25maXJtLWJ0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5cclxuICAgICAgY29uc3QgY2xlYW51cCA9ICgpID0+IHtcclxuICAgICAgICBvdmVybGF5LnJlbW92ZSgpO1xyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBjbGVhbnVwKCk7XHJcbiAgICAgICAgcmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uZmlybUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBjbGVhbnVwKCk7XHJcbiAgICAgICAgcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyDngrnlh7vlpJbpg6jlhbPpl61cclxuICAgICAgb3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xyXG4gICAgICAgIGlmIChlLnRhcmdldCA9PT0gb3ZlcmxheSkge1xyXG4gICAgICAgICAgY2xlYW51cCgpO1xyXG4gICAgICAgICAgcmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIEVTQ+mUruWFs+mXrVxyXG4gICAgICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuICAgICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgICAgICBjbGVhbnVwKCk7XHJcbiAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6K6+572u57uE5Lu254q25oCBXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzZXRTdGF0ZShuZXdTdGF0ZTogRXh0ZW5zaW9uU3RhdGUpOiB2b2lkIHtcclxuICAgIHRoaXMuc3RhdGUgPSBuZXdTdGF0ZTtcclxuXHJcbiAgICAvLyDmm7TmlrBVSeeKtuaAgVxyXG4gICAgaWYgKHRoaXMubW9kYWxDb250YWluZXIpIHtcclxuICAgICAgdGhpcy5tb2RhbENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdsb2FkaW5nJywgJ3Byb2Nlc3NpbmcnLCAnZXJyb3InKTtcclxuXHJcbiAgICAgIHN3aXRjaCAobmV3U3RhdGUpIHtcclxuICAgICAgICBjYXNlIEV4dGVuc2lvblN0YXRlLkxPQURJTkc6XHJcbiAgICAgICAgICB0aGlzLm1vZGFsQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2xvYWRpbmcnKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgRXh0ZW5zaW9uU3RhdGUuUFJPQ0VTU0lORzpcclxuICAgICAgICAgIHRoaXMubW9kYWxDb250YWluZXIuY2xhc3NMaXN0LmFkZCgncHJvY2Vzc2luZycpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBFeHRlbnNpb25TdGF0ZS5FUlJPUjpcclxuICAgICAgICAgIHRoaXMubW9kYWxDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnZXJyb3InKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5pu05paw5oyJ6ZKu54q25oCBXHJcbiAgICBpZiAodGhpcy5zdW1tYXJ5QnRuKSB7XHJcbiAgICAgIHRoaXMuc3VtbWFyeUJ0bi5kaXNhYmxlZCA9IG5ld1N0YXRlID09PSBFeHRlbnNpb25TdGF0ZS5QUk9DRVNTSU5HIHx8IG5ld1N0YXRlID09PSBFeHRlbnNpb25TdGF0ZS5MT0FESU5HO1xyXG5cclxuICAgICAgc3dpdGNoIChuZXdTdGF0ZSkge1xyXG4gICAgICAgIGNhc2UgRXh0ZW5zaW9uU3RhdGUuUFJPQ0VTU0lORzpcclxuICAgICAgICAgIHRoaXMuc3VtbWFyeUJ0bi5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYnRuLXRleHRcIj7lpITnkIbkuK0uLi48L3NwYW4+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYnRuLWRlc2NcIj7mraPlnKjnlJ/miJDmgLvnu5M8L3NwYW4+XHJcbiAgICAgICAgICBgO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBFeHRlbnNpb25TdGF0ZS5MT0FESU5HOlxyXG4gICAgICAgICAgdGhpcy5zdW1tYXJ5QnRuLmlubmVySFRNTCA9IGBcclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJidG4tdGV4dFwiPuWKoOi9veS4rS4uLjwvc3Bhbj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJidG4tZGVzY1wiPuato+WcqOWIneWni+WMljwvc3Bhbj5cclxuICAgICAgICAgIGA7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEV4dGVuc2lvblN0YXRlLkVSUk9SOlxyXG4gICAgICAgICAgdGhpcy5zdW1tYXJ5QnRuLmlubmVySFRNTCA9IGBcclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJidG4tdGV4dFwiPuaAu+e7k+iBiuWkqeWGheWuuTwvc3Bhbj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJidG4tZGVzY1wiPueCueWHu+mHjeivlTwvc3Bhbj5cclxuICAgICAgICAgIGA7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgdGhpcy5zdW1tYXJ5QnRuLmlubmVySFRNTCA9IGBcclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJidG4tdGV4dFwiPuaAu+e7k+iBiuWkqeWGheWuuTwvc3Bhbj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJidG4tZGVzY1wiPuWvueacgOaWsOa2iOaBr+i/m+ihjOaAu+e7kzwvc3Bhbj5cclxuICAgICAgICAgIGA7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5b2T5YmN54q25oCBXHJcbiAgICovXHJcbiAgcHVibGljIGdldEN1cnJlbnRTdGF0ZSgpOiBFeHRlbnNpb25TdGF0ZSB7XHJcbiAgICByZXR1cm4gdGhpcy5zdGF0ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOajgOafpeaooeaAgeahhuaYr+WQpuWPr+ingVxyXG4gICAqL1xyXG4gIHB1YmxpYyBpc01vZGFsVmlzaWJsZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLmlzVmlzaWJsZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOabtOaWsOiBiuWkqei/geenu+aMiemSrueKtuaAgVxyXG4gICAqL1xyXG4gIHByaXZhdGUgdXBkYXRlTWlncmF0aW9uQnV0dG9uU3RhdGUoKTogdm9pZCB7XHJcbiAgICBpZiAoIXRoaXMubWlncmF0aW9uQnRuKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgaXNFbmFibGVkID0gdGhpcy5jaGF0TWlncmF0aW9uTWFuYWdlci5pc0ZlYXR1cmVFbmFibGVkKCk7XHJcbiAgICBjb25zdCBzdGF0dXNFbGVtZW50ID0gdGhpcy5taWdyYXRpb25CdG4ucXVlcnlTZWxlY3RvcignLmJ0bi1zdGF0dXMnKTtcclxuXHJcbiAgICBpZiAoc3RhdHVzRWxlbWVudCkge1xyXG4gICAgICBzdGF0dXNFbGVtZW50LnRleHRDb250ZW50ID0gaXNFbmFibGVkID8gJ+W3suWQr+eUqCcgOiAn5bey56aB55SoJztcclxuICAgIH1cclxuXHJcbiAgICAvLyDmm7TmlrDmjInpkq7moLflvI9cclxuICAgIGlmIChpc0VuYWJsZWQpIHtcclxuICAgICAgdGhpcy5taWdyYXRpb25CdG4uY2xhc3NMaXN0LmFkZCgnZW5hYmxlZCcpO1xyXG4gICAgICB0aGlzLm1pZ3JhdGlvbkJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5taWdyYXRpb25CdG4uY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcclxuICAgICAgdGhpcy5taWdyYXRpb25CdG4uY2xhc3NMaXN0LnJlbW92ZSgnZW5hYmxlZCcpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6ZSA5q+B57uE5Lu2XHJcbiAgICovXHJcbiAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICB0aGlzLmhpZGUoKTtcclxuXHJcbiAgICAvLyDplIDmr4HogYrlpKnmgLvnu5PmnI3liqFcclxuICAgIGlmICh0aGlzLmNoYXRTdW1tYXJ5U2VydmljZSkge1xyXG4gICAgICB0aGlzLmNoYXRTdW1tYXJ5U2VydmljZS5kZXN0cm95KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g56e76Zmk5qih5oCB5qGG5YWD57SgXHJcbiAgICBpZiAodGhpcy5leHRlbnNpb25Nb2RhbCkge1xyXG4gICAgICB0aGlzLmV4dGVuc2lvbk1vZGFsLnJlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOaBouWkjeiDjOaZr+a7muWKqFxyXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICcnO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKCdbRXh0ZW5zaW9uU2V0dGluZ3NNYW5hZ2VyXSDnu4Tku7blt7LplIDmr4EnKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/extensions/ExtensionSettingsManager.ts\n\n}');
  },
  "./src/多云熊/备份/给rovo的/modules/extensions/MessageProcessor.ts": 
  /*!******************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/extensions/MessageProcessor.ts ***!
  \******************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MessageProcessor: () => (/* binding */ MessageProcessor)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ \"./src/多云熊/备份/给rovo的/modules/extensions/types.ts\");\n/**\n * MessageProcessor - 消息处理器\n * 负责获取、格式化和处理聊天消息\n */\n\nclass MessageProcessor {\n    static instance;\n    constructor() { }\n    /**\n     * 获取单例实例\n     */\n    static getInstance() {\n        if (!MessageProcessor.instance) {\n            MessageProcessor.instance = new MessageProcessor();\n        }\n        return MessageProcessor.instance;\n    }\n    /**\n     * 获取最新的一条消息\n     * @returns 最新消息数据或null\n     */\n    getLatestMessage() {\n        try {\n            console.log('[MessageProcessor] 开始获取最新消息...');\n            // 使用getChatMessages(-1)获取最新的一条消息\n            const messages = getChatMessages(-1);\n            if (!messages || messages.length === 0) {\n                console.warn('[MessageProcessor] 没有找到任何消息');\n                throw new Error(_types__WEBPACK_IMPORTED_MODULE_0__.SummaryErrorType.MESSAGE_NOT_FOUND);\n            }\n            const latestMessage = messages[0];\n            // 转换为标准的MessageData格式\n            const messageData = {\n                id: latestMessage.message_id,\n                content: latestMessage.message || '',\n                sender: latestMessage.name || '未知用户',\n                timestamp: this.getCurrentTimestamp(),\n                role: latestMessage.role || 'user',\n            };\n            // 验证消息内容\n            if (!messageData.content.trim()) {\n                console.warn('[MessageProcessor] 最新消息内容为空');\n                throw new Error(_types__WEBPACK_IMPORTED_MODULE_0__.SummaryErrorType.MESSAGE_NOT_FOUND);\n            }\n            console.log('[MessageProcessor] ✅ 成功获取最新消息');\n            return messageData;\n        }\n        catch (error) {\n            console.error('[MessageProcessor] 获取最新消息失败:', error);\n            if (error.message === _types__WEBPACK_IMPORTED_MODULE_0__.SummaryErrorType.MESSAGE_NOT_FOUND) {\n                throw error;\n            }\n            throw new Error(_types__WEBPACK_IMPORTED_MODULE_0__.SummaryErrorType.UNKNOWN_ERROR);\n        }\n    }\n    /**\n     * 格式化消息内容用于总结\n     * @param message 消息数据\n     * @returns 格式化后的消息内容\n     */\n    formatMessageForSummary(message) {\n        try {\n            console.log('[MessageProcessor] 开始格式化消息内容...');\n            // 基础格式化：发送者 + 内容\n            let formattedContent = '';\n            // 根据角色确定显示名称\n            let displayName = message.sender;\n            if (message.role === 'user') {\n                displayName = '用户';\n            }\n            else if (message.role === 'assistant') {\n                displayName = message.sender || '助手';\n            }\n            else if (message.role === 'system') {\n                displayName = '系统';\n            }\n            // 格式化消息内容\n            formattedContent = `${displayName}: ${message.content.trim()}`;\n            // 添加时间戳信息（如果需要）\n            if (message.timestamp) {\n                formattedContent += `\\n时间: ${message.timestamp}`;\n            }\n            console.log('[MessageProcessor] ✅ 消息内容格式化完成');\n            return formattedContent;\n        }\n        catch (error) {\n            console.error('[MessageProcessor] 格式化消息内容失败:', error);\n            throw new Error(_types__WEBPACK_IMPORTED_MODULE_0__.SummaryErrorType.UNKNOWN_ERROR);\n        }\n    }\n    /**\n     * 执行斜杠命令\n     * @param command 要执行的命令\n     * @returns 执行结果\n     */\n    async executeSlashCommand(command) {\n        try {\n            console.log('[MessageProcessor] 执行斜杠命令:', command);\n            // 验证命令格式\n            if (!command.startsWith('/')) {\n                throw new Error('无效的斜杠命令格式');\n            }\n            // 执行命令\n            triggerSlash(command);\n            console.log('[MessageProcessor] ✅ 斜杠命令执行成功');\n            return true;\n        }\n        catch (error) {\n            console.error('[MessageProcessor] 斜杠命令执行失败:', error);\n            // 根据命令类型确定错误类型\n            if (command.includes('/sendas')) {\n                throw new Error(_types__WEBPACK_IMPORTED_MODULE_0__.SummaryErrorType.SENDAS_COMMAND_FAILED);\n            }\n            else if (command.includes('/hide')) {\n                throw new Error(_types__WEBPACK_IMPORTED_MODULE_0__.SummaryErrorType.HIDE_COMMAND_FAILED);\n            }\n            throw new Error(_types__WEBPACK_IMPORTED_MODULE_0__.SummaryErrorType.UNKNOWN_ERROR);\n        }\n    }\n    /**\n     * 发送总结到新楼层\n     * @param summary 总结内容\n     * @param characterName 角色名称\n     * @returns 执行结果\n     */\n    async sendSummaryToNewFloor(summary, characterName) {\n        try {\n            console.log('[MessageProcessor] 开始发送总结到新楼层...');\n            // 验证总结内容\n            if (!summary.trim()) {\n                throw new Error('总结内容不能为空');\n            }\n            // 确定角色名称\n            const finalCharacterName = characterName || this.getCurrentCharacterName();\n            // 构建/sendas命令\n            const sendasCommand = `/sendas name=\"${finalCharacterName}\" ${summary}`;\n            // 执行/sendas命令\n            await this.executeSlashCommand(sendasCommand);\n            console.log('[MessageProcessor] ✅ 总结已发送到新楼层');\n            return true;\n        }\n        catch (error) {\n            console.error('[MessageProcessor] 发送总结到新楼层失败:', error);\n            throw error;\n        }\n    }\n    /**\n     * 隐藏原楼层\n     * @param messageId 要隐藏的消息楼层号，如果不提供则隐藏最新消息\n     * @returns 执行结果\n     */\n    async hideOriginalFloor(messageId) {\n        try {\n            console.log('[MessageProcessor] 开始隐藏原楼层...');\n            // 如果没有提供messageId，获取最新消息的ID\n            let targetMessageId = messageId;\n            if (targetMessageId === undefined) {\n                const latestMessage = this.getLatestMessage();\n                if (latestMessage) {\n                    targetMessageId = latestMessage.id;\n                }\n                else {\n                    throw new Error('无法获取要隐藏的消息ID');\n                }\n            }\n            // 执行/hide命令，指定要隐藏的楼层号\n            const hideCommand = `/hide ${targetMessageId}`;\n            await this.executeSlashCommand(hideCommand);\n            console.log('[MessageProcessor] ✅ 原楼层已隐藏，楼层号:', targetMessageId);\n            return true;\n        }\n        catch (error) {\n            console.error('[MessageProcessor] 隐藏原楼层失败:', error);\n            throw error;\n        }\n    }\n    /**\n     * 获取当前角色名称\n     * @returns 角色名称\n     */\n    getCurrentCharacterName() {\n        try {\n            // 尝试从最新消息获取角色名称\n            const latestMessage = this.getLatestMessage();\n            if (latestMessage && latestMessage.role === 'assistant' && latestMessage.sender) {\n                return latestMessage.sender;\n            }\n            // 如果无法获取，使用默认名称\n            return '助手';\n        }\n        catch (error) {\n            console.warn('[MessageProcessor] 获取角色名称失败，使用默认名称');\n            return '助手';\n        }\n    }\n    /**\n     * 获取当前时间戳\n     * @returns 格式化的时间戳\n     */\n    getCurrentTimestamp() {\n        const now = new Date();\n        return now.toLocaleTimeString('zh-CN', {\n            hour: '2-digit',\n            minute: '2-digit',\n            second: '2-digit',\n        });\n    }\n    /**\n     * 验证消息内容\n     * @param content 消息内容\n     * @returns 是否有效\n     */\n    validateMessageContent(content) {\n        if (!content || typeof content !== 'string') {\n            return false;\n        }\n        const trimmedContent = content.trim();\n        // 检查是否为空\n        if (trimmedContent.length === 0) {\n            return false;\n        }\n        // 检查长度限制（避免过长的消息）\n        if (trimmedContent.length > 50000) {\n            console.warn('[MessageProcessor] 消息内容过长:', trimmedContent.length);\n            return false;\n        }\n        return true;\n    }\n    /**\n     * 获取消息统计信息\n     * @param message 消息数据\n     * @returns 统计信息\n     */\n    getMessageStats(message) {\n        const content = message.content || '';\n        return {\n            characterCount: content.length,\n            wordCount: content.split(/\\s+/).filter(word => word.length > 0).length,\n            lineCount: content.split('\\n').length,\n        };\n    }\n    /**\n     * 清理和标准化消息内容\n     * @param content 原始消息内容\n     * @returns 清理后的内容\n     */\n    cleanMessageContent(content) {\n        if (!content)\n            return '';\n        return (content\n            .trim()\n            // 标准化换行符\n            .replace(/\\r\\n/g, '\\n')\n            .replace(/\\r/g, '\\n')\n            // 移除特殊控制字符（但保留换行符）\n            .replace(/[\\x00-\\x08\\x0B\\x0C\\x0E-\\x1F\\x7F]/g, '')\n            // 移除多余的连续空格（但保留换行符）\n            .replace(/[ \\t]+/g, ' ')\n            // 移除多余的连续换行符（最多保留两个连续换行）\n            .replace(/\\n{3,}/g, '\\n\\n'));\n    }\n    /**\n     * 销毁消息处理器\n     */\n    destroy() {\n        console.log('[MessageProcessor] 消息处理器已销毁');\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZXh0ZW5zaW9ucy9NZXNzYWdlUHJvY2Vzc29yLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7OztHQUdHO0FBRXFEO0FBY2pELE1BQU0sZ0JBQWdCO0lBQ25CLE1BQU0sQ0FBQyxRQUFRLENBQW1CO0lBRTFDLGdCQUF1QixDQUFDO0lBRXhCOztPQUVHO0lBQ0ksTUFBTSxDQUFDLFdBQVc7UUFDdkIsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQy9CLGdCQUFnQixDQUFDLFFBQVEsR0FBRyxJQUFJLGdCQUFnQixFQUFFLENBQUM7UUFDckQsQ0FBQztRQUNELE9BQU8sZ0JBQWdCLENBQUMsUUFBUSxDQUFDO0lBQ25DLENBQUM7SUFFRDs7O09BR0c7SUFDSSxnQkFBZ0I7UUFDckIsSUFBSSxDQUFDO1lBQ0gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDO1lBRTlDLGlDQUFpQztZQUNqQyxNQUFNLFFBQVEsR0FBRyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUVyQyxJQUFJLENBQUMsUUFBUSxJQUFJLFFBQVEsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFLENBQUM7Z0JBQ3ZDLE9BQU8sQ0FBQyxJQUFJLENBQUMsNkJBQTZCLENBQUMsQ0FBQztnQkFDNUMsTUFBTSxJQUFJLEtBQUssQ0FBQyxvREFBZ0IsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1lBQ3RELENBQUM7WUFFRCxNQUFNLGFBQWEsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFbEMsc0JBQXNCO1lBQ3RCLE1BQU0sV0FBVyxHQUFnQjtnQkFDL0IsRUFBRSxFQUFFLGFBQWEsQ0FBQyxVQUFVO2dCQUM1QixPQUFPLEVBQUUsYUFBYSxDQUFDLE9BQU8sSUFBSSxFQUFFO2dCQUNwQyxNQUFNLEVBQUUsYUFBYSxDQUFDLElBQUksSUFBSSxNQUFNO2dCQUNwQyxTQUFTLEVB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RztJQUNJLGVBQWUsQ0FBQyxPQUFvQjtRQUt6QyxNQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsT0FBTyxJQUFJLEVBQUUsQ0FBQztRQUV0QyxPQUFPO1lBQ0wsY0FBYyxFQUFFLE9BQU8sQ0FBQyxNQUFNO1lBQzlCLFNBQVMsRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTTtZQUN0RSxTQUFTLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNO1NBQ3RDLENBQUM7SUFDSixDQUFDO0lBRUQ7Ozs7T0FJRztJQUNJLG1CQUFtQixDQUFDLE9BQWU7UUFDeEMsSUFBSSxDQUFDLE9BQU87WUFBRSxPQUFPLEVBQUUsQ0FBQztRQUV4QixPQUFPLENBQ0wsT0FBTzthQUNKLElBQUksRUFBRTtZQUNQLFNBQVM7YUFDUixPQUFPLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQzthQUN0QixPQUFPLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQztZQUNyQixtQkFBbUI7YUFDbEIsT0FBTyxDQUFDLG1DQUFtQyxFQUFFLEVBQUUsQ0FBQztZQUNqRCxvQkFBb0I7YUFDbkIsT0FBTyxDQUFDLFNBQVMsRUFBRSxHQUFHLENBQUM7WUFDeEIseUJBQXlCO2FBQ3hCLE9BQU8sQ0FBQyxTQUFTLEVBQUUsTUFBTSxDQUFDLENBQzlCLENBQUM7SUFDSixDQUFDO0lBRUQ7O09BRUc7SUFDSSxPQUFPO1FBQ1osT0FBTyxDQUFDLEdBQUcsQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDO0lBQzdDLENBQUM7Q0FDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZXh0ZW5zaW9ucy9NZXNzYWdlUHJvY2Vzc29yLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogTWVzc2FnZVByb2Nlc3NvciAtIOa2iOaBr+WkhOeQhuWZqFxyXG4gKiDotJ/otKPojrflj5bjgIHmoLzlvI/ljJblkozlpITnkIbogYrlpKnmtojmga9cclxuICovXHJcblxyXG5pbXBvcnQgeyBNZXNzYWdlRGF0YSwgU3VtbWFyeUVycm9yVHlwZSB9IGZyb20gJy4vdHlwZXMnO1xyXG5cclxuLy8g5aOw5piO5YWo5bGA5Ye95pWwXHJcbmRlY2xhcmUgZnVuY3Rpb24gZ2V0Q2hhdE1lc3NhZ2VzKHJhbmdlOiBzdHJpbmcgfCBudW1iZXIpOiBhbnlbXTtcclxuZGVjbGFyZSBmdW5jdGlvbiB0cmlnZ2VyU2xhc2goY29tbWFuZDogc3RyaW5nKTogdm9pZDtcclxuZGVjbGFyZSBmdW5jdGlvbiBnZXRMYXN0TWVzc2FnZUlkKCk6IG51bWJlcjtcclxuXHJcbmRlY2xhcmUgY29uc3QgdG9hc3RyOiB7XHJcbiAgc3VjY2VzczogKG1lc3NhZ2U6IHN0cmluZywgdGl0bGU/OiBzdHJpbmcpID0+IHZvaWQ7XHJcbiAgZXJyb3I6IChtZXNzYWdlOiBzdHJpbmcsIHRpdGxlPzogc3RyaW5nKSA9PiB2b2lkO1xyXG4gIHdhcm5pbmc6IChtZXNzYWdlOiBzdHJpbmcsIHRpdGxlPzogc3RyaW5nKSA9PiB2b2lkO1xyXG4gIGluZm86IChtZXNzYWdlOiBzdHJpbmcsIHRpdGxlPzogc3RyaW5nKSA9PiB2b2lkO1xyXG59O1xyXG5cclxuZXhwb3J0IGNsYXNzIE1lc3NhZ2VQcm9jZXNzb3Ige1xyXG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBNZXNzYWdlUHJvY2Vzc29yO1xyXG5cclxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5Y2V5L6L5a6e5L6LXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBNZXNzYWdlUHJvY2Vzc29yIHtcclxuICAgIGlmICghTWVzc2FnZVByb2Nlc3Nvci5pbnN0YW5jZSkge1xyXG4gICAgICBNZXNzYWdlUHJvY2Vzc29yLmluc3RhbmNlID0gbmV3IE1lc3NhZ2VQcm9jZXNzb3IoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBNZXNzYWdlUHJvY2Vzc29yLmluc3RhbmNlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5pyA5paw55qE5LiA5p2h5raI5oGvXHJcbiAgICogQHJldHVybnMg5pyA5paw5raI5oGv5pWw5o2u5oiWbnVsbFxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRMYXRlc3RNZXNzYWdlKCk6IE1lc3NhZ2VEYXRhIHwgbnVsbCB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnW01lc3NhZ2VQcm9jZXNzb3JdIOW8gOWni+iOt+WPluacgOaWsOa2iOaBry4uLicpO1xyXG5cclxuICAgICAgLy8g5L2/55SoZ2V0Q2hhdE1lc3NhZ2VzKC0xKeiOt+WPluacgOaWsOeahOS4gOadoea2iOaBr1xyXG4gICAgICBjb25zdCBtZXNzYWdlcyA9IGdldENoYXRNZXNzYWdlcygtMSk7XHJcblxyXG4gICAgICBpZiAoIW1lc3NhZ2VzIHx8IG1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignW01lc3NhZ2VQcm9jZXNzb3JdIOayoeacieaJvuWIsOS7u+S9lea2iOaBrycpO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihTdW1tYXJ5RXJyb3JUeXBlLk1FU1NBR0VfTk9UX0ZPVU5EKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgbGF0ZXN0TWVzc2FnZSA9IG1lc3NhZ2VzWzBdO1xyXG5cclxuICAgICAgLy8g6L2s5o2i5Li65qCH5YeG55qETWVzc2FnZURhdGHmoLzlvI9cclxuICAgICAgY29uc3QgbWVzc2FnZURhdGE6IE1lc3NhZ2VEYXRhID0ge1xyXG4gICAgICAgIGlkOiBsYXRlc3RNZXNzYWdlLm1lc3NhZ2VfaWQsXHJcbiAgICAgICAgY29udGVudDogbGF0ZXN0TWVzc2FnZS5tZXNzYWdlIHx8ICcnLFxyXG4gICAgICAgIHNlbmRlcjogbGF0ZXN0TWVzc2FnZS5uYW1lIHx8ICfmnKrnn6XnlKjmiLcnLFxyXG4gICAgICAgIHRpbWVzdGFtcDogdGhpcy5nZXRDdXJyZW50VGltZXN0YW1wKCksXHJcbiAgICAgICAgcm9sZTogbGF0ZXN0TWVzc2FnZS5yb2xlIHx8ICd1c2VyJyxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIOmqjOivgea2iOaBr+WGheWuuVxyXG4gICAgICBpZiAoIW1lc3NhZ2VEYXRhLmNvbnRlbnQudHJpbSgpKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKCdbTWVzc2FnZVByb2Nlc3Nvcl0g5pyA5paw5raI5oGv5YaF5a655Li656m6Jyk7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFN1bW1hcnlFcnJvclR5cGUuTUVTU0FHRV9OT1RfRk9VTkQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnW01lc3NhZ2VQcm9jZXNzb3JdIOKchSDmiJDlip/ojrflj5bmnIDmlrDmtojmga8nKTtcclxuICAgICAgcmV0dXJuIG1lc3NhZ2VEYXRhO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW01lc3NhZ2VQcm9jZXNzb3JdIOiOt+WPluacgOaWsOa2iOaBr+Wksei0pTonLCBlcnJvcik7XHJcblxyXG4gICAgICBpZiAoZXJyb3IubWVzc2FnZSA9PT0gU3VtbWFyeUVycm9yVHlwZS5NRVNTQUdFX05PVF9GT1VORCkge1xyXG4gICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoU3VtbWFyeUVycm9yVHlwZS5VTktOT1dOX0VSUk9SKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOagvOW8j+WMlua2iOaBr+WGheWuueeUqOS6juaAu+e7k1xyXG4gICAqIEBwYXJhbSBtZXNzYWdlIOa2iOaBr+aVsOaNrlxyXG4gICAqIEByZXR1cm5zIOagvOW8j+WMluWQjueahOa2iOaBr+WGheWuuVxyXG4gICAqL1xyXG4gIHB1YmxpYyBmb3JtYXRNZXNzYWdlRm9yU3VtbWFyeShtZXNzYWdlOiBNZXNzYWdlRGF0YSk6IHN0cmluZyB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnW01lc3NhZ2VQcm9jZXNzb3JdIOW8gOWni+agvOW8j+WMlua2iOaBr+WGheWuuS4uLicpO1xyXG5cclxuICAgICAgLy8g5Z+656GA5qC85byP5YyW77ya5Y+R6YCB6ICFICsg5YaF5a65XHJcbiAgICAgIGxldCBmb3JtYXR0ZWRDb250ZW50ID0gJyc7XHJcblxyXG4gICAgICAvLyDmoLnmja7op5LoibLnoa7lrprmmL7npLrlkI3np7BcclxuICAgICAgbGV0IGRpc3BsYXlOYW1lID0gbWVzc2FnZS5zZW5kZXI7XHJcbiAgICAgIGlmIChtZXNzYWdlLnJvbGUgPT09ICd1c2VyJykge1xyXG4gICAgICAgIGRpc3BsYXlOYW1lID0gJ+eUqOaItyc7XHJcbiAgICAgIH0gZWxzZSBpZiAobWVzc2FnZS5yb2xlID09PSAnYXNzaXN0YW50Jykge1xyXG4gICAgICAgIGRpc3BsYXlOYW1lID0gbWVzc2FnZS5zZW5kZXIgfHwgJ+WKqeaJiyc7XHJcbiAgICAgIH0gZWxzZSBpZiAobWVzc2FnZS5yb2xlID09PSAnc3lzdGVtJykge1xyXG4gICAgICAgIGRpc3BsYXlOYW1lID0gJ+ezu+e7nyc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOagvOW8j+WMlua2iOaBr+WGheWuuVxyXG4gICAgICBmb3JtYXR0ZWRDb250ZW50ID0gYCR7ZGlzcGxheU5hbWV9OiAke21lc3NhZ2UuY29udGVudC50cmltKCl9YDtcclxuXHJcbiAgICAgIC8vIOa3u+WKoOaXtumXtOaIs+S/oeaBr++8iOWmguaenOmcgOimge+8iVxyXG4gICAgICBpZiAobWVzc2FnZS50aW1lc3RhbXApIHtcclxuICAgICAgICBmb3JtYXR0ZWRDb250ZW50ICs9IGBcXG7ml7bpl7Q6ICR7bWVzc2FnZS50aW1lc3RhbXB9YDtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc29sZS5sb2coJ1tNZXNzYWdlUHJvY2Vzc29yXSDinIUg5raI5oGv5YaF5a655qC85byP5YyW5a6M5oiQJyk7XHJcblxyXG4gICAgICByZXR1cm4gZm9ybWF0dGVkQ29udGVudDtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNZXNzYWdlUHJvY2Vzc29yXSDmoLzlvI/ljJbmtojmga/lhoXlrrnlpLHotKU6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoU3VtbWFyeUVycm9yVHlwZS5VTktOT1dOX0VSUk9SKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaJp+ihjOaWnOadoOWRveS7pFxyXG4gICAqIEBwYXJhbSBjb21tYW5kIOimgeaJp+ihjOeahOWRveS7pFxyXG4gICAqIEByZXR1cm5zIOaJp+ihjOe7k+aenFxyXG4gICAqL1xyXG4gIHB1YmxpYyBhc3luYyBleGVjdXRlU2xhc2hDb21tYW5kKGNvbW1hbmQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coJ1tNZXNzYWdlUHJvY2Vzc29yXSDmiafooYzmlpzmnaDlkb3ku6Q6JywgY29tbWFuZCk7XHJcblxyXG4gICAgICAvLyDpqozor4Hlkb3ku6TmoLzlvI9cclxuICAgICAgaWYgKCFjb21tYW5kLnN0YXJ0c1dpdGgoJy8nKSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcign5peg5pWI55qE5pac5p2g5ZG95Luk5qC85byPJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOaJp+ihjOWRveS7pFxyXG4gICAgICB0cmlnZ2VyU2xhc2goY29tbWFuZCk7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnW01lc3NhZ2VQcm9jZXNzb3JdIOKchSDmlpzmnaDlkb3ku6TmiafooYzmiJDlip8nKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdbTWVzc2FnZVByb2Nlc3Nvcl0g5pac5p2g5ZG95Luk5omn6KGM5aSx6LSlOicsIGVycm9yKTtcclxuXHJcbiAgICAgIC8vIOagueaNruWRveS7pOexu+Wei+ehruWumumUmeivr+exu+Wei1xyXG4gICAgICBpZiAoY29tbWFuZC5pbmNsdWRlcygnL3NlbmRhcycpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFN1bW1hcnlFcnJvclR5cGUuU0VOREFTX0NPTU1BTkRfRkFJTEVEKTtcclxuICAgICAgfSBlbHNlIGlmIChjb21tYW5kLmluY2x1ZGVzKCcvaGlkZScpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFN1bW1hcnlFcnJvclR5cGUuSElERV9DT01NQU5EX0ZBSUxFRCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihTdW1tYXJ5RXJyb3JUeXBlLlVOS05PV05fRVJST1IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Y+R6YCB5oC757uT5Yiw5paw5qW85bGCXHJcbiAgICogQHBhcmFtIHN1bW1hcnkg5oC757uT5YaF5a65XHJcbiAgICogQHBhcmFtIGNoYXJhY3Rlck5hbWUg6KeS6Imy5ZCN56ewXHJcbiAgICogQHJldHVybnMg5omn6KGM57uT5p6cXHJcbiAgICovXHJcbiAgcHVibGljIGFzeW5jIHNlbmRTdW1tYXJ5VG9OZXdGbG9vcihzdW1tYXJ5OiBzdHJpbmcsIGNoYXJhY3Rlck5hbWU/OiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdbTWVzc2FnZVByb2Nlc3Nvcl0g5byA5aeL5Y+R6YCB5oC757uT5Yiw5paw5qW85bGCLi4uJyk7XHJcblxyXG4gICAgICAvLyDpqozor4HmgLvnu5PlhoXlrrlcclxuICAgICAgaWYgKCFzdW1tYXJ5LnRyaW0oKSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcign5oC757uT5YaF5a655LiN6IO95Li656m6Jyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOehruWumuinkuiJsuWQjeensFxyXG4gICAgICBjb25zdCBmaW5hbENoYXJhY3Rlck5hbWUgPSBjaGFyYWN0ZXJOYW1lIHx8IHRoaXMuZ2V0Q3VycmVudENoYXJhY3Rlck5hbWUoKTtcclxuXHJcbiAgICAgIC8vIOaehOW7ui9zZW5kYXPlkb3ku6RcclxuICAgICAgY29uc3Qgc2VuZGFzQ29tbWFuZCA9IGAvc2VuZGFzIG5hbWU9XCIke2ZpbmFsQ2hhcmFjdGVyTmFtZX1cIiAke3N1bW1hcnl9YDtcclxuXHJcbiAgICAgIC8vIOaJp+ihjC9zZW5kYXPlkb3ku6RcclxuICAgICAgYXdhaXQgdGhpcy5leGVjdXRlU2xhc2hDb21tYW5kKHNlbmRhc0NvbW1hbmQpO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coJ1tNZXNzYWdlUHJvY2Vzc29yXSDinIUg5oC757uT5bey5Y+R6YCB5Yiw5paw5qW85bGCJyk7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW01lc3NhZ2VQcm9jZXNzb3JdIOWPkemAgeaAu+e7k+WIsOaWsOalvOWxguWksei0pTonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6ZqQ6JeP5Y6f5qW85bGCXHJcbiAgICogQHBhcmFtIG1lc3NhZ2VJZCDopoHpmpDol4/nmoTmtojmga/mpbzlsYLlj7fvvIzlpoLmnpzkuI3mj5DkvpvliJnpmpDol4/mnIDmlrDmtojmga9cclxuICAgKiBAcmV0dXJucyDmiafooYznu5PmnpxcclxuICAgKi9cclxuICBwdWJsaWMgYXN5bmMgaGlkZU9yaWdpbmFsRmxvb3IobWVzc2FnZUlkPzogbnVtYmVyKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnW01lc3NhZ2VQcm9jZXNzb3JdIOW8gOWni+makOiXj+WOn+alvOWxgi4uLicpO1xyXG5cclxuICAgICAgLy8g5aaC5p6c5rKh5pyJ5o+Q5L6bbWVzc2FnZUlk77yM6I635Y+W5pyA5paw5raI5oGv55qESURcclxuICAgICAgbGV0IHRhcmdldE1lc3NhZ2VJZCA9IG1lc3NhZ2VJZDtcclxuICAgICAgaWYgKHRhcmdldE1lc3NhZ2VJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgY29uc3QgbGF0ZXN0TWVzc2FnZSA9IHRoaXMuZ2V0TGF0ZXN0TWVzc2FnZSgpO1xyXG4gICAgICAgIGlmIChsYXRlc3RNZXNzYWdlKSB7XHJcbiAgICAgICAgICB0YXJnZXRNZXNzYWdlSWQgPSBsYXRlc3RNZXNzYWdlLmlkO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+aXoOazleiOt+WPluimgemakOiXj+eahOa2iOaBr0lEJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDmiafooYwvaGlkZeWRveS7pO+8jOaMh+WumuimgemakOiXj+eahOalvOWxguWPt1xyXG4gICAgICBjb25zdCBoaWRlQ29tbWFuZCA9IGAvaGlkZSAke3RhcmdldE1lc3NhZ2VJZH1gO1xyXG4gICAgICBhd2FpdCB0aGlzLmV4ZWN1dGVTbGFzaENvbW1hbmQoaGlkZUNvbW1hbmQpO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coJ1tNZXNzYWdlUHJvY2Vzc29yXSDinIUg5Y6f5qW85bGC5bey6ZqQ6JeP77yM5qW85bGC5Y+3OicsIHRhcmdldE1lc3NhZ2VJZCk7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW01lc3NhZ2VQcm9jZXNzb3JdIOmakOiXj+WOn+alvOWxguWksei0pTonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5b2T5YmN6KeS6Imy5ZCN56ewXHJcbiAgICogQHJldHVybnMg6KeS6Imy5ZCN56ewXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBnZXRDdXJyZW50Q2hhcmFjdGVyTmFtZSgpOiBzdHJpbmcge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g5bCd6K+V5LuO5pyA5paw5raI5oGv6I635Y+W6KeS6Imy5ZCN56ewXHJcbiAgICAgIGNvbnN0IGxhdGVzdE1lc3NhZ2UgPSB0aGlzLmdldExhdGVzdE1lc3NhZ2UoKTtcclxuICAgICAgaWYgKGxhdGVzdE1lc3NhZ2UgJiYgbGF0ZXN0TWVzc2FnZS5yb2xlID09PSAnYXNzaXN0YW50JyAmJiBsYXRlc3RNZXNzYWdlLnNlbmRlcikge1xyXG4gICAgICAgIHJldHVybiBsYXRlc3RNZXNzYWdlLnNlbmRlcjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5aaC5p6c5peg5rOV6I635Y+W77yM5L2/55So6buY6K6k5ZCN56ewXHJcbiAgICAgIHJldHVybiAn5Yqp5omLJztcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignW01lc3NhZ2VQcm9jZXNzb3JdIOiOt+WPluinkuiJsuWQjeensOWksei0pe+8jOS9v+eUqOm7mOiupOWQjeensCcpO1xyXG4gICAgICByZXR1cm4gJ+WKqeaJiyc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5blvZPliY3ml7bpl7TmiLNcclxuICAgKiBAcmV0dXJucyDmoLzlvI/ljJbnmoTml7bpl7TmiLNcclxuICAgKi9cclxuICBwcml2YXRlIGdldEN1cnJlbnRUaW1lc3RhbXAoKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICByZXR1cm4gbm93LnRvTG9jYWxlVGltZVN0cmluZygnemgtQ04nLCB7XHJcbiAgICAgIGhvdXI6ICcyLWRpZ2l0JyxcclxuICAgICAgbWludXRlOiAnMi1kaWdpdCcsXHJcbiAgICAgIHNlY29uZDogJzItZGlnaXQnLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDpqozor4Hmtojmga/lhoXlrrlcclxuICAgKiBAcGFyYW0gY29udGVudCDmtojmga/lhoXlrrlcclxuICAgKiBAcmV0dXJucyDmmK/lkKbmnInmlYhcclxuICAgKi9cclxuICBwdWJsaWMgdmFsaWRhdGVNZXNzYWdlQ29udGVudChjb250ZW50OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIGlmICghY29udGVudCB8fCB0eXBlb2YgY29udGVudCAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRyaW1tZWRDb250ZW50ID0gY29udGVudC50cmltKCk7XHJcblxyXG4gICAgLy8g5qOA5p+l5piv5ZCm5Li656m6XHJcbiAgICBpZiAodHJpbW1lZENvbnRlbnQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDmo4Dmn6Xplb/luqbpmZDliLbvvIjpgb/lhY3ov4fplb/nmoTmtojmga/vvIlcclxuICAgIGlmICh0cmltbWVkQ29udGVudC5sZW5ndGggPiA1MDAwMCkge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ1tNZXNzYWdlUHJvY2Vzc29yXSDmtojmga/lhoXlrrnov4fplb86JywgdHJpbW1lZENvbnRlbnQubGVuZ3RoKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5raI5oGv57uf6K6h5L+h5oGvXHJcbiAgICogQHBhcmFtIG1lc3NhZ2Ug5raI5oGv5pWw5o2uXHJcbiAgICogQHJldHVybnMg57uf6K6h5L+h5oGvXHJcbiAgICovXHJcbiAgcHVibGljIGdldE1lc3NhZ2VTdGF0cyhtZXNzYWdlOiBNZXNzYWdlRGF0YSk6IHtcclxuICAgIGNoYXJhY3RlckNvdW50OiBudW1iZXI7XHJcbiAgICB3b3JkQ291bnQ6IG51bWJlcjtcclxuICAgIGxpbmVDb3VudDogbnVtYmVyO1xyXG4gIH0ge1xyXG4gICAgY29uc3QgY29udGVudCA9IG1lc3NhZ2UuY29udGVudCB8fCAnJztcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBjaGFyYWN0ZXJDb3VudDogY29udGVudC5sZW5ndGgsXHJcbiAgICAgIHdvcmRDb3VudDogY29udGVudC5zcGxpdCgvXFxzKy8pLmZpbHRlcih3b3JkID0+IHdvcmQubGVuZ3RoID4gMCkubGVuZ3RoLFxyXG4gICAgICBsaW5lQ291bnQ6IGNvbnRlbnQuc3BsaXQoJ1xcbicpLmxlbmd0aCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmuIXnkIblkozmoIflh4bljJbmtojmga/lhoXlrrlcclxuICAgKiBAcGFyYW0gY29udGVudCDljp/lp4vmtojmga/lhoXlrrlcclxuICAgKiBAcmV0dXJucyDmuIXnkIblkI7nmoTlhoXlrrlcclxuICAgKi9cclxuICBwdWJsaWMgY2xlYW5NZXNzYWdlQ29udGVudChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgaWYgKCFjb250ZW50KSByZXR1cm4gJyc7XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgY29udGVudFxyXG4gICAgICAgIC50cmltKClcclxuICAgICAgICAvLyDmoIflh4bljJbmjaLooYznrKZcclxuICAgICAgICAucmVwbGFjZSgvXFxyXFxuL2csICdcXG4nKVxyXG4gICAgICAgIC5yZXBsYWNlKC9cXHIvZywgJ1xcbicpXHJcbiAgICAgICAgLy8g56e76Zmk54m55q6K5o6n5Yi25a2X56ym77yI5L2G5L+d55WZ5o2i6KGM56ym77yJXHJcbiAgICAgICAgLnJlcGxhY2UoL1tcXHgwMC1cXHgwOFxceDBCXFx4MENcXHgwRS1cXHgxRlxceDdGXS9nLCAnJylcclxuICAgICAgICAvLyDnp7vpmaTlpJrkvZnnmoTov57nu63nqbrmoLzvvIjkvYbkv53nlZnmjaLooYznrKbvvIlcclxuICAgICAgICAucmVwbGFjZSgvWyBcXHRdKy9nLCAnICcpXHJcbiAgICAgICAgLy8g56e76Zmk5aSa5L2Z55qE6L+e57ut5o2i6KGM56ym77yI5pyA5aSa5L+d55WZ5Lik5Liq6L+e57ut5o2i6KGM77yJXHJcbiAgICAgICAgLnJlcGxhY2UoL1xcbnszLH0vZywgJ1xcblxcbicpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6ZSA5q+B5raI5oGv5aSE55CG5ZmoXHJcbiAgICovXHJcbiAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICBjb25zb2xlLmxvZygnW01lc3NhZ2VQcm9jZXNzb3JdIOa2iOaBr+WkhOeQhuWZqOW3sumUgOavgScpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/extensions/MessageProcessor.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/extensions/extensionSettings.scss": 
  /*!*********************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/extensions/extensionSettings.scss ***!
  \*********************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZXh0ZW5zaW9ucy9leHRlbnNpb25TZXR0aW5ncy5zY3NzIiwibWFwcGluZ3MiOiI7QUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZXh0ZW5zaW9ucy9leHRlbnNpb25TZXR0aW5ncy5zY3NzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/extensions/extensionSettings.scss\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/extensions/index.ts": 
  /*!*******************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/extensions/index.ts ***!
  \*******************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatSummaryService: () => (/* reexport safe */ _ChatSummaryService__WEBPACK_IMPORTED_MODULE_2__.ChatSummaryService),\n/* harmony export */   ErrorHandler: () => (/* reexport safe */ _ErrorHandler__WEBPACK_IMPORTED_MODULE_3__.ErrorHandler),\n/* harmony export */   ExtensionSettingsManager: () => (/* reexport safe */ _ExtensionSettingsManager__WEBPACK_IMPORTED_MODULE_4__.ExtensionSettingsManager),\n/* harmony export */   ExtensionState: () => (/* reexport safe */ _types__WEBPACK_IMPORTED_MODULE_1__.ExtensionState),\n/* harmony export */   MessageProcessor: () => (/* reexport safe */ _MessageProcessor__WEBPACK_IMPORTED_MODULE_5__.MessageProcessor),\n/* harmony export */   SummaryErrorType: () => (/* reexport safe */ _types__WEBPACK_IMPORTED_MODULE_1__.SummaryErrorType),\n/* harmony export */   initializeExtensions: () => (/* binding */ initializeExtensions)\n/* harmony export */ });\n/* harmony import */ var _extensionSettings_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./extensionSettings.scss */ "./src/多云熊/备份/给rovo的/modules/extensions/extensionSettings.scss");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./types */ "./src/多云熊/备份/给rovo的/modules/extensions/types.ts");\n/* harmony import */ var _ChatSummaryService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ChatSummaryService */ "./src/多云熊/备份/给rovo的/modules/extensions/ChatSummaryService.ts");\n/* harmony import */ var _ErrorHandler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ErrorHandler */ "./src/多云熊/备份/给rovo的/modules/extensions/ErrorHandler.ts");\n/* harmony import */ var _ExtensionSettingsManager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ExtensionSettingsManager */ "./src/多云熊/备份/给rovo的/modules/extensions/ExtensionSettingsManager.ts");\n/* harmony import */ var _MessageProcessor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./MessageProcessor */ "./src/多云熊/备份/给rovo的/modules/extensions/MessageProcessor.ts");\n/**\n * 扩展功能模块入口\n * 导出所有扩展功能相关的类和接口\n */\n// 导入样式\n\n// 导出类型定义\n\n// 导出核心组件\n\n\n\n\n// 导入需要在初始化函数中使用的类\n\n// 模块初始化函数\nfunction initializeExtensions() {\n    console.log(\'[Extensions] 扩展功能模块已初始化\');\n    // 确保ExtensionSettingsManager单例已创建\n    _ExtensionSettingsManager__WEBPACK_IMPORTED_MODULE_4__.ExtensionSettingsManager.getInstance();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZXh0ZW5zaW9ucy9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7OztHQUdHO0FBRUgsT0FBTztBQUMyQjtBQUVsQyxTQUFTO0FBQ2U7QUFFeEIsU0FBUztBQUNpRDtBQUNaO0FBQ3dCO0FBQ2hCO0FBRXRELGtCQUFrQjtBQUNvRDtBQUV0RSxVQUFVO0FBQ0gsU0FBUyxvQkFBb0I7SUFDbEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO0lBRXZDLGtDQUFrQztJQUNsQywrRUFBd0IsQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUN6QyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy9leHRlbnNpb25zL2luZGV4LnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICog5omp5bGV5Yqf6IO95qih5Z2X5YWl5Y+jXHJcbiAqIOWvvOWHuuaJgOacieaJqeWxleWKn+iDveebuOWFs+eahOexu+WSjOaOpeWPo1xyXG4gKi9cclxuXHJcbi8vIOWvvOWFpeagt+W8j1xyXG5pbXBvcnQgJy4vZXh0ZW5zaW9uU2V0dGluZ3Muc2Nzcyc7XHJcblxyXG4vLyDlr7zlh7rnsbvlnovlrprkuYlcclxuZXhwb3J0ICogZnJvbSAnLi90eXBlcyc7XHJcblxyXG4vLyDlr7zlh7rmoLjlv4Pnu4Tku7ZcclxuZXhwb3J0IHsgQ2hhdFN1bW1hcnlTZXJ2aWNlIH0gZnJvbSAnLi9DaGF0U3VtbWFyeVNlcnZpY2UnO1xyXG5leHBvcnQgeyBFcnJvckhhbmRsZXIgfSBmcm9tICcuL0Vycm9ySGFuZGxlcic7XHJcbmV4cG9ydCB7IEV4dGVuc2lvblNldHRpbmdzTWFuYWdlciB9IGZyb20gJy4vRXh0ZW5zaW9uU2V0dGluZ3NNYW5hZ2VyJztcclxuZXhwb3J0IHsgTWVzc2FnZVByb2Nlc3NvciB9IGZyb20gJy4vTWVzc2FnZVByb2Nlc3Nvcic7XHJcblxyXG4vLyDlr7zlhaXpnIDopoHlnKjliJ3lp4vljJblh73mlbDkuK3kvb/nlKjnmoTnsbtcclxuaW1wb3J0IHsgRXh0ZW5zaW9uU2V0dGluZ3NNYW5hZ2VyIH0gZnJvbSAnLi9FeHRlbnNpb25TZXR0aW5nc01hbmFnZXInO1xyXG5cclxuLy8g5qih5Z2X5Yid5aeL5YyW5Ye95pWwXHJcbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplRXh0ZW5zaW9ucygpOiB2b2lkIHtcclxuICBjb25zb2xlLmxvZygnW0V4dGVuc2lvbnNdIOaJqeWxleWKn+iDveaooeWdl+W3suWIneWni+WMlicpO1xyXG5cclxuICAvLyDnoa7kv51FeHRlbnNpb25TZXR0aW5nc01hbmFnZXLljZXkvovlt7LliJvlu7pcclxuICBFeHRlbnNpb25TZXR0aW5nc01hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/extensions/index.ts\n\n}');
  },
  "./src/多云熊/备份/给rovo的/modules/extensions/types.ts": 
  /*!*******************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/extensions/types.ts ***!
  \*******************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ExtensionState: () => (/* binding */ ExtensionState),\n/* harmony export */   SummaryErrorType: () => (/* binding */ SummaryErrorType)\n/* harmony export */ });\n/**\n * 扩展功能相关类型定义\n */\n// 错误类型定义\nvar SummaryErrorType;\n(function (SummaryErrorType) {\n    SummaryErrorType["MESSAGE_NOT_FOUND"] = "MESSAGE_NOT_FOUND";\n    SummaryErrorType["AI_GENERATION_FAILED"] = "AI_GENERATION_FAILED";\n    SummaryErrorType["SENDAS_COMMAND_FAILED"] = "SENDAS_COMMAND_FAILED";\n    SummaryErrorType["HIDE_COMMAND_FAILED"] = "HIDE_COMMAND_FAILED";\n    SummaryErrorType["NETWORK_ERROR"] = "NETWORK_ERROR";\n    SummaryErrorType["UNKNOWN_ERROR"] = "UNKNOWN_ERROR";\n})(SummaryErrorType || (SummaryErrorType = {}));\n// 扩展设置管理器状态\nvar ExtensionState;\n(function (ExtensionState) {\n    ExtensionState["IDLE"] = "IDLE";\n    ExtensionState["LOADING"] = "LOADING";\n    ExtensionState["PROCESSING"] = "PROCESSING";\n    ExtensionState["ERROR"] = "ERROR";\n})(ExtensionState || (ExtensionState = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZXh0ZW5zaW9ucy90eXBlcy50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBOztHQUVHO0FBMEJILFNBQVM7QUFDVCxJQUFZLGdCQU9YO0FBUEQsV0FBWSxnQkFBZ0I7SUFDMUIsMkRBQXVDO0lBQ3ZDLGlFQUE2QztJQUM3QyxtRUFBK0M7SUFDL0MsK0RBQTJDO0lBQzNDLG1EQUErQjtJQUMvQixtREFBK0I7QUFDakMsQ0FBQyxFQVBXLGdCQUFnQixLQUFoQixnQkFBZ0IsUUFPM0I7QUFFRCxZQUFZO0FBQ1osSUFBWSxjQUtYO0FBTEQsV0FBWSxjQUFjO0lBQ3hCLCtCQUFhO0lBQ2IscUNBQW1CO0lBQ25CLDJDQUF5QjtJQUN6QixpQ0FBZTtBQUNqQixDQUFDLEVBTFcsY0FBYyxLQUFkLGNBQWMsUUFLekIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WkmuS6keeGii/lpIfku70v57uZcm92b+eahC9tb2R1bGVzL2V4dGVuc2lvbnMvdHlwZXMudHM/Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiDmianlsZXlip/og73nm7jlhbPnsbvlnovlrprkuYlcclxuICovXHJcblxyXG4vLyDmgLvnu5PphY3nva5cclxuZXhwb3J0IGludGVyZmFjZSBTdW1tYXJ5Q29uZmlnIHtcclxuICBwcm9tcHRUZW1wbGF0ZTogc3RyaW5nO1xyXG4gIG1heENoYXRIaXN0b3J5OiBudW1iZXI7XHJcbiAgY2hhcmFjdGVyTmFtZT86IHN0cmluZztcclxufVxyXG5cclxuLy8g5oC757uT57uT5p6cXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3VtbWFyeVJlc3VsdCB7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICBjb250ZW50Pzogc3RyaW5nO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG4gIHRpbWVzdGFtcDogbnVtYmVyO1xyXG59XHJcblxyXG4vLyDmtojmga/mlbDmja5cclxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlRGF0YSB7XHJcbiAgaWQ6IG51bWJlcjtcclxuICBjb250ZW50OiBzdHJpbmc7XHJcbiAgc2VuZGVyOiBzdHJpbmc7XHJcbiAgdGltZXN0YW1wOiBzdHJpbmc7XHJcbiAgcm9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCcgfCAnc3lzdGVtJztcclxufVxyXG5cclxuLy8g6ZSZ6K+v57G75Z6L5a6a5LmJXHJcbmV4cG9ydCBlbnVtIFN1bW1hcnlFcnJvclR5cGUge1xyXG4gIE1FU1NBR0VfTk9UX0ZPVU5EID0gJ01FU1NBR0VfTk9UX0ZPVU5EJyxcclxuICBBSV9HRU5FUkFUSU9OX0ZBSUxFRCA9ICdBSV9HRU5FUkFUSU9OX0ZBSUxFRCcsXHJcbiAgU0VOREFTX0NPTU1BTkRfRkFJTEVEID0gJ1NFTkRBU19DT01NQU5EX0ZBSUxFRCcsXHJcbiAgSElERV9DT01NQU5EX0ZBSUxFRCA9ICdISURFX0NPTU1BTkRfRkFJTEVEJyxcclxuICBORVRXT1JLX0VSUk9SID0gJ05FVFdPUktfRVJST1InLFxyXG4gIFVOS05PV05fRVJST1IgPSAnVU5LTk9XTl9FUlJPUicsXHJcbn1cclxuXHJcbi8vIOaJqeWxleiuvue9rueuoeeQhuWZqOeKtuaAgVxyXG5leHBvcnQgZW51bSBFeHRlbnNpb25TdGF0ZSB7XHJcbiAgSURMRSA9ICdJRExFJyxcclxuICBMT0FESU5HID0gJ0xPQURJTkcnLFxyXG4gIFBST0NFU1NJTkcgPSAnUFJPQ0VTU0lORycsXHJcbiAgRVJST1IgPSAnRVJST1InLFxyXG59XHJcblxyXG4vLyDnoa7orqTlr7nor53moYbphY3nva5cclxuZXhwb3J0IGludGVyZmFjZSBDb25maXJtYXRpb25EaWFsb2dDb25maWcge1xyXG4gIHRpdGxlOiBzdHJpbmc7XHJcbiAgbWVzc2FnZTogc3RyaW5nO1xyXG4gIGNvbmZpcm1UZXh0Pzogc3RyaW5nO1xyXG4gIGNhbmNlbFRleHQ/OiBzdHJpbmc7XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/extensions/types.ts\n\n}');
  },
  "./src/多云熊/备份/给rovo的/modules/groupChat/GroupNameOverrideManager.ts": 
  /*!*************************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/groupChat/GroupNameOverrideManager.ts ***!
  \*************************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GroupNameOverrideManager: () => (/* binding */ GroupNameOverrideManager)\n/* harmony export */ });\n/**\n * 群聊名称覆盖管理器\n * 负责管理用户自定义的群聊名称，提供 localStorage 优先级机制\n */\nclass GroupNameOverrideManager {\n    static STORAGE_KEY = 'bear_group_name_overrides';\n    static CURRENT_VERSION = '1.0.0';\n    static CACHE_TTL = 5 * 60 * 1000; // 5分钟缓存\n    static cache = null;\n    static cacheTimestamp = 0;\n    static memoryOverrides = null;\n    /**\n     * 初始化管理器，执行数据迁移\n     */\n    static initialize() {\n        try {\n            this.migrateData();\n            console.log('✅ GroupNameOverrideManager 初始化完成');\n        }\n        catch (error) {\n            console.error('❌ GroupNameOverrideManager 初始化失败:', error);\n        }\n    }\n    /**\n     * 保存群名覆盖\n     */\n    static saveGroupNameOverride(groupId, newName) {\n        if (!groupId || !newName || typeof newName !== 'string') {\n            console.warn('⚠️ 无效的群名覆盖参数:', { groupId, newName });\n            return;\n        }\n        try {\n            const overrides = this.getGroupNameOverrides();\n            overrides[groupId] = newName.trim();\n            const data = {\n                version: this.CURRENT_VERSION,\n                timestamp: Date.now(),\n                overrides,\n            };\n            localStorage.setItem(this.STORAGE_KEY, JSON.stringify(data));\n            // 更新缓存\n            this.setCachedOverrides(overrides);\n            console.log(`📝 已保存群名覆盖: ${groupId} -> ${newName}`);\n        }\n        catch (error) {\n            this.handleStorageError(error, 'save');\n            // 降级到内存存储\n            this.memoryOverrides = this.memoryOverrides || {};\n            this.memoryOverrides[groupId] = newName.trim();\n            console.log(`💾 已保存到内存: ${groupId} -> ${newName}`);\n        }\n    }\n    /**\n     * 获取所有覆盖数据\n     */\n    static getGroupNameOverrides() {\n        // 尝试从缓存获取\n        const cached = this.getCachedOverrides();\n        if (cached) {\n            return { ...cached };\n        }\n        // 从 localStorage 读取\n        try {\n            const stored = localStorage.getItem(this.STORAGE_KEY);\n            if (stored) {\n                const data = JSON.parse(stored);\n                const overrides = data.overrides || {};\n                this.setCachedOverrides(overrides);\n                return { ...overrides };\n            }\n        }\n        catch (error) {\n            this.handleStorageError(error, 'get');\n        }\n        // 返回内存存储或空对象\n        return { ...(this.memoryOverrides || {}) };\n    }\n    /**\n     * 获取特定群聊的覆盖名称\n     */\n    static getGroupNameOverride(groupId) {\n        const overrides = this.getGroupNameOverrides();\n        return overrides[groupId] || null;\n    }\n    /**\n     * 移除特定覆盖\n     */\n    static removeGroupNameOverride(groupId) {\n        try {\n            const overrides = this.getGroupNameOverrides();\n            if (!(groupId in overrides)) {\n                return false;\n            }\n            delete overrides[groupId];\n            const data = {\n                version: this.CURRENT_VERSION,\n                timestamp: Date.now(),\n                overrides,\n            };\n            localStorage.setItem(this.STORAGE_KEY, JSON.stringify(data));\n            // 更新缓存\n            this.setCachedOverrides(overrides);\n            // 同时从内存存储中移除\n            if (this.memoryOverrides && groupId in this.memoryOverrides) {\n                delete this.memoryOverrides[groupId];\n            }\n            console.log(`🗑️ 已移除群名覆盖: ${groupId}`);\n            return true;\n        }\n        catch (error) {\n            this.handleStorageError(error, 'remove');\n            // 降级到内存操作\n            if (this.memoryOverrides && groupId in this.memoryOverrides) {\n                delete this.memoryOverrides[groupId];\n                console.log(`💾 已从内存移除: ${groupId}`);\n                return true;\n            }\n            return false;\n        }\n    }\n    /**\n     * 清除所有覆盖\n     */\n    static clearAllGroupNameOverrides() {\n        try {\n            localStorage.removeItem(this.STORAGE_KEY);\n            this.clearCache();\n            this.memoryOverrides = null;\n            console.log('🧹 已清除所有群名覆盖');\n        }\n        catch (error) {\n            this.handleStorageError(error, 'clear');\n        }\n    }\n    /**\n     * 应用覆盖到聊天数据\n     */\n    static applyOverridesToChatData(chatData) {\n        const overrides = this.getGroupNameOverrides();\n        const overrideCount = Object.keys(overrides).length;\n        if (overrideCount === 0) {\n            return;\n        }\n        let appliedCount = 0;\n        for (const [chatId, chat] of chatData) {\n            if (chat.type === 'group' && overrides[chatId]) {\n                const originalName = chat.chatName;\n                chat.chatName = overrides[chatId];\n                appliedCount++;\n                console.log(`🔄 应用群名覆盖: ${originalName} -> ${chat.chatName}`);\n            }\n        }\n        if (appliedCount > 0) {\n            console.log(`✅ 已应用 ${appliedCount} 个群名覆盖`);\n        }\n    }\n    /**\n     * 验证和清理无效覆盖\n     */\n    static validateAndCleanOverrides(validGroupIds) {\n        try {\n            const overrides = this.getGroupNameOverrides();\n            const validOverrides = {};\n            let hasInvalidData = false;\n            // 验证每个覆盖数据\n            for (const [groupId, groupName] of Object.entries(overrides)) {\n                if (validGroupIds.includes(groupId) && typeof groupName === 'string' && groupName.trim().length > 0) {\n                    validOverrides[groupId] = groupName;\n                }\n                else {\n                    hasInvalidData = true;\n                    console.log(`🧹 清理无效的群名覆盖: ${groupId} -> ${groupName}`);\n                }\n            }\n            // 如果有无效数据，更新存储\n            if (hasInvalidData) {\n                const data = {\n                    version: this.CURRENT_VERSION,\n                    timestamp: Date.now(),\n                    overrides: validOverrides,\n                };\n                localStorage.setItem(this.STORAGE_KEY, JSON.stringify(data));\n                this.setCachedOverrides(validOverrides);\n                const cleanedCount = Object.keys(overrides).length - Object.keys(validOverrides).length;\n                console.log(`🧹 已清理 ${cleanedCount} 个无效的群名覆盖`);\n            }\n        }\n        catch (error) {\n            this.handleStorageError(error, 'validate');\n        }\n    }\n    /**\n     * 批量更新覆盖\n     */\n    static batchUpdateOverrides(updates) {\n        try {\n            const overrides = this.getGroupNameOverrides();\n            // 批量更新\n            Object.assign(overrides, updates);\n            const data = {\n                version: this.CURRENT_VERSION,\n                timestamp: Date.now(),\n                overrides,\n            };\n            localStorage.setItem(this.STORAGE_KEY, JSON.stringify(data));\n            // 更新缓存\n            this.setCachedOverrides(overrides);\n            console.log(`📦 批量更新 ${Object.keys(updates).length} 个群名覆盖`);\n        }\n        catch (error) {\n            this.handleStorageError(error, 'batchUpdate');\n            // 降级到内存存储\n            this.memoryOverrides = this.memoryOverrides || {};\n            Object.assign(this.memoryOverrides, updates);\n        }\n    }\n    /**\n     * 获取调试信息\n     */\n    static getDebugInfo() {\n        return {\n            storageKey: this.STORAGE_KEY,\n            version: this.CURRENT_VERSION,\n            cacheStatus: {\n                hasCache: !!this.cache,\n                cacheAge: this.cache ? Date.now() - this.cacheTimestamp : 0,\n                cacheTTL: this.CACHE_TTL,\n            },\n            overrideCount: Object.keys(this.getGroupNameOverrides()).length,\n            storageSize: this.getStorageSize(),\n            memoryFallback: !!this.memoryOverrides,\n            memoryOverrideCount: this.memoryOverrides ? Object.keys(this.memoryOverrides).length : 0,\n        };\n    }\n    /**\n     * 检查是否有覆盖数据\n     */\n    static hasOverrides() {\n        const overrides = this.getGroupNameOverrides();\n        return Object.keys(overrides).length > 0;\n    }\n    /**\n     * 检查特定群聊是否有覆盖\n     */\n    static hasOverride(groupId) {\n        return this.getGroupNameOverride(groupId) !== null;\n    }\n    // 私有方法\n    /**\n     * 获取缓存的覆盖数据\n     */\n    static getCachedOverrides() {\n        const now = Date.now();\n        if (this.cache && now - this.cacheTimestamp < this.CACHE_TTL) {\n            return this.cache;\n        }\n        return null;\n    }\n    /**\n     * 设置缓存的覆盖数据\n     */\n    static setCachedOverrides(overrides) {\n        this.cache = { ...overrides };\n        this.cacheTimestamp = Date.now();\n    }\n    /**\n     * 清除缓存\n     */\n    static clearCache() {\n        this.cache = null;\n        this.cacheTimestamp = 0;\n    }\n    /**\n     * 处理存储错误\n     */\n    static handleStorageError(error, operation) {\n        console.warn(`⚠️ 群名覆盖存储操作失败 (${operation}):`, error);\n        // 如果是配额超出错误，尝试清理\n        if (error.name === 'QuotaExceededError') {\n            console.log('💾 存储配额超出，尝试清理旧数据...');\n            this.cleanupOldData();\n        }\n        // 尝试清理损坏的数据\n        if (operation === 'get' || operation === 'validate') {\n            try {\n                localStorage.removeItem(this.STORAGE_KEY);\n                this.clearCache();\n                console.log('🧹 已清理损坏的覆盖数据');\n            }\n            catch (cleanError) {\n                console.error('❌ 清理覆盖数据失败:', cleanError);\n            }\n        }\n    }\n    /**\n     * 清理旧数据以释放存储空间\n     */\n    static cleanupOldData() {\n        try {\n            // 这里可以实现更复杂的清理逻辑\n            // 目前简单地清除当前数据\n            localStorage.removeItem(this.STORAGE_KEY);\n            this.clearCache();\n            console.log('🧹 已清理旧的群名覆盖数据');\n        }\n        catch (error) {\n            console.error('❌ 清理旧数据失败:', error);\n        }\n    }\n    /**\n     * 获取存储大小\n     */\n    static getStorageSize() {\n        try {\n            const stored = localStorage.getItem(this.STORAGE_KEY);\n            return stored ? new Blob([stored]).size : 0;\n        }\n        catch {\n            return -1;\n        }\n    }\n    /**\n     * 数据迁移\n     */\n    static migrateData() {\n        try {\n            const stored = localStorage.getItem(this.STORAGE_KEY);\n            if (!stored)\n                return;\n            const data = JSON.parse(stored);\n            // 检查版本\n            if (!data.version) {\n                // 迁移旧版本数据（假设旧版本直接存储覆盖对象）\n                const migratedData = {\n                    version: this.CURRENT_VERSION,\n                    timestamp: Date.now(),\n                    overrides: typeof data === 'object' ? data : {},\n                };\n                localStorage.setItem(this.STORAGE_KEY, JSON.stringify(migratedData));\n                console.log('🔄 已迁移群名覆盖数据到新版本');\n            }\n        }\n        catch (error) {\n            console.error('❌ 数据迁移失败:', error);\n            // 清理损坏的数据\n            localStorage.removeItem(this.STORAGE_KEY);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZ3JvdXBDaGF0L0dyb3VwTmFtZU92ZXJyaWRlTWFuYWdlci50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7OztHQUdHO0FBbUJJLE1BQU0sd0JBQXdCO0lBQzNCLE1BQU0sQ0FBVSxXQUFXLEdBQUcsMkJBQTJCLENBQUM7SUFDMUQsTUFBTSxDQUFVLGVBQWUsR0FBRyxPQUFPLENBQUM7SUFDMUMsTUFBTSxDQUFVLFNBQVMsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDLFFBQVE7SUFFbkQsTUFBTSxDQUFDLEtBQUssR0FBa0MsSUFBSSxDQUFDO0lBQ25ELE1BQU0sQ0FBQyxjQUFjLEdBQVcsQ0FBQyxDQUFDO0lBQ2xDLE1BQU0sQ0FBQyxlQUFlLEdBQWtDLElBQUksQ0FBQztJQUVyRTs7T0FFRztJQUNILE1BQU0sQ0FBQyxVQUFVO1FBQ2YsSUFBSSxDQUFDO1lBQ0gsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQ25CLE9BQU8sQ0FBQyxHQUFHLENBQUMsa0NBQWtDLENBQUMsQ0FBQztRQUNsRCxDQUFDO1FBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNmLE9BQU8sQ0FBQyxLQUFLLENBQUMsbUNBQW1DLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDNUQsQ0FBQztJQUNILENBQUM7SUFFRDs7T0FFRztJQUNILE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxPQUFlLEVBQUUsT0FBZTtRQUMzRCxJQUFJLENBQUMsT0FBTyxJQUFJLENBQUMsT0FBTyxJQUFJLE9BQU8sT0FBTyxLQUFLLFFBQVEsRUFBRSxDQUFDO1lBQ3hELE9BQU8sQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUM7WUFDcEQsT0FBTztRQUNULENBQUM7UUFFRCxJQUFJLENBQUM7WUFDSCxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQztZQUMvQyxTQUFTLENBQUMsT0FBTyxDQUFDLEdBQUcsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDO1lBRXBDLE1BQU0sSUFBSSxHQUEwQjtnQkFDbEMsT0FBTyxFQUFFLElBQUksQ0FBQyxlQUFlO2dCQUM3QixTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTtnQkFDckIsU0FBUzthQUNWLENBQUM7WUFFRixZQUFZLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBRTdELE9BQU87WUFDUCxJQUFJLENBQUMsa0JBQWtCLENBQUMsU0FBUyxDQUFDLENBQUM7WUFFbkMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxlQUFlLE9BQU8sT0FBTyxPQUFPLEVBQUUsQ0FBQyxDQUFDO1FBQ3RELENBQUM7UUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1lBQ2YsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEtBQWMsRUFBRSxNQUFNLENBQUMsQ0FBQztZQUNoRCxVQUFVO1lBQ1YsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsZUFBZSxJQUFJLEVBQUUsQ0FBQztZQUNsRCxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUMvQyxPQUFPLENBQUMsR0FBRyxDQUFDLGNBQWMsT0FBTyxPQUFPLE9BQU8sRUFBRSxDQUFDLENBQUM7UUFDckQsQ0FBQztJQUNILENBQUM7SUFFRDs7T0FFRztJQUNILE1BQU0sQ0FBQyxxQkFBcUI7UUFDMUIsVUFBVTtRQUNWLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1FBQ3pDLElBQUksTUFBTSxFQUFFLENBQUM7WUFDWCxPQUFPLEVBQUUsR0FBRyxNQUFNLEVBQUUsQ0FBQztRQUN2QixDQUFDO1FBRUQsb0JBQW9CO1FBQ3BCLElBQUksQ0FBQztZQUNILE1BQU0sTUFBTSxHQUFHLFlBQVksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQ3RELElBQUksTUFBTSxFQUFFLENBQUM7Z0JBQ1gsTUFBTSxJQUFJLEdBQTBCLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQ3ZELE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLElBQUksRUFBRSxDQUFDO2dCQUN2QyxJQUFJLENBQUMsa0JBQWtCLENBQUMsU0FBUyxDQUFDLENBQUM7Z0JBQ25DLE9BQU8sRUFBRSxHQUFHLFNBQVMsRUFBRSxDQUFDO1lBQzFCLENBQUM7UUFDSCxDQUFDO1FBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNmLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxLQUFjLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDakQsQ0FBQztRQUVELGFBQWE7UUFDYixPQUFPLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxlQUFlLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQztJQUM3QyxDQUFDO0lBRUQ7O09BRUc7SUFDSCxNQUFNLENBQUMsb0JBQW9CLENBQUMsT0FBZTtRQUN6QyxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQztRQUMvQyxPQUFPLFNBQVMsQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJLENBQUM7SUFDcEMsQ0FBQztJQUVEOztPQUVHO0lBQ0gsTUFBTSxDQUFDLHVCQUF1QixDQUFDLE9BQWU7UUFDNUMsSUFBSSxDQUFDO1lBQ0gsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixFQUFFLENBQUM7WUFFL0MsSUFBSSxDQUFDLENBQUMsT0FBTyxJQUFJLFNBQVMsQ0FBQyxFQUFFLENBQUM7Z0JBQzVCLE9BQU8sS0FBSyxDQUFDO1lBQ2YsQ0FBQztZQUVELE9BQU8sU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBRTFCLE1BQU0sSUFBSSxHQUEwQjtnQkFDbEMsT0FBTyxFQUFFLElBQUksQ0FBQyxlQUFlO2dCQUM3QixTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTtnQkFDckIsU0FBUzthQUNWLENBQUM7WUFFRixZQUFZLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBRTdELE9BQU87WUFDUCxJQUFJLENBQUMsa0JBQWtCLENBQUMsU0FBUyxDQUFDLENBQUM7WUFFbkMsYUFBYTtZQUNiLElBQUksSUFBSSxDQUFDLGVBQWUsSUFBSSxPQUFPLElBQUksSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO2dCQUM1RCxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDdkMsQ0FBQztZQUVELE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLE9BQU8sRUFBRSxDQUFDLENBQUM7WUFDdkMsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO1FBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNmLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxLQUFjLEVBQUUsUUFBUSxDQUFDLENBQUM7WUFFbEQsVUFBVTtZQUNWLElBQUksSUFBSSxDQUFDLGVBQWUsSUFBSSxPQUFPLElBQUksSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO2dCQUM1RCxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQ3JDLE9BQU8sQ0FBQyxHQUFHLENBQUMsY0FBYyxPQUFPLEVBQUUsQ0FBQyxDQUFDO2dCQUNyQyxPQUFPLElBQUksQ0FBQztZQUNkLENBQUM7WUFFRCxPQUFPLEtBQUssQ0FBQztRQUNmLENBQUM7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSCxNQUFNLENBQUMsMEJBQTBCO1FBQy9CLElBQUksQ0FBQztZQUNILFlBQVksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQzFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUNsQixJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQztZQUM1QixPQUFPLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQzlCLENBQUM7UUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1lBQ2YsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEtBQWMsRUFBRSxPQUFPLENBQUMsQ0FBQztRQUNuRCxDQUFDO0lBQ0gsQ0FBQztJQUVEOztPQUVHO0lBQ0gsTUFBTSxDQUFDLHdCQUF3QixDQUFDLFFBQStCO1FBQzdELE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO1FBQy9DLE1BQU0sYUFBYSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsTUFBTSxDQUFDO1FBRXBELElBQUksYUFBYSxLQUFLLENBQUMsRUFBRSxDQUFDO1lBQ3hCLE9BQU87UUFDVCxDQUFDO1FBRUQsSUFBSSxZQUFZLEdBQUcsQ0FBQyxDQUFDO1FBRXJCLEtBQUssTUFBTSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsSUFBSSxRQUFRLEVBQUUsQ0FBQztZQUN0QyxJQUFJLElBQUksQ0FBQyxJQUFJLEtBQUssT0FBTyxJQUFJLFNBQVMsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDO2dCQUMvQyxNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO2dCQUNuQyxJQUFJLENBQUMsUUFBUSxHQUFHLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDbEMsWUFBWSxFQUFFLENBQUM7Z0JBRWYsT0FBTyxDQUFDLEdBQUcsQ0FBQyxjQUFjLFlBQVksT0FBTyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQztZQUNoRSxDQUFDO1FBQ0gsQ0FBQztRQUVELElBQUksWUFBWSxHQUFHLENBQUMsRUFBRSxDQUFDO1lBQ3JCLE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxZQUFZLFFBQVEsQ0FBQyxDQUFDO1FBQzdDLENBQUM7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSCxNQUFNLENBQUMseUJBQXlCLENBQUMsYUFBdUI7UUFDdEQsSUFBSSxDQUFDO1lBQ0gsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixFQUFFLENBQUM7WUFDL0MsTUFBTSxjQUFjLEdBQTJCLEVBQUUsQ0FBQztZQUNsRCxJQUFJLGNBQWMsR0FBRyxLQUFLLENBQUM7WUFFM0IsV0FBVztZQUNYLEtBQUssTUFBTSxDQUFDLE9BQU8sRUFBRSxTQUFTLENBQUMsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUM7Z0JBQzdELElBQUksYUFBYSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxPQUFPLFNBQVMsS0FBSyxRQUFRLElBQUksU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztvQkFDcEcsY0FBYyxDQUFDLE9BQU8sQ0FBQyxHQUFHLFNBQVMsQ0FBQztnQkFDdEMsQ0FBQztxQkFBTSxDQUFDO29CQUNOLGNBQWMsR0FBRyxJQUFJLENBQUM7b0JBQ3RCLE9BQU8sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLE9BQU8sT0FBTyxTQUFTLEVBQUUsQ0FBQyxDQUFDO2dCQUMxRCxDQUFDO1lBQ0gsQ0FBQztZQUVELGVBQWU7WUFDZixJQUFJLGNBQWMsRUFBRSxDQUFDO2dCQUNuQixNQUFNLElBQUksR0FBMEI7b0JBQ2xDLE9BQU8sRUFBRSxJQUFJLENBQUMsZUFBZTtvQkFDN0IsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7b0JBQ3JCLFNBQVMsRUFBRSxjQUFjO2lCQUMxQixDQUFDO2dCQUVGLFlBQVksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBQzdELElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxjQUFjLENBQUMsQ0FBQztnQkFFeEMsTUFBTSxZQUFZLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxNQUFNLENBQUM7Z0JBQ3hGLE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBVSxZQUFZLFdBQVcsQ0FBQyxDQUFDO1lBQ2pELENBQUM7UUFDSCxDQUFDO1FBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNmLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxLQUFjLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFDdEQsQ0FBQztJQUNILENBQUM7SUFFRDs7T0FFRztJQUNILE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxPQUErQjtRQUN6RCxJQUFJLENBQUM7WUFDSCxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQztZQUUvQyxPQUFPO1lBQ1AsTUFBTSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDLENBQUM7WUFFbEMsTUFBTSxJQUFJLEdBQTBCO2dCQUNsQyxPQUFPLEVBQUUsSUFBSSxDQUFDLGVBQWU7Z0JBQzdCLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2dCQUNyQixTQUFTO2FBQ1YsQ0FBQztZQUVGLFlBQVksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFFN0QsT0FBTztZQUNQLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUVuQyxPQUFPLENBQUMsR0FBRyxDQUFDLFdBQVcsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLFFBQVEsQ0FBQyxDQUFDO1FBQzlELENBQUM7UUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1lBQ2YsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEtBQWMsRUFBRSxhQUFhLENBQUMsQ0FBQztZQUV2RCxVQUFVO1lBQ1YsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsZUFBZSxJQUFJLEVBQUUsQ0FBQztZQUNsRCxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxlQUFlLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDL0MsQ0FBQztJQUNILENBQUM7SUFFRDs7T0FFRztJQUNILE1BQU0sQ0FBQyxZQUFZO1FBQ2pCLE9BQU87WUFDTCxVQUFVLEVBQUUsSUFBSSxDQUFDLFdBQVc7WUFDNUIsT0FBTyxFQUFFLElBQUksQ0FBQyxlQUFlO1lBQzdCLFdBQVcsRUFBRTtnQkFDWCxRQUFRLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLO2dCQUN0QixRQUFRLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQzNELFFBQVEsRUFBRSxJQUFJLENBQUMsU0FBUzthQUN6QjtZQUNELGFBQWEsRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxDQUFDLENBQUMsTUFBTTtZQUMvRCxXQUFXLEVBQUUsSUFBSSxDQUFDLGNBQWMsRUFBRTtZQUNsQyxjQUFjLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxlQUFlO1lBQ3RDLG1CQUFtQixFQUFFLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUN6RixDQUFDO0lBQ0osQ0FBQztJQUVEOztPQUVHO0lBQ0gsTUFBTSxDQUFDLFlBQVk7UUFDakIsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixFQUFFLENBQUM7UUFDL0MsT0FBTyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7SUFDM0MsQ0FBQztJQUVEOztPQUVHO0lBQ0gsTUFBTSxDQUFDLFdBQVcsQ0FBQyxPQUFlO1FBQ2hDLE9BQU8sSUFBSSxDQUFDLG9CQUFvQixDQUFDLE9BQU8sQ0FBQyxLQUFLLElBQUksQ0FBQztJQUNyRCxDQUFDO0lBRUQsT0FBTztJQUVQOztPQUVHO0lBQ0ssTUFBTSxDQUFDLGtCQUFrQjtRQUMvQixNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDdkIsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUM3RCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7UUFDcEIsQ0FBQztRQUNELE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVEOztPQUVHO0lBQ0ssTUFBTSxDQUFDLGtCQUFrQixDQUFDLFNBQWlDO1FBQ2pFLElBQUksQ0FBQyxLQUFLLEdBQUcsRUFBRSxHQUFHLFNBQVMsRUFBRSxDQUFDO1FBQzlCLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBQ25DLENBQUM7SUFFRDs7T0FFRztJQUNLLE1BQU0sQ0FBQyxVQUFVO1FBQ3ZCLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO1FBQ2xCLElBQUksQ0FBQyxjQUFjLEdBQUcsQ0FBQyxDQUFDO0lBQzFCLENBQUM7SUFFRDs7T0FFRztJQUNLLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxLQUFZLEVBQUUsU0FBaUI7UUFDL0QsT0FBTyxDQUFDLElBQUksQ0FBQyxrQkFBa0IsU0FBUyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFFckQsaUJBQWlCO1FBQ2pCLElBQUksS0FBSyxDQUFDLElBQUksS0FBSyxvQkFBb0IsRUFBRSxDQUFDO1lBQ3hDLE9BQU8sQ0FBQyxHQUFHLENBQUMsc0JBQXNCLENBQUMsQ0FBQztZQUNwQyxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDeEIsQ0FBQztRQUVELFlBQVk7UUFDWixJQUFJLFNBQVMsS0FBSyxLQUFLLElBQUksU0FBUyxLQUFLLFVBQVUsRUFBRSxDQUFDO1lBQ3BELElBQUksQ0FBQztnQkFDSCxZQUFZLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztnQkFDMUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO2dCQUNsQixPQUFPLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxDQUFDO1lBQy9CLENBQUM7WUFBQyxPQUFPLFVBQVUsRUFBRSxDQUFDO2dCQUNwQixPQUFPLENBQUMsS0FBSyxDQUFDLGFBQWEsRUFBRSxVQUFVLENBQUMsQ0FBQztZQUMzQyxDQUFDO1FBQ0gsQ0FBQztJQUNILENBQUM7SUFFRDs7T0FFRztJQUNLLE1BQU0sQ0FBQyxjQUFjO1FBQzNCLElBQUksQ0FBQztZQUNILGlCQUFpQjtZQUNqQixjQUFjO1lBQ2QsWUFBWSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDMUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQ2xCLE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUNoQyxDQUFDO1FBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNmLE9BQU8sQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ3JDLENBQUM7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSyxNQUFNLENBQUMsY0FBYztRQUMzQixJQUFJLENBQUM7WUFDSCxNQUFNLE1BQU0sR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUN0RCxPQUFPLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzlDLENBQUM7UUFBQyxNQUFNLENBQUM7WUFDUCxPQUFPLENBQUMsQ0FBQyxDQUFDO1FBQ1osQ0FBQztJQUNILENBQUM7SUFFRDs7T0FFRztJQUNLLE1BQU0sQ0FBQyxXQUFXO1FBQ3hCLElBQUksQ0FBQztZQUNILE1BQU0sTUFBTSxHQUFHLFlBQVksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQ3RELElBQUksQ0FBQyxNQUFNO2dCQUFFLE9BQU87WUFFcEIsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUVoQyxPQUFPO1lBQ1AsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDbEIseUJBQXlCO2dCQUN6QixNQUFNLFlBQVksR0FBMEI7b0JBQzFDLE9BQU8sRUFBRSxJQUFJLENBQUMsZUFBZTtvQkFDN0IsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7b0JBQ3JCLFNBQVMsRUFBRSxPQUFPLElBQUksS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRTtpQkFDaEQsQ0FBQztnQkFFRixZQUFZLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO2dCQUNyRSxPQUFPLENBQUMsR0FBRyxDQUFDLGtCQUFrQixDQUFDLENBQUM7WUFDbEMsQ0FBQztRQUNILENBQUM7UUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1lBQ2YsT0FBTyxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFDbEMsVUFBVTtZQUNWLFlBQVksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzVDLENBQUM7SUFDSCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy9ncm91cENoYXQvR3JvdXBOYW1lT3ZlcnJpZGVNYW5hZ2VyLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICog576k6IGK5ZCN56ew6KaG55uW566h55CG5ZmoXHJcbiAqIOi0n+i0o+euoeeQhueUqOaIt+iHquWumuS5ieeahOe+pOiBiuWQjeensO+8jOaPkOS+myBsb2NhbFN0b3JhZ2Ug5LyY5YWI57qn5py65Yi2XHJcbiAqL1xyXG5cclxuaW50ZXJmYWNlIEdyb3VwTmFtZU92ZXJyaWRlcyB7XHJcbiAgW2dyb3VwSWQ6IHN0cmluZ106IHN0cmluZzsgLy8g576k6IGKSUQgLT4g6KaG55uW55qE576k5ZCNXHJcbn1cclxuXHJcbmludGVyZmFjZSBHcm91cE5hbWVPdmVycmlkZURhdGEge1xyXG4gIHZlcnNpb246IHN0cmluZzsgLy8g5pWw5o2u54mI5pys5Y+3XHJcbiAgdGltZXN0YW1wOiBudW1iZXI7IC8vIOacgOWQjuabtOaWsOaXtumXtFxyXG4gIG92ZXJyaWRlczogR3JvdXBOYW1lT3ZlcnJpZGVzOyAvLyDopobnm5bmlbDmja5cclxufVxyXG5cclxuaW50ZXJmYWNlIENoYXREYXRhIHtcclxuICBjaGF0SWQ6IHN0cmluZztcclxuICBjaGF0TmFtZTogc3RyaW5nO1xyXG4gIHR5cGU/OiBzdHJpbmc7XHJcbiAgW2tleTogc3RyaW5nXTogYW55O1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgR3JvdXBOYW1lT3ZlcnJpZGVNYW5hZ2VyIHtcclxuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBTVE9SQUdFX0tFWSA9ICdiZWFyX2dyb3VwX25hbWVfb3ZlcnJpZGVzJztcclxuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBDVVJSRU5UX1ZFUlNJT04gPSAnMS4wLjAnO1xyXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IENBQ0hFX1RUTCA9IDUgKiA2MCAqIDEwMDA7IC8vIDXliIbpkp/nvJPlrZhcclxuXHJcbiAgcHJpdmF0ZSBzdGF0aWMgY2FjaGU6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gfCBudWxsID0gbnVsbDtcclxuICBwcml2YXRlIHN0YXRpYyBjYWNoZVRpbWVzdGFtcDogbnVtYmVyID0gMDtcclxuICBwcml2YXRlIHN0YXRpYyBtZW1vcnlPdmVycmlkZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gfCBudWxsID0gbnVsbDtcclxuXHJcbiAgLyoqXHJcbiAgICog5Yid5aeL5YyW566h55CG5Zmo77yM5omn6KGM5pWw5o2u6L+B56e7XHJcbiAgICovXHJcbiAgc3RhdGljIGluaXRpYWxpemUoKTogdm9pZCB7XHJcbiAgICB0cnkge1xyXG4gICAgICB0aGlzLm1pZ3JhdGVEYXRhKCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgR3JvdXBOYW1lT3ZlcnJpZGVNYW5hZ2VyIOWIneWni+WMluWujOaIkCcpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign4p2MIEdyb3VwTmFtZU92ZXJyaWRlTWFuYWdlciDliJ3lp4vljJblpLHotKU6JywgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5L+d5a2Y576k5ZCN6KaG55uWXHJcbiAgICovXHJcbiAgc3RhdGljIHNhdmVHcm91cE5hbWVPdmVycmlkZShncm91cElkOiBzdHJpbmcsIG5ld05hbWU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgaWYgKCFncm91cElkIHx8ICFuZXdOYW1lIHx8IHR5cGVvZiBuZXdOYW1lICE9PSAnc3RyaW5nJykge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyDml6DmlYjnmoTnvqTlkI3opobnm5blj4LmlbA6JywgeyBncm91cElkLCBuZXdOYW1lIH0pO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgb3ZlcnJpZGVzID0gdGhpcy5nZXRHcm91cE5hbWVPdmVycmlkZXMoKTtcclxuICAgICAgb3ZlcnJpZGVzW2dyb3VwSWRdID0gbmV3TmFtZS50cmltKCk7XHJcblxyXG4gICAgICBjb25zdCBkYXRhOiBHcm91cE5hbWVPdmVycmlkZURhdGEgPSB7XHJcbiAgICAgICAgdmVyc2lvbjogdGhpcy5DVVJSRU5UX1ZFUlNJT04sXHJcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICAgIG92ZXJyaWRlcyxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMuU1RPUkFHRV9LRVksIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcclxuXHJcbiAgICAgIC8vIOabtOaWsOe8k+WtmFxyXG4gICAgICB0aGlzLnNldENhY2hlZE92ZXJyaWRlcyhvdmVycmlkZXMpO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coYPCfk50g5bey5L+d5a2Y576k5ZCN6KaG55uWOiAke2dyb3VwSWR9IC0+ICR7bmV3TmFtZX1gKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRoaXMuaGFuZGxlU3RvcmFnZUVycm9yKGVycm9yIGFzIEVycm9yLCAnc2F2ZScpO1xyXG4gICAgICAvLyDpmY3nuqfliLDlhoXlrZjlrZjlgqhcclxuICAgICAgdGhpcy5tZW1vcnlPdmVycmlkZXMgPSB0aGlzLm1lbW9yeU92ZXJyaWRlcyB8fCB7fTtcclxuICAgICAgdGhpcy5tZW1vcnlPdmVycmlkZXNbZ3JvdXBJZF0gPSBuZXdOYW1lLnRyaW0oKTtcclxuICAgICAgY29uc29sZS5sb2coYPCfkr4g5bey5L+d5a2Y5Yiw5YaF5a2YOiAke2dyb3VwSWR9IC0+ICR7bmV3TmFtZX1gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluaJgOacieimhuebluaVsOaNrlxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRHcm91cE5hbWVPdmVycmlkZXMoKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XHJcbiAgICAvLyDlsJ3or5Xku47nvJPlrZjojrflj5ZcclxuICAgIGNvbnN0IGNhY2hlZCA9IHRoaXMuZ2V0Q2FjaGVkT3ZlcnJpZGVzKCk7XHJcbiAgICBpZiAoY2FjaGVkKSB7XHJcbiAgICAgIHJldHVybiB7IC4uLmNhY2hlZCB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOS7jiBsb2NhbFN0b3JhZ2Ug6K+75Y+WXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBzdG9yZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLlNUT1JBR0VfS0VZKTtcclxuICAgICAgaWYgKHN0b3JlZCkge1xyXG4gICAgICAgIGNvbnN0IGRhdGE6IEdyb3VwTmFtZU92ZXJyaWRlRGF0YSA9IEpTT04ucGFyc2Uoc3RvcmVkKTtcclxuICAgICAgICBjb25zdCBvdmVycmlkZXMgPSBkYXRhLm92ZXJyaWRlcyB8fCB7fTtcclxuICAgICAgICB0aGlzLnNldENhY2hlZE92ZXJyaWRlcyhvdmVycmlkZXMpO1xyXG4gICAgICAgIHJldHVybiB7IC4uLm92ZXJyaWRlcyB9O1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLmhhbmRsZVN0b3JhZ2VFcnJvcihlcnJvciBhcyBFcnJvciwgJ2dldCcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOi/lOWbnuWGheWtmOWtmOWCqOaIluepuuWvueixoVxyXG4gICAgcmV0dXJuIHsgLi4uKHRoaXMubWVtb3J5T3ZlcnJpZGVzIHx8IHt9KSB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W54m55a6a576k6IGK55qE6KaG55uW5ZCN56ewXHJcbiAgICovXHJcbiAgc3RhdGljIGdldEdyb3VwTmFtZU92ZXJyaWRlKGdyb3VwSWQ6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xyXG4gICAgY29uc3Qgb3ZlcnJpZGVzID0gdGhpcy5nZXRHcm91cE5hbWVPdmVycmlkZXMoKTtcclxuICAgIHJldHVybiBvdmVycmlkZXNbZ3JvdXBJZF0gfHwgbnVsbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOenu+mZpOeJueWumuimhuebllxyXG4gICAqL1xyXG4gIHN0YXRpYyByZW1vdmVHcm91cE5hbWVPdmVycmlkZShncm91cElkOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IG92ZXJyaWRlcyA9IHRoaXMuZ2V0R3JvdXBOYW1lT3ZlcnJpZGVzKCk7XHJcblxyXG4gICAgICBpZiAoIShncm91cElkIGluIG92ZXJyaWRlcykpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGRlbGV0ZSBvdmVycmlkZXNbZ3JvdXBJZF07XHJcblxyXG4gICAgICBjb25zdCBkYXRhOiBHcm91cE5hbWVPdmVycmlkZURhdGEgPSB7XHJcbiAgICAgICAgdmVyc2lvbjogdGhpcy5DVVJSRU5UX1ZFUlNJT04sXHJcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICAgIG92ZXJyaWRlcyxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMuU1RPUkFHRV9LRVksIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcclxuXHJcbiAgICAgIC8vIOabtOaWsOe8k+WtmFxyXG4gICAgICB0aGlzLnNldENhY2hlZE92ZXJyaWRlcyhvdmVycmlkZXMpO1xyXG5cclxuICAgICAgLy8g5ZCM5pe25LuO5YaF5a2Y5a2Y5YKo5Lit56e76ZmkXHJcbiAgICAgIGlmICh0aGlzLm1lbW9yeU92ZXJyaWRlcyAmJiBncm91cElkIGluIHRoaXMubWVtb3J5T3ZlcnJpZGVzKSB7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMubWVtb3J5T3ZlcnJpZGVzW2dyb3VwSWRdO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhg8J+Xke+4jyDlt7Lnp7vpmaTnvqTlkI3opobnm5Y6ICR7Z3JvdXBJZH1gKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLmhhbmRsZVN0b3JhZ2VFcnJvcihlcnJvciBhcyBFcnJvciwgJ3JlbW92ZScpO1xyXG5cclxuICAgICAgLy8g6ZmN57qn5Yiw5YaF5a2Y5pON5L2cXHJcbiAgICAgIGlmICh0aGlzLm1lbW9yeU92ZXJyaWRlcyAmJiBncm91cElkIGluIHRoaXMubWVtb3J5T3ZlcnJpZGVzKSB7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMubWVtb3J5T3ZlcnJpZGVzW2dyb3VwSWRdO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5K+IOW3suS7juWGheWtmOenu+mZpDogJHtncm91cElkfWApO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmuIXpmaTmiYDmnInopobnm5ZcclxuICAgKi9cclxuICBzdGF0aWMgY2xlYXJBbGxHcm91cE5hbWVPdmVycmlkZXMoKTogdm9pZCB7XHJcbiAgICB0cnkge1xyXG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh0aGlzLlNUT1JBR0VfS0VZKTtcclxuICAgICAgdGhpcy5jbGVhckNhY2hlKCk7XHJcbiAgICAgIHRoaXMubWVtb3J5T3ZlcnJpZGVzID0gbnVsbDtcclxuICAgICAgY29uc29sZS5sb2coJ/Cfp7kg5bey5riF6Zmk5omA5pyJ576k5ZCN6KaG55uWJyk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLmhhbmRsZVN0b3JhZ2VFcnJvcihlcnJvciBhcyBFcnJvciwgJ2NsZWFyJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlupTnlKjopobnm5bliLDogYrlpKnmlbDmja5cclxuICAgKi9cclxuICBzdGF0aWMgYXBwbHlPdmVycmlkZXNUb0NoYXREYXRhKGNoYXREYXRhOiBNYXA8c3RyaW5nLCBDaGF0RGF0YT4pOiB2b2lkIHtcclxuICAgIGNvbnN0IG92ZXJyaWRlcyA9IHRoaXMuZ2V0R3JvdXBOYW1lT3ZlcnJpZGVzKCk7XHJcbiAgICBjb25zdCBvdmVycmlkZUNvdW50ID0gT2JqZWN0LmtleXMob3ZlcnJpZGVzKS5sZW5ndGg7XHJcblxyXG4gICAgaWYgKG92ZXJyaWRlQ291bnQgPT09IDApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBhcHBsaWVkQ291bnQgPSAwO1xyXG5cclxuICAgIGZvciAoY29uc3QgW2NoYXRJZCwgY2hhdF0gb2YgY2hhdERhdGEpIHtcclxuICAgICAgaWYgKGNoYXQudHlwZSA9PT0gJ2dyb3VwJyAmJiBvdmVycmlkZXNbY2hhdElkXSkge1xyXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsTmFtZSA9IGNoYXQuY2hhdE5hbWU7XHJcbiAgICAgICAgY2hhdC5jaGF0TmFtZSA9IG92ZXJyaWRlc1tjaGF0SWRdO1xyXG4gICAgICAgIGFwcGxpZWRDb3VudCsrO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhg8J+UhCDlupTnlKjnvqTlkI3opobnm5Y6ICR7b3JpZ2luYWxOYW1lfSAtPiAke2NoYXQuY2hhdE5hbWV9YCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoYXBwbGllZENvdW50ID4gMCkge1xyXG4gICAgICBjb25zb2xlLmxvZyhg4pyFIOW3suW6lOeUqCAke2FwcGxpZWRDb3VudH0g5Liq576k5ZCN6KaG55uWYCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDpqozor4HlkozmuIXnkIbml6DmlYjopobnm5ZcclxuICAgKi9cclxuICBzdGF0aWMgdmFsaWRhdGVBbmRDbGVhbk92ZXJyaWRlcyh2YWxpZEdyb3VwSWRzOiBzdHJpbmdbXSk6IHZvaWQge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgb3ZlcnJpZGVzID0gdGhpcy5nZXRHcm91cE5hbWVPdmVycmlkZXMoKTtcclxuICAgICAgY29uc3QgdmFsaWRPdmVycmlkZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcclxuICAgICAgbGV0IGhhc0ludmFsaWREYXRhID0gZmFsc2U7XHJcblxyXG4gICAgICAvLyDpqozor4Hmr4/kuKropobnm5bmlbDmja5cclxuICAgICAgZm9yIChjb25zdCBbZ3JvdXBJZCwgZ3JvdXBOYW1lXSBvZiBPYmplY3QuZW50cmllcyhvdmVycmlkZXMpKSB7XHJcbiAgICAgICAgaWYgKHZhbGlkR3JvdXBJZHMuaW5jbHVkZXMoZ3JvdXBJZCkgJiYgdHlwZW9mIGdyb3VwTmFtZSA9PT0gJ3N0cmluZycgJiYgZ3JvdXBOYW1lLnRyaW0oKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICB2YWxpZE92ZXJyaWRlc1tncm91cElkXSA9IGdyb3VwTmFtZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaGFzSW52YWxpZERhdGEgPSB0cnVlO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coYPCfp7kg5riF55CG5peg5pWI55qE576k5ZCN6KaG55uWOiAke2dyb3VwSWR9IC0+ICR7Z3JvdXBOYW1lfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5aaC5p6c5pyJ5peg5pWI5pWw5o2u77yM5pu05paw5a2Y5YKoXHJcbiAgICAgIGlmIChoYXNJbnZhbGlkRGF0YSkge1xyXG4gICAgICAgIGNvbnN0IGRhdGE6IEdyb3VwTmFtZU92ZXJyaWRlRGF0YSA9IHtcclxuICAgICAgICAgIHZlcnNpb246IHRoaXMuQ1VSUkVOVF9WRVJTSU9OLFxyXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgb3ZlcnJpZGVzOiB2YWxpZE92ZXJyaWRlcyxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLlNUT1JBR0VfS0VZLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7XHJcbiAgICAgICAgdGhpcy5zZXRDYWNoZWRPdmVycmlkZXModmFsaWRPdmVycmlkZXMpO1xyXG5cclxuICAgICAgICBjb25zdCBjbGVhbmVkQ291bnQgPSBPYmplY3Qua2V5cyhvdmVycmlkZXMpLmxlbmd0aCAtIE9iamVjdC5rZXlzKHZhbGlkT3ZlcnJpZGVzKS5sZW5ndGg7XHJcbiAgICAgICAgY29uc29sZS5sb2coYPCfp7kg5bey5riF55CGICR7Y2xlYW5lZENvdW50fSDkuKrml6DmlYjnmoTnvqTlkI3opobnm5ZgKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5oYW5kbGVTdG9yYWdlRXJyb3IoZXJyb3IgYXMgRXJyb3IsICd2YWxpZGF0ZScpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5om56YeP5pu05paw6KaG55uWXHJcbiAgICovXHJcbiAgc3RhdGljIGJhdGNoVXBkYXRlT3ZlcnJpZGVzKHVwZGF0ZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4pOiB2b2lkIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IG92ZXJyaWRlcyA9IHRoaXMuZ2V0R3JvdXBOYW1lT3ZlcnJpZGVzKCk7XHJcblxyXG4gICAgICAvLyDmibnph4/mm7TmlrBcclxuICAgICAgT2JqZWN0LmFzc2lnbihvdmVycmlkZXMsIHVwZGF0ZXMpO1xyXG5cclxuICAgICAgY29uc3QgZGF0YTogR3JvdXBOYW1lT3ZlcnJpZGVEYXRhID0ge1xyXG4gICAgICAgIHZlcnNpb246IHRoaXMuQ1VSUkVOVF9WRVJTSU9OLFxyXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICBvdmVycmlkZXMsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLlNUT1JBR0VfS0VZLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7XHJcblxyXG4gICAgICAvLyDmm7TmlrDnvJPlrZhcclxuICAgICAgdGhpcy5zZXRDYWNoZWRPdmVycmlkZXMob3ZlcnJpZGVzKTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OmIOaJuemHj+abtOaWsCAke09iamVjdC5rZXlzKHVwZGF0ZXMpLmxlbmd0aH0g5Liq576k5ZCN6KaG55uWYCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLmhhbmRsZVN0b3JhZ2VFcnJvcihlcnJvciBhcyBFcnJvciwgJ2JhdGNoVXBkYXRlJyk7XHJcblxyXG4gICAgICAvLyDpmY3nuqfliLDlhoXlrZjlrZjlgqhcclxuICAgICAgdGhpcy5tZW1vcnlPdmVycmlkZXMgPSB0aGlzLm1lbW9yeU92ZXJyaWRlcyB8fCB7fTtcclxuICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLm1lbW9yeU92ZXJyaWRlcywgdXBkYXRlcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bosIPor5Xkv6Hmga9cclxuICAgKi9cclxuICBzdGF0aWMgZ2V0RGVidWdJbmZvKCk6IG9iamVjdCB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdG9yYWdlS2V5OiB0aGlzLlNUT1JBR0VfS0VZLFxyXG4gICAgICB2ZXJzaW9uOiB0aGlzLkNVUlJFTlRfVkVSU0lPTixcclxuICAgICAgY2FjaGVTdGF0dXM6IHtcclxuICAgICAgICBoYXNDYWNoZTogISF0aGlzLmNhY2hlLFxyXG4gICAgICAgIGNhY2hlQWdlOiB0aGlzLmNhY2hlID8gRGF0ZS5ub3coKSAtIHRoaXMuY2FjaGVUaW1lc3RhbXAgOiAwLFxyXG4gICAgICAgIGNhY2hlVFRMOiB0aGlzLkNBQ0hFX1RUTCxcclxuICAgICAgfSxcclxuICAgICAgb3ZlcnJpZGVDb3VudDogT2JqZWN0LmtleXModGhpcy5nZXRHcm91cE5hbWVPdmVycmlkZXMoKSkubGVuZ3RoLFxyXG4gICAgICBzdG9yYWdlU2l6ZTogdGhpcy5nZXRTdG9yYWdlU2l6ZSgpLFxyXG4gICAgICBtZW1vcnlGYWxsYmFjazogISF0aGlzLm1lbW9yeU92ZXJyaWRlcyxcclxuICAgICAgbWVtb3J5T3ZlcnJpZGVDb3VudDogdGhpcy5tZW1vcnlPdmVycmlkZXMgPyBPYmplY3Qua2V5cyh0aGlzLm1lbW9yeU92ZXJyaWRlcykubGVuZ3RoIDogMCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmo4Dmn6XmmK/lkKbmnInopobnm5bmlbDmja5cclxuICAgKi9cclxuICBzdGF0aWMgaGFzT3ZlcnJpZGVzKCk6IGJvb2xlYW4ge1xyXG4gICAgY29uc3Qgb3ZlcnJpZGVzID0gdGhpcy5nZXRHcm91cE5hbWVPdmVycmlkZXMoKTtcclxuICAgIHJldHVybiBPYmplY3Qua2V5cyhvdmVycmlkZXMpLmxlbmd0aCA+IDA7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmo4Dmn6XnibnlrprnvqTogYrmmK/lkKbmnInopobnm5ZcclxuICAgKi9cclxuICBzdGF0aWMgaGFzT3ZlcnJpZGUoZ3JvdXBJZDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5nZXRHcm91cE5hbWVPdmVycmlkZShncm91cElkKSAhPT0gbnVsbDtcclxuICB9XHJcblxyXG4gIC8vIOengeacieaWueazlVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bnvJPlrZjnmoTopobnm5bmlbDmja5cclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBnZXRDYWNoZWRPdmVycmlkZXMoKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB8IG51bGwge1xyXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgIGlmICh0aGlzLmNhY2hlICYmIG5vdyAtIHRoaXMuY2FjaGVUaW1lc3RhbXAgPCB0aGlzLkNBQ0hFX1RUTCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5jYWNoZTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6K6+572u57yT5a2Y55qE6KaG55uW5pWw5o2uXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgc2V0Q2FjaGVkT3ZlcnJpZGVzKG92ZXJyaWRlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPik6IHZvaWQge1xyXG4gICAgdGhpcy5jYWNoZSA9IHsgLi4ub3ZlcnJpZGVzIH07XHJcbiAgICB0aGlzLmNhY2hlVGltZXN0YW1wID0gRGF0ZS5ub3coKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOa4hemZpOe8k+WtmFxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGNsZWFyQ2FjaGUoKTogdm9pZCB7XHJcbiAgICB0aGlzLmNhY2hlID0gbnVsbDtcclxuICAgIHRoaXMuY2FjaGVUaW1lc3RhbXAgPSAwO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5aSE55CG5a2Y5YKo6ZSZ6K+vXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgaGFuZGxlU3RvcmFnZUVycm9yKGVycm9yOiBFcnJvciwgb3BlcmF0aW9uOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgIGNvbnNvbGUud2Fybihg4pqg77iPIOe+pOWQjeimhuebluWtmOWCqOaTjeS9nOWksei0pSAoJHtvcGVyYXRpb259KTpgLCBlcnJvcik7XHJcblxyXG4gICAgLy8g5aaC5p6c5piv6YWN6aKd6LaF5Ye66ZSZ6K+v77yM5bCd6K+V5riF55CGXHJcbiAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ1F1b3RhRXhjZWVkZWRFcnJvcicpIHtcclxuICAgICAgY29uc29sZS5sb2coJ/Cfkr4g5a2Y5YKo6YWN6aKd6LaF5Ye677yM5bCd6K+V5riF55CG5pen5pWw5o2uLi4uJyk7XHJcbiAgICAgIHRoaXMuY2xlYW51cE9sZERhdGEoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDlsJ3or5XmuIXnkIbmjZ/lnY/nmoTmlbDmja5cclxuICAgIGlmIChvcGVyYXRpb24gPT09ICdnZXQnIHx8IG9wZXJhdGlvbiA9PT0gJ3ZhbGlkYXRlJykge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHRoaXMuU1RPUkFHRV9LRVkpO1xyXG4gICAgICAgIHRoaXMuY2xlYXJDYWNoZSgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn6e5IOW3sua4heeQhuaNn+Wdj+eahOimhuebluaVsOaNricpO1xyXG4gICAgICB9IGNhdGNoIChjbGVhbkVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcign4p2MIOa4heeQhuimhuebluaVsOaNruWksei0pTonLCBjbGVhbkVycm9yKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5riF55CG5pen5pWw5o2u5Lul6YeK5pS+5a2Y5YKo56m66Ze0XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgY2xlYW51cE9sZERhdGEoKTogdm9pZCB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDov5nph4zlj6/ku6Xlrp7njrDmm7TlpI3mnYLnmoTmuIXnkIbpgLvovpFcclxuICAgICAgLy8g55uu5YmN566A5Y2V5Zyw5riF6Zmk5b2T5YmN5pWw5o2uXHJcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHRoaXMuU1RPUkFHRV9LRVkpO1xyXG4gICAgICB0aGlzLmNsZWFyQ2FjaGUoKTtcclxuICAgICAgY29uc29sZS5sb2coJ/Cfp7kg5bey5riF55CG5pen55qE576k5ZCN6KaG55uW5pWw5o2uJyk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfinYwg5riF55CG5pen5pWw5o2u5aSx6LSlOicsIGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluWtmOWCqOWkp+Wwj1xyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGdldFN0b3JhZ2VTaXplKCk6IG51bWJlciB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBzdG9yZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLlNUT1JBR0VfS0VZKTtcclxuICAgICAgcmV0dXJuIHN0b3JlZCA/IG5ldyBCbG9iKFtzdG9yZWRdKS5zaXplIDogMDtcclxuICAgIH0gY2F0Y2gge1xyXG4gICAgICByZXR1cm4gLTE7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmlbDmja7ov4Hnp7tcclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBtaWdyYXRlRGF0YSgpOiB2b2lkIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHN0b3JlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMuU1RPUkFHRV9LRVkpO1xyXG4gICAgICBpZiAoIXN0b3JlZCkgcmV0dXJuO1xyXG5cclxuICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2Uoc3RvcmVkKTtcclxuXHJcbiAgICAgIC8vIOajgOafpeeJiOacrFxyXG4gICAgICBpZiAoIWRhdGEudmVyc2lvbikge1xyXG4gICAgICAgIC8vIOi/geenu+aXp+eJiOacrOaVsOaNru+8iOWBh+iuvuaXp+eJiOacrOebtOaOpeWtmOWCqOimhuebluWvueixoe+8iVxyXG4gICAgICAgIGNvbnN0IG1pZ3JhdGVkRGF0YTogR3JvdXBOYW1lT3ZlcnJpZGVEYXRhID0ge1xyXG4gICAgICAgICAgdmVyc2lvbjogdGhpcy5DVVJSRU5UX1ZFUlNJT04sXHJcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgICAgICBvdmVycmlkZXM6IHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyA/IGRhdGEgOiB7fSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLlNUT1JBR0VfS0VZLCBKU09OLnN0cmluZ2lmeShtaWdyYXRlZERhdGEpKTtcclxuICAgICAgICBjb25zb2xlLmxvZygn8J+UhCDlt7Lov4Hnp7vnvqTlkI3opobnm5bmlbDmja7liLDmlrDniYjmnKwnKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign4p2MIOaVsOaNrui/geenu+Wksei0pTonLCBlcnJvcik7XHJcbiAgICAgIC8vIOa4heeQhuaNn+Wdj+eahOaVsOaNrlxyXG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh0aGlzLlNUT1JBR0VfS0VZKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/groupChat/GroupNameOverrideManager.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/groupChat/groupChatModal.scss": 
  /*!*****************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/groupChat/groupChatModal.scss ***!
  \*****************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZ3JvdXBDaGF0L2dyb3VwQ2hhdE1vZGFsLnNjc3MiLCJtYXBwaW5ncyI6IjtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy9ncm91cENoYXQvZ3JvdXBDaGF0TW9kYWwuc2Nzcz8iXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/groupChat/groupChatModal.scss\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/groupChat/groupChatModal.ts": 
  /*!***************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/groupChat/groupChatModal.ts ***!
  \***************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GroupChatModal: () => (/* binding */ GroupChatModal)\n/* harmony export */ });\n/* harmony import */ var _utils_AvatarSync__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/AvatarSync */ \"./src/多云熊/备份/给rovo的/modules/utils/AvatarSync.ts\");\n/* harmony import */ var _utils_userInfoRetrieval__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/userInfoRetrieval */ \"./src/多云熊/备份/给rovo的/modules/utils/userInfoRetrieval.ts\");\n/* harmony import */ var _groupChatModal_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./groupChatModal.scss */ \"./src/多云熊/备份/给rovo的/modules/groupChat/groupChatModal.scss\");\n\n\n\n/**\n * 群聊设置模态框管理器\n */\nclass GroupChatModal {\n    modalData;\n    contacts;\n    onConfirm;\n    onCancel;\n    avatarMixin;\n    constructor(selectedContactIds, contacts, onConfirm, onCancel) {\n        this.modalData = {\n            selectedContactIds,\n            settings: {\n                name: '',\n                avatar: 'https://files.catbox.moe/u8ccy5.jpg', // 默认群头像\n                userJoins: true,\n            },\n        };\n        this.contacts = contacts;\n        this.onConfirm = onConfirm;\n        this.onCancel = onCancel;\n        this.avatarMixin = new _utils_AvatarSync__WEBPACK_IMPORTED_MODULE_0__.SimpleAvatarMixin({ debug: false });\n    }\n    /**\n     * 显示群聊设置模态框\n     */\n    async show() {\n        console.log('🚀 [GroupChatModal] 开始显示群聊设置模态框...');\n        const modal = this.createModal();\n        const interfaceContainer = document.querySelector('.interface-container');\n        if (interfaceContainer) {\n            interfaceContainer.appendChild(modal);\n            console.log('✅ [GroupChatModal] 模态框已添加到 interface-container');\n        }\n        else {\n            document.body.appendChild(modal);\n            console.log('✅ [GroupChatModal] 模态框已添加到 body');\n        }\n        // 显示模态框\n        setTimeout(() => {\n            modal.classList.add('show');\n            console.log('✅ [GroupChatModal] 模态框显示动画已触发');\n        }, 10);\n        // 生成默认群名\n        console.log('🏷️ [GroupChatModal] 生成默认群名...');\n        this.generateDefaultGroupName();\n        // 调试环境信息\n        console.log('🔧 [GroupChatModal] 调试环境信息...');\n        const userInfoRetrieval = new (await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../utils/userInfoRetrieval */ \"./src/多云熊/备份/给rovo的/modules/utils/userInfoRetrieval.ts\"))).UserInfoRetrieval();\n        userInfoRetrieval.debugEnvironment();\n        // 异步更新用户信息\n        console.log('🔄 [GroupChatModal] 开始异步更新用户信息...');\n        this.updateUserInfoAsync();\n        // 初始化头像同步\n        console.log('🖼️ [GroupChatModal] 初始化头像同步...');\n        this.initializeAvatarSync();\n        // 强制更新一次头像，确保模态框显示正确\n        console.log('🔄 [GroupChatModal] 强制更新头像...');\n        this.avatarMixin.forceUpdate();\n        console.log('✅ [GroupChatModal] 群聊设置模态框显示完成');\n    }\n    /**\n     * 创建模态框DOM\n     */\n    createModal() {\n        const overlay = document.createElement('div');\n        overlay.className = 'modal-overlay group-chat-modal';\n        overlay.id = 'groupChatModal';\n        const selectedMembers = this.getSelectedMembers();\n        const allMembers = this.getAllMembers();\n        console.log('🏗️ [GroupChatModal] 创建模态框DOM:');\n        console.log('  - 选中成员数:', selectedMembers.length);\n        console.log('  - 总成员数:', allMembers.length);\n        console.log('  - 成员列表:', allMembers.map(m => `${m.name}(${m.id})`));\n        const membersHtml = allMembers\n            .map(member => {\n            console.log(`🏷️ [GroupChatModal] 生成成员HTML: ${member.name} - 头像: ${member.avatar}`);\n            return `\n        <div class=\"member-tag\" data-member-id=\"${member.id}\">\n          <img src=\"${member.avatar}\" class=\"member-avatar\" alt=\"${member.name}\" data-member-id=\"${member.id}\">\n          <span>${member.name}</span>\n        </div>\n      `;\n        })\n            .join('');\n        overlay.innerHTML = `\n      <div class=\"modal-container\">\n        <div class=\"modal-title\">创建群聊</div>\n        \n        <div class=\"selected-members\">\n          <div class=\"members-label\" id=\"membersLabel\">群聊成员 (${allMembers.length}人)</div>\n          <div class=\"members-list\" id=\"membersList\">\n            ${membersHtml}\n          </div>\n        </div>\n\n        <div class=\"form-group\">\n          <label class=\"form-label\">群聊名称</label>\n          <input type=\"text\" class=\"form-input\" id=\"groupNameInput\" placeholder=\"请输入群聊名称\">\n        </div>\n\n        <div class=\"form-group\">\n          <label class=\"form-label\">群聊头像</label>\n          <div class=\"avatar-input-container\">\n            <div class=\"avatar-input-group\">\n              <input type=\"text\" class=\"form-input\" id=\"avatarUrlInput\" placeholder=\"请输入头像URL\" value=\"${this.modalData.settings.avatar}\">\n              <button class=\"upload-btn\" id=\"uploadAvatarBtn\">上传</button>\n              <input type=\"file\" id=\"avatarFileInput\" accept=\"image/*\" style=\"display: none;\">\n            </div>\n            <img src=\"${this.modalData.settings.avatar}\" class=\"avatar-preview\" id=\"avatarPreview\" alt=\"群头像预览\">\n          </div>\n        </div>\n\n        <div class=\"participation-group\">\n          <label class=\"form-label\">您的参与方式</label>\n          <div class=\"participation-options\">\n            <div class=\"participation-option selected\" data-value=\"member\">\n              <div class=\"option-title\">加入群聊</div>\n              <div class=\"option-desc\">作为成员参与对话</div>\n            </div>\n            <div class=\"participation-option\" data-value=\"observer\">\n              <div class=\"option-title\">观察模式</div>\n              <div class=\"option-desc\">只能查看不能发言</div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"modal-buttons\">\n          <button class=\"modal-btn cancel-btn\">取消</button>\n          <button class=\"modal-btn create-btn\">创建群聊</button>\n        </div>\n      </div>\n    `;\n        this.bindEvents(overlay);\n        return overlay;\n    }\n    /**\n     * 绑定事件\n     */\n    bindEvents(modal) {\n        // 群名输入\n        const groupNameInput = modal.querySelector('#groupNameInput');\n        if (groupNameInput) {\n            groupNameInput.addEventListener('input', e => {\n                this.modalData.settings.name = e.target.value;\n            });\n        }\n        // 头像URL输入\n        const avatarUrlInput = modal.querySelector('#avatarUrlInput');\n        const avatarPreview = modal.querySelector('#avatarPreview');\n        if (avatarUrlInput && avatarPreview) {\n            avatarUrlInput.addEventListener('input', e => {\n                const url = e.target.value;\n                this.modalData.settings.avatar = url;\n                avatarPreview.src = url;\n            });\n            // 头像加载失败时使用默认头像\n            avatarPreview.addEventListener('error', () => {\n                avatarPreview.src = 'https://files.catbox.moe/u8ccy5.jpg';\n            });\n        }\n        // 上传头像按钮\n        const uploadBtn = modal.querySelector('#uploadAvatarBtn');\n        const fileInput = modal.querySelector('#avatarFileInput');\n        if (uploadBtn && fileInput) {\n            uploadBtn.addEventListener('click', () => {\n                fileInput.click();\n            });\n            fileInput.addEventListener('change', e => {\n                const file = e.target.files?.[0];\n                if (file) {\n                    if (file.type.startsWith('image/')) {\n                        const reader = new FileReader();\n                        reader.onload = e => {\n                            const dataUrl = e.target?.result;\n                            this.modalData.settings.avatar = dataUrl;\n                            if (avatarPreview) {\n                                avatarPreview.src = dataUrl;\n                            }\n                            if (avatarUrlInput) {\n                                avatarUrlInput.value = '本地上传的图片';\n                            }\n                        };\n                        reader.readAsDataURL(file);\n                    }\n                    else {\n                        toastr.error('请选择图片文件');\n                    }\n                }\n            });\n        }\n        // 参与方式选择\n        const participationOptions = modal.querySelectorAll('.participation-option');\n        const membersLabel = modal.querySelector('#membersLabel');\n        participationOptions.forEach(option => {\n            option.addEventListener('click', () => {\n                participationOptions.forEach(opt => opt.classList.remove('selected'));\n                option.classList.add('selected');\n                this.modalData.settings.userJoins = option.getAttribute('data-value') === 'member';\n                // 异步更新成员人数和列表显示\n                this.updateUserInfoAsync();\n            });\n        });\n        // 取消按钮\n        const cancelBtn = modal.querySelector('.cancel-btn');\n        if (cancelBtn) {\n            cancelBtn.addEventListener('click', () => {\n                this.hide();\n                this.onCancel();\n            });\n        }\n        // 创建按钮\n        const createBtn = modal.querySelector('.create-btn');\n        if (createBtn) {\n            createBtn.addEventListener('click', () => {\n                if (this.validateSettings()) {\n                    this.hide();\n                    this.onConfirm(this.modalData.settings);\n                }\n            });\n        }\n        // 点击遮罩关闭\n        modal.addEventListener('click', e => {\n            if (e.target === modal) {\n                this.hide();\n                this.onCancel();\n            }\n        });\n    }\n    /**\n     * 获取选中的成员信息\n     */\n    getSelectedMembers() {\n        return this.contacts.filter(contact => this.modalData.selectedContactIds.includes(contact.id));\n    }\n    /**\n     * 获取所有群聊成员（包括用户，如果用户选择加入）\n     */\n    getAllMembers() {\n        const selectedMembers = this.getSelectedMembers();\n        if (this.modalData.settings.userJoins) {\n            // 用户选择加入群聊，添加用户到成员列表\n            const userName = (0,_utils_userInfoRetrieval__WEBPACK_IMPORTED_MODULE_1__.getUserName)();\n            const userAvatar = (0,_utils_userInfoRetrieval__WEBPACK_IMPORTED_MODULE_1__.getUserAvatar)();\n            console.log('🔍 [GroupChatModal] 获取用户信息（同步）:');\n            console.log('  - 用户名:', userName);\n            console.log('  - 用户头像:', userAvatar);\n            const userMember = {\n                id: '{{user}}',\n                name: userName,\n                avatar: userAvatar, // 这里仍使用同步方法，因为需要立即返回\n            };\n            return [userMember, ...selectedMembers];\n        }\n        return selectedMembers;\n    }\n    /**\n     * 异步获取所有群聊成员（包括用户，如果用户选择加入）\n     */\n    async getAllMembersAsync() {\n        const selectedMembers = this.getSelectedMembers();\n        if (this.modalData.settings.userJoins) {\n            // 用户选择加入群聊，添加用户到成员列表\n            const userName = await (0,_utils_userInfoRetrieval__WEBPACK_IMPORTED_MODULE_1__.getUserNameAsync)();\n            const userAvatar = (0,_utils_userInfoRetrieval__WEBPACK_IMPORTED_MODULE_1__.getUserAvatar)();\n            console.log('🔍 [GroupChatModal] 获取用户信息（异步）:');\n            console.log('  - 用户名:', userName);\n            console.log('  - 用户头像:', userAvatar);\n            const userMember = {\n                id: '{{user}}',\n                name: userName,\n                avatar: userAvatar, // 使用现有的头像获取方法\n            };\n            return [userMember, ...selectedMembers];\n        }\n        return selectedMembers;\n    }\n    /**\n     * 异步更新用户信息\n     */\n    async updateUserInfoAsync() {\n        try {\n            console.log('🔄 [GroupChatModal] 开始异步更新用户信息...');\n            // 获取更新后的成员列表\n            const allMembers = await this.getAllMembersAsync();\n            console.log('📋 [GroupChatModal] 更新后的成员列表:');\n            allMembers.forEach((member, index) => {\n                console.log(`  ${index + 1}. ${member.name} (${member.id}) - 头像: ${member.avatar}`);\n            });\n            // 更新成员人数显示\n            const membersLabel = document.querySelector('#membersLabel');\n            if (membersLabel) {\n                membersLabel.textContent = `群聊成员 (${allMembers.length}人)`;\n                console.log('✅ [GroupChatModal] 已更新成员人数显示:', allMembers.length);\n            }\n            // 更新成员列表显示\n            const membersList = document.querySelector('#membersList');\n            if (membersList) {\n                const membersHtml = allMembers\n                    .map(member => `\n            <div class=\"member-tag\" data-member-id=\"${member.id}\">\n              <img src=\"${member.avatar}\" class=\"member-avatar\" alt=\"${member.name}\" data-member-id=\"${member.id}\">\n              <span>${member.name}</span>\n            </div>\n          `)\n                    .join('');\n                membersList.innerHTML = membersHtml;\n                console.log('✅ [GroupChatModal] 已更新成员列表HTML');\n            }\n            // 重新生成默认群名（使用更新后的用户名）\n            this.generateDefaultGroupNameAsync();\n        }\n        catch (error) {\n            console.error('❌ [GroupChatModal] 异步更新用户信息失败:', error);\n        }\n    }\n    /**\n     * 生成默认群名\n     */\n    generateDefaultGroupName() {\n        const allMembers = this.getAllMembers();\n        const memberNames = allMembers.map(m => m.name);\n        let defaultName = '';\n        if (memberNames.length <= 3) {\n            defaultName = memberNames.join('、') + '的群聊';\n        }\n        else {\n            defaultName = memberNames.slice(0, 2).join('、') + `等${memberNames.length}人的群聊`;\n        }\n        this.modalData.settings.name = defaultName;\n        // 更新输入框\n        const groupNameInput = document.querySelector('#groupNameInput');\n        if (groupNameInput) {\n            groupNameInput.value = defaultName;\n        }\n    }\n    /**\n     * 异步生成默认群名（使用更新后的用户名）\n     */\n    async generateDefaultGroupNameAsync() {\n        try {\n            const allMembers = await this.getAllMembersAsync();\n            const memberNames = allMembers.map(m => m.name);\n            let defaultName = '';\n            if (memberNames.length <= 3) {\n                defaultName = memberNames.join('、') + '的群聊';\n            }\n            else {\n                defaultName = memberNames.slice(0, 2).join('、') + `等${memberNames.length}人的群聊`;\n            }\n            this.modalData.settings.name = defaultName;\n            // 更新输入框\n            const groupNameInput = document.querySelector('#groupNameInput');\n            if (groupNameInput) {\n                groupNameInput.value = defaultName;\n            }\n        }\n        catch (error) {\n            console.log('❌ 异步生成默认群名失败:', error);\n        }\n    }\n    /**\n     * 验证设置\n     */\n    validateSettings() {\n        if (!this.modalData.settings.name.trim()) {\n            toastr.error('请输入群聊名称');\n            return false;\n        }\n        if (!this.modalData.settings.avatar.trim()) {\n            toastr.error('请设置群聊头像');\n            return false;\n        }\n        return true;\n    }\n    /**\n     * 初始化头像同步\n     */\n    async initializeAvatarSync() {\n        try {\n            // 自动注册页面中的头像元素\n            this.avatarMixin.autoRegister();\n            // 注册用户头像元素\n            setTimeout(() => {\n                this.registerUserAvatarElements();\n            }, 100);\n            console.log('[GroupChatModal] 头像同步已初始化');\n        }\n        catch (error) {\n            console.error('[GroupChatModal] 头像同步初始化失败:', error);\n        }\n    }\n    /**\n     * 注册用户头像元素\n     */\n    registerUserAvatarElements() {\n        console.log('🔍 [GroupChatModal] 开始注册用户头像元素...');\n        // 查找所有用户的member-avatar元素\n        const memberAvatars = document.querySelectorAll('.member-avatar');\n        console.log(`🔍 [GroupChatModal] 找到 ${memberAvatars.length} 个成员头像元素`);\n        let registeredCount = 0;\n        memberAvatars.forEach((avatar, index) => {\n            const memberTag = avatar.closest('.member-tag');\n            if (memberTag) {\n                const memberId = memberTag.getAttribute('data-member-id');\n                console.log(`🔍 [GroupChatModal] 头像元素 ${index + 1}: memberId = \"${memberId}\"`);\n                // 只注册用户自己的头像元素\n                if (memberId === '{{user}}' || memberId === 'user') {\n                    this.avatarMixin.register(avatar, 'img');\n                    registeredCount++;\n                    console.log('✅ [GroupChatModal] 已注册用户头像元素:', {\n                        element: avatar,\n                        src: avatar.src,\n                        alt: avatar.alt,\n                    });\n                }\n            }\n            else {\n                console.log(`⚠️ [GroupChatModal] 头像元素 ${index + 1} 没有找到 .member-tag 父元素`);\n            }\n        });\n        console.log(`✅ [GroupChatModal] 头像注册完成，共注册 ${registeredCount} 个用户头像元素`);\n    }\n    /**\n     * 隐藏模态框\n     */\n    hide() {\n        // 销毁头像同步\n        this.avatarMixin.destroy();\n        const modal = document.getElementById('groupChatModal');\n        if (modal) {\n            modal.classList.remove('show');\n            setTimeout(() => {\n                modal.remove();\n            }, 300);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZ3JvdXBDaGF0L2dyb3VwQ2hhdE1vZGFsLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBd0Q7QUFDa0M7QUFDM0Q7QUFHL0I7O0dBRUc7QUFDSSxNQUFNLGNBQWM7SUFDakIsU0FBUyxDQUFxQjtJQUM5QixRQUFRLENBQWdCO0lBQ3hCLFNBQVMsQ0FBd0M7SUFDakQsUUFBUSxDQUFhO0lBQ3JCLFdBQVcsQ0FBb0I7SUFFdkMsWUFDRSxrQkFBNEIsRUFDNUIsUUFBdUIsRUFDdkIsU0FBZ0QsRUFDaEQsUUFBb0I7UUFFcEIsSUFBSSxDQUFDLFNBQVMsR0FBRztZQUNmLGtCQUFrQjtZQUNsQixRQUFRLEVBQUU7Z0JBQ1IsSUFBSSxFQUFFLEVBQUU7Z0JBQ1IsTUFBTSxFQUFFLHFDQUFxQyxFQUFFLFFBQVE7Z0JBQ3ZELFNBQVMsRUFBRSxJQUFJO2FBQ2hCO1NBQ0YsQ0FBQztRQUNGLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO1FBQzNCLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxnRUFBaUIsQ0FBQyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO0lBQzdELENBQUM7SUFFRDs7T0FFRztJQUNILEtBQUssQ0FBQyxJQUFJO1FBQ1IsT0FBTyxDQUFDLEdBQUcsQ0FBQyxvQ0FBb0MsQ0FBQyxDQUFDO1FBRWxELE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNqQyxNQUFNLGtCQUFrQixHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsc0JBQXNCLENBQUMsQ0FBQztRQUUxRSxJQUFJLGtCQUFrQixFQUFFLENBQUM7WUFDdkIsa0JBQWtCLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3RDLE9BQU8sQ0FB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QyxjQUFjLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUN4RCxJQUFJLEtBQUssRUFBRSxDQUFDO1lBQ1YsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDL0IsVUFBVSxDQUFDLEdBQUcsRUFBRTtnQkFDZCxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDakIsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ1YsQ0FBQztJQUNILENBQUM7Q0FDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZ3JvdXBDaGF0L2dyb3VwQ2hhdE1vZGFsLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTaW1wbGVBdmF0YXJNaXhpbiB9IGZyb20gJy4uL3V0aWxzL0F2YXRhclN5bmMnO1xuaW1wb3J0IHsgZ2V0VXNlckF2YXRhciwgZ2V0VXNlck5hbWUsIGdldFVzZXJOYW1lQXN5bmMgfSBmcm9tICcuLi91dGlscy91c2VySW5mb1JldHJpZXZhbCc7XG5pbXBvcnQgJy4vZ3JvdXBDaGF0TW9kYWwuc2Nzcyc7XG5pbXBvcnQgeyBDb250YWN0SW5mbywgR3JvdXBDaGF0TW9kYWxEYXRhLCBHcm91cENoYXRTZXR0aW5ncyB9IGZyb20gJy4vdHlwZXMnO1xuXG4vKipcbiAqIOe+pOiBiuiuvue9ruaooeaAgeahhueuoeeQhuWZqFxuICovXG5leHBvcnQgY2xhc3MgR3JvdXBDaGF0TW9kYWwge1xuICBwcml2YXRlIG1vZGFsRGF0YTogR3JvdXBDaGF0TW9kYWxEYXRhO1xuICBwcml2YXRlIGNvbnRhY3RzOiBDb250YWN0SW5mb1tdO1xuICBwcml2YXRlIG9uQ29uZmlybTogKHNldHRpbmdzOiBHcm91cENoYXRTZXR0aW5ncykgPT4gdm9pZDtcbiAgcHJpdmF0ZSBvbkNhbmNlbDogKCkgPT4gdm9pZDtcbiAgcHJpdmF0ZSBhdmF0YXJNaXhpbjogU2ltcGxlQXZhdGFyTWl4aW47XG5cbiAgY29uc3RydWN0b3IoXG4gICAgc2VsZWN0ZWRDb250YWN0SWRzOiBzdHJpbmdbXSxcbiAgICBjb250YWN0czogQ29udGFjdEluZm9bXSxcbiAgICBvbkNvbmZpcm06IChzZXR0aW5nczogR3JvdXBDaGF0U2V0dGluZ3MpID0+IHZvaWQsXG4gICAgb25DYW5jZWw6ICgpID0+IHZvaWQsXG4gICkge1xuICAgIHRoaXMubW9kYWxEYXRhID0ge1xuICAgICAgc2VsZWN0ZWRDb250YWN0SWRzLFxuICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgbmFtZTogJycsXG4gICAgICAgIGF2YXRhcjogJ2h0dHBzOi8vZmlsZXMuY2F0Ym94Lm1vZS91OGNjeTUuanBnJywgLy8g6buY6K6k576k5aS05YOPXG4gICAgICAgIHVzZXJKb2luczogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfTtcbiAgICB0aGlzLmNvbnRhY3RzID0gY29udGFjdHM7XG4gICAgdGhpcy5vbkNvbmZpcm0gPSBvbkNvbmZpcm07XG4gICAgdGhpcy5vbkNhbmNlbCA9IG9uQ2FuY2VsO1xuICAgIHRoaXMuYXZhdGFyTWl4aW4gPSBuZXcgU2ltcGxlQXZhdGFyTWl4aW4oeyBkZWJ1ZzogZmFsc2UgfSk7XG4gIH1cblxuICAvKipcbiAgICog5pi+56S6576k6IGK6K6+572u5qih5oCB5qGGXG4gICAqL1xuICBhc3luYyBzaG93KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnNvbGUubG9nKCfwn5qAIFtHcm91cENoYXRNb2RhbF0g5byA5aeL5pi+56S6576k6IGK6K6+572u5qih5oCB5qGGLi4uJyk7XG5cbiAgICBjb25zdCBtb2RhbCA9IHRoaXMuY3JlYXRlTW9kYWwoKTtcbiAgICBjb25zdCBpbnRlcmZhY2VDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW50ZXJmYWNlLWNvbnRhaW5lcicpO1xuXG4gICAgaWYgKGludGVyZmFjZUNvbnRhaW5lcikge1xuICAgICAgaW50ZXJmYWNlQ29udGFpbmVyLmFwcGVuZENoaWxkKG1vZGFsKTtcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgW0dyb3VwQ2hhdE1vZGFsXSDmqKHmgIHmoYblt7Lmt7vliqDliLAgaW50ZXJmYWNlLWNvbnRhaW5lcicpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1vZGFsKTtcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgW0dyb3VwQ2hhdE1vZGFsXSDmqKHmgIHmoYblt7Lmt7vliqDliLAgYm9keScpO1xuICAgIH1cblxuICAgIC8vIOaYvuekuuaooeaAgeahhlxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgbW9kYWwuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuICAgICAgY29uc29sZS5sb2coJ+KchSBbR3JvdXBDaGF0TW9kYWxdIOaooeaAgeahhuaYvuekuuWKqOeUu+W3suinpuWPkScpO1xuICAgIH0sIDEwKTtcblxuICAgIC8vIOeUn+aIkOm7mOiupOe+pOWQjVxuICAgIGNvbnNvbGUubG9nKCfwn4+377iPIFtHcm91cENoYXRNb2RhbF0g55Sf5oiQ6buY6K6k576k5ZCNLi4uJyk7XG4gICAgdGhpcy5nZW5lcmF0ZURlZmF1bHRHcm91cE5hbWUoKTtcblxuICAgIC8vIOiwg+ivleeOr+Wig+S/oeaBr1xuICAgIGNvbnNvbGUubG9nKCfwn5SnIFtHcm91cENoYXRNb2RhbF0g6LCD6K+V546v5aKD5L+h5oGvLi4uJyk7XG4gICAgY29uc3QgdXNlckluZm9SZXRyaWV2YWwgPSBuZXcgKGF3YWl0IGltcG9ydCgnLi4vdXRpbHMvdXNlckluZm9SZXRyaWV2YWwnKSkuVXNlckluZm9SZXRyaWV2YWwoKTtcbiAgICB1c2VySW5mb1JldHJpZXZhbC5kZWJ1Z0Vudmlyb25tZW50KCk7XG5cbiAgICAvLyDlvILmraXmm7TmlrDnlKjmiLfkv6Hmga9cbiAgICBjb25zb2xlLmxvZygn8J+UhCBbR3JvdXBDaGF0TW9kYWxdIOW8gOWni+W8guatpeabtOaWsOeUqOaIt+S/oeaBry4uLicpO1xuICAgIHRoaXMudXBkYXRlVXNlckluZm9Bc3luYygpO1xuXG4gICAgLy8g5Yid5aeL5YyW5aS05YOP5ZCM5q2lXG4gICAgY29uc29sZS5sb2coJ/CflrzvuI8gW0dyb3VwQ2hhdE1vZGFsXSDliJ3lp4vljJblpLTlg4/lkIzmraUuLi4nKTtcbiAgICB0aGlzLmluaXRpYWxpemVBdmF0YXJTeW5jKCk7XG5cbiAgICAvLyDlvLrliLbmm7TmlrDkuIDmrKHlpLTlg4/vvIznoa7kv53mqKHmgIHmoYbmmL7npLrmraPnoa5cbiAgICBjb25zb2xlLmxvZygn8J+UhCBbR3JvdXBDaGF0TW9kYWxdIOW8uuWItuabtOaWsOWktOWDjy4uLicpO1xuICAgIHRoaXMuYXZhdGFyTWl4aW4uZm9yY2VVcGRhdGUoKTtcblxuICAgIGNvbnNvbGUubG9nKCfinIUgW0dyb3VwQ2hhdE1vZGFsXSDnvqTogYrorr7nva7mqKHmgIHmoYbmmL7npLrlrozmiJAnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliJvlu7rmqKHmgIHmoYZET01cbiAgICovXG4gIHByaXZhdGUgY3JlYXRlTW9kYWwoKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBvdmVybGF5LmNsYXNzTmFtZSA9ICdtb2RhbC1vdmVybGF5IGdyb3VwLWNoYXQtbW9kYWwnO1xuICAgIG92ZXJsYXkuaWQgPSAnZ3JvdXBDaGF0TW9kYWwnO1xuXG4gICAgY29uc3Qgc2VsZWN0ZWRNZW1iZXJzID0gdGhpcy5nZXRTZWxlY3RlZE1lbWJlcnMoKTtcbiAgICBjb25zdCBhbGxNZW1iZXJzID0gdGhpcy5nZXRBbGxNZW1iZXJzKCk7XG5cbiAgICBjb25zb2xlLmxvZygn8J+Pl++4jyBbR3JvdXBDaGF0TW9kYWxdIOWIm+W7uuaooeaAgeahhkRPTTonKTtcbiAgICBjb25zb2xlLmxvZygnICAtIOmAieS4reaIkOWRmOaVsDonLCBzZWxlY3RlZE1lbWJlcnMubGVuZ3RoKTtcbiAgICBjb25zb2xlLmxvZygnICAtIOaAu+aIkOWRmOaVsDonLCBhbGxNZW1iZXJzLmxlbmd0aCk7XG4gICAgY29uc29sZS5sb2coXG4gICAgICAnICAtIOaIkOWRmOWIl+ihqDonLFxuICAgICAgYWxsTWVtYmVycy5tYXAobSA9PiBgJHttLm5hbWV9KCR7bS5pZH0pYCksXG4gICAgKTtcblxuICAgIGNvbnN0IG1lbWJlcnNIdG1sID0gYWxsTWVtYmVyc1xuICAgICAgLm1hcChtZW1iZXIgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhg8J+Pt++4jyBbR3JvdXBDaGF0TW9kYWxdIOeUn+aIkOaIkOWRmEhUTUw6ICR7bWVtYmVyLm5hbWV9IC0g5aS05YOPOiAke21lbWJlci5hdmF0YXJ9YCk7XG4gICAgICAgIHJldHVybiBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJtZW1iZXItdGFnXCIgZGF0YS1tZW1iZXItaWQ9XCIke21lbWJlci5pZH1cIj5cbiAgICAgICAgICA8aW1nIHNyYz1cIiR7bWVtYmVyLmF2YXRhcn1cIiBjbGFzcz1cIm1lbWJlci1hdmF0YXJcIiBhbHQ9XCIke21lbWJlci5uYW1lfVwiIGRhdGEtbWVtYmVyLWlkPVwiJHttZW1iZXIuaWR9XCI+XG4gICAgICAgICAgPHNwYW4+JHttZW1iZXIubmFtZX08L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgICAgIH0pXG4gICAgICAuam9pbignJyk7XG5cbiAgICBvdmVybGF5LmlubmVySFRNTCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250YWluZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLXRpdGxlXCI+5Yib5bu6576k6IGKPC9kaXY+XG4gICAgICAgIFxuICAgICAgICA8ZGl2IGNsYXNzPVwic2VsZWN0ZWQtbWVtYmVyc1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZW1iZXJzLWxhYmVsXCIgaWQ9XCJtZW1iZXJzTGFiZWxcIj7nvqTogYrmiJDlkZggKCR7YWxsTWVtYmVycy5sZW5ndGh95Lq6KTwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZW1iZXJzLWxpc3RcIiBpZD1cIm1lbWJlcnNMaXN0XCI+XG4gICAgICAgICAgICAke21lbWJlcnNIdG1sfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm0tbGFiZWxcIj7nvqTogYrlkI3np7A8L2xhYmVsPlxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1pbnB1dFwiIGlkPVwiZ3JvdXBOYW1lSW5wdXRcIiBwbGFjZWhvbGRlcj1cIuivt+i+k+WFpee+pOiBiuWQjeensFwiPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm0tbGFiZWxcIj7nvqTogYrlpLTlg488L2xhYmVsPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJhdmF0YXItaW5wdXQtY29udGFpbmVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYXZhdGFyLWlucHV0LWdyb3VwXCI+XG4gICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1pbnB1dFwiIGlkPVwiYXZhdGFyVXJsSW5wdXRcIiBwbGFjZWhvbGRlcj1cIuivt+i+k+WFpeWktOWDj1VSTFwiIHZhbHVlPVwiJHt0aGlzLm1vZGFsRGF0YS5zZXR0aW5ncy5hdmF0YXJ9XCI+XG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ1cGxvYWQtYnRuXCIgaWQ9XCJ1cGxvYWRBdmF0YXJCdG5cIj7kuIrkvKA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJmaWxlXCIgaWQ9XCJhdmF0YXJGaWxlSW5wdXRcIiBhY2NlcHQ9XCJpbWFnZS8qXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8aW1nIHNyYz1cIiR7dGhpcy5tb2RhbERhdGEuc2V0dGluZ3MuYXZhdGFyfVwiIGNsYXNzPVwiYXZhdGFyLXByZXZpZXdcIiBpZD1cImF2YXRhclByZXZpZXdcIiBhbHQ9XCLnvqTlpLTlg4/pooTop4hcIj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzcz1cInBhcnRpY2lwYXRpb24tZ3JvdXBcIj5cbiAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJmb3JtLWxhYmVsXCI+5oKo55qE5Y+C5LiO5pa55byPPC9sYWJlbD5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwicGFydGljaXBhdGlvbi1vcHRpb25zXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicGFydGljaXBhdGlvbi1vcHRpb24gc2VsZWN0ZWRcIiBkYXRhLXZhbHVlPVwibWVtYmVyXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJvcHRpb24tdGl0bGVcIj7liqDlhaXnvqTogYo8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm9wdGlvbi1kZXNjXCI+5L2c5Li65oiQ5ZGY5Y+C5LiO5a+56K+dPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwYXJ0aWNpcGF0aW9uLW9wdGlvblwiIGRhdGEtdmFsdWU9XCJvYnNlcnZlclwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwib3B0aW9uLXRpdGxlXCI+6KeC5a+f5qih5byPPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJvcHRpb24tZGVzY1wiPuWPquiDveafpeeci+S4jeiDveWPkeiogDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1idXR0b25zXCI+XG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm1vZGFsLWJ0biBjYW5jZWwtYnRuXCI+5Y+W5raIPC9idXR0b24+XG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm1vZGFsLWJ0biBjcmVhdGUtYnRuXCI+5Yib5bu6576k6IGKPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYDtcblxuICAgIHRoaXMuYmluZEV2ZW50cyhvdmVybGF5KTtcbiAgICByZXR1cm4gb3ZlcmxheTtcbiAgfVxuXG4gIC8qKlxuICAgKiDnu5Hlrprkuovku7ZcbiAgICovXG4gIHByaXZhdGUgYmluZEV2ZW50cyhtb2RhbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAvLyDnvqTlkI3ovpPlhaVcbiAgICBjb25zdCBncm91cE5hbWVJbnB1dCA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNncm91cE5hbWVJbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgaWYgKGdyb3VwTmFtZUlucHV0KSB7XG4gICAgICBncm91cE5hbWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGUgPT4ge1xuICAgICAgICB0aGlzLm1vZGFsRGF0YS5zZXR0aW5ncy5uYW1lID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8g5aS05YOPVVJM6L6T5YWlXG4gICAgY29uc3QgYXZhdGFyVXJsSW5wdXQgPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCcjYXZhdGFyVXJsSW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IGF2YXRhclByZXZpZXcgPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCcjYXZhdGFyUHJldmlldycpIGFzIEhUTUxJbWFnZUVsZW1lbnQ7XG5cbiAgICBpZiAoYXZhdGFyVXJsSW5wdXQgJiYgYXZhdGFyUHJldmlldykge1xuICAgICAgYXZhdGFyVXJsSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBlID0+IHtcbiAgICAgICAgY29uc3QgdXJsID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuICAgICAgICB0aGlzLm1vZGFsRGF0YS5zZXR0aW5ncy5hdmF0YXIgPSB1cmw7XG4gICAgICAgIGF2YXRhclByZXZpZXcuc3JjID0gdXJsO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIOWktOWDj+WKoOi9veWksei0peaXtuS9v+eUqOm7mOiupOWktOWDj1xuICAgICAgYXZhdGFyUHJldmlldy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsICgpID0+IHtcbiAgICAgICAgYXZhdGFyUHJldmlldy5zcmMgPSAnaHR0cHM6Ly9maWxlcy5jYXRib3gubW9lL3U4Y2N5NS5qcGcnO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8g5LiK5Lyg5aS05YOP5oyJ6ZKuXG4gICAgY29uc3QgdXBsb2FkQnRuID0gbW9kYWwucXVlcnlTZWxlY3RvcignI3VwbG9hZEF2YXRhckJ0bicpO1xuICAgIGNvbnN0IGZpbGVJbnB1dCA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNhdmF0YXJGaWxlSW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgaWYgKHVwbG9hZEJ0biAmJiBmaWxlSW5wdXQpIHtcbiAgICAgIHVwbG9hZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgZmlsZUlucHV0LmNsaWNrKCk7XG4gICAgICB9KTtcblxuICAgICAgZmlsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGUgPT4ge1xuICAgICAgICBjb25zdCBmaWxlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmZpbGVzPy5bMF07XG4gICAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgICAgaWYgKGZpbGUudHlwZS5zdGFydHNXaXRoKCdpbWFnZS8nKSkge1xuICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBlID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZGF0YVVybCA9IGUudGFyZ2V0Py5yZXN1bHQgYXMgc3RyaW5nO1xuICAgICAgICAgICAgICB0aGlzLm1vZGFsRGF0YS5zZXR0aW5ncy5hdmF0YXIgPSBkYXRhVXJsO1xuICAgICAgICAgICAgICBpZiAoYXZhdGFyUHJldmlldykge1xuICAgICAgICAgICAgICAgIGF2YXRhclByZXZpZXcuc3JjID0gZGF0YVVybDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoYXZhdGFyVXJsSW5wdXQpIHtcbiAgICAgICAgICAgICAgICBhdmF0YXJVcmxJbnB1dC52YWx1ZSA9ICfmnKzlnLDkuIrkvKDnmoTlm77niYcnO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRvYXN0ci5lcnJvcign6K+36YCJ5oup5Zu+54mH5paH5Lu2Jyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyDlj4LkuI7mlrnlvI/pgInmi6lcbiAgICBjb25zdCBwYXJ0aWNpcGF0aW9uT3B0aW9ucyA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wYXJ0aWNpcGF0aW9uLW9wdGlvbicpO1xuICAgIGNvbnN0IG1lbWJlcnNMYWJlbCA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNtZW1iZXJzTGFiZWwnKTtcblxuICAgIHBhcnRpY2lwYXRpb25PcHRpb25zLmZvckVhY2gob3B0aW9uID0+IHtcbiAgICAgIG9wdGlvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgcGFydGljaXBhdGlvbk9wdGlvbnMuZm9yRWFjaChvcHQgPT4gb3B0LmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJykpO1xuICAgICAgICBvcHRpb24uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcbiAgICAgICAgdGhpcy5tb2RhbERhdGEuc2V0dGluZ3MudXNlckpvaW5zID0gb3B0aW9uLmdldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScpID09PSAnbWVtYmVyJztcblxuICAgICAgICAvLyDlvILmraXmm7TmlrDmiJDlkZjkurrmlbDlkozliJfooajmmL7npLpcbiAgICAgICAgdGhpcy51cGRhdGVVc2VySW5mb0FzeW5jKCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIOWPlua2iOaMiemSrlxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5jYW5jZWwtYnRuJyk7XG4gICAgaWYgKGNhbmNlbEJ0bikge1xuICAgICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgdGhpcy5vbkNhbmNlbCgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8g5Yib5bu65oyJ6ZKuXG4gICAgY29uc3QgY3JlYXRlQnRuID0gbW9kYWwucXVlcnlTZWxlY3RvcignLmNyZWF0ZS1idG4nKTtcbiAgICBpZiAoY3JlYXRlQnRuKSB7XG4gICAgICBjcmVhdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnZhbGlkYXRlU2V0dGluZ3MoKSkge1xuICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgIHRoaXMub25Db25maXJtKHRoaXMubW9kYWxEYXRhLnNldHRpbmdzKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8g54K55Ye76YGu572p5YWz6ZetXG4gICAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgIGlmIChlLnRhcmdldCA9PT0gbW9kYWwpIHtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIHRoaXMub25DYW5jZWwoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bpgInkuK3nmoTmiJDlkZjkv6Hmga9cbiAgICovXG4gIHByaXZhdGUgZ2V0U2VsZWN0ZWRNZW1iZXJzKCk6IENvbnRhY3RJbmZvW10ge1xuICAgIHJldHVybiB0aGlzLmNvbnRhY3RzLmZpbHRlcihjb250YWN0ID0+IHRoaXMubW9kYWxEYXRhLnNlbGVjdGVkQ29udGFjdElkcy5pbmNsdWRlcyhjb250YWN0LmlkKSk7XG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5omA5pyJ576k6IGK5oiQ5ZGY77yI5YyF5ous55So5oi377yM5aaC5p6c55So5oi36YCJ5oup5Yqg5YWl77yJXG4gICAqL1xuICBwcml2YXRlIGdldEFsbE1lbWJlcnMoKTogQ29udGFjdEluZm9bXSB7XG4gICAgY29uc3Qgc2VsZWN0ZWRNZW1iZXJzID0gdGhpcy5nZXRTZWxlY3RlZE1lbWJlcnMoKTtcblxuICAgIGlmICh0aGlzLm1vZGFsRGF0YS5zZXR0aW5ncy51c2VySm9pbnMpIHtcbiAgICAgIC8vIOeUqOaIt+mAieaLqeWKoOWFpee+pOiBiu+8jOa3u+WKoOeUqOaIt+WIsOaIkOWRmOWIl+ihqFxuICAgICAgY29uc3QgdXNlck5hbWUgPSBnZXRVc2VyTmFtZSgpO1xuICAgICAgY29uc3QgdXNlckF2YXRhciA9IGdldFVzZXJBdmF0YXIoKTtcblxuICAgICAgY29uc29sZS5sb2coJ/CflI0gW0dyb3VwQ2hhdE1vZGFsXSDojrflj5bnlKjmiLfkv6Hmga/vvIjlkIzmraXvvIk6Jyk7XG4gICAgICBjb25zb2xlLmxvZygnICAtIOeUqOaIt+WQjTonLCB1c2VyTmFtZSk7XG4gICAgICBjb25zb2xlLmxvZygnICAtIOeUqOaIt+WktOWDjzonLCB1c2VyQXZhdGFyKTtcblxuICAgICAgY29uc3QgdXNlck1lbWJlcjogQ29udGFjdEluZm8gPSB7XG4gICAgICAgIGlkOiAne3t1c2VyfX0nLFxuICAgICAgICBuYW1lOiB1c2VyTmFtZSxcbiAgICAgICAgYXZhdGFyOiB1c2VyQXZhdGFyLCAvLyDov5nph4zku43kvb/nlKjlkIzmraXmlrnms5XvvIzlm6DkuLrpnIDopoHnq4vljbPov5Tlm55cbiAgICAgIH07XG4gICAgICByZXR1cm4gW3VzZXJNZW1iZXIsIC4uLnNlbGVjdGVkTWVtYmVyc107XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGVjdGVkTWVtYmVycztcbiAgfVxuXG4gIC8qKlxuICAgKiDlvILmraXojrflj5bmiYDmnInnvqTogYrmiJDlkZjvvIjljIXmi6znlKjmiLfvvIzlpoLmnpznlKjmiLfpgInmi6nliqDlhaXvvIlcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZ2V0QWxsTWVtYmVyc0FzeW5jKCk6IFByb21pc2U8Q29udGFjdEluZm9bXT4ge1xuICAgIGNvbnN0IHNlbGVjdGVkTWVtYmVycyA9IHRoaXMuZ2V0U2VsZWN0ZWRNZW1iZXJzKCk7XG5cbiAgICBpZiAodGhpcy5tb2RhbERhdGEuc2V0dGluZ3MudXNlckpvaW5zKSB7XG4gICAgICAvLyDnlKjmiLfpgInmi6nliqDlhaXnvqTogYrvvIzmt7vliqDnlKjmiLfliLDmiJDlkZjliJfooahcbiAgICAgIGNvbnN0IHVzZXJOYW1lID0gYXdhaXQgZ2V0VXNlck5hbWVBc3luYygpO1xuICAgICAgY29uc3QgdXNlckF2YXRhciA9IGdldFVzZXJBdmF0YXIoKTtcblxuICAgICAgY29uc29sZS5sb2coJ/CflI0gW0dyb3VwQ2hhdE1vZGFsXSDojrflj5bnlKjmiLfkv6Hmga/vvIjlvILmraXvvIk6Jyk7XG4gICAgICBjb25zb2xlLmxvZygnICAtIOeUqOaIt+WQjTonLCB1c2VyTmFtZSk7XG4gICAgICBjb25zb2xlLmxvZygnICAtIOeUqOaIt+WktOWDjzonLCB1c2VyQXZhdGFyKTtcblxuICAgICAgY29uc3QgdXNlck1lbWJlcjogQ29udGFjdEluZm8gPSB7XG4gICAgICAgIGlkOiAne3t1c2VyfX0nLFxuICAgICAgICBuYW1lOiB1c2VyTmFtZSxcbiAgICAgICAgYXZhdGFyOiB1c2VyQXZhdGFyLCAvLyDkvb/nlKjnjrDmnInnmoTlpLTlg4/ojrflj5bmlrnms5VcbiAgICAgIH07XG4gICAgICByZXR1cm4gW3VzZXJNZW1iZXIsIC4uLnNlbGVjdGVkTWVtYmVyc107XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGVjdGVkTWVtYmVycztcbiAgfVxuXG4gIC8qKlxuICAgKiDlvILmraXmm7TmlrDnlKjmiLfkv6Hmga9cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgdXBkYXRlVXNlckluZm9Bc3luYygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ/CflIQgW0dyb3VwQ2hhdE1vZGFsXSDlvIDlp4vlvILmraXmm7TmlrDnlKjmiLfkv6Hmga8uLi4nKTtcblxuICAgICAgLy8g6I635Y+W5pu05paw5ZCO55qE5oiQ5ZGY5YiX6KGoXG4gICAgICBjb25zdCBhbGxNZW1iZXJzID0gYXdhaXQgdGhpcy5nZXRBbGxNZW1iZXJzQXN5bmMoKTtcblxuICAgICAgY29uc29sZS5sb2coJ/Cfk4sgW0dyb3VwQ2hhdE1vZGFsXSDmm7TmlrDlkI7nmoTmiJDlkZjliJfooag6Jyk7XG4gICAgICBhbGxNZW1iZXJzLmZvckVhY2goKG1lbWJlciwgaW5kZXgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYCAgJHtpbmRleCArIDF9LiAke21lbWJlci5uYW1lfSAoJHttZW1iZXIuaWR9KSAtIOWktOWDjzogJHttZW1iZXIuYXZhdGFyfWApO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIOabtOaWsOaIkOWRmOS6uuaVsOaYvuekulxuICAgICAgY29uc3QgbWVtYmVyc0xhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lbWJlcnNMYWJlbCcpO1xuICAgICAgaWYgKG1lbWJlcnNMYWJlbCkge1xuICAgICAgICBtZW1iZXJzTGFiZWwudGV4dENvbnRlbnQgPSBg576k6IGK5oiQ5ZGYICgke2FsbE1lbWJlcnMubGVuZ3RofeS6uilgO1xuICAgICAgICBjb25zb2xlLmxvZygn4pyFIFtHcm91cENoYXRNb2RhbF0g5bey5pu05paw5oiQ5ZGY5Lq65pWw5pi+56S6OicsIGFsbE1lbWJlcnMubGVuZ3RoKTtcbiAgICAgIH1cblxuICAgICAgLy8g5pu05paw5oiQ5ZGY5YiX6KGo5pi+56S6XG4gICAgICBjb25zdCBtZW1iZXJzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZW1iZXJzTGlzdCcpO1xuICAgICAgaWYgKG1lbWJlcnNMaXN0KSB7XG4gICAgICAgIGNvbnN0IG1lbWJlcnNIdG1sID0gYWxsTWVtYmVyc1xuICAgICAgICAgIC5tYXAoXG4gICAgICAgICAgICBtZW1iZXIgPT4gYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1lbWJlci10YWdcIiBkYXRhLW1lbWJlci1pZD1cIiR7bWVtYmVyLmlkfVwiPlxuICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7bWVtYmVyLmF2YXRhcn1cIiBjbGFzcz1cIm1lbWJlci1hdmF0YXJcIiBhbHQ9XCIke21lbWJlci5uYW1lfVwiIGRhdGEtbWVtYmVyLWlkPVwiJHttZW1iZXIuaWR9XCI+XG4gICAgICAgICAgICAgIDxzcGFuPiR7bWVtYmVyLm5hbWV9PC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgYCxcbiAgICAgICAgICApXG4gICAgICAgICAgLmpvaW4oJycpO1xuICAgICAgICBtZW1iZXJzTGlzdC5pbm5lckhUTUwgPSBtZW1iZXJzSHRtbDtcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBbR3JvdXBDaGF0TW9kYWxdIOW3suabtOaWsOaIkOWRmOWIl+ihqEhUTUwnKTtcbiAgICAgIH1cblxuICAgICAgLy8g6YeN5paw55Sf5oiQ6buY6K6k576k5ZCN77yI5L2/55So5pu05paw5ZCO55qE55So5oi35ZCN77yJXG4gICAgICB0aGlzLmdlbmVyYXRlRGVmYXVsdEdyb3VwTmFtZUFzeW5jKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbR3JvdXBDaGF0TW9kYWxdIOW8guatpeabtOaWsOeUqOaIt+S/oeaBr+Wksei0pTonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOeUn+aIkOm7mOiupOe+pOWQjVxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZURlZmF1bHRHcm91cE5hbWUoKTogdm9pZCB7XG4gICAgY29uc3QgYWxsTWVtYmVycyA9IHRoaXMuZ2V0QWxsTWVtYmVycygpO1xuICAgIGNvbnN0IG1lbWJlck5hbWVzID0gYWxsTWVtYmVycy5tYXAobSA9PiBtLm5hbWUpO1xuXG4gICAgbGV0IGRlZmF1bHROYW1lID0gJyc7XG4gICAgaWYgKG1lbWJlck5hbWVzLmxlbmd0aCA8PSAzKSB7XG4gICAgICBkZWZhdWx0TmFtZSA9IG1lbWJlck5hbWVzLmpvaW4oJ+OAgScpICsgJ+eahOe+pOiBiic7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlZmF1bHROYW1lID0gbWVtYmVyTmFtZXMuc2xpY2UoMCwgMikuam9pbign44CBJykgKyBg562JJHttZW1iZXJOYW1lcy5sZW5ndGh95Lq655qE576k6IGKYDtcbiAgICB9XG5cbiAgICB0aGlzLm1vZGFsRGF0YS5zZXR0aW5ncy5uYW1lID0gZGVmYXVsdE5hbWU7XG5cbiAgICAvLyDmm7TmlrDovpPlhaXmoYZcbiAgICBjb25zdCBncm91cE5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNncm91cE5hbWVJbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgaWYgKGdyb3VwTmFtZUlucHV0KSB7XG4gICAgICBncm91cE5hbWVJbnB1dC52YWx1ZSA9IGRlZmF1bHROYW1lO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlvILmraXnlJ/miJDpu5jorqTnvqTlkI3vvIjkvb/nlKjmm7TmlrDlkI7nmoTnlKjmiLflkI3vvIlcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVEZWZhdWx0R3JvdXBOYW1lQXN5bmMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGFsbE1lbWJlcnMgPSBhd2FpdCB0aGlzLmdldEFsbE1lbWJlcnNBc3luYygpO1xuICAgICAgY29uc3QgbWVtYmVyTmFtZXMgPSBhbGxNZW1iZXJzLm1hcChtID0+IG0ubmFtZSk7XG5cbiAgICAgIGxldCBkZWZhdWx0TmFtZSA9ICcnO1xuICAgICAgaWYgKG1lbWJlck5hbWVzLmxlbmd0aCA8PSAzKSB7XG4gICAgICAgIGRlZmF1bHROYW1lID0gbWVtYmVyTmFtZXMuam9pbign44CBJykgKyAn55qE576k6IGKJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlZmF1bHROYW1lID0gbWVtYmVyTmFtZXMuc2xpY2UoMCwgMikuam9pbign44CBJykgKyBg562JJHttZW1iZXJOYW1lcy5sZW5ndGh95Lq655qE576k6IGKYDtcbiAgICAgIH1cblxuICAgICAgdGhpcy5tb2RhbERhdGEuc2V0dGluZ3MubmFtZSA9IGRlZmF1bHROYW1lO1xuXG4gICAgICAvLyDmm7TmlrDovpPlhaXmoYZcbiAgICAgIGNvbnN0IGdyb3VwTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2dyb3VwTmFtZUlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgIGlmIChncm91cE5hbWVJbnB1dCkge1xuICAgICAgICBncm91cE5hbWVJbnB1dC52YWx1ZSA9IGRlZmF1bHROYW1lO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZygn4p2MIOW8guatpeeUn+aIkOm7mOiupOe+pOWQjeWksei0pTonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOmqjOivgeiuvue9rlxuICAgKi9cbiAgcHJpdmF0ZSB2YWxpZGF0ZVNldHRpbmdzKCk6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5tb2RhbERhdGEuc2V0dGluZ3MubmFtZS50cmltKCkpIHtcbiAgICAgIHRvYXN0ci5lcnJvcign6K+36L6T5YWl576k6IGK5ZCN56ewJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLm1vZGFsRGF0YS5zZXR0aW5ncy5hdmF0YXIudHJpbSgpKSB7XG4gICAgICB0b2FzdHIuZXJyb3IoJ+ivt+iuvue9rue+pOiBiuWktOWDjycpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIneWni+WMluWktOWDj+WQjOatpVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplQXZhdGFyU3luYygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8g6Ieq5Yqo5rOo5YaM6aG16Z2i5Lit55qE5aS05YOP5YWD57SgXG4gICAgICB0aGlzLmF2YXRhck1peGluLmF1dG9SZWdpc3RlcigpO1xuXG4gICAgICAvLyDms6jlhoznlKjmiLflpLTlg4/lhYPntKBcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnJlZ2lzdGVyVXNlckF2YXRhckVsZW1lbnRzKCk7XG4gICAgICB9LCAxMDApO1xuXG4gICAgICBjb25zb2xlLmxvZygnW0dyb3VwQ2hhdE1vZGFsXSDlpLTlg4/lkIzmraXlt7LliJ3lp4vljJYnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW0dyb3VwQ2hhdE1vZGFsXSDlpLTlg4/lkIzmraXliJ3lp4vljJblpLHotKU6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDms6jlhoznlKjmiLflpLTlg4/lhYPntKBcbiAgICovXG4gIHByaXZhdGUgcmVnaXN0ZXJVc2VyQXZhdGFyRWxlbWVudHMoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ/CflI0gW0dyb3VwQ2hhdE1vZGFsXSDlvIDlp4vms6jlhoznlKjmiLflpLTlg4/lhYPntKAuLi4nKTtcblxuICAgIC8vIOafpeaJvuaJgOacieeUqOaIt+eahG1lbWJlci1hdmF0YXLlhYPntKBcbiAgICBjb25zdCBtZW1iZXJBdmF0YXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lbWJlci1hdmF0YXInKTtcbiAgICBjb25zb2xlLmxvZyhg8J+UjSBbR3JvdXBDaGF0TW9kYWxdIOaJvuWIsCAke21lbWJlckF2YXRhcnMubGVuZ3RofSDkuKrmiJDlkZjlpLTlg4/lhYPntKBgKTtcblxuICAgIGxldCByZWdpc3RlcmVkQ291bnQgPSAwO1xuICAgIG1lbWJlckF2YXRhcnMuZm9yRWFjaCgoYXZhdGFyLCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgbWVtYmVyVGFnID0gYXZhdGFyLmNsb3Nlc3QoJy5tZW1iZXItdGFnJyk7XG4gICAgICBpZiAobWVtYmVyVGFnKSB7XG4gICAgICAgIGNvbnN0IG1lbWJlcklkID0gbWVtYmVyVGFnLmdldEF0dHJpYnV0ZSgnZGF0YS1tZW1iZXItaWQnKTtcbiAgICAgICAgY29uc29sZS5sb2coYPCflI0gW0dyb3VwQ2hhdE1vZGFsXSDlpLTlg4/lhYPntKAgJHtpbmRleCArIDF9OiBtZW1iZXJJZCA9IFwiJHttZW1iZXJJZH1cImApO1xuXG4gICAgICAgIC8vIOWPquazqOWGjOeUqOaIt+iHquW3seeahOWktOWDj+WFg+e0oFxuICAgICAgICBpZiAobWVtYmVySWQgPT09ICd7e3VzZXJ9fScgfHwgbWVtYmVySWQgPT09ICd1c2VyJykge1xuICAgICAgICAgIHRoaXMuYXZhdGFyTWl4aW4ucmVnaXN0ZXIoYXZhdGFyIGFzIEhUTUxFbGVtZW50LCAnaW1nJyk7XG4gICAgICAgICAgcmVnaXN0ZXJlZENvdW50Kys7XG4gICAgICAgICAgY29uc29sZS5sb2coJ+KchSBbR3JvdXBDaGF0TW9kYWxdIOW3suazqOWGjOeUqOaIt+WktOWDj+WFg+e0oDonLCB7XG4gICAgICAgICAgICBlbGVtZW50OiBhdmF0YXIsXG4gICAgICAgICAgICBzcmM6IChhdmF0YXIgYXMgSFRNTEltYWdlRWxlbWVudCkuc3JjLFxuICAgICAgICAgICAgYWx0OiAoYXZhdGFyIGFzIEhUTUxJbWFnZUVsZW1lbnQpLmFsdCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coYOKaoO+4jyBbR3JvdXBDaGF0TW9kYWxdIOWktOWDj+WFg+e0oCAke2luZGV4ICsgMX0g5rKh5pyJ5om+5YiwIC5tZW1iZXItdGFnIOeItuWFg+e0oGApO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coYOKchSBbR3JvdXBDaGF0TW9kYWxdIOWktOWDj+azqOWGjOWujOaIkO+8jOWFseazqOWGjCAke3JlZ2lzdGVyZWRDb3VudH0g5Liq55So5oi35aS05YOP5YWD57SgYCk7XG4gIH1cblxuICAvKipcbiAgICog6ZqQ6JeP5qih5oCB5qGGXG4gICAqL1xuICBwcml2YXRlIGhpZGUoKTogdm9pZCB7XG4gICAgLy8g6ZSA5q+B5aS05YOP5ZCM5q2lXG4gICAgdGhpcy5hdmF0YXJNaXhpbi5kZXN0cm95KCk7XG5cbiAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncm91cENoYXRNb2RhbCcpO1xuICAgIGlmIChtb2RhbCkge1xuICAgICAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIG1vZGFsLnJlbW92ZSgpO1xuICAgICAgfSwgMzAwKTtcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/groupChat/groupChatModal.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/groupChat/manager.ts": 
  /*!********************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/groupChat/manager.ts ***!
  \********************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GroupChatManager: () => (/* binding */ GroupChatManager)\n/* harmony export */ });\n/* harmony import */ var _utils_characterStorage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/characterStorage */ \"./src/多云熊/备份/给rovo的/modules/utils/characterStorage.ts\");\n/* harmony import */ var _groupChatModal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./groupChatModal */ \"./src/多云熊/备份/给rovo的/modules/groupChat/groupChatModal.ts\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./storage */ \"./src/多云熊/备份/给rovo的/modules/groupChat/storage.ts\");\n\n\n\n/**\n * 群聊创建管理器\n */\nclass GroupChatManager {\n    contactManager = null;\n    constructor() {\n        // 不再在构造函数中加载联系人数据，而是通过依赖注入获取\n        console.log('🔧 GroupChatManager 已初始化');\n    }\n    /**\n     * 设置联系人管理器（依赖注入）\n     */\n    setContactManager(contactManager) {\n        this.contactManager = contactManager;\n        console.log('🔗 GroupChatManager 已连接到 ContactManager');\n    }\n    /**\n     * 获取联系人数据\n     */\n    getContacts() {\n        if (!this.contactManager) {\n            console.warn('⚠️ ContactManager 未设置，返回空联系人列表');\n            return [];\n        }\n        // 将 ContactManager 的联系人数据转换为 GroupChatManager 需要的格式\n        return this.contactManager.getAllContacts().map(contact => ({\n            id: contact.id,\n            name: contact.name,\n            avatar: contact.avatar,\n        }));\n    }\n    /**\n     * 创建群聊\n     */\n    createGroupChat(selectedContactIds) {\n        // 验证选中的联系人数量\n        if (selectedContactIds.length < 2) {\n            toastr.error('至少需要选择2个联系人才能创建群聊');\n            return;\n        }\n        // 获取最新的联系人数据\n        const contacts = this.getContacts();\n        // 显示群聊设置模态框\n        const modal = new _groupChatModal__WEBPACK_IMPORTED_MODULE_1__.GroupChatModal(selectedContactIds, contacts, settings => this.handleGroupChatCreation(selectedContactIds, settings), () => console.log('用户取消了群聊创建'));\n        modal.show();\n    }\n    /**\n     * 处理群聊创建\n     */\n    handleGroupChatCreation(selectedContactIds, settings) {\n        try {\n            // 构建成员列表 - 根据用户参与模式决定是否包含 user\n            let members = [...selectedContactIds];\n            if (settings.userJoins) {\n                // 如果用户选择加入群聊，将 user 添加到成员列表\n                members.push('{{user}}');\n            }\n            // 创建群聊数据（简化版本，避免localStorage配额问题）\n            const groupChatData = {\n                id: _storage__WEBPACK_IMPORTED_MODULE_2__.GroupChatStorage.generateGroupId(settings.name), // 传入群聊名称作为ID\n                name: settings.name,\n                avatar: settings.avatar,\n                members: members,\n                userParticipation: settings.userJoins ? 'member' : 'observer',\n                createdAt: Date.now(),\n                messages: [],\n                type: 'group',\n            };\n            // 尝试保存群聊数据，如果失败也继续执行\n            try {\n                _storage__WEBPACK_IMPORTED_MODULE_2__.GroupChatStorage.saveGroupChat(groupChatData);\n                console.log('✅ 群聊数据已保存到localStorage');\n            }\n            catch (storageError) {\n                console.warn('⚠️ 保存群聊数据到localStorage失败，但继续执行:', storageError);\n                // 即使保存失败，我们也继续执行，因为主要逻辑是通过消息标记\n            }\n            // 显示成功提示\n            toastr.success(`群聊\"${settings.name}\"创建成功！`, '创建成功');\n            // 触发聊天变化事件（这是关键步骤）\n            this.emitChatChangedEvent(groupChatData);\n            console.log('✅ 群聊创建成功:', groupChatData);\n        }\n        catch (error) {\n            console.error('创建群聊失败:', error);\n            toastr.error('创建群聊失败，请重试');\n        }\n    }\n    /**\n     * 添加群聊到聊天列表\n     */\n    addToChatList(groupChatData) {\n        try {\n            // 获取现有聊天列表数据\n            const chatListData = this.getChatListData();\n            // 创建群聊项数据\n            const groupChatItem = {\n                id: groupChatData.id,\n                chatName: groupChatData.name,\n                avatar: groupChatData.avatar,\n                lastMessage: '群聊已创建',\n                lastMessageTime: new Date().toLocaleTimeString('zh-CN', {\n                    hour: '2-digit',\n                    minute: '2-digit',\n                }),\n                unreadCount: 0,\n                type: 'group',\n                members: groupChatData.members,\n                userParticipation: groupChatData.userParticipation,\n            };\n            // 添加到聊天列表顶部\n            chatListData.unshift(groupChatItem);\n            // 保存更新后的聊天列表\n            this.saveChatListData(chatListData);\n            console.log('📋 群聊已添加到聊天列表');\n        }\n        catch (error) {\n            console.error('添加群聊到聊天列表失败:', error);\n        }\n    }\n    /**\n     * 获取聊天列表数据\n     */\n    getChatListData() {\n        try {\n            return (0,_utils_characterStorage__WEBPACK_IMPORTED_MODULE_0__.getCharacterItem)('chat_list', []);\n        }\n        catch (error) {\n            console.error('读取聊天列表数据失败:', error);\n            return [];\n        }\n    }\n    /**\n     * 保存聊天列表数据\n     */\n    saveChatListData(data) {\n        try {\n            (0,_utils_characterStorage__WEBPACK_IMPORTED_MODULE_0__.setCharacterItem)('chat_list', data);\n            console.log('📋 聊天列表已保存到角色专用空间');\n        }\n        catch (error) {\n            console.error('保存聊天列表数据失败:', error);\n        }\n    }\n    /**\n     * 触发聊天变化事件\n     */\n    emitChatChangedEvent(groupChatData) {\n        try {\n            // 触发自定义事件通知其他组件更新\n            const event = new CustomEvent('chatListChanged', {\n                detail: {\n                    type: 'groupChatCreated',\n                    groupChatData: groupChatData,\n                },\n            });\n            document.dispatchEvent(event);\n            // 如果有全局事件系统，也可以使用\n            if (typeof eventEmit === 'function') {\n                eventEmit('CHAT_LIST_CHANGED');\n            }\n        }\n        catch (error) {\n            console.error('触发聊天变化事件失败:', error);\n        }\n    }\n    /**\n     * 获取所有群聊\n     */\n    getAllGroupChats() {\n        return _storage__WEBPACK_IMPORTED_MODULE_2__.GroupChatStorage.getAllGroupChats();\n    }\n    /**\n     * 根据ID获取群聊\n     */\n    getGroupChatById(id) {\n        return _storage__WEBPACK_IMPORTED_MODULE_2__.GroupChatStorage.getGroupChatById(id);\n    }\n    /**\n     * 删除群聊\n     */\n    deleteGroupChat(id) {\n        const success = _storage__WEBPACK_IMPORTED_MODULE_2__.GroupChatStorage.deleteGroupChat(id);\n        if (success) {\n            this.emitChatChangedEvent();\n        }\n        return success;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZ3JvdXBDaGF0L21hbmFnZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUMrRTtBQUM3QjtBQUNMO0FBRzdDOztHQUVHO0FBQ0ksTUFBTSxnQkFBZ0I7SUFDbkIsY0FBYyxHQUEwQixJQUFJLENBQUM7SUFFckQ7UUFDRSw2QkFBNkI7UUFDN0IsT0FBTyxDQUFDLEdBQUcsQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0lBQzFDLENBQUM7SUFFRDs7T0FFRztJQUNJLGlCQUFpQixDQUFDLGNBQThCO1FBQ3JELElBQUksQ0FBQyxjQUFjLEdBQUcsY0FBYyxDQUFDO1FBQ3JDLE9BQU8sQ0FBQyxHQUFHLENBQUMseUNBQXlDLENBQUMsQ0FBQztJQUN6RCxDQUFDO0lBRUQ7O09BRUc7SUFDSyxXQUFXO1FBQ2pCLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7WUFDekIsT0FBTyxDQUFDLElBQUksQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDO1lBQy9DLE9BQU8sRUFBRSxDQUFDO1FBQ1osQ0FBQztRQUVELG9EQUFvRDtRQUNwRCxPQUFPLElBQUksQ0FBQyxjQUFjLENBQUMsY0FBYyxFQUFFLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUMxRCxFQUFFLEVBQUUsT0FBTyxDQUFDLEVBQUU7WUFDZCxJQUFJLEVBQUUsT0FBTyxDQUFDLElBQUk7WUFDbEIsTUFBTSxFQUFFLE9BQU8sQ0FBQyxNQUFNO1NBQ3ZCLENBQUMsQ0FBQyxDQUFDO0lBQ04sQ0FBQztJQUVEOztPQUVHO0lBQ0gsZUFBZSxDQUFDLGtCQUE0QjtRQUMxQyxhQUFhO1FBQ2IsSUFBSSxrQkFBa0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7WUFDbEMsTUFBTSxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1lBQ2xDLE9BQU87UUFDVCxDQUFDO1FBRUQsYUFBYTtRQUNiLE1BQU0s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QyxpQkFBaUIsRUFBRTtnQkFDL0MsTUFBTSxFQUFFO29CQUNOLElBQUksRUFBRSxrQkFBa0I7b0JBQ3hCLGFBQWEsRUFBRSxhQUFhO2lCQUM3QjthQUNGLENBQUMsQ0FBQztZQUNILFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFOUIsa0JBQWtCO1lBQ2xCLElBQUksT0FBTyxTQUFTLEtBQUssVUFBVSxFQUFFLENBQUM7Z0JBQ3BDLFNBQVMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1lBQ2pDLENBQUM7UUFDSCxDQUFDO1FBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNmLE9BQU8sQ0FBQyxLQUFLLENBQUMsYUFBYSxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ3RDLENBQUM7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSCxnQkFBZ0I7UUFDZCxPQUFPLHNEQUFnQixDQUFDLGdCQUFnQixFQUFFLENBQUM7SUFDN0MsQ0FBQztJQUVEOztPQUVHO0lBQ0gsZ0JBQWdCLENBQUMsRUFBVTtRQUN6QixPQUFPLHNEQUFnQixDQUFDLGdCQUFnQixDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQy9DLENBQUM7SUFFRDs7T0FFRztJQUNILGVBQWUsQ0FBQyxFQUFVO1FBQ3hCLE1BQU0sT0FBTyxHQUFHLHNEQUFnQixDQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNyRCxJQUFJLE9BQU8sRUFBRSxDQUFDO1lBQ1osSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7UUFDOUIsQ0FBQztRQUNELE9BQU8sT0FBTyxDQUFDO0lBQ2pCLENBQUM7Q0FDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZ3JvdXBDaGF0L21hbmFnZXIudHM/Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbnRhY3RNYW5hZ2VyIH0gZnJvbSAnLi4vY2hhdExpc3QvY29udGFjdE1hbmFnZXInO1xyXG5pbXBvcnQgeyBnZXRDaGFyYWN0ZXJJdGVtLCBzZXRDaGFyYWN0ZXJJdGVtIH0gZnJvbSAnLi4vdXRpbHMvY2hhcmFjdGVyU3RvcmFnZSc7XHJcbmltcG9ydCB7IEdyb3VwQ2hhdE1vZGFsIH0gZnJvbSAnLi9ncm91cENoYXRNb2RhbCc7XHJcbmltcG9ydCB7IEdyb3VwQ2hhdFN0b3JhZ2UgfSBmcm9tICcuL3N0b3JhZ2UnO1xyXG5pbXBvcnQgeyBDb250YWN0SW5mbywgR3JvdXBDaGF0RGF0YSwgR3JvdXBDaGF0U2V0dGluZ3MgfSBmcm9tICcuL3R5cGVzJztcclxuXHJcbi8qKlxyXG4gKiDnvqTogYrliJvlu7rnrqHnkIblmahcclxuICovXHJcbmV4cG9ydCBjbGFzcyBHcm91cENoYXRNYW5hZ2VyIHtcclxuICBwcml2YXRlIGNvbnRhY3RNYW5hZ2VyOiBDb250YWN0TWFuYWdlciB8IG51bGwgPSBudWxsO1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIC8vIOS4jeWGjeWcqOaehOmAoOWHveaVsOS4reWKoOi9veiBlOezu+S6uuaVsOaNru+8jOiAjOaYr+mAmui/h+S+nei1luazqOWFpeiOt+WPllxyXG4gICAgY29uc29sZS5sb2coJ/CflKcgR3JvdXBDaGF0TWFuYWdlciDlt7LliJ3lp4vljJYnKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiuvue9ruiBlOezu+S6uueuoeeQhuWZqO+8iOS+nei1luazqOWFpe+8iVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXRDb250YWN0TWFuYWdlcihjb250YWN0TWFuYWdlcjogQ29udGFjdE1hbmFnZXIpOiB2b2lkIHtcclxuICAgIHRoaXMuY29udGFjdE1hbmFnZXIgPSBjb250YWN0TWFuYWdlcjtcclxuICAgIGNvbnNvbGUubG9nKCfwn5SXIEdyb3VwQ2hhdE1hbmFnZXIg5bey6L+e5o6l5YiwIENvbnRhY3RNYW5hZ2VyJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bogZTns7vkurrmlbDmja5cclxuICAgKi9cclxuICBwcml2YXRlIGdldENvbnRhY3RzKCk6IENvbnRhY3RJbmZvW10ge1xyXG4gICAgaWYgKCF0aGlzLmNvbnRhY3RNYW5hZ2VyKSB7XHJcbiAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIENvbnRhY3RNYW5hZ2VyIOacquiuvue9ru+8jOi/lOWbnuepuuiBlOezu+S6uuWIl+ihqCcpO1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5bCGIENvbnRhY3RNYW5hZ2VyIOeahOiBlOezu+S6uuaVsOaNrui9rOaNouS4uiBHcm91cENoYXRNYW5hZ2VyIOmcgOimgeeahOagvOW8j1xyXG4gICAgcmV0dXJuIHRoaXMuY29udGFjdE1hbmFnZXIuZ2V0QWxsQ29udGFjdHMoKS5tYXAoY29udGFjdCA9PiAoe1xyXG4gICAgICBpZDogY29udGFjdC5pZCxcclxuICAgICAgbmFtZTogY29udGFjdC5uYW1lLFxyXG4gICAgICBhdmF0YXI6IGNvbnRhY3QuYXZhdGFyLFxyXG4gICAgfSkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Yib5bu6576k6IGKXHJcbiAgICovXHJcbiAgY3JlYXRlR3JvdXBDaGF0KHNlbGVjdGVkQ29udGFjdElkczogc3RyaW5nW10pOiB2b2lkIHtcclxuICAgIC8vIOmqjOivgemAieS4reeahOiBlOezu+S6uuaVsOmHj1xyXG4gICAgaWYgKHNlbGVjdGVkQ29udGFjdElkcy5sZW5ndGggPCAyKSB7XHJcbiAgICAgIHRvYXN0ci5lcnJvcign6Iez5bCR6ZyA6KaB6YCJ5oupMuS4quiBlOezu+S6uuaJjeiDveWIm+W7uue+pOiBiicpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8g6I635Y+W5pyA5paw55qE6IGU57O75Lq65pWw5o2uXHJcbiAgICBjb25zdCBjb250YWN0cyA9IHRoaXMuZ2V0Q29udGFjdHMoKTtcclxuXHJcbiAgICAvLyDmmL7npLrnvqTogYrorr7nva7mqKHmgIHmoYZcclxuICAgIGNvbnN0IG1vZGFsID0gbmV3IEdyb3VwQ2hhdE1vZGFsKFxyXG4gICAgICBzZWxlY3RlZENvbnRhY3RJZHMsXHJcbiAgICAgIGNvbnRhY3RzLFxyXG4gICAgICBzZXR0aW5ncyA9PiB0aGlzLmhhbmRsZUdyb3VwQ2hhdENyZWF0aW9uKHNlbGVjdGVkQ29udGFjdElkcywgc2V0dGluZ3MpLFxyXG4gICAgICAoKSA9PiBjb25zb2xlLmxvZygn55So5oi35Y+W5raI5LqG576k6IGK5Yib5bu6JyksXHJcbiAgICApO1xyXG5cclxuICAgIG1vZGFsLnNob3coKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWkhOeQhue+pOiBiuWIm+W7ulxyXG4gICAqL1xyXG4gIHByaXZhdGUgaGFuZGxlR3JvdXBDaGF0Q3JlYXRpb24oc2VsZWN0ZWRDb250YWN0SWRzOiBzdHJpbmdbXSwgc2V0dGluZ3M6IEdyb3VwQ2hhdFNldHRpbmdzKTogdm9pZCB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDmnoTlu7rmiJDlkZjliJfooaggLSDmoLnmja7nlKjmiLflj4LkuI7mqKHlvI/lhrPlrprmmK/lkKbljIXlkKsgdXNlclxyXG4gICAgICBsZXQgbWVtYmVycyA9IFsuLi5zZWxlY3RlZENvbnRhY3RJZHNdO1xyXG4gICAgICBpZiAoc2V0dGluZ3MudXNlckpvaW5zKSB7XHJcbiAgICAgICAgLy8g5aaC5p6c55So5oi36YCJ5oup5Yqg5YWl576k6IGK77yM5bCGIHVzZXIg5re75Yqg5Yiw5oiQ5ZGY5YiX6KGoXHJcbiAgICAgICAgbWVtYmVycy5wdXNoKCd7e3VzZXJ9fScpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDliJvlu7rnvqTogYrmlbDmja7vvIjnroDljJbniYjmnKzvvIzpgb/lhY1sb2NhbFN0b3JhZ2XphY3pop3pl67popjvvIlcclxuICAgICAgY29uc3QgZ3JvdXBDaGF0RGF0YTogR3JvdXBDaGF0RGF0YSA9IHtcclxuICAgICAgICBpZDogR3JvdXBDaGF0U3RvcmFnZS5nZW5lcmF0ZUdyb3VwSWQoc2V0dGluZ3MubmFtZSksIC8vIOS8oOWFpee+pOiBiuWQjeensOS9nOS4uklEXHJcbiAgICAgICAgbmFtZTogc2V0dGluZ3MubmFtZSxcclxuICAgICAgICBhdmF0YXI6IHNldHRpbmdzLmF2YXRhcixcclxuICAgICAgICBtZW1iZXJzOiBtZW1iZXJzLFxyXG4gICAgICAgIHVzZXJQYXJ0aWNpcGF0aW9uOiBzZXR0aW5ncy51c2VySm9pbnMgPyAnbWVtYmVyJyA6ICdvYnNlcnZlcicsXHJcbiAgICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpLFxyXG4gICAgICAgIG1lc3NhZ2VzOiBbXSxcclxuICAgICAgICB0eXBlOiAnZ3JvdXAnLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8g5bCd6K+V5L+d5a2Y576k6IGK5pWw5o2u77yM5aaC5p6c5aSx6LSl5Lmf57un57ut5omn6KGMXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgR3JvdXBDaGF0U3RvcmFnZS5zYXZlR3JvdXBDaGF0KGdyb3VwQ2hhdERhdGEpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCfinIUg576k6IGK5pWw5o2u5bey5L+d5a2Y5YiwbG9jYWxTdG9yYWdlJyk7XHJcbiAgICAgIH0gY2F0Y2ggKHN0b3JhZ2VFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIOS/neWtmOe+pOiBiuaVsOaNruWIsGxvY2FsU3RvcmFnZeWksei0pe+8jOS9hue7p+e7reaJp+ihjDonLCBzdG9yYWdlRXJyb3IpO1xyXG4gICAgICAgIC8vIOWNs+S9v+S/neWtmOWksei0pe+8jOaIkeS7rOS5n+e7p+e7reaJp+ihjO+8jOWboOS4uuS4u+imgemAu+i+keaYr+mAmui/h+a2iOaBr+agh+iusFxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDmmL7npLrmiJDlip/mj5DnpLpcclxuICAgICAgdG9hc3RyLnN1Y2Nlc3MoYOe+pOiBilwiJHtzZXR0aW5ncy5uYW1lfVwi5Yib5bu65oiQ5Yqf77yBYCwgJ+WIm+W7uuaIkOWKnycpO1xyXG5cclxuICAgICAgLy8g6Kem5Y+R6IGK5aSp5Y+Y5YyW5LqL5Lu277yI6L+Z5piv5YWz6ZSu5q2l6aqk77yJXHJcbiAgICAgIHRoaXMuZW1pdENoYXRDaGFuZ2VkRXZlbnQoZ3JvdXBDaGF0RGF0YSk7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygn4pyFIOe+pOiBiuWIm+W7uuaIkOWKnzonLCBncm91cENoYXREYXRhKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+WIm+W7uue+pOiBiuWksei0pTonLCBlcnJvcik7XHJcbiAgICAgIHRvYXN0ci5lcnJvcign5Yib5bu6576k6IGK5aSx6LSl77yM6K+36YeN6K+VJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmt7vliqDnvqTogYrliLDogYrlpKnliJfooahcclxuICAgKi9cclxuICBwcml2YXRlIGFkZFRvQ2hhdExpc3QoZ3JvdXBDaGF0RGF0YTogR3JvdXBDaGF0RGF0YSk6IHZvaWQge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g6I635Y+W546w5pyJ6IGK5aSp5YiX6KGo5pWw5o2uXHJcbiAgICAgIGNvbnN0IGNoYXRMaXN0RGF0YSA9IHRoaXMuZ2V0Q2hhdExpc3REYXRhKCk7XHJcblxyXG4gICAgICAvLyDliJvlu7rnvqTogYrpobnmlbDmja5cclxuICAgICAgY29uc3QgZ3JvdXBDaGF0SXRlbSA9IHtcclxuICAgICAgICBpZDogZ3JvdXBDaGF0RGF0YS5pZCxcclxuICAgICAgICBjaGF0TmFtZTogZ3JvdXBDaGF0RGF0YS5uYW1lLFxyXG4gICAgICAgIGF2YXRhcjogZ3JvdXBDaGF0RGF0YS5hdmF0YXIsXHJcbiAgICAgICAgbGFzdE1lc3NhZ2U6ICfnvqTogYrlt7LliJvlu7onLFxyXG4gICAgICAgIGxhc3RNZXNzYWdlVGltZTogbmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoJ3poLUNOJywge1xyXG4gICAgICAgICAgaG91cjogJzItZGlnaXQnLFxyXG4gICAgICAgICAgbWludXRlOiAnMi1kaWdpdCcsXHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgdW5yZWFkQ291bnQ6IDAsXHJcbiAgICAgICAgdHlwZTogJ2dyb3VwJyxcclxuICAgICAgICBtZW1iZXJzOiBncm91cENoYXREYXRhLm1lbWJlcnMsXHJcbiAgICAgICAgdXNlclBhcnRpY2lwYXRpb246IGdyb3VwQ2hhdERhdGEudXNlclBhcnRpY2lwYXRpb24sXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyDmt7vliqDliLDogYrlpKnliJfooajpobbpg6hcclxuICAgICAgY2hhdExpc3REYXRhLnVuc2hpZnQoZ3JvdXBDaGF0SXRlbSk7XHJcblxyXG4gICAgICAvLyDkv53lrZjmm7TmlrDlkI7nmoTogYrlpKnliJfooahcclxuICAgICAgdGhpcy5zYXZlQ2hhdExpc3REYXRhKGNoYXRMaXN0RGF0YSk7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygn8J+TiyDnvqTogYrlt7Lmt7vliqDliLDogYrlpKnliJfooagnKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+a3u+WKoOe+pOiBiuWIsOiBiuWkqeWIl+ihqOWksei0pTonLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bogYrlpKnliJfooajmlbDmja5cclxuICAgKi9cclxuICBwcml2YXRlIGdldENoYXRMaXN0RGF0YSgpOiBhbnlbXSB7XHJcbiAgICB0cnkge1xyXG4gICAgICByZXR1cm4gZ2V0Q2hhcmFjdGVySXRlbSgnY2hhdF9saXN0JywgW10pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign6K+75Y+W6IGK5aSp5YiX6KGo5pWw5o2u5aSx6LSlOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5L+d5a2Y6IGK5aSp5YiX6KGo5pWw5o2uXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzYXZlQ2hhdExpc3REYXRhKGRhdGE6IGFueVtdKTogdm9pZCB7XHJcbiAgICB0cnkge1xyXG4gICAgICBzZXRDaGFyYWN0ZXJJdGVtKCdjaGF0X2xpc3QnLCBkYXRhKTtcclxuICAgICAgY29uc29sZS5sb2coJ/Cfk4sg6IGK5aSp5YiX6KGo5bey5L+d5a2Y5Yiw6KeS6Imy5LiT55So56m66Ze0Jyk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfkv53lrZjogYrlpKnliJfooajmlbDmja7lpLHotKU6JywgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6Kem5Y+R6IGK5aSp5Y+Y5YyW5LqL5Lu2XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBlbWl0Q2hhdENoYW5nZWRFdmVudChncm91cENoYXREYXRhPzogR3JvdXBDaGF0RGF0YSk6IHZvaWQge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g6Kem5Y+R6Ieq5a6a5LmJ5LqL5Lu26YCa55+l5YW25LuW57uE5Lu25pu05pawXHJcbiAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdjaGF0TGlzdENoYW5nZWQnLCB7XHJcbiAgICAgICAgZGV0YWlsOiB7XHJcbiAgICAgICAgICB0eXBlOiAnZ3JvdXBDaGF0Q3JlYXRlZCcsXHJcbiAgICAgICAgICBncm91cENoYXREYXRhOiBncm91cENoYXREYXRhLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuXHJcbiAgICAgIC8vIOWmguaenOacieWFqOWxgOS6i+S7tuezu+e7n++8jOS5n+WPr+S7peS9v+eUqFxyXG4gICAgICBpZiAodHlwZW9mIGV2ZW50RW1pdCA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIGV2ZW50RW1pdCgnQ0hBVF9MSVNUX0NIQU5HRUQnKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign6Kem5Y+R6IGK5aSp5Y+Y5YyW5LqL5Lu25aSx6LSlOicsIGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluaJgOaciee+pOiBilxyXG4gICAqL1xyXG4gIGdldEFsbEdyb3VwQ2hhdHMoKTogR3JvdXBDaGF0RGF0YVtdIHtcclxuICAgIHJldHVybiBHcm91cENoYXRTdG9yYWdlLmdldEFsbEdyb3VwQ2hhdHMoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOagueaNrklE6I635Y+W576k6IGKXHJcbiAgICovXHJcbiAgZ2V0R3JvdXBDaGF0QnlJZChpZDogc3RyaW5nKTogR3JvdXBDaGF0RGF0YSB8IG51bGwge1xyXG4gICAgcmV0dXJuIEdyb3VwQ2hhdFN0b3JhZ2UuZ2V0R3JvdXBDaGF0QnlJZChpZCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliKDpmaTnvqTogYpcclxuICAgKi9cclxuICBkZWxldGVHcm91cENoYXQoaWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgY29uc3Qgc3VjY2VzcyA9IEdyb3VwQ2hhdFN0b3JhZ2UuZGVsZXRlR3JvdXBDaGF0KGlkKTtcclxuICAgIGlmIChzdWNjZXNzKSB7XHJcbiAgICAgIHRoaXMuZW1pdENoYXRDaGFuZ2VkRXZlbnQoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBzdWNjZXNzO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/groupChat/manager.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/groupChat/storage.ts": 
  /*!********************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/groupChat/storage.ts ***!
  \********************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GroupChatStorage: () => (/* binding */ GroupChatStorage)\n/* harmony export */ });\n/* harmony import */ var _utils_characterStorage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/characterStorage */ \"./src/多云熊/备份/给rovo的/modules/utils/characterStorage.ts\");\n\n/**\n * 群聊数据存储管理器\n * 负责群聊数据的持久化存储和检索，包括头像缓存管理\n */\nclass GroupChatStorage {\n    static STORAGE_KEY = 'groups';\n    static AVATAR_CACHE_KEY = 'group_avatars';\n    /**\n     * 保存群聊数据到角色专用空间\n     */\n    static saveGroupChat(groupChat) {\n        try {\n            const existingGroups = this.getAllGroupChats();\n            const updatedGroups = existingGroups.filter(g => g.id !== groupChat.id);\n            updatedGroups.unshift(groupChat); // 添加到开头\n            (0,_utils_characterStorage__WEBPACK_IMPORTED_MODULE_0__.setCharacterItem)(this.STORAGE_KEY, updatedGroups);\n            console.log(`💾 群聊已保存到角色专用空间: ${groupChat.name}`);\n        }\n        catch (error) {\n            console.error('保存群聊数据失败:', error);\n        }\n    }\n    /**\n     * 获取所有群聊数据\n     */\n    static getAllGroupChats() {\n        try {\n            return (0,_utils_characterStorage__WEBPACK_IMPORTED_MODULE_0__.getCharacterItem)(this.STORAGE_KEY, []);\n        }\n        catch (error) {\n            console.error('读取群聊数据失败:', error);\n            return [];\n        }\n    }\n    /**\n     * 根据ID获取群聊数据\n     */\n    static getGroupChatById(id) {\n        const groups = this.getAllGroupChats();\n        return groups.find(g => g.id === id) || null;\n    }\n    /**\n     * 删除群聊数据\n     */\n    static deleteGroupChat(id) {\n        try {\n            const groups = this.getAllGroupChats();\n            const filteredGroups = groups.filter(g => g.id !== id);\n            if (filteredGroups.length < groups.length) {\n                (0,_utils_characterStorage__WEBPACK_IMPORTED_MODULE_0__.setCharacterItem)(this.STORAGE_KEY, filteredGroups);\n                console.log(`🗑️ 群聊已从角色专用空间删除: ${id}`);\n                return true;\n            }\n            return false;\n        }\n        catch (error) {\n            console.error('删除群聊数据失败:', error);\n            return false;\n        }\n    }\n    /**\n     * 生成群聊ID（使用群聊名称）\n     */\n    static generateGroupId(groupName) {\n        if (groupName) {\n            // 使用统一的群聊ID格式，与AI回复格式保持一致\n            return groupName.startsWith('群聊') ? groupName : `群聊${groupName}`;\n        }\n        // 降级方案：如果没有提供群聊名称，使用时间戳\n        return `group_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    }\n    // ==================== 头像缓存管理 ====================\n    /**\n     * 保存群头像到角色隔离缓存\n     * @param chatId 群聊ID\n     * @param avatarBase64 头像Base64数据\n     */\n    static async saveGroupAvatar(chatId, avatarBase64) {\n        try {\n            // 保存头像数据到角色专用空间\n            (0,_utils_characterStorage__WEBPACK_IMPORTED_MODULE_0__.setCharacterItem)(`group_avatar_${chatId}`, avatarBase64);\n            // 同时更新群头像索引（也使用角色隔离）\n            const avatarIndex = (0,_utils_characterStorage__WEBPACK_IMPORTED_MODULE_0__.getCharacterItem)('group_avatar_index', {});\n            avatarIndex[chatId] = {\n                avatar: avatarBase64,\n                timestamp: Date.now(),\n                size: avatarBase64.length,\n            };\n            (0,_utils_characterStorage__WEBPACK_IMPORTED_MODULE_0__.setCharacterItem)('group_avatar_index', avatarIndex);\n            // 同步更新群聊数据中的头像\n            const groupData = this.getGroupChatById(chatId);\n            if (groupData) {\n                groupData.avatar = avatarBase64;\n                this.saveGroupChat(groupData);\n            }\n            console.log(`💾 群头像已保存到缓存: ${chatId}`);\n        }\n        catch (error) {\n            console.error('保存群头像到缓存失败:', error);\n            throw error;\n        }\n    }\n    /**\n     * 从角色隔离缓存加载群头像\n     * @param chatId 群聊ID\n     * @returns 头像Base64数据或null\n     */\n    static loadGroupAvatar(chatId) {\n        try {\n            return (0,_utils_characterStorage__WEBPACK_IMPORTED_MODULE_0__.getCharacterItem)(`group_avatar_${chatId}`, null);\n        }\n        catch (error) {\n            console.error('从缓存加载群头像失败:', error);\n            return null;\n        }\n    }\n    /**\n     * 获取群头像（优先从缓存，然后从群聊数据，最后使用默认头像）\n     * @param chatId 群聊ID\n     * @param defaultAvatar 默认头像URL\n     * @returns 头像URL\n     */\n    static getGroupAvatarWithFallback(chatId, defaultAvatar) {\n        // 1. 优先从缓存加载\n        const cachedAvatar = this.loadGroupAvatar(chatId);\n        if (cachedAvatar) {\n            return cachedAvatar;\n        }\n        // 2. 从群聊数据加载\n        const groupData = this.getGroupChatById(chatId);\n        if (groupData && groupData.avatar && groupData.avatar !== defaultAvatar) {\n            return groupData.avatar;\n        }\n        // 3. 使用默认头像\n        return defaultAvatar;\n    }\n    /**\n     * 获取默认群头像（根据群名称哈希选择）\n     * @param groupName 群名称\n     * @returns 群头像URL\n     */\n    static getDefaultGroupAvatar(groupName) {\n        // 可以根据群名称生成不同的默认头像\n        const defaultGroupAvatars = [\n            'https://files.catbox.moe/j2s4qj.jpg',\n            'https://files.catbox.moe/seoipi.jpg',\n            'https://files.catbox.moe/dq08mr.jpg',\n            'https://files.catbox.moe/yc3gv4.jpeg',\n        ];\n        // 根据群名称哈希选择头像\n        const hash = groupName.split('').reduce((a, b) => {\n            a = (a << 5) - a + b.charCodeAt(0);\n            return a & a;\n        }, 0);\n        return defaultGroupAvatars[Math.abs(hash) % defaultGroupAvatars.length];\n    }\n    /**\n     * 获取群头像索引\n     * @returns 群头像索引对象\n     */\n    static getGroupAvatarIndex() {\n        try {\n            return (0,_utils_characterStorage__WEBPACK_IMPORTED_MODULE_0__.getCharacterItem)('group_avatar_index', {});\n        }\n        catch (error) {\n            console.error('获取群头像索引失败:', error);\n            return {};\n        }\n    }\n    /**\n     * 清理旧的头像缓存（保留最近30天的）\n     */\n    static cleanupOldAvatarCache() {\n        try {\n            const avatarIndex = this.getGroupAvatarIndex();\n            const thirtyDaysAgo = Date.now() - 30 * 24 * 60 * 60 * 1000;\n            const keysToRemove = [];\n            for (const [chatId, info] of Object.entries(avatarIndex)) {\n                if (info.timestamp < thirtyDaysAgo) {\n                    keysToRemove.push(chatId);\n                    removeCharacterItem(`group_avatar_${chatId}`);\n                }\n            }\n            // 更新索引\n            keysToRemove.forEach(key => delete avatarIndex[key]);\n            (0,_utils_characterStorage__WEBPACK_IMPORTED_MODULE_0__.setCharacterItem)('group_avatar_index', avatarIndex);\n            if (keysToRemove.length > 0) {\n                console.log(`🧹 已清理 ${keysToRemove.length} 个过期群头像缓存`);\n            }\n        }\n        catch (error) {\n            console.error('清理头像缓存失败:', error);\n        }\n    }\n    /**\n     * 将文件转换为Base64格式\n     * @param file 文件对象\n     * @returns Base64字符串\n     */\n    static fileToBase64(file) {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onload = () => resolve(reader.result);\n            reader.onerror = reject;\n            reader.readAsDataURL(file);\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvZ3JvdXBDaGF0L3N0b3JhZ2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBK0U7QUFHL0U7OztHQUdHO0FBQ0ksTUFBTSxnQkFBZ0I7SUFDbkIsTUFBTSxDQUFVLFdBQVcsR0FBRyxRQUFRLENBQUM7SUFDdkMsTUFBTSxDQUFVLGdCQUFnQixHQUFHLGVBQWUsQ0FBQztJQUUzRDs7T0FFRztJQUNILE1BQU0sQ0FBQyxhQUFhLENBQUMsU0FBd0I7UUFDM0MsSUFBSSxDQUFDO1lBQ0gsTUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7WUFDL0MsTUFBTSxhQUFhLEdBQUcsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3hFLGFBQWEsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxRQUFRO1lBRTFDLHlFQUFnQixDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsYUFBYSxDQUFDLENBQUM7WUFDbEQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7UUFDcEQsQ0FBQztRQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7WUFDZixPQUFPLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUNwQyxDQUFDO0lBQ0gsQ0FBQztJQUVEOztPQUVHO0lBQ0gsTUFBTSxDQUFDLGdCQUFnQjtRQUNyQixJQUFJLENBQUM7WUFDSCxPQUFPLHlFQUFnQixDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDaEQsQ0FBQztRQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7WUFDZixPQUFPLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUNsQyxPQUFP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YUFBYSxFQUFFLENBQUM7b0JBQ25DLFlBQVksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7b0JBQzFCLG1CQUFtQixDQUFDLGdCQUFnQixNQUFNLEVBQUUsQ0FBQyxDQUFDO2dCQUNoRCxDQUFDO1lBQ0gsQ0FBQztZQUVELE9BQU87WUFDUCxZQUFZLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsT0FBTyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUNyRCx5RUFBZ0IsQ0FBQyxvQkFBb0IsRUFBRSxXQUFXLENBQUMsQ0FBQztZQUVwRCxJQUFJLFlBQVksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7Z0JBQzVCLE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBVSxZQUFZLENBQUMsTUFBTSxXQUFXLENBQUMsQ0FBQztZQUN4RCxDQUFDO1FBQ0gsQ0FBQztRQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7WUFDZixPQUFPLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUNwQyxDQUFDO0lBQ0gsQ0FBQztJQUVEOzs7O09BSUc7SUFDSCxNQUFNLENBQUMsWUFBWSxDQUFDLElBQVU7UUFDNUIsT0FBTyxJQUFJLE9BQU8sQ0FBQyxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsRUFBRTtZQUNyQyxNQUFNLE1BQU0sR0FBRyxJQUFJLFVBQVUsRUFBRSxDQUFDO1lBQ2hDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxNQUFnQixDQUFDLENBQUM7WUFDdkQsTUFBTSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7WUFDeEIsTUFBTSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM3QixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WkmuS6keeGii/lpIfku70v57uZcm92b+eahC9tb2R1bGVzL2dyb3VwQ2hhdC9zdG9yYWdlLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRDaGFyYWN0ZXJJdGVtLCBzZXRDaGFyYWN0ZXJJdGVtIH0gZnJvbSAnLi4vdXRpbHMvY2hhcmFjdGVyU3RvcmFnZSc7XHJcbmltcG9ydCB7IEdyb3VwQ2hhdERhdGEgfSBmcm9tICcuL3R5cGVzJztcclxuXHJcbi8qKlxyXG4gKiDnvqTogYrmlbDmja7lrZjlgqjnrqHnkIblmahcclxuICog6LSf6LSj576k6IGK5pWw5o2u55qE5oyB5LmF5YyW5a2Y5YKo5ZKM5qOA57Si77yM5YyF5ous5aS05YOP57yT5a2Y566h55CGXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgR3JvdXBDaGF0U3RvcmFnZSB7XHJcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgU1RPUkFHRV9LRVkgPSAnZ3JvdXBzJztcclxuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBBVkFUQVJfQ0FDSEVfS0VZID0gJ2dyb3VwX2F2YXRhcnMnO1xyXG5cclxuICAvKipcclxuICAgKiDkv53lrZjnvqTogYrmlbDmja7liLDop5LoibLkuJPnlKjnqbrpl7RcclxuICAgKi9cclxuICBzdGF0aWMgc2F2ZUdyb3VwQ2hhdChncm91cENoYXQ6IEdyb3VwQ2hhdERhdGEpOiB2b2lkIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGV4aXN0aW5nR3JvdXBzID0gdGhpcy5nZXRBbGxHcm91cENoYXRzKCk7XHJcbiAgICAgIGNvbnN0IHVwZGF0ZWRHcm91cHMgPSBleGlzdGluZ0dyb3Vwcy5maWx0ZXIoZyA9PiBnLmlkICE9PSBncm91cENoYXQuaWQpO1xyXG4gICAgICB1cGRhdGVkR3JvdXBzLnVuc2hpZnQoZ3JvdXBDaGF0KTsgLy8g5re75Yqg5Yiw5byA5aS0XHJcblxyXG4gICAgICBzZXRDaGFyYWN0ZXJJdGVtKHRoaXMuU1RPUkFHRV9LRVksIHVwZGF0ZWRHcm91cHMpO1xyXG4gICAgICBjb25zb2xlLmxvZyhg8J+SviDnvqTogYrlt7Lkv53lrZjliLDop5LoibLkuJPnlKjnqbrpl7Q6ICR7Z3JvdXBDaGF0Lm5hbWV9YCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfkv53lrZjnvqTogYrmlbDmja7lpLHotKU6JywgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5omA5pyJ576k6IGK5pWw5o2uXHJcbiAgICovXHJcbiAgc3RhdGljIGdldEFsbEdyb3VwQ2hhdHMoKTogR3JvdXBDaGF0RGF0YVtdIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHJldHVybiBnZXRDaGFyYWN0ZXJJdGVtKHRoaXMuU1RPUkFHRV9LRVksIFtdKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+ivu+WPlue+pOiBiuaVsOaNruWksei0pTonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOagueaNrklE6I635Y+W576k6IGK5pWw5o2uXHJcbiAgICovXHJcbiAgc3RhdGljIGdldEdyb3VwQ2hhdEJ5SWQoaWQ6IHN0cmluZyk6IEdyb3VwQ2hhdERhdGEgfCBudWxsIHtcclxuICAgIGNvbnN0IGdyb3VwcyA9IHRoaXMuZ2V0QWxsR3JvdXBDaGF0cygpO1xyXG4gICAgcmV0dXJuIGdyb3Vwcy5maW5kKGcgPT4gZy5pZCA9PT0gaWQpIHx8IG51bGw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliKDpmaTnvqTogYrmlbDmja5cclxuICAgKi9cclxuICBzdGF0aWMgZGVsZXRlR3JvdXBDaGF0KGlkOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGdyb3VwcyA9IHRoaXMuZ2V0QWxsR3JvdXBDaGF0cygpO1xyXG4gICAgICBjb25zdCBmaWx0ZXJlZEdyb3VwcyA9IGdyb3Vwcy5maWx0ZXIoZyA9PiBnLmlkICE9PSBpZCk7XHJcblxyXG4gICAgICBpZiAoZmlsdGVyZWRHcm91cHMubGVuZ3RoIDwgZ3JvdXBzLmxlbmd0aCkge1xyXG4gICAgICAgIHNldENoYXJhY3Rlckl0ZW0odGhpcy5TVE9SQUdFX0tFWSwgZmlsdGVyZWRHcm91cHMpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5eR77iPIOe+pOiBiuW3suS7juinkuiJsuS4k+eUqOepuumXtOWIoOmZpDogJHtpZH1gKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfliKDpmaTnvqTogYrmlbDmja7lpLHotKU6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDnlJ/miJDnvqTogYpJRO+8iOS9v+eUqOe+pOiBiuWQjeensO+8iVxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZW5lcmF0ZUdyb3VwSWQoZ3JvdXBOYW1lPzogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGlmIChncm91cE5hbWUpIHtcclxuICAgICAgLy8g5L2/55So57uf5LiA55qE576k6IGKSUTmoLzlvI/vvIzkuI5BSeWbnuWkjeagvOW8j+S/neaMgeS4gOiHtFxyXG4gICAgICByZXR1cm4gZ3JvdXBOYW1lLnN0YXJ0c1dpdGgoJ+e+pOiBiicpID8gZ3JvdXBOYW1lIDogYOe+pOiBiiR7Z3JvdXBOYW1lfWA7XHJcbiAgICB9XHJcbiAgICAvLyDpmY3nuqfmlrnmoYjvvJrlpoLmnpzmsqHmnInmj5DkvpvnvqTogYrlkI3np7DvvIzkvb/nlKjml7bpl7TmiLNcclxuICAgIHJldHVybiBgZ3JvdXBfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gO1xyXG4gIH1cclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT0g5aS05YOP57yT5a2Y566h55CGID09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIC8qKlxyXG4gICAqIOS/neWtmOe+pOWktOWDj+WIsOinkuiJsumalOemu+e8k+WtmFxyXG4gICAqIEBwYXJhbSBjaGF0SWQg576k6IGKSURcclxuICAgKiBAcGFyYW0gYXZhdGFyQmFzZTY0IOWktOWDj0Jhc2U2NOaVsOaNrlxyXG4gICAqL1xyXG4gIHN0YXRpYyBhc3luYyBzYXZlR3JvdXBBdmF0YXIoY2hhdElkOiBzdHJpbmcsIGF2YXRhckJhc2U2NDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDkv53lrZjlpLTlg4/mlbDmja7liLDop5LoibLkuJPnlKjnqbrpl7RcclxuICAgICAgc2V0Q2hhcmFjdGVySXRlbShgZ3JvdXBfYXZhdGFyXyR7Y2hhdElkfWAsIGF2YXRhckJhc2U2NCk7XHJcblxyXG4gICAgICAvLyDlkIzml7bmm7TmlrDnvqTlpLTlg4/ntKLlvJXvvIjkuZ/kvb/nlKjop5LoibLpmpTnprvvvIlcclxuICAgICAgY29uc3QgYXZhdGFySW5kZXggPSBnZXRDaGFyYWN0ZXJJdGVtKCdncm91cF9hdmF0YXJfaW5kZXgnLCB7fSk7XHJcbiAgICAgIGF2YXRhckluZGV4W2NoYXRJZF0gPSB7XHJcbiAgICAgICAgYXZhdGFyOiBhdmF0YXJCYXNlNjQsXHJcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICAgIHNpemU6IGF2YXRhckJhc2U2NC5sZW5ndGgsXHJcbiAgICAgIH07XHJcbiAgICAgIHNldENoYXJhY3Rlckl0ZW0oJ2dyb3VwX2F2YXRhcl9pbmRleCcsIGF2YXRhckluZGV4KTtcclxuXHJcbiAgICAgIC8vIOWQjOatpeabtOaWsOe+pOiBiuaVsOaNruS4reeahOWktOWDj1xyXG4gICAgICBjb25zdCBncm91cERhdGEgPSB0aGlzLmdldEdyb3VwQ2hhdEJ5SWQoY2hhdElkKTtcclxuICAgICAgaWYgKGdyb3VwRGF0YSkge1xyXG4gICAgICAgIGdyb3VwRGF0YS5hdmF0YXIgPSBhdmF0YXJCYXNlNjQ7XHJcbiAgICAgICAgdGhpcy5zYXZlR3JvdXBDaGF0KGdyb3VwRGF0YSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKGDwn5K+IOe+pOWktOWDj+W3suS/neWtmOWIsOe8k+WtmDogJHtjaGF0SWR9YCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfkv53lrZjnvqTlpLTlg4/liLDnvJPlrZjlpLHotKU6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOS7juinkuiJsumalOemu+e8k+WtmOWKoOi9vee+pOWktOWDj1xyXG4gICAqIEBwYXJhbSBjaGF0SWQg576k6IGKSURcclxuICAgKiBAcmV0dXJucyDlpLTlg49CYXNlNjTmlbDmja7miJZudWxsXHJcbiAgICovXHJcbiAgc3RhdGljIGxvYWRHcm91cEF2YXRhcihjaGF0SWQ6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xyXG4gICAgdHJ5IHtcclxuICAgICAgcmV0dXJuIGdldENoYXJhY3Rlckl0ZW0oYGdyb3VwX2F2YXRhcl8ke2NoYXRJZH1gLCBudWxsKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+S7jue8k+WtmOWKoOi9vee+pOWktOWDj+Wksei0pTonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W576k5aS05YOP77yI5LyY5YWI5LuO57yT5a2Y77yM54S25ZCO5LuO576k6IGK5pWw5o2u77yM5pyA5ZCO5L2/55So6buY6K6k5aS05YOP77yJXHJcbiAgICogQHBhcmFtIGNoYXRJZCDnvqTogYpJRFxyXG4gICAqIEBwYXJhbSBkZWZhdWx0QXZhdGFyIOm7mOiupOWktOWDj1VSTFxyXG4gICAqIEByZXR1cm5zIOWktOWDj1VSTFxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRHcm91cEF2YXRhcldpdGhGYWxsYmFjayhjaGF0SWQ6IHN0cmluZywgZGVmYXVsdEF2YXRhcjogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIC8vIDEuIOS8mOWFiOS7jue8k+WtmOWKoOi9vVxyXG4gICAgY29uc3QgY2FjaGVkQXZhdGFyID0gdGhpcy5sb2FkR3JvdXBBdmF0YXIoY2hhdElkKTtcclxuICAgIGlmIChjYWNoZWRBdmF0YXIpIHtcclxuICAgICAgcmV0dXJuIGNhY2hlZEF2YXRhcjtcclxuICAgIH1cclxuXHJcbiAgICAvLyAyLiDku47nvqTogYrmlbDmja7liqDovb1cclxuICAgIGNvbnN0IGdyb3VwRGF0YSA9IHRoaXMuZ2V0R3JvdXBDaGF0QnlJZChjaGF0SWQpO1xyXG4gICAgaWYgKGdyb3VwRGF0YSAmJiBncm91cERhdGEuYXZhdGFyICYmIGdyb3VwRGF0YS5hdmF0YXIgIT09IGRlZmF1bHRBdmF0YXIpIHtcclxuICAgICAgcmV0dXJuIGdyb3VwRGF0YS5hdmF0YXI7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gMy4g5L2/55So6buY6K6k5aS05YOPXHJcbiAgICByZXR1cm4gZGVmYXVsdEF2YXRhcjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPlum7mOiupOe+pOWktOWDj++8iOagueaNrue+pOWQjeensOWTiOW4jOmAieaLqe+8iVxyXG4gICAqIEBwYXJhbSBncm91cE5hbWUg576k5ZCN56ewXHJcbiAgICogQHJldHVybnMg576k5aS05YOPVVJMXHJcbiAgICovXHJcbiAgc3RhdGljIGdldERlZmF1bHRHcm91cEF2YXRhcihncm91cE5hbWU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAvLyDlj6/ku6XmoLnmja7nvqTlkI3np7DnlJ/miJDkuI3lkIznmoTpu5jorqTlpLTlg49cclxuICAgIGNvbnN0IGRlZmF1bHRHcm91cEF2YXRhcnMgPSBbXHJcbiAgICAgICdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvajJzNHFqLmpwZycsXHJcbiAgICAgICdodHRwczovL2ZpbGVzLmNhdGJveC5tb2Uvc2VvaXBpLmpwZycsXHJcbiAgICAgICdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvZHEwOG1yLmpwZycsXHJcbiAgICAgICdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UveWMzZ3Y0LmpwZWcnLFxyXG4gICAgXTtcclxuXHJcbiAgICAvLyDmoLnmja7nvqTlkI3np7Dlk4jluIzpgInmi6nlpLTlg49cclxuICAgIGNvbnN0IGhhc2ggPSBncm91cE5hbWUuc3BsaXQoJycpLnJlZHVjZSgoYSwgYikgPT4ge1xyXG4gICAgICBhID0gKGEgPDwgNSkgLSBhICsgYi5jaGFyQ29kZUF0KDApO1xyXG4gICAgICByZXR1cm4gYSAmIGE7XHJcbiAgICB9LCAwKTtcclxuXHJcbiAgICByZXR1cm4gZGVmYXVsdEdyb3VwQXZhdGFyc1tNYXRoLmFicyhoYXNoKSAlIGRlZmF1bHRHcm91cEF2YXRhcnMubGVuZ3RoXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPlue+pOWktOWDj+e0ouW8lVxyXG4gICAqIEByZXR1cm5zIOe+pOWktOWDj+e0ouW8leWvueixoVxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRHcm91cEF2YXRhckluZGV4KCk6IFJlY29yZDxzdHJpbmcsIHsgYXZhdGFyOiBzdHJpbmc7IHRpbWVzdGFtcDogbnVtYmVyOyBzaXplOiBudW1iZXIgfT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgcmV0dXJuIGdldENoYXJhY3Rlckl0ZW0oJ2dyb3VwX2F2YXRhcl9pbmRleCcsIHt9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPlue+pOWktOWDj+e0ouW8leWksei0pTonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiB7fTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOa4heeQhuaXp+eahOWktOWDj+e8k+WtmO+8iOS/neeVmeacgOi/kTMw5aSp55qE77yJXHJcbiAgICovXHJcbiAgc3RhdGljIGNsZWFudXBPbGRBdmF0YXJDYWNoZSgpOiB2b2lkIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGF2YXRhckluZGV4ID0gdGhpcy5nZXRHcm91cEF2YXRhckluZGV4KCk7XHJcbiAgICAgIGNvbnN0IHRoaXJ0eURheXNBZ28gPSBEYXRlLm5vdygpIC0gMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xyXG4gICAgICBjb25zdCBrZXlzVG9SZW1vdmU6IHN0cmluZ1tdID0gW107XHJcblxyXG4gICAgICBmb3IgKGNvbnN0IFtjaGF0SWQsIGluZm9dIG9mIE9iamVjdC5lbnRyaWVzKGF2YXRhckluZGV4KSkge1xyXG4gICAgICAgIGlmIChpbmZvLnRpbWVzdGFtcCA8IHRoaXJ0eURheXNBZ28pIHtcclxuICAgICAgICAgIGtleXNUb1JlbW92ZS5wdXNoKGNoYXRJZCk7XHJcbiAgICAgICAgICByZW1vdmVDaGFyYWN0ZXJJdGVtKGBncm91cF9hdmF0YXJfJHtjaGF0SWR9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDmm7TmlrDntKLlvJVcclxuICAgICAga2V5c1RvUmVtb3ZlLmZvckVhY2goa2V5ID0+IGRlbGV0ZSBhdmF0YXJJbmRleFtrZXldKTtcclxuICAgICAgc2V0Q2hhcmFjdGVySXRlbSgnZ3JvdXBfYXZhdGFyX2luZGV4JywgYXZhdGFySW5kZXgpO1xyXG5cclxuICAgICAgaWYgKGtleXNUb1JlbW92ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYPCfp7kg5bey5riF55CGICR7a2V5c1RvUmVtb3ZlLmxlbmd0aH0g5Liq6L+H5pyf576k5aS05YOP57yT5a2YYCk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+a4heeQhuWktOWDj+e8k+WtmOWksei0pTonLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlsIbmlofku7bovazmjaLkuLpCYXNlNjTmoLzlvI9cclxuICAgKiBAcGFyYW0gZmlsZSDmlofku7blr7nosaFcclxuICAgKiBAcmV0dXJucyBCYXNlNjTlrZfnrKbkuLJcclxuICAgKi9cclxuICBzdGF0aWMgZmlsZVRvQmFzZTY0KGZpbGU6IEZpbGUpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHJlc29sdmUocmVhZGVyLnJlc3VsdCBhcyBzdHJpbmcpO1xyXG4gICAgICByZWFkZXIub25lcnJvciA9IHJlamVjdDtcclxuICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/groupChat/storage.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/parsers/DataConverter.ts": 
  /*!************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/parsers/DataConverter.ts ***!
  \************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DataConverter: () => (/* binding */ DataConverter),\n/* harmony export */   initializeContactManager: () => (/* binding */ initializeContactManager)\n/* harmony export */ });\n/* harmony import */ var _chatList_contactManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../chatList/contactManager */ \"./src/多云熊/备份/给rovo的/modules/chatList/contactManager.ts\");\n/**\n * 数据转换器\n * 将解析出的原始数据转换为现有模块使用的数据格式\n */\n\n// —— Dynamics/Contacts 头像统一解析 ——\n// 使用一个模块级的 ContactManager 实例（懒加载），避免在解析期间重复创建\nlet __dc_contactManager = null;\nlet __dc_contactManagerInitPromise = null;\nasync function __dc_getContactManager() {\n    if (!__dc_contactManagerInitPromise) {\n        __dc_contactManagerInitPromise = (async () => {\n            const manager = new _chatList_contactManager__WEBPACK_IMPORTED_MODULE_0__.ContactManager();\n            // ContactManager 的构造函数已经调用了 initialize()，不需要重复加载\n            // 等待一小段时间让初始化完成\n            await new Promise(resolve => setTimeout(resolve, 100));\n            console.log('[DataConverter] ContactManager 已创建');\n            __dc_contactManager = manager;\n            return manager;\n        })();\n    }\n    return __dc_contactManagerInitPromise;\n}\n/**\n * 根据联系人名称解析头像，优先与通讯录/世界书保持一致\n * 1) 通讯录中已有的头像（用户自定义优先）\n * 2) 世界书/角色专用缓存头像\n * 3) 兜底默认头像（非随机，保证稳定）\n */\nfunction resolveContactAvatarByName(name) {\n    try {\n        // 尝试同步获取已初始化的 ContactManager\n        if (__dc_contactManager) {\n            const cm = __dc_contactManager;\n            // 1) 世界书/角色专用缓存（优先：包含用户在联系人编辑时写入的角色专用头像）\n            const lorebookAvatar = cm.getContactAvatar(name);\n            if (lorebookAvatar && lorebookAvatar.trim() && !/user-default\\.png$/i.test(lorebookAvatar)) {\n                return lorebookAvatar.trim();\n            }\n            // 2) 通讯录内存快照（可能存在陈旧数据，仅在未命中专用缓存时作为降级）\n            const contact = cm.getAllContacts().find(c => c.name === name);\n            if (contact?.avatar && contact.avatar.trim()) {\n                return contact.avatar.trim();\n            }\n        }\n        else {\n            // ContactManager 还未初始化，触发异步初始化\n            // 这里我们记录一下未初始化的情况，方便调试\n            console.warn(`[DataConverter] 尝试获取 \"${name}\" 的头像时 ContactManager 未初始化，将使用默认头像`);\n            // 触发异步初始化以便下次使用\n            __dc_getContactManager().catch(e => {\n                console.warn('[DataConverter] 异步初始化 ContactManager 失败:', e);\n            });\n        }\n    }\n    catch (e) {\n        // 忽略解析过程的任何错误，走兜底\n        console.warn('[DataConverter] 解析头像失败:', e);\n    }\n    // 3) 兜底：稳定的默认头像（避免\"随机\"）\n    return 'https://files.catbox.moe/u8ccy5.jpg';\n}\n/**\n * 初始化 ContactManager（在动态管理器初始化时调用）\n * 确保 ContactManager 已完全初始化并加载了联系人数据\n */\nasync function initializeContactManager() {\n    // 只在未初始化时才初始化，避免重复加载\n    if (!__dc_contactManager) {\n        await __dc_getContactManager();\n        console.log('[DataConverter] ContactManager 首次初始化完成');\n    }\n    else {\n        console.log('[DataConverter] ContactManager 已初始化，跳过重复加载');\n    }\n}\nclass DataConverter {\n    /**\n     * 转换动态数据\n     * @param rawPosts 原始动态数据\n     * @param currentUser 当前用户信息（可选）\n     * @returns 动态模块数据格式\n     */\n    static convertDynamicsData(rawPosts, currentUser) {\n        const defaultUser = currentUser || {\n            name: '多云熊',\n            avatar: 'https://files.catbox.moe/u8ccy5.jpg',\n        };\n        // 按楼层倒序排序（楼层大的在前），楼层内按编号倒序\n        const sortedPosts = [...rawPosts].sort((a, b) => {\n            // 首先按楼层ID倒序（大楼层在前）\n            const aMessageId = typeof a.messageId === 'number' ? a.messageId : Number.NEGATIVE_INFINITY;\n            const bMessageId = typeof b.messageId === 'number' ? b.messageId : Number.NEGATIVE_INFINITY;\n            if (bMessageId !== aMessageId) {\n                return bMessageId - aMessageId; // 楼层倒序\n            }\n            // 同一楼层内按编号倒序（大编号在前）\n            const aNo = typeof a.no === 'number' ? a.no : Number.NEGATIVE_INFINITY;\n            const bNo = typeof b.no === 'number' ? b.no : Number.NEGATIVE_INFINITY;\n            return bNo - aNo;\n        });\n        const posts = sortedPosts.map((post, index) => this.convertPostToDynamics(post, defaultUser, index));\n        return {\n            posts,\n            currentUser: defaultUser,\n        };\n    }\n    /**\n     * 转换动态条目为动态格式\n     * @param rawPost 原始动态数据\n     * @param user 用户信息\n     * @param index 索引\n     * @returns 动态数据\n     */\n    static convertPostToDynamics(rawPost, user, index) {\n        // 使用作者名或默认用户\n        const authorName = rawPost.authorName || user.name;\n        const post = {\n            id: rawPost.no !== undefined ? `dynamics_${rawPost.no}` : `dynamics_${Date.now()}_${index}`,\n            author: {\n                name: authorName,\n                username: `@${authorName.toLowerCase()}`,\n                avatar: resolveContactAvatarByName(authorName),\n            },\n            content: rawPost.content,\n            image: rawPost.imageDescription ? this.generateImageUrl(rawPost.imageDescription) : rawPost.imageUrl,\n            imageDescription: rawPost.imageDescription,\n            timestamp: this.pickTimestamp(rawPost.timestamp, index),\n            actions: {\n                likes: rawPost.likesCount,\n                shares: rawPost.sharesCount,\n                bookmarks: Math.floor(rawPost.likesCount * 0.3),\n            },\n            no: rawPost.no,\n            likedBy: rawPost.likedBy?.map(name => ({ name, username: `@${name.toLowerCase()}` })),\n            comments: rawPost.comments.map((comment, commentIndex) => this.convertCommentToDynamics(comment, commentIndex)),\n        };\n        // 传递楼层ID（如果存在）\n        if (rawPost.messageId !== undefined) {\n            post.messageId = rawPost.messageId;\n        }\n        return post;\n    }\n    /**\n     * 转换评论数据（动态格式）\n     * @param rawComment 原始评论数据\n     * @param index 索引\n     * @returns 动态评论数据\n     */\n    static convertCommentToDynamics(rawComment, index) {\n        return {\n            id: `dynamics_comment_${Date.now()}_${index}`,\n            author: {\n                name: rawComment.authorName,\n                avatar: resolveContactAvatarByName(rawComment.authorName),\n            },\n            content: rawComment.content,\n            timestamp: this.generateTimestamp(index, true),\n        };\n    }\n    /**\n     * 生成图片URL\n     * @param description 图片描述\n     * @returns 图片URL\n     */\n    static generateImageUrl(description) {\n        // 这里可以根据描述生成对应的图片URL\n        // 目前使用默认图片，实际使用时可以集成图片生成服务\n        // 根据用户要求，遮罩时只使用这一张图片\n        return 'https://files.catbox.moe/8mjvdg.jpg';\n    }\n    /**\n     * 生成头像URL\n     * @param name 用户名\n     * @returns 头像URL\n     */\n    static generateAvatarUrl(name) {\n        const defaultAvatars = [\n            'https://files.catbox.moe/u8ccy5.jpg',\n            'https://files.catbox.moe/x2ejbc.jpg',\n            'https://files.catbox.moe/tw2ygf.jpg',\n        ];\n        // 根据用户名的哈希值选择头像\n        const hash = this.simpleHash(name);\n        return defaultAvatars[hash % defaultAvatars.length];\n    }\n    /**\n     * 生成时间戳\n     * @param index 索引\n     * @param isComment 是否为评论\n     * @returns 时间戳字符串\n     */\n    static generateTimestamp(index, isComment = false) {\n        const now = new Date();\n        const offsetMinutes = isComment ? (index + 1) * 5 : (index + 1) * 30; // 评论间隔5分钟，动态间隔30分钟\n        const date = new Date(now.getTime() - offsetMinutes * 60 * 1000);\n        return this.formatYMDHM(date);\n    }\n    // 选择并规范化时间戳：\n    // - 优先使用解析得到的 rawTs（YYYY-MM-DD HH:mm 或 ISO/ISO-like）\n    // - 支持 HH:mm 格式（补充今天的日期）\n    // - 其次尝试 Date 可解析的字符串\n    // - 最后回退到相对当前时间生成的时间戳\n    static pickTimestamp(rawTs, index, isComment = false) {\n        if (typeof rawTs === 'string' && rawTs.trim()) {\n            const ts = rawTs.trim();\n            // 已是标准 \"YYYY-MM-DD HH:mm\"\n            if (/^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}$/.test(ts)) {\n                return ts;\n            }\n            // HH:mm 格式 - 补充今天的日期\n            if (/^\\d{2}:\\d{2}$/.test(ts)) {\n                const today = new Date();\n                const year = today.getFullYear();\n                const month = String(today.getMonth() + 1).padStart(2, '0');\n                const day = String(today.getDate()).padStart(2, '0');\n                return `${year}-${month}-${day} ${ts}`;\n            }\n            // ISO-like \"YYYY-MM-DDTHH:mm...\" -> 规范化为 \"YYYY-MM-DD HH:mm\"\n            if (/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}/.test(ts)) {\n                return ts.replace('T', ' ').slice(0, 16);\n            }\n            // 其他可被 Date 解析的字符串\n            const d = new Date(ts);\n            if (!isNaN(d.getTime())) {\n                return this.formatYMDHM(d);\n            }\n        }\n        // 回退\n        return this.generateTimestamp(index, isComment);\n    }\n    // 输出本地时间 \"YYYY-MM-DD HH:mm\"\n    static formatYMDHM(date) {\n        const y = date.getFullYear();\n        const m = String(date.getMonth() + 1).padStart(2, '0');\n        const d = String(date.getDate()).padStart(2, '0');\n        const hh = String(date.getHours()).padStart(2, '0');\n        const mm = String(date.getMinutes()).padStart(2, '0');\n        return `${y}-${m}-${d} ${hh}:${mm}`;\n    }\n    // 将 \"HH:mm\" 或 \"YYYY-MM-DD HH:mm\" 格式解析为时间戳（毫秒）\n    static parseToMs(ts) {\n        if (!ts)\n            return Number.NEGATIVE_INFINITY;\n        const s = ts.trim();\n        // 匹配完整日期时间格式 \"YYYY-MM-DD HH:mm\"\n        const fullMatch = s.match(/^(\\d{4})-(\\d{2})-(\\d{2})[ T](\\d{2}):(\\d{2})$/);\n        if (fullMatch) {\n            const [, y, mo, d, hh, mm] = fullMatch;\n            const dt = new Date(parseInt(y, 10), parseInt(mo, 10) - 1, parseInt(d, 10), parseInt(hh, 10), parseInt(mm, 10), 0, 0);\n            return dt.getTime();\n        }\n        // 匹配简短时间格式 \"HH:mm\"\n        const shortMatch = s.match(/^(\\d{2}):(\\d{2})$/);\n        if (shortMatch) {\n            const [, hh, mm] = shortMatch;\n            // 使用今天的日期 + 指定时间\n            const today = new Date();\n            const dt = new Date(today.getFullYear(), today.getMonth(), today.getDate(), parseInt(hh, 10), parseInt(mm, 10), 0, 0);\n            return dt.getTime();\n        }\n        // 尝试其他格式\n        const d2 = new Date(s);\n        return isNaN(d2.getTime()) ? Number.NEGATIVE_INFINITY : d2.getTime();\n    }\n    /**\n     * 简单哈希函数\n     * @param str 输入字符串\n     * @returns 哈希值\n     */\n    static simpleHash(str) {\n        let hash = 0;\n        for (let i = 0; i < str.length; i++) {\n            const char = str.charCodeAt(i);\n            hash = (hash << 5) - hash + char;\n            hash = hash & hash; // 转换为32位整数\n        }\n        return Math.abs(hash);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvcGFyc2Vycy9EYXRhQ29udmVydGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7R0FHRztBQUV5RDtBQUk1RCxpQ0FBaUM7QUFDakMsOENBQThDO0FBQzlDLElBQUksbUJBQW1CLEdBQTBCLElBQUksQ0FBQztBQUN0RCxJQUFJLDhCQUE4QixHQUFtQyxJQUFJLENBQUM7QUFFMUUsS0FBSyxVQUFVLHNCQUFzQjtJQUNuQyxJQUFJLENBQUMsOEJBQThCLEVBQUUsQ0FBQztRQUNwQyw4QkFBOEIsR0FBRyxDQUFDLEtBQUssSUFBSSxFQUFFO1lBQzNDLE1BQU0sT0FBTyxHQUFHLElBQUksb0VBQWMsRUFBRSxDQUFDO1lBQ3JDLGlEQUFpRDtZQUNqRCxnQkFBZ0I7WUFDaEIsTUFBTSxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUN2RCxPQUFPLENBQUMsR0FBRyxDQUFDLG9DQUFvQyxDQUFDLENBQUM7WUFDbEQsbUJBQW1CLEdBQUcsT0FBTyxDQUFDO1lBQzlCLE9BQU8sT0FBTyxDQUFDO1FBQ2pCLENBQUMsQ0FBQyxFQUFFLENBQUM7SUFDUCxDQUFDO0lBQ0QsT0FBTyw4QkFBOEIsQ0FBQztBQUN4QyxDQUFDO0FBRUQ7Ozs7O0dBS0c7QUFDSCxTQUFTLDBCQUEwQixDQUFDLElBQVk7SUFDOUMsSUFBSSxDQUFDO1FBQ0gsNkJBQTZCO1FBQzdCLElBQUksbUJBQW1CLEVBQUUsQ0FBQztZQUN4QixNQUFNLEVBQUUsR0FBRyxtQkFBbUIsQ0FBQztZQUUvQix5Q0FBeUM7WUFDekMsTUFBTSxjQUFjLEdBQUcsRUFBRSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2pELElBQUksY0FBYyxJQUFJLGNBQWMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLHFCQUFxQixDQUFDLElBQUksQ0FB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QUUsRUFBRSxDQUFDLEVBQ2hCLENBQUMsRUFDRCxDQUFDLENBQ0YsQ0FBQztZQUNGLE9BQU8sRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ3RCLENBQUM7UUFFRCxTQUFTO1FBQ1QsTUFBTSxFQUFFLEdBQUcsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkIsT0FBTyxLQUFLLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQ3ZFLENBQUM7SUFFRDs7OztPQUlHO0lBQ0ssTUFBTSxDQUFDLFVBQVUsQ0FBQyxHQUFXO1FBQ25DLElBQUksSUFBSSxHQUFHLENBQUMsQ0FBQztRQUNiLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7WUFDcEMsTUFBTSxJQUFJLEdBQUcsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQztZQUNqQyxJQUFJLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDLFdBQVc7UUFDakMsQ0FBQztRQUNELE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN4QixDQUFDO0NBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WkmuS6keeGii/lpIfku70v57uZcm92b+eahC9tb2R1bGVzL3BhcnNlcnMvRGF0YUNvbnZlcnRlci50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIOaVsOaNrui9rOaNouWZqFxyXG4gKiDlsIbop6PmnpDlh7rnmoTljp/lp4vmlbDmja7ovazmjaLkuLrnjrDmnInmqKHlnZfkvb/nlKjnmoTmlbDmja7moLzlvI9cclxuICovXHJcblxyXG5pbXBvcnQgeyBDb250YWN0TWFuYWdlciB9IGZyb20gJy4uL2NoYXRMaXN0L2NvbnRhY3RNYW5hZ2VyJztcclxuaW1wb3J0IHsgRHluYW1pY3NDb21tZW50LCBEeW5hbWljc0RhdGEsIER5bmFtaWNzUG9zdCB9IGZyb20gJy4uL2R5bmFtaWNzL3R5cGVzJztcclxuaW1wb3J0IHsgUmF3Q29tbWVudERhdGEsIFJhd1Bvc3REYXRhIH0gZnJvbSAnLi90eXBlcyc7XHJcblxyXG4vLyDigJTigJQgRHluYW1pY3MvQ29udGFjdHMg5aS05YOP57uf5LiA6Kej5p6QIOKAlOKAlFxyXG4vLyDkvb/nlKjkuIDkuKrmqKHlnZfnuqfnmoQgQ29udGFjdE1hbmFnZXIg5a6e5L6L77yI5oeS5Yqg6L2977yJ77yM6YG/5YWN5Zyo6Kej5p6Q5pyf6Ze06YeN5aSN5Yib5bu6XHJcbmxldCBfX2RjX2NvbnRhY3RNYW5hZ2VyOiBDb250YWN0TWFuYWdlciB8IG51bGwgPSBudWxsO1xyXG5sZXQgX19kY19jb250YWN0TWFuYWdlckluaXRQcm9taXNlOiBQcm9taXNlPENvbnRhY3RNYW5hZ2VyPiB8IG51bGwgPSBudWxsO1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gX19kY19nZXRDb250YWN0TWFuYWdlcigpOiBQcm9taXNlPENvbnRhY3RNYW5hZ2VyPiB7XHJcbiAgaWYgKCFfX2RjX2NvbnRhY3RNYW5hZ2VySW5pdFByb21pc2UpIHtcclxuICAgIF9fZGNfY29udGFjdE1hbmFnZXJJbml0UHJvbWlzZSA9IChhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgQ29udGFjdE1hbmFnZXIoKTtcclxuICAgICAgLy8gQ29udGFjdE1hbmFnZXIg55qE5p6E6YCg5Ye95pWw5bey57uP6LCD55So5LqGIGluaXRpYWxpemUoKe+8jOS4jemcgOimgemHjeWkjeWKoOi9vVxyXG4gICAgICAvLyDnrYnlvoXkuIDlsI/mrrXml7bpl7TorqnliJ3lp4vljJblrozmiJBcclxuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMCkpO1xyXG4gICAgICBjb25zb2xlLmxvZygnW0RhdGFDb252ZXJ0ZXJdIENvbnRhY3RNYW5hZ2VyIOW3suWIm+W7uicpO1xyXG4gICAgICBfX2RjX2NvbnRhY3RNYW5hZ2VyID0gbWFuYWdlcjtcclxuICAgICAgcmV0dXJuIG1hbmFnZXI7XHJcbiAgICB9KSgpO1xyXG4gIH1cclxuICByZXR1cm4gX19kY19jb250YWN0TWFuYWdlckluaXRQcm9taXNlO1xyXG59XHJcblxyXG4vKipcclxuICog5qC55o2u6IGU57O75Lq65ZCN56ew6Kej5p6Q5aS05YOP77yM5LyY5YWI5LiO6YCa6K6v5b2VL+S4lueVjOS5puS/neaMgeS4gOiHtFxyXG4gKiAxKSDpgJrorq/lvZXkuK3lt7LmnInnmoTlpLTlg4/vvIjnlKjmiLfoh6rlrprkuYnkvJjlhYjvvIlcclxuICogMikg5LiW55WM5LmmL+inkuiJsuS4k+eUqOe8k+WtmOWktOWDj1xyXG4gKiAzKSDlhZzlupXpu5jorqTlpLTlg4/vvIjpnZ7pmo/mnLrvvIzkv53or4HnqLPlrprvvIlcclxuICovXHJcbmZ1bmN0aW9uIHJlc29sdmVDb250YWN0QXZhdGFyQnlOYW1lKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIOWwneivleWQjOatpeiOt+WPluW3suWIneWni+WMlueahCBDb250YWN0TWFuYWdlclxyXG4gICAgaWYgKF9fZGNfY29udGFjdE1hbmFnZXIpIHtcclxuICAgICAgY29uc3QgY20gPSBfX2RjX2NvbnRhY3RNYW5hZ2VyO1xyXG5cclxuICAgICAgLy8gMSkg5LiW55WM5LmmL+inkuiJsuS4k+eUqOe8k+WtmO+8iOS8mOWFiO+8muWMheWQq+eUqOaIt+WcqOiBlOezu+S6uue8lui+keaXtuWGmeWFpeeahOinkuiJsuS4k+eUqOWktOWDj++8iVxyXG4gICAgICBjb25zdCBsb3JlYm9va0F2YXRhciA9IGNtLmdldENvbnRhY3RBdmF0YXIobmFtZSk7XHJcbiAgICAgIGlmIChsb3JlYm9va0F2YXRhciAmJiBsb3JlYm9va0F2YXRhci50cmltKCkgJiYgIS91c2VyLWRlZmF1bHRcXC5wbmckL2kudGVzdChsb3JlYm9va0F2YXRhcikpIHtcclxuICAgICAgICByZXR1cm4gbG9yZWJvb2tBdmF0YXIudHJpbSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyAyKSDpgJrorq/lvZXlhoXlrZjlv6vnhafvvIjlj6/og73lrZjlnKjpmYjml6fmlbDmja7vvIzku4XlnKjmnKrlkb3kuK3kuJPnlKjnvJPlrZjml7bkvZzkuLrpmY3nuqfvvIlcclxuICAgICAgY29uc3QgY29udGFjdCA9IGNtLmdldEFsbENvbnRhY3RzKCkuZmluZChjID0+IGMubmFtZSA9PT0gbmFtZSk7XHJcbiAgICAgIGlmIChjb250YWN0Py5hdmF0YXIgJiYgY29udGFjdC5hdmF0YXIudHJpbSgpKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnRhY3QuYXZhdGFyLnRyaW0oKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gQ29udGFjdE1hbmFnZXIg6L+Y5pyq5Yid5aeL5YyW77yM6Kem5Y+R5byC5q2l5Yid5aeL5YyWXHJcbiAgICAgIC8vIOi/memHjOaIkeS7rOiusOW9leS4gOS4i+acquWIneWni+WMlueahOaDheWGte+8jOaWueS+v+iwg+ivlVxyXG4gICAgICBjb25zb2xlLndhcm4oYFtEYXRhQ29udmVydGVyXSDlsJ3or5Xojrflj5YgXCIke25hbWV9XCIg55qE5aS05YOP5pe2IENvbnRhY3RNYW5hZ2VyIOacquWIneWni+WMlu+8jOWwhuS9v+eUqOm7mOiupOWktOWDj2ApO1xyXG4gICAgICBcclxuICAgICAgLy8g6Kem5Y+R5byC5q2l5Yid5aeL5YyW5Lul5L6/5LiL5qyh5L2/55SoXHJcbiAgICAgIF9fZGNfZ2V0Q29udGFjdE1hbmFnZXIoKS5jYXRjaChlID0+IHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ1tEYXRhQ29udmVydGVyXSDlvILmraXliJ3lp4vljJYgQ29udGFjdE1hbmFnZXIg5aSx6LSlOicsIGUpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICAvLyDlv73nlaXop6PmnpDov4fnqIvnmoTku7vkvZXplJnor6/vvIzotbDlhZzlupVcclxuICAgIGNvbnNvbGUud2FybignW0RhdGFDb252ZXJ0ZXJdIOino+aekOWktOWDj+Wksei0pTonLCBlKTtcclxuICB9XHJcblxyXG4gIC8vIDMpIOWFnOW6le+8mueos+WumueahOm7mOiupOWktOWDj++8iOmBv+WFjVwi6ZqP5py6XCLvvIlcclxuICByZXR1cm4gJ2h0dHBzOi8vZmlsZXMuY2F0Ym94Lm1vZS91OGNjeTUuanBnJztcclxufVxyXG5cclxuLyoqXHJcbiAqIOWIneWni+WMliBDb250YWN0TWFuYWdlcu+8iOWcqOWKqOaAgeeuoeeQhuWZqOWIneWni+WMluaXtuiwg+eUqO+8iVxyXG4gKiDnoa7kv50gQ29udGFjdE1hbmFnZXIg5bey5a6M5YWo5Yid5aeL5YyW5bm25Yqg6L295LqG6IGU57O75Lq65pWw5o2uXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZUNvbnRhY3RNYW5hZ2VyKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gIC8vIOWPquWcqOacquWIneWni+WMluaXtuaJjeWIneWni+WMlu+8jOmBv+WFjemHjeWkjeWKoOi9vVxyXG4gIGlmICghX19kY19jb250YWN0TWFuYWdlcikge1xyXG4gICAgYXdhaXQgX19kY19nZXRDb250YWN0TWFuYWdlcigpO1xyXG4gICAgY29uc29sZS5sb2coJ1tEYXRhQ29udmVydGVyXSBDb250YWN0TWFuYWdlciDpppbmrKHliJ3lp4vljJblrozmiJAnKTtcclxuICB9IGVsc2Uge1xyXG4gICAgY29uc29sZS5sb2coJ1tEYXRhQ29udmVydGVyXSBDb250YWN0TWFuYWdlciDlt7LliJ3lp4vljJbvvIzot7Pov4fph43lpI3liqDovb0nKTtcclxuICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgRGF0YUNvbnZlcnRlciB7XHJcbiAgLyoqXHJcbiAgICog6L2s5o2i5Yqo5oCB5pWw5o2uXHJcbiAgICogQHBhcmFtIHJhd1Bvc3RzIOWOn+Wni+WKqOaAgeaVsOaNrlxyXG4gICAqIEBwYXJhbSBjdXJyZW50VXNlciDlvZPliY3nlKjmiLfkv6Hmga/vvIjlj6/pgInvvIlcclxuICAgKiBAcmV0dXJucyDliqjmgIHmqKHlnZfmlbDmja7moLzlvI9cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGNvbnZlcnREeW5hbWljc0RhdGEoXHJcbiAgICByYXdQb3N0czogUmF3UG9zdERhdGFbXSxcclxuICAgIGN1cnJlbnRVc2VyPzogeyBuYW1lOiBzdHJpbmc7IGF2YXRhcjogc3RyaW5nIH0sXHJcbiAgKTogRHluYW1pY3NEYXRhIHtcclxuICAgIGNvbnN0IGRlZmF1bHRVc2VyID0gY3VycmVudFVzZXIgfHwge1xyXG4gICAgICBuYW1lOiAn5aSa5LqR54aKJyxcclxuICAgICAgYXZhdGFyOiAnaHR0cHM6Ly9maWxlcy5jYXRib3gubW9lL3U4Y2N5NS5qcGcnLFxyXG4gICAgfTtcclxuXHJcbiAgICAvLyDmjInmpbzlsYLlgJLluo/mjpLluo/vvIjmpbzlsYLlpKfnmoTlnKjliY3vvInvvIzmpbzlsYLlhoXmjInnvJblj7flgJLluo9cclxuICAgIGNvbnN0IHNvcnRlZFBvc3RzID0gWy4uLnJhd1Bvc3RzXS5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgIC8vIOmmluWFiOaMiealvOWxgklE5YCS5bqP77yI5aSn5qW85bGC5Zyo5YmN77yJXHJcbiAgICAgIGNvbnN0IGFNZXNzYWdlSWQgPSB0eXBlb2YgYS5tZXNzYWdlSWQgPT09ICdudW1iZXInID8gYS5tZXNzYWdlSWQgOiBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XHJcbiAgICAgIGNvbnN0IGJNZXNzYWdlSWQgPSB0eXBlb2YgYi5tZXNzYWdlSWQgPT09ICdudW1iZXInID8gYi5tZXNzYWdlSWQgOiBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoYk1lc3NhZ2VJZCAhPT0gYU1lc3NhZ2VJZCkge1xyXG4gICAgICAgIHJldHVybiBiTWVzc2FnZUlkIC0gYU1lc3NhZ2VJZDsgLy8g5qW85bGC5YCS5bqPXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIOWQjOS4gOalvOWxguWGheaMiee8luWPt+WAkuW6j++8iOWkp+e8luWPt+WcqOWJje+8iVxyXG4gICAgICBjb25zdCBhTm8gPSB0eXBlb2YgYS5ubyA9PT0gJ251bWJlcicgPyBhLm5vIDogTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZO1xyXG4gICAgICBjb25zdCBiTm8gPSB0eXBlb2YgYi5ubyA9PT0gJ251bWJlcicgPyBiLm5vIDogTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZO1xyXG4gICAgICByZXR1cm4gYk5vIC0gYU5vO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgcG9zdHM6IER5bmFtaWNzUG9zdFtdID0gc29ydGVkUG9zdHMubWFwKChwb3N0LCBpbmRleCkgPT5cclxuICAgICAgdGhpcy5jb252ZXJ0UG9zdFRvRHluYW1pY3MocG9zdCwgZGVmYXVsdFVzZXIsIGluZGV4KSxcclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcG9zdHMsXHJcbiAgICAgIGN1cnJlbnRVc2VyOiBkZWZhdWx0VXNlcixcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDovazmjaLliqjmgIHmnaHnm67kuLrliqjmgIHmoLzlvI9cclxuICAgKiBAcGFyYW0gcmF3UG9zdCDljp/lp4vliqjmgIHmlbDmja5cclxuICAgKiBAcGFyYW0gdXNlciDnlKjmiLfkv6Hmga9cclxuICAgKiBAcGFyYW0gaW5kZXgg57Si5byVXHJcbiAgICogQHJldHVybnMg5Yqo5oCB5pWw5o2uXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgY29udmVydFBvc3RUb0R5bmFtaWNzKFxyXG4gICAgcmF3UG9zdDogUmF3UG9zdERhdGEsXHJcbiAgICB1c2VyOiB7IG5hbWU6IHN0cmluZzsgYXZhdGFyOiBzdHJpbmcgfSxcclxuICAgIGluZGV4OiBudW1iZXIsXHJcbiAgKTogRHluYW1pY3NQb3N0IHtcclxuICAgIC8vIOS9v+eUqOS9nOiAheWQjeaIlum7mOiupOeUqOaIt1xyXG4gICAgY29uc3QgYXV0aG9yTmFtZSA9IHJhd1Bvc3QuYXV0aG9yTmFtZSB8fCB1c2VyLm5hbWU7XHJcblxyXG4gICAgY29uc3QgcG9zdDogRHluYW1pY3NQb3N0ID0ge1xyXG4gICAgICBpZDogcmF3UG9zdC5ubyAhPT0gdW5kZWZpbmVkID8gYGR5bmFtaWNzXyR7cmF3UG9zdC5ub31gIDogYGR5bmFtaWNzXyR7RGF0ZS5ub3coKX1fJHtpbmRleH1gLFxyXG4gICAgICBhdXRob3I6IHtcclxuICAgICAgICBuYW1lOiBhdXRob3JOYW1lLFxyXG4gICAgICAgIHVzZXJuYW1lOiBgQCR7YXV0aG9yTmFtZS50b0xvd2VyQ2FzZSgpfWAsXHJcbiAgICAgICAgYXZhdGFyOiByZXNvbHZlQ29udGFjdEF2YXRhckJ5TmFtZShhdXRob3JOYW1lKSxcclxuICAgICAgfSxcclxuICAgICAgY29udGVudDogcmF3UG9zdC5jb250ZW50LFxyXG4gICAgICBpbWFnZTogcmF3UG9zdC5pbWFnZURlc2NyaXB0aW9uID8gdGhpcy5nZW5lcmF0ZUltYWdlVXJsKHJhd1Bvc3QuaW1hZ2VEZXNjcmlwdGlvbikgOiByYXdQb3N0LmltYWdlVXJsLFxyXG4gICAgICBpbWFnZURlc2NyaXB0aW9uOiByYXdQb3N0LmltYWdlRGVzY3JpcHRpb24sXHJcbiAgICAgIHRpbWVzdGFtcDogdGhpcy5waWNrVGltZXN0YW1wKHJhd1Bvc3QudGltZXN0YW1wLCBpbmRleCksXHJcbiAgICAgIGFjdGlvbnM6IHtcclxuICAgICAgICBsaWtlczogcmF3UG9zdC5saWtlc0NvdW50LFxyXG4gICAgICAgIHNoYXJlczogcmF3UG9zdC5zaGFyZXNDb3VudCxcclxuICAgICAgICBib29rbWFya3M6IE1hdGguZmxvb3IocmF3UG9zdC5saWtlc0NvdW50ICogMC4zKSxcclxuICAgICAgfSxcclxuICAgICAgbm86IHJhd1Bvc3Qubm8sXHJcbiAgICAgIGxpa2VkQnk6IHJhd1Bvc3QubGlrZWRCeT8ubWFwKG5hbWUgPT4gKHsgbmFtZSwgdXNlcm5hbWU6IGBAJHtuYW1lLnRvTG93ZXJDYXNlKCl9YCB9KSksXHJcbiAgICAgIGNvbW1lbnRzOiByYXdQb3N0LmNvbW1lbnRzLm1hcCgoY29tbWVudCwgY29tbWVudEluZGV4KSA9PiB0aGlzLmNvbnZlcnRDb21tZW50VG9EeW5hbWljcyhjb21tZW50LCBjb21tZW50SW5kZXgpKSxcclxuICAgIH07XHJcblxyXG4gICAgLy8g5Lyg6YCS5qW85bGCSUTvvIjlpoLmnpzlrZjlnKjvvIlcclxuICAgIGlmICgocmF3UG9zdCBhcyBhbnkpLm1lc3NhZ2VJZCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIChwb3N0IGFzIGFueSkubWVzc2FnZUlkID0gKHJhd1Bvc3QgYXMgYW55KS5tZXNzYWdlSWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHBvc3Q7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDovazmjaLor4TorrrmlbDmja7vvIjliqjmgIHmoLzlvI/vvIlcclxuICAgKiBAcGFyYW0gcmF3Q29tbWVudCDljp/lp4vor4TorrrmlbDmja5cclxuICAgKiBAcGFyYW0gaW5kZXgg57Si5byVXHJcbiAgICogQHJldHVybnMg5Yqo5oCB6K+E6K665pWw5o2uXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgY29udmVydENvbW1lbnRUb0R5bmFtaWNzKHJhd0NvbW1lbnQ6IFJhd0NvbW1lbnREYXRhLCBpbmRleDogbnVtYmVyKTogRHluYW1pY3NDb21tZW50IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlkOiBgZHluYW1pY3NfY29tbWVudF8ke0RhdGUubm93KCl9XyR7aW5kZXh9YCxcclxuICAgICAgYXV0aG9yOiB7XHJcbiAgICAgICAgbmFtZTogcmF3Q29tbWVudC5hdXRob3JOYW1lLFxyXG4gICAgICAgIGF2YXRhcjogcmVzb2x2ZUNvbnRhY3RBdmF0YXJCeU5hbWUocmF3Q29tbWVudC5hdXRob3JOYW1lKSxcclxuICAgICAgfSxcclxuICAgICAgY29udGVudDogcmF3Q29tbWVudC5jb250ZW50LFxyXG4gICAgICB0aW1lc3RhbXA6IHRoaXMuZ2VuZXJhdGVUaW1lc3RhbXAoaW5kZXgsIHRydWUpLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOeUn+aIkOWbvueJh1VSTFxyXG4gICAqIEBwYXJhbSBkZXNjcmlwdGlvbiDlm77niYfmj4/ov7BcclxuICAgKiBAcmV0dXJucyDlm77niYdVUkxcclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBnZW5lcmF0ZUltYWdlVXJsKGRlc2NyaXB0aW9uOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgLy8g6L+Z6YeM5Y+v5Lul5qC55o2u5o+P6L+w55Sf5oiQ5a+55bqU55qE5Zu+54mHVVJMXHJcbiAgICAvLyDnm67liY3kvb/nlKjpu5jorqTlm77niYfvvIzlrp7pmYXkvb/nlKjml7blj6/ku6Xpm4bmiJDlm77niYfnlJ/miJDmnI3liqFcclxuICAgIC8vIOagueaNrueUqOaIt+imgeaxgu+8jOmBrue9qeaXtuWPquS9v+eUqOi/meS4gOW8oOWbvueJh1xyXG4gICAgcmV0dXJuICdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvOG1qdmRnLmpwZyc7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDnlJ/miJDlpLTlg49VUkxcclxuICAgKiBAcGFyYW0gbmFtZSDnlKjmiLflkI1cclxuICAgKiBAcmV0dXJucyDlpLTlg49VUkxcclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBnZW5lcmF0ZUF2YXRhclVybChuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgZGVmYXVsdEF2YXRhcnMgPSBbXHJcbiAgICAgICdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvdThjY3k1LmpwZycsXHJcbiAgICAgICdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UveDJlamJjLmpwZycsXHJcbiAgICAgICdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvdHcyeWdmLmpwZycsXHJcbiAgICBdO1xyXG5cclxuICAgIC8vIOagueaNrueUqOaIt+WQjeeahOWTiOW4jOWAvOmAieaLqeWktOWDj1xyXG4gICAgY29uc3QgaGFzaCA9IHRoaXMuc2ltcGxlSGFzaChuYW1lKTtcclxuICAgIHJldHVybiBkZWZhdWx0QXZhdGFyc1toYXNoICUgZGVmYXVsdEF2YXRhcnMubGVuZ3RoXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOeUn+aIkOaXtumXtOaIs1xyXG4gICAqIEBwYXJhbSBpbmRleCDntKLlvJVcclxuICAgKiBAcGFyYW0gaXNDb21tZW50IOaYr+WQpuS4uuivhOiuulxyXG4gICAqIEByZXR1cm5zIOaXtumXtOaIs+Wtl+espuS4slxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGdlbmVyYXRlVGltZXN0YW1wKGluZGV4OiBudW1iZXIsIGlzQ29tbWVudDogYm9vbGVhbiA9IGZhbHNlKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICBjb25zdCBvZmZzZXRNaW51dGVzID0gaXNDb21tZW50ID8gKGluZGV4ICsgMSkgKiA1IDogKGluZGV4ICsgMSkgKiAzMDsgLy8g6K+E6K666Ze06ZqUNeWIhumSn++8jOWKqOaAgemXtOmalDMw5YiG6ZKfXHJcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUobm93LmdldFRpbWUoKSAtIG9mZnNldE1pbnV0ZXMgKiA2MCAqIDEwMDApO1xyXG4gICAgcmV0dXJuIHRoaXMuZm9ybWF0WU1ESE0oZGF0ZSk7XHJcbiAgfVxyXG5cclxuICAvLyDpgInmi6nlubbop4TojIPljJbml7bpl7TmiLPvvJpcclxuICAvLyAtIOS8mOWFiOS9v+eUqOino+aekOW+l+WIsOeahCByYXdUc++8iFlZWVktTU0tREQgSEg6bW0g5oiWIElTTy9JU08tbGlrZe+8iVxyXG4gIC8vIC0g5pSv5oyBIEhIOm1tIOagvOW8j++8iOihpeWFheS7iuWkqeeahOaXpeacn++8iVxyXG4gIC8vIC0g5YW25qyh5bCd6K+VIERhdGUg5Y+v6Kej5p6Q55qE5a2X56ym5LiyXHJcbiAgLy8gLSDmnIDlkI7lm57pgIDliLDnm7jlr7nlvZPliY3ml7bpl7TnlJ/miJDnmoTml7bpl7TmiLNcclxuICBwcml2YXRlIHN0YXRpYyBwaWNrVGltZXN0YW1wKHJhd1RzOiBzdHJpbmcgfCB1bmRlZmluZWQsIGluZGV4OiBudW1iZXIsIGlzQ29tbWVudDogYm9vbGVhbiA9IGZhbHNlKTogc3RyaW5nIHtcclxuICAgIGlmICh0eXBlb2YgcmF3VHMgPT09ICdzdHJpbmcnICYmIHJhd1RzLnRyaW0oKSkge1xyXG4gICAgICBjb25zdCB0cyA9IHJhd1RzLnRyaW0oKTtcclxuICAgICAgLy8g5bey5piv5qCH5YeGIFwiWVlZWS1NTS1ERCBISDptbVwiXHJcbiAgICAgIGlmICgvXlxcZHs0fS1cXGR7Mn0tXFxkezJ9IFxcZHsyfTpcXGR7Mn0kLy50ZXN0KHRzKSkge1xyXG4gICAgICAgIHJldHVybiB0cztcclxuICAgICAgfVxyXG4gICAgICAvLyBISDptbSDmoLzlvI8gLSDooaXlhYXku4rlpKnnmoTml6XmnJ9cclxuICAgICAgaWYgKC9eXFxkezJ9OlxcZHsyfSQvLnRlc3QodHMpKSB7XHJcbiAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IHllYXIgPSB0b2RheS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgIGNvbnN0IG1vbnRoID0gU3RyaW5nKHRvZGF5LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xyXG4gICAgICAgIGNvbnN0IGRheSA9IFN0cmluZyh0b2RheS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgICAgICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fSAke3RzfWA7XHJcbiAgICAgIH1cclxuICAgICAgLy8gSVNPLWxpa2UgXCJZWVlZLU1NLUREVEhIOm1tLi4uXCIgLT4g6KeE6IyD5YyW5Li6IFwiWVlZWS1NTS1ERCBISDptbVwiXHJcbiAgICAgIGlmICgvXlxcZHs0fS1cXGR7Mn0tXFxkezJ9VFxcZHsyfTpcXGR7Mn0vLnRlc3QodHMpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzLnJlcGxhY2UoJ1QnLCAnICcpLnNsaWNlKDAsIDE2KTtcclxuICAgICAgfVxyXG4gICAgICAvLyDlhbbku5blj6/ooqsgRGF0ZSDop6PmnpDnmoTlrZfnrKbkuLJcclxuICAgICAgY29uc3QgZCA9IG5ldyBEYXRlKHRzKTtcclxuICAgICAgaWYgKCFpc05hTihkLmdldFRpbWUoKSkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRZTURITShkKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8g5Zue6YCAXHJcbiAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZVRpbWVzdGFtcChpbmRleCwgaXNDb21tZW50KTtcclxuICB9XHJcblxyXG4gIC8vIOi+k+WHuuacrOWcsOaXtumXtCBcIllZWVktTU0tREQgSEg6bW1cIlxyXG4gIHByaXZhdGUgc3RhdGljIGZvcm1hdFlNREhNKGRhdGU6IERhdGUpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgeSA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgIGNvbnN0IG0gPSBTdHJpbmcoZGF0ZS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTtcclxuICAgIGNvbnN0IGQgPSBTdHJpbmcoZGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgICBjb25zdCBoaCA9IFN0cmluZyhkYXRlLmdldEhvdXJzKCkpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgICBjb25zdCBtbSA9IFN0cmluZyhkYXRlLmdldE1pbnV0ZXMoKSkucGFkU3RhcnQoMiwgJzAnKTtcclxuICAgIHJldHVybiBgJHt5fS0ke219LSR7ZH0gJHtoaH06JHttbX1gO1xyXG4gIH1cclxuXHJcbiAgLy8g5bCGIFwiSEg6bW1cIiDmiJYgXCJZWVlZLU1NLUREIEhIOm1tXCIg5qC85byP6Kej5p6Q5Li65pe26Ze05oiz77yI5q+r56eS77yJXHJcbiAgcHJpdmF0ZSBzdGF0aWMgcGFyc2VUb01zKHRzPzogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgIGlmICghdHMpIHJldHVybiBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XHJcbiAgICBjb25zdCBzID0gdHMudHJpbSgpO1xyXG5cclxuICAgIC8vIOWMuemFjeWujOaVtOaXpeacn+aXtumXtOagvOW8jyBcIllZWVktTU0tREQgSEg6bW1cIlxyXG4gICAgY29uc3QgZnVsbE1hdGNoID0gcy5tYXRjaCgvXihcXGR7NH0pLShcXGR7Mn0pLShcXGR7Mn0pWyBUXShcXGR7Mn0pOihcXGR7Mn0pJC8pO1xyXG4gICAgaWYgKGZ1bGxNYXRjaCkge1xyXG4gICAgICBjb25zdCBbLCB5LCBtbywgZCwgaGgsIG1tXSA9IGZ1bGxNYXRjaDtcclxuICAgICAgY29uc3QgZHQgPSBuZXcgRGF0ZShcclxuICAgICAgICBwYXJzZUludCh5LCAxMCksXHJcbiAgICAgICAgcGFyc2VJbnQobW8sIDEwKSAtIDEsXHJcbiAgICAgICAgcGFyc2VJbnQoZCwgMTApLFxyXG4gICAgICAgIHBhcnNlSW50KGhoLCAxMCksXHJcbiAgICAgICAgcGFyc2VJbnQobW0sIDEwKSxcclxuICAgICAgICAwLFxyXG4gICAgICAgIDAsXHJcbiAgICAgICk7XHJcbiAgICAgIHJldHVybiBkdC5nZXRUaW1lKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5Yy56YWN566A55+t5pe26Ze05qC85byPIFwiSEg6bW1cIlxyXG4gICAgY29uc3Qgc2hvcnRNYXRjaCA9IHMubWF0Y2goL14oXFxkezJ9KTooXFxkezJ9KSQvKTtcclxuICAgIGlmIChzaG9ydE1hdGNoKSB7XHJcbiAgICAgIGNvbnN0IFssIGhoLCBtbV0gPSBzaG9ydE1hdGNoO1xyXG4gICAgICAvLyDkvb/nlKjku4rlpKnnmoTml6XmnJ8gKyDmjIflrprml7bpl7RcclxuICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICBjb25zdCBkdCA9IG5ldyBEYXRlKFxyXG4gICAgICAgIHRvZGF5LmdldEZ1bGxZZWFyKCksXHJcbiAgICAgICAgdG9kYXkuZ2V0TW9udGgoKSxcclxuICAgICAgICB0b2RheS5nZXREYXRlKCksXHJcbiAgICAgICAgcGFyc2VJbnQoaGgsIDEwKSxcclxuICAgICAgICBwYXJzZUludChtbSwgMTApLFxyXG4gICAgICAgIDAsXHJcbiAgICAgICAgMCxcclxuICAgICAgKTtcclxuICAgICAgcmV0dXJuIGR0LmdldFRpbWUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDlsJ3or5Xlhbbku5bmoLzlvI9cclxuICAgIGNvbnN0IGQyID0gbmV3IERhdGUocyk7XHJcbiAgICByZXR1cm4gaXNOYU4oZDIuZ2V0VGltZSgpKSA/IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSA6IGQyLmdldFRpbWUoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOeugOWNleWTiOW4jOWHveaVsFxyXG4gICAqIEBwYXJhbSBzdHIg6L6T5YWl5a2X56ym5LiyXHJcbiAgICogQHJldHVybnMg5ZOI5biM5YC8XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgc2ltcGxlSGFzaChzdHI6IHN0cmluZyk6IG51bWJlciB7XHJcbiAgICBsZXQgaGFzaCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCBjaGFyID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgIGhhc2ggPSAoaGFzaCA8PCA1KSAtIGhhc2ggKyBjaGFyO1xyXG4gICAgICBoYXNoID0gaGFzaCAmIGhhc2g7IC8vIOi9rOaNouS4ujMy5L2N5pW05pWwXHJcbiAgICB9XHJcbiAgICByZXR1cm4gTWF0aC5hYnMoaGFzaCk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/parsers/DataConverter.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/parsers/DataParser.ts": 
  /*!*********************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/parsers/DataParser.ts ***!
  \*********************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DataParser: () => (/* binding */ DataParser)\n/* harmony export */ });\n/**\n * 通用数据解析器基类\n * 提供基础的文本解析功能和错误处理机制\n */\nclass DataParser {\n    /**\n     * 提取标签块内容\n     * @param text 输入文本\n     * @param tagName 标签名称（如 \"个人主页\"）\n     * @returns 提取的内容，如果未找到返回null\n     */\n    extractTagBlock(text, tagName) {\n        const startTag = `[${tagName}]`;\n        const endTag = `[/${tagName}]`;\n        const startIndex = text.indexOf(startTag);\n        const endIndex = text.indexOf(endTag);\n        if (startIndex === -1 || endIndex === -1 || endIndex <= startIndex) {\n            return null;\n        }\n        return text.substring(startIndex + startTag.length, endIndex).trim();\n    }\n    /**\n     * 解析键值对\n     * @param text 输入文本\n     * @returns 键值对映射\n     */\n    parseKeyValuePairs(text) {\n        const pairs = new Map();\n        const lines = text.split('\\n');\n        for (const line of lines) {\n            const trimmedLine = line.trim();\n            if (!trimmedLine || trimmedLine.startsWith('动态：')) {\n                continue;\n            }\n            const colonIndex = trimmedLine.indexOf('：');\n            if (colonIndex > 0) {\n                const key = trimmedLine.substring(0, colonIndex).trim();\n                const value = trimmedLine.substring(colonIndex + 1).trim();\n                pairs.set(key, value);\n            }\n        }\n        return pairs;\n    }\n    // 旧的解析方法已移除，新解析逻辑在DynamicsParser中实现\n    /**\n     * 创建解析错误\n     * @param field 字段名\n     * @param message 错误信息\n     * @param position 错误位置（可选）\n     * @returns 解析错误对象\n     */\n    createError(field, message, position) {\n        return { field, message, position };\n    }\n    /**\n     * 安全解析整数\n     * @param value 字符串值\n     * @param defaultValue 默认值\n     * @returns 解析后的整数\n     */\n    safeParseInt(value, defaultValue = 0) {\n        const parsed = parseInt(value);\n        return isNaN(parsed) ? defaultValue : parsed;\n    }\n    /**\n     * 验证必填字段\n     * @param data 数据对象\n     * @param requiredFields 必填字段列表\n     * @returns 错误列表\n     */\n    validateRequiredFields(data, requiredFields) {\n        const errors = [];\n        for (const field of requiredFields) {\n            if (!data[field] || (typeof data[field] === 'string' && data[field].trim() === '')) {\n                errors.push(this.createError(field, `必填字段 \"${field}\" 缺失或为空`));\n            }\n        }\n        return errors;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvcGFyc2Vycy9EYXRhUGFyc2VyLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7O0dBR0c7QUFJSSxNQUFNLFVBQVU7SUFDckI7Ozs7O09BS0c7SUFDTyxlQUFlLENBQUMsSUFBWSxFQUFFLE9BQWU7UUFDckQsTUFBTSxRQUFRLEdBQUcsSUFBSSxPQUFPLEdBQUcsQ0FBQztRQUNoQyxNQUFNLE1BQU0sR0FBRyxLQUFLLE9BQU8sR0FBRyxDQUFDO1FBRS9CLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDMUMsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUV0QyxJQUFJLFVBQVUsS0FBSyxDQUFDLENBQUMsSUFBSSxRQUFRLEtBQUssQ0FBQyxDQUFDLElBQUksUUFBUSxJQUFJLFVBQVUsRUFBRSxDQUFDO1lBQ25FLE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUVELE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLEdBQUcsUUFBUSxDQUFDLE1BQU0sRUFBRSxRQUFRLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUN2RSxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNPLGtCQUFrQixDQUFDLElBQVk7UUFDdkMsTUFBTSxLQUFLLEdBQUcsSUFBSSxHQUFHLEVBQWtCLENBQUM7UUFDeEMsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUUvQixLQUFLLE1BQU0sSUFBSSxJQUFJLEtBQUssRUFBRSxDQUFDO1lBQ3pCLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUNoQyxJQUFJLENBQUMsV0FBVyxJQUFJLFdBQVcsQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztnQkFDbEQsU0FBUztZQUNYLENBQUM7WUFFRCxNQUFNLFVBQVUsR0FBRyxXQUFXLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzVDLElBQUksVUFBVSxHQUFHLENBQUMsRUFBRSxDQUFDO2dCQUNuQixNQUFNLEdBQUcsR0FBRyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxVQUFVLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztnQkFDeEQsTUFBTSxLQUFLLEdBQUcsV0FBVyxDQUFDLFNBQVMsQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7Z0JBQzNELEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQ3hCLENBQUM7UUFDSCxDQUFDO1FBRUQsT0FBTyxLQUFLLENBQUM7SUFDZixDQUFDO0lBRUQsb0NBQW9DO0lBRXBDOzs7Ozs7T0FNRztJQUNPLFdBQVcsQ0FBQyxLQUFhLEVBQUUsT0FBZSxFQUFFLFFBQWlCO1FBQ3JFLE9BQU8sRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxDQUFDO0lBQ3RDLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNPLFlBQVksQ0FBQyxLQUFhLEVBQUUsZUFBdUIsQ0FBQztRQUM1RCxNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDL0IsT0FBTyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO0lBQy9DLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNPLHNCQUFzQixDQUFDLElBQVMsRUFBRSxjQUF3QjtRQUNsRSxNQUFNLE1BQU0sR0FBaUIsRUFBRSxDQUFDO1FBRWhDLEtBQUssTUFBTSxLQUFLLElBQUksY0FBYyxFQUFFLENBQUM7WUFDbkMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLFFBQVEsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQztnQkFDbkYsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxTQUFTLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztZQUNoRSxDQUFDO1FBQ0gsQ0FBQztRQUVELE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7Q0FDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvcGFyc2Vycy9EYXRhUGFyc2VyLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICog6YCa55So5pWw5o2u6Kej5p6Q5Zmo5Z+657G7XHJcbiAqIOaPkOS+m+WfuuehgOeahOaWh+acrOino+aekOWKn+iDveWSjOmUmeivr+WkhOeQhuacuuWItlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFBhcnNlRXJyb3IsIFJhd0NvbW1lbnREYXRhLCBSYXdQb3N0RGF0YSB9IGZyb20gJy4vdHlwZXMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIERhdGFQYXJzZXIge1xyXG4gIC8qKlxyXG4gICAqIOaPkOWPluagh+etvuWdl+WGheWuuVxyXG4gICAqIEBwYXJhbSB0ZXh0IOi+k+WFpeaWh+acrFxyXG4gICAqIEBwYXJhbSB0YWdOYW1lIOagh+etvuWQjeensO+8iOWmgiBcIuS4quS6uuS4u+mhtVwi77yJXHJcbiAgICogQHJldHVybnMg5o+Q5Y+W55qE5YaF5a6577yM5aaC5p6c5pyq5om+5Yiw6L+U5ZuebnVsbFxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBleHRyYWN0VGFnQmxvY2sodGV4dDogc3RyaW5nLCB0YWdOYW1lOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcclxuICAgIGNvbnN0IHN0YXJ0VGFnID0gYFske3RhZ05hbWV9XWA7XHJcbiAgICBjb25zdCBlbmRUYWcgPSBgWy8ke3RhZ05hbWV9XWA7XHJcblxyXG4gICAgY29uc3Qgc3RhcnRJbmRleCA9IHRleHQuaW5kZXhPZihzdGFydFRhZyk7XHJcbiAgICBjb25zdCBlbmRJbmRleCA9IHRleHQuaW5kZXhPZihlbmRUYWcpO1xyXG5cclxuICAgIGlmIChzdGFydEluZGV4ID09PSAtMSB8fCBlbmRJbmRleCA9PT0gLTEgfHwgZW5kSW5kZXggPD0gc3RhcnRJbmRleCkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGV4dC5zdWJzdHJpbmcoc3RhcnRJbmRleCArIHN0YXJ0VGFnLmxlbmd0aCwgZW5kSW5kZXgpLnRyaW0oKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOino+aekOmUruWAvOWvuVxyXG4gICAqIEBwYXJhbSB0ZXh0IOi+k+WFpeaWh+acrFxyXG4gICAqIEByZXR1cm5zIOmUruWAvOWvueaYoOWwhFxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBwYXJzZUtleVZhbHVlUGFpcnModGV4dDogc3RyaW5nKTogTWFwPHN0cmluZywgc3RyaW5nPiB7XHJcbiAgICBjb25zdCBwYWlycyA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmc+KCk7XHJcbiAgICBjb25zdCBsaW5lcyA9IHRleHQuc3BsaXQoJ1xcbicpO1xyXG5cclxuICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xyXG4gICAgICBjb25zdCB0cmltbWVkTGluZSA9IGxpbmUudHJpbSgpO1xyXG4gICAgICBpZiAoIXRyaW1tZWRMaW5lIHx8IHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJ+WKqOaAge+8micpKSB7XHJcbiAgICAgICAgY29udGludWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGNvbG9uSW5kZXggPSB0cmltbWVkTGluZS5pbmRleE9mKCfvvJonKTtcclxuICAgICAgaWYgKGNvbG9uSW5kZXggPiAwKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gdHJpbW1lZExpbmUuc3Vic3RyaW5nKDAsIGNvbG9uSW5kZXgpLnRyaW0oKTtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IHRyaW1tZWRMaW5lLnN1YnN0cmluZyhjb2xvbkluZGV4ICsgMSkudHJpbSgpO1xyXG4gICAgICAgIHBhaXJzLnNldChrZXksIHZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBwYWlycztcclxuICB9XHJcblxyXG4gIC8vIOaXp+eahOino+aekOaWueazleW3suenu+mZpO+8jOaWsOino+aekOmAu+i+keWcqER5bmFtaWNzUGFyc2Vy5Lit5a6e546wXHJcblxyXG4gIC8qKlxyXG4gICAqIOWIm+W7uuino+aekOmUmeivr1xyXG4gICAqIEBwYXJhbSBmaWVsZCDlrZfmrrXlkI1cclxuICAgKiBAcGFyYW0gbWVzc2FnZSDplJnor6/kv6Hmga9cclxuICAgKiBAcGFyYW0gcG9zaXRpb24g6ZSZ6K+v5L2N572u77yI5Y+v6YCJ77yJXHJcbiAgICogQHJldHVybnMg6Kej5p6Q6ZSZ6K+v5a+56LGhXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIGNyZWF0ZUVycm9yKGZpZWxkOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgcG9zaXRpb24/OiBudW1iZXIpOiBQYXJzZUVycm9yIHtcclxuICAgIHJldHVybiB7IGZpZWxkLCBtZXNzYWdlLCBwb3NpdGlvbiB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5a6J5YWo6Kej5p6Q5pW05pWwXHJcbiAgICogQHBhcmFtIHZhbHVlIOWtl+espuS4suWAvFxyXG4gICAqIEBwYXJhbSBkZWZhdWx0VmFsdWUg6buY6K6k5YC8XHJcbiAgICogQHJldHVybnMg6Kej5p6Q5ZCO55qE5pW05pWwXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHNhZmVQYXJzZUludCh2YWx1ZTogc3RyaW5nLCBkZWZhdWx0VmFsdWU6IG51bWJlciA9IDApOiBudW1iZXIge1xyXG4gICAgY29uc3QgcGFyc2VkID0gcGFyc2VJbnQodmFsdWUpO1xyXG4gICAgcmV0dXJuIGlzTmFOKHBhcnNlZCkgPyBkZWZhdWx0VmFsdWUgOiBwYXJzZWQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDpqozor4Hlv4XloavlrZfmrrVcclxuICAgKiBAcGFyYW0gZGF0YSDmlbDmja7lr7nosaFcclxuICAgKiBAcGFyYW0gcmVxdWlyZWRGaWVsZHMg5b+F5aGr5a2X5q615YiX6KGoXHJcbiAgICogQHJldHVybnMg6ZSZ6K+v5YiX6KGoXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHZhbGlkYXRlUmVxdWlyZWRGaWVsZHMoZGF0YTogYW55LCByZXF1aXJlZEZpZWxkczogc3RyaW5nW10pOiBQYXJzZUVycm9yW10ge1xyXG4gICAgY29uc3QgZXJyb3JzOiBQYXJzZUVycm9yW10gPSBbXTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIHJlcXVpcmVkRmllbGRzKSB7XHJcbiAgICAgIGlmICghZGF0YVtmaWVsZF0gfHwgKHR5cGVvZiBkYXRhW2ZpZWxkXSA9PT0gJ3N0cmluZycgJiYgZGF0YVtmaWVsZF0udHJpbSgpID09PSAnJykpIHtcclxuICAgICAgICBlcnJvcnMucHVzaCh0aGlzLmNyZWF0ZUVycm9yKGZpZWxkLCBg5b+F5aGr5a2X5q61IFwiJHtmaWVsZH1cIiDnvLrlpLHmiJbkuLrnqbpgKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZXJyb3JzO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/parsers/DataParser.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/parsers/DynamicsBuilder.ts": 
  /*!**************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/parsers/DynamicsBuilder.ts ***!
  \**************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DynamicsBuilder: () => (/* binding */ DynamicsBuilder)\n/* harmony export */ });\n/**\n * 动态构建器\n * 将RawPostData数组构建为[动态]容器格式的字符串\n */\nclass DynamicsBuilder {\n    /**\n     * 构建动态容器内容\n     * @param dynamics 动态数据数组\n     * @returns 动态容器格式的字符串\n     */\n    static buildDynamicsContainer(dynamics) {\n        if (!dynamics || dynamics.length === 0) {\n            return '';\n        }\n        let content = '[动态]\\n';\n        // 按编号排序（如果有编号的话）\n        const sortedDynamics = [...dynamics].sort((a, b) => {\n            const aNo = a.no || 0;\n            const bNo = b.no || 0;\n            return aNo - bNo;\n        });\n        for (const post of sortedDynamics) {\n            // 构建动态条目\n            content += this.buildDynamicsEntry(post);\n            // 构建评论\n            if (post.comments && post.comments.length > 0) {\n                for (const comment of post.comments) {\n                    content += this.buildCommentEntry(post.no || 1, comment);\n                }\n            }\n            // 构建点赞\n            if (post.likedBy && post.likedBy.length > 0) {\n                for (const liker of post.likedBy) {\n                    content += this.buildLikeEntry(post.no || 1, liker, post.timestamp);\n                }\n            }\n        }\n        content += '[/动态]\\n';\n        return content;\n    }\n    /**\n     * 构建单个动态条目\n     * @param post 动态数据\n     * @returns 动态条目字符串\n     */\n    static buildDynamicsEntry(post) {\n        const no = post.no || 1;\n        const author = post.authorName || '多云熊';\n        const content = post.content || '';\n        const timestamp = post.timestamp || this.getCurrentTimestamp();\n        if (post.imageDescription) {\n            // 有图片描述的格式：[动态_1|作者|正文|图片描述|YYYY-MM-DD HH:mm]\n            return `[动态_${no}|${author}|${content}|${post.imageDescription}|${timestamp}]\\n`;\n        }\n        else {\n            // 无图片描述的格式：[动态_1|作者|正文|YYYY-MM-DD HH:mm]\n            return `[动态_${no}|${author}|${content}|${timestamp}]\\n`;\n        }\n    }\n    /**\n     * 构建评论条目\n     * @param targetNo 目标动态编号\n     * @param comment 评论数据\n     * @returns 评论条目字符串\n     */\n    static buildCommentEntry(targetNo, comment) {\n        const timestamp = this.getCurrentTimestamp();\n        // 处理回复格式（如果评论者名称包含\"回复\"）\n        let commenter = comment.authorName || '匿名用户';\n        let content = comment.content || '';\n        // 检查是否是回复格式：\"评论者 回复 被回复者\"\n        const replyMatch = commenter.match(/^(.+?)\\s+回复\\s+(.+)$/);\n        if (replyMatch) {\n            const [, actualCommenter, replyTarget] = replyMatch;\n            commenter = `${actualCommenter}@${replyTarget}`;\n        }\n        return `[评论_${targetNo}|${commenter}|${content}|${timestamp}]\\n`;\n    }\n    /**\n     * 构建点赞条目\n     * @param targetNo 目标动态编号\n     * @param liker 点赞者名称\n     * @param baseTimestamp 基础时间戳\n     * @returns 点赞条目字符串\n     */\n    static buildLikeEntry(targetNo, liker, baseTimestamp) {\n        const timestamp = baseTimestamp || this.getCurrentTimestamp();\n        return `[点赞_${targetNo}|${liker}|${timestamp}]\\n`;\n    }\n    /**\n     * 获取当前时间戳（HH:mm格式，与消息格式保持一致）\n     * @returns 格式化的时间戳\n     */\n    static getCurrentTimestamp() {\n        return new Date().toLocaleTimeString('zh-CN', {\n            hour: '2-digit',\n            minute: '2-digit',\n        });\n    }\n    /**\n     * 验证动态数据的完整性\n     * @param dynamics 动态数据数组\n     * @returns 验证结果\n     */\n    static validateDynamics(dynamics) {\n        const errors = [];\n        if (!Array.isArray(dynamics)) {\n            errors.push('动态数据必须是数组');\n            return { isValid: false, errors };\n        }\n        for (let i = 0; i < dynamics.length; i++) {\n            const post = dynamics[i];\n            if (!post.content || typeof post.content !== 'string') {\n                errors.push(`动态 ${i + 1}: 缺少有效的内容`);\n            }\n            if (post.no !== undefined && (typeof post.no !== 'number' || post.no < 1)) {\n                errors.push(`动态 ${i + 1}: 编号必须是正整数`);\n            }\n            if (post.authorName !== undefined && typeof post.authorName !== 'string') {\n                errors.push(`动态 ${i + 1}: 作者名称必须是字符串`);\n            }\n            if (post.comments && Array.isArray(post.comments)) {\n                for (let j = 0; j < post.comments.length; j++) {\n                    const comment = post.comments[j];\n                    if (!comment.content || typeof comment.content !== 'string') {\n                        errors.push(`动态 ${i + 1} 评论 ${j + 1}: 缺少有效的内容`);\n                    }\n                }\n            }\n        }\n        return {\n            isValid: errors.length === 0,\n            errors,\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvcGFyc2Vycy9EeW5hbWljc0J1aWxkZXIudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7R0FHRztBQUlJLE1BQU0sZUFBZTtJQUMxQjs7OztPQUlHO0lBQ0ksTUFBTSxDQUFDLHNCQUFzQixDQUFDLFFBQXVCO1FBQzFELElBQUksQ0FBQyxRQUFRLElBQUksUUFBUSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUUsQ0FBQztZQUN2QyxPQUFPLEVBQUUsQ0FBQztRQUNaLENBQUM7UUFFRCxJQUFJLE9BQU8sR0FBRyxRQUFRLENBQUM7UUFFdkIsaUJBQWlCO1FBQ2pCLE1BQU0sY0FBYyxHQUFHLENBQUMsR0FBRyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDakQsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDdEIsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDdEIsT0FBTyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ25CLENBQUMsQ0FBQyxDQUFDO1FBRUgsS0FBSyxNQUFNLElBQUksSUFBSSxjQUFjLEVBQUUsQ0FBQztZQUNsQyxTQUFTO1lBQ1QsT0FBTyxJQUFJLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUV6QyxPQUFPO1lBQ1AsSUFBSSxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO2dCQUM5QyxLQUFLLE1BQU0sT0FBTyxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztvQkFDcEMsT0FBTyxJQUFJLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztnQkFDM0QsQ0FBQztZQUNILENB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TSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7b0JBQzlDLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ2pDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxJQUFJLE9BQU8sT0FBTyxDQUFDLE9BQU8sS0FBSyxRQUFRLEVBQUUsQ0FBQzt3QkFDNUQsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUM7b0JBQ2xELENBQUM7Z0JBQ0gsQ0FBQztZQUNILENBQUM7UUFDSCxDQUFDO1FBRUQsT0FBTztZQUNMLE9BQU8sRUFBRSxNQUFNLENBQUMsTUFBTSxLQUFLLENBQUM7WUFDNUIsTUFBTTtTQUNQLENBQUM7SUFDSixDQUFDO0NBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WkmuS6keeGii/lpIfku70v57uZcm92b+eahC9tb2R1bGVzL3BhcnNlcnMvRHluYW1pY3NCdWlsZGVyLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIOWKqOaAgeaehOW7uuWZqFxuICog5bCGUmF3UG9zdERhdGHmlbDnu4TmnoTlu7rkuLpb5Yqo5oCBXeWuueWZqOagvOW8j+eahOWtl+espuS4slxuICovXG5cbmltcG9ydCB7IFJhd1Bvc3REYXRhIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBEeW5hbWljc0J1aWxkZXIge1xuICAvKipcbiAgICog5p6E5bu65Yqo5oCB5a655Zmo5YaF5a65XG4gICAqIEBwYXJhbSBkeW5hbWljcyDliqjmgIHmlbDmja7mlbDnu4RcbiAgICogQHJldHVybnMg5Yqo5oCB5a655Zmo5qC85byP55qE5a2X56ym5LiyXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGJ1aWxkRHluYW1pY3NDb250YWluZXIoZHluYW1pY3M6IFJhd1Bvc3REYXRhW10pOiBzdHJpbmcge1xuICAgIGlmICghZHluYW1pY3MgfHwgZHluYW1pY3MubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgbGV0IGNvbnRlbnQgPSAnW+WKqOaAgV1cXG4nO1xuXG4gICAgLy8g5oyJ57yW5Y+35o6S5bqP77yI5aaC5p6c5pyJ57yW5Y+355qE6K+d77yJXG4gICAgY29uc3Qgc29ydGVkRHluYW1pY3MgPSBbLi4uZHluYW1pY3NdLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIGNvbnN0IGFObyA9IGEubm8gfHwgMDtcbiAgICAgIGNvbnN0IGJObyA9IGIubm8gfHwgMDtcbiAgICAgIHJldHVybiBhTm8gLSBiTm87XG4gICAgfSk7XG5cbiAgICBmb3IgKGNvbnN0IHBvc3Qgb2Ygc29ydGVkRHluYW1pY3MpIHtcbiAgICAgIC8vIOaehOW7uuWKqOaAgeadoeebrlxuICAgICAgY29udGVudCArPSB0aGlzLmJ1aWxkRHluYW1pY3NFbnRyeShwb3N0KTtcblxuICAgICAgLy8g5p6E5bu66K+E6K66XG4gICAgICBpZiAocG9zdC5jb21tZW50cyAmJiBwb3N0LmNvbW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZm9yIChjb25zdCBjb21tZW50IG9mIHBvc3QuY29tbWVudHMpIHtcbiAgICAgICAgICBjb250ZW50ICs9IHRoaXMuYnVpbGRDb21tZW50RW50cnkocG9zdC5ubyB8fCAxLCBjb21tZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyDmnoTlu7rngrnotZ5cbiAgICAgIGlmIChwb3N0Lmxpa2VkQnkgJiYgcG9zdC5saWtlZEJ5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgZm9yIChjb25zdCBsaWtlciBvZiBwb3N0Lmxpa2VkQnkpIHtcbiAgICAgICAgICBjb250ZW50ICs9IHRoaXMuYnVpbGRMaWtlRW50cnkocG9zdC5ubyB8fCAxLCBsaWtlciwgcG9zdC50aW1lc3RhbXApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29udGVudCArPSAnWy/liqjmgIFdXFxuJztcbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiDmnoTlu7rljZXkuKrliqjmgIHmnaHnm65cbiAgICogQHBhcmFtIHBvc3Qg5Yqo5oCB5pWw5o2uXG4gICAqIEByZXR1cm5zIOWKqOaAgeadoeebruWtl+espuS4slxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgYnVpbGREeW5hbWljc0VudHJ5KHBvc3Q6IFJhd1Bvc3REYXRhKTogc3RyaW5nIHtcbiAgICBjb25zdCBubyA9IHBvc3Qubm8gfHwgMTtcbiAgICBjb25zdCBhdXRob3IgPSBwb3N0LmF1dGhvck5hbWUgfHwgJ+WkmuS6keeGiic7XG4gICAgY29uc3QgY29udGVudCA9IHBvc3QuY29udGVudCB8fCAnJztcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBwb3N0LnRpbWVzdGFtcCB8fCB0aGlzLmdldEN1cnJlbnRUaW1lc3RhbXAoKTtcblxuICAgIGlmIChwb3N0LmltYWdlRGVzY3JpcHRpb24pIHtcbiAgICAgIC8vIOacieWbvueJh+aPj+i/sOeahOagvOW8j++8mlvliqjmgIFfMXzkvZzogIV85q2j5paHfOWbvueJh+aPj+i/sHxZWVlZLU1NLUREIEhIOm1tXVxuICAgICAgcmV0dXJuIGBb5Yqo5oCBXyR7bm99fCR7YXV0aG9yfXwke2NvbnRlbnR9fCR7cG9zdC5pbWFnZURlc2NyaXB0aW9ufXwke3RpbWVzdGFtcH1dXFxuYDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8g5peg5Zu+54mH5o+P6L+w55qE5qC85byP77yaW+WKqOaAgV8xfOS9nOiAhXzmraPmlod8WVlZWS1NTS1ERCBISDptbV1cbiAgICAgIHJldHVybiBgW+WKqOaAgV8ke25vfXwke2F1dGhvcn18JHtjb250ZW50fXwke3RpbWVzdGFtcH1dXFxuYDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5p6E5bu66K+E6K665p2h55uuXG4gICAqIEBwYXJhbSB0YXJnZXRObyDnm67moIfliqjmgIHnvJblj7dcbiAgICogQHBhcmFtIGNvbW1lbnQg6K+E6K665pWw5o2uXG4gICAqIEByZXR1cm5zIOivhOiuuuadoeebruWtl+espuS4slxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgYnVpbGRDb21tZW50RW50cnkodGFyZ2V0Tm86IG51bWJlciwgY29tbWVudDogYW55KTogc3RyaW5nIHtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSB0aGlzLmdldEN1cnJlbnRUaW1lc3RhbXAoKTtcblxuICAgIC8vIOWkhOeQhuWbnuWkjeagvOW8j++8iOWmguaenOivhOiuuuiAheWQjeensOWMheWQq1wi5Zue5aSNXCLvvIlcbiAgICBsZXQgY29tbWVudGVyID0gY29tbWVudC5hdXRob3JOYW1lIHx8ICfljL/lkI3nlKjmiLcnO1xuICAgIGxldCBjb250ZW50ID0gY29tbWVudC5jb250ZW50IHx8ICcnO1xuXG4gICAgLy8g5qOA5p+l5piv5ZCm5piv5Zue5aSN5qC85byP77yaXCLor4TorrrogIUg5Zue5aSNIOiiq+WbnuWkjeiAhVwiXG4gICAgY29uc3QgcmVwbHlNYXRjaCA9IGNvbW1lbnRlci5tYXRjaCgvXiguKz8pXFxzK+WbnuWkjVxccysoLispJC8pO1xuICAgIGlmIChyZXBseU1hdGNoKSB7XG4gICAgICBjb25zdCBbLCBhY3R1YWxDb21tZW50ZXIsIHJlcGx5VGFyZ2V0XSA9IHJlcGx5TWF0Y2g7XG4gICAgICBjb21tZW50ZXIgPSBgJHthY3R1YWxDb21tZW50ZXJ9QCR7cmVwbHlUYXJnZXR9YDtcbiAgICB9XG5cbiAgICByZXR1cm4gYFvor4TorrpfJHt0YXJnZXROb318JHtjb21tZW50ZXJ9fCR7Y29udGVudH18JHt0aW1lc3RhbXB9XVxcbmA7XG4gIH1cblxuICAvKipcbiAgICog5p6E5bu654K56LWe5p2h55uuXG4gICAqIEBwYXJhbSB0YXJnZXRObyDnm67moIfliqjmgIHnvJblj7dcbiAgICogQHBhcmFtIGxpa2VyIOeCuei1nuiAheWQjeensFxuICAgKiBAcGFyYW0gYmFzZVRpbWVzdGFtcCDln7rnoYDml7bpl7TmiLNcbiAgICogQHJldHVybnMg54K56LWe5p2h55uu5a2X56ym5LiyXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBidWlsZExpa2VFbnRyeSh0YXJnZXRObzogbnVtYmVyLCBsaWtlcjogc3RyaW5nLCBiYXNlVGltZXN0YW1wPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBiYXNlVGltZXN0YW1wIHx8IHRoaXMuZ2V0Q3VycmVudFRpbWVzdGFtcCgpO1xuICAgIHJldHVybiBgW+eCuei1nl8ke3RhcmdldE5vfXwke2xpa2VyfXwke3RpbWVzdGFtcH1dXFxuYDtcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5blvZPliY3ml7bpl7TmiLPvvIhISDptbeagvOW8j++8jOS4jua2iOaBr+agvOW8j+S/neaMgeS4gOiHtO+8iVxuICAgKiBAcmV0dXJucyDmoLzlvI/ljJbnmoTml7bpl7TmiLNcbiAgICovXG4gIHByaXZhdGUgc3RhdGljIGdldEN1cnJlbnRUaW1lc3RhbXAoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gbmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoJ3poLUNOJywge1xuICAgICAgaG91cjogJzItZGlnaXQnLFxuICAgICAgbWludXRlOiAnMi1kaWdpdCcsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog6aqM6K+B5Yqo5oCB5pWw5o2u55qE5a6M5pW05oCnXG4gICAqIEBwYXJhbSBkeW5hbWljcyDliqjmgIHmlbDmja7mlbDnu4RcbiAgICogQHJldHVybnMg6aqM6K+B57uT5p6cXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHZhbGlkYXRlRHluYW1pY3MoZHluYW1pY3M6IFJhd1Bvc3REYXRhW10pOiB7XG4gICAgaXNWYWxpZDogYm9vbGVhbjtcbiAgICBlcnJvcnM6IHN0cmluZ1tdO1xuICB9IHtcbiAgICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW107XG5cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZHluYW1pY3MpKSB7XG4gICAgICBlcnJvcnMucHVzaCgn5Yqo5oCB5pWw5o2u5b+F6aG75piv5pWw57uEJyk7XG4gICAgICByZXR1cm4geyBpc1ZhbGlkOiBmYWxzZSwgZXJyb3JzIH07XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkeW5hbWljcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcG9zdCA9IGR5bmFtaWNzW2ldO1xuXG4gICAgICBpZiAoIXBvc3QuY29udGVudCB8fCB0eXBlb2YgcG9zdC5jb250ZW50ICE9PSAnc3RyaW5nJykge1xuICAgICAgICBlcnJvcnMucHVzaChg5Yqo5oCBICR7aSArIDF9OiDnvLrlsJHmnInmlYjnmoTlhoXlrrlgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBvc3Qubm8gIT09IHVuZGVmaW5lZCAmJiAodHlwZW9mIHBvc3Qubm8gIT09ICdudW1iZXInIHx8IHBvc3Qubm8gPCAxKSkge1xuICAgICAgICBlcnJvcnMucHVzaChg5Yqo5oCBICR7aSArIDF9OiDnvJblj7flv4XpobvmmK/mraPmlbTmlbBgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBvc3QuYXV0aG9yTmFtZSAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBwb3N0LmF1dGhvck5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKGDliqjmgIEgJHtpICsgMX06IOS9nOiAheWQjeensOW/hemhu+aYr+Wtl+espuS4smApO1xuICAgICAgfVxuXG4gICAgICBpZiAocG9zdC5jb21tZW50cyAmJiBBcnJheS5pc0FycmF5KHBvc3QuY29tbWVudHMpKSB7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcG9zdC5jb21tZW50cy5sZW5ndGg7IGorKykge1xuICAgICAgICAgIGNvbnN0IGNvbW1lbnQgPSBwb3N0LmNvbW1lbnRzW2pdO1xuICAgICAgICAgIGlmICghY29tbWVudC5jb250ZW50IHx8IHR5cGVvZiBjb21tZW50LmNvbnRlbnQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaChg5Yqo5oCBICR7aSArIDF9IOivhOiuuiAke2ogKyAxfTog57y65bCR5pyJ5pWI55qE5YaF5a65YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlzVmFsaWQ6IGVycm9ycy5sZW5ndGggPT09IDAsXG4gICAgICBlcnJvcnMsXG4gICAgfTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/parsers/DynamicsBuilder.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/parsers/DynamicsParser.ts": 
  /*!*************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/parsers/DynamicsParser.ts ***!
  \*************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DynamicsParser: () => (/* binding */ DynamicsParser)\n/* harmony export */ });\n/* harmony import */ var _DataParser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./DataParser */ \"./src/多云熊/备份/给rovo的/modules/parsers/DataParser.ts\");\n/**\n * 动态页面数据解析器（新版）\n * 解析[动态]容器内的[动态_*]和[评论_*]格式\n */\n\nclass DynamicsParser extends _DataParser__WEBPACK_IMPORTED_MODULE_0__.DataParser {\n    config;\n    constructor(config = {}) {\n        super();\n        this.config = {\n            enablePartialParsing: true,\n            enableErrorRecovery: true,\n            logErrors: true,\n            ...config,\n        };\n    }\n    /**\n     * 解析动态数据\n     * @param text 输入文本\n     * @returns 解析结果\n     */\n    parse(text) {\n        const errors = [];\n        const warnings = [];\n        const posts = [];\n        try {\n            // 提取[动态]容器内容\n            const containerContent = this.extractDynamicsContainer(text);\n            if (!containerContent) {\n                warnings.push('未找到[动态]容器');\n                return {\n                    success: false,\n                    data: [],\n                    errors: [this.createError('container', '未找到[动态]...[/动态]容器')],\n                    warnings,\n                };\n            }\n            // 解析容器内的所有动态、评论和点赞\n            const { dynamics, comments, likes, parseErrors } = this.parseContainerContent(containerContent);\n            errors.push(...parseErrors);\n            // 构建动态数据结构\n            const postMap = new Map();\n            // 处理动态\n            for (const dynamic of dynamics) {\n                const post = {\n                    no: dynamic.no,\n                    authorName: dynamic.author,\n                    content: dynamic.content,\n                    imageDescription: dynamic.imageDescription,\n                    timestamp: dynamic.timestamp, // 保留解析到的时间戳\n                    likesCount: 0,\n                    sharesCount: 0,\n                    comments: [],\n                };\n                postMap.set(dynamic.no, post);\n            }\n            // 确保目标动态存在（必要时创建占位帖），用于承载评论/点赞增量\n            const ensurePost = (no) => {\n                let target = postMap.get(no);\n                if (!target) {\n                    target = {\n                        no,\n                        // 占位：不提供作者/时间等，等待上层 merge 用历史数据补全\n                        content: '',\n                        likesCount: 0,\n                        sharesCount: 0,\n                        comments: [],\n                    };\n                    postMap.set(no, target);\n                }\n                return target;\n            };\n            // 附加评论到对应动态（即使本片段未出现该动态，也创建占位合并容器）\n            for (const comment of comments) {\n                const targetPost = ensurePost(comment.targetNo);\n                const rawComment = {\n                    authorName: comment.replyTo ? `${comment.commenter} 回复 ${comment.replyTo}` : comment.commenter,\n                    content: comment.content,\n                };\n                targetPost.comments.push(rawComment);\n            }\n            // 附加点赞到对应动态（即使本片段未出现该动态，也创建占位合并容器）\n            for (const like of likes) {\n                const targetPost = ensurePost(like.targetNo);\n                // 初始化 likedBy\n                if (!targetPost.likedBy) {\n                    targetPost.likedBy = [];\n                }\n                // 去重：同一人只能点赞一次\n                if (!targetPost.likedBy.includes(like.liker)) {\n                    targetPost.likedBy.push(like.liker);\n                    targetPost.likesCount = (targetPost.likesCount || 0) + 1;\n                }\n            }\n            // 转换为数组并按时间排序\n            posts.push(...Array.from(postMap.values()));\n            const success = errors.length === 0 || (this.config.enablePartialParsing === true && posts.length > 0);\n            if (this.config.logErrors && errors.length > 0) {\n                console.warn('动态解析错误:', errors);\n            }\n            return {\n                success,\n                data: posts,\n                errors,\n                warnings,\n            };\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            const parseError = this.createError('parse', `解析失败: ${errorMessage}`);\n            if (this.config.logErrors) {\n                console.error('动态解析异常:', error);\n            }\n            return {\n                success: false,\n                data: [],\n                errors: [parseError],\n                warnings,\n            };\n        }\n    }\n    /**\n     * 提取[动态]容器内容\n     */\n    extractDynamicsContainer(text) {\n        const startTag = '[动态]';\n        const endTag = '[/动态]';\n        const startIndex = text.indexOf(startTag);\n        const endIndex = text.indexOf(endTag);\n        if (startIndex === -1 || endIndex === -1 || endIndex <= startIndex) {\n            return null;\n        }\n        return text.substring(startIndex + startTag.length, endIndex).trim();\n    }\n    /**\n     * 解析容器内容\n     */\n    parseContainerContent(content) {\n        const dynamics = [];\n        const comments = [];\n        const likes = [];\n        const parseErrors = [];\n        // 按行扫描\n        const lines = content.split('\\n');\n        for (let i = 0; i < lines.length; i++) {\n            const line = lines[i].trim();\n            // 跳过空行\n            if (!line)\n                continue;\n            // 匹配[动态_*]\n            if (line.startsWith('[动态_') && line.endsWith(']')) {\n                const result = this.parseDynamicsLine(line, i + 1);\n                if (result.success && result.item) {\n                    dynamics.push(result.item);\n                }\n                else if (result.error) {\n                    parseErrors.push(result.error);\n                }\n            }\n            // 匹配[评论_*]\n            else if (line.startsWith('[评论_') && line.endsWith(']')) {\n                const result = this.parseCommentLine(line, i + 1);\n                if (result.success && result.item) {\n                    comments.push(result.item);\n                }\n                else if (result.error) {\n                    parseErrors.push(result.error);\n                }\n            }\n            // 匹配[点赞_*]\n            else if (line.startsWith('[点赞_') && line.endsWith(']')) {\n                const result = this.parseLikeLine(line, i + 1);\n                if (result.success && result.item) {\n                    likes.push(result.item);\n                }\n                else if (result.error) {\n                    parseErrors.push(result.error);\n                }\n            }\n        }\n        return { dynamics, comments, likes, parseErrors };\n    }\n    /**\n     * 解析动态行\n     */\n    parseDynamicsLine(line, lineNo) {\n        // 移除方括号\n        const content = line.slice(1, -1);\n        // 安全分段（支持引号）\n        const segments = this.splitWithQuotes(content, '|');\n        // 验证段数（4段无图，5段有图）\n        if (segments.length !== 4 && segments.length !== 5) {\n            return {\n                success: false,\n                error: this.createError(`line_${lineNo}`, `动态格式错误：应为4段（无图）或5段（有图），实际${segments.length}段`),\n            };\n        }\n        // 解析编号\n        const noMatch = segments[0].match(/^动态_(\\d+)$/);\n        if (!noMatch) {\n            return {\n                success: false,\n                error: this.createError(`line_${lineNo}`, '动态编号格式错误'),\n            };\n        }\n        const no = parseInt(noMatch[1]);\n        const author = segments[1].trim();\n        const contentText = segments[2].trim();\n        let imageDescription;\n        let timestamp;\n        if (segments.length === 5) {\n            // 有图片描述\n            imageDescription = segments[3].trim();\n            timestamp = segments[4].trim();\n        }\n        else {\n            // 无图片描述\n            timestamp = segments[3].trim();\n        }\n        // 验证时间格式\n        if (!this.validateTimestamp(timestamp)) {\n            return {\n                success: false,\n                error: this.createError(`line_${lineNo}`, `时间格式错误：${timestamp}`),\n            };\n        }\n        return {\n            success: true,\n            item: {\n                no,\n                author,\n                content: contentText,\n                imageDescription,\n                timestamp,\n            },\n        };\n    }\n    /**\n     * 解析评论行\n     */\n    parseCommentLine(line, lineNo) {\n        // 移除方括号\n        const content = line.slice(1, -1);\n        // 安全分段\n        const segments = this.splitWithQuotes(content, '|');\n        // 验证段数（必须4段）\n        if (segments.length !== 4) {\n            return {\n                success: false,\n                error: this.createError(`line_${lineNo}`, `评论格式错误：应为4段，实际${segments.length}段`),\n            };\n        }\n        // 解析目标编号\n        const noMatch = segments[0].match(/^评论_(\\d+)$/);\n        if (!noMatch) {\n            return {\n                success: false,\n                error: this.createError(`line_${lineNo}`, '评论目标编号格式错误'),\n            };\n        }\n        const targetNo = parseInt(noMatch[1]);\n        // 解析评论者（可能包含@被回复者）\n        const commenterPart = segments[1].trim();\n        let commenter;\n        let replyTo;\n        const atIndex = commenterPart.indexOf('@');\n        if (atIndex > 0) {\n            commenter = commenterPart.substring(0, atIndex).trim();\n            replyTo = commenterPart.substring(atIndex + 1).trim();\n        }\n        else {\n            commenter = commenterPart;\n        }\n        const contentText = segments[2].trim();\n        const timestamp = segments[3].trim();\n        // 验证时间格式\n        if (!this.validateTimestamp(timestamp)) {\n            return {\n                success: false,\n                error: this.createError(`line_${lineNo}`, `时间格式错误：${timestamp}`),\n            };\n        }\n        return {\n            success: true,\n            item: {\n                targetNo,\n                commenter,\n                replyTo,\n                content: contentText,\n                timestamp,\n            },\n        };\n    }\n    /**\n     * 解析点赞行\n     */\n    parseLikeLine(line, lineNo) {\n        // 移除方括号\n        const content = line.slice(1, -1);\n        // 安全分段\n        const segments = this.splitWithQuotes(content, '|');\n        // 验证段数（必须3段）\n        if (segments.length !== 3) {\n            return {\n                success: false,\n                error: this.createError(`line_${lineNo}`, `点赞格式错误：应为3段，实际${segments.length}段`),\n            };\n        }\n        // 解析目标编号\n        const noMatch = segments[0].match(/^点赞_(\\d+)$/);\n        if (!noMatch) {\n            return {\n                success: false,\n                error: this.createError(`line_${lineNo}`, '点赞目标编号格式错误'),\n            };\n        }\n        const targetNo = parseInt(noMatch[1]);\n        const liker = segments[1].trim();\n        const timestamp = segments[2].trim();\n        // 验证时间格式\n        if (!this.validateTimestamp(timestamp)) {\n            return {\n                success: false,\n                error: this.createError(`line_${lineNo}`, `时间格式错误：${timestamp}`),\n            };\n        }\n        return {\n            success: true,\n            item: {\n                targetNo,\n                liker,\n                timestamp,\n            },\n        };\n    }\n    /**\n     * 支持引号的安全分段\n     */\n    splitWithQuotes(text, delimiter) {\n        const segments = [];\n        let current = '';\n        let inQuotes = false;\n        for (let i = 0; i < text.length; i++) {\n            const char = text[i];\n            const nextChar = text[i + 1];\n            if (char === '\"') {\n                if (nextChar === '\"') {\n                    // 双引号转义\n                    current += '\"';\n                    i++; // 跳过下一个引号\n                }\n                else {\n                    // 切换引号状态\n                    inQuotes = !inQuotes;\n                }\n            }\n            else if (char === delimiter && !inQuotes) {\n                // 分隔符（不在引号内）\n                segments.push(current);\n                current = '';\n            }\n            else {\n                current += char;\n            }\n        }\n        // 添加最后一段\n        if (current) {\n            segments.push(current);\n        }\n        return segments;\n    }\n    /**\n     * 验证时间格式 HH:mm（与消息格式保持一致）\n     */\n    validateTimestamp(timestamp) {\n        const pattern = /^\\d{2}:\\d{2}$/;\n        return pattern.test(timestamp);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvcGFyc2Vycy9EeW5hbWljc1BhcnNlci50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBOzs7R0FHRztBQUV1QztBQXlCbkMsTUFBTSxjQUFlLFNBQVEsbURBQVU7SUFDcEMsTUFBTSxDQUFjO0lBRTVCLFlBQVksU0FBc0IsRUFBRTtRQUNsQyxLQUFLLEVBQUUsQ0FBQztRQUNSLElBQUksQ0FBQyxNQUFNLEdBQUc7WUFDWixvQkFBb0IsRUFBRSxJQUFJO1lBQzFCLG1CQUFtQixFQUFFLElBQUk7WUFDekIsU0FBUyxFQUFFLElBQUk7WUFDZixHQUFHLE1BQU07U0FDVixDQUFDO0lBQ0osQ0FBQztJQUVEOzs7O09BSUc7SUFDSSxLQUFLLENBQUMsSUFBWTtRQUN2QixNQUFNLE1BQU0sR0FBaUIsRUFBRSxDQUFDO1FBQ2hDLE1BQU0sUUFBUSxHQUFhLEVBQUUsQ0FBQztRQUM5QixNQUFNLEtBQUssR0FBa0IsRUFBRSxDQUFDO1FBRWhDLElBQUksQ0FBQztZQUNILGFBQWE7WUFDYixNQUFNLGdCQUFnQixHQUFHLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUU3RCxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztnQkFDdEIsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztnQkFDM0IsT0FBTztvQkFDTCxPQUFPLEVBQUUsS0FBSztvQkFDZCxJQUFJLEVBQUUsRUFBRTtvQkFDUixNQUFNLEVBQUUsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO29CQUM1RCxRQUFRO2lCQUNULENBQUM7WUFDSixDQUFDO1lBRUQsbUJBQW1CO1lBQ25CLE1BQU0sRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxXQUFXLEVBQUUsR0FBRyxJQUFJLENBQUMscUJBQXFCLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztZQUNoRyxN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dGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvcGFyc2Vycy9EeW5hbWljc1BhcnNlci50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIOWKqOaAgemhtemdouaVsOaNruino+aekOWZqO+8iOaWsOeJiO+8iVxyXG4gKiDop6PmnpBb5Yqo5oCBXeWuueWZqOWGheeahFvliqjmgIFfKl3lkoxb6K+E6K66Xypd5qC85byPXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgRGF0YVBhcnNlciB9IGZyb20gJy4vRGF0YVBhcnNlcic7XHJcbmltcG9ydCB7IFBhcnNlQ29uZmlnLCBQYXJzZUVycm9yLCBQYXJzZVJlc3VsdCwgUmF3Q29tbWVudERhdGEsIFJhd1Bvc3REYXRhIH0gZnJvbSAnLi90eXBlcyc7XHJcblxyXG5pbnRlcmZhY2UgUGFyc2VkRHluYW1pY3NJdGVtIHtcclxuICBubzogbnVtYmVyO1xyXG4gIGF1dGhvcjogc3RyaW5nO1xyXG4gIGNvbnRlbnQ6IHN0cmluZztcclxuICBpbWFnZURlc2NyaXB0aW9uPzogc3RyaW5nO1xyXG4gIHRpbWVzdGFtcDogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgUGFyc2VkQ29tbWVudEl0ZW0ge1xyXG4gIHRhcmdldE5vOiBudW1iZXI7XHJcbiAgY29tbWVudGVyOiBzdHJpbmc7XHJcbiAgcmVwbHlUbz86IHN0cmluZztcclxuICBjb250ZW50OiBzdHJpbmc7XHJcbiAgdGltZXN0YW1wOiBzdHJpbmc7XHJcbn1cclxuXHJcbmludGVyZmFjZSBQYXJzZWRMaWtlSXRlbSB7XHJcbiAgdGFyZ2V0Tm86IG51bWJlcjtcclxuICBsaWtlcjogc3RyaW5nO1xyXG4gIHRpbWVzdGFtcDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRHluYW1pY3NQYXJzZXIgZXh0ZW5kcyBEYXRhUGFyc2VyIHtcclxuICBwcml2YXRlIGNvbmZpZzogUGFyc2VDb25maWc7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogUGFyc2VDb25maWcgPSB7fSkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMuY29uZmlnID0ge1xyXG4gICAgICBlbmFibGVQYXJ0aWFsUGFyc2luZzogdHJ1ZSxcclxuICAgICAgZW5hYmxlRXJyb3JSZWNvdmVyeTogdHJ1ZSxcclxuICAgICAgbG9nRXJyb3JzOiB0cnVlLFxyXG4gICAgICAuLi5jb25maWcsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6Kej5p6Q5Yqo5oCB5pWw5o2uXHJcbiAgICogQHBhcmFtIHRleHQg6L6T5YWl5paH5pysXHJcbiAgICogQHJldHVybnMg6Kej5p6Q57uT5p6cXHJcbiAgICovXHJcbiAgcHVibGljIHBhcnNlKHRleHQ6IHN0cmluZyk6IFBhcnNlUmVzdWx0PFJhd1Bvc3REYXRhW10+IHtcclxuICAgIGNvbnN0IGVycm9yczogUGFyc2VFcnJvcltdID0gW107XHJcbiAgICBjb25zdCB3YXJuaW5nczogc3RyaW5nW10gPSBbXTtcclxuICAgIGNvbnN0IHBvc3RzOiBSYXdQb3N0RGF0YVtdID0gW107XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g5o+Q5Y+WW+WKqOaAgV3lrrnlmajlhoXlrrlcclxuICAgICAgY29uc3QgY29udGFpbmVyQ29udGVudCA9IHRoaXMuZXh0cmFjdER5bmFtaWNzQ29udGFpbmVyKHRleHQpO1xyXG5cclxuICAgICAgaWYgKCFjb250YWluZXJDb250ZW50KSB7XHJcbiAgICAgICAgd2FybmluZ3MucHVzaCgn5pyq5om+5YiwW+WKqOaAgV3lrrnlmagnKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICBkYXRhOiBbXSxcclxuICAgICAgICAgIGVycm9yczogW3RoaXMuY3JlYXRlRXJyb3IoJ2NvbnRhaW5lcicsICfmnKrmib7liLBb5Yqo5oCBXS4uLlsv5Yqo5oCBXeWuueWZqCcpXSxcclxuICAgICAgICAgIHdhcm5pbmdzLFxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOino+aekOWuueWZqOWGheeahOaJgOacieWKqOaAgeOAgeivhOiuuuWSjOeCuei1nlxyXG4gICAgICBjb25zdCB7IGR5bmFtaWNzLCBjb21tZW50cywgbGlrZXMsIHBhcnNlRXJyb3JzIH0gPSB0aGlzLnBhcnNlQ29udGFpbmVyQ29udGVudChjb250YWluZXJDb250ZW50KTtcclxuICAgICAgZXJyb3JzLnB1c2goLi4ucGFyc2VFcnJvcnMpO1xyXG5cclxuICAgICAgLy8g5p6E5bu65Yqo5oCB5pWw5o2u57uT5p6EXHJcbiAgICAgIGNvbnN0IHBvc3RNYXAgPSBuZXcgTWFwPG51bWJlciwgUmF3UG9zdERhdGE+KCk7XHJcblxyXG4gICAgICAvLyDlpITnkIbliqjmgIFcclxuICAgICAgZm9yIChjb25zdCBkeW5hbWljIG9mIGR5bmFtaWNzKSB7XHJcbiAgICAgICAgY29uc3QgcG9zdDogUmF3UG9zdERhdGEgPSB7XHJcbiAgICAgICAgICBubzogZHluYW1pYy5ubyxcclxuICAgICAgICAgIGF1dGhvck5hbWU6IGR5bmFtaWMuYXV0aG9yLFxyXG4gICAgICAgICAgY29udGVudDogZHluYW1pYy5jb250ZW50LFxyXG4gICAgICAgICAgaW1hZ2VEZXNjcmlwdGlvbjogZHluYW1pYy5pbWFnZURlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgdGltZXN0YW1wOiBkeW5hbWljLnRpbWVzdGFtcCwgLy8g5L+d55WZ6Kej5p6Q5Yiw55qE5pe26Ze05oizXHJcbiAgICAgICAgICBsaWtlc0NvdW50OiAwLFxyXG4gICAgICAgICAgc2hhcmVzQ291bnQ6IDAsXHJcbiAgICAgICAgICBjb21tZW50czogW10sXHJcbiAgICAgICAgfTtcclxuICAgICAgICBwb3N0TWFwLnNldChkeW5hbWljLm5vLCBwb3N0KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g56Gu5L+d55uu5qCH5Yqo5oCB5a2Y5Zyo77yI5b+F6KaB5pe25Yib5bu65Y2g5L2N5biW77yJ77yM55So5LqO5om/6L296K+E6K66L+eCuei1nuWinumHj1xyXG4gICAgICBjb25zdCBlbnN1cmVQb3N0ID0gKG5vOiBudW1iZXIpOiBSYXdQb3N0RGF0YSA9PiB7XHJcbiAgICAgICAgbGV0IHRhcmdldCA9IHBvc3RNYXAuZ2V0KG5vKTtcclxuICAgICAgICBpZiAoIXRhcmdldCkge1xyXG4gICAgICAgICAgdGFyZ2V0ID0ge1xyXG4gICAgICAgICAgICBubyxcclxuICAgICAgICAgICAgLy8g5Y2g5L2N77ya5LiN5o+Q5L6b5L2c6ICFL+aXtumXtOetie+8jOetieW+heS4iuWxgiBtZXJnZSDnlKjljoblj7LmlbDmja7ooaXlhahcclxuICAgICAgICAgICAgY29udGVudDogJycsXHJcbiAgICAgICAgICAgIGxpa2VzQ291bnQ6IDAsXHJcbiAgICAgICAgICAgIHNoYXJlc0NvdW50OiAwLFxyXG4gICAgICAgICAgICBjb21tZW50czogW10sXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgcG9zdE1hcC5zZXQobm8sIHRhcmdldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0YXJnZXQ7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyDpmYTliqDor4TorrrliLDlr7nlupTliqjmgIHvvIjljbPkvb/mnKzniYfmrrXmnKrlh7rnjrDor6XliqjmgIHvvIzkuZ/liJvlu7rljaDkvY3lkIjlubblrrnlmajvvIlcclxuICAgICAgZm9yIChjb25zdCBjb21tZW50IG9mIGNvbW1lbnRzKSB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0UG9zdCA9IGVuc3VyZVBvc3QoY29tbWVudC50YXJnZXRObyk7XHJcbiAgICAgICAgY29uc3QgcmF3Q29tbWVudDogUmF3Q29tbWVudERhdGEgPSB7XHJcbiAgICAgICAgICBhdXRob3JOYW1lOiBjb21tZW50LnJlcGx5VG8gPyBgJHtjb21tZW50LmNvbW1lbnRlcn0g5Zue5aSNICR7Y29tbWVudC5yZXBseVRvfWAgOiBjb21tZW50LmNvbW1lbnRlcixcclxuICAgICAgICAgIGNvbnRlbnQ6IGNvbW1lbnQuY29udGVudCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRhcmdldFBvc3QuY29tbWVudHMucHVzaChyYXdDb21tZW50KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g6ZmE5Yqg54K56LWe5Yiw5a+55bqU5Yqo5oCB77yI5Y2z5L2/5pys54mH5q615pyq5Ye6546w6K+l5Yqo5oCB77yM5Lmf5Yib5bu65Y2g5L2N5ZCI5bm25a655Zmo77yJXHJcbiAgICAgIGZvciAoY29uc3QgbGlrZSBvZiBsaWtlcykge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldFBvc3QgPSBlbnN1cmVQb3N0KGxpa2UudGFyZ2V0Tm8pO1xyXG4gICAgICAgIC8vIOWIneWni+WMliBsaWtlZEJ5XHJcbiAgICAgICAgaWYgKCF0YXJnZXRQb3N0Lmxpa2VkQnkpIHtcclxuICAgICAgICAgIHRhcmdldFBvc3QubGlrZWRCeSA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDljrvph43vvJrlkIzkuIDkurrlj6rog73ngrnotZ7kuIDmrKFcclxuICAgICAgICBpZiAoIXRhcmdldFBvc3QubGlrZWRCeS5pbmNsdWRlcyhsaWtlLmxpa2VyKSkge1xyXG4gICAgICAgICAgdGFyZ2V0UG9zdC5saWtlZEJ5LnB1c2gobGlrZS5saWtlcik7XHJcbiAgICAgICAgICB0YXJnZXRQb3N0Lmxpa2VzQ291bnQgPSAodGFyZ2V0UG9zdC5saWtlc0NvdW50IHx8IDApICsgMTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOi9rOaNouS4uuaVsOe7hOW5tuaMieaXtumXtOaOkuW6j1xyXG4gICAgICBwb3N0cy5wdXNoKC4uLkFycmF5LmZyb20ocG9zdE1hcC52YWx1ZXMoKSkpO1xyXG5cclxuICAgICAgY29uc3Qgc3VjY2VzcyA9IGVycm9ycy5sZW5ndGggPT09IDAgfHwgKHRoaXMuY29uZmlnLmVuYWJsZVBhcnRpYWxQYXJzaW5nID09PSB0cnVlICYmIHBvc3RzLmxlbmd0aCA+IDApO1xyXG5cclxuICAgICAgaWYgKHRoaXMuY29uZmlnLmxvZ0Vycm9ycyAmJiBlcnJvcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnNvbGUud2Fybign5Yqo5oCB6Kej5p6Q6ZSZ6K+vOicsIGVycm9ycyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzcyxcclxuICAgICAgICBkYXRhOiBwb3N0cyxcclxuICAgICAgICBlcnJvcnMsXHJcbiAgICAgICAgd2FybmluZ3MsXHJcbiAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XHJcbiAgICAgIGNvbnN0IHBhcnNlRXJyb3IgPSB0aGlzLmNyZWF0ZUVycm9yKCdwYXJzZScsIGDop6PmnpDlpLHotKU6ICR7ZXJyb3JNZXNzYWdlfWApO1xyXG5cclxuICAgICAgaWYgKHRoaXMuY29uZmlnLmxvZ0Vycm9ycykge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WKqOaAgeino+aekOW8guW4uDonLCBlcnJvcik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZGF0YTogW10sXHJcbiAgICAgICAgZXJyb3JzOiBbcGFyc2VFcnJvcl0sXHJcbiAgICAgICAgd2FybmluZ3MsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmj5Dlj5Zb5Yqo5oCBXeWuueWZqOWGheWuuVxyXG4gICAqL1xyXG4gIHByaXZhdGUgZXh0cmFjdER5bmFtaWNzQ29udGFpbmVyKHRleHQ6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xyXG4gICAgY29uc3Qgc3RhcnRUYWcgPSAnW+WKqOaAgV0nO1xyXG4gICAgY29uc3QgZW5kVGFnID0gJ1sv5Yqo5oCBXSc7XHJcblxyXG4gICAgY29uc3Qgc3RhcnRJbmRleCA9IHRleHQuaW5kZXhPZihzdGFydFRhZyk7XHJcbiAgICBjb25zdCBlbmRJbmRleCA9IHRleHQuaW5kZXhPZihlbmRUYWcpO1xyXG5cclxuICAgIGlmIChzdGFydEluZGV4ID09PSAtMSB8fCBlbmRJbmRleCA9PT0gLTEgfHwgZW5kSW5kZXggPD0gc3RhcnRJbmRleCkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGV4dC5zdWJzdHJpbmcoc3RhcnRJbmRleCArIHN0YXJ0VGFnLmxlbmd0aCwgZW5kSW5kZXgpLnRyaW0oKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOino+aekOWuueWZqOWGheWuuVxyXG4gICAqL1xyXG4gIHByaXZhdGUgcGFyc2VDb250YWluZXJDb250ZW50KGNvbnRlbnQ6IHN0cmluZyk6IHtcclxuICAgIGR5bmFtaWNzOiBQYXJzZWREeW5hbWljc0l0ZW1bXTtcclxuICAgIGNvbW1lbnRzOiBQYXJzZWRDb21tZW50SXRlbVtdO1xyXG4gICAgbGlrZXM6IFBhcnNlZExpa2VJdGVtW107XHJcbiAgICBwYXJzZUVycm9yczogUGFyc2VFcnJvcltdO1xyXG4gIH0ge1xyXG4gICAgY29uc3QgZHluYW1pY3M6IFBhcnNlZER5bmFtaWNzSXRlbVtdID0gW107XHJcbiAgICBjb25zdCBjb21tZW50czogUGFyc2VkQ29tbWVudEl0ZW1bXSA9IFtdO1xyXG4gICAgY29uc3QgbGlrZXM6IFBhcnNlZExpa2VJdGVtW10gPSBbXTtcclxuICAgIGNvbnN0IHBhcnNlRXJyb3JzOiBQYXJzZUVycm9yW10gPSBbXTtcclxuXHJcbiAgICAvLyDmjInooYzmiavmj49cclxuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCBsaW5lID0gbGluZXNbaV0udHJpbSgpO1xyXG5cclxuICAgICAgLy8g6Lez6L+H56m66KGMXHJcbiAgICAgIGlmICghbGluZSkgY29udGludWU7XHJcblxyXG4gICAgICAvLyDljLnphY1b5Yqo5oCBXypdXHJcbiAgICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoJ1vliqjmgIFfJykgJiYgbGluZS5lbmRzV2l0aCgnXScpKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5wYXJzZUR5bmFtaWNzTGluZShsaW5lLCBpICsgMSk7XHJcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzICYmIHJlc3VsdC5pdGVtKSB7XHJcbiAgICAgICAgICBkeW5hbWljcy5wdXNoKHJlc3VsdC5pdGVtKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5lcnJvcikge1xyXG4gICAgICAgICAgcGFyc2VFcnJvcnMucHVzaChyZXN1bHQuZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5Yy56YWNW+ivhOiuul8qXVxyXG4gICAgICBlbHNlIGlmIChsaW5lLnN0YXJ0c1dpdGgoJ1vor4TorrpfJykgJiYgbGluZS5lbmRzV2l0aCgnXScpKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5wYXJzZUNvbW1lbnRMaW5lKGxpbmUsIGkgKyAxKTtcclxuICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0Lml0ZW0pIHtcclxuICAgICAgICAgIGNvbW1lbnRzLnB1c2gocmVzdWx0Lml0ZW0pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LmVycm9yKSB7XHJcbiAgICAgICAgICBwYXJzZUVycm9ycy5wdXNoKHJlc3VsdC5lcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDljLnphY1b54K56LWeXypdXHJcbiAgICAgIGVsc2UgaWYgKGxpbmUuc3RhcnRzV2l0aCgnW+eCuei1nl8nKSAmJiBsaW5lLmVuZHNXaXRoKCddJykpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnBhcnNlTGlrZUxpbmUobGluZSwgaSArIDEpO1xyXG4gICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcyAmJiByZXN1bHQuaXRlbSkge1xyXG4gICAgICAgICAgbGlrZXMucHVzaChyZXN1bHQuaXRlbSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQuZXJyb3IpIHtcclxuICAgICAgICAgIHBhcnNlRXJyb3JzLnB1c2gocmVzdWx0LmVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBkeW5hbWljcywgY29tbWVudHMsIGxpa2VzLCBwYXJzZUVycm9ycyB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6Kej5p6Q5Yqo5oCB6KGMXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBwYXJzZUR5bmFtaWNzTGluZShcclxuICAgIGxpbmU6IHN0cmluZyxcclxuICAgIGxpbmVObzogbnVtYmVyLFxyXG4gICk6IHtcclxuICAgIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgICBpdGVtPzogUGFyc2VkRHluYW1pY3NJdGVtO1xyXG4gICAgZXJyb3I/OiBQYXJzZUVycm9yO1xyXG4gIH0ge1xyXG4gICAgLy8g56e76Zmk5pa55ous5Y+3XHJcbiAgICBjb25zdCBjb250ZW50ID0gbGluZS5zbGljZSgxLCAtMSk7XHJcblxyXG4gICAgLy8g5a6J5YWo5YiG5q6177yI5pSv5oyB5byV5Y+377yJXHJcbiAgICBjb25zdCBzZWdtZW50cyA9IHRoaXMuc3BsaXRXaXRoUXVvdGVzKGNvbnRlbnQsICd8Jyk7XHJcblxyXG4gICAgLy8g6aqM6K+B5q615pWw77yINOauteaXoOWbvu+8jDXmrrXmnInlm77vvIlcclxuICAgIGlmIChzZWdtZW50cy5sZW5ndGggIT09IDQgJiYgc2VnbWVudHMubGVuZ3RoICE9PSA1KSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IHRoaXMuY3JlYXRlRXJyb3IoXHJcbiAgICAgICAgICBgbGluZV8ke2xpbmVOb31gLFxyXG4gICAgICAgICAgYOWKqOaAgeagvOW8j+mUmeivr++8muW6lOS4ujTmrrXvvIjml6Dlm77vvInmiJY15q6177yI5pyJ5Zu+77yJ77yM5a6e6ZmFJHtzZWdtZW50cy5sZW5ndGh95q61YCxcclxuICAgICAgICApLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOino+aekOe8luWPt1xyXG4gICAgY29uc3Qgbm9NYXRjaCA9IHNlZ21lbnRzWzBdLm1hdGNoKC9e5Yqo5oCBXyhcXGQrKSQvKTtcclxuICAgIGlmICghbm9NYXRjaCkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiB0aGlzLmNyZWF0ZUVycm9yKGBsaW5lXyR7bGluZU5vfWAsICfliqjmgIHnvJblj7fmoLzlvI/plJnor68nKSxcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBubyA9IHBhcnNlSW50KG5vTWF0Y2hbMV0pO1xyXG4gICAgY29uc3QgYXV0aG9yID0gc2VnbWVudHNbMV0udHJpbSgpO1xyXG4gICAgY29uc3QgY29udGVudFRleHQgPSBzZWdtZW50c1syXS50cmltKCk7XHJcblxyXG4gICAgbGV0IGltYWdlRGVzY3JpcHRpb246IHN0cmluZyB8IHVuZGVmaW5lZDtcclxuICAgIGxldCB0aW1lc3RhbXA6IHN0cmluZztcclxuXHJcbiAgICBpZiAoc2VnbWVudHMubGVuZ3RoID09PSA1KSB7XHJcbiAgICAgIC8vIOacieWbvueJh+aPj+i/sFxyXG4gICAgICBpbWFnZURlc2NyaXB0aW9uID0gc2VnbWVudHNbM10udHJpbSgpO1xyXG4gICAgICB0aW1lc3RhbXAgPSBzZWdtZW50c1s0XS50cmltKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyDml6Dlm77niYfmj4/ov7BcclxuICAgICAgdGltZXN0YW1wID0gc2VnbWVudHNbM10udHJpbSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOmqjOivgeaXtumXtOagvOW8j1xyXG4gICAgaWYgKCF0aGlzLnZhbGlkYXRlVGltZXN0YW1wKHRpbWVzdGFtcCkpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogdGhpcy5jcmVhdGVFcnJvcihgbGluZV8ke2xpbmVOb31gLCBg5pe26Ze05qC85byP6ZSZ6K+v77yaJHt0aW1lc3RhbXB9YCksXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgaXRlbToge1xyXG4gICAgICAgIG5vLFxyXG4gICAgICAgIGF1dGhvcixcclxuICAgICAgICBjb250ZW50OiBjb250ZW50VGV4dCxcclxuICAgICAgICBpbWFnZURlc2NyaXB0aW9uLFxyXG4gICAgICAgIHRpbWVzdGFtcCxcclxuICAgICAgfSxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDop6PmnpDor4TorrrooYxcclxuICAgKi9cclxuICBwcml2YXRlIHBhcnNlQ29tbWVudExpbmUoXHJcbiAgICBsaW5lOiBzdHJpbmcsXHJcbiAgICBsaW5lTm86IG51bWJlcixcclxuICApOiB7XHJcbiAgICBzdWNjZXNzOiBib29sZWFuO1xyXG4gICAgaXRlbT86IFBhcnNlZENvbW1lbnRJdGVtO1xyXG4gICAgZXJyb3I/OiBQYXJzZUVycm9yO1xyXG4gIH0ge1xyXG4gICAgLy8g56e76Zmk5pa55ous5Y+3XHJcbiAgICBjb25zdCBjb250ZW50ID0gbGluZS5zbGljZSgxLCAtMSk7XHJcblxyXG4gICAgLy8g5a6J5YWo5YiG5q61XHJcbiAgICBjb25zdCBzZWdtZW50cyA9IHRoaXMuc3BsaXRXaXRoUXVvdGVzKGNvbnRlbnQsICd8Jyk7XHJcblxyXG4gICAgLy8g6aqM6K+B5q615pWw77yI5b+F6aG7NOaute+8iVxyXG4gICAgaWYgKHNlZ21lbnRzLmxlbmd0aCAhPT0gNCkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiB0aGlzLmNyZWF0ZUVycm9yKGBsaW5lXyR7bGluZU5vfWAsIGDor4TorrrmoLzlvI/plJnor6/vvJrlupTkuLo05q6177yM5a6e6ZmFJHtzZWdtZW50cy5sZW5ndGh95q61YCksXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8g6Kej5p6Q55uu5qCH57yW5Y+3XHJcbiAgICBjb25zdCBub01hdGNoID0gc2VnbWVudHNbMF0ubWF0Y2goL17or4TorrpfKFxcZCspJC8pO1xyXG4gICAgaWYgKCFub01hdGNoKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IHRoaXMuY3JlYXRlRXJyb3IoYGxpbmVfJHtsaW5lTm99YCwgJ+ivhOiuuuebruagh+e8luWPt+agvOW8j+mUmeivrycpLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRhcmdldE5vID0gcGFyc2VJbnQobm9NYXRjaFsxXSk7XHJcblxyXG4gICAgLy8g6Kej5p6Q6K+E6K666ICF77yI5Y+v6IO95YyF5ZCrQOiiq+WbnuWkjeiAhe+8iVxyXG4gICAgY29uc3QgY29tbWVudGVyUGFydCA9IHNlZ21lbnRzWzFdLnRyaW0oKTtcclxuICAgIGxldCBjb21tZW50ZXI6IHN0cmluZztcclxuICAgIGxldCByZXBseVRvOiBzdHJpbmcgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgY29uc3QgYXRJbmRleCA9IGNvbW1lbnRlclBhcnQuaW5kZXhPZignQCcpO1xyXG4gICAgaWYgKGF0SW5kZXggPiAwKSB7XHJcbiAgICAgIGNvbW1lbnRlciA9IGNvbW1lbnRlclBhcnQuc3Vic3RyaW5nKDAsIGF0SW5kZXgpLnRyaW0oKTtcclxuICAgICAgcmVwbHlUbyA9IGNvbW1lbnRlclBhcnQuc3Vic3RyaW5nKGF0SW5kZXggKyAxKS50cmltKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb21tZW50ZXIgPSBjb21tZW50ZXJQYXJ0O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNvbnRlbnRUZXh0ID0gc2VnbWVudHNbMl0udHJpbSgpO1xyXG4gICAgY29uc3QgdGltZXN0YW1wID0gc2VnbWVudHNbM10udHJpbSgpO1xyXG5cclxuICAgIC8vIOmqjOivgeaXtumXtOagvOW8j1xyXG4gICAgaWYgKCF0aGlzLnZhbGlkYXRlVGltZXN0YW1wKHRpbWVzdGFtcCkpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogdGhpcy5jcmVhdGVFcnJvcihgbGluZV8ke2xpbmVOb31gLCBg5pe26Ze05qC85byP6ZSZ6K+v77yaJHt0aW1lc3RhbXB9YCksXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgaXRlbToge1xyXG4gICAgICAgIHRhcmdldE5vLFxyXG4gICAgICAgIGNvbW1lbnRlcixcclxuICAgICAgICByZXBseVRvLFxyXG4gICAgICAgIGNvbnRlbnQ6IGNvbnRlbnRUZXh0LFxyXG4gICAgICAgIHRpbWVzdGFtcCxcclxuICAgICAgfSxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDop6PmnpDngrnotZ7ooYxcclxuICAgKi9cclxuICBwcml2YXRlIHBhcnNlTGlrZUxpbmUoXHJcbiAgICBsaW5lOiBzdHJpbmcsXHJcbiAgICBsaW5lTm86IG51bWJlcixcclxuICApOiB7XHJcbiAgICBzdWNjZXNzOiBib29sZWFuO1xyXG4gICAgaXRlbT86IFBhcnNlZExpa2VJdGVtO1xyXG4gICAgZXJyb3I/OiBQYXJzZUVycm9yO1xyXG4gIH0ge1xyXG4gICAgLy8g56e76Zmk5pa55ous5Y+3XHJcbiAgICBjb25zdCBjb250ZW50ID0gbGluZS5zbGljZSgxLCAtMSk7XHJcblxyXG4gICAgLy8g5a6J5YWo5YiG5q61XHJcbiAgICBjb25zdCBzZWdtZW50cyA9IHRoaXMuc3BsaXRXaXRoUXVvdGVzKGNvbnRlbnQsICd8Jyk7XHJcblxyXG4gICAgLy8g6aqM6K+B5q615pWw77yI5b+F6aG7M+aute+8iVxyXG4gICAgaWYgKHNlZ21lbnRzLmxlbmd0aCAhPT0gMykge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiB0aGlzLmNyZWF0ZUVycm9yKGBsaW5lXyR7bGluZU5vfWAsIGDngrnotZ7moLzlvI/plJnor6/vvJrlupTkuLoz5q6177yM5a6e6ZmFJHtzZWdtZW50cy5sZW5ndGh95q61YCksXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8g6Kej5p6Q55uu5qCH57yW5Y+3XHJcbiAgICBjb25zdCBub01hdGNoID0gc2VnbWVudHNbMF0ubWF0Y2goL17ngrnotZ5fKFxcZCspJC8pO1xyXG4gICAgaWYgKCFub01hdGNoKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IHRoaXMuY3JlYXRlRXJyb3IoYGxpbmVfJHtsaW5lTm99YCwgJ+eCuei1nuebruagh+e8luWPt+agvOW8j+mUmeivrycpLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRhcmdldE5vID0gcGFyc2VJbnQobm9NYXRjaFsxXSk7XHJcbiAgICBjb25zdCBsaWtlciA9IHNlZ21lbnRzWzFdLnRyaW0oKTtcclxuICAgIGNvbnN0IHRpbWVzdGFtcCA9IHNlZ21lbnRzWzJdLnRyaW0oKTtcclxuXHJcbiAgICAvLyDpqozor4Hml7bpl7TmoLzlvI9cclxuICAgIGlmICghdGhpcy52YWxpZGF0ZVRpbWVzdGFtcCh0aW1lc3RhbXApKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IHRoaXMuY3JlYXRlRXJyb3IoYGxpbmVfJHtsaW5lTm99YCwgYOaXtumXtOagvOW8j+mUmeivr++8miR7dGltZXN0YW1wfWApLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIGl0ZW06IHtcclxuICAgICAgICB0YXJnZXRObyxcclxuICAgICAgICBsaWtlcixcclxuICAgICAgICB0aW1lc3RhbXAsXHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5pSv5oyB5byV5Y+355qE5a6J5YWo5YiG5q61XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzcGxpdFdpdGhRdW90ZXModGV4dDogc3RyaW5nLCBkZWxpbWl0ZXI6IHN0cmluZyk6IHN0cmluZ1tdIHtcclxuICAgIGNvbnN0IHNlZ21lbnRzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgbGV0IGN1cnJlbnQgPSAnJztcclxuICAgIGxldCBpblF1b3RlcyA9IGZhbHNlO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGV4dC5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCBjaGFyID0gdGV4dFtpXTtcclxuICAgICAgY29uc3QgbmV4dENoYXIgPSB0ZXh0W2kgKyAxXTtcclxuXHJcbiAgICAgIGlmIChjaGFyID09PSAnXCInKSB7XHJcbiAgICAgICAgaWYgKG5leHRDaGFyID09PSAnXCInKSB7XHJcbiAgICAgICAgICAvLyDlj4zlvJXlj7fovazkuYlcclxuICAgICAgICAgIGN1cnJlbnQgKz0gJ1wiJztcclxuICAgICAgICAgIGkrKzsgLy8g6Lez6L+H5LiL5LiA5Liq5byV5Y+3XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIOWIh+aNouW8leWPt+eKtuaAgVxyXG4gICAgICAgICAgaW5RdW90ZXMgPSAhaW5RdW90ZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKGNoYXIgPT09IGRlbGltaXRlciAmJiAhaW5RdW90ZXMpIHtcclxuICAgICAgICAvLyDliIbpmpTnrKbvvIjkuI3lnKjlvJXlj7flhoXvvIlcclxuICAgICAgICBzZWdtZW50cy5wdXNoKGN1cnJlbnQpO1xyXG4gICAgICAgIGN1cnJlbnQgPSAnJztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjdXJyZW50ICs9IGNoYXI7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyDmt7vliqDmnIDlkI7kuIDmrrVcclxuICAgIGlmIChjdXJyZW50KSB7XHJcbiAgICAgIHNlZ21lbnRzLnB1c2goY3VycmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHNlZ21lbnRzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6aqM6K+B5pe26Ze05qC85byPIEhIOm1t77yI5LiO5raI5oGv5qC85byP5L+d5oyB5LiA6Ie077yJXHJcbiAgICovXHJcbiAgcHJpdmF0ZSB2YWxpZGF0ZVRpbWVzdGFtcCh0aW1lc3RhbXA6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgY29uc3QgcGF0dGVybiA9IC9eXFxkezJ9OlxcZHsyfSQvO1xyXG4gICAgcmV0dXJuIHBhdHRlcm4udGVzdCh0aW1lc3RhbXApO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/parsers/DynamicsParser.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/parsers/ProfileParser.ts": 
  /*!************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/parsers/ProfileParser.ts ***!
  \************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ProfileParser: () => (/* binding */ ProfileParser)\n/* harmony export */ });\n/* harmony import */ var _DataParser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./DataParser */ \"./src/多云熊/备份/给rovo的/modules/parsers/DataParser.ts\");\n/**\n * 个人主页数据解析器\n * 专门解析个人主页格式的数据\n */\n\nclass ProfileParser extends _DataParser__WEBPACK_IMPORTED_MODULE_0__.DataParser {\n    config;\n    constructor(config = {}) {\n        super();\n        this.config = {\n            enablePartialParsing: true,\n            enableErrorRecovery: true,\n            logErrors: true,\n            ...config,\n        };\n    }\n    /**\n     * 解析个人主页数据\n     * @param text 输入文本\n     * @returns 解析结果\n     */\n    parse(text) {\n        const errors = [];\n        const warnings = [];\n        try {\n            // 提取个人主页数据块\n            const profileBlock = this.extractProfileBlock(text);\n            if (!profileBlock) {\n                return {\n                    success: false,\n                    data: null,\n                    errors: [this.createError('format', '未找到个人主页数据块，请检查格式是否正确')],\n                    warnings: [],\n                };\n            }\n            // 解析基本信息\n            const basicInfo = this.parseBasicInfo(profileBlock.content, profileBlock.characterName);\n            errors.push(...basicInfo.errors);\n            warnings.push(...basicInfo.warnings);\n            // 解析动态\n            const posts = this.parsePosts(profileBlock.content);\n            errors.push(...posts.errors);\n            warnings.push(...posts.warnings);\n            // 构建完整数据\n            const profileData = {\n                ...basicInfo.data,\n                posts: posts.data,\n            };\n            // 验证数据完整性\n            const validationErrors = this.validateProfileData(profileData);\n            errors.push(...validationErrors);\n            const success = errors.length === 0 || (this.config.enablePartialParsing && basicInfo.data.characterName);\n            if (this.config.logErrors && errors.length > 0) {\n                console.warn('个人主页解析错误:', errors);\n            }\n            return {\n                success,\n                data: success ? profileData : null,\n                errors,\n                warnings,\n            };\n        }\n        catch (error) {\n            const parseError = this.createError('parse', `解析失败: ${error.message}`);\n            if (this.config.logErrors) {\n                console.error('个人主页解析异常:', error);\n            }\n            return {\n                success: false,\n                data: null,\n                errors: [parseError],\n                warnings,\n            };\n        }\n    }\n    /**\n     * 提取个人主页数据块\n     * @param text 输入文本\n     * @returns 包含角色名和内容的对象\n     */\n    extractProfileBlock(text) {\n        // 尝试匹配 [{角色名}个人主页] 格式\n        const match = text.match(/\\[(.+?)个人主页\\]([\\s\\S]*?)\\[\\/\\1个人主页\\]/);\n        if (match) {\n            return {\n                characterName: match[1].trim(),\n                content: match[2].trim(),\n            };\n        }\n        // 如果没有找到，尝试更宽松的匹配\n        const fallbackContent = this.extractTagBlock(text, '个人主页') || this.extractTagBlock(text, '.*个人主页');\n        if (fallbackContent) {\n            return {\n                characterName: '', // 空字符串表示未能提取\n                content: fallbackContent,\n            };\n        }\n        return null;\n    }\n    /**\n     * 解析基本信息\n     * @param profileContent 个人主页内容\n     * @param extractedCharacterName 从标签中提取的角色名\n     * @returns 解析结果\n     */\n    parseBasicInfo(profileContent, extractedCharacterName) {\n        const errors = [];\n        const warnings = [];\n        const data = {};\n        // 解析键值对\n        const pairs = this.parseKeyValuePairs(profileContent);\n        // 使用提取的角色名，如果没有则使用备用方案\n        if (extractedCharacterName) {\n            data.characterName = extractedCharacterName;\n        }\n        else {\n            data.characterName = pairs.get('角色名') || pairs.get('网名') || '未知角色';\n            warnings.push('未能从标签中提取角色名，使用备用方案');\n        }\n        // 解析各个字段\n        data.avatar = pairs.get('头像') || '';\n        data.background = pairs.get('背景') || '';\n        data.displayName = pairs.get('网名') || data.characterName;\n        data.email = pairs.get('邮箱') || '';\n        data.bio = pairs.get('个性签名') || '';\n        // 解析数字字段\n        data.followingCount = this.safeParseInt(pairs.get('关注数') || '0');\n        data.followersCount = this.safeParseInt(pairs.get('粉丝数') || '0');\n        data.likesCount = this.safeParseInt(pairs.get('获赞数') || '0');\n        // 验证必填字段\n        const requiredFields = ['characterName', 'displayName'];\n        const fieldErrors = this.validateRequiredFields(data, requiredFields);\n        errors.push(...fieldErrors);\n        // 检查可选字段并添加警告\n        const optionalFields = ['avatar', 'background', 'email', 'bio'];\n        for (const field of optionalFields) {\n            if (!data[field]) {\n                warnings.push(`可选字段 \"${field}\" 未提供`);\n            }\n        }\n        return { data, errors, warnings };\n    }\n    /**\n     * 解析动态列表\n     * @param profileBlock 个人主页数据块\n     * @returns 解析结果\n     */\n    parsePosts(profileBlock) {\n        const errors = [];\n        const warnings = [];\n        const posts = [];\n        try {\n            // 查找动态部分\n            const dynamicsMatch = profileBlock.match(/动态：([\\s\\S]*?)(?=\\[\\/|$)/);\n            if (!dynamicsMatch) {\n                warnings.push('未找到动态数据');\n                return { data: posts, errors, warnings };\n            }\n            const dynamicsText = dynamicsMatch[1];\n            const postTexts = this.parsePostArray(dynamicsText);\n            for (let i = 0; i < postTexts.length; i++) {\n                try {\n                    const postData = this.parsePost(postTexts[i]);\n                    // 验证动态数据\n                    if (!postData.content) {\n                        errors.push(this.createError(`post_${i}`, `第 ${i + 1} 条动态缺少内容`));\n                        if (!this.config.enablePartialParsing) {\n                            continue;\n                        }\n                    }\n                    // 设置默认值\n                    const completePost = {\n                        content: postData.content || '',\n                        imageDescription: postData.imageDescription,\n                        likesCount: postData.likesCount || 0,\n                        sharesCount: postData.sharesCount || 0,\n                        comments: postData.comments || [],\n                    };\n                    posts.push(completePost);\n                }\n                catch (error) {\n                    const errorMsg = `解析第 ${i + 1} 条动态时出错: ${error.message}`;\n                    errors.push(this.createError(`post_${i}`, errorMsg));\n                    if (this.config.enableErrorRecovery) {\n                        warnings.push(`跳过第 ${i + 1} 条动态: ${errorMsg}`);\n                    }\n                }\n            }\n            if (posts.length === 0 && postTexts.length > 0) {\n                warnings.push('所有动态解析失败，返回空列表');\n            }\n        }\n        catch (error) {\n            errors.push(this.createError('posts', `解析动态列表时出错: ${error.message}`));\n        }\n        return { data: posts, errors, warnings };\n    }\n    /**\n     * 验证个人主页数据\n     * @param data 个人主页数据\n     * @returns 验证错误列表\n     */\n    validateProfileData(data) {\n        const errors = [];\n        // 验证数字字段范围\n        if (data.followingCount < 0) {\n            errors.push(this.createError('followingCount', '关注数不能为负数'));\n        }\n        if (data.followersCount < 0) {\n            errors.push(this.createError('followersCount', '粉丝数不能为负数'));\n        }\n        if (data.likesCount < 0) {\n            errors.push(this.createError('likesCount', '获赞数不能为负数'));\n        }\n        // 验证URL格式（如果提供了的话）\n        if (data.avatar && !this.isValidUrl(data.avatar)) {\n            errors.push(this.createError('avatar', '头像URL格式不正确'));\n        }\n        if (data.background && !this.isValidUrl(data.background)) {\n            errors.push(this.createError('background', '背景URL格式不正确'));\n        }\n        return errors;\n    }\n    /**\n     * 验证URL格式\n     * @param url URL字符串\n     * @returns 是否为有效URL\n     */\n    isValidUrl(url) {\n        try {\n            new URL(url);\n            return true;\n        }\n        catch {\n            // 也接受相对路径或者以 http/https 开头的字符串\n            return url.startsWith('http://') || url.startsWith('https://') || url.startsWith('/') || url.startsWith('./');\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvcGFyc2Vycy9Qcm9maWxlUGFyc2VyLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7OztHQUdHO0FBRXVDO0FBR25DLE1BQU0sYUFBYyxTQUFRLG1EQUFVO0lBQ25DLE1BQU0sQ0FBYztJQUU1QixZQUFZLFNBQXNCLEVBQUU7UUFDbEMsS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsTUFBTSxHQUFHO1lBQ1osb0JBQW9CLEVBQUUsSUFBSTtZQUMxQixtQkFBbUIsRUFBRSxJQUFJO1lBQ3pCLFNBQVMsRUFBRSxJQUFJO1lBQ2YsR0FBRyxNQUFNO1NBQ1YsQ0FBQztJQUNKLENBQUM7SUFFRDs7OztPQUlHO0lBQ0ksS0FBSyxDQUFDLElBQVk7UUFDdkIsTUFBTSxNQUFNLEdBQWlCLEVBQUUsQ0FBQztRQUNoQyxNQUFNLFFBQVEsR0FBYSxFQUFFLENBQUM7UUFFOUIsSUFBSSxDQUFDO1lBQ0gsWUFBWTtZQUNaLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNwRCxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7Z0JBQ2xCLE9BQU87b0JBQ0wsT0FBTyxFQUFFLEtBQUs7b0JBQ2QsSUFBSSxFQUFFLElBQUk7b0JBQ1YsTUFBTSxFQUFFLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLEVBQUUsc0JBQXNCLENBQUMsQ0FBQztvQkFDNUQsUUFBUSxFQUFFLEVBQUU7aUJBQ2IsQ0FBQztZQUNKLENBQUM7WUFFRCxTQUFTO1lBQ1QsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsT0FBTyxFQUFFLFlBQVksQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUN4RixNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ2pDLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxTQUFTLENB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LFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNoSCxDQUFDO0lBQ0gsQ0FBQztDQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy9wYXJzZXJzL1Byb2ZpbGVQYXJzZXIudHM/Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiDkuKrkurrkuLvpobXmlbDmja7op6PmnpDlmahcclxuICog5LiT6Zeo6Kej5p6Q5Liq5Lq65Li76aG15qC85byP55qE5pWw5o2uXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgRGF0YVBhcnNlciB9IGZyb20gJy4vRGF0YVBhcnNlcic7XHJcbmltcG9ydCB7IFBhcnNlQ29uZmlnLCBQYXJzZUVycm9yLCBQYXJzZVJlc3VsdCwgUmF3UHJvZmlsZURhdGEgfSBmcm9tICcuL3R5cGVzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBQcm9maWxlUGFyc2VyIGV4dGVuZHMgRGF0YVBhcnNlciB7XHJcbiAgcHJpdmF0ZSBjb25maWc6IFBhcnNlQ29uZmlnO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFBhcnNlQ29uZmlnID0ge30pIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLmNvbmZpZyA9IHtcclxuICAgICAgZW5hYmxlUGFydGlhbFBhcnNpbmc6IHRydWUsXHJcbiAgICAgIGVuYWJsZUVycm9yUmVjb3Zlcnk6IHRydWUsXHJcbiAgICAgIGxvZ0Vycm9yczogdHJ1ZSxcclxuICAgICAgLi4uY29uZmlnLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOino+aekOS4quS6uuS4u+mhteaVsOaNrlxyXG4gICAqIEBwYXJhbSB0ZXh0IOi+k+WFpeaWh+acrFxyXG4gICAqIEByZXR1cm5zIOino+aekOe7k+aenFxyXG4gICAqL1xyXG4gIHB1YmxpYyBwYXJzZSh0ZXh0OiBzdHJpbmcpOiBQYXJzZVJlc3VsdDxSYXdQcm9maWxlRGF0YT4ge1xyXG4gICAgY29uc3QgZXJyb3JzOiBQYXJzZUVycm9yW10gPSBbXTtcclxuICAgIGNvbnN0IHdhcm5pbmdzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOaPkOWPluS4quS6uuS4u+mhteaVsOaNruWdl1xyXG4gICAgICBjb25zdCBwcm9maWxlQmxvY2sgPSB0aGlzLmV4dHJhY3RQcm9maWxlQmxvY2sodGV4dCk7XHJcbiAgICAgIGlmICghcHJvZmlsZUJsb2NrKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgZGF0YTogbnVsbCxcclxuICAgICAgICAgIGVycm9yczogW3RoaXMuY3JlYXRlRXJyb3IoJ2Zvcm1hdCcsICfmnKrmib7liLDkuKrkurrkuLvpobXmlbDmja7lnZfvvIzor7fmo4Dmn6XmoLzlvI/mmK/lkKbmraPnoa4nKV0sXHJcbiAgICAgICAgICB3YXJuaW5nczogW10sXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g6Kej5p6Q5Z+65pys5L+h5oGvXHJcbiAgICAgIGNvbnN0IGJhc2ljSW5mbyA9IHRoaXMucGFyc2VCYXNpY0luZm8ocHJvZmlsZUJsb2NrLmNvbnRlbnQsIHByb2ZpbGVCbG9jay5jaGFyYWN0ZXJOYW1lKTtcclxuICAgICAgZXJyb3JzLnB1c2goLi4uYmFzaWNJbmZvLmVycm9ycyk7XHJcbiAgICAgIHdhcm5pbmdzLnB1c2goLi4uYmFzaWNJbmZvLndhcm5pbmdzKTtcclxuXHJcbiAgICAgIC8vIOino+aekOWKqOaAgVxyXG4gICAgICBjb25zdCBwb3N0cyA9IHRoaXMucGFyc2VQb3N0cyhwcm9maWxlQmxvY2suY29udGVudCk7XHJcbiAgICAgIGVycm9ycy5wdXNoKC4uLnBvc3RzLmVycm9ycyk7XHJcbiAgICAgIHdhcm5pbmdzLnB1c2goLi4ucG9zdHMud2FybmluZ3MpO1xyXG5cclxuICAgICAgLy8g5p6E5bu65a6M5pW05pWw5o2uXHJcbiAgICAgIGNvbnN0IHByb2ZpbGVEYXRhOiBSYXdQcm9maWxlRGF0YSA9IHtcclxuICAgICAgICAuLi5iYXNpY0luZm8uZGF0YSxcclxuICAgICAgICBwb3N0czogcG9zdHMuZGF0YSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIOmqjOivgeaVsOaNruWujOaVtOaAp1xyXG4gICAgICBjb25zdCB2YWxpZGF0aW9uRXJyb3JzID0gdGhpcy52YWxpZGF0ZVByb2ZpbGVEYXRhKHByb2ZpbGVEYXRhKTtcclxuICAgICAgZXJyb3JzLnB1c2goLi4udmFsaWRhdGlvbkVycm9ycyk7XHJcblxyXG4gICAgICBjb25zdCBzdWNjZXNzID0gZXJyb3JzLmxlbmd0aCA9PT0gMCB8fCAodGhpcy5jb25maWcuZW5hYmxlUGFydGlhbFBhcnNpbmcgJiYgYmFzaWNJbmZvLmRhdGEuY2hhcmFjdGVyTmFtZSk7XHJcblxyXG4gICAgICBpZiAodGhpcy5jb25maWcubG9nRXJyb3JzICYmIGVycm9ycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKCfkuKrkurrkuLvpobXop6PmnpDplJnor686JywgZXJyb3JzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzLFxyXG4gICAgICAgIGRhdGE6IHN1Y2Nlc3MgPyBwcm9maWxlRGF0YSA6IG51bGwsXHJcbiAgICAgICAgZXJyb3JzLFxyXG4gICAgICAgIHdhcm5pbmdzLFxyXG4gICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc3QgcGFyc2VFcnJvciA9IHRoaXMuY3JlYXRlRXJyb3IoJ3BhcnNlJywgYOino+aekOWksei0pTogJHtlcnJvci5tZXNzYWdlfWApO1xyXG5cclxuICAgICAgaWYgKHRoaXMuY29uZmlnLmxvZ0Vycm9ycykge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+S4quS6uuS4u+mhteino+aekOW8guW4uDonLCBlcnJvcik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZGF0YTogbnVsbCxcclxuICAgICAgICBlcnJvcnM6IFtwYXJzZUVycm9yXSxcclxuICAgICAgICB3YXJuaW5ncyxcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaPkOWPluS4quS6uuS4u+mhteaVsOaNruWdl1xyXG4gICAqIEBwYXJhbSB0ZXh0IOi+k+WFpeaWh+acrFxyXG4gICAqIEByZXR1cm5zIOWMheWQq+inkuiJsuWQjeWSjOWGheWuueeahOWvueixoVxyXG4gICAqL1xyXG4gIHByaXZhdGUgZXh0cmFjdFByb2ZpbGVCbG9jayh0ZXh0OiBzdHJpbmcpOiB7IGNoYXJhY3Rlck5hbWU6IHN0cmluZzsgY29udGVudDogc3RyaW5nIH0gfCBudWxsIHtcclxuICAgIC8vIOWwneivleWMuemFjSBbe+inkuiJsuWQjX3kuKrkurrkuLvpobVdIOagvOW8j1xyXG4gICAgY29uc3QgbWF0Y2ggPSB0ZXh0Lm1hdGNoKC9cXFsoLis/KeS4quS6uuS4u+mhtVxcXShbXFxzXFxTXSo/KVxcW1xcL1xcMeS4quS6uuS4u+mhtVxcXS8pO1xyXG4gICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgY2hhcmFjdGVyTmFtZTogbWF0Y2hbMV0udHJpbSgpLFxyXG4gICAgICAgIGNvbnRlbnQ6IG1hdGNoWzJdLnRyaW0oKSxcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDlpoLmnpzmsqHmnInmib7liLDvvIzlsJ3or5Xmm7Tlrr3mnb7nmoTljLnphY1cclxuICAgIGNvbnN0IGZhbGxiYWNrQ29udGVudCA9IHRoaXMuZXh0cmFjdFRhZ0Jsb2NrKHRleHQsICfkuKrkurrkuLvpobUnKSB8fCB0aGlzLmV4dHJhY3RUYWdCbG9jayh0ZXh0LCAnLirkuKrkurrkuLvpobUnKTtcclxuICAgIGlmIChmYWxsYmFja0NvbnRlbnQpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBjaGFyYWN0ZXJOYW1lOiAnJywgLy8g56m65a2X56ym5Liy6KGo56S65pyq6IO95o+Q5Y+WXHJcbiAgICAgICAgY29udGVudDogZmFsbGJhY2tDb250ZW50LFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6Kej5p6Q5Z+65pys5L+h5oGvXHJcbiAgICogQHBhcmFtIHByb2ZpbGVDb250ZW50IOS4quS6uuS4u+mhteWGheWuuVxyXG4gICAqIEBwYXJhbSBleHRyYWN0ZWRDaGFyYWN0ZXJOYW1lIOS7juagh+etvuS4reaPkOWPlueahOinkuiJsuWQjVxyXG4gICAqIEByZXR1cm5zIOino+aekOe7k+aenFxyXG4gICAqL1xyXG4gIHByaXZhdGUgcGFyc2VCYXNpY0luZm8oXHJcbiAgICBwcm9maWxlQ29udGVudDogc3RyaW5nLFxyXG4gICAgZXh0cmFjdGVkQ2hhcmFjdGVyTmFtZTogc3RyaW5nLFxyXG4gICk6IHtcclxuICAgIGRhdGE6IFBhcnRpYWw8UmF3UHJvZmlsZURhdGE+O1xyXG4gICAgZXJyb3JzOiBQYXJzZUVycm9yW107XHJcbiAgICB3YXJuaW5nczogc3RyaW5nW107XHJcbiAgfSB7XHJcbiAgICBjb25zdCBlcnJvcnM6IFBhcnNlRXJyb3JbXSA9IFtdO1xyXG4gICAgY29uc3Qgd2FybmluZ3M6IHN0cmluZ1tdID0gW107XHJcbiAgICBjb25zdCBkYXRhOiBQYXJ0aWFsPFJhd1Byb2ZpbGVEYXRhPiA9IHt9O1xyXG5cclxuICAgIC8vIOino+aekOmUruWAvOWvuVxyXG4gICAgY29uc3QgcGFpcnMgPSB0aGlzLnBhcnNlS2V5VmFsdWVQYWlycyhwcm9maWxlQ29udGVudCk7XHJcblxyXG4gICAgLy8g5L2/55So5o+Q5Y+W55qE6KeS6Imy5ZCN77yM5aaC5p6c5rKh5pyJ5YiZ5L2/55So5aSH55So5pa55qGIXHJcbiAgICBpZiAoZXh0cmFjdGVkQ2hhcmFjdGVyTmFtZSkge1xyXG4gICAgICBkYXRhLmNoYXJhY3Rlck5hbWUgPSBleHRyYWN0ZWRDaGFyYWN0ZXJOYW1lO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZGF0YS5jaGFyYWN0ZXJOYW1lID0gcGFpcnMuZ2V0KCfop5LoibLlkI0nKSB8fCBwYWlycy5nZXQoJ+e9keWQjScpIHx8ICfmnKrnn6Xop5LoibInO1xyXG4gICAgICB3YXJuaW5ncy5wdXNoKCfmnKrog73ku47moIfnrb7kuK3mj5Dlj5bop5LoibLlkI3vvIzkvb/nlKjlpIfnlKjmlrnmoYgnKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDop6PmnpDlkITkuKrlrZfmrrVcclxuICAgIGRhdGEuYXZhdGFyID0gcGFpcnMuZ2V0KCflpLTlg48nKSB8fCAnJztcclxuICAgIGRhdGEuYmFja2dyb3VuZCA9IHBhaXJzLmdldCgn6IOM5pmvJykgfHwgJyc7XHJcbiAgICBkYXRhLmRpc3BsYXlOYW1lID0gcGFpcnMuZ2V0KCfnvZHlkI0nKSB8fCBkYXRhLmNoYXJhY3Rlck5hbWU7XHJcbiAgICBkYXRhLmVtYWlsID0gcGFpcnMuZ2V0KCfpgq7nrrEnKSB8fCAnJztcclxuICAgIGRhdGEuYmlvID0gcGFpcnMuZ2V0KCfkuKrmgKfnrb7lkI0nKSB8fCAnJztcclxuXHJcbiAgICAvLyDop6PmnpDmlbDlrZflrZfmrrVcclxuICAgIGRhdGEuZm9sbG93aW5nQ291bnQgPSB0aGlzLnNhZmVQYXJzZUludChwYWlycy5nZXQoJ+WFs+azqOaVsCcpIHx8ICcwJyk7XHJcbiAgICBkYXRhLmZvbGxvd2Vyc0NvdW50ID0gdGhpcy5zYWZlUGFyc2VJbnQocGFpcnMuZ2V0KCfnsonkuJ3mlbAnKSB8fCAnMCcpO1xyXG4gICAgZGF0YS5saWtlc0NvdW50ID0gdGhpcy5zYWZlUGFyc2VJbnQocGFpcnMuZ2V0KCfojrfotZ7mlbAnKSB8fCAnMCcpO1xyXG5cclxuICAgIC8vIOmqjOivgeW/heWhq+Wtl+autVxyXG4gICAgY29uc3QgcmVxdWlyZWRGaWVsZHMgPSBbJ2NoYXJhY3Rlck5hbWUnLCAnZGlzcGxheU5hbWUnXTtcclxuICAgIGNvbnN0IGZpZWxkRXJyb3JzID0gdGhpcy52YWxpZGF0ZVJlcXVpcmVkRmllbGRzKGRhdGEsIHJlcXVpcmVkRmllbGRzKTtcclxuICAgIGVycm9ycy5wdXNoKC4uLmZpZWxkRXJyb3JzKTtcclxuXHJcbiAgICAvLyDmo4Dmn6Xlj6/pgInlrZfmrrXlubbmt7vliqDorablkYpcclxuICAgIGNvbnN0IG9wdGlvbmFsRmllbGRzID0gWydhdmF0YXInLCAnYmFja2dyb3VuZCcsICdlbWFpbCcsICdiaW8nXTtcclxuICAgIGZvciAoY29uc3QgZmllbGQgb2Ygb3B0aW9uYWxGaWVsZHMpIHtcclxuICAgICAgaWYgKCFkYXRhW2ZpZWxkXSkge1xyXG4gICAgICAgIHdhcm5pbmdzLnB1c2goYOWPr+mAieWtl+autSBcIiR7ZmllbGR9XCIg5pyq5o+Q5L6bYCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBkYXRhLCBlcnJvcnMsIHdhcm5pbmdzIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDop6PmnpDliqjmgIHliJfooahcclxuICAgKiBAcGFyYW0gcHJvZmlsZUJsb2NrIOS4quS6uuS4u+mhteaVsOaNruWdl1xyXG4gICAqIEByZXR1cm5zIOino+aekOe7k+aenFxyXG4gICAqL1xyXG4gIHByaXZhdGUgcGFyc2VQb3N0cyhwcm9maWxlQmxvY2s6IHN0cmluZyk6IHsgZGF0YTogYW55W107IGVycm9yczogUGFyc2VFcnJvcltdOyB3YXJuaW5nczogc3RyaW5nW10gfSB7XHJcbiAgICBjb25zdCBlcnJvcnM6IFBhcnNlRXJyb3JbXSA9IFtdO1xyXG4gICAgY29uc3Qgd2FybmluZ3M6IHN0cmluZ1tdID0gW107XHJcbiAgICBjb25zdCBwb3N0czogYW55W10gPSBbXTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDmn6Xmib7liqjmgIHpg6jliIZcclxuICAgICAgY29uc3QgZHluYW1pY3NNYXRjaCA9IHByb2ZpbGVCbG9jay5tYXRjaCgv5Yqo5oCB77yaKFtcXHNcXFNdKj8pKD89XFxbXFwvfCQpLyk7XHJcbiAgICAgIGlmICghZHluYW1pY3NNYXRjaCkge1xyXG4gICAgICAgIHdhcm5pbmdzLnB1c2goJ+acquaJvuWIsOWKqOaAgeaVsOaNricpO1xyXG4gICAgICAgIHJldHVybiB7IGRhdGE6IHBvc3RzLCBlcnJvcnMsIHdhcm5pbmdzIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGR5bmFtaWNzVGV4dCA9IGR5bmFtaWNzTWF0Y2hbMV07XHJcbiAgICAgIGNvbnN0IHBvc3RUZXh0cyA9IHRoaXMucGFyc2VQb3N0QXJyYXkoZHluYW1pY3NUZXh0KTtcclxuXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9zdFRleHRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IHBvc3REYXRhID0gdGhpcy5wYXJzZVBvc3QocG9zdFRleHRzW2ldKTtcclxuXHJcbiAgICAgICAgICAvLyDpqozor4HliqjmgIHmlbDmja5cclxuICAgICAgICAgIGlmICghcG9zdERhdGEuY29udGVudCkge1xyXG4gICAgICAgICAgICBlcnJvcnMucHVzaCh0aGlzLmNyZWF0ZUVycm9yKGBwb3N0XyR7aX1gLCBg56ysICR7aSArIDF9IOadoeWKqOaAgee8uuWwkeWGheWuuWApKTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmNvbmZpZy5lbmFibGVQYXJ0aWFsUGFyc2luZykge1xyXG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8g6K6+572u6buY6K6k5YC8XHJcbiAgICAgICAgICBjb25zdCBjb21wbGV0ZVBvc3QgPSB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IHBvc3REYXRhLmNvbnRlbnQgfHwgJycsXHJcbiAgICAgICAgICAgIGltYWdlRGVzY3JpcHRpb246IHBvc3REYXRhLmltYWdlRGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIGxpa2VzQ291bnQ6IHBvc3REYXRhLmxpa2VzQ291bnQgfHwgMCxcclxuICAgICAgICAgICAgc2hhcmVzQ291bnQ6IHBvc3REYXRhLnNoYXJlc0NvdW50IHx8IDAsXHJcbiAgICAgICAgICAgIGNvbW1lbnRzOiBwb3N0RGF0YS5jb21tZW50cyB8fCBbXSxcclxuICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgcG9zdHMucHVzaChjb21wbGV0ZVBvc3QpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zdCBlcnJvck1zZyA9IGDop6PmnpDnrKwgJHtpICsgMX0g5p2h5Yqo5oCB5pe25Ye66ZSZOiAke2Vycm9yLm1lc3NhZ2V9YDtcclxuICAgICAgICAgIGVycm9ycy5wdXNoKHRoaXMuY3JlYXRlRXJyb3IoYHBvc3RfJHtpfWAsIGVycm9yTXNnKSk7XHJcblxyXG4gICAgICAgICAgaWYgKHRoaXMuY29uZmlnLmVuYWJsZUVycm9yUmVjb3ZlcnkpIHtcclxuICAgICAgICAgICAgd2FybmluZ3MucHVzaChg6Lez6L+H56ysICR7aSArIDF9IOadoeWKqOaAgTogJHtlcnJvck1zZ31gKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChwb3N0cy5sZW5ndGggPT09IDAgJiYgcG9zdFRleHRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICB3YXJuaW5ncy5wdXNoKCfmiYDmnInliqjmgIHop6PmnpDlpLHotKXvvIzov5Tlm57nqbrliJfooagnKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgZXJyb3JzLnB1c2godGhpcy5jcmVhdGVFcnJvcigncG9zdHMnLCBg6Kej5p6Q5Yqo5oCB5YiX6KGo5pe25Ye66ZSZOiAke2Vycm9yLm1lc3NhZ2V9YCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IGRhdGE6IHBvc3RzLCBlcnJvcnMsIHdhcm5pbmdzIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDpqozor4HkuKrkurrkuLvpobXmlbDmja5cclxuICAgKiBAcGFyYW0gZGF0YSDkuKrkurrkuLvpobXmlbDmja5cclxuICAgKiBAcmV0dXJucyDpqozor4HplJnor6/liJfooahcclxuICAgKi9cclxuICBwcml2YXRlIHZhbGlkYXRlUHJvZmlsZURhdGEoZGF0YTogUmF3UHJvZmlsZURhdGEpOiBQYXJzZUVycm9yW10ge1xyXG4gICAgY29uc3QgZXJyb3JzOiBQYXJzZUVycm9yW10gPSBbXTtcclxuXHJcbiAgICAvLyDpqozor4HmlbDlrZflrZfmrrXojIPlm7RcclxuICAgIGlmIChkYXRhLmZvbGxvd2luZ0NvdW50IDwgMCkge1xyXG4gICAgICBlcnJvcnMucHVzaCh0aGlzLmNyZWF0ZUVycm9yKCdmb2xsb3dpbmdDb3VudCcsICflhbPms6jmlbDkuI3og73kuLrotJ/mlbAnKSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZGF0YS5mb2xsb3dlcnNDb3VudCA8IDApIHtcclxuICAgICAgZXJyb3JzLnB1c2godGhpcy5jcmVhdGVFcnJvcignZm9sbG93ZXJzQ291bnQnLCAn57KJ5Lid5pWw5LiN6IO95Li66LSf5pWwJykpO1xyXG4gICAgfVxyXG4gICAgaWYgKGRhdGEubGlrZXNDb3VudCA8IDApIHtcclxuICAgICAgZXJyb3JzLnB1c2godGhpcy5jcmVhdGVFcnJvcignbGlrZXNDb3VudCcsICfojrfotZ7mlbDkuI3og73kuLrotJ/mlbAnKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g6aqM6K+BVVJM5qC85byP77yI5aaC5p6c5o+Q5L6b5LqG55qE6K+d77yJXHJcbiAgICBpZiAoZGF0YS5hdmF0YXIgJiYgIXRoaXMuaXNWYWxpZFVybChkYXRhLmF2YXRhcikpIHtcclxuICAgICAgZXJyb3JzLnB1c2godGhpcy5jcmVhdGVFcnJvcignYXZhdGFyJywgJ+WktOWDj1VSTOagvOW8j+S4jeato+ehricpKTtcclxuICAgIH1cclxuICAgIGlmIChkYXRhLmJhY2tncm91bmQgJiYgIXRoaXMuaXNWYWxpZFVybChkYXRhLmJhY2tncm91bmQpKSB7XHJcbiAgICAgIGVycm9ycy5wdXNoKHRoaXMuY3JlYXRlRXJyb3IoJ2JhY2tncm91bmQnLCAn6IOM5pmvVVJM5qC85byP5LiN5q2j56GuJykpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBlcnJvcnM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDpqozor4FVUkzmoLzlvI9cclxuICAgKiBAcGFyYW0gdXJsIFVSTOWtl+espuS4slxyXG4gICAqIEByZXR1cm5zIOaYr+WQpuS4uuacieaViFVSTFxyXG4gICAqL1xyXG4gIHByaXZhdGUgaXNWYWxpZFVybCh1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgbmV3IFVSTCh1cmwpO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gY2F0Y2gge1xyXG4gICAgICAvLyDkuZ/mjqXlj5fnm7jlr7not6/lvoTmiJbogIXku6UgaHR0cC9odHRwcyDlvIDlpLTnmoTlrZfnrKbkuLJcclxuICAgICAgcmV0dXJuIHVybC5zdGFydHNXaXRoKCdodHRwOi8vJykgfHwgdXJsLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykgfHwgdXJsLnN0YXJ0c1dpdGgoJy8nKSB8fCB1cmwuc3RhcnRzV2l0aCgnLi8nKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/parsers/ProfileParser.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/parsers/index.ts": 
  /*!****************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/parsers/index.ts ***!
  \****************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DataConverter: () => (/* reexport safe */ _DataConverter__WEBPACK_IMPORTED_MODULE_0__.DataConverter),\n/* harmony export */   DataParser: () => (/* reexport safe */ _DataParser__WEBPACK_IMPORTED_MODULE_1__.DataParser),\n/* harmony export */   DynamicsBuilder: () => (/* reexport safe */ _DynamicsBuilder__WEBPACK_IMPORTED_MODULE_2__.DynamicsBuilder),\n/* harmony export */   DynamicsParser: () => (/* reexport safe */ _DynamicsParser__WEBPACK_IMPORTED_MODULE_3__.DynamicsParser),\n/* harmony export */   ProfileParser: () => (/* reexport safe */ _ProfileParser__WEBPACK_IMPORTED_MODULE_4__.ProfileParser)\n/* harmony export */ });\n/* harmony import */ var _DataConverter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./DataConverter */ "./src/多云熊/备份/给rovo的/modules/parsers/DataConverter.ts");\n/* harmony import */ var _DataParser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DataParser */ "./src/多云熊/备份/给rovo的/modules/parsers/DataParser.ts");\n/* harmony import */ var _DynamicsBuilder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./DynamicsBuilder */ "./src/多云熊/备份/给rovo的/modules/parsers/DynamicsBuilder.ts");\n/* harmony import */ var _DynamicsParser__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./DynamicsParser */ "./src/多云熊/备份/给rovo的/modules/parsers/DynamicsParser.ts");\n/* harmony import */ var _ProfileParser__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ProfileParser */ "./src/多云熊/备份/给rovo的/modules/parsers/ProfileParser.ts");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./types */ "./src/多云熊/备份/给rovo的/modules/parsers/types.ts");\n/**\n * 解析器模块导出文件\n */\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvcGFyc2Vycy9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFBOztHQUVHO0FBRTZDO0FBQ047QUFDVTtBQUNGO0FBQ0Y7QUFDeEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WkmuS6keeGii/lpIfku70v57uZcm92b+eahC9tb2R1bGVzL3BhcnNlcnMvaW5kZXgudHM/Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiDop6PmnpDlmajmqKHlnZflr7zlh7rmlofku7ZcclxuICovXHJcblxyXG5leHBvcnQgeyBEYXRhQ29udmVydGVyIH0gZnJvbSAnLi9EYXRhQ29udmVydGVyJztcclxuZXhwb3J0IHsgRGF0YVBhcnNlciB9IGZyb20gJy4vRGF0YVBhcnNlcic7XHJcbmV4cG9ydCB7IER5bmFtaWNzQnVpbGRlciB9IGZyb20gJy4vRHluYW1pY3NCdWlsZGVyJztcclxuZXhwb3J0IHsgRHluYW1pY3NQYXJzZXIgfSBmcm9tICcuL0R5bmFtaWNzUGFyc2VyJztcclxuZXhwb3J0IHsgUHJvZmlsZVBhcnNlciB9IGZyb20gJy4vUHJvZmlsZVBhcnNlcic7XHJcbmV4cG9ydCAqIGZyb20gJy4vdHlwZXMnO1xyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/parsers/index.ts\n\n}');
  },
  "./src/多云熊/备份/给rovo的/modules/parsers/types.ts": 
  /*!****************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/parsers/types.ts ***!
  \****************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/**\n * 解析器模块类型定义\n */\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvcGFyc2Vycy90eXBlcy50cyIsIm1hcHBpbmdzIjoiO0FBQUE7O0dBRUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WkmuS6keeGii/lpIfku70v57uZcm92b+eahC9tb2R1bGVzL3BhcnNlcnMvdHlwZXMudHM/Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiDop6PmnpDlmajmqKHlnZfnsbvlnovlrprkuYlcclxuICovXHJcblxyXG4vLyDop6PmnpDnu5PmnpzmjqXlj6NcclxuZXhwb3J0IGludGVyZmFjZSBQYXJzZVJlc3VsdDxUPiB7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICBkYXRhOiBUIHwgbnVsbDtcclxuICBlcnJvcnM6IFBhcnNlRXJyb3JbXTtcclxuICB3YXJuaW5nczogc3RyaW5nW107XHJcbn1cclxuXHJcbi8vIOino+aekOmUmeivr+aOpeWPo1xyXG5leHBvcnQgaW50ZXJmYWNlIFBhcnNlRXJyb3Ige1xyXG4gIGZpZWxkOiBzdHJpbmc7XHJcbiAgbWVzc2FnZTogc3RyaW5nO1xyXG4gIHBvc2l0aW9uPzogbnVtYmVyO1xyXG59XHJcblxyXG4vLyDljp/lp4vliqjmgIHmnaHnm67mlbDmja5cclxuZXhwb3J0IGludGVyZmFjZSBSYXdQb3N0RGF0YSB7XHJcbiAgbm8/OiBudW1iZXI7ICAgICAgICAgICAgICAgICAvLyDliqjmgIHnvJblj7fvvIjnlKjkuo7mjpLluo/kuI7ljLnphY3lm57lpI3vvIlcclxuICBtZXNzYWdlSWQ/OiBudW1iZXI7ICAgICAgICAgIC8vIOa2iOaBr+alvOWxgklE77yI55So5LqO5o6S5bqP77yJXHJcbiAgYXV0aG9yTmFtZT86IHN0cmluZzsgICAgICAgICAvLyDkvZzogIXlkI3vvIjlj6/pgInvvIznvLrnnIHkvb/nlKjlvZPliY3nlKjmiLfvvIlcclxuICBjb250ZW50OiBzdHJpbmc7XHJcbiAgaW1hZ2VEZXNjcmlwdGlvbj86IHN0cmluZztcclxuICBpbWFnZVVybD86IHN0cmluZzsgICAgICAgICAgIC8vIOebtOaOpeaPkOS+m+WbvueJh1VSTO+8iOS8mOWFiOS6juaPj+i/sOeUn+aIkO+8iVxyXG4gIHRpbWVzdGFtcD86IHN0cmluZzsgICAgICAgICAgLy8g5paw5aKe77ya5qCH5YeG5pe26Ze05a2X56ym5Liy77yIWVlZWS1NTS1ERCBISDptbSDmiJYgSVNPIDg2MDHvvIlcclxuICBsaWtlc0NvdW50OiBudW1iZXI7XHJcbiAgbGlrZWRCeT86IHN0cmluZ1tdOyAgICAgICAgICAvLyDngrnotZ7ogIXlp5PlkI3liJfooajvvIjnlKjkuo7mmL7npLrngrnotZ7op5LoibLvvIlcclxuICBzaGFyZXNDb3VudDogbnVtYmVyO1xyXG4gIGNvbW1lbnRzOiBSYXdDb21tZW50RGF0YVtdO1xyXG59XHJcblxyXG4vLyDljp/lp4vor4TorrrmlbDmja5cclxuZXhwb3J0IGludGVyZmFjZSBSYXdDb21tZW50RGF0YSB7XHJcbiAgYXV0aG9yTmFtZTogc3RyaW5nO1xyXG4gIGNvbnRlbnQ6IHN0cmluZztcclxufVxyXG5cclxuLy8g6Kej5p6Q6YWN572uXHJcbmV4cG9ydCBpbnRlcmZhY2UgUGFyc2VDb25maWcge1xyXG4gIGVuYWJsZVBhcnRpYWxQYXJzaW5nPzogYm9vbGVhbjsgLy8g5piv5ZCm5ZCv55So6YOo5YiG6Kej5p6QXHJcbiAgZW5hYmxlRXJyb3JSZWNvdmVyeT86IGJvb2xlYW47IC8vIOaYr+WQpuWQr+eUqOmUmeivr+aBouWkjVxyXG4gIGxvZ0Vycm9ycz86IGJvb2xlYW47IC8vIOaYr+WQpuiusOW9lemUmeivr+aXpeW/l1xyXG59XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/parsers/types.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/profile/GlobalUserManager.ts": 
  /*!****************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/profile/GlobalUserManager.ts ***!
  \****************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GlobalUserManager: () => (/* binding */ GlobalUserManager)\n/* harmony export */ });\n/* harmony import */ var _StorageManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StorageManager */ \"./src/多云熊/备份/给rovo的/modules/profile/StorageManager.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./types */ \"./src/多云熊/备份/给rovo的/modules/profile/types.ts\");\n/**\n * GlobalUserManager - 全局用户信息管理器\n * 负责管理用户信息的全局同步和事件通知\n */\n\n\nclass GlobalUserManager {\n    static instance;\n    storageManager;\n    currentUserData = null;\n    eventListeners = new Map();\n    constructor() {\n        this.storageManager = _StorageManager__WEBPACK_IMPORTED_MODULE_0__.StorageManager.getInstance();\n    }\n    /**\n     * 获取单例实例\n     */\n    static getInstance() {\n        if (!GlobalUserManager.instance) {\n            GlobalUserManager.instance = new GlobalUserManager();\n        }\n        return GlobalUserManager.instance;\n    }\n    /**\n     * 初始化用户信息管理器\n     */\n    initialize() {\n        return new Promise(async (resolve, reject) => {\n            try {\n                await this.loadUserData();\n                resolve();\n            }\n            catch (error) {\n                this.handleError({\n                    type: _types__WEBPACK_IMPORTED_MODULE_1__.ErrorType.STORAGE_ERROR,\n                    message: '初始化用户信息管理器失败',\n                    details: error,\n                    timestamp: Date.now(),\n                });\n                reject(error);\n            }\n        });\n    }\n    /**\n     * 加载用户数据\n     */\n    async loadUserData() {\n        try {\n            // 首先尝试从本地存储加载自定义数据\n            let userData = this.storageManager.loadUserData();\n            if (!userData) {\n                // 如果没有自定义数据，获取默认数据\n                userData = await this.storageManager.getDefaultUserData();\n            }\n            this.currentUserData = userData;\n            return userData;\n        }\n        catch (error) {\n            this.handleError({\n                type: _types__WEBPACK_IMPORTED_MODULE_1__.ErrorType.STORAGE_ERROR,\n                message: '加载用户数据失败',\n                details: error,\n                timestamp: Date.now(),\n            });\n            // 返回备用数据\n            const fallbackData = {\n                name: '用户',\n                avatar: '',\n                isCustom: false,\n                lastUpdated: Date.now(),\n            };\n            this.currentUserData = fallbackData;\n            return fallbackData;\n        }\n    }\n    /**\n     * 获取当前用户数据\n     */\n    getCurrentUserData() {\n        return this.currentUserData;\n    }\n    /**\n     * 获取用户名称（优先使用缓存数据）\n     */\n    async getUserName() {\n        if (this.currentUserData?.isCustom) {\n            return this.currentUserData.name;\n        }\n        try {\n            // 直接使用 triggerSlash 函数获取用户名\n            const defaultName = await triggerSlash('/pass {{user}}');\n            return defaultName || '用户';\n        }\n        catch (error) {\n            this.handleError({\n                type: _types__WEBPACK_IMPORTED_MODULE_1__.ErrorType.NETWORK_ERROR,\n                message: '获取用户名称失败',\n                details: error,\n                timestamp: Date.now(),\n            });\n            return this.currentUserData?.name || '用户';\n        }\n    }\n    /**\n     * 获取用户头像（优先使用缓存数据）\n     */\n    async getUserAvatar() {\n        if (this.currentUserData?.isCustom) {\n            return this.currentUserData.avatar;\n        }\n        try {\n            // 直接使用 triggerSlash 函数获取用户头像\n            const defaultAvatar = await triggerSlash('/pass {{userAvatarPath}}');\n            return defaultAvatar || '';\n        }\n        catch (error) {\n            this.handleError({\n                type: _types__WEBPACK_IMPORTED_MODULE_1__.ErrorType.NETWORK_ERROR,\n                message: '获取用户头像失败',\n                details: error,\n                timestamp: Date.now(),\n            });\n            return this.currentUserData?.avatar || '';\n        }\n    }\n    /**\n     * 更新用户名称\n     */\n    async updateUserName(newName) {\n        const oldName = this.currentUserData?.name || '';\n        try {\n            const updatedData = {\n                name: newName,\n                avatar: this.currentUserData?.avatar || '',\n                isCustom: true,\n                lastUpdated: Date.now(),\n            };\n            this.storageManager.saveUserData(updatedData);\n            this.currentUserData = updatedData;\n            // 触发变更事件\n            this.emitUserInfoChange({\n                type: 'name',\n                oldValue: oldName,\n                newValue: newName,\n                timestamp: Date.now(),\n            });\n        }\n        catch (error) {\n            this.handleError({\n                type: _types__WEBPACK_IMPORTED_MODULE_1__.ErrorType.STORAGE_ERROR,\n                message: '更新用户名称失败',\n                details: error,\n                timestamp: Date.now(),\n            });\n            throw error;\n        }\n    }\n    /**\n     * 更新用户头像\n     */\n    async updateUserAvatar(newAvatar) {\n        const oldAvatar = this.currentUserData?.avatar || '';\n        try {\n            const updatedData = {\n                name: this.currentUserData?.name || '用户',\n                avatar: newAvatar,\n                isCustom: true,\n                lastUpdated: Date.now(),\n            };\n            this.storageManager.saveUserData(updatedData);\n            this.currentUserData = updatedData;\n            // 触发变更事件\n            this.emitUserInfoChange({\n                type: 'avatar',\n                oldValue: oldAvatar,\n                newValue: newAvatar,\n                timestamp: Date.now(),\n            });\n        }\n        catch (error) {\n            this.handleError({\n                type: _types__WEBPACK_IMPORTED_MODULE_1__.ErrorType.STORAGE_ERROR,\n                message: '更新用户头像失败',\n                details: error,\n                timestamp: Date.now(),\n            });\n            throw error;\n        }\n    }\n    /**\n     * 重置为默认用户信息\n     */\n    async resetToDefault() {\n        try {\n            // 清除自定义数据\n            this.storageManager.clearUserData();\n            // 重新加载默认数据\n            const defaultData = await this.storageManager.getDefaultUserData();\n            this.currentUserData = defaultData;\n            // 触发变更事件\n            this.emitUserInfoChange({\n                type: 'name',\n                oldValue: this.currentUserData?.name || '',\n                newValue: defaultData.name,\n                timestamp: Date.now(),\n            });\n            this.emitUserInfoChange({\n                type: 'avatar',\n                oldValue: this.currentUserData?.avatar || '',\n                newValue: defaultData.avatar,\n                timestamp: Date.now(),\n            });\n        }\n        catch (error) {\n            this.handleError({\n                type: _types__WEBPACK_IMPORTED_MODULE_1__.ErrorType.STORAGE_ERROR,\n                message: '重置用户信息失败',\n                details: error,\n                timestamp: Date.now(),\n            });\n            throw error;\n        }\n    }\n    /**\n     * 添加用户信息变更监听器\n     */\n    addEventListener(type, listener) {\n        if (!this.eventListeners.has(type)) {\n            this.eventListeners.set(type, []);\n        }\n        this.eventListeners.get(type).push(listener);\n    }\n    /**\n     * 移除用户信息变更监听器\n     */\n    removeEventListener(type, listener) {\n        const listeners = this.eventListeners.get(type);\n        if (listeners) {\n            const index = listeners.indexOf(listener);\n            if (index > -1) {\n                listeners.splice(index, 1);\n            }\n        }\n    }\n    /**\n     * 触发用户信息变更事件\n     */\n    emitUserInfoChange(event) {\n        // 触发特定类型的监听器\n        const typeListeners = this.eventListeners.get(event.type);\n        if (typeListeners) {\n            typeListeners.forEach(listener => {\n                try {\n                    listener(event);\n                }\n                catch (error) {\n                    console.error('用户信息变更监听器执行失败:', error);\n                }\n            });\n        }\n        // 触发全局监听器\n        const allListeners = this.eventListeners.get('all');\n        if (allListeners) {\n            allListeners.forEach(listener => {\n                try {\n                    listener(event);\n                }\n                catch (error) {\n                    console.error('用户信息变更监听器执行失败:', error);\n                }\n            });\n        }\n    }\n    /**\n     * 处理错误\n     */\n    handleError(errorInfo) {\n        console.error(`[GlobalUserManager] ${errorInfo.message}:`, errorInfo.details);\n        // 如果有 TavernHelper 的错误处理，使用它\n        if (window.TavernHelper?.errorCatched) {\n            window.TavernHelper.errorCatched(errorInfo);\n        }\n    }\n    /**\n     * 获取用户信息统计\n     */\n    getUserInfoStats() {\n        const userData = this.currentUserData;\n        return {\n            isCustom: userData?.isCustom || false,\n            lastUpdated: userData?.lastUpdated || 0,\n            hasAvatar: Boolean(userData?.avatar),\n            nameLength: userData?.name?.length || 0,\n        };\n    }\n    /**\n     * 验证用户数据\n     */\n    validateUserData(data) {\n        const errors = [];\n        if (data.name !== undefined) {\n            if (typeof data.name !== 'string') {\n                errors.push('用户名必须是字符串');\n            }\n            else if (data.name.length === 0) {\n                errors.push('用户名不能为空');\n            }\n            else if (data.name.length > 50) {\n                errors.push('用户名长度不能超过50个字符');\n            }\n        }\n        if (data.avatar !== undefined) {\n            if (typeof data.avatar !== 'string') {\n                errors.push('头像数据必须是字符串');\n            }\n        }\n        return {\n            isValid: errors.length === 0,\n            errors,\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvcHJvZmlsZS9HbG9iYWxVc2VyTWFuYWdlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7O0dBR0c7QUFFK0M7QUFDNEI7QUFTdkUsTUFBTSxpQkFBaUI7SUFDcEIsTUFBTSxDQUFDLFFBQVEsQ0FBb0I7SUFDbkMsY0FBYyxDQUFpQjtJQUMvQixlQUFlLEdBQW9CLElBQUksQ0FBQztJQUN4QyxjQUFjLEdBQTZELElBQUksR0FBRyxFQUFFLENBQUM7SUFFN0Y7UUFDRSxJQUFJLENBQUMsY0FBYyxHQUFHLDJEQUFjLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDckQsQ0FBQztJQUVEOztPQUVHO0lBQ0ksTUFBTSxDQUFDLFdBQVc7UUFDdkIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQ2hDLGlCQUFpQixDQUFDLFFBQVEsR0FBRyxJQUFJLGlCQUFpQixFQUFFLENBQUM7UUFDdkQsQ0FBQztRQUNELE9BQU8saUJBQWlCLENBQUMsUUFBUSxDQUFDO0lBQ3BDLENBQUM7SUFFRDs7T0FFRztJQUNJLFVBQVU7UUFDZixPQUFPLElBQUksT0FBTyxDQUFDLEtBQUssRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLEVBQUU7WUFDM0MsSUFBSSxDQUFDO2dCQUNILE1BQU0sSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO2dCQUMxQixPQUFPLEVBQUUsQ0FBQztZQUNaLENBQUM7WUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO2dCQUNmLElBQUksQ0FBQyxXQUFXLENBQUM7b0JBQ2YsSUFBSSxFQUFFLDZDQUFTLENBQUMsYUFBYTtvQkFDN0IsT0FBTyxFQUFFLGNBQWM7b0JBQ3ZCLE9BQU8sRUFBRSxLQUFLO29CQUNkLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2lCQUN0QixDQUFDLENBQUM7Z0JBQ0gsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ2hCLENBQUM7UUFDSCxD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QyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztZQUNoQyxDQUFDO1FBQ0gsQ0FBQztRQUVELElBQUksSUFBSSxDQUFDLE1BQU0sS0FBSyxTQUFTLEVBQUUsQ0FBQztZQUM5QixJQUFJLE9BQU8sSUFBSSxDQUFDLE1BQU0sS0FBSyxRQUFRLEVBQUUsQ0FBQztnQkFDcEMsTUFBTSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUM1QixDQUFDO1FBQ0gsQ0FBQztRQUVELE9BQU87WUFDTCxPQUFPLEVBQUUsTUFBTSxDQUFDLE1BQU0sS0FBSyxDQUFDO1lBQzVCLE1BQU07U0FDUCxDQUFDO0lBQ0osQ0FBQztDQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy9wcm9maWxlL0dsb2JhbFVzZXJNYW5hZ2VyLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogR2xvYmFsVXNlck1hbmFnZXIgLSDlhajlsYDnlKjmiLfkv6Hmga/nrqHnkIblmahcclxuICog6LSf6LSj566h55CG55So5oi35L+h5oGv55qE5YWo5bGA5ZCM5q2l5ZKM5LqL5Lu26YCa55+lXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgU3RvcmFnZU1hbmFnZXIgfSBmcm9tICcuL1N0b3JhZ2VNYW5hZ2VyJztcclxuaW1wb3J0IHsgRXJyb3JJbmZvLCBFcnJvclR5cGUsIFVzZXJEYXRhLCBVc2VySW5mb0NoYW5nZUV2ZW50IH0gZnJvbSAnLi90eXBlcyc7XHJcblxyXG5kZWNsYXJlIGNvbnN0IHdpbmRvdzogV2luZG93ICYge1xyXG4gIFRhdmVybkhlbHBlcjoge1xyXG4gICAgdHJpZ2dlclNsYXNoOiAoY29tbWFuZDogc3RyaW5nKSA9PiBQcm9taXNlPHN0cmluZz47XHJcbiAgICBlcnJvckNhdGNoZWQ6IChlcnJvcjogYW55KSA9PiB2b2lkO1xyXG4gIH07XHJcbn07XHJcblxyXG5leHBvcnQgY2xhc3MgR2xvYmFsVXNlck1hbmFnZXIge1xyXG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBHbG9iYWxVc2VyTWFuYWdlcjtcclxuICBwcml2YXRlIHN0b3JhZ2VNYW5hZ2VyOiBTdG9yYWdlTWFuYWdlcjtcclxuICBwcml2YXRlIGN1cnJlbnRVc2VyRGF0YTogVXNlckRhdGEgfCBudWxsID0gbnVsbDtcclxuICBwcml2YXRlIGV2ZW50TGlzdGVuZXJzOiBNYXA8c3RyaW5nLCBBcnJheTwoZXZlbnQ6IFVzZXJJbmZvQ2hhbmdlRXZlbnQpID0+IHZvaWQ+PiA9IG5ldyBNYXAoKTtcclxuXHJcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuc3RvcmFnZU1hbmFnZXIgPSBTdG9yYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5Y2V5L6L5a6e5L6LXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBHbG9iYWxVc2VyTWFuYWdlciB7XHJcbiAgICBpZiAoIUdsb2JhbFVzZXJNYW5hZ2VyLmluc3RhbmNlKSB7XHJcbiAgICAgIEdsb2JhbFVzZXJNYW5hZ2VyLmluc3RhbmNlID0gbmV3IEdsb2JhbFVzZXJNYW5hZ2VyKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gR2xvYmFsVXNlck1hbmFnZXIuaW5zdGFuY2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliJ3lp4vljJbnlKjmiLfkv6Hmga/nrqHnkIblmahcclxuICAgKi9cclxuICBwdWJsaWMgaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkVXNlckRhdGEoKTtcclxuICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XHJcbiAgICAgICAgICB0eXBlOiBFcnJvclR5cGUuU1RPUkFHRV9FUlJPUixcclxuICAgICAgICAgIG1lc3NhZ2U6ICfliJ3lp4vljJbnlKjmiLfkv6Hmga/nrqHnkIblmajlpLHotKUnLFxyXG4gICAgICAgICAgZGV0YWlsczogZXJyb3IsXHJcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliqDovb3nlKjmiLfmlbDmja5cclxuICAgKi9cclxuICBwdWJsaWMgYXN5bmMgbG9hZFVzZXJEYXRhKCk6IFByb21pc2U8VXNlckRhdGE+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOmmluWFiOWwneivleS7juacrOWcsOWtmOWCqOWKoOi9veiHquWumuS5ieaVsOaNrlxyXG4gICAgICBsZXQgdXNlckRhdGEgPSB0aGlzLnN0b3JhZ2VNYW5hZ2VyLmxvYWRVc2VyRGF0YSgpO1xyXG5cclxuICAgICAgaWYgKCF1c2VyRGF0YSkge1xyXG4gICAgICAgIC8vIOWmguaenOayoeacieiHquWumuS5ieaVsOaNru+8jOiOt+WPlum7mOiupOaVsOaNrlxyXG4gICAgICAgIHVzZXJEYXRhID0gYXdhaXQgdGhpcy5zdG9yYWdlTWFuYWdlci5nZXREZWZhdWx0VXNlckRhdGEoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5jdXJyZW50VXNlckRhdGEgPSB1c2VyRGF0YTtcclxuICAgICAgcmV0dXJuIHVzZXJEYXRhO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XHJcbiAgICAgICAgdHlwZTogRXJyb3JUeXBlLlNUT1JBR0VfRVJST1IsXHJcbiAgICAgICAgbWVzc2FnZTogJ+WKoOi9veeUqOaIt+aVsOaNruWksei0pScsXHJcbiAgICAgICAgZGV0YWlsczogZXJyb3IsXHJcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIOi/lOWbnuWkh+eUqOaVsOaNrlxyXG4gICAgICBjb25zdCBmYWxsYmFja0RhdGE6IFVzZXJEYXRhID0ge1xyXG4gICAgICAgIG5hbWU6ICfnlKjmiLcnLFxyXG4gICAgICAgIGF2YXRhcjogJycsXHJcbiAgICAgICAgaXNDdXN0b206IGZhbHNlLFxyXG4gICAgICAgIGxhc3RVcGRhdGVkOiBEYXRlLm5vdygpLFxyXG4gICAgICB9O1xyXG4gICAgICB0aGlzLmN1cnJlbnRVc2VyRGF0YSA9IGZhbGxiYWNrRGF0YTtcclxuICAgICAgcmV0dXJuIGZhbGxiYWNrRGF0YTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluW9k+WJjeeUqOaIt+aVsOaNrlxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRDdXJyZW50VXNlckRhdGEoKTogVXNlckRhdGEgfCBudWxsIHtcclxuICAgIHJldHVybiB0aGlzLmN1cnJlbnRVc2VyRGF0YTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPlueUqOaIt+WQjeensO+8iOS8mOWFiOS9v+eUqOe8k+WtmOaVsOaNru+8iVxyXG4gICAqL1xyXG4gIHB1YmxpYyBhc3luYyBnZXRVc2VyTmFtZSgpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgaWYgKHRoaXMuY3VycmVudFVzZXJEYXRhPy5pc0N1c3RvbSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5jdXJyZW50VXNlckRhdGEubmFtZTtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDnm7TmjqXkvb/nlKggdHJpZ2dlclNsYXNoIOWHveaVsOiOt+WPlueUqOaIt+WQjVxyXG4gICAgICBjb25zdCBkZWZhdWx0TmFtZSA9IGF3YWl0IHRyaWdnZXJTbGFzaCgnL3Bhc3Mge3t1c2VyfX0nKTtcclxuICAgICAgcmV0dXJuIGRlZmF1bHROYW1lIHx8ICfnlKjmiLcnO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XHJcbiAgICAgICAgdHlwZTogRXJyb3JUeXBlLk5FVFdPUktfRVJST1IsXHJcbiAgICAgICAgbWVzc2FnZTogJ+iOt+WPlueUqOaIt+WQjeensOWksei0pScsXHJcbiAgICAgICAgZGV0YWlsczogZXJyb3IsXHJcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFVzZXJEYXRhPy5uYW1lIHx8ICfnlKjmiLcnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W55So5oi35aS05YOP77yI5LyY5YWI5L2/55So57yT5a2Y5pWw5o2u77yJXHJcbiAgICovXHJcbiAgcHVibGljIGFzeW5jIGdldFVzZXJBdmF0YXIoKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIGlmICh0aGlzLmN1cnJlbnRVc2VyRGF0YT8uaXNDdXN0b20pIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFVzZXJEYXRhLmF2YXRhcjtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDnm7TmjqXkvb/nlKggdHJpZ2dlclNsYXNoIOWHveaVsOiOt+WPlueUqOaIt+WktOWDj1xyXG4gICAgICBjb25zdCBkZWZhdWx0QXZhdGFyID0gYXdhaXQgdHJpZ2dlclNsYXNoKCcvcGFzcyB7e3VzZXJBdmF0YXJQYXRofX0nKTtcclxuICAgICAgcmV0dXJuIGRlZmF1bHRBdmF0YXIgfHwgJyc7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLmhhbmRsZUVycm9yKHtcclxuICAgICAgICB0eXBlOiBFcnJvclR5cGUuTkVUV09SS19FUlJPUixcclxuICAgICAgICBtZXNzYWdlOiAn6I635Y+W55So5oi35aS05YOP5aSx6LSlJyxcclxuICAgICAgICBkZXRhaWxzOiBlcnJvcixcclxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gdGhpcy5jdXJyZW50VXNlckRhdGE/LmF2YXRhciB8fCAnJztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOabtOaWsOeUqOaIt+WQjeensFxyXG4gICAqL1xyXG4gIHB1YmxpYyBhc3luYyB1cGRhdGVVc2VyTmFtZShuZXdOYW1lOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnN0IG9sZE5hbWUgPSB0aGlzLmN1cnJlbnRVc2VyRGF0YT8ubmFtZSB8fCAnJztcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB1cGRhdGVkRGF0YTogVXNlckRhdGEgPSB7XHJcbiAgICAgICAgbmFtZTogbmV3TmFtZSxcclxuICAgICAgICBhdmF0YXI6IHRoaXMuY3VycmVudFVzZXJEYXRhPy5hdmF0YXIgfHwgJycsXHJcbiAgICAgICAgaXNDdXN0b206IHRydWUsXHJcbiAgICAgICAgbGFzdFVwZGF0ZWQ6IERhdGUubm93KCksXHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aGlzLnN0b3JhZ2VNYW5hZ2VyLnNhdmVVc2VyRGF0YSh1cGRhdGVkRGF0YSk7XHJcbiAgICAgIHRoaXMuY3VycmVudFVzZXJEYXRhID0gdXBkYXRlZERhdGE7XHJcblxyXG4gICAgICAvLyDop6blj5Hlj5jmm7Tkuovku7ZcclxuICAgICAgdGhpcy5lbWl0VXNlckluZm9DaGFuZ2Uoe1xyXG4gICAgICAgIHR5cGU6ICduYW1lJyxcclxuICAgICAgICBvbGRWYWx1ZTogb2xkTmFtZSxcclxuICAgICAgICBuZXdWYWx1ZTogbmV3TmFtZSxcclxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XHJcbiAgICAgICAgdHlwZTogRXJyb3JUeXBlLlNUT1JBR0VfRVJST1IsXHJcbiAgICAgICAgbWVzc2FnZTogJ+abtOaWsOeUqOaIt+WQjeensOWksei0pScsXHJcbiAgICAgICAgZGV0YWlsczogZXJyb3IsXHJcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICB9KTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmm7TmlrDnlKjmiLflpLTlg49cclxuICAgKi9cclxuICBwdWJsaWMgYXN5bmMgdXBkYXRlVXNlckF2YXRhcihuZXdBdmF0YXI6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc3Qgb2xkQXZhdGFyID0gdGhpcy5jdXJyZW50VXNlckRhdGE/LmF2YXRhciB8fCAnJztcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB1cGRhdGVkRGF0YTogVXNlckRhdGEgPSB7XHJcbiAgICAgICAgbmFtZTogdGhpcy5jdXJyZW50VXNlckRhdGE/Lm5hbWUgfHwgJ+eUqOaItycsXHJcbiAgICAgICAgYXZhdGFyOiBuZXdBdmF0YXIsXHJcbiAgICAgICAgaXNDdXN0b206IHRydWUsXHJcbiAgICAgICAgbGFzdFVwZGF0ZWQ6IERhdGUubm93KCksXHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aGlzLnN0b3JhZ2VNYW5hZ2VyLnNhdmVVc2VyRGF0YSh1cGRhdGVkRGF0YSk7XHJcbiAgICAgIHRoaXMuY3VycmVudFVzZXJEYXRhID0gdXBkYXRlZERhdGE7XHJcblxyXG4gICAgICAvLyDop6blj5Hlj5jmm7Tkuovku7ZcclxuICAgICAgdGhpcy5lbWl0VXNlckluZm9DaGFuZ2Uoe1xyXG4gICAgICAgIHR5cGU6ICdhdmF0YXInLFxyXG4gICAgICAgIG9sZFZhbHVlOiBvbGRBdmF0YXIsXHJcbiAgICAgICAgbmV3VmFsdWU6IG5ld0F2YXRhcixcclxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XHJcbiAgICAgICAgdHlwZTogRXJyb3JUeXBlLlNUT1JBR0VfRVJST1IsXHJcbiAgICAgICAgbWVzc2FnZTogJ+abtOaWsOeUqOaIt+WktOWDj+Wksei0pScsXHJcbiAgICAgICAgZGV0YWlsczogZXJyb3IsXHJcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICB9KTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDph43nva7kuLrpu5jorqTnlKjmiLfkv6Hmga9cclxuICAgKi9cclxuICBwdWJsaWMgYXN5bmMgcmVzZXRUb0RlZmF1bHQoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDmuIXpmaToh6rlrprkuYnmlbDmja5cclxuICAgICAgdGhpcy5zdG9yYWdlTWFuYWdlci5jbGVhclVzZXJEYXRhKCk7XHJcblxyXG4gICAgICAvLyDph43mlrDliqDovb3pu5jorqTmlbDmja5cclxuICAgICAgY29uc3QgZGVmYXVsdERhdGEgPSBhd2FpdCB0aGlzLnN0b3JhZ2VNYW5hZ2VyLmdldERlZmF1bHRVc2VyRGF0YSgpO1xyXG4gICAgICB0aGlzLmN1cnJlbnRVc2VyRGF0YSA9IGRlZmF1bHREYXRhO1xyXG5cclxuICAgICAgLy8g6Kem5Y+R5Y+Y5pu05LqL5Lu2XHJcbiAgICAgIHRoaXMuZW1pdFVzZXJJbmZvQ2hhbmdlKHtcclxuICAgICAgICB0eXBlOiAnbmFtZScsXHJcbiAgICAgICAgb2xkVmFsdWU6IHRoaXMuY3VycmVudFVzZXJEYXRhPy5uYW1lIHx8ICcnLFxyXG4gICAgICAgIG5ld1ZhbHVlOiBkZWZhdWx0RGF0YS5uYW1lLFxyXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLmVtaXRVc2VySW5mb0NoYW5nZSh7XHJcbiAgICAgICAgdHlwZTogJ2F2YXRhcicsXHJcbiAgICAgICAgb2xkVmFsdWU6IHRoaXMuY3VycmVudFVzZXJEYXRhPy5hdmF0YXIgfHwgJycsXHJcbiAgICAgICAgbmV3VmFsdWU6IGRlZmF1bHREYXRhLmF2YXRhcixcclxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XHJcbiAgICAgICAgdHlwZTogRXJyb3JUeXBlLlNUT1JBR0VfRVJST1IsXHJcbiAgICAgICAgbWVzc2FnZTogJ+mHjee9rueUqOaIt+S/oeaBr+Wksei0pScsXHJcbiAgICAgICAgZGV0YWlsczogZXJyb3IsXHJcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICB9KTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmt7vliqDnlKjmiLfkv6Hmga/lj5jmm7Tnm5HlkKzlmahcclxuICAgKi9cclxuICBwdWJsaWMgYWRkRXZlbnRMaXN0ZW5lcih0eXBlOiAnbmFtZScgfCAnYXZhdGFyJyB8ICdhbGwnLCBsaXN0ZW5lcjogKGV2ZW50OiBVc2VySW5mb0NoYW5nZUV2ZW50KSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICBpZiAoIXRoaXMuZXZlbnRMaXN0ZW5lcnMuaGFzKHR5cGUpKSB7XHJcbiAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuc2V0KHR5cGUsIFtdKTtcclxuICAgIH1cclxuICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KHR5cGUpIS5wdXNoKGxpc3RlbmVyKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOenu+mZpOeUqOaIt+S/oeaBr+WPmOabtOebkeWQrOWZqFxyXG4gICAqL1xyXG4gIHB1YmxpYyByZW1vdmVFdmVudExpc3RlbmVyKHR5cGU6ICduYW1lJyB8ICdhdmF0YXInIHwgJ2FsbCcsIGxpc3RlbmVyOiAoZXZlbnQ6IFVzZXJJbmZvQ2hhbmdlRXZlbnQpID0+IHZvaWQpOiB2b2lkIHtcclxuICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KHR5cGUpO1xyXG4gICAgaWYgKGxpc3RlbmVycykge1xyXG4gICAgICBjb25zdCBpbmRleCA9IGxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcclxuICAgICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6Kem5Y+R55So5oi35L+h5oGv5Y+Y5pu05LqL5Lu2XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBlbWl0VXNlckluZm9DaGFuZ2UoZXZlbnQ6IFVzZXJJbmZvQ2hhbmdlRXZlbnQpOiB2b2lkIHtcclxuICAgIC8vIOinpuWPkeeJueWumuexu+Wei+eahOebkeWQrOWZqFxyXG4gICAgY29uc3QgdHlwZUxpc3RlbmVycyA9IHRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KGV2ZW50LnR5cGUpO1xyXG4gICAgaWYgKHR5cGVMaXN0ZW5lcnMpIHtcclxuICAgICAgdHlwZUxpc3RlbmVycy5mb3JFYWNoKGxpc3RlbmVyID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgbGlzdGVuZXIoZXZlbnQpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfnlKjmiLfkv6Hmga/lj5jmm7Tnm5HlkKzlmajmiafooYzlpLHotKU6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g6Kem5Y+R5YWo5bGA55uR5ZCs5ZmoXHJcbiAgICBjb25zdCBhbGxMaXN0ZW5lcnMgPSB0aGlzLmV2ZW50TGlzdGVuZXJzLmdldCgnYWxsJyk7XHJcbiAgICBpZiAoYWxsTGlzdGVuZXJzKSB7XHJcbiAgICAgIGFsbExpc3RlbmVycy5mb3JFYWNoKGxpc3RlbmVyID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgbGlzdGVuZXIoZXZlbnQpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfnlKjmiLfkv6Hmga/lj5jmm7Tnm5HlkKzlmajmiafooYzlpLHotKU6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlpITnkIbplJnor69cclxuICAgKi9cclxuICBwcml2YXRlIGhhbmRsZUVycm9yKGVycm9ySW5mbzogRXJyb3JJbmZvKTogdm9pZCB7XHJcbiAgICBjb25zb2xlLmVycm9yKGBbR2xvYmFsVXNlck1hbmFnZXJdICR7ZXJyb3JJbmZvLm1lc3NhZ2V9OmAsIGVycm9ySW5mby5kZXRhaWxzKTtcclxuXHJcbiAgICAvLyDlpoLmnpzmnIkgVGF2ZXJuSGVscGVyIOeahOmUmeivr+WkhOeQhu+8jOS9v+eUqOWug1xyXG4gICAgaWYgKHdpbmRvdy5UYXZlcm5IZWxwZXI/LmVycm9yQ2F0Y2hlZCkge1xyXG4gICAgICB3aW5kb3cuVGF2ZXJuSGVscGVyLmVycm9yQ2F0Y2hlZChlcnJvckluZm8pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W55So5oi35L+h5oGv57uf6K6hXHJcbiAgICovXHJcbiAgcHVibGljIGdldFVzZXJJbmZvU3RhdHMoKToge1xyXG4gICAgaXNDdXN0b206IGJvb2xlYW47XHJcbiAgICBsYXN0VXBkYXRlZDogbnVtYmVyO1xyXG4gICAgaGFzQXZhdGFyOiBib29sZWFuO1xyXG4gICAgbmFtZUxlbmd0aDogbnVtYmVyO1xyXG4gIH0ge1xyXG4gICAgY29uc3QgdXNlckRhdGEgPSB0aGlzLmN1cnJlbnRVc2VyRGF0YTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlzQ3VzdG9tOiB1c2VyRGF0YT8uaXNDdXN0b20gfHwgZmFsc2UsXHJcbiAgICAgIGxhc3RVcGRhdGVkOiB1c2VyRGF0YT8ubGFzdFVwZGF0ZWQgfHwgMCxcclxuICAgICAgaGFzQXZhdGFyOiBCb29sZWFuKHVzZXJEYXRhPy5hdmF0YXIpLFxyXG4gICAgICBuYW1lTGVuZ3RoOiB1c2VyRGF0YT8ubmFtZT8ubGVuZ3RoIHx8IDAsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6aqM6K+B55So5oi35pWw5o2uXHJcbiAgICovXHJcbiAgcHVibGljIHZhbGlkYXRlVXNlckRhdGEoZGF0YTogUGFydGlhbDxVc2VyRGF0YT4pOiB7IGlzVmFsaWQ6IGJvb2xlYW47IGVycm9yczogc3RyaW5nW10gfSB7XHJcbiAgICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW107XHJcblxyXG4gICAgaWYgKGRhdGEubmFtZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGlmICh0eXBlb2YgZGF0YS5uYW1lICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIGVycm9ycy5wdXNoKCfnlKjmiLflkI3lv4XpobvmmK/lrZfnrKbkuLInKTtcclxuICAgICAgfSBlbHNlIGlmIChkYXRhLm5hbWUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgZXJyb3JzLnB1c2goJ+eUqOaIt+WQjeS4jeiDveS4uuepuicpO1xyXG4gICAgICB9IGVsc2UgaWYgKGRhdGEubmFtZS5sZW5ndGggPiA1MCkge1xyXG4gICAgICAgIGVycm9ycy5wdXNoKCfnlKjmiLflkI3plb/luqbkuI3og73otoXov4c1MOS4quWtl+espicpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRhdGEuYXZhdGFyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgaWYgKHR5cGVvZiBkYXRhLmF2YXRhciAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICBlcnJvcnMucHVzaCgn5aS05YOP5pWw5o2u5b+F6aG75piv5a2X56ym5LiyJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpc1ZhbGlkOiBlcnJvcnMubGVuZ3RoID09PSAwLFxyXG4gICAgICBlcnJvcnMsXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/profile/GlobalUserManager.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/profile/ImageProcessor.ts": 
  /*!*************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/profile/ImageProcessor.ts ***!
  \*************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ImageProcessor: () => (/* binding */ ImageProcessor)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ \"./src/多云熊/备份/给rovo的/modules/profile/types.ts\");\n/**\n * ImageProcessor - 图片处理工具类\n * 提供图片压缩、格式转换等功能，避免代码重复\n */\n\nclass ImageProcessor {\n    static instance;\n    constructor() { }\n    /**\n     * 获取单例实例\n     */\n    static getInstance() {\n        if (!ImageProcessor.instance) {\n            ImageProcessor.instance = new ImageProcessor();\n        }\n        return ImageProcessor.instance;\n    }\n    /**\n     * 将文件转换为base64\n     */\n    fileToBase64(file) {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onload = () => resolve(reader.result);\n            reader.onerror = reject;\n            reader.readAsDataURL(file);\n        });\n    }\n    /**\n     * 压缩图片\n     * @param base64 原始base64图片数据\n     * @param maxSize 最大尺寸（像素）\n     * @param quality 压缩质量（0-1）\n     */\n    async compressImage(base64, maxSize = 300, quality = _types__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_UPLOAD_CONFIG.quality) {\n        return new Promise(resolve => {\n            const img = new Image();\n            img.onload = () => {\n                const canvas = document.createElement('canvas');\n                const ctx = canvas.getContext('2d');\n                // 计算压缩后的尺寸\n                const { width, height } = this.calculateCompressedSize(img.width, img.height, maxSize);\n                canvas.width = width;\n                canvas.height = height;\n                // 使用高质量的图片缩放算法\n                ctx.imageSmoothingEnabled = true;\n                ctx.imageSmoothingQuality = 'high';\n                ctx.drawImage(img, 0, 0, width, height);\n                const compressedBase64 = canvas.toDataURL('image/jpeg', quality);\n                resolve(compressedBase64);\n            };\n            img.src = base64;\n        });\n    }\n    /**\n     * 批量处理图片（用于壁纸等大图片）\n     */\n    async compressWallpaper(base64) {\n        return this.compressImage(base64, 800, 0.8);\n    }\n    /**\n     * 处理头像图片\n     */\n    async compressAvatar(base64) {\n        return this.compressImage(base64, 300, 0.8);\n    }\n    /**\n     * 计算压缩后的尺寸\n     */\n    calculateCompressedSize(originalWidth, originalHeight, maxSize) {\n        let { width, height } = { width: originalWidth, height: originalHeight };\n        if (width > height) {\n            if (width > maxSize) {\n                height = (height * maxSize) / width;\n                width = maxSize;\n            }\n        }\n        else {\n            if (height > maxSize) {\n                width = (width * maxSize) / height;\n                height = maxSize;\n            }\n        }\n        return { width: Math.round(width), height: Math.round(height) };\n    }\n    /**\n     * 验证图片文件\n     */\n    validateImageFile(file) {\n        // 检查文件类型\n        if (!_types__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_UPLOAD_CONFIG.acceptedTypes.includes(file.type)) {\n            return {\n                isValid: false,\n                error: `不支持的文件类型。支持的格式：${_types__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_UPLOAD_CONFIG.acceptedTypes.join(', ')}`,\n            };\n        }\n        // 检查文件大小\n        if (file.size > _types__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_UPLOAD_CONFIG.maxSize) {\n            const maxSizeMB = _types__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_UPLOAD_CONFIG.maxSize / (1024 * 1024);\n            return {\n                isValid: false,\n                error: `文件大小超过限制。最大允许 ${maxSizeMB}MB`,\n            };\n        }\n        return { isValid: true };\n    }\n    /**\n     * 获取图片尺寸信息\n     */\n    getImageDimensions(base64) {\n        return new Promise(resolve => {\n            const img = new Image();\n            img.onload = () => {\n                resolve({ width: img.width, height: img.height });\n            };\n            img.src = base64;\n        });\n    }\n    /**\n     * 创建图片预览缩略图\n     */\n    async createThumbnail(base64, size = 100) {\n        return this.compressImage(base64, size, 0.7);\n    }\n    /**\n     * 清理canvas资源（防止内存泄漏）\n     */\n    static cleanupCanvas(canvas) {\n        const ctx = canvas.getContext('2d');\n        if (ctx) {\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n        }\n        canvas.width = 0;\n        canvas.height = 0;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvcHJvZmlsZS9JbWFnZVByb2Nlc3Nvci50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBOzs7R0FHRztBQUU2QztBQUV6QyxNQUFNLGNBQWM7SUFDakIsTUFBTSxDQUFDLFFBQVEsQ0FBaUI7SUFFeEMsZ0JBQXVCLENBQUM7SUFFeEI7O09BRUc7SUFDSSxNQUFNLENBQUMsV0FBVztRQUN2QixJQUFJLENBQUMsY0FBYyxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQzdCLGNBQWMsQ0FBQyxRQUFRLEdBQUcsSUFBSSxjQUFjLEVBQUUsQ0FBQztRQUNqRCxDQUFDO1FBQ0QsT0FBTyxjQUFjLENBQUMsUUFBUSxDQUFDO0lBQ2pDLENBQUM7SUFFRDs7T0FFRztJQUNJLFlBQVksQ0FBQyxJQUFVO1FBQzVCLE9BQU8sSUFBSSxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsTUFBTSxFQUFFLEVBQUU7WUFDckMsTUFBTSxNQUFNLEdBQUcsSUFBSSxVQUFVLEVBQUUsQ0FBQztZQUNoQyxNQUFNLENBQUMsTUFBTSxHQUFHLEdBQUcsRUFBRSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsTUFBZ0IsQ0FBQyxDQUFDO1lBQ3ZELE1BQU0sQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO1lBQ3hCLE1BQU0sQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDN0IsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSSxLQUFLLENBQUMsYUFBYSxDQUN4QixNQUFjLEVBQ2QsVUFBa0IsR0FBRyxFQUNyQixVQUFrQix5REFBcUIsQ0FBQyxPQUFPO1FBRS9DLE9BQU8sSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFDM0IsTUFBTSxHQUFHLEdBQUcsSUFBSSxLQUFLLEVBQUUsQ0FBQztZQUN4QixHQUFHLENBQUMsTUFBTSxHQUFHLEdBQUcsRUFBRTtnQkFDaEIsTUFBTSxNQUFNLEdBQUcs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Q0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQ2pCLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0lBQ3BCLENBQUM7Q0FDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvcHJvZmlsZS9JbWFnZVByb2Nlc3Nvci50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEltYWdlUHJvY2Vzc29yIC0g5Zu+54mH5aSE55CG5bel5YW357G7XHJcbiAqIOaPkOS+m+WbvueJh+WOi+e8qeOAgeagvOW8j+i9rOaNouetieWKn+iDve+8jOmBv+WFjeS7o+eggemHjeWkjVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IERFRkFVTFRfVVBMT0FEX0NPTkZJRyB9IGZyb20gJy4vdHlwZXMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEltYWdlUHJvY2Vzc29yIHtcclxuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogSW1hZ2VQcm9jZXNzb3I7XHJcblxyXG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7fVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bljZXkvovlrp7kvotcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldEluc3RhbmNlKCk6IEltYWdlUHJvY2Vzc29yIHtcclxuICAgIGlmICghSW1hZ2VQcm9jZXNzb3IuaW5zdGFuY2UpIHtcclxuICAgICAgSW1hZ2VQcm9jZXNzb3IuaW5zdGFuY2UgPSBuZXcgSW1hZ2VQcm9jZXNzb3IoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBJbWFnZVByb2Nlc3Nvci5pbnN0YW5jZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWwhuaWh+S7tui9rOaNouS4umJhc2U2NFxyXG4gICAqL1xyXG4gIHB1YmxpYyBmaWxlVG9CYXNlNjQoZmlsZTogRmlsZSk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgICByZWFkZXIub25sb2FkID0gKCkgPT4gcmVzb2x2ZShyZWFkZXIucmVzdWx0IGFzIHN0cmluZyk7XHJcbiAgICAgIHJlYWRlci5vbmVycm9yID0gcmVqZWN0O1xyXG4gICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Y6L57yp5Zu+54mHXHJcbiAgICogQHBhcmFtIGJhc2U2NCDljp/lp4tiYXNlNjTlm77niYfmlbDmja5cclxuICAgKiBAcGFyYW0gbWF4U2l6ZSDmnIDlpKflsLrlr7jvvIjlg4/ntKDvvIlcclxuICAgKiBAcGFyYW0gcXVhbGl0eSDljovnvKnotKjph4/vvIgwLTHvvIlcclxuICAgKi9cclxuICBwdWJsaWMgYXN5bmMgY29tcHJlc3NJbWFnZShcclxuICAgIGJhc2U2NDogc3RyaW5nLFxyXG4gICAgbWF4U2l6ZTogbnVtYmVyID0gMzAwLFxyXG4gICAgcXVhbGl0eTogbnVtYmVyID0gREVGQVVMVF9VUExPQURfQ09ORklHLnF1YWxpdHksXHJcbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XHJcbiAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJykhO1xyXG5cclxuICAgICAgICAvLyDorqHnrpfljovnvKnlkI7nmoTlsLrlr7hcclxuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuY2FsY3VsYXRlQ29tcHJlc3NlZFNpemUoaW1nLndpZHRoLCBpbWcuaGVpZ2h0LCBtYXhTaXplKTtcclxuXHJcbiAgICAgICAgY2FudmFzLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcclxuXHJcbiAgICAgICAgLy8g5L2/55So6auY6LSo6YeP55qE5Zu+54mH57yp5pS+566X5rOVXHJcbiAgICAgICAgY3R4LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgY3R4LmltYWdlU21vb3RoaW5nUXVhbGl0eSA9ICdoaWdoJztcclxuXHJcbiAgICAgICAgY3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xyXG5cclxuICAgICAgICBjb25zdCBjb21wcmVzc2VkQmFzZTY0ID0gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvanBlZycsIHF1YWxpdHkpO1xyXG4gICAgICAgIHJlc29sdmUoY29tcHJlc3NlZEJhc2U2NCk7XHJcbiAgICAgIH07XHJcbiAgICAgIGltZy5zcmMgPSBiYXNlNjQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaJuemHj+WkhOeQhuWbvueJh++8iOeUqOS6juWjgee6uOetieWkp+WbvueJh++8iVxyXG4gICAqL1xyXG4gIHB1YmxpYyBhc3luYyBjb21wcmVzc1dhbGxwYXBlcihiYXNlNjQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICByZXR1cm4gdGhpcy5jb21wcmVzc0ltYWdlKGJhc2U2NCwgODAwLCAwLjgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5aSE55CG5aS05YOP5Zu+54mHXHJcbiAgICovXHJcbiAgcHVibGljIGFzeW5jIGNvbXByZXNzQXZhdGFyKGJhc2U2NDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIHJldHVybiB0aGlzLmNvbXByZXNzSW1hZ2UoYmFzZTY0LCAzMDAsIDAuOCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDorqHnrpfljovnvKnlkI7nmoTlsLrlr7hcclxuICAgKi9cclxuICBwcml2YXRlIGNhbGN1bGF0ZUNvbXByZXNzZWRTaXplKFxyXG4gICAgb3JpZ2luYWxXaWR0aDogbnVtYmVyLFxyXG4gICAgb3JpZ2luYWxIZWlnaHQ6IG51bWJlcixcclxuICAgIG1heFNpemU6IG51bWJlcixcclxuICApOiB7IHdpZHRoOiBudW1iZXI7IGhlaWdodDogbnVtYmVyIH0ge1xyXG4gICAgbGV0IHsgd2lkdGgsIGhlaWdodCB9ID0geyB3aWR0aDogb3JpZ2luYWxXaWR0aCwgaGVpZ2h0OiBvcmlnaW5hbEhlaWdodCB9O1xyXG5cclxuICAgIGlmICh3aWR0aCA+IGhlaWdodCkge1xyXG4gICAgICBpZiAod2lkdGggPiBtYXhTaXplKSB7XHJcbiAgICAgICAgaGVpZ2h0ID0gKGhlaWdodCAqIG1heFNpemUpIC8gd2lkdGg7XHJcbiAgICAgICAgd2lkdGggPSBtYXhTaXplO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoaGVpZ2h0ID4gbWF4U2l6ZSkge1xyXG4gICAgICAgIHdpZHRoID0gKHdpZHRoICogbWF4U2l6ZSkgLyBoZWlnaHQ7XHJcbiAgICAgICAgaGVpZ2h0ID0gbWF4U2l6ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IHdpZHRoOiBNYXRoLnJvdW5kKHdpZHRoKSwgaGVpZ2h0OiBNYXRoLnJvdW5kKGhlaWdodCkgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmqjOivgeWbvueJh+aWh+S7tlxyXG4gICAqL1xyXG4gIHB1YmxpYyB2YWxpZGF0ZUltYWdlRmlsZShmaWxlOiBGaWxlKTogeyBpc1ZhbGlkOiBib29sZWFuOyBlcnJvcj86IHN0cmluZyB9IHtcclxuICAgIC8vIOajgOafpeaWh+S7tuexu+Wei1xyXG4gICAgaWYgKCFERUZBVUxUX1VQTE9BRF9DT05GSUcuYWNjZXB0ZWRUeXBlcy5pbmNsdWRlcyhmaWxlLnR5cGUpKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgaXNWYWxpZDogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IGDkuI3mlK/mjIHnmoTmlofku7bnsbvlnovjgILmlK/mjIHnmoTmoLzlvI/vvJoke0RFRkFVTFRfVVBMT0FEX0NPTkZJRy5hY2NlcHRlZFR5cGVzLmpvaW4oJywgJyl9YCxcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDmo4Dmn6Xmlofku7blpKflsI9cclxuICAgIGlmIChmaWxlLnNpemUgPiBERUZBVUxUX1VQTE9BRF9DT05GSUcubWF4U2l6ZSkge1xyXG4gICAgICBjb25zdCBtYXhTaXplTUIgPSBERUZBVUxUX1VQTE9BRF9DT05GSUcubWF4U2l6ZSAvICgxMDI0ICogMTAyNCk7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgaXNWYWxpZDogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IGDmlofku7blpKflsI/otoXov4fpmZDliLbjgILmnIDlpKflhYHorrggJHttYXhTaXplTUJ9TUJgLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IGlzVmFsaWQ6IHRydWUgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluWbvueJh+WwuuWvuOS/oeaBr1xyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRJbWFnZURpbWVuc2lvbnMoYmFzZTY0OiBzdHJpbmcpOiBQcm9taXNlPHsgd2lkdGg6IG51bWJlcjsgaGVpZ2h0OiBudW1iZXIgfT4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICByZXNvbHZlKHsgd2lkdGg6IGltZy53aWR0aCwgaGVpZ2h0OiBpbWcuaGVpZ2h0IH0pO1xyXG4gICAgICB9O1xyXG4gICAgICBpbWcuc3JjID0gYmFzZTY0O1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliJvlu7rlm77niYfpooTop4jnvKnnlaXlm75cclxuICAgKi9cclxuICBwdWJsaWMgYXN5bmMgY3JlYXRlVGh1bWJuYWlsKGJhc2U2NDogc3RyaW5nLCBzaXplOiBudW1iZXIgPSAxMDApOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgcmV0dXJuIHRoaXMuY29tcHJlc3NJbWFnZShiYXNlNjQsIHNpemUsIDAuNyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmuIXnkIZjYW52YXPotYTmupDvvIjpmLLmraLlhoXlrZjms4TmvI/vvIlcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGNsZWFudXBDYW52YXMoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCk6IHZvaWQge1xyXG4gICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICBpZiAoY3R4KSB7XHJcbiAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuICAgIH1cclxuICAgIGNhbnZhcy53aWR0aCA9IDA7XHJcbiAgICBjYW52YXMuaGVpZ2h0ID0gMDtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/profile/ImageProcessor.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/profile/ProfileInterface.ts": 
  /*!***************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/profile/ProfileInterface.ts ***!
  \***************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ProfileInterface: () => (/* binding */ ProfileInterface)\n/* harmony export */ });\n/* harmony import */ var _core_BottomNavigation__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/BottomNavigation */ \"./src/多云熊/备份/给rovo的/modules/core/BottomNavigation.ts\");\n/* harmony import */ var _core_StatusBar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/StatusBar */ \"./src/多云熊/备份/给rovo的/modules/core/StatusBar.ts\");\n/* harmony import */ var _extensions_ExtensionSettingsManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../extensions/ExtensionSettingsManager */ \"./src/多云熊/备份/给rovo的/modules/extensions/ExtensionSettingsManager.ts\");\n/* harmony import */ var _GlobalUserManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./GlobalUserManager */ \"./src/多云熊/备份/给rovo的/modules/profile/GlobalUserManager.ts\");\n/* harmony import */ var _SettingsModal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SettingsModal */ \"./src/多云熊/备份/给rovo的/modules/profile/SettingsModal.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./types */ \"./src/多云熊/备份/给rovo的/modules/profile/types.ts\");\n/* harmony import */ var _UserInfoSection__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./UserInfoSection */ \"./src/多云熊/备份/给rovo的/modules/profile/UserInfoSection.ts\");\n/**\n * ProfileInterface - 我的页面主界面组件\n * 负责整个\"我的\"页面的显示状态和组件协调\n */\n\n\n\n\n\n\n\nclass ProfileInterface {\n    state = _types__WEBPACK_IMPORTED_MODULE_5__.ComponentState.IDLE;\n    isActive = false;\n    // 子组件\n    userInfoSection;\n    settingsModal;\n    globalUserManager;\n    bottomNavigation;\n    // DOM 元素\n    profileInterface;\n    settingsButton;\n    extensionSettingsButton;\n    statusBar = null;\n    constructor() {\n        this.globalUserManager = _GlobalUserManager__WEBPACK_IMPORTED_MODULE_3__.GlobalUserManager.getInstance();\n        // 底部导航实例占位，实际挂载在 bindEvents 中通过 BottomNavigation.mountDefault 完成\n        this.bottomNavigation = new _core_BottomNavigation__WEBPACK_IMPORTED_MODULE_0__.BottomNavigation({\n            items: [],\n        });\n        this.initializeElements();\n        this.initializeComponents();\n        this.bindEvents();\n    }\n    /**\n     * 初始化DOM元素\n     */\n    initializeElements() {\n        this.profileInterface = document.getElementById('profileInterface');\n        this.settingsButton = document.getElementById('settingsButton');\n        this.extensionSettingsButton = document.getElementById('extensionSettingsButton');\n        // 初始化状态栏\n        this.initializeStatusBar();\n        if (!this.profileInterface) {\n            throw new Error('Profile interface element not found');\n        }\n    }\n    /**\n     * 初始化子组件\n     */\n    initializeComponents() {\n        this.userInfoSection = new _UserInfoSection__WEBPACK_IMPORTED_MODULE_6__.UserInfoSection();\n        this.settingsModal = new _SettingsModal__WEBPACK_IMPORTED_MODULE_4__.SettingsModal();\n    }\n    /**\n     * 绑定事件监听器\n     */\n    bindEvents() {\n        // 设置按钮点击事件\n        this.settingsButton.addEventListener('click', () => this.openSettings());\n        // 扩展设置按钮点击事件\n        this.extensionSettingsButton.addEventListener('click', () => this.openExtensionSettings());\n        // 初始化底部导航（仅在本页面容器内查找，避免与其他页面的 .bottom-nav 冲突）\n        const bottomNavContainer = this.profileInterface.querySelector('.bottom-nav');\n        if (bottomNavContainer) {\n            this.bottomNavigation = _core_BottomNavigation__WEBPACK_IMPORTED_MODULE_0__.BottomNavigation.mountDefault(bottomNavContainer, 'profile', {\n                feed: () => this.switchToFeed(),\n                messages: () => this.switchToChatList(),\n                profile: () => { },\n            });\n        }\n        else {\n            console.warn('[ProfileInterface] 未找到 .bottom-nav 容器，无法初始化底部导航');\n        }\n        // 监听页面可见性变化\n        document.addEventListener('visibilitychange', () => this.handleVisibilityChange());\n    }\n    /**\n     * 初始化页面\n     */\n    async initialize() {\n        try {\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_5__.ComponentState.LOADING);\n            // 初始化全局用户管理器\n            await this.globalUserManager.initialize();\n            // 初始化用户信息组件\n            await this.userInfoSection.initialize();\n            // 初始化设置模态框\n            await this.settingsModal.initialize();\n            // 状态栏会自动更新时间，无需手动设置定时器\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_5__.ComponentState.IDLE);\n        }\n        catch (error) {\n            this.handleError({\n                type: _types__WEBPACK_IMPORTED_MODULE_5__.ErrorType.STORAGE_ERROR,\n                message: '初始化我的页面失败',\n                details: error,\n                timestamp: Date.now(),\n            });\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_5__.ComponentState.ERROR);\n        }\n    }\n    /**\n     * 显示页面\n     */\n    show() {\n        if (this.isActive) {\n            return;\n        }\n        this.profileInterface.classList.add('active');\n        this.isActive = true;\n        // 设置底部导航活跃状态\n        this.bottomNavigation.setActiveItem('profile');\n        // 状态栏会自动更新时间\n        // 触发页面显示事件\n        this.onPageShow();\n    }\n    /**\n     * 隐藏页面\n     */\n    hide() {\n        if (!this.isActive) {\n            return;\n        }\n        this.profileInterface.classList.remove('active');\n        this.isActive = false;\n        // 关闭设置模态框\n        this.settingsModal.hide();\n        // 触发页面隐藏事件\n        this.onPageHide();\n    }\n    /**\n     * 打开设置\n     */\n    openSettings() {\n        if (this.state !== _types__WEBPACK_IMPORTED_MODULE_5__.ComponentState.IDLE) {\n            return;\n        }\n        this.settingsModal.show();\n    }\n    /**\n     * 打开扩展设置\n     */\n    openExtensionSettings() {\n        if (this.state !== _types__WEBPACK_IMPORTED_MODULE_5__.ComponentState.IDLE) {\n            return;\n        }\n        const extensionManager = _extensions_ExtensionSettingsManager__WEBPACK_IMPORTED_MODULE_2__.ExtensionSettingsManager.getInstance();\n        extensionManager.show();\n    }\n    /**\n     * 切换到聊天列表页面\n     */\n    switchToChatList() {\n        console.log('🔄 从我的页面切换到聊天列表');\n        // 触发页面切换事件\n        const event = new CustomEvent('pageSwitch', {\n            detail: {\n                from: 'profile',\n                to: 'chatList',\n            },\n        });\n        document.dispatchEvent(event);\n    }\n    /**\n     * 切换到\"动态\"页面\n     */\n    switchToFeed() {\n        console.log('🔄 从我的页面切换到动态页面');\n        const event = new CustomEvent('pageSwitch', {\n            detail: {\n                from: 'profile',\n                to: 'feed',\n            },\n        });\n        document.dispatchEvent(event);\n    }\n    /**\n     * 初始化状态栏\n     */\n    initializeStatusBar() {\n        const container = this.profileInterface.querySelector('.status-bar-container');\n        if (container) {\n            this.statusBar = _core_StatusBar__WEBPACK_IMPORTED_MODULE_1__.StatusBar.create(container);\n        }\n    }\n    /**\n     * 销毁状态栏\n     */\n    destroyStatusBar() {\n        if (this.statusBar) {\n            this.statusBar.destroy();\n            this.statusBar = null;\n        }\n    }\n    /**\n     * 处理页面可见性变化\n     */\n    handleVisibilityChange() {\n        if (!document.hidden && this.isActive) {\n            // 页面重新可见时，状态栏会自动更新时间\n            // StatusBar 组件内部已经处理了时间更新\n        }\n    }\n    /**\n     * 页面显示时的处理\n     */\n    onPageShow() {\n        // 刷新用户信息显示\n        this.refreshUserInfo();\n    }\n    /**\n     * 页面隐藏时的处理\n     */\n    onPageHide() {\n        // 保存当前状态\n        this.saveCurrentState();\n    }\n    /**\n     * 刷新用户信息\n     */\n    async refreshUserInfo() {\n        try {\n            await this.userInfoSection.initialize();\n        }\n        catch (error) {\n            console.warn('刷新用户信息失败:', error);\n        }\n    }\n    /**\n     * 保存当前状态\n     */\n    saveCurrentState() {\n        // 这里可以保存页面状态，如滚动位置等\n        try {\n            const state = {\n                timestamp: Date.now(),\n                isActive: this.isActive,\n            };\n            sessionStorage.setItem('profile_page_state', JSON.stringify(state));\n        }\n        catch (error) {\n            console.warn('保存页面状态失败:', error);\n        }\n    }\n    /**\n     * 恢复页面状态\n     */\n    restorePageState() {\n        try {\n            const stateStr = sessionStorage.getItem('profile_page_state');\n            if (stateStr) {\n                const state = JSON.parse(stateStr);\n                // 这里可以恢复页面状态\n                console.log('恢复页面状态:', state);\n            }\n        }\n        catch (error) {\n            console.warn('恢复页面状态失败:', error);\n        }\n    }\n    /**\n     * 触发页面切换事件\n     */\n    emitPageChangeEvent(targetPage) {\n        const event = new CustomEvent('pageChange', {\n            detail: {\n                from: 'profile',\n                to: targetPage,\n                timestamp: Date.now(),\n            },\n        });\n        document.dispatchEvent(event);\n    }\n    /**\n     * 设置组件状态\n     */\n    setState(newState) {\n        this.state = newState;\n        // 更新UI状态\n        this.profileInterface.classList.remove('loading', 'error');\n        switch (newState) {\n            case _types__WEBPACK_IMPORTED_MODULE_5__.ComponentState.LOADING:\n                this.profileInterface.classList.add('loading');\n                this.settingsButton.disabled = true;\n                this.extensionSettingsButton.disabled = true;\n                break;\n            case _types__WEBPACK_IMPORTED_MODULE_5__.ComponentState.ERROR:\n                this.profileInterface.classList.add('error');\n                this.settingsButton.disabled = true;\n                this.extensionSettingsButton.disabled = true;\n                break;\n            case _types__WEBPACK_IMPORTED_MODULE_5__.ComponentState.IDLE:\n                this.settingsButton.disabled = false;\n                this.extensionSettingsButton.disabled = false;\n                break;\n        }\n    }\n    /**\n     * 处理错误\n     */\n    handleError(errorInfo) {\n        console.error(`[ProfileInterface] ${errorInfo.message}:`, errorInfo.details);\n        toastr.error(errorInfo.message);\n    }\n    /**\n     * 获取当前状态\n     */\n    getState() {\n        return this.state;\n    }\n    /**\n     * 检查页面是否激活\n     */\n    isPageActive() {\n        return this.isActive;\n    }\n    /**\n     * 获取用户信息组件\n     */\n    getUserInfoSection() {\n        return this.userInfoSection;\n    }\n    /**\n     * 获取设置模态框组件\n     */\n    getSettingsModal() {\n        return this.settingsModal;\n    }\n    /**\n     * 销毁组件\n     */\n    destroy() {\n        // 销毁子组件\n        this.userInfoSection.destroy();\n        this.settingsModal.destroy();\n        // 清理状态\n        this.hide();\n        this.setState(_types__WEBPACK_IMPORTED_MODULE_5__.ComponentState.IDLE);\n        // 清理会话存储\n        try {\n            sessionStorage.removeItem('profile_page_state');\n        }\n        catch (error) {\n            console.warn('清理会话存储失败:', error);\n        }\n    }\n    /**\n     * 重新加载页面\n     */\n    async reload() {\n        try {\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_5__.ComponentState.LOADING);\n            // 重新初始化所有组件\n            await this.userInfoSection.initialize();\n            await this.settingsModal.initialize();\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_5__.ComponentState.IDLE);\n            toastr.success('页面重新加载成功');\n        }\n        catch (error) {\n            this.handleError({\n                type: _types__WEBPACK_IMPORTED_MODULE_5__.ErrorType.STORAGE_ERROR,\n                message: '重新加载页面失败',\n                details: error,\n                timestamp: Date.now(),\n            });\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_5__.ComponentState.ERROR);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvcHJvZmlsZS9Qcm9maWxlSW50ZXJmYWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7OztHQUdHO0FBRXlEO0FBQ2Q7QUFDb0M7QUFDMUI7QUFDUjtBQUNlO0FBQ1g7QUFTN0MsTUFBTSxnQkFBZ0I7SUFDbkIsS0FBSyxHQUFtQixrREFBYyxDQUFDLElBQUksQ0FBQztJQUM1QyxRQUFRLEdBQVksS0FBSyxDQUFDO0lBRWxDLE1BQU07SUFDRSxlQUFlLENBQW1CO0lBQ2xDLGFBQWEsQ0FBaUI7SUFDOUIsaUJBQWlCLENBQW9CO0lBQ3JDLGdCQUFnQixDQUFtQjtJQUUzQyxTQUFTO0lBQ0QsZ0JBQWdCLENBQWU7SUFDL0IsY0FBYyxDQUFxQjtJQUNuQyx1QkFBdUIsQ0FBcUI7SUFDNUMsU0FBUyxHQUFxQixJQUFJLENBQUM7SUFFM0M7UUFDRSxJQUFJLENBQUMsaUJBQWlCLEdBQUcsaUVBQWlCLENBQUMsV0FBVyxFQUFFLENBQUM7UUFFekQsaUVBQWlFO1FBQ2pFLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLG9FQUFnQixDQUFDO1lBQzNDLEtBQUssRUFBRSxFQUFFO1NBQ1YsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7UUFDMUIsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7UUFDNUIsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO0lBQ3BCLENBQUM7SUFFRDs7T0FFRztJQUNLLGtCQUFrQjtRQUN4QixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxrQkFBa0IsQ0FBRSxDQUFDO1FBQ3JFLElBQUksQ0FBQyxjQUFjLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBc0IsQ0FBQztRQUNyRixJQUFJLENBQUMsdUJBQXVCLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyx5QkFBeUIsQ0FBc0IsQ0FBQztR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LElBQUksQ0FBQyxXQUFXLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDbkMsQ0FBQztJQUNILENBQUM7SUFFRDs7T0FFRztJQUNJLEtBQUssQ0FBQyxNQUFNO1FBQ2pCLElBQUksQ0FBQztZQUNILElBQUksQ0FBQyxRQUFRLENBQUMsa0RBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUV0QyxZQUFZO1lBQ1osTUFBTSxJQUFJLENBQUMsZUFBZSxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQ3hDLE1BQU0sSUFBSSxDQUFDLGFBQWEsQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUV0QyxJQUFJLENBQUMsUUFBUSxDQUFDLGtEQUFjLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDbkMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUM3QixDQUFDO1FBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNmLElBQUksQ0FBQyxXQUFXLENBQUM7Z0JBQ2YsSUFBSSxFQUFFLDZDQUFTLENBQUMsYUFBYTtnQkFDN0IsT0FBTyxFQUFFLFVBQVU7Z0JBQ25CLE9BQU8sRUFBRSxLQUFLO2dCQUNkLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2FBQ3RCLENBQUMsQ0FBQztZQUNILElBQUksQ0FBQyxRQUFRLENBQUMsa0RBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN0QyxDQUFDO0lBQ0gsQ0FBQztDQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy9wcm9maWxlL1Byb2ZpbGVJbnRlcmZhY2UudHM/Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUHJvZmlsZUludGVyZmFjZSAtIOaIkeeahOmhtemdouS4u+eVjOmdoue7hOS7tlxuICog6LSf6LSj5pW05LiqXCLmiJHnmoRcIumhtemdoueahOaYvuekuueKtuaAgeWSjOe7hOS7tuWNj+iwg1xuICovXG5cbmltcG9ydCB7IEJvdHRvbU5hdmlnYXRpb24gfSBmcm9tICcuLi9jb3JlL0JvdHRvbU5hdmlnYXRpb24nO1xuaW1wb3J0IHsgU3RhdHVzQmFyIH0gZnJvbSAnLi4vY29yZS9TdGF0dXNCYXInO1xuaW1wb3J0IHsgRXh0ZW5zaW9uU2V0dGluZ3NNYW5hZ2VyIH0gZnJvbSAnLi4vZXh0ZW5zaW9ucy9FeHRlbnNpb25TZXR0aW5nc01hbmFnZXInO1xuaW1wb3J0IHsgR2xvYmFsVXNlck1hbmFnZXIgfSBmcm9tICcuL0dsb2JhbFVzZXJNYW5hZ2VyJztcbmltcG9ydCB7IFNldHRpbmdzTW9kYWwgfSBmcm9tICcuL1NldHRpbmdzTW9kYWwnO1xuaW1wb3J0IHsgQ29tcG9uZW50U3RhdGUsIEVycm9ySW5mbywgRXJyb3JUeXBlIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBVc2VySW5mb1NlY3Rpb24gfSBmcm9tICcuL1VzZXJJbmZvU2VjdGlvbic7XG5cbmRlY2xhcmUgY29uc3QgdG9hc3RyOiB7XG4gIHN1Y2Nlc3M6IChtZXNzYWdlOiBzdHJpbmcsIHRpdGxlPzogc3RyaW5nKSA9PiB2b2lkO1xuICBlcnJvcjogKG1lc3NhZ2U6IHN0cmluZywgdGl0bGU/OiBzdHJpbmcpID0+IHZvaWQ7XG4gIHdhcm5pbmc6IChtZXNzYWdlOiBzdHJpbmcsIHRpdGxlPzogc3RyaW5nKSA9PiB2b2lkO1xuICBpbmZvOiAobWVzc2FnZTogc3RyaW5nLCB0aXRsZT86IHN0cmluZykgPT4gdm9pZDtcbn07XG5cbmV4cG9ydCBjbGFzcyBQcm9maWxlSW50ZXJmYWNlIHtcbiAgcHJpdmF0ZSBzdGF0ZTogQ29tcG9uZW50U3RhdGUgPSBDb21wb25lbnRTdGF0ZS5JRExFO1xuICBwcml2YXRlIGlzQWN0aXZlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgLy8g5a2Q57uE5Lu2XG4gIHByaXZhdGUgdXNlckluZm9TZWN0aW9uITogVXNlckluZm9TZWN0aW9uO1xuICBwcml2YXRlIHNldHRpbmdzTW9kYWwhOiBTZXR0aW5nc01vZGFsO1xuICBwcml2YXRlIGdsb2JhbFVzZXJNYW5hZ2VyOiBHbG9iYWxVc2VyTWFuYWdlcjtcbiAgcHJpdmF0ZSBib3R0b21OYXZpZ2F0aW9uOiBCb3R0b21OYXZpZ2F0aW9uO1xuXG4gIC8vIERPTSDlhYPntKBcbiAgcHJpdmF0ZSBwcm9maWxlSW50ZXJmYWNlITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgc2V0dGluZ3NCdXR0b24hOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgcHJpdmF0ZSBleHRlbnNpb25TZXR0aW5nc0J1dHRvbiE6IEhUTUxCdXR0b25FbGVtZW50O1xuICBwcml2YXRlIHN0YXR1c0JhcjogU3RhdHVzQmFyIHwgbnVsbCA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5nbG9iYWxVc2VyTWFuYWdlciA9IEdsb2JhbFVzZXJNYW5hZ2VyLmdldEluc3RhbmNlKCk7XG5cbiAgICAvLyDlupXpg6jlr7zoiKrlrp7kvovljaDkvY3vvIzlrp7pmYXmjILovb3lnKggYmluZEV2ZW50cyDkuK3pgJrov4cgQm90dG9tTmF2aWdhdGlvbi5tb3VudERlZmF1bHQg5a6M5oiQXG4gICAgdGhpcy5ib3R0b21OYXZpZ2F0aW9uID0gbmV3IEJvdHRvbU5hdmlnYXRpb24oe1xuICAgICAgaXRlbXM6IFtdLFxuICAgIH0pO1xuXG4gICAgdGhpcy5pbml0aWFsaXplRWxlbWVudHMoKTtcbiAgICB0aGlzLmluaXRpYWxpemVDb21wb25lbnRzKCk7XG4gICAgdGhpcy5iaW5kRXZlbnRzKCk7XG4gIH1cblxuICAvKipcbiAgICog5Yid5aeL5YyWRE9N5YWD57SgXG4gICAqL1xuICBwcml2YXRlIGluaXRpYWxpemVFbGVtZW50cygpOiB2b2lkIHtcbiAgICB0aGlzLnByb2ZpbGVJbnRlcmZhY2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZmlsZUludGVyZmFjZScpITtcbiAgICB0aGlzLnNldHRpbmdzQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHRpbmdzQnV0dG9uJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgdGhpcy5leHRlbnNpb25TZXR0aW5nc0J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHRlbnNpb25TZXR0aW5nc0J1dHRvbicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuXG4gICAgLy8g5Yid5aeL5YyW54q25oCB5qCPXG4gICAgdGhpcy5pbml0aWFsaXplU3RhdHVzQmFyKCk7XG5cbiAgICBpZiAoIXRoaXMucHJvZmlsZUludGVyZmFjZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdQcm9maWxlIGludGVyZmFjZSBlbGVtZW50IG5vdCBmb3VuZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDliJ3lp4vljJblrZDnu4Tku7ZcbiAgICovXG4gIHByaXZhdGUgaW5pdGlhbGl6ZUNvbXBvbmVudHMoKTogdm9pZCB7XG4gICAgdGhpcy51c2VySW5mb1NlY3Rpb24gPSBuZXcgVXNlckluZm9TZWN0aW9uKCk7XG4gICAgdGhpcy5zZXR0aW5nc01vZGFsID0gbmV3IFNldHRpbmdzTW9kYWwoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDnu5Hlrprkuovku7bnm5HlkKzlmahcbiAgICovXG4gIHByaXZhdGUgYmluZEV2ZW50cygpOiB2b2lkIHtcbiAgICAvLyDorr7nva7mjInpkq7ngrnlh7vkuovku7ZcbiAgICB0aGlzLnNldHRpbmdzQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5vcGVuU2V0dGluZ3MoKSk7XG5cbiAgICAvLyDmianlsZXorr7nva7mjInpkq7ngrnlh7vkuovku7ZcbiAgICB0aGlzLmV4dGVuc2lvblNldHRpbmdzQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5vcGVuRXh0ZW5zaW9uU2V0dGluZ3MoKSk7XG5cbiAgICAvLyDliJ3lp4vljJblupXpg6jlr7zoiKrvvIjku4XlnKjmnKzpobXpnaLlrrnlmajlhoXmn6Xmib7vvIzpgb/lhY3kuI7lhbbku5bpobXpnaLnmoQgLmJvdHRvbS1uYXYg5Yay56qB77yJXG4gICAgY29uc3QgYm90dG9tTmF2Q29udGFpbmVyID0gdGhpcy5wcm9maWxlSW50ZXJmYWNlLnF1ZXJ5U2VsZWN0b3IoJy5ib3R0b20tbmF2JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKGJvdHRvbU5hdkNvbnRhaW5lcikge1xuICAgICAgdGhpcy5ib3R0b21OYXZpZ2F0aW9uID0gQm90dG9tTmF2aWdhdGlvbi5tb3VudERlZmF1bHQoYm90dG9tTmF2Q29udGFpbmVyLCAncHJvZmlsZScsIHtcbiAgICAgICAgZmVlZDogKCkgPT4gdGhpcy5zd2l0Y2hUb0ZlZWQoKSxcbiAgICAgICAgbWVzc2FnZXM6ICgpID0+IHRoaXMuc3dpdGNoVG9DaGF0TGlzdCgpLFxuICAgICAgICBwcm9maWxlOiAoKSA9PiB7fSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1tQcm9maWxlSW50ZXJmYWNlXSDmnKrmib7liLAgLmJvdHRvbS1uYXYg5a655Zmo77yM5peg5rOV5Yid5aeL5YyW5bqV6YOo5a+86IiqJyk7XG4gICAgfVxuXG4gICAgLy8g55uR5ZCs6aG16Z2i5Y+v6KeB5oCn5Y+Y5YyWXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsICgpID0+IHRoaXMuaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliJ3lp4vljJbpobXpnaJcbiAgICovXG4gIHB1YmxpYyBhc3luYyBpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLnNldFN0YXRlKENvbXBvbmVudFN0YXRlLkxPQURJTkcpO1xuXG4gICAgICAvLyDliJ3lp4vljJblhajlsYDnlKjmiLfnrqHnkIblmahcbiAgICAgIGF3YWl0IHRoaXMuZ2xvYmFsVXNlck1hbmFnZXIuaW5pdGlhbGl6ZSgpO1xuXG4gICAgICAvLyDliJ3lp4vljJbnlKjmiLfkv6Hmga/nu4Tku7ZcbiAgICAgIGF3YWl0IHRoaXMudXNlckluZm9TZWN0aW9uLmluaXRpYWxpemUoKTtcblxuICAgICAgLy8g5Yid5aeL5YyW6K6+572u5qih5oCB5qGGXG4gICAgICBhd2FpdCB0aGlzLnNldHRpbmdzTW9kYWwuaW5pdGlhbGl6ZSgpO1xuXG4gICAgICAvLyDnirbmgIHmoI/kvJroh6rliqjmm7TmlrDml7bpl7TvvIzml6DpnIDmiYvliqjorr7nva7lrprml7blmahcblxuICAgICAgdGhpcy5zZXRTdGF0ZShDb21wb25lbnRTdGF0ZS5JRExFKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XG4gICAgICAgIHR5cGU6IEVycm9yVHlwZS5TVE9SQUdFX0VSUk9SLFxuICAgICAgICBtZXNzYWdlOiAn5Yid5aeL5YyW5oiR55qE6aG16Z2i5aSx6LSlJyxcbiAgICAgICAgZGV0YWlsczogZXJyb3IsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5zZXRTdGF0ZShDb21wb25lbnRTdGF0ZS5FUlJPUik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOaYvuekuumhtemdolxuICAgKi9cbiAgcHVibGljIHNob3coKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNBY3RpdmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnByb2ZpbGVJbnRlcmZhY2UuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgdGhpcy5pc0FjdGl2ZSA9IHRydWU7XG5cbiAgICAvLyDorr7nva7lupXpg6jlr7zoiKrmtLvot4PnirbmgIFcbiAgICB0aGlzLmJvdHRvbU5hdmlnYXRpb24uc2V0QWN0aXZlSXRlbSgncHJvZmlsZScpO1xuXG4gICAgLy8g54q25oCB5qCP5Lya6Ieq5Yqo5pu05paw5pe26Ze0XG5cbiAgICAvLyDop6blj5HpobXpnaLmmL7npLrkuovku7ZcbiAgICB0aGlzLm9uUGFnZVNob3coKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDpmpDol4/pobXpnaJcbiAgICovXG4gIHB1YmxpYyBoaWRlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pc0FjdGl2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMucHJvZmlsZUludGVyZmFjZS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICB0aGlzLmlzQWN0aXZlID0gZmFsc2U7XG5cbiAgICAvLyDlhbPpl63orr7nva7mqKHmgIHmoYZcbiAgICB0aGlzLnNldHRpbmdzTW9kYWwuaGlkZSgpO1xuXG4gICAgLy8g6Kem5Y+R6aG16Z2i6ZqQ6JeP5LqL5Lu2XG4gICAgdGhpcy5vblBhZ2VIaWRlKCk7XG4gIH1cblxuICAvKipcbiAgICog5omT5byA6K6+572uXG4gICAqL1xuICBwcml2YXRlIG9wZW5TZXR0aW5ncygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zdGF0ZSAhPT0gQ29tcG9uZW50U3RhdGUuSURMRSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuc2V0dGluZ3NNb2RhbC5zaG93KCk7XG4gIH1cblxuICAvKipcbiAgICog5omT5byA5omp5bGV6K6+572uXG4gICAqL1xuICBwcml2YXRlIG9wZW5FeHRlbnNpb25TZXR0aW5ncygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zdGF0ZSAhPT0gQ29tcG9uZW50U3RhdGUuSURMRSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGV4dGVuc2lvbk1hbmFnZXIgPSBFeHRlbnNpb25TZXR0aW5nc01hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcbiAgICBleHRlbnNpb25NYW5hZ2VyLnNob3coKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliIfmjaLliLDogYrlpKnliJfooajpobXpnaJcbiAgICovXG4gIHByaXZhdGUgc3dpdGNoVG9DaGF0TGlzdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygn8J+UhCDku47miJHnmoTpobXpnaLliIfmjaLliLDogYrlpKnliJfooagnKTtcblxuICAgIC8vIOinpuWPkemhtemdouWIh+aNouS6i+S7tlxuICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdwYWdlU3dpdGNoJywge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIGZyb206ICdwcm9maWxlJyxcbiAgICAgICAgdG86ICdjaGF0TGlzdCcsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIh+aNouWIsFwi5Yqo5oCBXCLpobXpnaJcbiAgICovXG4gIHByaXZhdGUgc3dpdGNoVG9GZWVkKCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKCfwn5SEIOS7juaIkeeahOmhtemdouWIh+aNouWIsOWKqOaAgemhtemdoicpO1xuXG4gICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ3BhZ2VTd2l0Y2gnLCB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgZnJvbTogJ3Byb2ZpbGUnLFxuICAgICAgICB0bzogJ2ZlZWQnLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliJ3lp4vljJbnirbmgIHmoI9cbiAgICovXG4gIHByaXZhdGUgaW5pdGlhbGl6ZVN0YXR1c0JhcigpOiB2b2lkIHtcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLnByb2ZpbGVJbnRlcmZhY2UucXVlcnlTZWxlY3RvcignLnN0YXR1cy1iYXItY29udGFpbmVyJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgdGhpcy5zdGF0dXNCYXIgPSBTdGF0dXNCYXIuY3JlYXRlKGNvbnRhaW5lcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOmUgOavgeeKtuaAgeagj1xuICAgKi9cbiAgcHJpdmF0ZSBkZXN0cm95U3RhdHVzQmFyKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnN0YXR1c0Jhcikge1xuICAgICAgdGhpcy5zdGF0dXNCYXIuZGVzdHJveSgpO1xuICAgICAgdGhpcy5zdGF0dXNCYXIgPSBudWxsO1xuICAgIH1cbiAgfVxuICBcblxuICAvKipcbiAgICog5aSE55CG6aG16Z2i5Y+v6KeB5oCn5Y+Y5YyWXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVZpc2liaWxpdHlDaGFuZ2UoKTogdm9pZCB7XG4gICAgaWYgKCFkb2N1bWVudC5oaWRkZW4gJiYgdGhpcy5pc0FjdGl2ZSkge1xuICAgICAgLy8g6aG16Z2i6YeN5paw5Y+v6KeB5pe277yM54q25oCB5qCP5Lya6Ieq5Yqo5pu05paw5pe26Ze0XG4gICAgICAvLyBTdGF0dXNCYXIg57uE5Lu25YaF6YOo5bey57uP5aSE55CG5LqG5pe26Ze05pu05pawXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOmhtemdouaYvuekuuaXtueahOWkhOeQhlxuICAgKi9cbiAgcHJpdmF0ZSBvblBhZ2VTaG93KCk6IHZvaWQge1xuICAgIC8vIOWIt+aWsOeUqOaIt+S/oeaBr+aYvuekulxuICAgIHRoaXMucmVmcmVzaFVzZXJJbmZvKCk7XG4gIH1cblxuICAvKipcbiAgICog6aG16Z2i6ZqQ6JeP5pe255qE5aSE55CGXG4gICAqL1xuICBwcml2YXRlIG9uUGFnZUhpZGUoKTogdm9pZCB7XG4gICAgLy8g5L+d5a2Y5b2T5YmN54q25oCBXG4gICAgdGhpcy5zYXZlQ3VycmVudFN0YXRlKCk7XG4gIH1cblxuICAvKipcbiAgICog5Yi35paw55So5oi35L+h5oGvXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHJlZnJlc2hVc2VySW5mbygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy51c2VySW5mb1NlY3Rpb24uaW5pdGlhbGl6ZSgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ+WIt+aWsOeUqOaIt+S/oeaBr+Wksei0pTonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOS/neWtmOW9k+WJjeeKtuaAgVxuICAgKi9cbiAgcHJpdmF0ZSBzYXZlQ3VycmVudFN0YXRlKCk6IHZvaWQge1xuICAgIC8vIOi/memHjOWPr+S7peS/neWtmOmhtemdoueKtuaAge+8jOWmgua7muWKqOS9jee9ruetiVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdGF0ZSA9IHtcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICBpc0FjdGl2ZTogdGhpcy5pc0FjdGl2ZSxcbiAgICAgIH07XG4gICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdwcm9maWxlX3BhZ2Vfc3RhdGUnLCBKU09OLnN0cmluZ2lmeShzdGF0ZSkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ+S/neWtmOmhtemdoueKtuaAgeWksei0pTonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOaBouWkjemhtemdoueKtuaAgVxuICAgKi9cbiAgcHJpdmF0ZSByZXN0b3JlUGFnZVN0YXRlKCk6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdGF0ZVN0ciA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Byb2ZpbGVfcGFnZV9zdGF0ZScpO1xuICAgICAgaWYgKHN0YXRlU3RyKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gSlNPTi5wYXJzZShzdGF0ZVN0cik7XG4gICAgICAgIC8vIOi/memHjOWPr+S7peaBouWkjemhtemdoueKtuaAgVxuICAgICAgICBjb25zb2xlLmxvZygn5oGi5aSN6aG16Z2i54q25oCBOicsIHN0YXRlKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCfmgaLlpI3pobXpnaLnirbmgIHlpLHotKU6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDop6blj5HpobXpnaLliIfmjaLkuovku7ZcbiAgICovXG4gIHByaXZhdGUgZW1pdFBhZ2VDaGFuZ2VFdmVudCh0YXJnZXRQYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgncGFnZUNoYW5nZScsIHtcbiAgICAgIGRldGFpbDoge1xuICAgICAgICBmcm9tOiAncHJvZmlsZScsXG4gICAgICAgIHRvOiB0YXJnZXRQYWdlLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gIH1cblxuICAvKipcbiAgICog6K6+572u57uE5Lu254q25oCBXG4gICAqL1xuICBwcml2YXRlIHNldFN0YXRlKG5ld1N0YXRlOiBDb21wb25lbnRTdGF0ZSk6IHZvaWQge1xuICAgIHRoaXMuc3RhdGUgPSBuZXdTdGF0ZTtcblxuICAgIC8vIOabtOaWsFVJ54q25oCBXG4gICAgdGhpcy5wcm9maWxlSW50ZXJmYWNlLmNsYXNzTGlzdC5yZW1vdmUoJ2xvYWRpbmcnLCAnZXJyb3InKTtcblxuICAgIHN3aXRjaCAobmV3U3RhdGUpIHtcbiAgICAgIGNhc2UgQ29tcG9uZW50U3RhdGUuTE9BRElORzpcbiAgICAgICAgdGhpcy5wcm9maWxlSW50ZXJmYWNlLmNsYXNzTGlzdC5hZGQoJ2xvYWRpbmcnKTtcbiAgICAgICAgdGhpcy5zZXR0aW5nc0J1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZXh0ZW5zaW9uU2V0dGluZ3NCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQ29tcG9uZW50U3RhdGUuRVJST1I6XG4gICAgICAgIHRoaXMucHJvZmlsZUludGVyZmFjZS5jbGFzc0xpc3QuYWRkKCdlcnJvcicpO1xuICAgICAgICB0aGlzLnNldHRpbmdzQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5leHRlbnNpb25TZXR0aW5nc0J1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBDb21wb25lbnRTdGF0ZS5JRExFOlxuICAgICAgICB0aGlzLnNldHRpbmdzQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZXh0ZW5zaW9uU2V0dGluZ3NCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOWkhOeQhumUmeivr1xuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVFcnJvcihlcnJvckluZm86IEVycm9ySW5mbyk6IHZvaWQge1xuICAgIGNvbnNvbGUuZXJyb3IoYFtQcm9maWxlSW50ZXJmYWNlXSAke2Vycm9ySW5mby5tZXNzYWdlfTpgLCBlcnJvckluZm8uZGV0YWlscyk7XG4gICAgdG9hc3RyLmVycm9yKGVycm9ySW5mby5tZXNzYWdlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5blvZPliY3nirbmgIFcbiAgICovXG4gIHB1YmxpYyBnZXRTdGF0ZSgpOiBDb21wb25lbnRTdGF0ZSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGU7XG4gIH1cblxuICAvKipcbiAgICog5qOA5p+l6aG16Z2i5piv5ZCm5r+A5rS7XG4gICAqL1xuICBwdWJsaWMgaXNQYWdlQWN0aXZlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmlzQWN0aXZlO1xuICB9XG5cbiAgLyoqXG4gICAqIOiOt+WPlueUqOaIt+S/oeaBr+e7hOS7tlxuICAgKi9cbiAgcHVibGljIGdldFVzZXJJbmZvU2VjdGlvbigpOiBVc2VySW5mb1NlY3Rpb24ge1xuICAgIHJldHVybiB0aGlzLnVzZXJJbmZvU2VjdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5borr7nva7mqKHmgIHmoYbnu4Tku7ZcbiAgICovXG4gIHB1YmxpYyBnZXRTZXR0aW5nc01vZGFsKCk6IFNldHRpbmdzTW9kYWwge1xuICAgIHJldHVybiB0aGlzLnNldHRpbmdzTW9kYWw7XG4gIH1cblxuICAvKipcbiAgICog6ZSA5q+B57uE5Lu2XG4gICAqL1xuICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAvLyDplIDmr4HlrZDnu4Tku7ZcbiAgICB0aGlzLnVzZXJJbmZvU2VjdGlvbi5kZXN0cm95KCk7XG4gICAgdGhpcy5zZXR0aW5nc01vZGFsLmRlc3Ryb3koKTtcblxuICAgIC8vIOa4heeQhueKtuaAgVxuICAgIHRoaXMuaGlkZSgpO1xuICAgIHRoaXMuc2V0U3RhdGUoQ29tcG9uZW50U3RhdGUuSURMRSk7XG5cbiAgICAvLyDmuIXnkIbkvJror53lrZjlgqhcbiAgICB0cnkge1xuICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgncHJvZmlsZV9wYWdlX3N0YXRlJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2Fybign5riF55CG5Lya6K+d5a2Y5YKo5aSx6LSlOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog6YeN5paw5Yqg6L296aG16Z2iXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgcmVsb2FkKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLnNldFN0YXRlKENvbXBvbmVudFN0YXRlLkxPQURJTkcpO1xuXG4gICAgICAvLyDph43mlrDliJ3lp4vljJbmiYDmnInnu4Tku7ZcbiAgICAgIGF3YWl0IHRoaXMudXNlckluZm9TZWN0aW9uLmluaXRpYWxpemUoKTtcbiAgICAgIGF3YWl0IHRoaXMuc2V0dGluZ3NNb2RhbC5pbml0aWFsaXplKCk7XG5cbiAgICAgIHRoaXMuc2V0U3RhdGUoQ29tcG9uZW50U3RhdGUuSURMRSk7XG4gICAgICB0b2FzdHIuc3VjY2Vzcygn6aG16Z2i6YeN5paw5Yqg6L295oiQ5YqfJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuaGFuZGxlRXJyb3Ioe1xuICAgICAgICB0eXBlOiBFcnJvclR5cGUuU1RPUkFHRV9FUlJPUixcbiAgICAgICAgbWVzc2FnZTogJ+mHjeaWsOWKoOi9vemhtemdouWksei0pScsXG4gICAgICAgIGRldGFpbHM6IGVycm9yLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICB9KTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoQ29tcG9uZW50U3RhdGUuRVJST1IpO1xuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/profile/ProfileInterface.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/profile/SettingsModal.ts": 
  /*!************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/profile/SettingsModal.ts ***!
  \************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SettingsModal: () => (/* binding */ SettingsModal)\n/* harmony export */ });\n/* harmony import */ var _ImageProcessor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ImageProcessor */ \"./src/多云熊/备份/给rovo的/modules/profile/ImageProcessor.ts\");\n/* harmony import */ var _StorageManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StorageManager */ \"./src/多云熊/备份/给rovo的/modules/profile/StorageManager.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./types */ \"./src/多云熊/备份/给rovo的/modules/profile/types.ts\");\n/**\n * SettingsModal - 设置模态框组件\n * 负责应用设置的显示和管理\n */\n\n\n\nclass SettingsModal {\n    storageManager;\n    imageProcessor;\n    state = _types__WEBPACK_IMPORTED_MODULE_2__.ComponentState.IDLE;\n    isVisible = false;\n    currentSettings;\n    // DOM 元素\n    settingsModal;\n    modalContainer;\n    closeBtn;\n    emojiSuggestionsToggle;\n    crossChatSendToggle;\n    clearUserCacheBtn;\n    clearLorebookCacheBtn;\n    // 壁纸上传相关元素\n    chatListWallpaperUpload;\n    chatListWallpaperPreview;\n    chatListWallpaperInput;\n    removeChatListWallpaperBtn;\n    globalChatWallpaperUpload;\n    globalChatWallpaperPreview;\n    globalChatWallpaperInput;\n    removeGlobalChatWallpaperBtn;\n    applyToAllChatsBtn;\n    constructor() {\n        this.storageManager = _StorageManager__WEBPACK_IMPORTED_MODULE_1__.StorageManager.getInstance();\n        this.imageProcessor = _ImageProcessor__WEBPACK_IMPORTED_MODULE_0__.ImageProcessor.getInstance();\n        this.currentSettings = this.storageManager.loadSettings();\n        this.initializeElements();\n        this.bindEvents();\n    }\n    /**\n     * 初始化DOM元素\n     */\n    initializeElements() {\n        this.settingsModal = document.getElementById('settingsModal');\n        this.modalContainer = this.settingsModal.querySelector('.modal-container');\n        this.closeBtn = document.getElementById('settingsCloseBtn');\n        this.emojiSuggestionsToggle = document.getElementById('emojiSuggestionsToggle');\n        this.crossChatSendToggle = document.getElementById('crossChatSendToggle');\n        this.clearUserCacheBtn = document.getElementById('clearUserCacheBtn');\n        this.clearLorebookCacheBtn = document.getElementById('clearLorebookCacheBtn');\n        // 检查按钮是否找到\n        if (!this.clearUserCacheBtn) {\n            console.error('[SettingsModal] 清除用户缓存按钮未找到');\n        }\n        if (!this.clearLorebookCacheBtn) {\n            console.error('[SettingsModal] 清除世界书缓存按钮未找到');\n        }\n        // 壁纸上传元素\n        this.chatListWallpaperUpload = document.getElementById('chatListWallpaperUpload');\n        this.chatListWallpaperPreview = document.getElementById('chatListWallpaperPreview');\n        this.chatListWallpaperInput = document.getElementById('chatListWallpaperInput');\n        this.removeChatListWallpaperBtn = document.getElementById('removeChatListWallpaper');\n        this.globalChatWallpaperUpload = document.getElementById('globalChatWallpaperUpload');\n        this.globalChatWallpaperPreview = document.getElementById('globalChatWallpaperPreview');\n        this.globalChatWallpaperInput = document.getElementById('globalChatWallpaperInput');\n        this.removeGlobalChatWallpaperBtn = document.getElementById('removeGlobalChatWallpaper');\n        this.applyToAllChatsBtn = document.getElementById('applyToAllChatsBtn');\n        if (!this.settingsModal) {\n            throw new Error('Settings modal element not found');\n        }\n    }\n    /**\n     * 绑定事件监听器\n     */\n    bindEvents() {\n        // 关闭按钮\n        this.closeBtn.addEventListener('click', () => this.hide());\n        // 点击模态框外部关闭\n        this.settingsModal.addEventListener('click', e => {\n            if (e.target === this.settingsModal) {\n                this.hide();\n            }\n        });\n        // ESC键关闭\n        document.addEventListener('keydown', e => {\n            if (e.key === 'Escape' && this.isVisible) {\n                this.hide();\n            }\n        });\n        // 表情包建议开关\n        this.emojiSuggestionsToggle.addEventListener('click', () => this.toggleEmojiSuggestions());\n        // 跨聊天发送开关\n        this.crossChatSendToggle.addEventListener('click', () => this.toggleCrossChatSend());\n        // 清除用户缓存按钮\n        if (this.clearUserCacheBtn) {\n            this.clearUserCacheBtn.addEventListener('click', e => {\n                e.preventDefault();\n                e.stopPropagation();\n                console.log('[SettingsModal] 清除用户缓存按钮被点击');\n                this.handleClearUserCache();\n            });\n        }\n        else {\n            console.error('[SettingsModal] 无法绑定清除用户缓存按钮事件，按钮未找到');\n        }\n        // 清除世界书角色缓存按钮\n        if (this.clearLorebookCacheBtn) {\n            this.clearLorebookCacheBtn.addEventListener('click', e => {\n                e.preventDefault();\n                e.stopPropagation();\n                console.log('[SettingsModal] 清除世界书缓存按钮被点击');\n                this.handleClearLorebookCache();\n            });\n        }\n        else {\n            console.error('[SettingsModal] 无法绑定清除世界书缓存按钮事件，按钮未找到');\n        }\n        // 聊天列表壁纸上传\n        this.chatListWallpaperUpload.addEventListener('click', () => this.chatListWallpaperInput.click());\n        this.chatListWallpaperUpload.addEventListener('dragover', e => this.handleDragOver(e));\n        this.chatListWallpaperUpload.addEventListener('drop', e => this.handleChatListWallpaperDrop(e));\n        this.chatListWallpaperInput.addEventListener('change', e => this.handleChatListWallpaperChange(e));\n        this.removeChatListWallpaperBtn.addEventListener('click', () => this.removeChatListWallpaper());\n        // 全局对话框壁纸上传\n        this.globalChatWallpaperUpload.addEventListener('click', () => this.globalChatWallpaperInput.click());\n        this.globalChatWallpaperUpload.addEventListener('dragover', e => this.handleDragOver(e));\n        this.globalChatWallpaperUpload.addEventListener('drop', e => this.handleGlobalChatWallpaperDrop(e));\n        this.globalChatWallpaperInput.addEventListener('change', e => this.handleGlobalChatWallpaperChange(e));\n        this.removeGlobalChatWallpaperBtn.addEventListener('click', () => this.removeGlobalChatWallpaper());\n        // 全局更换按钮\n        if (this.applyToAllChatsBtn) {\n            this.applyToAllChatsBtn.addEventListener('click', () => this.handleApplyToAllChats());\n        }\n        // 壁纸预览点击事件 - 允许重新上传\n        this.chatListWallpaperPreview.addEventListener('click', e => {\n            // 如果点击的不是移除按钮或全局更换按钮，则触发文件选择\n            if (!e.target ||\n                (!e.target.closest('.remove-btn') && !e.target.closest('.apply-all-btn'))) {\n                this.chatListWallpaperInput.click();\n            }\n        });\n        this.globalChatWallpaperPreview.addEventListener('click', e => {\n            // 如果点击的不是移除按钮或全局更换按钮，则触发文件选择\n            if (!e.target ||\n                (!e.target.closest('.remove-btn') && !e.target.closest('.apply-all-btn'))) {\n                this.globalChatWallpaperInput.click();\n            }\n        });\n    }\n    /**\n     * 初始化设置模态框\n     */\n    async initialize() {\n        try {\n            this.currentSettings = this.storageManager.loadSettings();\n            this.updateUI();\n        }\n        catch (error) {\n            this.handleError({\n                type: _types__WEBPACK_IMPORTED_MODULE_2__.ErrorType.STORAGE_ERROR,\n                message: '初始化设置失败',\n                details: error,\n                timestamp: Date.now(),\n            });\n        }\n    }\n    /**\n     * 显示模态框\n     */\n    show() {\n        if (this.isVisible) {\n            return;\n        }\n        this.settingsModal.classList.add('show');\n        this.isVisible = true;\n        // 更新UI显示\n        this.updateUI();\n        // 防止背景滚动\n        document.body.style.overflow = 'hidden';\n    }\n    /**\n     * 隐藏模态框\n     */\n    hide() {\n        if (!this.isVisible) {\n            return;\n        }\n        this.settingsModal.classList.remove('show');\n        this.isVisible = false;\n        // 恢复背景滚动\n        document.body.style.overflow = '';\n        // 保存设置\n        this.saveSettings();\n    }\n    /**\n     * 更新UI显示\n     */\n    updateUI() {\n        // 更新表情包建议开关\n        if (this.currentSettings.emojiSuggestionsEnabled) {\n            this.emojiSuggestionsToggle.classList.add('active');\n        }\n        else {\n            this.emojiSuggestionsToggle.classList.remove('active');\n        }\n        // 更新跨聊天发送开关\n        if (this.currentSettings.crossChatSendEnabled) {\n            this.crossChatSendToggle.classList.add('active');\n        }\n        else {\n            this.crossChatSendToggle.classList.remove('active');\n        }\n        // 更新聊天列表壁纸预览\n        this.updateWallpaperPreview(this.currentSettings.chatListWallpaper, this.chatListWallpaperPreview);\n        // 更新全局对话框壁纸预览\n        this.updateWallpaperPreview(this.currentSettings.globalChatWallpaper, this.globalChatWallpaperPreview);\n    }\n    /**\n     * 更新壁纸预览\n     */\n    updateWallpaperPreview(wallpaperUrl, previewElement) {\n        const uploadArea = previewElement.previousElementSibling;\n        if (wallpaperUrl) {\n            const img = previewElement.querySelector('img');\n            if (img) {\n                img.src = wallpaperUrl;\n                previewElement.style.display = 'block';\n                // 隐藏上传区域，显示预览\n                if (uploadArea && uploadArea.classList.contains('upload-area')) {\n                    uploadArea.style.setProperty('display', 'none', 'important');\n                }\n                // 让预览区域可点击以重新上传\n                previewElement.style.cursor = 'pointer';\n                previewElement.title = '点击更换壁纸';\n            }\n        }\n        else {\n            previewElement.style.display = 'none';\n            // 显示上传区域\n            if (uploadArea && uploadArea.classList.contains('upload-area')) {\n                uploadArea.style.setProperty('display', 'flex', 'important');\n            }\n        }\n    }\n    /**\n     * 切换表情包建议\n     */\n    toggleEmojiSuggestions() {\n        this.currentSettings.emojiSuggestionsEnabled = !this.currentSettings.emojiSuggestionsEnabled;\n        this.updateUI();\n        // 立即保存设置\n        this.saveSettings();\n        const status = this.currentSettings.emojiSuggestionsEnabled ? '已开启' : '已关闭';\n        toastr.info(`表情包建议${status}`);\n    }\n    /**\n     * 切换跨聊天发送\n     */\n    toggleCrossChatSend() {\n        this.currentSettings.crossChatSendEnabled = !this.currentSettings.crossChatSendEnabled;\n        this.updateUI();\n        // 立即保存设置\n        this.saveSettings();\n        const status = this.currentSettings.crossChatSendEnabled ? '已开启' : '已关闭';\n        toastr.info(`跨聊天发送${status}`);\n        // 触发设置更新事件\n        document.dispatchEvent(new CustomEvent('settingsUpdated', {\n            detail: { crossChatSendEnabled: this.currentSettings.crossChatSendEnabled },\n        }));\n    }\n    /**\n     * 处理拖拽悬停\n     */\n    handleDragOver(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        const target = event.currentTarget;\n        target.classList.add('dragover');\n    }\n    /**\n     * 处理聊天列表壁纸拖拽\n     */\n    handleChatListWallpaperDrop(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        const target = event.currentTarget;\n        target.classList.remove('dragover');\n        const files = event.dataTransfer?.files;\n        if (files && files.length > 0) {\n            this.processChatListWallpaperFile(files[0]);\n        }\n    }\n    /**\n     * 处理全局对话框壁纸拖拽\n     */\n    handleGlobalChatWallpaperDrop(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        const target = event.currentTarget;\n        target.classList.remove('dragover');\n        const files = event.dataTransfer?.files;\n        if (files && files.length > 0) {\n            this.processGlobalChatWallpaperFile(files[0]);\n        }\n    }\n    /**\n     * 处理聊天列表壁纸文件选择\n     */\n    handleChatListWallpaperChange(event) {\n        const input = event.target;\n        const file = input.files?.[0];\n        if (file) {\n            this.processChatListWallpaperFile(file);\n        }\n        // 清空文件输入\n        input.value = '';\n    }\n    /**\n     * 处理全局对话框壁纸文件选择\n     */\n    handleGlobalChatWallpaperChange(event) {\n        const input = event.target;\n        const file = input.files?.[0];\n        if (file) {\n            this.processGlobalChatWallpaperFile(file);\n        }\n        // 清空文件输入\n        input.value = '';\n    }\n    /**\n     * 处理聊天列表壁纸文件\n     */\n    async processChatListWallpaperFile(file) {\n        try {\n            const validation = this.imageProcessor.validateImageFile(file);\n            if (!validation.isValid) {\n                toastr.error(validation.error, '文件验证失败');\n                return;\n            }\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_2__.ComponentState.LOADING);\n            const base64 = await this.imageProcessor.fileToBase64(file);\n            const compressedBase64 = await this.imageProcessor.compressWallpaper(base64);\n            this.currentSettings.chatListWallpaper = compressedBase64;\n            this.updateWallpaperPreview(compressedBase64, this.chatListWallpaperPreview);\n            this.saveSettings();\n            // 立即应用壁纸到聊天列表\n            await this.applyWallpaperToChatList(compressedBase64);\n            toastr.success('聊天列表壁纸设置成功');\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_2__.ComponentState.IDLE);\n        }\n        catch (error) {\n            this.handleError({\n                type: _types__WEBPACK_IMPORTED_MODULE_2__.ErrorType.FILE_ERROR,\n                message: '处理聊天列表壁纸失败',\n                details: error,\n                timestamp: Date.now(),\n            });\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_2__.ComponentState.IDLE);\n        }\n    }\n    /**\n     * 处理全局对话框壁纸文件\n     */\n    async processGlobalChatWallpaperFile(file) {\n        try {\n            const validation = this.imageProcessor.validateImageFile(file);\n            if (!validation.isValid) {\n                toastr.error(validation.error, '文件验证失败');\n                return;\n            }\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_2__.ComponentState.LOADING);\n            const base64 = await this.imageProcessor.fileToBase64(file);\n            const compressedBase64 = await this.imageProcessor.compressWallpaper(base64);\n            this.currentSettings.globalChatWallpaper = compressedBase64;\n            this.updateWallpaperPreview(compressedBase64, this.globalChatWallpaperPreview);\n            this.saveSettings();\n            // 立即应用壁纸到聊天窗口\n            await this.applyWallpaperToChatWindow(compressedBase64);\n            toastr.success('全局对话框壁纸设置成功');\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_2__.ComponentState.IDLE);\n        }\n        catch (error) {\n            this.handleError({\n                type: _types__WEBPACK_IMPORTED_MODULE_2__.ErrorType.FILE_ERROR,\n                message: '处理全局对话框壁纸失败',\n                details: error,\n                timestamp: Date.now(),\n            });\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_2__.ComponentState.IDLE);\n        }\n    }\n    /**\n     * 移除聊天列表壁纸\n     */\n    async removeChatListWallpaper() {\n        try {\n            this.currentSettings.chatListWallpaper = '';\n            this.updateWallpaperPreview('', this.chatListWallpaperPreview);\n            this.saveSettings();\n            // 重置聊天列表壁纸为默认\n            const { WallpaperManager } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../chatList/wallpaperManager */ \"./src/多云熊/备份/给rovo的/modules/chatList/wallpaperManager.ts\"));\n            const wallpaperManager = WallpaperManager.getInstance();\n            wallpaperManager.clearWallpaperCache();\n            toastr.info('已移除聊天列表壁纸');\n        }\n        catch (error) {\n            console.error('[SettingsModal] 移除聊天列表壁纸失败:', error);\n            toastr.error('移除壁纸失败，请稍后重试');\n        }\n    }\n    /**\n     * 移除全局对话框壁纸\n     */\n    async removeGlobalChatWallpaper() {\n        this.currentSettings.globalChatWallpaper = '';\n        this.updateWallpaperPreview('', this.globalChatWallpaperPreview);\n        this.saveSettings();\n        // 清除聊天窗口壁纸\n        await this.clearChatWindowWallpaper();\n        toastr.info('已移除全局对话框壁纸');\n    }\n    /**\n     * 保存设置\n     */\n    saveSettings() {\n        try {\n            this.storageManager.saveSettings(this.currentSettings);\n            // 触发设置变更事件\n            this.emitSettingsChangeEvent();\n        }\n        catch (error) {\n            this.handleError({\n                type: _types__WEBPACK_IMPORTED_MODULE_2__.ErrorType.STORAGE_ERROR,\n                message: '保存设置失败',\n                details: error,\n                timestamp: Date.now(),\n            });\n        }\n    }\n    /**\n     * 触发设置变更事件\n     */\n    emitSettingsChangeEvent() {\n        const event = new CustomEvent('settingsChange', {\n            detail: {\n                settings: { ...this.currentSettings },\n                timestamp: Date.now(),\n            },\n        });\n        document.dispatchEvent(event);\n    }\n    /**\n     * 设置组件状态\n     */\n    setState(newState) {\n        this.state = newState;\n        // 更新UI状态\n        this.modalContainer.classList.remove('loading', 'error');\n        switch (newState) {\n            case _types__WEBPACK_IMPORTED_MODULE_2__.ComponentState.LOADING:\n                this.modalContainer.classList.add('loading');\n                break;\n            case _types__WEBPACK_IMPORTED_MODULE_2__.ComponentState.ERROR:\n                this.modalContainer.classList.add('error');\n                break;\n        }\n    }\n    /**\n     * 处理错误\n     */\n    handleError(errorInfo) {\n        console.error(`[SettingsModal] ${errorInfo.message}:`, errorInfo.details);\n        toastr.error(errorInfo.message);\n    }\n    /**\n     * 获取当前设置\n     */\n    getCurrentSettings() {\n        return { ...this.currentSettings };\n    }\n    /**\n     * 检查模态框是否可见\n     */\n    isModalVisible() {\n        return this.isVisible;\n    }\n    /**\n     * 重置设置为默认值\n     */\n    resetToDefaults() {\n        this.currentSettings = this.storageManager.loadSettings();\n        this.updateUI();\n        this.saveSettings();\n        toastr.info('设置已重置为默认值');\n    }\n    /**\n     * 处理清除用户缓存\n     */\n    async handleClearUserCache() {\n        console.log('[SettingsModal] 开始处理清除用户缓存');\n        try {\n            // 显示确认对话框\n            console.log('[SettingsModal] 显示确认对话框');\n            const confirmed = await this.showConfirmDialog('确认清除缓存', '这将清除本地保存的用户头像和名字，恢复为默认设置。此操作不可撤销，确定要继续吗？');\n            console.log('[SettingsModal] 用户确认结果:', confirmed);\n            if (!confirmed) {\n                return;\n            }\n            // 获取GlobalUserManager实例\n            const { GlobalUserManager } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./GlobalUserManager */ \"./src/多云熊/备份/给rovo的/modules/profile/GlobalUserManager.ts\"));\n            const globalUserManager = GlobalUserManager.getInstance();\n            // 重置用户信息\n            await globalUserManager.resetToDefault();\n            // 显示成功消息\n            toastr.success('用户缓存已清除，头像和名字已恢复为默认设置');\n            // 关闭设置模态框\n            this.hide();\n        }\n        catch (error) {\n            console.error('[SettingsModal] 清除用户缓存失败:', error);\n            toastr.error('清除用户缓存失败，请稍后重试');\n        }\n    }\n    /**\n     * 处理清除世界书角色缓存\n     */\n    async handleClearLorebookCache() {\n        console.log('[SettingsModal] 开始处理清除世界书角色缓存');\n        try {\n            // 构建确认消息\n            const confirmMessage = '这将清除世界书中所有角色的自定义头像缓存，恢复为世界书默认头像。\\n\\n此操作不可撤销，确定要继续吗？';\n            // 显示确认对话框\n            const confirmed = await this.showConfirmDialog('确认清除世界书角色缓存', confirmMessage);\n            if (!confirmed) {\n                return;\n            }\n            // 调用清除缓存方法\n            const result = await window.bearChatManager?.clearLorebookCharacterCache();\n            if (!result) {\n                toastr.error('清除世界书角色缓存失败，请稍后重试');\n                return;\n            }\n            // 显示成功消息（bearChatManager中已经显示了toastr消息）\n            console.log('[SettingsModal] 世界书角色缓存清除完成:', result);\n            // 不关闭设置模态框，让用户可以继续其他操作\n        }\n        catch (error) {\n            console.error('[SettingsModal] 清除世界书角色缓存失败:', error);\n            toastr.error('清除世界书角色缓存失败，请稍后重试');\n        }\n    }\n    /**\n     * 显示确认对话框\n     */\n    showConfirmDialog(title, message) {\n        return new Promise(resolve => {\n            // 移除现有的对话框（如果有）\n            const existingDialog = document.querySelector('.confirm-dialog-overlay');\n            if (existingDialog) {\n                existingDialog.remove();\n            }\n            // 创建确认对话框\n            const overlay = document.createElement('div');\n            overlay.className = 'confirm-dialog-overlay';\n            const dialog = document.createElement('div');\n            dialog.className = 'confirm-dialog';\n            dialog.innerHTML = `\n        <div class=\"dialog-header\">\n          <h3>⚠️ ${title}</h3>\n        </div>\n        <div class=\"dialog-content\">\n          <p>${message}</p>\n        </div>\n        <div class=\"dialog-buttons\">\n          <button class=\"cancel-btn\">取消</button>\n          <button class=\"confirm-btn danger\">确认清除</button>\n        </div>\n      `;\n            overlay.appendChild(dialog);\n            // 将对话框直接添加到设置模态框内部，确保在正确的堆叠上下文中\n            this.settingsModal.appendChild(overlay);\n            // 绑定事件\n            const cancelBtn = dialog.querySelector('.cancel-btn');\n            const confirmBtn = dialog.querySelector('.confirm-btn');\n            const cleanup = () => {\n                overlay.remove();\n                document.removeEventListener('keydown', handleKeyDown);\n            };\n            cancelBtn.addEventListener('click', () => {\n                cleanup();\n                resolve(false);\n            });\n            confirmBtn.addEventListener('click', () => {\n                cleanup();\n                resolve(true);\n            });\n            // 点击外部关闭\n            overlay.addEventListener('click', e => {\n                if (e.target === overlay) {\n                    cleanup();\n                    resolve(false);\n                }\n            });\n            // ESC键关闭\n            const handleKeyDown = (e) => {\n                if (e.key === 'Escape') {\n                    cleanup();\n                    resolve(false);\n                }\n            };\n            document.addEventListener('keydown', handleKeyDown);\n        });\n    }\n    /**\n     * 应用壁纸到聊天列表\n     */\n    async applyWallpaperToChatList(wallpaperData) {\n        try {\n            // 动态导入WallpaperManager\n            const { WallpaperManager } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../chatList/wallpaperManager */ \"./src/多云熊/备份/给rovo的/modules/chatList/wallpaperManager.ts\"));\n            const wallpaperManager = WallpaperManager.getInstance();\n            // 设置自定义壁纸\n            wallpaperManager.setCustomWallpaper(wallpaperData);\n            console.log('[SettingsModal] 壁纸已应用到聊天列表');\n        }\n        catch (error) {\n            console.error('[SettingsModal] 应用壁纸失败:', error);\n            throw error;\n        }\n    }\n    /**\n     * 应用壁纸到聊天窗口\n     */\n    async applyWallpaperToChatWindow(wallpaperData) {\n        try {\n            // 通过全局事件通知聊天壁纸管理器\n            const event = new CustomEvent('globalChatWallpaperChange', {\n                detail: { wallpaperData },\n            });\n            document.dispatchEvent(event);\n            console.log('[SettingsModal] 壁纸已应用到聊天窗口');\n        }\n        catch (error) {\n            console.error('[SettingsModal] 应用聊天窗口壁纸失败:', error);\n            throw error;\n        }\n    }\n    /**\n     * 清除聊天窗口壁纸\n     */\n    async clearChatWindowWallpaper() {\n        try {\n            // 通过全局事件通知聊天壁纸管理器清除壁纸\n            const event = new CustomEvent('clearGlobalChatWallpaper');\n            document.dispatchEvent(event);\n            console.log('[SettingsModal] 聊天窗口壁纸已清除');\n        }\n        catch (error) {\n            console.error('[SettingsModal] 清除聊天窗口壁纸失败:', error);\n            throw error;\n        }\n    }\n    /**\n     * 处理全局更换按钮点击\n     */\n    async handleApplyToAllChats() {\n        try {\n            // 检查是否有全局壁纸\n            if (!this.currentSettings.globalChatWallpaper) {\n                toastr.warning('请先设置全局对话框壁纸');\n                return;\n            }\n            // 显示确认对话框\n            const confirmed = await this.showConfirmDialog('确认全局更换', '这将把当前的全局对话框壁纸应用到所有聊天框，并清除所有单独设置的壁纸。此操作不可撤销，确定要继续吗？');\n            if (!confirmed) {\n                return;\n            }\n            // 通过全局事件通知聊天壁纸管理器应用到所有聊天框\n            const event = new CustomEvent('applyWallpaperToAllChats', {\n                detail: { wallpaperData: this.currentSettings.globalChatWallpaper },\n            });\n            document.dispatchEvent(event);\n            // 更新设置（清除单独壁纸设置）\n            this.currentSettings.individualChatWallpapers = {};\n            this.saveSettings();\n            toastr.success('已将壁纸应用到所有聊天框');\n            console.log('[SettingsModal] 全局更换壁纸完成');\n        }\n        catch (error) {\n            console.error('[SettingsModal] 全局更换壁纸失败:', error);\n            toastr.error('全局更换壁纸失败，请稍后重试');\n        }\n    }\n    /**\n     * 销毁组件\n     */\n    destroy() {\n        this.hide();\n        // 恢复背景滚动\n        document.body.style.overflow = '';\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvcHJvZmlsZS9TZXR0aW5nc01vZGFsLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7O0dBR0c7QUFFK0M7QUFDQTtBQUMwQjtBQVNyRSxNQUFNLGFBQWE7SUFDaEIsY0FBYyxDQUFpQjtJQUMvQixjQUFjLENBQWlCO0lBQy9CLEtBQUssR0FBbUIsa0RBQWMsQ0FBQyxJQUFJLENBQUM7SUFDNUMsU0FBUyxHQUFZLEtBQUssQ0FBQztJQUMzQixlQUFlLENBQWM7SUFFckMsU0FBUztJQUNELGFBQWEsQ0FBYztJQUMzQixjQUFjLENBQWM7SUFDNUIsUUFBUSxDQUFvQjtJQUM1QixzQkFBc0IsQ0FBYztJQUNwQyxtQkFBbUIsQ0FBYztJQUNqQyxpQkFBaUIsQ0FBb0I7SUFDckMscUJBQXFCLENBQW9CO0lBRWpELFdBQVc7SUFDSCx1QkFBdUIsQ0FBYztJQUNyQyx3QkFBd0IsQ0FBYztJQUN0QyxzQkFBc0IsQ0FBbUI7SUFDekMsMEJBQTBCLENBQW9CO0lBRTlDLHlCQUF5QixDQUFjO0lBQ3ZDLDBCQUEwQixDQUFjO0lBQ3hDLHdCQUF3QixDQUFtQjtJQUMzQyw0QkFBNEIsQ0FBb0I7SUFDaEQsa0JBQWtCLENBQW9CO0lBRTlDO1FBQ0UsSUFBSSxDQUFDLGNBQWMsR0FBRywyREFBYyxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ25ELElBQUksQ0FBQyxjQUFjLEdBQUcsMkRBQWMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNuRCxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsWUFBWSxFQUFFLENBQUM7UUFDMUQsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7UUFDMUIsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO0lBQ3BCLENBQUM7SUFFRDs7T0FFRztJQUNLLGtCQUFrQjtRQUN4QixJQUFJLENBQUMsYUFBYSxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsZUFBZSxDQUFF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MUIsTUFBTSxLQUFLLEdBQUcsSUFBSSxXQUFXLENBQUMsMEJBQTBCLEVBQUU7Z0JBQ3hELE1BQU0sRUFBRSxFQUFFLGFBQWEsRUFBRSxJQUFJLENBQUMsZUFBZSxDQUFDLG1CQUFtQixFQUFFO2FBQ3BFLENBQUMsQ0FBQztZQUNILFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFOUIsaUJBQWlCO1lBQ2pCLElBQUksQ0FBQyxlQUFlLENBQUMsd0JBQXdCLEdBQUcsRUFBRSxDQUFDO1lBQ25ELElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztZQUVwQixNQUFNLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBRS9CLE9BQU8sQ0FBQyxHQUFHLENBQUMsMEJBQTBCLENBQUMsQ0FBQztRQUMxQyxDQUFDO1FBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNmLE9BQU8sQ0FBQyxLQUFLLENBQUMsMkJBQTJCLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFDbEQsTUFBTSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQ2pDLENBQUM7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSSxPQUFPO1FBQ1osSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1FBRVosU0FBUztRQUNULFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7SUFDcEMsQ0FBQztDQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy9wcm9maWxlL1NldHRpbmdzTW9kYWwudHM/Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU2V0dGluZ3NNb2RhbCAtIOiuvue9ruaooeaAgeahhue7hOS7tlxuICog6LSf6LSj5bqU55So6K6+572u55qE5pi+56S65ZKM566h55CGXG4gKi9cblxuaW1wb3J0IHsgSW1hZ2VQcm9jZXNzb3IgfSBmcm9tICcuL0ltYWdlUHJvY2Vzc29yJztcbmltcG9ydCB7IFN0b3JhZ2VNYW5hZ2VyIH0gZnJvbSAnLi9TdG9yYWdlTWFuYWdlcic7XG5pbXBvcnQgeyBBcHBTZXR0aW5ncywgQ29tcG9uZW50U3RhdGUsIEVycm9ySW5mbywgRXJyb3JUeXBlIH0gZnJvbSAnLi90eXBlcyc7XG5cbmRlY2xhcmUgY29uc3QgdG9hc3RyOiB7XG4gIHN1Y2Nlc3M6IChtZXNzYWdlOiBzdHJpbmcsIHRpdGxlPzogc3RyaW5nKSA9PiB2b2lkO1xuICBlcnJvcjogKG1lc3NhZ2U6IHN0cmluZywgdGl0bGU/OiBzdHJpbmcpID0+IHZvaWQ7XG4gIHdhcm5pbmc6IChtZXNzYWdlOiBzdHJpbmcsIHRpdGxlPzogc3RyaW5nKSA9PiB2b2lkO1xuICBpbmZvOiAobWVzc2FnZTogc3RyaW5nLCB0aXRsZT86IHN0cmluZykgPT4gdm9pZDtcbn07XG5cbmV4cG9ydCBjbGFzcyBTZXR0aW5nc01vZGFsIHtcbiAgcHJpdmF0ZSBzdG9yYWdlTWFuYWdlcjogU3RvcmFnZU1hbmFnZXI7XG4gIHByaXZhdGUgaW1hZ2VQcm9jZXNzb3I6IEltYWdlUHJvY2Vzc29yO1xuICBwcml2YXRlIHN0YXRlOiBDb21wb25lbnRTdGF0ZSA9IENvbXBvbmVudFN0YXRlLklETEU7XG4gIHByaXZhdGUgaXNWaXNpYmxlOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgY3VycmVudFNldHRpbmdzOiBBcHBTZXR0aW5ncztcblxuICAvLyBET00g5YWD57SgXG4gIHByaXZhdGUgc2V0dGluZ3NNb2RhbDogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgbW9kYWxDb250YWluZXI6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGNsb3NlQnRuOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgcHJpdmF0ZSBlbW9qaVN1Z2dlc3Rpb25zVG9nZ2xlOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBjcm9zc0NoYXRTZW5kVG9nZ2xlOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBjbGVhclVzZXJDYWNoZUJ0bjogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gIHByaXZhdGUgY2xlYXJMb3JlYm9va0NhY2hlQnRuOiBIVE1MQnV0dG9uRWxlbWVudDtcblxuICAvLyDlo4HnurjkuIrkvKDnm7jlhbPlhYPntKBcbiAgcHJpdmF0ZSBjaGF0TGlzdFdhbGxwYXBlclVwbG9hZDogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgY2hhdExpc3RXYWxscGFwZXJQcmV2aWV3OiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBjaGF0TGlzdFdhbGxwYXBlcklucHV0OiBIVE1MSW5wdXRFbGVtZW50O1xuICBwcml2YXRlIHJlbW92ZUNoYXRMaXN0V2FsbHBhcGVyQnRuOiBIVE1MQnV0dG9uRWxlbWVudDtcblxuICBwcml2YXRlIGdsb2JhbENoYXRXYWxscGFwZXJVcGxvYWQ6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGdsb2JhbENoYXRXYWxscGFwZXJQcmV2aWV3OiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBnbG9iYWxDaGF0V2FsbHBhcGVySW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gIHByaXZhdGUgcmVtb3ZlR2xvYmFsQ2hhdFdhbGxwYXBlckJ0bjogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gIHByaXZhdGUgYXBwbHlUb0FsbENoYXRzQnRuOiBIVE1MQnV0dG9uRWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnN0b3JhZ2VNYW5hZ2VyID0gU3RvcmFnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcbiAgICB0aGlzLmltYWdlUHJvY2Vzc29yID0gSW1hZ2VQcm9jZXNzb3IuZ2V0SW5zdGFuY2UoKTtcbiAgICB0aGlzLmN1cnJlbnRTZXR0aW5ncyA9IHRoaXMuc3RvcmFnZU1hbmFnZXIubG9hZFNldHRpbmdzKCk7XG4gICAgdGhpcy5pbml0aWFsaXplRWxlbWVudHMoKTtcbiAgICB0aGlzLmJpbmRFdmVudHMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliJ3lp4vljJZET03lhYPntKBcbiAgICovXG4gIHByaXZhdGUgaW5pdGlhbGl6ZUVsZW1lbnRzKCk6IHZvaWQge1xuICAgIHRoaXMuc2V0dGluZ3NNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXR0aW5nc01vZGFsJykhO1xuICAgIHRoaXMubW9kYWxDb250YWluZXIgPSB0aGlzLnNldHRpbmdzTW9kYWwucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRhaW5lcicpITtcbiAgICB0aGlzLmNsb3NlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHRpbmdzQ2xvc2VCdG4nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICB0aGlzLmVtb2ppU3VnZ2VzdGlvbnNUb2dnbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1vamlTdWdnZXN0aW9uc1RvZ2dsZScpITtcbiAgICB0aGlzLmNyb3NzQ2hhdFNlbmRUb2dnbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3Jvc3NDaGF0U2VuZFRvZ2dsZScpITtcbiAgICB0aGlzLmNsZWFyVXNlckNhY2hlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NsZWFyVXNlckNhY2hlQnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgdGhpcy5jbGVhckxvcmVib29rQ2FjaGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xlYXJMb3JlYm9va0NhY2hlQnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG5cbiAgICAvLyDmo4Dmn6XmjInpkq7mmK/lkKbmib7liLBcbiAgICBpZiAoIXRoaXMuY2xlYXJVc2VyQ2FjaGVCdG4pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTZXR0aW5nc01vZGFsXSDmuIXpmaTnlKjmiLfnvJPlrZjmjInpkq7mnKrmib7liLAnKTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmNsZWFyTG9yZWJvb2tDYWNoZUJ0bikge1xuICAgICAgY29uc29sZS5lcnJvcignW1NldHRpbmdzTW9kYWxdIOa4hemZpOS4lueVjOS5pue8k+WtmOaMiemSruacquaJvuWIsCcpO1xuICAgIH1cblxuICAgIC8vIOWjgee6uOS4iuS8oOWFg+e0oFxuICAgIHRoaXMuY2hhdExpc3RXYWxscGFwZXJVcGxvYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhdExpc3RXYWxscGFwZXJVcGxvYWQnKSE7XG4gICAgdGhpcy5jaGF0TGlzdFdhbGxwYXBlclByZXZpZXcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhdExpc3RXYWxscGFwZXJQcmV2aWV3JykhO1xuICAgIHRoaXMuY2hhdExpc3RXYWxscGFwZXJJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGF0TGlzdFdhbGxwYXBlcklucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICB0aGlzLnJlbW92ZUNoYXRMaXN0V2FsbHBhcGVyQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlbW92ZUNoYXRMaXN0V2FsbHBhcGVyJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG5cbiAgICB0aGlzLmdsb2JhbENoYXRXYWxscGFwZXJVcGxvYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2xvYmFsQ2hhdFdhbGxwYXBlclVwbG9hZCcpITtcbiAgICB0aGlzLmdsb2JhbENoYXRXYWxscGFwZXJQcmV2aWV3ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dsb2JhbENoYXRXYWxscGFwZXJQcmV2aWV3JykhO1xuICAgIHRoaXMuZ2xvYmFsQ2hhdFdhbGxwYXBlcklucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dsb2JhbENoYXRXYWxscGFwZXJJbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgdGhpcy5yZW1vdmVHbG9iYWxDaGF0V2FsbHBhcGVyQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlbW92ZUdsb2JhbENoYXRXYWxscGFwZXInKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICB0aGlzLmFwcGx5VG9BbGxDaGF0c0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHBseVRvQWxsQ2hhdHNCdG4nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcblxuICAgIGlmICghdGhpcy5zZXR0aW5nc01vZGFsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NldHRpbmdzIG1vZGFsIGVsZW1lbnQgbm90IGZvdW5kJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOe7keWumuS6i+S7tuebkeWQrOWZqFxuICAgKi9cbiAgcHJpdmF0ZSBiaW5kRXZlbnRzKCk6IHZvaWQge1xuICAgIC8vIOWFs+mXreaMiemSrlxuICAgIHRoaXMuY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmhpZGUoKSk7XG5cbiAgICAvLyDngrnlh7vmqKHmgIHmoYblpJbpg6jlhbPpl61cbiAgICB0aGlzLnNldHRpbmdzTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgIGlmIChlLnRhcmdldCA9PT0gdGhpcy5zZXR0aW5nc01vZGFsKSB7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gRVND6ZSu5YWz6ZetXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGUgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnRXNjYXBlJyAmJiB0aGlzLmlzVmlzaWJsZSkge1xuICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIOihqOaDheWMheW7uuiuruW8gOWFs1xuICAgIHRoaXMuZW1vamlTdWdnZXN0aW9uc1RvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMudG9nZ2xlRW1vamlTdWdnZXN0aW9ucygpKTtcblxuICAgIC8vIOi3qOiBiuWkqeWPkemAgeW8gOWFs1xuICAgIHRoaXMuY3Jvc3NDaGF0U2VuZFRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMudG9nZ2xlQ3Jvc3NDaGF0U2VuZCgpKTtcblxuICAgIC8vIOa4hemZpOeUqOaIt+e8k+WtmOaMiemSrlxuICAgIGlmICh0aGlzLmNsZWFyVXNlckNhY2hlQnRuKSB7XG4gICAgICB0aGlzLmNsZWFyVXNlckNhY2hlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tTZXR0aW5nc01vZGFsXSDmuIXpmaTnlKjmiLfnvJPlrZjmjInpkq7ooqvngrnlh7snKTtcbiAgICAgICAgdGhpcy5oYW5kbGVDbGVhclVzZXJDYWNoZSgpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTZXR0aW5nc01vZGFsXSDml6Dms5Xnu5HlrprmuIXpmaTnlKjmiLfnvJPlrZjmjInpkq7kuovku7bvvIzmjInpkq7mnKrmib7liLAnKTtcbiAgICB9XG5cbiAgICAvLyDmuIXpmaTkuJbnlYzkuabop5LoibLnvJPlrZjmjInpkq5cbiAgICBpZiAodGhpcy5jbGVhckxvcmVib29rQ2FjaGVCdG4pIHtcbiAgICAgIHRoaXMuY2xlYXJMb3JlYm9va0NhY2hlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tTZXR0aW5nc01vZGFsXSDmuIXpmaTkuJbnlYzkuabnvJPlrZjmjInpkq7ooqvngrnlh7snKTtcbiAgICAgICAgdGhpcy5oYW5kbGVDbGVhckxvcmVib29rQ2FjaGUoKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbU2V0dGluZ3NNb2RhbF0g5peg5rOV57uR5a6a5riF6Zmk5LiW55WM5Lmm57yT5a2Y5oyJ6ZKu5LqL5Lu277yM5oyJ6ZKu5pyq5om+5YiwJyk7XG4gICAgfVxuXG4gICAgLy8g6IGK5aSp5YiX6KGo5aOB57q45LiK5LygXG4gICAgdGhpcy5jaGF0TGlzdFdhbGxwYXBlclVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2hhdExpc3RXYWxscGFwZXJJbnB1dC5jbGljaygpKTtcbiAgICB0aGlzLmNoYXRMaXN0V2FsbHBhcGVyVXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgZSA9PiB0aGlzLmhhbmRsZURyYWdPdmVyKGUpKTtcbiAgICB0aGlzLmNoYXRMaXN0V2FsbHBhcGVyVXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBlID0+IHRoaXMuaGFuZGxlQ2hhdExpc3RXYWxscGFwZXJEcm9wKGUpKTtcbiAgICB0aGlzLmNoYXRMaXN0V2FsbHBhcGVySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZSA9PiB0aGlzLmhhbmRsZUNoYXRMaXN0V2FsbHBhcGVyQ2hhbmdlKGUpKTtcbiAgICB0aGlzLnJlbW92ZUNoYXRMaXN0V2FsbHBhcGVyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5yZW1vdmVDaGF0TGlzdFdhbGxwYXBlcigpKTtcblxuICAgIC8vIOWFqOWxgOWvueivneahhuWjgee6uOS4iuS8oFxuICAgIHRoaXMuZ2xvYmFsQ2hhdFdhbGxwYXBlclVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuZ2xvYmFsQ2hhdFdhbGxwYXBlcklucHV0LmNsaWNrKCkpO1xuICAgIHRoaXMuZ2xvYmFsQ2hhdFdhbGxwYXBlclVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIGUgPT4gdGhpcy5oYW5kbGVEcmFnT3ZlcihlKSk7XG4gICAgdGhpcy5nbG9iYWxDaGF0V2FsbHBhcGVyVXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBlID0+IHRoaXMuaGFuZGxlR2xvYmFsQ2hhdFdhbGxwYXBlckRyb3AoZSkpO1xuICAgIHRoaXMuZ2xvYmFsQ2hhdFdhbGxwYXBlcklucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGUgPT4gdGhpcy5oYW5kbGVHbG9iYWxDaGF0V2FsbHBhcGVyQ2hhbmdlKGUpKTtcbiAgICB0aGlzLnJlbW92ZUdsb2JhbENoYXRXYWxscGFwZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnJlbW92ZUdsb2JhbENoYXRXYWxscGFwZXIoKSk7XG5cbiAgICAvLyDlhajlsYDmm7TmjaLmjInpkq5cbiAgICBpZiAodGhpcy5hcHBseVRvQWxsQ2hhdHNCdG4pIHtcbiAgICAgIHRoaXMuYXBwbHlUb0FsbENoYXRzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5oYW5kbGVBcHBseVRvQWxsQ2hhdHMoKSk7XG4gICAgfVxuXG4gICAgLy8g5aOB57q46aKE6KeI54K55Ye75LqL5Lu2IC0g5YWB6K646YeN5paw5LiK5LygXG4gICAgdGhpcy5jaGF0TGlzdFdhbGxwYXBlclByZXZpZXcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgIC8vIOWmguaenOeCueWHu+eahOS4jeaYr+enu+mZpOaMiemSruaIluWFqOWxgOabtOaNouaMiemSru+8jOWImeinpuWPkeaWh+S7tumAieaLqVxuICAgICAgaWYgKFxuICAgICAgICAhZS50YXJnZXQgfHxcbiAgICAgICAgKCEoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsb3Nlc3QoJy5yZW1vdmUtYnRuJykgJiYgIShlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xvc2VzdCgnLmFwcGx5LWFsbC1idG4nKSlcbiAgICAgICkge1xuICAgICAgICB0aGlzLmNoYXRMaXN0V2FsbHBhcGVySW5wdXQuY2xpY2soKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuZ2xvYmFsQ2hhdFdhbGxwYXBlclByZXZpZXcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgIC8vIOWmguaenOeCueWHu+eahOS4jeaYr+enu+mZpOaMiemSruaIluWFqOWxgOabtOaNouaMiemSru+8jOWImeinpuWPkeaWh+S7tumAieaLqVxuICAgICAgaWYgKFxuICAgICAgICAhZS50YXJnZXQgfHxcbiAgICAgICAgKCEoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsb3Nlc3QoJy5yZW1vdmUtYnRuJykgJiYgIShlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xvc2VzdCgnLmFwcGx5LWFsbC1idG4nKSlcbiAgICAgICkge1xuICAgICAgICB0aGlzLmdsb2JhbENoYXRXYWxscGFwZXJJbnB1dC5jbGljaygpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIneWni+WMluiuvue9ruaooeaAgeahhlxuICAgKi9cbiAgcHVibGljIGFzeW5jIGluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuY3VycmVudFNldHRpbmdzID0gdGhpcy5zdG9yYWdlTWFuYWdlci5sb2FkU2V0dGluZ3MoKTtcbiAgICAgIHRoaXMudXBkYXRlVUkoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XG4gICAgICAgIHR5cGU6IEVycm9yVHlwZS5TVE9SQUdFX0VSUk9SLFxuICAgICAgICBtZXNzYWdlOiAn5Yid5aeL5YyW6K6+572u5aSx6LSlJyxcbiAgICAgICAgZGV0YWlsczogZXJyb3IsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDmmL7npLrmqKHmgIHmoYZcbiAgICovXG4gIHB1YmxpYyBzaG93KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmlzVmlzaWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuc2V0dGluZ3NNb2RhbC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XG4gICAgdGhpcy5pc1Zpc2libGUgPSB0cnVlO1xuXG4gICAgLy8g5pu05pawVUnmmL7npLpcbiAgICB0aGlzLnVwZGF0ZVVJKCk7XG5cbiAgICAvLyDpmLLmraLog4zmma/mu5rliqhcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gIH1cblxuICAvKipcbiAgICog6ZqQ6JeP5qih5oCB5qGGXG4gICAqL1xuICBwdWJsaWMgaGlkZSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaXNWaXNpYmxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zZXR0aW5nc01vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xuXG4gICAgLy8g5oGi5aSN6IOM5pmv5rua5YqoXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICcnO1xuXG4gICAgLy8g5L+d5a2Y6K6+572uXG4gICAgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmm7TmlrBVSeaYvuekulxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVVSSgpOiB2b2lkIHtcbiAgICAvLyDmm7TmlrDooajmg4XljIXlu7rorq7lvIDlhbNcbiAgICBpZiAodGhpcy5jdXJyZW50U2V0dGluZ3MuZW1vamlTdWdnZXN0aW9uc0VuYWJsZWQpIHtcbiAgICAgIHRoaXMuZW1vamlTdWdnZXN0aW9uc1RvZ2dsZS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbW9qaVN1Z2dlc3Rpb25zVG9nZ2xlLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIH1cblxuICAgIC8vIOabtOaWsOi3qOiBiuWkqeWPkemAgeW8gOWFs1xuICAgIGlmICh0aGlzLmN1cnJlbnRTZXR0aW5ncy5jcm9zc0NoYXRTZW5kRW5hYmxlZCkge1xuICAgICAgdGhpcy5jcm9zc0NoYXRTZW5kVG9nZ2xlLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNyb3NzQ2hhdFNlbmRUb2dnbGUuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgfVxuXG4gICAgLy8g5pu05paw6IGK5aSp5YiX6KGo5aOB57q46aKE6KeIXG4gICAgdGhpcy51cGRhdGVXYWxscGFwZXJQcmV2aWV3KHRoaXMuY3VycmVudFNldHRpbmdzLmNoYXRMaXN0V2FsbHBhcGVyLCB0aGlzLmNoYXRMaXN0V2FsbHBhcGVyUHJldmlldyk7XG5cbiAgICAvLyDmm7TmlrDlhajlsYDlr7nor53moYblo4HnurjpooTop4hcbiAgICB0aGlzLnVwZGF0ZVdhbGxwYXBlclByZXZpZXcodGhpcy5jdXJyZW50U2V0dGluZ3MuZ2xvYmFsQ2hhdFdhbGxwYXBlciwgdGhpcy5nbG9iYWxDaGF0V2FsbHBhcGVyUHJldmlldyk7XG4gIH1cblxuICAvKipcbiAgICog5pu05paw5aOB57q46aKE6KeIXG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZVdhbGxwYXBlclByZXZpZXcod2FsbHBhcGVyVXJsOiBzdHJpbmcsIHByZXZpZXdFbGVtZW50OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIGNvbnN0IHVwbG9hZEFyZWEgPSBwcmV2aWV3RWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nIGFzIEhUTUxFbGVtZW50O1xuXG4gICAgaWYgKHdhbGxwYXBlclVybCkge1xuICAgICAgY29uc3QgaW1nID0gcHJldmlld0VsZW1lbnQucXVlcnlTZWxlY3RvcignaW1nJykgYXMgSFRNTEltYWdlRWxlbWVudDtcbiAgICAgIGlmIChpbWcpIHtcbiAgICAgICAgaW1nLnNyYyA9IHdhbGxwYXBlclVybDtcbiAgICAgICAgcHJldmlld0VsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cbiAgICAgICAgLy8g6ZqQ6JeP5LiK5Lyg5Yy65Z+f77yM5pi+56S66aKE6KeIXG4gICAgICAgIGlmICh1cGxvYWRBcmVhICYmIHVwbG9hZEFyZWEuY2xhc3NMaXN0LmNvbnRhaW5zKCd1cGxvYWQtYXJlYScpKSB7XG4gICAgICAgICAgdXBsb2FkQXJlYS5zdHlsZS5zZXRQcm9wZXJ0eSgnZGlzcGxheScsICdub25lJywgJ2ltcG9ydGFudCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g6K6p6aKE6KeI5Yy65Z+f5Y+v54K55Ye75Lul6YeN5paw5LiK5LygXG4gICAgICAgIHByZXZpZXdFbGVtZW50LnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgcHJldmlld0VsZW1lbnQudGl0bGUgPSAn54K55Ye75pu05o2i5aOB57q4JztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcHJldmlld0VsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgLy8g5pi+56S65LiK5Lyg5Yy65Z+fXG4gICAgICBpZiAodXBsb2FkQXJlYSAmJiB1cGxvYWRBcmVhLmNsYXNzTGlzdC5jb250YWlucygndXBsb2FkLWFyZWEnKSkge1xuICAgICAgICB1cGxvYWRBcmVhLnN0eWxlLnNldFByb3BlcnR5KCdkaXNwbGF5JywgJ2ZsZXgnLCAnaW1wb3J0YW50Jyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOWIh+aNouihqOaDheWMheW7uuiurlxuICAgKi9cbiAgcHJpdmF0ZSB0b2dnbGVFbW9qaVN1Z2dlc3Rpb25zKCk6IHZvaWQge1xuICAgIHRoaXMuY3VycmVudFNldHRpbmdzLmVtb2ppU3VnZ2VzdGlvbnNFbmFibGVkID0gIXRoaXMuY3VycmVudFNldHRpbmdzLmVtb2ppU3VnZ2VzdGlvbnNFbmFibGVkO1xuICAgIHRoaXMudXBkYXRlVUkoKTtcblxuICAgIC8vIOeri+WNs+S/neWtmOiuvue9rlxuICAgIHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cbiAgICBjb25zdCBzdGF0dXMgPSB0aGlzLmN1cnJlbnRTZXR0aW5ncy5lbW9qaVN1Z2dlc3Rpb25zRW5hYmxlZCA/ICflt7LlvIDlkK8nIDogJ+W3suWFs+mXrSc7XG4gICAgdG9hc3RyLmluZm8oYOihqOaDheWMheW7uuiuriR7c3RhdHVzfWApO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIh+aNoui3qOiBiuWkqeWPkemAgVxuICAgKi9cbiAgcHJpdmF0ZSB0b2dnbGVDcm9zc0NoYXRTZW5kKCk6IHZvaWQge1xuICAgIHRoaXMuY3VycmVudFNldHRpbmdzLmNyb3NzQ2hhdFNlbmRFbmFibGVkID0gIXRoaXMuY3VycmVudFNldHRpbmdzLmNyb3NzQ2hhdFNlbmRFbmFibGVkO1xuICAgIHRoaXMudXBkYXRlVUkoKTtcblxuICAgIC8vIOeri+WNs+S/neWtmOiuvue9rlxuICAgIHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cbiAgICBjb25zdCBzdGF0dXMgPSB0aGlzLmN1cnJlbnRTZXR0aW5ncy5jcm9zc0NoYXRTZW5kRW5hYmxlZCA/ICflt7LlvIDlkK8nIDogJ+W3suWFs+mXrSc7XG4gICAgdG9hc3RyLmluZm8oYOi3qOiBiuWkqeWPkemAgSR7c3RhdHVzfWApO1xuXG4gICAgLy8g6Kem5Y+R6K6+572u5pu05paw5LqL5Lu2XG4gICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChcbiAgICAgIG5ldyBDdXN0b21FdmVudCgnc2V0dGluZ3NVcGRhdGVkJywge1xuICAgICAgICBkZXRhaWw6IHsgY3Jvc3NDaGF0U2VuZEVuYWJsZWQ6IHRoaXMuY3VycmVudFNldHRpbmdzLmNyb3NzQ2hhdFNlbmRFbmFibGVkIH0sXG4gICAgICB9KSxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIOWkhOeQhuaLluaLveaCrOWBnFxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVEcmFnT3ZlcihldmVudDogRHJhZ0V2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2RyYWdvdmVyJyk7XG4gIH1cblxuICAvKipcbiAgICog5aSE55CG6IGK5aSp5YiX6KGo5aOB57q45ouW5ou9XG4gICAqL1xuICBwcml2YXRlIGhhbmRsZUNoYXRMaXN0V2FsbHBhcGVyRHJvcChldmVudDogRHJhZ0V2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWdvdmVyJyk7XG5cbiAgICBjb25zdCBmaWxlcyA9IGV2ZW50LmRhdGFUcmFuc2Zlcj8uZmlsZXM7XG4gICAgaWYgKGZpbGVzICYmIGZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMucHJvY2Vzc0NoYXRMaXN0V2FsbHBhcGVyRmlsZShmaWxlc1swXSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOWkhOeQhuWFqOWxgOWvueivneahhuWjgee6uOaLluaLvVxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVHbG9iYWxDaGF0V2FsbHBhcGVyRHJvcChldmVudDogRHJhZ0V2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWdvdmVyJyk7XG5cbiAgICBjb25zdCBmaWxlcyA9IGV2ZW50LmRhdGFUcmFuc2Zlcj8uZmlsZXM7XG4gICAgaWYgKGZpbGVzICYmIGZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMucHJvY2Vzc0dsb2JhbENoYXRXYWxscGFwZXJGaWxlKGZpbGVzWzBdKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5aSE55CG6IGK5aSp5YiX6KGo5aOB57q45paH5Lu26YCJ5oupXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZUNoYXRMaXN0V2FsbHBhcGVyQ2hhbmdlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGlucHV0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgZmlsZSA9IGlucHV0LmZpbGVzPy5bMF07XG5cbiAgICBpZiAoZmlsZSkge1xuICAgICAgdGhpcy5wcm9jZXNzQ2hhdExpc3RXYWxscGFwZXJGaWxlKGZpbGUpO1xuICAgIH1cblxuICAgIC8vIOa4heepuuaWh+S7tui+k+WFpVxuICAgIGlucHV0LnZhbHVlID0gJyc7XG4gIH1cblxuICAvKipcbiAgICog5aSE55CG5YWo5bGA5a+56K+d5qGG5aOB57q45paH5Lu26YCJ5oupXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZUdsb2JhbENoYXRXYWxscGFwZXJDaGFuZ2UoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgaW5wdXQgPSBldmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBmaWxlID0gaW5wdXQuZmlsZXM/LlswXTtcblxuICAgIGlmIChmaWxlKSB7XG4gICAgICB0aGlzLnByb2Nlc3NHbG9iYWxDaGF0V2FsbHBhcGVyRmlsZShmaWxlKTtcbiAgICB9XG5cbiAgICAvLyDmuIXnqbrmlofku7bovpPlhaVcbiAgICBpbnB1dC52YWx1ZSA9ICcnO1xuICB9XG5cbiAgLyoqXG4gICAqIOWkhOeQhuiBiuWkqeWIl+ihqOWjgee6uOaWh+S7tlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBwcm9jZXNzQ2hhdExpc3RXYWxscGFwZXJGaWxlKGZpbGU6IEZpbGUpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IHRoaXMuaW1hZ2VQcm9jZXNzb3IudmFsaWRhdGVJbWFnZUZpbGUoZmlsZSk7XG4gICAgICBpZiAoIXZhbGlkYXRpb24uaXNWYWxpZCkge1xuICAgICAgICB0b2FzdHIuZXJyb3IodmFsaWRhdGlvbi5lcnJvciEsICfmlofku7bpqozor4HlpLHotKUnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNldFN0YXRlKENvbXBvbmVudFN0YXRlLkxPQURJTkcpO1xuXG4gICAgICBjb25zdCBiYXNlNjQgPSBhd2FpdCB0aGlzLmltYWdlUHJvY2Vzc29yLmZpbGVUb0Jhc2U2NChmaWxlKTtcbiAgICAgIGNvbnN0IGNvbXByZXNzZWRCYXNlNjQgPSBhd2FpdCB0aGlzLmltYWdlUHJvY2Vzc29yLmNvbXByZXNzV2FsbHBhcGVyKGJhc2U2NCk7XG5cbiAgICAgIHRoaXMuY3VycmVudFNldHRpbmdzLmNoYXRMaXN0V2FsbHBhcGVyID0gY29tcHJlc3NlZEJhc2U2NDtcbiAgICAgIHRoaXMudXBkYXRlV2FsbHBhcGVyUHJldmlldyhjb21wcmVzc2VkQmFzZTY0LCB0aGlzLmNoYXRMaXN0V2FsbHBhcGVyUHJldmlldyk7XG5cbiAgICAgIHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cbiAgICAgIC8vIOeri+WNs+W6lOeUqOWjgee6uOWIsOiBiuWkqeWIl+ihqFxuICAgICAgYXdhaXQgdGhpcy5hcHBseVdhbGxwYXBlclRvQ2hhdExpc3QoY29tcHJlc3NlZEJhc2U2NCk7XG5cbiAgICAgIHRvYXN0ci5zdWNjZXNzKCfogYrlpKnliJfooajlo4Hnurjorr7nva7miJDlip8nKTtcblxuICAgICAgdGhpcy5zZXRTdGF0ZShDb21wb25lbnRTdGF0ZS5JRExFKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XG4gICAgICAgIHR5cGU6IEVycm9yVHlwZS5GSUxFX0VSUk9SLFxuICAgICAgICBtZXNzYWdlOiAn5aSE55CG6IGK5aSp5YiX6KGo5aOB57q45aSx6LSlJyxcbiAgICAgICAgZGV0YWlsczogZXJyb3IsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5zZXRTdGF0ZShDb21wb25lbnRTdGF0ZS5JRExFKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5aSE55CG5YWo5bGA5a+56K+d5qGG5aOB57q45paH5Lu2XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHByb2Nlc3NHbG9iYWxDaGF0V2FsbHBhcGVyRmlsZShmaWxlOiBGaWxlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSB0aGlzLmltYWdlUHJvY2Vzc29yLnZhbGlkYXRlSW1hZ2VGaWxlKGZpbGUpO1xuICAgICAgaWYgKCF2YWxpZGF0aW9uLmlzVmFsaWQpIHtcbiAgICAgICAgdG9hc3RyLmVycm9yKHZhbGlkYXRpb24uZXJyb3IhLCAn5paH5Lu26aqM6K+B5aSx6LSlJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zZXRTdGF0ZShDb21wb25lbnRTdGF0ZS5MT0FESU5HKTtcblxuICAgICAgY29uc3QgYmFzZTY0ID0gYXdhaXQgdGhpcy5pbWFnZVByb2Nlc3Nvci5maWxlVG9CYXNlNjQoZmlsZSk7XG4gICAgICBjb25zdCBjb21wcmVzc2VkQmFzZTY0ID0gYXdhaXQgdGhpcy5pbWFnZVByb2Nlc3Nvci5jb21wcmVzc1dhbGxwYXBlcihiYXNlNjQpO1xuXG4gICAgICB0aGlzLmN1cnJlbnRTZXR0aW5ncy5nbG9iYWxDaGF0V2FsbHBhcGVyID0gY29tcHJlc3NlZEJhc2U2NDtcbiAgICAgIHRoaXMudXBkYXRlV2FsbHBhcGVyUHJldmlldyhjb21wcmVzc2VkQmFzZTY0LCB0aGlzLmdsb2JhbENoYXRXYWxscGFwZXJQcmV2aWV3KTtcblxuICAgICAgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblxuICAgICAgLy8g56uL5Y2z5bqU55So5aOB57q45Yiw6IGK5aSp56qX5Y+jXG4gICAgICBhd2FpdCB0aGlzLmFwcGx5V2FsbHBhcGVyVG9DaGF0V2luZG93KGNvbXByZXNzZWRCYXNlNjQpO1xuXG4gICAgICB0b2FzdHIuc3VjY2Vzcygn5YWo5bGA5a+56K+d5qGG5aOB57q46K6+572u5oiQ5YqfJyk7XG5cbiAgICAgIHRoaXMuc2V0U3RhdGUoQ29tcG9uZW50U3RhdGUuSURMRSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuaGFuZGxlRXJyb3Ioe1xuICAgICAgICB0eXBlOiBFcnJvclR5cGUuRklMRV9FUlJPUixcbiAgICAgICAgbWVzc2FnZTogJ+WkhOeQhuWFqOWxgOWvueivneahhuWjgee6uOWksei0pScsXG4gICAgICAgIGRldGFpbHM6IGVycm9yLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICB9KTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoQ29tcG9uZW50U3RhdGUuSURMRSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOenu+mZpOiBiuWkqeWIl+ihqOWjgee6uFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyByZW1vdmVDaGF0TGlzdFdhbGxwYXBlcigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5jdXJyZW50U2V0dGluZ3MuY2hhdExpc3RXYWxscGFwZXIgPSAnJztcbiAgICAgIHRoaXMudXBkYXRlV2FsbHBhcGVyUHJldmlldygnJywgdGhpcy5jaGF0TGlzdFdhbGxwYXBlclByZXZpZXcpO1xuICAgICAgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblxuICAgICAgLy8g6YeN572u6IGK5aSp5YiX6KGo5aOB57q45Li66buY6K6kXG4gICAgICBjb25zdCB7IFdhbGxwYXBlck1hbmFnZXIgfSA9IGF3YWl0IGltcG9ydCgnLi4vY2hhdExpc3Qvd2FsbHBhcGVyTWFuYWdlcicpO1xuICAgICAgY29uc3Qgd2FsbHBhcGVyTWFuYWdlciA9IFdhbGxwYXBlck1hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcbiAgICAgIHdhbGxwYXBlck1hbmFnZXIuY2xlYXJXYWxscGFwZXJDYWNoZSgpO1xuXG4gICAgICB0b2FzdHIuaW5mbygn5bey56e76Zmk6IGK5aSp5YiX6KGo5aOB57q4Jyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTZXR0aW5nc01vZGFsXSDnp7vpmaTogYrlpKnliJfooajlo4HnurjlpLHotKU6JywgZXJyb3IpO1xuICAgICAgdG9hc3RyLmVycm9yKCfnp7vpmaTlo4HnurjlpLHotKXvvIzor7fnqI3lkI7ph43or5UnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog56e76Zmk5YWo5bGA5a+56K+d5qGG5aOB57q4XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHJlbW92ZUdsb2JhbENoYXRXYWxscGFwZXIoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5jdXJyZW50U2V0dGluZ3MuZ2xvYmFsQ2hhdFdhbGxwYXBlciA9ICcnO1xuICAgIHRoaXMudXBkYXRlV2FsbHBhcGVyUHJldmlldygnJywgdGhpcy5nbG9iYWxDaGF0V2FsbHBhcGVyUHJldmlldyk7XG4gICAgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblxuICAgIC8vIOa4hemZpOiBiuWkqeeql+WPo+Wjgee6uFxuICAgIGF3YWl0IHRoaXMuY2xlYXJDaGF0V2luZG93V2FsbHBhcGVyKCk7XG5cbiAgICB0b2FzdHIuaW5mbygn5bey56e76Zmk5YWo5bGA5a+56K+d5qGG5aOB57q4Jyk7XG4gIH1cblxuICAvKipcbiAgICog5L+d5a2Y6K6+572uXG4gICAqL1xuICBwcml2YXRlIHNhdmVTZXR0aW5ncygpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5zdG9yYWdlTWFuYWdlci5zYXZlU2V0dGluZ3ModGhpcy5jdXJyZW50U2V0dGluZ3MpO1xuXG4gICAgICAvLyDop6blj5Horr7nva7lj5jmm7Tkuovku7ZcbiAgICAgIHRoaXMuZW1pdFNldHRpbmdzQ2hhbmdlRXZlbnQoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XG4gICAgICAgIHR5cGU6IEVycm9yVHlwZS5TVE9SQUdFX0VSUk9SLFxuICAgICAgICBtZXNzYWdlOiAn5L+d5a2Y6K6+572u5aSx6LSlJyxcbiAgICAgICAgZGV0YWlsczogZXJyb3IsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDop6blj5Horr7nva7lj5jmm7Tkuovku7ZcbiAgICovXG4gIHByaXZhdGUgZW1pdFNldHRpbmdzQ2hhbmdlRXZlbnQoKTogdm9pZCB7XG4gICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ3NldHRpbmdzQ2hhbmdlJywge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIHNldHRpbmdzOiB7IC4uLnRoaXMuY3VycmVudFNldHRpbmdzIH0sXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDorr7nva7nu4Tku7bnirbmgIFcbiAgICovXG4gIHByaXZhdGUgc2V0U3RhdGUobmV3U3RhdGU6IENvbXBvbmVudFN0YXRlKTogdm9pZCB7XG4gICAgdGhpcy5zdGF0ZSA9IG5ld1N0YXRlO1xuXG4gICAgLy8g5pu05pawVUnnirbmgIFcbiAgICB0aGlzLm1vZGFsQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2xvYWRpbmcnLCAnZXJyb3InKTtcblxuICAgIHN3aXRjaCAobmV3U3RhdGUpIHtcbiAgICAgIGNhc2UgQ29tcG9uZW50U3RhdGUuTE9BRElORzpcbiAgICAgICAgdGhpcy5tb2RhbENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdsb2FkaW5nJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBDb21wb25lbnRTdGF0ZS5FUlJPUjpcbiAgICAgICAgdGhpcy5tb2RhbENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdlcnJvcicpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5aSE55CG6ZSZ6K+vXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZUVycm9yKGVycm9ySW5mbzogRXJyb3JJbmZvKTogdm9pZCB7XG4gICAgY29uc29sZS5lcnJvcihgW1NldHRpbmdzTW9kYWxdICR7ZXJyb3JJbmZvLm1lc3NhZ2V9OmAsIGVycm9ySW5mby5kZXRhaWxzKTtcbiAgICB0b2FzdHIuZXJyb3IoZXJyb3JJbmZvLm1lc3NhZ2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIOiOt+WPluW9k+WJjeiuvue9rlxuICAgKi9cbiAgcHVibGljIGdldEN1cnJlbnRTZXR0aW5ncygpOiBBcHBTZXR0aW5ncyB7XG4gICAgcmV0dXJuIHsgLi4udGhpcy5jdXJyZW50U2V0dGluZ3MgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmo4Dmn6XmqKHmgIHmoYbmmK/lkKblj6/op4FcbiAgICovXG4gIHB1YmxpYyBpc01vZGFsVmlzaWJsZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pc1Zpc2libGU7XG4gIH1cblxuICAvKipcbiAgICog6YeN572u6K6+572u5Li66buY6K6k5YC8XG4gICAqL1xuICBwdWJsaWMgcmVzZXRUb0RlZmF1bHRzKCk6IHZvaWQge1xuICAgIHRoaXMuY3VycmVudFNldHRpbmdzID0gdGhpcy5zdG9yYWdlTWFuYWdlci5sb2FkU2V0dGluZ3MoKTtcbiAgICB0aGlzLnVwZGF0ZVVJKCk7XG4gICAgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICB0b2FzdHIuaW5mbygn6K6+572u5bey6YeN572u5Li66buY6K6k5YC8Jyk7XG4gIH1cblxuICAvKipcbiAgICog5aSE55CG5riF6Zmk55So5oi357yT5a2YXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGhhbmRsZUNsZWFyVXNlckNhY2hlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnNvbGUubG9nKCdbU2V0dGluZ3NNb2RhbF0g5byA5aeL5aSE55CG5riF6Zmk55So5oi357yT5a2YJyk7XG5cbiAgICB0cnkge1xuICAgICAgLy8g5pi+56S656Gu6K6k5a+56K+d5qGGXG4gICAgICBjb25zb2xlLmxvZygnW1NldHRpbmdzTW9kYWxdIOaYvuekuuehruiupOWvueivneahhicpO1xuICAgICAgY29uc3QgY29uZmlybWVkID0gYXdhaXQgdGhpcy5zaG93Q29uZmlybURpYWxvZyhcbiAgICAgICAgJ+ehruiupOa4hemZpOe8k+WtmCcsXG4gICAgICAgICfov5nlsIbmuIXpmaTmnKzlnLDkv53lrZjnmoTnlKjmiLflpLTlg4/lkozlkI3lrZfvvIzmgaLlpI3kuLrpu5jorqTorr7nva7jgILmraTmk43kvZzkuI3lj6/mkqTplIDvvIznoa7lrpropoHnu6fnu63lkJfvvJ8nLFxuICAgICAgKTtcblxuICAgICAgY29uc29sZS5sb2coJ1tTZXR0aW5nc01vZGFsXSDnlKjmiLfnoa7orqTnu5Pmnpw6JywgY29uZmlybWVkKTtcbiAgICAgIGlmICghY29uZmlybWVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8g6I635Y+WR2xvYmFsVXNlck1hbmFnZXLlrp7kvotcbiAgICAgIGNvbnN0IHsgR2xvYmFsVXNlck1hbmFnZXIgfSA9IGF3YWl0IGltcG9ydCgnLi9HbG9iYWxVc2VyTWFuYWdlcicpO1xuICAgICAgY29uc3QgZ2xvYmFsVXNlck1hbmFnZXIgPSBHbG9iYWxVc2VyTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuXG4gICAgICAvLyDph43nva7nlKjmiLfkv6Hmga9cbiAgICAgIGF3YWl0IGdsb2JhbFVzZXJNYW5hZ2VyLnJlc2V0VG9EZWZhdWx0KCk7XG5cbiAgICAgIC8vIOaYvuekuuaIkOWKn+a2iOaBr1xuICAgICAgdG9hc3RyLnN1Y2Nlc3MoJ+eUqOaIt+e8k+WtmOW3sua4hemZpO+8jOWktOWDj+WSjOWQjeWtl+W3suaBouWkjeS4uum7mOiupOiuvue9ricpO1xuXG4gICAgICAvLyDlhbPpl63orr7nva7mqKHmgIHmoYZcbiAgICAgIHRoaXMuaGlkZSgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbU2V0dGluZ3NNb2RhbF0g5riF6Zmk55So5oi357yT5a2Y5aSx6LSlOicsIGVycm9yKTtcbiAgICAgIHRvYXN0ci5lcnJvcign5riF6Zmk55So5oi357yT5a2Y5aSx6LSl77yM6K+356iN5ZCO6YeN6K+VJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOWkhOeQhua4hemZpOS4lueVjOS5puinkuiJsue8k+WtmFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBoYW5kbGVDbGVhckxvcmVib29rQ2FjaGUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc29sZS5sb2coJ1tTZXR0aW5nc01vZGFsXSDlvIDlp4vlpITnkIbmuIXpmaTkuJbnlYzkuabop5LoibLnvJPlrZgnKTtcblxuICAgIHRyeSB7XG4gICAgICAvLyDmnoTlu7rnoa7orqTmtojmga9cbiAgICAgIGNvbnN0IGNvbmZpcm1NZXNzYWdlID1cbiAgICAgICAgJ+i/meWwhua4hemZpOS4lueVjOS5puS4reaJgOacieinkuiJsueahOiHquWumuS5ieWktOWDj+e8k+WtmO+8jOaBouWkjeS4uuS4lueVjOS5pum7mOiupOWktOWDj+OAglxcblxcbuatpOaTjeS9nOS4jeWPr+aSpOmUgO+8jOehruWumuimgee7p+e7reWQl++8nyc7XG5cbiAgICAgIC8vIOaYvuekuuehruiupOWvueivneahhlxuICAgICAgY29uc3QgY29uZmlybWVkID0gYXdhaXQgdGhpcy5zaG93Q29uZmlybURpYWxvZygn56Gu6K6k5riF6Zmk5LiW55WM5Lmm6KeS6Imy57yT5a2YJywgY29uZmlybU1lc3NhZ2UpO1xuXG4gICAgICBpZiAoIWNvbmZpcm1lZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIOiwg+eUqOa4hemZpOe8k+WtmOaWueazlVxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgKHdpbmRvdyBhcyBhbnkpLmJlYXJDaGF0TWFuYWdlcj8uY2xlYXJMb3JlYm9va0NoYXJhY3RlckNhY2hlKCk7XG4gICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICB0b2FzdHIuZXJyb3IoJ+a4hemZpOS4lueVjOS5puinkuiJsue8k+WtmOWksei0pe+8jOivt+eojeWQjumHjeivlScpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIOaYvuekuuaIkOWKn+a2iOaBr++8iGJlYXJDaGF0TWFuYWdlcuS4reW3sue7j+aYvuekuuS6hnRvYXN0cua2iOaBr++8iVxuICAgICAgY29uc29sZS5sb2coJ1tTZXR0aW5nc01vZGFsXSDkuJbnlYzkuabop5LoibLnvJPlrZjmuIXpmaTlrozmiJA6JywgcmVzdWx0KTtcblxuICAgICAgLy8g5LiN5YWz6Zet6K6+572u5qih5oCB5qGG77yM6K6p55So5oi35Y+v5Lul57un57ut5YW25LuW5pON5L2cXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTZXR0aW5nc01vZGFsXSDmuIXpmaTkuJbnlYzkuabop5LoibLnvJPlrZjlpLHotKU6JywgZXJyb3IpO1xuICAgICAgdG9hc3RyLmVycm9yKCfmuIXpmaTkuJbnlYzkuabop5LoibLnvJPlrZjlpLHotKXvvIzor7fnqI3lkI7ph43or5UnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5pi+56S656Gu6K6k5a+56K+d5qGGXG4gICAqL1xuICBwcml2YXRlIHNob3dDb25maXJtRGlhbG9nKHRpdGxlOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIC8vIOenu+mZpOeOsOacieeahOWvueivneahhu+8iOWmguaenOacie+8iVxuICAgICAgY29uc3QgZXhpc3RpbmdEaWFsb2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29uZmlybS1kaWFsb2ctb3ZlcmxheScpO1xuICAgICAgaWYgKGV4aXN0aW5nRGlhbG9nKSB7XG4gICAgICAgIGV4aXN0aW5nRGlhbG9nLnJlbW92ZSgpO1xuICAgICAgfVxuXG4gICAgICAvLyDliJvlu7rnoa7orqTlr7nor53moYZcbiAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIG92ZXJsYXkuY2xhc3NOYW1lID0gJ2NvbmZpcm0tZGlhbG9nLW92ZXJsYXknO1xuXG4gICAgICBjb25zdCBkaWFsb2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGRpYWxvZy5jbGFzc05hbWUgPSAnY29uZmlybS1kaWFsb2cnO1xuXG4gICAgICBkaWFsb2cuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGlhbG9nLWhlYWRlclwiPlxuICAgICAgICAgIDxoMz7imqDvuI8gJHt0aXRsZX08L2gzPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImRpYWxvZy1jb250ZW50XCI+XG4gICAgICAgICAgPHA+JHttZXNzYWdlfTwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJkaWFsb2ctYnV0dG9uc1wiPlxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJjYW5jZWwtYnRuXCI+5Y+W5raIPC9idXR0b24+XG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImNvbmZpcm0tYnRuIGRhbmdlclwiPuehruiupOa4hemZpDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG5cbiAgICAgIG92ZXJsYXkuYXBwZW5kQ2hpbGQoZGlhbG9nKTtcblxuICAgICAgLy8g5bCG5a+56K+d5qGG55u05o6l5re75Yqg5Yiw6K6+572u5qih5oCB5qGG5YaF6YOo77yM56Gu5L+d5Zyo5q2j56Gu55qE5aCG5Y+g5LiK5LiL5paH5LitXG4gICAgICB0aGlzLnNldHRpbmdzTW9kYWwuYXBwZW5kQ2hpbGQob3ZlcmxheSk7XG5cbiAgICAgIC8vIOe7keWumuS6i+S7tlxuICAgICAgY29uc3QgY2FuY2VsQnRuID0gZGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJy5jYW5jZWwtYnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICBjb25zdCBjb25maXJtQnRuID0gZGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJy5jb25maXJtLWJ0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuXG4gICAgICBjb25zdCBjbGVhbnVwID0gKCkgPT4ge1xuICAgICAgICBvdmVybGF5LnJlbW92ZSgpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7XG4gICAgICB9O1xuXG4gICAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgcmVzb2x2ZShmYWxzZSk7XG4gICAgICB9KTtcblxuICAgICAgY29uZmlybUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIOeCueWHu+WklumDqOWFs+mXrVxuICAgICAgb3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICBpZiAoZS50YXJnZXQgPT09IG92ZXJsYXkpIHtcbiAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgICAgcmVzb2x2ZShmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBFU0PplK7lhbPpl61cbiAgICAgIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOW6lOeUqOWjgee6uOWIsOiBiuWkqeWIl+ihqFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBhcHBseVdhbGxwYXBlclRvQ2hhdExpc3Qod2FsbHBhcGVyRGF0YTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIOWKqOaAgeWvvOWFpVdhbGxwYXBlck1hbmFnZXJcbiAgICAgIGNvbnN0IHsgV2FsbHBhcGVyTWFuYWdlciB9ID0gYXdhaXQgaW1wb3J0KCcuLi9jaGF0TGlzdC93YWxscGFwZXJNYW5hZ2VyJyk7XG4gICAgICBjb25zdCB3YWxscGFwZXJNYW5hZ2VyID0gV2FsbHBhcGVyTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuXG4gICAgICAvLyDorr7nva7oh6rlrprkuYnlo4HnurhcbiAgICAgIHdhbGxwYXBlck1hbmFnZXIuc2V0Q3VzdG9tV2FsbHBhcGVyKHdhbGxwYXBlckRhdGEpO1xuXG4gICAgICBjb25zb2xlLmxvZygnW1NldHRpbmdzTW9kYWxdIOWjgee6uOW3suW6lOeUqOWIsOiBiuWkqeWIl+ihqCcpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbU2V0dGluZ3NNb2RhbF0g5bqU55So5aOB57q45aSx6LSlOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlupTnlKjlo4HnurjliLDogYrlpKnnqpflj6NcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgYXBwbHlXYWxscGFwZXJUb0NoYXRXaW5kb3cod2FsbHBhcGVyRGF0YTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIOmAmui/h+WFqOWxgOS6i+S7tumAmuefpeiBiuWkqeWjgee6uOeuoeeQhuWZqFxuICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2dsb2JhbENoYXRXYWxscGFwZXJDaGFuZ2UnLCB7XG4gICAgICAgIGRldGFpbDogeyB3YWxscGFwZXJEYXRhIH0sXG4gICAgICB9KTtcbiAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuXG4gICAgICBjb25zb2xlLmxvZygnW1NldHRpbmdzTW9kYWxdIOWjgee6uOW3suW6lOeUqOWIsOiBiuWkqeeql+WPoycpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbU2V0dGluZ3NNb2RhbF0g5bqU55So6IGK5aSp56qX5Y+j5aOB57q45aSx6LSlOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDmuIXpmaTogYrlpKnnqpflj6Plo4HnurhcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgY2xlYXJDaGF0V2luZG93V2FsbHBhcGVyKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyDpgJrov4flhajlsYDkuovku7bpgJrnn6XogYrlpKnlo4HnurjnrqHnkIblmajmuIXpmaTlo4HnurhcbiAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdjbGVhckdsb2JhbENoYXRXYWxscGFwZXInKTtcbiAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuXG4gICAgICBjb25zb2xlLmxvZygnW1NldHRpbmdzTW9kYWxdIOiBiuWkqeeql+WPo+Wjgee6uOW3sua4hemZpCcpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbU2V0dGluZ3NNb2RhbF0g5riF6Zmk6IGK5aSp56qX5Y+j5aOB57q45aSx6LSlOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlpITnkIblhajlsYDmm7TmjaLmjInpkq7ngrnlh7tcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgaGFuZGxlQXBwbHlUb0FsbENoYXRzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyDmo4Dmn6XmmK/lkKbmnInlhajlsYDlo4HnurhcbiAgICAgIGlmICghdGhpcy5jdXJyZW50U2V0dGluZ3MuZ2xvYmFsQ2hhdFdhbGxwYXBlcikge1xuICAgICAgICB0b2FzdHIud2FybmluZygn6K+35YWI6K6+572u5YWo5bGA5a+56K+d5qGG5aOB57q4Jyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8g5pi+56S656Gu6K6k5a+56K+d5qGGXG4gICAgICBjb25zdCBjb25maXJtZWQgPSBhd2FpdCB0aGlzLnNob3dDb25maXJtRGlhbG9nKFxuICAgICAgICAn56Gu6K6k5YWo5bGA5pu05o2iJyxcbiAgICAgICAgJ+i/meWwhuaKiuW9k+WJjeeahOWFqOWxgOWvueivneahhuWjgee6uOW6lOeUqOWIsOaJgOacieiBiuWkqeahhu+8jOW5tua4hemZpOaJgOacieWNleeLrOiuvue9rueahOWjgee6uOOAguatpOaTjeS9nOS4jeWPr+aSpOmUgO+8jOehruWumuimgee7p+e7reWQl++8nycsXG4gICAgICApO1xuXG4gICAgICBpZiAoIWNvbmZpcm1lZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIOmAmui/h+WFqOWxgOS6i+S7tumAmuefpeiBiuWkqeWjgee6uOeuoeeQhuWZqOW6lOeUqOWIsOaJgOacieiBiuWkqeahhlxuICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2FwcGx5V2FsbHBhcGVyVG9BbGxDaGF0cycsIHtcbiAgICAgICAgZGV0YWlsOiB7IHdhbGxwYXBlckRhdGE6IHRoaXMuY3VycmVudFNldHRpbmdzLmdsb2JhbENoYXRXYWxscGFwZXIgfSxcbiAgICAgIH0pO1xuICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XG5cbiAgICAgIC8vIOabtOaWsOiuvue9ru+8iOa4hemZpOWNleeLrOWjgee6uOiuvue9ru+8iVxuICAgICAgdGhpcy5jdXJyZW50U2V0dGluZ3MuaW5kaXZpZHVhbENoYXRXYWxscGFwZXJzID0ge307XG4gICAgICB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXG4gICAgICB0b2FzdHIuc3VjY2Vzcygn5bey5bCG5aOB57q45bqU55So5Yiw5omA5pyJ6IGK5aSp5qGGJyk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCdbU2V0dGluZ3NNb2RhbF0g5YWo5bGA5pu05o2i5aOB57q45a6M5oiQJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTZXR0aW5nc01vZGFsXSDlhajlsYDmm7TmjaLlo4HnurjlpLHotKU6JywgZXJyb3IpO1xuICAgICAgdG9hc3RyLmVycm9yKCflhajlsYDmm7TmjaLlo4HnurjlpLHotKXvvIzor7fnqI3lkI7ph43or5UnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog6ZSA5q+B57uE5Lu2XG4gICAqL1xuICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkIHtcbiAgICB0aGlzLmhpZGUoKTtcblxuICAgIC8vIOaBouWkjeiDjOaZr+a7muWKqFxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJztcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/profile/SettingsModal.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/profile/StorageManager.ts": 
  /*!*************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/profile/StorageManager.ts ***!
  \*************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StorageManager: () => (/* binding */ StorageManager)\n/* harmony export */ });\n/* harmony import */ var _utils_characterStorage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/characterStorage */ \"./src/多云熊/备份/给rovo的/modules/utils/characterStorage.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./types */ \"./src/多云熊/备份/给rovo的/modules/profile/types.ts\");\n/**\n * StorageManager - 存储管理器\n * 负责用户数据和应用设置的本地存储管理\n */\n\n\nclass StorageManager {\n    static instance;\n    constructor() { }\n    /**\n     * 获取单例实例\n     */\n    static getInstance() {\n        if (!StorageManager.instance) {\n            StorageManager.instance = new StorageManager();\n        }\n        return StorageManager.instance;\n    }\n    /**\n     * 保存用户数据到本地存储\n     */\n    saveUserData(data) {\n        try {\n            const serializedData = JSON.stringify({\n                ...data,\n                lastUpdated: Date.now(),\n            });\n            localStorage.setItem(_types__WEBPACK_IMPORTED_MODULE_1__.STORAGE_KEYS.USER_DATA, serializedData);\n        }\n        catch (error) {\n            this.handleError({\n                type: _types__WEBPACK_IMPORTED_MODULE_1__.ErrorType.STORAGE_ERROR,\n                message: '保存用户数据失败',\n                details: error,\n                timestamp: Date.now(),\n            });\n            throw error;\n        }\n    }\n    /**\n     * 从本地存储加载用户数据\n     */\n    loadUserData() {\n        try {\n            const storedData = localStorage.getItem(_types__WEBPACK_IMPORTED_MODULE_1__.STORAGE_KEYS.USER_DATA);\n            if (!storedData) {\n                return null;\n            }\n            const userData = JSON.parse(storedData);\n            // 验证数据完整性\n            if (!this.validateUserData(userData)) {\n                console.warn('用户数据格式无效，将使用默认数据');\n                this.clearUserData();\n                return null;\n            }\n            return userData;\n        }\n        catch (error) {\n            this.handleError({\n                type: _types__WEBPACK_IMPORTED_MODULE_1__.ErrorType.STORAGE_ERROR,\n                message: '加载用户数据失败',\n                details: error,\n                timestamp: Date.now(),\n            });\n            this.clearUserData();\n            return null;\n        }\n    }\n    /**\n     * 获取默认用户数据\n     */\n    async getDefaultUserData() {\n        try {\n            // 使用全局 triggerSlash 函数获取默认用户信息\n            const defaultName = (await triggerSlash('/pass {{user}}')) || '用户';\n            const defaultAvatar = (await triggerSlash('/pass {{userAvatarPath}}')) || '';\n            return {\n                name: defaultName,\n                avatar: defaultAvatar,\n                isCustom: false,\n                lastUpdated: Date.now(),\n            };\n        }\n        catch (error) {\n            this.handleError({\n                type: _types__WEBPACK_IMPORTED_MODULE_1__.ErrorType.NETWORK_ERROR,\n                message: '获取默认用户数据失败',\n                details: error,\n                timestamp: Date.now(),\n            });\n            // 返回备用默认数据\n            return {\n                name: '用户',\n                avatar: '',\n                isCustom: false,\n                lastUpdated: Date.now(),\n            };\n        }\n    }\n    /**\n     * 清除用户数据\n     */\n    clearUserData() {\n        try {\n            localStorage.removeItem(_types__WEBPACK_IMPORTED_MODULE_1__.STORAGE_KEYS.USER_DATA);\n        }\n        catch (error) {\n            this.handleError({\n                type: _types__WEBPACK_IMPORTED_MODULE_1__.ErrorType.STORAGE_ERROR,\n                message: '清除用户数据失败',\n                details: error,\n                timestamp: Date.now(),\n            });\n        }\n    }\n    /**\n     * 保存应用设置（角色相关）\n     */\n    saveSettings(settings) {\n        try {\n            // 使用角色相关存储\n            (0,_utils_characterStorage__WEBPACK_IMPORTED_MODULE_0__.setCharacterItem)(_types__WEBPACK_IMPORTED_MODULE_1__.STORAGE_KEYS.APP_SETTINGS, settings);\n            console.log('[StorageManager] 应用设置已保存到角色专用空间');\n        }\n        catch (error) {\n            this.handleError({\n                type: _types__WEBPACK_IMPORTED_MODULE_1__.ErrorType.STORAGE_ERROR,\n                message: '保存应用设置失败',\n                details: error,\n                timestamp: Date.now(),\n            });\n            throw error;\n        }\n    }\n    /**\n     * 加载应用设置（角色相关）\n     */\n    loadSettings() {\n        try {\n            // 使用角色相关存储\n            const settings = (0,_utils_characterStorage__WEBPACK_IMPORTED_MODULE_0__.getCharacterItem)(_types__WEBPACK_IMPORTED_MODULE_1__.STORAGE_KEYS.APP_SETTINGS, null);\n            if (!settings) {\n                console.log('[StorageManager] 未找到角色专用设置，使用默认设置');\n                return { ..._types__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_SETTINGS };\n            }\n            // 合并默认设置，确保新增的设置项有默认值\n            const mergedSettings = {\n                ..._types__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_SETTINGS,\n                ...settings,\n            };\n            console.log('[StorageManager] 从角色专用空间加载应用设置');\n            return mergedSettings;\n        }\n        catch (error) {\n            this.handleError({\n                type: _types__WEBPACK_IMPORTED_MODULE_1__.ErrorType.STORAGE_ERROR,\n                message: '加载应用设置失败',\n                details: error,\n                timestamp: Date.now(),\n            });\n            return { ..._types__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_SETTINGS };\n        }\n    }\n    /**\n     * 更新部分设置\n     */\n    updateSettings(partialSettings) {\n        const currentSettings = this.loadSettings();\n        const updatedSettings = {\n            ...currentSettings,\n            ...partialSettings,\n        };\n        this.saveSettings(updatedSettings);\n    }\n    /**\n     * 清除应用设置（角色相关）\n     */\n    clearSettings() {\n        try {\n            // 使用角色相关存储\n            const { removeCharacterItem } = __webpack_require__(/*! ../utils/characterStorage */ \"./src/多云熊/备份/给rovo的/modules/utils/characterStorage.ts\");\n            removeCharacterItem(_types__WEBPACK_IMPORTED_MODULE_1__.STORAGE_KEYS.APP_SETTINGS);\n            console.log('[StorageManager] 角色专用应用设置已清除');\n        }\n        catch (error) {\n            this.handleError({\n                type: _types__WEBPACK_IMPORTED_MODULE_1__.ErrorType.STORAGE_ERROR,\n                message: '清除应用设置失败',\n                details: error,\n                timestamp: Date.now(),\n            });\n        }\n    }\n    /**\n     * 检查本地存储可用性\n     */\n    isStorageAvailable() {\n        try {\n            const testKey = '__storage_test__';\n            localStorage.setItem(testKey, 'test');\n            localStorage.removeItem(testKey);\n            return true;\n        }\n        catch {\n            return false;\n        }\n    }\n    /**\n     * 获取存储使用情况\n     */\n    getStorageUsage() {\n        try {\n            let used = 0;\n            for (let key in localStorage) {\n                if (localStorage.hasOwnProperty(key)) {\n                    used += localStorage[key].length + key.length;\n                }\n            }\n            // 大多数浏览器的 localStorage 限制是 5MB\n            const total = 5 * 1024 * 1024;\n            const percentage = (used / total) * 100;\n            return { used, total, percentage };\n        }\n        catch (error) {\n            return { used: 0, total: 0, percentage: 0 };\n        }\n    }\n    /**\n     * 验证用户数据格式\n     */\n    validateUserData(data) {\n        return (data &&\n            typeof data.name === 'string' &&\n            typeof data.avatar === 'string' &&\n            typeof data.isCustom === 'boolean' &&\n            typeof data.lastUpdated === 'number');\n    }\n    /**\n     * 处理错误\n     */\n    handleError(errorInfo) {\n        console.error(`[StorageManager] ${errorInfo.message}:`, errorInfo.details);\n        // 如果有 TavernHelper 的错误处理，使用它\n        if (window.TavernHelper?.errorCatched) {\n            window.TavernHelper.errorCatched(errorInfo);\n        }\n    }\n    /**\n     * 导出所有数据（用于备份）\n     */\n    exportData() {\n        return {\n            userData: this.loadUserData(),\n            settings: this.loadSettings(),\n        };\n    }\n    /**\n     * 导入数据（用于恢复）\n     */\n    importData(data) {\n        try {\n            if (data.userData && this.validateUserData(data.userData)) {\n                this.saveUserData(data.userData);\n            }\n            if (data.settings) {\n                this.saveSettings(data.settings);\n            }\n        }\n        catch (error) {\n            this.handleError({\n                type: _types__WEBPACK_IMPORTED_MODULE_1__.ErrorType.STORAGE_ERROR,\n                message: '导入数据失败',\n                details: error,\n                timestamp: Date.now(),\n            });\n            throw error;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvcHJvZmlsZS9TdG9yYWdlTWFuYWdlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7O0dBR0c7QUFFNEU7QUFDdUI7QUFZL0YsTUFBTSxjQUFjO0lBQ2pCLE1BQU0sQ0FBQyxRQUFRLENBQWlCO0lBRXhDLGdCQUF1QixDQUFDO0lBRXhCOztPQUVHO0lBQ0ksTUFBTSxDQUFDLFdBQVc7UUFDdkIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUM3QixjQUFjLENBQUMsUUFBUSxHQUFHLElBQUksY0FBYyxFQUFFLENBQUM7UUFDakQsQ0FBQztRQUNELE9BQU8sY0FBYyxDQUFDLFFBQVEsQ0FBQztJQUNqQyxDQUFDO0lBRUQ7O09BRUc7SUFDSSxZQUFZLENBQUMsSUFBYztRQUNoQyxJQUFJLENBQUM7WUFDSCxNQUFNLGNBQWMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDO2dCQUNwQyxHQUFHLElBQUk7Z0JBQ1AsV0FBVyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7YUFDeEIsQ0FBQyxDQUFDO1lBQ0gsWUFBWSxDQUFDLE9BQU8sQ0FBQyxnREFBWSxDQUFDLFNBQVMsRUFBRSxjQUFjLENBQUMsQ0FBQztRQUMvRCxDQUFDO1FBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNmLElBQUksQ0FBQyxXQUFXLENBQUM7Z0JBQ2YsSUFBSSxFQUFFLDZDQUFTLENBQUMsYUFBYTtnQkFDN0IsT0FBTyxFQUFFLFVBQVU7Z0JBQ25CLE9BQU8sRUFBRSxLQUFLO2dCQUNkLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2FBQ3RCLENBQUMsQ0FBQztZQUNILE1BQU0sS0FBSyxDQUFDO1FBQ2QsQ0FBQztJQUNILENBQUM7SUFFRDs7T0FFRztJQUNJLFlBQVk7UUFDakIsSUFBSSxDQUFDO1lBQ0gsTUFBTSxVQUFVLEdBQUcsWUFBWSxDQUFDLE9BQU8sQ0FBQyxnREFBWSxDQUFDLFNB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QUU7WUFDN0IsUUFBUSxFQUFFLElBQUksQ0FBQyxZQUFZLEVBQUU7U0FDOUIsQ0FBQztJQUNKLENBQUM7SUFFRDs7T0FFRztJQUNJLFVBQVUsQ0FBQyxJQUFxRDtRQUNyRSxJQUFJLENBQUM7WUFDSCxJQUFJLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDO2dCQUMxRCxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNuQyxDQUFDO1lBRUQsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7Z0JBQ2xCLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ25DLENBQUM7UUFDSCxDQUFDO1FBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNmLElBQUksQ0FBQyxXQUFXLENBQUM7Z0JBQ2YsSUFBSSxFQUFFLDZDQUFTLENBQUMsYUFBYTtnQkFDN0IsT0FBTyxFQUFFLFFBQVE7Z0JBQ2pCLE9BQU8sRUFBRSxLQUFLO2dCQUNkLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2FBQ3RCLENBQUMsQ0FBQztZQUNILE1BQU0sS0FBSyxDQUFDO1FBQ2QsQ0FBQztJQUNILENBQUM7Q0FDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvcHJvZmlsZS9TdG9yYWdlTWFuYWdlci50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFN0b3JhZ2VNYW5hZ2VyIC0g5a2Y5YKo566h55CG5ZmoXHJcbiAqIOi0n+i0o+eUqOaIt+aVsOaNruWSjOW6lOeUqOiuvue9rueahOacrOWcsOWtmOWCqOeuoeeQhlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IGdldENoYXJhY3Rlckl0ZW0sIHNldENoYXJhY3Rlckl0ZW0gfSBmcm9tICcuLi91dGlscy9jaGFyYWN0ZXJTdG9yYWdlJztcclxuaW1wb3J0IHsgQXBwU2V0dGluZ3MsIERFRkFVTFRfU0VUVElOR1MsIEVycm9ySW5mbywgRXJyb3JUeXBlLCBTVE9SQUdFX0tFWVMsIFVzZXJEYXRhIH0gZnJvbSAnLi90eXBlcyc7XHJcblxyXG4vLyDlo7DmmI7lhajlsYDlh73mlbBcclxuZGVjbGFyZSBmdW5jdGlvbiB0cmlnZ2VyU2xhc2goY29tbWFuZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+O1xyXG5cclxuZGVjbGFyZSBjb25zdCB3aW5kb3c6IFdpbmRvdyAmIHtcclxuICBUYXZlcm5IZWxwZXI6IHtcclxuICAgIHRyaWdnZXJTbGFzaDogKGNvbW1hbmQ6IHN0cmluZykgPT4gUHJvbWlzZTxzdHJpbmc+O1xyXG4gICAgZXJyb3JDYXRjaGVkOiAoZXJyb3I6IGFueSkgPT4gdm9pZDtcclxuICB9O1xyXG59O1xyXG5cclxuZXhwb3J0IGNsYXNzIFN0b3JhZ2VNYW5hZ2VyIHtcclxuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogU3RvcmFnZU1hbmFnZXI7XHJcblxyXG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7fVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bljZXkvovlrp7kvotcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldEluc3RhbmNlKCk6IFN0b3JhZ2VNYW5hZ2VyIHtcclxuICAgIGlmICghU3RvcmFnZU1hbmFnZXIuaW5zdGFuY2UpIHtcclxuICAgICAgU3RvcmFnZU1hbmFnZXIuaW5zdGFuY2UgPSBuZXcgU3RvcmFnZU1hbmFnZXIoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBTdG9yYWdlTWFuYWdlci5pbnN0YW5jZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOS/neWtmOeUqOaIt+aVsOaNruWIsOacrOWcsOWtmOWCqFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzYXZlVXNlckRhdGEoZGF0YTogVXNlckRhdGEpOiB2b2lkIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHNlcmlhbGl6ZWREYXRhID0gSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIC4uLmRhdGEsXHJcbiAgICAgICAgbGFzdFVwZGF0ZWQ6IERhdGUubm93KCksXHJcbiAgICAgIH0pO1xyXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShTVE9SQUdFX0tFWVMuVVNFUl9EQVRBLCBzZXJpYWxpemVkRGF0YSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLmhhbmRsZUVycm9yKHtcclxuICAgICAgICB0eXBlOiBFcnJvclR5cGUuU1RPUkFHRV9FUlJPUixcclxuICAgICAgICBtZXNzYWdlOiAn5L+d5a2Y55So5oi35pWw5o2u5aSx6LSlJyxcclxuICAgICAgICBkZXRhaWxzOiBlcnJvcixcclxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgIH0pO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOS7juacrOWcsOWtmOWCqOWKoOi9veeUqOaIt+aVsOaNrlxyXG4gICAqL1xyXG4gIHB1YmxpYyBsb2FkVXNlckRhdGEoKTogVXNlckRhdGEgfCBudWxsIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHN0b3JlZERhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShTVE9SQUdFX0tFWVMuVVNFUl9EQVRBKTtcclxuICAgICAgaWYgKCFzdG9yZWREYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHVzZXJEYXRhID0gSlNPTi5wYXJzZShzdG9yZWREYXRhKSBhcyBVc2VyRGF0YTtcclxuXHJcbiAgICAgIC8vIOmqjOivgeaVsOaNruWujOaVtOaAp1xyXG4gICAgICBpZiAoIXRoaXMudmFsaWRhdGVVc2VyRGF0YSh1c2VyRGF0YSkpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ+eUqOaIt+aVsOaNruagvOW8j+aXoOaViO+8jOWwhuS9v+eUqOm7mOiupOaVsOaNricpO1xyXG4gICAgICAgIHRoaXMuY2xlYXJVc2VyRGF0YSgpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdXNlckRhdGE7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLmhhbmRsZUVycm9yKHtcclxuICAgICAgICB0eXBlOiBFcnJvclR5cGUuU1RPUkFHRV9FUlJPUixcclxuICAgICAgICBtZXNzYWdlOiAn5Yqg6L2955So5oi35pWw5o2u5aSx6LSlJyxcclxuICAgICAgICBkZXRhaWxzOiBlcnJvcixcclxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLmNsZWFyVXNlckRhdGEoKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bpu5jorqTnlKjmiLfmlbDmja5cclxuICAgKi9cclxuICBwdWJsaWMgYXN5bmMgZ2V0RGVmYXVsdFVzZXJEYXRhKCk6IFByb21pc2U8VXNlckRhdGE+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOS9v+eUqOWFqOWxgCB0cmlnZ2VyU2xhc2gg5Ye95pWw6I635Y+W6buY6K6k55So5oi35L+h5oGvXHJcbiAgICAgIGNvbnN0IGRlZmF1bHROYW1lID0gKGF3YWl0IHRyaWdnZXJTbGFzaCgnL3Bhc3Mge3t1c2VyfX0nKSkgfHwgJ+eUqOaItyc7XHJcbiAgICAgIGNvbnN0IGRlZmF1bHRBdmF0YXIgPSAoYXdhaXQgdHJpZ2dlclNsYXNoKCcvcGFzcyB7e3VzZXJBdmF0YXJQYXRofX0nKSkgfHwgJyc7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIG5hbWU6IGRlZmF1bHROYW1lLFxyXG4gICAgICAgIGF2YXRhcjogZGVmYXVsdEF2YXRhcixcclxuICAgICAgICBpc0N1c3RvbTogZmFsc2UsXHJcbiAgICAgICAgbGFzdFVwZGF0ZWQ6IERhdGUubm93KCksXHJcbiAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLmhhbmRsZUVycm9yKHtcclxuICAgICAgICB0eXBlOiBFcnJvclR5cGUuTkVUV09SS19FUlJPUixcclxuICAgICAgICBtZXNzYWdlOiAn6I635Y+W6buY6K6k55So5oi35pWw5o2u5aSx6LSlJyxcclxuICAgICAgICBkZXRhaWxzOiBlcnJvcixcclxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8g6L+U5Zue5aSH55So6buY6K6k5pWw5o2uXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgbmFtZTogJ+eUqOaItycsXHJcbiAgICAgICAgYXZhdGFyOiAnJyxcclxuICAgICAgICBpc0N1c3RvbTogZmFsc2UsXHJcbiAgICAgICAgbGFzdFVwZGF0ZWQ6IERhdGUubm93KCksXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmuIXpmaTnlKjmiLfmlbDmja5cclxuICAgKi9cclxuICBwdWJsaWMgY2xlYXJVc2VyRGF0YSgpOiB2b2lkIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFNUT1JBR0VfS0VZUy5VU0VSX0RBVEEpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XHJcbiAgICAgICAgdHlwZTogRXJyb3JUeXBlLlNUT1JBR0VfRVJST1IsXHJcbiAgICAgICAgbWVzc2FnZTogJ+a4hemZpOeUqOaIt+aVsOaNruWksei0pScsXHJcbiAgICAgICAgZGV0YWlsczogZXJyb3IsXHJcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOS/neWtmOW6lOeUqOiuvue9ru+8iOinkuiJsuebuOWFs++8iVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzYXZlU2V0dGluZ3Moc2V0dGluZ3M6IEFwcFNldHRpbmdzKTogdm9pZCB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDkvb/nlKjop5LoibLnm7jlhbPlrZjlgqhcclxuICAgICAgc2V0Q2hhcmFjdGVySXRlbShTVE9SQUdFX0tFWVMuQVBQX1NFVFRJTkdTLCBzZXR0aW5ncyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdbU3RvcmFnZU1hbmFnZXJdIOW6lOeUqOiuvue9ruW3suS/neWtmOWIsOinkuiJsuS4k+eUqOepuumXtCcpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XHJcbiAgICAgICAgdHlwZTogRXJyb3JUeXBlLlNUT1JBR0VfRVJST1IsXHJcbiAgICAgICAgbWVzc2FnZTogJ+S/neWtmOW6lOeUqOiuvue9ruWksei0pScsXHJcbiAgICAgICAgZGV0YWlsczogZXJyb3IsXHJcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICB9KTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliqDovb3lupTnlKjorr7nva7vvIjop5LoibLnm7jlhbPvvIlcclxuICAgKi9cclxuICBwdWJsaWMgbG9hZFNldHRpbmdzKCk6IEFwcFNldHRpbmdzIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOS9v+eUqOinkuiJsuebuOWFs+WtmOWCqFxyXG4gICAgICBjb25zdCBzZXR0aW5ncyA9IGdldENoYXJhY3Rlckl0ZW08QXBwU2V0dGluZ3M+KFNUT1JBR0VfS0VZUy5BUFBfU0VUVElOR1MsIG51bGwpO1xyXG5cclxuICAgICAgaWYgKCFzZXR0aW5ncykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdbU3RvcmFnZU1hbmFnZXJdIOacquaJvuWIsOinkuiJsuS4k+eUqOiuvue9ru+8jOS9v+eUqOm7mOiupOiuvue9ricpO1xyXG4gICAgICAgIHJldHVybiB7IC4uLkRFRkFVTFRfU0VUVElOR1MgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5ZCI5bm26buY6K6k6K6+572u77yM56Gu5L+d5paw5aKe55qE6K6+572u6aG55pyJ6buY6K6k5YC8XHJcbiAgICAgIGNvbnN0IG1lcmdlZFNldHRpbmdzID0ge1xyXG4gICAgICAgIC4uLkRFRkFVTFRfU0VUVElOR1MsXHJcbiAgICAgICAgLi4uc2V0dGluZ3MsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnW1N0b3JhZ2VNYW5hZ2VyXSDku47op5LoibLkuJPnlKjnqbrpl7TliqDovb3lupTnlKjorr7nva4nKTtcclxuICAgICAgcmV0dXJuIG1lcmdlZFNldHRpbmdzO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XHJcbiAgICAgICAgdHlwZTogRXJyb3JUeXBlLlNUT1JBR0VfRVJST1IsXHJcbiAgICAgICAgbWVzc2FnZTogJ+WKoOi9veW6lOeUqOiuvue9ruWksei0pScsXHJcbiAgICAgICAgZGV0YWlsczogZXJyb3IsXHJcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIHsgLi4uREVGQVVMVF9TRVRUSU5HUyB9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5pu05paw6YOo5YiG6K6+572uXHJcbiAgICovXHJcbiAgcHVibGljIHVwZGF0ZVNldHRpbmdzKHBhcnRpYWxTZXR0aW5nczogUGFydGlhbDxBcHBTZXR0aW5ncz4pOiB2b2lkIHtcclxuICAgIGNvbnN0IGN1cnJlbnRTZXR0aW5ncyA9IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcbiAgICBjb25zdCB1cGRhdGVkU2V0dGluZ3MgPSB7XHJcbiAgICAgIC4uLmN1cnJlbnRTZXR0aW5ncyxcclxuICAgICAgLi4ucGFydGlhbFNldHRpbmdzLFxyXG4gICAgfTtcclxuICAgIHRoaXMuc2F2ZVNldHRpbmdzKHVwZGF0ZWRTZXR0aW5ncyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmuIXpmaTlupTnlKjorr7nva7vvIjop5LoibLnm7jlhbPvvIlcclxuICAgKi9cclxuICBwdWJsaWMgY2xlYXJTZXR0aW5ncygpOiB2b2lkIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOS9v+eUqOinkuiJsuebuOWFs+WtmOWCqFxyXG4gICAgICBjb25zdCB7IHJlbW92ZUNoYXJhY3Rlckl0ZW0gfSA9IHJlcXVpcmUoJy4uL3V0aWxzL2NoYXJhY3RlclN0b3JhZ2UnKTtcclxuICAgICAgcmVtb3ZlQ2hhcmFjdGVySXRlbShTVE9SQUdFX0tFWVMuQVBQX1NFVFRJTkdTKTtcclxuICAgICAgY29uc29sZS5sb2coJ1tTdG9yYWdlTWFuYWdlcl0g6KeS6Imy5LiT55So5bqU55So6K6+572u5bey5riF6ZmkJyk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLmhhbmRsZUVycm9yKHtcclxuICAgICAgICB0eXBlOiBFcnJvclR5cGUuU1RPUkFHRV9FUlJPUixcclxuICAgICAgICBtZXNzYWdlOiAn5riF6Zmk5bqU55So6K6+572u5aSx6LSlJyxcclxuICAgICAgICBkZXRhaWxzOiBlcnJvcixcclxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5qOA5p+l5pys5Zyw5a2Y5YKo5Y+v55So5oCnXHJcbiAgICovXHJcbiAgcHVibGljIGlzU3RvcmFnZUF2YWlsYWJsZSgpOiBib29sZWFuIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHRlc3RLZXkgPSAnX19zdG9yYWdlX3Rlc3RfXyc7XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRlc3RLZXksICd0ZXN0Jyk7XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHRlc3RLZXkpO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gY2F0Y2gge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5blrZjlgqjkvb/nlKjmg4XlhrVcclxuICAgKi9cclxuICBwdWJsaWMgZ2V0U3RvcmFnZVVzYWdlKCk6IHsgdXNlZDogbnVtYmVyOyB0b3RhbDogbnVtYmVyOyBwZXJjZW50YWdlOiBudW1iZXIgfSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBsZXQgdXNlZCA9IDA7XHJcbiAgICAgIGZvciAobGV0IGtleSBpbiBsb2NhbFN0b3JhZ2UpIHtcclxuICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgIHVzZWQgKz0gbG9jYWxTdG9yYWdlW2tleV0ubGVuZ3RoICsga2V5Lmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOWkp+WkmuaVsOa1j+iniOWZqOeahCBsb2NhbFN0b3JhZ2Ug6ZmQ5Yi25pivIDVNQlxyXG4gICAgICBjb25zdCB0b3RhbCA9IDUgKiAxMDI0ICogMTAyNDtcclxuICAgICAgY29uc3QgcGVyY2VudGFnZSA9ICh1c2VkIC8gdG90YWwpICogMTAwO1xyXG5cclxuICAgICAgcmV0dXJuIHsgdXNlZCwgdG90YWwsIHBlcmNlbnRhZ2UgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJldHVybiB7IHVzZWQ6IDAsIHRvdGFsOiAwLCBwZXJjZW50YWdlOiAwIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDpqozor4HnlKjmiLfmlbDmja7moLzlvI9cclxuICAgKi9cclxuICBwcml2YXRlIHZhbGlkYXRlVXNlckRhdGEoZGF0YTogYW55KTogZGF0YSBpcyBVc2VyRGF0YSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICBkYXRhICYmXHJcbiAgICAgIHR5cGVvZiBkYXRhLm5hbWUgPT09ICdzdHJpbmcnICYmXHJcbiAgICAgIHR5cGVvZiBkYXRhLmF2YXRhciA9PT0gJ3N0cmluZycgJiZcclxuICAgICAgdHlwZW9mIGRhdGEuaXNDdXN0b20gPT09ICdib29sZWFuJyAmJlxyXG4gICAgICB0eXBlb2YgZGF0YS5sYXN0VXBkYXRlZCA9PT0gJ251bWJlcidcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlpITnkIbplJnor69cclxuICAgKi9cclxuICBwcml2YXRlIGhhbmRsZUVycm9yKGVycm9ySW5mbzogRXJyb3JJbmZvKTogdm9pZCB7XHJcbiAgICBjb25zb2xlLmVycm9yKGBbU3RvcmFnZU1hbmFnZXJdICR7ZXJyb3JJbmZvLm1lc3NhZ2V9OmAsIGVycm9ySW5mby5kZXRhaWxzKTtcclxuXHJcbiAgICAvLyDlpoLmnpzmnIkgVGF2ZXJuSGVscGVyIOeahOmUmeivr+WkhOeQhu+8jOS9v+eUqOWug1xyXG4gICAgaWYgKHdpbmRvdy5UYXZlcm5IZWxwZXI/LmVycm9yQ2F0Y2hlZCkge1xyXG4gICAgICB3aW5kb3cuVGF2ZXJuSGVscGVyLmVycm9yQ2F0Y2hlZChlcnJvckluZm8pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5a+85Ye65omA5pyJ5pWw5o2u77yI55So5LqO5aSH5Lu977yJXHJcbiAgICovXHJcbiAgcHVibGljIGV4cG9ydERhdGEoKTogeyB1c2VyRGF0YTogVXNlckRhdGEgfCBudWxsOyBzZXR0aW5nczogQXBwU2V0dGluZ3MgfSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB1c2VyRGF0YTogdGhpcy5sb2FkVXNlckRhdGEoKSxcclxuICAgICAgc2V0dGluZ3M6IHRoaXMubG9hZFNldHRpbmdzKCksXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5a+85YWl5pWw5o2u77yI55So5LqO5oGi5aSN77yJXHJcbiAgICovXHJcbiAgcHVibGljIGltcG9ydERhdGEoZGF0YTogeyB1c2VyRGF0YT86IFVzZXJEYXRhOyBzZXR0aW5ncz86IEFwcFNldHRpbmdzIH0pOiB2b2lkIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmIChkYXRhLnVzZXJEYXRhICYmIHRoaXMudmFsaWRhdGVVc2VyRGF0YShkYXRhLnVzZXJEYXRhKSkge1xyXG4gICAgICAgIHRoaXMuc2F2ZVVzZXJEYXRhKGRhdGEudXNlckRhdGEpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZGF0YS5zZXR0aW5ncykge1xyXG4gICAgICAgIHRoaXMuc2F2ZVNldHRpbmdzKGRhdGEuc2V0dGluZ3MpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLmhhbmRsZUVycm9yKHtcclxuICAgICAgICB0eXBlOiBFcnJvclR5cGUuU1RPUkFHRV9FUlJPUixcclxuICAgICAgICBtZXNzYWdlOiAn5a+85YWl5pWw5o2u5aSx6LSlJyxcclxuICAgICAgICBkZXRhaWxzOiBlcnJvcixcclxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgIH0pO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/profile/StorageManager.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/profile/UserInfoSection.ts": 
  /*!**************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/profile/UserInfoSection.ts ***!
  \**************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UserInfoSection: () => (/* binding */ UserInfoSection)\n/* harmony export */ });\n/* harmony import */ var _utils_AvatarSync__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/AvatarSync */ \"./src/多云熊/备份/给rovo的/modules/utils/AvatarSync.ts\");\n/* harmony import */ var _GlobalUserManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GlobalUserManager */ \"./src/多云熊/备份/给rovo的/modules/profile/GlobalUserManager.ts\");\n/* harmony import */ var _ImageProcessor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ImageProcessor */ \"./src/多云熊/备份/给rovo的/modules/profile/ImageProcessor.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types */ \"./src/多云熊/备份/给rovo的/modules/profile/types.ts\");\n/**\n * UserInfoSection - 用户信息组件\n * 负责用户头像和名称的显示与编辑\n */\n\n\n\n\nclass UserInfoSection {\n    globalUserManager;\n    imageProcessor;\n    avatarMixin;\n    state = _types__WEBPACK_IMPORTED_MODULE_3__.ComponentState.IDLE;\n    // DOM 元素\n    avatarElement;\n    avatarImage;\n    avatarOverlay;\n    nameDisplay;\n    nameEdit;\n    nameInput;\n    nameConfirmBtn;\n    nameCancelBtn;\n    avatarFileInput;\n    // 编辑状态\n    originalName = '';\n    originalAvatar = '';\n    pendingAvatar = '';\n    constructor() {\n        this.globalUserManager = _GlobalUserManager__WEBPACK_IMPORTED_MODULE_1__.GlobalUserManager.getInstance();\n        this.imageProcessor = _ImageProcessor__WEBPACK_IMPORTED_MODULE_2__.ImageProcessor.getInstance();\n        this.avatarMixin = new _utils_AvatarSync__WEBPACK_IMPORTED_MODULE_0__.SimpleAvatarMixin({ debug: false });\n        this.initializeElements();\n        this.bindEvents();\n    }\n    /**\n     * 初始化DOM元素\n     */\n    initializeElements() {\n        this.avatarElement = document.getElementById('userAvatar');\n        this.avatarImage = document.getElementById('avatarImage');\n        this.avatarOverlay = this.avatarElement.querySelector('.avatar-overlay');\n        this.nameDisplay = document.getElementById('nameDisplay');\n        this.nameEdit = document.getElementById('nameEdit');\n        this.nameInput = document.getElementById('nameInput');\n        this.nameConfirmBtn = document.getElementById('nameConfirmBtn');\n        this.nameCancelBtn = document.getElementById('nameCancelBtn');\n        this.avatarFileInput = document.getElementById('avatarFileInput');\n        if (!this.avatarElement || !this.avatarImage || !this.nameDisplay) {\n            throw new Error('必需的DOM元素未找到');\n        }\n    }\n    /**\n     * 绑定事件监听器\n     */\n    bindEvents() {\n        // 头像点击事件\n        this.avatarElement.addEventListener('click', () => this.handleAvatarClick());\n        // 头像文件选择事件\n        this.avatarFileInput.addEventListener('change', e => this.handleAvatarFileChange(e));\n        // 名称点击编辑事件\n        this.nameDisplay.addEventListener('click', () => this.startNameEdit());\n        // 名称编辑确认和取消\n        this.nameConfirmBtn.addEventListener('click', () => this.confirmNameEdit());\n        this.nameCancelBtn.addEventListener('click', () => this.cancelNameEdit());\n        // 名称输入回车确认\n        this.nameInput.addEventListener('keydown', e => {\n            if (e.key === 'Enter') {\n                this.confirmNameEdit();\n            }\n            else if (e.key === 'Escape') {\n                this.cancelNameEdit();\n            }\n        });\n        // 监听全局用户信息变更\n        this.globalUserManager.addEventListener('all', event => {\n            this.handleUserInfoChange(event);\n        });\n    }\n    /**\n     * 初始化用户信息显示\n     */\n    async initialize() {\n        try {\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_3__.ComponentState.LOADING);\n            // 暂时移除头像同步，恢复原始功能\n            const userData = await this.globalUserManager.loadUserData();\n            await this.updateDisplay(userData);\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_3__.ComponentState.IDLE);\n        }\n        catch (error) {\n            this.handleError({\n                type: _types__WEBPACK_IMPORTED_MODULE_3__.ErrorType.STORAGE_ERROR,\n                message: '初始化用户信息失败',\n                details: error,\n                timestamp: Date.now(),\n            });\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_3__.ComponentState.ERROR);\n        }\n    }\n    /**\n     * 更新显示内容\n     */\n    async updateDisplay(userData) {\n        // 更新名称显示\n        this.nameDisplay.textContent = userData.name;\n        // 更新头像显示\n        if (userData.avatar) {\n            this.avatarImage.src = userData.avatar;\n            this.avatarImage.style.display = 'block';\n        }\n        else {\n            // 如果没有头像，显示默认头像或占位符\n            this.avatarImage.src =\n                'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEyMCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiBmaWxsPSIjRjVGNUY1Ii8+CjxjaXJjbGUgY3g9IjYwIiBjeT0iNDAiIHI9IjIwIiBmaWxsPSIjQ0NDIi8+CjxwYXRoIGQ9Ik0yMCA5MEM0MCA3MCA4MCA3MCAxMDAgOTBWMTIwSDIwVjkwWiIgZmlsbD0iI0NDQyIvPgo8L3N2Zz4K';\n            this.avatarImage.style.display = 'block';\n        }\n    }\n    /**\n     * 处理头像点击\n     */\n    handleAvatarClick() {\n        if (this.state !== _types__WEBPACK_IMPORTED_MODULE_3__.ComponentState.IDLE) {\n            return;\n        }\n        this.avatarFileInput.click();\n    }\n    /**\n     * 处理头像文件选择\n     */\n    async handleAvatarFileChange(event) {\n        const input = event.target;\n        const file = input.files?.[0];\n        if (!file) {\n            return;\n        }\n        try {\n            // 验证文件\n            const validation = this.imageProcessor.validateImageFile(file);\n            if (!validation.isValid) {\n                toastr.error(validation.error, '文件验证失败');\n                return;\n            }\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_3__.ComponentState.LOADING);\n            // 读取文件并转换为base64\n            const base64 = await this.imageProcessor.fileToBase64(file);\n            // 压缩图片（如果需要）\n            const compressedBase64 = await this.imageProcessor.compressAvatar(base64);\n            // 保存原始头像以便取消时恢复\n            const currentUserData = this.globalUserManager.getCurrentUserData();\n            this.originalAvatar = currentUserData?.avatar || '';\n            this.pendingAvatar = compressedBase64;\n            // 立即更新显示\n            this.avatarImage.src = compressedBase64;\n            // 显示确认/取消按钮\n            this.showAvatarConfirmation();\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_3__.ComponentState.EDITING);\n        }\n        catch (error) {\n            this.handleError({\n                type: _types__WEBPACK_IMPORTED_MODULE_3__.ErrorType.FILE_ERROR,\n                message: '处理头像文件失败',\n                details: error,\n                timestamp: Date.now(),\n            });\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_3__.ComponentState.IDLE);\n        }\n        finally {\n            // 清空文件输入\n            input.value = '';\n        }\n    }\n    /**\n     * 显示头像确认界面\n     */\n    showAvatarConfirmation() {\n        // 创建确认按钮容器\n        const confirmContainer = document.createElement('div');\n        confirmContainer.className = 'avatar-confirm-container';\n        confirmContainer.innerHTML = `\r\n      <div class=\"avatar-confirm-buttons\">\r\n        <button class=\"modal-btn confirm-btn\" id=\"avatarConfirmBtn\">确认</button>\r\n        <button class=\"modal-btn cancel-btn\" id=\"avatarCancelBtn\">取消</button>\r\n      </div>\r\n    `;\n        // 插入到用户信息区域\n        const userInfoSection = this.avatarElement.closest('.user-info-section');\n        userInfoSection.appendChild(confirmContainer);\n        // 绑定确认和取消事件\n        const confirmBtn = confirmContainer.querySelector('#avatarConfirmBtn');\n        const cancelBtn = confirmContainer.querySelector('#avatarCancelBtn');\n        confirmBtn.addEventListener('click', () => this.confirmAvatarChange());\n        cancelBtn.addEventListener('click', () => this.cancelAvatarChange());\n    }\n    /**\n     * 确认头像更改\n     */\n    async confirmAvatarChange() {\n        try {\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_3__.ComponentState.SAVING);\n            await this.globalUserManager.updateUserAvatar(this.pendingAvatar);\n            toastr.success('头像更新成功');\n            // 触发全局头像同步\n            (0,_utils_AvatarSync__WEBPACK_IMPORTED_MODULE_0__.forceUpdateAvatars)(this.pendingAvatar);\n            this.hideAvatarConfirmation();\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_3__.ComponentState.IDLE);\n        }\n        catch (error) {\n            this.handleError({\n                type: _types__WEBPACK_IMPORTED_MODULE_3__.ErrorType.STORAGE_ERROR,\n                message: '保存头像失败',\n                details: error,\n                timestamp: Date.now(),\n            });\n            // 恢复原始头像\n            this.avatarImage.src = this.originalAvatar;\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_3__.ComponentState.IDLE);\n        }\n    }\n    /**\n     * 取消头像更改\n     */\n    cancelAvatarChange() {\n        // 恢复原始头像\n        this.avatarImage.src = this.originalAvatar;\n        this.hideAvatarConfirmation();\n        this.setState(_types__WEBPACK_IMPORTED_MODULE_3__.ComponentState.IDLE);\n    }\n    /**\n     * 隐藏头像确认界面\n     */\n    hideAvatarConfirmation() {\n        const confirmContainer = document.querySelector('.avatar-confirm-container');\n        if (confirmContainer) {\n            confirmContainer.remove();\n        }\n    }\n    /**\n     * 开始名称编辑\n     */\n    startNameEdit() {\n        if (this.state !== _types__WEBPACK_IMPORTED_MODULE_3__.ComponentState.IDLE) {\n            return;\n        }\n        const currentUserData = this.globalUserManager.getCurrentUserData();\n        this.originalName = currentUserData?.name || '';\n        this.nameInput.value = this.originalName;\n        this.nameDisplay.style.display = 'none';\n        this.nameEdit.classList.add('active');\n        this.nameEdit.style.display = 'flex';\n        // 聚焦并选中文本\n        this.nameInput.focus();\n        this.nameInput.select();\n        this.setState(_types__WEBPACK_IMPORTED_MODULE_3__.ComponentState.EDITING);\n    }\n    /**\n     * 确认名称编辑\n     */\n    async confirmNameEdit() {\n        const newName = this.nameInput.value.trim();\n        // 验证名称\n        const validation = this.validateName(newName);\n        if (!validation.isValid) {\n            toastr.error(validation.error, '名称验证失败');\n            return;\n        }\n        try {\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_3__.ComponentState.SAVING);\n            await this.globalUserManager.updateUserName(newName);\n            this.nameDisplay.textContent = newName;\n            this.exitNameEdit();\n            toastr.success('用户名更新成功');\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_3__.ComponentState.IDLE);\n        }\n        catch (error) {\n            this.handleError({\n                type: _types__WEBPACK_IMPORTED_MODULE_3__.ErrorType.STORAGE_ERROR,\n                message: '保存用户名失败',\n                details: error,\n                timestamp: Date.now(),\n            });\n            this.setState(_types__WEBPACK_IMPORTED_MODULE_3__.ComponentState.EDITING);\n        }\n    }\n    /**\n     * 取消名称编辑\n     */\n    cancelNameEdit() {\n        this.exitNameEdit();\n        this.setState(_types__WEBPACK_IMPORTED_MODULE_3__.ComponentState.IDLE);\n    }\n    /**\n     * 退出名称编辑模式\n     */\n    exitNameEdit() {\n        this.nameEdit.classList.remove('active');\n        this.nameEdit.style.display = 'none';\n        this.nameDisplay.style.display = 'inline-block';\n    }\n    /**\n     * 验证用户名\n     */\n    validateName(name) {\n        if (!name) {\n            return { isValid: false, error: '用户名不能为空' };\n        }\n        if (name.length > 50) {\n            return { isValid: false, error: '用户名长度不能超过50个字符' };\n        }\n        // 检查特殊字符\n        const invalidChars = /[<>\\\"'&]/;\n        if (invalidChars.test(name)) {\n            return { isValid: false, error: '用户名包含无效字符' };\n        }\n        return { isValid: true };\n    }\n    /**\n     * 设置组件状态\n     */\n    setState(newState) {\n        this.state = newState;\n        // 更新UI状态\n        this.avatarElement.classList.remove('loading', 'editing', 'error');\n        switch (newState) {\n            case _types__WEBPACK_IMPORTED_MODULE_3__.ComponentState.LOADING:\n                this.avatarElement.classList.add('loading');\n                break;\n            case _types__WEBPACK_IMPORTED_MODULE_3__.ComponentState.EDITING:\n                this.avatarElement.classList.add('editing');\n                break;\n            case _types__WEBPACK_IMPORTED_MODULE_3__.ComponentState.ERROR:\n                this.avatarElement.classList.add('error');\n                break;\n        }\n    }\n    /**\n     * 处理用户信息变更事件\n     */\n    handleUserInfoChange(event) {\n        // 如果是其他组件触发的变更，更新显示\n        if (this.state === _types__WEBPACK_IMPORTED_MODULE_3__.ComponentState.IDLE) {\n            const currentUserData = this.globalUserManager.getCurrentUserData();\n            if (currentUserData) {\n                this.updateDisplay(currentUserData);\n            }\n        }\n    }\n    /**\n     * 处理错误\n     */\n    handleError(errorInfo) {\n        console.error(`[UserInfoSection] ${errorInfo.message}:`, errorInfo.details);\n        toastr.error(errorInfo.message);\n    }\n    /**\n     * 获取当前状态\n     */\n    getState() {\n        return this.state;\n    }\n    /**\n     * 销毁组件\n     */\n    destroy() {\n        // 移除事件监听器\n        this.globalUserManager.removeEventListener('all', this.handleUserInfoChange);\n        // 清理DOM\n        this.hideAvatarConfirmation();\n        if (this.state === _types__WEBPACK_IMPORTED_MODULE_3__.ComponentState.EDITING) {\n            this.exitNameEdit();\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvcHJvZmlsZS9Vc2VySW5mb1NlY3Rpb24udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7O0dBR0c7QUFFeUU7QUFDcEI7QUFDTjtBQUN1QjtBQVNsRSxNQUFNLGVBQWU7SUFDbEIsaUJBQWlCLENBQW9CO0lBQ3JDLGNBQWMsQ0FBaUI7SUFDL0IsV0FBVyxDQUFvQjtJQUMvQixLQUFLLEdBQW1CLGtEQUFjLENBQUMsSUFBSSxDQUFDO0lBRXBELFNBQVM7SUFDRCxhQUFhLENBQWU7SUFDNUIsV0FBVyxDQUFvQjtJQUMvQixhQUFhLENBQWU7SUFDNUIsV0FBVyxDQUFlO0lBQzFCLFFBQVEsQ0FBZTtJQUN2QixTQUFTLENBQW9CO0lBQzdCLGNBQWMsQ0FBcUI7SUFDbkMsYUFBYSxDQUFxQjtJQUNsQyxlQUFlLENBQW9CO0lBRTNDLE9BQU87SUFDQyxZQUFZLEdBQVcsRUFBRSxDQUFDO0lBQzFCLGNBQWMsR0FBVyxFQUFFLENBQUM7SUFDNUIsYUFBYSxHQUFXLEVBQUUsQ0FBQztJQUVuQztRQUNFLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxpRUFBaUIsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUN6RCxJQUFJLENBQUMsY0FBYyxHQUFHLDJEQUFjLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDbkQsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLGdFQUFpQixDQUFDLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7UUFDMUIsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO0lBQ3BCLENBQUM7SUFFRDs7T0FFRztJQUNLLGtCQUFrQjtRQUN4QixJQUFJLENBQUMsYUFBYSxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFFLENBQUM7UUFDNUQsSUFBSSxDQUFDLFdBQVcsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLGFBQWEs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QyxLQUFLLEtBQUssa0RBQWMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUMxQyxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7UUFDdEIsQ0FBQztJQUNILENBQUM7Q0FDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvcHJvZmlsZS9Vc2VySW5mb1NlY3Rpb24udHM/Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBVc2VySW5mb1NlY3Rpb24gLSDnlKjmiLfkv6Hmga/nu4Tku7ZcclxuICog6LSf6LSj55So5oi35aS05YOP5ZKM5ZCN56ew55qE5pi+56S65LiO57yW6L6RXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgZm9yY2VVcGRhdGVBdmF0YXJzLCBTaW1wbGVBdmF0YXJNaXhpbiB9IGZyb20gJy4uL3V0aWxzL0F2YXRhclN5bmMnO1xyXG5pbXBvcnQgeyBHbG9iYWxVc2VyTWFuYWdlciB9IGZyb20gJy4vR2xvYmFsVXNlck1hbmFnZXInO1xyXG5pbXBvcnQgeyBJbWFnZVByb2Nlc3NvciB9IGZyb20gJy4vSW1hZ2VQcm9jZXNzb3InO1xyXG5pbXBvcnQgeyBDb21wb25lbnRTdGF0ZSwgRXJyb3JJbmZvLCBFcnJvclR5cGUsIFVzZXJEYXRhIH0gZnJvbSAnLi90eXBlcyc7XHJcblxyXG5kZWNsYXJlIGNvbnN0IHRvYXN0cjoge1xyXG4gIHN1Y2Nlc3M6IChtZXNzYWdlOiBzdHJpbmcsIHRpdGxlPzogc3RyaW5nKSA9PiB2b2lkO1xyXG4gIGVycm9yOiAobWVzc2FnZTogc3RyaW5nLCB0aXRsZT86IHN0cmluZykgPT4gdm9pZDtcclxuICB3YXJuaW5nOiAobWVzc2FnZTogc3RyaW5nLCB0aXRsZT86IHN0cmluZykgPT4gdm9pZDtcclxuICBpbmZvOiAobWVzc2FnZTogc3RyaW5nLCB0aXRsZT86IHN0cmluZykgPT4gdm9pZDtcclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBVc2VySW5mb1NlY3Rpb24ge1xyXG4gIHByaXZhdGUgZ2xvYmFsVXNlck1hbmFnZXI6IEdsb2JhbFVzZXJNYW5hZ2VyO1xyXG4gIHByaXZhdGUgaW1hZ2VQcm9jZXNzb3I6IEltYWdlUHJvY2Vzc29yO1xyXG4gIHByaXZhdGUgYXZhdGFyTWl4aW46IFNpbXBsZUF2YXRhck1peGluO1xyXG4gIHByaXZhdGUgc3RhdGU6IENvbXBvbmVudFN0YXRlID0gQ29tcG9uZW50U3RhdGUuSURMRTtcclxuXHJcbiAgLy8gRE9NIOWFg+e0oFxyXG4gIHByaXZhdGUgYXZhdGFyRWxlbWVudCE6IEhUTUxFbGVtZW50O1xyXG4gIHByaXZhdGUgYXZhdGFySW1hZ2UhOiBIVE1MSW1hZ2VFbGVtZW50O1xyXG4gIHByaXZhdGUgYXZhdGFyT3ZlcmxheSE6IEhUTUxFbGVtZW50O1xyXG4gIHByaXZhdGUgbmFtZURpc3BsYXkhOiBIVE1MRWxlbWVudDtcclxuICBwcml2YXRlIG5hbWVFZGl0ITogSFRNTEVsZW1lbnQ7XHJcbiAgcHJpdmF0ZSBuYW1lSW5wdXQhOiBIVE1MSW5wdXRFbGVtZW50O1xyXG4gIHByaXZhdGUgbmFtZUNvbmZpcm1CdG4hOiBIVE1MQnV0dG9uRWxlbWVudDtcclxuICBwcml2YXRlIG5hbWVDYW5jZWxCdG4hOiBIVE1MQnV0dG9uRWxlbWVudDtcclxuICBwcml2YXRlIGF2YXRhckZpbGVJbnB1dCE6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG4gIC8vIOe8lui+keeKtuaAgVxyXG4gIHByaXZhdGUgb3JpZ2luYWxOYW1lOiBzdHJpbmcgPSAnJztcclxuICBwcml2YXRlIG9yaWdpbmFsQXZhdGFyOiBzdHJpbmcgPSAnJztcclxuICBwcml2YXRlIHBlbmRpbmdBdmF0YXI6IHN0cmluZyA9ICcnO1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuZ2xvYmFsVXNlck1hbmFnZXIgPSBHbG9iYWxVc2VyTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xyXG4gICAgdGhpcy5pbWFnZVByb2Nlc3NvciA9IEltYWdlUHJvY2Vzc29yLmdldEluc3RhbmNlKCk7XHJcbiAgICB0aGlzLmF2YXRhck1peGluID0gbmV3IFNpbXBsZUF2YXRhck1peGluKHsgZGVidWc6IGZhbHNlIH0pO1xyXG4gICAgdGhpcy5pbml0aWFsaXplRWxlbWVudHMoKTtcclxuICAgIHRoaXMuYmluZEV2ZW50cygpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Yid5aeL5YyWRE9N5YWD57SgXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBpbml0aWFsaXplRWxlbWVudHMoKTogdm9pZCB7XHJcbiAgICB0aGlzLmF2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlckF2YXRhcicpITtcclxuICAgIHRoaXMuYXZhdGFySW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXZhdGFySW1hZ2UnKSBhcyBIVE1MSW1hZ2VFbGVtZW50O1xyXG4gICAgdGhpcy5hdmF0YXJPdmVybGF5ID0gdGhpcy5hdmF0YXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hdmF0YXItb3ZlcmxheScpITtcclxuICAgIHRoaXMubmFtZURpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmFtZURpc3BsYXknKSE7XHJcbiAgICB0aGlzLm5hbWVFZGl0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hbWVFZGl0JykhO1xyXG4gICAgdGhpcy5uYW1lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmFtZUlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgIHRoaXMubmFtZUNvbmZpcm1CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmFtZUNvbmZpcm1CdG4nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgIHRoaXMubmFtZUNhbmNlbEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYW1lQ2FuY2VsQnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICB0aGlzLmF2YXRhckZpbGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdmF0YXJGaWxlSW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuICAgIGlmICghdGhpcy5hdmF0YXJFbGVtZW50IHx8ICF0aGlzLmF2YXRhckltYWdlIHx8ICF0aGlzLm5hbWVEaXNwbGF5KSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcign5b+F6ZyA55qERE9N5YWD57Sg5pyq5om+5YiwJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDnu5Hlrprkuovku7bnm5HlkKzlmahcclxuICAgKi9cclxuICBwcml2YXRlIGJpbmRFdmVudHMoKTogdm9pZCB7XHJcbiAgICAvLyDlpLTlg4/ngrnlh7vkuovku7ZcclxuICAgIHRoaXMuYXZhdGFyRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGFuZGxlQXZhdGFyQ2xpY2soKSk7XHJcblxyXG4gICAgLy8g5aS05YOP5paH5Lu26YCJ5oup5LqL5Lu2XHJcbiAgICB0aGlzLmF2YXRhckZpbGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBlID0+IHRoaXMuaGFuZGxlQXZhdGFyRmlsZUNoYW5nZShlKSk7XHJcblxyXG4gICAgLy8g5ZCN56ew54K55Ye757yW6L6R5LqL5Lu2XHJcbiAgICB0aGlzLm5hbWVEaXNwbGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5zdGFydE5hbWVFZGl0KCkpO1xyXG5cclxuICAgIC8vIOWQjeensOe8lui+keehruiupOWSjOWPlua2iFxyXG4gICAgdGhpcy5uYW1lQ29uZmlybUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY29uZmlybU5hbWVFZGl0KCkpO1xyXG4gICAgdGhpcy5uYW1lQ2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jYW5jZWxOYW1lRWRpdCgpKTtcclxuXHJcbiAgICAvLyDlkI3np7DovpPlhaXlm57ovabnoa7orqRcclxuICAgIHRoaXMubmFtZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBlID0+IHtcclxuICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XHJcbiAgICAgICAgdGhpcy5jb25maXJtTmFtZUVkaXQoKTtcclxuICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgICB0aGlzLmNhbmNlbE5hbWVFZGl0KCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIOebkeWQrOWFqOWxgOeUqOaIt+S/oeaBr+WPmOabtFxyXG4gICAgdGhpcy5nbG9iYWxVc2VyTWFuYWdlci5hZGRFdmVudExpc3RlbmVyKCdhbGwnLCBldmVudCA9PiB7XHJcbiAgICAgIHRoaXMuaGFuZGxlVXNlckluZm9DaGFuZ2UoZXZlbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliJ3lp4vljJbnlKjmiLfkv6Hmga/mmL7npLpcclxuICAgKi9cclxuICBwdWJsaWMgYXN5bmMgaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoQ29tcG9uZW50U3RhdGUuTE9BRElORyk7XHJcblxyXG4gICAgICAvLyDmmoLml7bnp7vpmaTlpLTlg4/lkIzmraXvvIzmgaLlpI3ljp/lp4vlip/og71cclxuXHJcbiAgICAgIGNvbnN0IHVzZXJEYXRhID0gYXdhaXQgdGhpcy5nbG9iYWxVc2VyTWFuYWdlci5sb2FkVXNlckRhdGEoKTtcclxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVEaXNwbGF5KHVzZXJEYXRhKTtcclxuICAgICAgdGhpcy5zZXRTdGF0ZShDb21wb25lbnRTdGF0ZS5JRExFKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRoaXMuaGFuZGxlRXJyb3Ioe1xyXG4gICAgICAgIHR5cGU6IEVycm9yVHlwZS5TVE9SQUdFX0VSUk9SLFxyXG4gICAgICAgIG1lc3NhZ2U6ICfliJ3lp4vljJbnlKjmiLfkv6Hmga/lpLHotKUnLFxyXG4gICAgICAgIGRldGFpbHM6IGVycm9yLFxyXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoQ29tcG9uZW50U3RhdGUuRVJST1IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5pu05paw5pi+56S65YaF5a65XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyB1cGRhdGVEaXNwbGF5KHVzZXJEYXRhOiBVc2VyRGF0YSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgLy8g5pu05paw5ZCN56ew5pi+56S6XHJcbiAgICB0aGlzLm5hbWVEaXNwbGF5LnRleHRDb250ZW50ID0gdXNlckRhdGEubmFtZTtcclxuXHJcbiAgICAvLyDmm7TmlrDlpLTlg4/mmL7npLpcclxuICAgIGlmICh1c2VyRGF0YS5hdmF0YXIpIHtcclxuICAgICAgdGhpcy5hdmF0YXJJbWFnZS5zcmMgPSB1c2VyRGF0YS5hdmF0YXI7XHJcbiAgICAgIHRoaXMuYXZhdGFySW1hZ2Uuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyDlpoLmnpzmsqHmnInlpLTlg4/vvIzmmL7npLrpu5jorqTlpLTlg4/miJbljaDkvY3nrKZcclxuICAgICAgdGhpcy5hdmF0YXJJbWFnZS5zcmMgPVxyXG4gICAgICAgICdkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIzYVdSMGFEMGlNVEl3SWlCb1pXbG5hSFE5SWpFeU1DSWdkbWxsZDBKdmVEMGlNQ0F3SURFeU1DQXhNakFpSUdacGJHdzlJbTV2Ym1VaUlIaHRiRzV6UFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eU1EQXdMM04yWnlJK0NqeHlaV04wSUhkcFpIUm9QU0l4TWpBaUlHaGxhV2RvZEQwaU1USXdJaUJtYVd4c1BTSWpSalZHTlVZMUlpOCtDanhqYVhKamJHVWdZM2c5SWpZd0lpQmplVDBpTkRBaUlISTlJakl3SWlCbWFXeHNQU0lqUTBORElpOCtDanh3WVhSb0lHUTlJazB5TUNBNU1FTTBNQ0EzTUNBNE1DQTNNQ0F4TURBZ09UQldNVEl3U0RJd1Zqa3dXaUlnWm1sc2JEMGlJME5EUXlJdlBnbzhMM04yWno0Syc7XHJcbiAgICAgIHRoaXMuYXZhdGFySW1hZ2Uuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlpITnkIblpLTlg4/ngrnlh7tcclxuICAgKi9cclxuICBwcml2YXRlIGhhbmRsZUF2YXRhckNsaWNrKCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuc3RhdGUgIT09IENvbXBvbmVudFN0YXRlLklETEUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYXZhdGFyRmlsZUlucHV0LmNsaWNrKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlpITnkIblpLTlg4/mlofku7bpgInmi6lcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIGhhbmRsZUF2YXRhckZpbGVDaGFuZ2UoZXZlbnQ6IEV2ZW50KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCBpbnB1dCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgY29uc3QgZmlsZSA9IGlucHV0LmZpbGVzPy5bMF07XHJcblxyXG4gICAgaWYgKCFmaWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDpqozor4Hmlofku7ZcclxuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IHRoaXMuaW1hZ2VQcm9jZXNzb3IudmFsaWRhdGVJbWFnZUZpbGUoZmlsZSk7XHJcbiAgICAgIGlmICghdmFsaWRhdGlvbi5pc1ZhbGlkKSB7XHJcbiAgICAgICAgdG9hc3RyLmVycm9yKHZhbGlkYXRpb24uZXJyb3IhLCAn5paH5Lu26aqM6K+B5aSx6LSlJyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnNldFN0YXRlKENvbXBvbmVudFN0YXRlLkxPQURJTkcpO1xyXG5cclxuICAgICAgLy8g6K+75Y+W5paH5Lu25bm26L2s5o2i5Li6YmFzZTY0XHJcbiAgICAgIGNvbnN0IGJhc2U2NCA9IGF3YWl0IHRoaXMuaW1hZ2VQcm9jZXNzb3IuZmlsZVRvQmFzZTY0KGZpbGUpO1xyXG5cclxuICAgICAgLy8g5Y6L57yp5Zu+54mH77yI5aaC5p6c6ZyA6KaB77yJXHJcbiAgICAgIGNvbnN0IGNvbXByZXNzZWRCYXNlNjQgPSBhd2FpdCB0aGlzLmltYWdlUHJvY2Vzc29yLmNvbXByZXNzQXZhdGFyKGJhc2U2NCk7XHJcblxyXG4gICAgICAvLyDkv53lrZjljp/lp4vlpLTlg4/ku6Xkvr/lj5bmtojml7bmgaLlpI1cclxuICAgICAgY29uc3QgY3VycmVudFVzZXJEYXRhID0gdGhpcy5nbG9iYWxVc2VyTWFuYWdlci5nZXRDdXJyZW50VXNlckRhdGEoKTtcclxuICAgICAgdGhpcy5vcmlnaW5hbEF2YXRhciA9IGN1cnJlbnRVc2VyRGF0YT8uYXZhdGFyIHx8ICcnO1xyXG4gICAgICB0aGlzLnBlbmRpbmdBdmF0YXIgPSBjb21wcmVzc2VkQmFzZTY0O1xyXG5cclxuICAgICAgLy8g56uL5Y2z5pu05paw5pi+56S6XHJcbiAgICAgIHRoaXMuYXZhdGFySW1hZ2Uuc3JjID0gY29tcHJlc3NlZEJhc2U2NDtcclxuXHJcbiAgICAgIC8vIOaYvuekuuehruiupC/lj5bmtojmjInpkq5cclxuICAgICAgdGhpcy5zaG93QXZhdGFyQ29uZmlybWF0aW9uKCk7XHJcblxyXG4gICAgICB0aGlzLnNldFN0YXRlKENvbXBvbmVudFN0YXRlLkVESVRJTkcpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XHJcbiAgICAgICAgdHlwZTogRXJyb3JUeXBlLkZJTEVfRVJST1IsXHJcbiAgICAgICAgbWVzc2FnZTogJ+WkhOeQhuWktOWDj+aWh+S7tuWksei0pScsXHJcbiAgICAgICAgZGV0YWlsczogZXJyb3IsXHJcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5zZXRTdGF0ZShDb21wb25lbnRTdGF0ZS5JRExFKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIC8vIOa4heepuuaWh+S7tui+k+WFpVxyXG4gICAgICBpbnB1dC52YWx1ZSA9ICcnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5pi+56S65aS05YOP56Gu6K6k55WM6Z2iXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzaG93QXZhdGFyQ29uZmlybWF0aW9uKCk6IHZvaWQge1xyXG4gICAgLy8g5Yib5bu656Gu6K6k5oyJ6ZKu5a655ZmoXHJcbiAgICBjb25zdCBjb25maXJtQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBjb25maXJtQ29udGFpbmVyLmNsYXNzTmFtZSA9ICdhdmF0YXItY29uZmlybS1jb250YWluZXInO1xyXG4gICAgY29uZmlybUNvbnRhaW5lci5pbm5lckhUTUwgPSBgXHJcbiAgICAgIDxkaXYgY2xhc3M9XCJhdmF0YXItY29uZmlybS1idXR0b25zXCI+XHJcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm1vZGFsLWJ0biBjb25maXJtLWJ0blwiIGlkPVwiYXZhdGFyQ29uZmlybUJ0blwiPuehruiupDwvYnV0dG9uPlxyXG4gICAgICAgIDxidXR0b24gY2xhc3M9XCJtb2RhbC1idG4gY2FuY2VsLWJ0blwiIGlkPVwiYXZhdGFyQ2FuY2VsQnRuXCI+5Y+W5raIPC9idXR0b24+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgYDtcclxuXHJcbiAgICAvLyDmj5LlhaXliLDnlKjmiLfkv6Hmga/ljLrln59cclxuICAgIGNvbnN0IHVzZXJJbmZvU2VjdGlvbiA9IHRoaXMuYXZhdGFyRWxlbWVudC5jbG9zZXN0KCcudXNlci1pbmZvLXNlY3Rpb24nKSE7XHJcbiAgICB1c2VySW5mb1NlY3Rpb24uYXBwZW5kQ2hpbGQoY29uZmlybUNvbnRhaW5lcik7XHJcblxyXG4gICAgLy8g57uR5a6a56Gu6K6k5ZKM5Y+W5raI5LqL5Lu2XHJcbiAgICBjb25zdCBjb25maXJtQnRuID0gY29uZmlybUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjYXZhdGFyQ29uZmlybUJ0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgY29uc3QgY2FuY2VsQnRuID0gY29uZmlybUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjYXZhdGFyQ2FuY2VsQnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblxyXG4gICAgY29uZmlybUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY29uZmlybUF2YXRhckNoYW5nZSgpKTtcclxuICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2FuY2VsQXZhdGFyQ2hhbmdlKCkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog56Gu6K6k5aS05YOP5pu05pS5XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBjb25maXJtQXZhdGFyQ2hhbmdlKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZShDb21wb25lbnRTdGF0ZS5TQVZJTkcpO1xyXG5cclxuICAgICAgYXdhaXQgdGhpcy5nbG9iYWxVc2VyTWFuYWdlci51cGRhdGVVc2VyQXZhdGFyKHRoaXMucGVuZGluZ0F2YXRhcik7XHJcblxyXG4gICAgICB0b2FzdHIuc3VjY2Vzcygn5aS05YOP5pu05paw5oiQ5YqfJyk7XHJcblxyXG4gICAgICAvLyDop6blj5HlhajlsYDlpLTlg4/lkIzmraVcclxuICAgICAgZm9yY2VVcGRhdGVBdmF0YXJzKHRoaXMucGVuZGluZ0F2YXRhcik7XHJcblxyXG4gICAgICB0aGlzLmhpZGVBdmF0YXJDb25maXJtYXRpb24oKTtcclxuICAgICAgdGhpcy5zZXRTdGF0ZShDb21wb25lbnRTdGF0ZS5JRExFKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRoaXMuaGFuZGxlRXJyb3Ioe1xyXG4gICAgICAgIHR5cGU6IEVycm9yVHlwZS5TVE9SQUdFX0VSUk9SLFxyXG4gICAgICAgIG1lc3NhZ2U6ICfkv53lrZjlpLTlg4/lpLHotKUnLFxyXG4gICAgICAgIGRldGFpbHM6IGVycm9yLFxyXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyDmgaLlpI3ljp/lp4vlpLTlg49cclxuICAgICAgdGhpcy5hdmF0YXJJbWFnZS5zcmMgPSB0aGlzLm9yaWdpbmFsQXZhdGFyO1xyXG4gICAgICB0aGlzLnNldFN0YXRlKENvbXBvbmVudFN0YXRlLklETEUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Y+W5raI5aS05YOP5pu05pS5XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBjYW5jZWxBdmF0YXJDaGFuZ2UoKTogdm9pZCB7XHJcbiAgICAvLyDmgaLlpI3ljp/lp4vlpLTlg49cclxuICAgIHRoaXMuYXZhdGFySW1hZ2Uuc3JjID0gdGhpcy5vcmlnaW5hbEF2YXRhcjtcclxuICAgIHRoaXMuaGlkZUF2YXRhckNvbmZpcm1hdGlvbigpO1xyXG4gICAgdGhpcy5zZXRTdGF0ZShDb21wb25lbnRTdGF0ZS5JRExFKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmakOiXj+WktOWDj+ehruiupOeVjOmdolxyXG4gICAqL1xyXG4gIHByaXZhdGUgaGlkZUF2YXRhckNvbmZpcm1hdGlvbigpOiB2b2lkIHtcclxuICAgIGNvbnN0IGNvbmZpcm1Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXZhdGFyLWNvbmZpcm0tY29udGFpbmVyJyk7XHJcbiAgICBpZiAoY29uZmlybUNvbnRhaW5lcikge1xyXG4gICAgICBjb25maXJtQ29udGFpbmVyLnJlbW92ZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5byA5aeL5ZCN56ew57yW6L6RXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGFydE5hbWVFZGl0KCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuc3RhdGUgIT09IENvbXBvbmVudFN0YXRlLklETEUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGN1cnJlbnRVc2VyRGF0YSA9IHRoaXMuZ2xvYmFsVXNlck1hbmFnZXIuZ2V0Q3VycmVudFVzZXJEYXRhKCk7XHJcbiAgICB0aGlzLm9yaWdpbmFsTmFtZSA9IGN1cnJlbnRVc2VyRGF0YT8ubmFtZSB8fCAnJztcclxuXHJcbiAgICB0aGlzLm5hbWVJbnB1dC52YWx1ZSA9IHRoaXMub3JpZ2luYWxOYW1lO1xyXG4gICAgdGhpcy5uYW1lRGlzcGxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgdGhpcy5uYW1lRWRpdC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgIHRoaXMubmFtZUVkaXQuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuXHJcbiAgICAvLyDogZrnhKblubbpgInkuK3mlofmnKxcclxuICAgIHRoaXMubmFtZUlucHV0LmZvY3VzKCk7XHJcbiAgICB0aGlzLm5hbWVJbnB1dC5zZWxlY3QoKTtcclxuXHJcbiAgICB0aGlzLnNldFN0YXRlKENvbXBvbmVudFN0YXRlLkVESVRJTkcpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog56Gu6K6k5ZCN56ew57yW6L6RXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBjb25maXJtTmFtZUVkaXQoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCBuZXdOYW1lID0gdGhpcy5uYW1lSW5wdXQudmFsdWUudHJpbSgpO1xyXG5cclxuICAgIC8vIOmqjOivgeWQjeensFxyXG4gICAgY29uc3QgdmFsaWRhdGlvbiA9IHRoaXMudmFsaWRhdGVOYW1lKG5ld05hbWUpO1xyXG4gICAgaWYgKCF2YWxpZGF0aW9uLmlzVmFsaWQpIHtcclxuICAgICAgdG9hc3RyLmVycm9yKHZhbGlkYXRpb24uZXJyb3IhLCAn5ZCN56ew6aqM6K+B5aSx6LSlJyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICB0aGlzLnNldFN0YXRlKENvbXBvbmVudFN0YXRlLlNBVklORyk7XHJcblxyXG4gICAgICBhd2FpdCB0aGlzLmdsb2JhbFVzZXJNYW5hZ2VyLnVwZGF0ZVVzZXJOYW1lKG5ld05hbWUpO1xyXG5cclxuICAgICAgdGhpcy5uYW1lRGlzcGxheS50ZXh0Q29udGVudCA9IG5ld05hbWU7XHJcbiAgICAgIHRoaXMuZXhpdE5hbWVFZGl0KCk7XHJcblxyXG4gICAgICB0b2FzdHIuc3VjY2Vzcygn55So5oi35ZCN5pu05paw5oiQ5YqfJyk7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoQ29tcG9uZW50U3RhdGUuSURMRSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLmhhbmRsZUVycm9yKHtcclxuICAgICAgICB0eXBlOiBFcnJvclR5cGUuU1RPUkFHRV9FUlJPUixcclxuICAgICAgICBtZXNzYWdlOiAn5L+d5a2Y55So5oi35ZCN5aSx6LSlJyxcclxuICAgICAgICBkZXRhaWxzOiBlcnJvcixcclxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLnNldFN0YXRlKENvbXBvbmVudFN0YXRlLkVESVRJTkcpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Y+W5raI5ZCN56ew57yW6L6RXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBjYW5jZWxOYW1lRWRpdCgpOiB2b2lkIHtcclxuICAgIHRoaXMuZXhpdE5hbWVFZGl0KCk7XHJcbiAgICB0aGlzLnNldFN0YXRlKENvbXBvbmVudFN0YXRlLklETEUpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6YCA5Ye65ZCN56ew57yW6L6R5qih5byPXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBleGl0TmFtZUVkaXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLm5hbWVFZGl0LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgdGhpcy5uYW1lRWRpdC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgdGhpcy5uYW1lRGlzcGxheS5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDpqozor4HnlKjmiLflkI1cclxuICAgKi9cclxuICBwcml2YXRlIHZhbGlkYXRlTmFtZShuYW1lOiBzdHJpbmcpOiB7IGlzVmFsaWQ6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH0ge1xyXG4gICAgaWYgKCFuYW1lKSB7XHJcbiAgICAgIHJldHVybiB7IGlzVmFsaWQ6IGZhbHNlLCBlcnJvcjogJ+eUqOaIt+WQjeS4jeiDveS4uuepuicgfTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobmFtZS5sZW5ndGggPiA1MCkge1xyXG4gICAgICByZXR1cm4geyBpc1ZhbGlkOiBmYWxzZSwgZXJyb3I6ICfnlKjmiLflkI3plb/luqbkuI3og73otoXov4c1MOS4quWtl+espicgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDmo4Dmn6XnibnmrorlrZfnrKZcclxuICAgIGNvbnN0IGludmFsaWRDaGFycyA9IC9bPD5cXFwiJyZdLztcclxuICAgIGlmIChpbnZhbGlkQ2hhcnMudGVzdChuYW1lKSkge1xyXG4gICAgICByZXR1cm4geyBpc1ZhbGlkOiBmYWxzZSwgZXJyb3I6ICfnlKjmiLflkI3ljIXlkKvml6DmlYjlrZfnrKYnIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgaXNWYWxpZDogdHJ1ZSB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6K6+572u57uE5Lu254q25oCBXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzZXRTdGF0ZShuZXdTdGF0ZTogQ29tcG9uZW50U3RhdGUpOiB2b2lkIHtcclxuICAgIHRoaXMuc3RhdGUgPSBuZXdTdGF0ZTtcclxuXHJcbiAgICAvLyDmm7TmlrBVSeeKtuaAgVxyXG4gICAgdGhpcy5hdmF0YXJFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2xvYWRpbmcnLCAnZWRpdGluZycsICdlcnJvcicpO1xyXG5cclxuICAgIHN3aXRjaCAobmV3U3RhdGUpIHtcclxuICAgICAgY2FzZSBDb21wb25lbnRTdGF0ZS5MT0FESU5HOlxyXG4gICAgICAgIHRoaXMuYXZhdGFyRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdsb2FkaW5nJyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgQ29tcG9uZW50U3RhdGUuRURJVElORzpcclxuICAgICAgICB0aGlzLmF2YXRhckVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZWRpdGluZycpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIENvbXBvbmVudFN0YXRlLkVSUk9SOlxyXG4gICAgICAgIHRoaXMuYXZhdGFyRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlcnJvcicpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5aSE55CG55So5oi35L+h5oGv5Y+Y5pu05LqL5Lu2XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBoYW5kbGVVc2VySW5mb0NoYW5nZShldmVudDogYW55KTogdm9pZCB7XHJcbiAgICAvLyDlpoLmnpzmmK/lhbbku5bnu4Tku7bop6blj5HnmoTlj5jmm7TvvIzmm7TmlrDmmL7npLpcclxuICAgIGlmICh0aGlzLnN0YXRlID09PSBDb21wb25lbnRTdGF0ZS5JRExFKSB7XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VyRGF0YSA9IHRoaXMuZ2xvYmFsVXNlck1hbmFnZXIuZ2V0Q3VycmVudFVzZXJEYXRhKCk7XHJcbiAgICAgIGlmIChjdXJyZW50VXNlckRhdGEpIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZURpc3BsYXkoY3VycmVudFVzZXJEYXRhKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5aSE55CG6ZSZ6K+vXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBoYW5kbGVFcnJvcihlcnJvckluZm86IEVycm9ySW5mbyk6IHZvaWQge1xyXG4gICAgY29uc29sZS5lcnJvcihgW1VzZXJJbmZvU2VjdGlvbl0gJHtlcnJvckluZm8ubWVzc2FnZX06YCwgZXJyb3JJbmZvLmRldGFpbHMpO1xyXG4gICAgdG9hc3RyLmVycm9yKGVycm9ySW5mby5tZXNzYWdlKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluW9k+WJjeeKtuaAgVxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRTdGF0ZSgpOiBDb21wb25lbnRTdGF0ZSB7XHJcbiAgICByZXR1cm4gdGhpcy5zdGF0ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmUgOavgee7hOS7tlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xyXG4gICAgLy8g56e76Zmk5LqL5Lu255uR5ZCs5ZmoXHJcbiAgICB0aGlzLmdsb2JhbFVzZXJNYW5hZ2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2FsbCcsIHRoaXMuaGFuZGxlVXNlckluZm9DaGFuZ2UpO1xyXG5cclxuICAgIC8vIOa4heeQhkRPTVxyXG4gICAgdGhpcy5oaWRlQXZhdGFyQ29uZmlybWF0aW9uKCk7XHJcbiAgICBpZiAodGhpcy5zdGF0ZSA9PT0gQ29tcG9uZW50U3RhdGUuRURJVElORykge1xyXG4gICAgICB0aGlzLmV4aXROYW1lRWRpdCgpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/profile/UserInfoSection.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/profile/index.ts": 
  /*!****************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/profile/index.ts ***!
  \****************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ComponentState: () => (/* reexport safe */ _types__WEBPACK_IMPORTED_MODULE_1__.ComponentState),\n/* harmony export */   DEFAULT_SETTINGS: () => (/* reexport safe */ _types__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_SETTINGS),\n/* harmony export */   DEFAULT_UPLOAD_CONFIG: () => (/* reexport safe */ _types__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_UPLOAD_CONFIG),\n/* harmony export */   ErrorType: () => (/* reexport safe */ _types__WEBPACK_IMPORTED_MODULE_1__.ErrorType),\n/* harmony export */   GlobalUserManager: () => (/* reexport safe */ _GlobalUserManager__WEBPACK_IMPORTED_MODULE_2__.GlobalUserManager),\n/* harmony export */   ImageProcessor: () => (/* reexport safe */ _ImageProcessor__WEBPACK_IMPORTED_MODULE_3__.ImageProcessor),\n/* harmony export */   ProfileInterface: () => (/* reexport safe */ _ProfileInterface__WEBPACK_IMPORTED_MODULE_7__.ProfileInterface),\n/* harmony export */   STORAGE_KEYS: () => (/* reexport safe */ _types__WEBPACK_IMPORTED_MODULE_1__.STORAGE_KEYS),\n/* harmony export */   SettingsModal: () => (/* reexport safe */ _SettingsModal__WEBPACK_IMPORTED_MODULE_4__.SettingsModal),\n/* harmony export */   StorageManager: () => (/* reexport safe */ _StorageManager__WEBPACK_IMPORTED_MODULE_5__.StorageManager),\n/* harmony export */   UserInfoSection: () => (/* reexport safe */ _UserInfoSection__WEBPACK_IMPORTED_MODULE_6__.UserInfoSection),\n/* harmony export */   destroyProfileModule: () => (/* binding */ destroyProfileModule),\n/* harmony export */   getProfileInterface: () => (/* binding */ getProfileInterface),\n/* harmony export */   initializeProfileModule: () => (/* binding */ initializeProfileModule)\n/* harmony export */ });\n/* harmony import */ var _profile_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./profile.scss */ \"./src/多云熊/备份/给rovo的/modules/profile/profile.scss\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./types */ \"./src/多云熊/备份/给rovo的/modules/profile/types.ts\");\n/* harmony import */ var _GlobalUserManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./GlobalUserManager */ \"./src/多云熊/备份/给rovo的/modules/profile/GlobalUserManager.ts\");\n/* harmony import */ var _ImageProcessor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ImageProcessor */ \"./src/多云熊/备份/给rovo的/modules/profile/ImageProcessor.ts\");\n/* harmony import */ var _SettingsModal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SettingsModal */ \"./src/多云熊/备份/给rovo的/modules/profile/SettingsModal.ts\");\n/* harmony import */ var _StorageManager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./StorageManager */ \"./src/多云熊/备份/给rovo的/modules/profile/StorageManager.ts\");\n/* harmony import */ var _UserInfoSection__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./UserInfoSection */ \"./src/多云熊/备份/给rovo的/modules/profile/UserInfoSection.ts\");\n/* harmony import */ var _ProfileInterface__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ProfileInterface */ \"./src/多云熊/备份/给rovo的/modules/profile/ProfileInterface.ts\");\n/**\n * Profile Module Entry Point\n * 我的页面模块入口文件\n */\n// 导入样式\n\n// 导入类型定义\n\n// 导入核心组件\n\n\n\n\n\n// 导入用于内部使用的类\n\n// 同时导出供外部使用\n\n// 模块初始化函数\nlet profileInterface = null;\n/**\n * 初始化我的页面模块\n */\nasync function initializeProfileModule() {\n    if (profileInterface) {\n        return profileInterface;\n    }\n    try {\n        console.log('[Profile Module] 开始初始化...');\n        // 检查必需的DOM元素是否存在\n        const requiredElements = ['profileInterface', 'settingsButton', 'extensionSettingsButton'];\n        for (const elementId of requiredElements) {\n            const element = document.getElementById(elementId);\n            if (!element) {\n                throw new Error(`必需的DOM元素未找到: ${elementId}`);\n            }\n            console.log(`[Profile Module] ✅ 找到元素: ${elementId}`);\n        }\n        profileInterface = new _ProfileInterface__WEBPACK_IMPORTED_MODULE_7__.ProfileInterface();\n        await profileInterface.initialize();\n        console.log('[Profile Module] 初始化成功');\n        return profileInterface;\n    }\n    catch (error) {\n        console.error('[Profile Module] 初始化失败:', error);\n        console.error('[Profile Module] 错误详情:', error.message, error.stack);\n        throw error;\n    }\n}\n/**\n * 获取我的页面实例\n */\nfunction getProfileInterface() {\n    return profileInterface;\n}\n/**\n * 销毁我的页面模块\n */\nfunction destroyProfileModule() {\n    if (profileInterface) {\n        profileInterface.destroy();\n        profileInterface = null;\n        console.log('[Profile Module] 已销毁');\n    }\n}\n// 在加载脚本时自动初始化\n$(() => {\n    initializeProfileModule().catch(error => {\n        console.error('[Profile Module] 自动初始化失败:', error);\n    });\n});\n// 在卸载脚本时自动销毁\n$(window).on('unload', () => {\n    destroyProfileModule();\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvcHJvZmlsZS9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7OztHQUdHO0FBRUgsT0FBTztBQUNpQjtBQUV4QixTQUFTO0FBQ2U7QUFFeEIsU0FBUztBQUMrQztBQUNOO0FBQ0Y7QUFDRTtBQUNFO0FBRXBELGFBQWE7QUFDeUM7QUFFdEQsWUFBWTtBQUNnQjtBQUU1QixVQUFVO0FBQ1YsSUFBSSxnQkFBZ0IsR0FBNEIsSUFBSSxDQUFDO0FBRXJEOztHQUVHO0FBQ0ksS0FBSyxVQUFVLHVCQUF1QjtJQUMzQyxJQUFJLGdCQUFnQixFQUFFLENBQUM7UUFDckIsT0FBTyxnQkFBZ0IsQ0FBQztJQUMxQixDQUFDO0lBRUQsSUFBSSxDQUFDO1FBQ0gsT0FBTyxDQUFDLEdBQUcsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO1FBRXpDLGlCQUFpQjtRQUNqQixNQUFNLGdCQUFnQixHQUFHLENBQUMsa0JBQWtCLEVBQUUsZ0JBQWdCLEVBQUUseUJBQXlCLENBQUMsQ0FBQztRQUUzRixLQUFLLE1BQU0sU0FBUyxJQUFJLGdCQUFnQixFQUFFLENBQUM7WUFDekMsTUFBTSxPQUFPLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUNuRCxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7Z0JBQ2IsTUFBTSxJQUFJLEtBQUssQ0FBQyxnQkFBZ0IsU0FBUyxFQUFFLENBQUMsQ0FBQztZQUMvQyxDQUFDO1lBQ0QsT0FBTyxDQUFDLEdBQUcsQ0FBQyw0QkFBNEIsU0FBUyxFQUFFLENBQUMsQ0FBQztRQUN2RCxDQUFDO1FBRUQsZ0JBQWdCLEdBQUcsSUFBSSwrREFBZ0IsRUFBRSxDQUFDO1FBQzFDLE1BQU0sZ0JBQWdCLENBQUMsVUFBVSxFQUFFLENBQUM7UUFFcEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO1FBQ3RDLE9BQU8sZ0JBQWdCLENBQUM7SUFDMUIsQ0FBQztJQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7UUFDZixPQUFPLENBQUMsS0FBSyxDQUFDLHlCQUF5QixFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ2hELE9BQU8sQ0FBQyxLQUFLLENBQUMsd0JBQXdCLEVBQUUsS0FBSyxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDcEUsTUFBTSxLQUFLLENBQUM7SUFDZCxDQUFDO0FBQ0gsQ0FBQztBQUVEOztHQUVHO0FBQ0ksU0FBUyxtQkFBbUI7SUFDakMsT0FBTyxnQkFBZ0IsQ0FBQztBQUMxQixDQUFDO0FBRUQ7O0dBRUc7QUFDSSxTQUFTLG9CQUFvQjtJQUNsQyxJQUFJLGdCQUFnQixFQUFFLENBQUM7UUFDckIsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDM0IsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDO1FBQ3hCLE9BQU8sQ0FBQyxHQUFHLENBQUMsc0JBQXNCLENBQUMsQ0FBQztJQUN0QyxDQUFDO0FBQ0gsQ0FBQztBQUVELGNBQWM7QUFDZCxDQUFDLENBQUMsR0FBRyxFQUFFO0lBQ0wsdUJBQXVCLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUU7UUFDdEMsT0FBTyxDQUFDLEtBQUssQ0FBQywyQkFBMkIsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUNwRCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDO0FBRUgsYUFBYTtBQUNiLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLEdBQUcsRUFBRTtJQUMxQixvQkFBb0IsRUFBRSxDQUFDO0FBQ3pCLENBQUMsQ0FBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy9wcm9maWxlL2luZGV4LnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogUHJvZmlsZSBNb2R1bGUgRW50cnkgUG9pbnRcclxuICog5oiR55qE6aG16Z2i5qih5Z2X5YWl5Y+j5paH5Lu2XHJcbiAqL1xyXG5cclxuLy8g5a+85YWl5qC35byPXHJcbmltcG9ydCAnLi9wcm9maWxlLnNjc3MnO1xyXG5cclxuLy8g5a+85YWl57G75Z6L5a6a5LmJXHJcbmV4cG9ydCAqIGZyb20gJy4vdHlwZXMnO1xyXG5cclxuLy8g5a+85YWl5qC45b+D57uE5Lu2XHJcbmV4cG9ydCB7IEdsb2JhbFVzZXJNYW5hZ2VyIH0gZnJvbSAnLi9HbG9iYWxVc2VyTWFuYWdlcic7XHJcbmV4cG9ydCB7IEltYWdlUHJvY2Vzc29yIH0gZnJvbSAnLi9JbWFnZVByb2Nlc3Nvcic7XHJcbmV4cG9ydCB7IFNldHRpbmdzTW9kYWwgfSBmcm9tICcuL1NldHRpbmdzTW9kYWwnO1xyXG5leHBvcnQgeyBTdG9yYWdlTWFuYWdlciB9IGZyb20gJy4vU3RvcmFnZU1hbmFnZXInO1xyXG5leHBvcnQgeyBVc2VySW5mb1NlY3Rpb24gfSBmcm9tICcuL1VzZXJJbmZvU2VjdGlvbic7XHJcblxyXG4vLyDlr7zlhaXnlKjkuo7lhoXpg6jkvb/nlKjnmoTnsbtcclxuaW1wb3J0IHsgUHJvZmlsZUludGVyZmFjZSB9IGZyb20gJy4vUHJvZmlsZUludGVyZmFjZSc7XHJcblxyXG4vLyDlkIzml7blr7zlh7rkvpvlpJbpg6jkvb/nlKhcclxuZXhwb3J0IHsgUHJvZmlsZUludGVyZmFjZSB9O1xyXG5cclxuLy8g5qih5Z2X5Yid5aeL5YyW5Ye95pWwXHJcbmxldCBwcm9maWxlSW50ZXJmYWNlOiBQcm9maWxlSW50ZXJmYWNlIHwgbnVsbCA9IG51bGw7XHJcblxyXG4vKipcclxuICog5Yid5aeL5YyW5oiR55qE6aG16Z2i5qih5Z2XXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZVByb2ZpbGVNb2R1bGUoKTogUHJvbWlzZTxQcm9maWxlSW50ZXJmYWNlPiB7XHJcbiAgaWYgKHByb2ZpbGVJbnRlcmZhY2UpIHtcclxuICAgIHJldHVybiBwcm9maWxlSW50ZXJmYWNlO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKCdbUHJvZmlsZSBNb2R1bGVdIOW8gOWni+WIneWni+WMli4uLicpO1xyXG5cclxuICAgIC8vIOajgOafpeW/hemcgOeahERPTeWFg+e0oOaYr+WQpuWtmOWcqFxyXG4gICAgY29uc3QgcmVxdWlyZWRFbGVtZW50cyA9IFsncHJvZmlsZUludGVyZmFjZScsICdzZXR0aW5nc0J1dHRvbicsICdleHRlbnNpb25TZXR0aW5nc0J1dHRvbiddO1xyXG5cclxuICAgIGZvciAoY29uc3QgZWxlbWVudElkIG9mIHJlcXVpcmVkRWxlbWVudHMpIHtcclxuICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCk7XHJcbiAgICAgIGlmICghZWxlbWVudCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihg5b+F6ZyA55qERE9N5YWD57Sg5pyq5om+5YiwOiAke2VsZW1lbnRJZH1gKTtcclxuICAgICAgfVxyXG4gICAgICBjb25zb2xlLmxvZyhgW1Byb2ZpbGUgTW9kdWxlXSDinIUg5om+5Yiw5YWD57SgOiAke2VsZW1lbnRJZH1gKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm9maWxlSW50ZXJmYWNlID0gbmV3IFByb2ZpbGVJbnRlcmZhY2UoKTtcclxuICAgIGF3YWl0IHByb2ZpbGVJbnRlcmZhY2UuaW5pdGlhbGl6ZSgpO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKCdbUHJvZmlsZSBNb2R1bGVdIOWIneWni+WMluaIkOWKnycpO1xyXG4gICAgcmV0dXJuIHByb2ZpbGVJbnRlcmZhY2U7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1tQcm9maWxlIE1vZHVsZV0g5Yid5aeL5YyW5aSx6LSlOicsIGVycm9yKTtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1tQcm9maWxlIE1vZHVsZV0g6ZSZ6K+v6K+m5oOFOicsIGVycm9yLm1lc3NhZ2UsIGVycm9yLnN0YWNrKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOiOt+WPluaIkeeahOmhtemdouWunuS+i1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFByb2ZpbGVJbnRlcmZhY2UoKTogUHJvZmlsZUludGVyZmFjZSB8IG51bGwge1xyXG4gIHJldHVybiBwcm9maWxlSW50ZXJmYWNlO1xyXG59XHJcblxyXG4vKipcclxuICog6ZSA5q+B5oiR55qE6aG16Z2i5qih5Z2XXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZGVzdHJveVByb2ZpbGVNb2R1bGUoKTogdm9pZCB7XHJcbiAgaWYgKHByb2ZpbGVJbnRlcmZhY2UpIHtcclxuICAgIHByb2ZpbGVJbnRlcmZhY2UuZGVzdHJveSgpO1xyXG4gICAgcHJvZmlsZUludGVyZmFjZSA9IG51bGw7XHJcbiAgICBjb25zb2xlLmxvZygnW1Byb2ZpbGUgTW9kdWxlXSDlt7LplIDmr4EnKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIOWcqOWKoOi9veiEmuacrOaXtuiHquWKqOWIneWni+WMllxyXG4kKCgpID0+IHtcclxuICBpbml0aWFsaXplUHJvZmlsZU1vZHVsZSgpLmNhdGNoKGVycm9yID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1tQcm9maWxlIE1vZHVsZV0g6Ieq5Yqo5Yid5aeL5YyW5aSx6LSlOicsIGVycm9yKTtcclxuICB9KTtcclxufSk7XHJcblxyXG4vLyDlnKjljbjovb3ohJrmnKzml7boh6rliqjplIDmr4FcclxuJCh3aW5kb3cpLm9uKCd1bmxvYWQnLCAoKSA9PiB7XHJcbiAgZGVzdHJveVByb2ZpbGVNb2R1bGUoKTtcclxufSk7XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/profile/index.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/profile/profile.scss": 
  /*!********************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/profile/profile.scss ***!
  \********************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvcHJvZmlsZS9wcm9maWxlLnNjc3MiLCJtYXBwaW5ncyI6IjtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy9wcm9maWxlL3Byb2ZpbGUuc2Nzcz8iXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/profile/profile.scss\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/profile/types.ts": 
  /*!****************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/profile/types.ts ***!
  \****************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ComponentState: () => (/* binding */ ComponentState),\n/* harmony export */   DEFAULT_SETTINGS: () => (/* binding */ DEFAULT_SETTINGS),\n/* harmony export */   DEFAULT_UPLOAD_CONFIG: () => (/* binding */ DEFAULT_UPLOAD_CONFIG),\n/* harmony export */   ErrorType: () => (/* binding */ ErrorType),\n/* harmony export */   STORAGE_KEYS: () => (/* binding */ STORAGE_KEYS)\n/* harmony export */ });\n/**\n * Profile Module Types\n * 我的页面模块的类型定义\n */\n/**\n * 默认设置常量\n */\nconst DEFAULT_SETTINGS = {\n    chatListWallpaper: \'https://files.catbox.moe/o84j4n.jpg\',\n    globalChatWallpaper: \'\',\n    individualChatWallpapers: {},\n    emojiSuggestionsEnabled: true,\n    crossChatSendEnabled: false,\n    version: \'1.0.0\',\n};\n/**\n * 存储键名常量\n */\nconst STORAGE_KEYS = {\n    USER_DATA: \'duoyunxiong_user_data\',\n    APP_SETTINGS: \'duoyunxiong_app_settings\',\n};\n/**\n * 默认文件上传配置\n */\nconst DEFAULT_UPLOAD_CONFIG = {\n    maxSize: 2 * 1024 * 1024, // 2MB\n    acceptedTypes: [\'image/jpeg\', \'image/png\', \'image/webp\'],\n    quality: 0.8,\n};\n/**\n * 组件状态枚举\n */\nvar ComponentState;\n(function (ComponentState) {\n    ComponentState["IDLE"] = "idle";\n    ComponentState["LOADING"] = "loading";\n    ComponentState["EDITING"] = "editing";\n    ComponentState["SAVING"] = "saving";\n    ComponentState["ERROR"] = "error";\n})(ComponentState || (ComponentState = {}));\n/**\n * 错误类型枚举\n */\nvar ErrorType;\n(function (ErrorType) {\n    ErrorType["STORAGE_ERROR"] = "storage_error";\n    ErrorType["NETWORK_ERROR"] = "network_error";\n    ErrorType["FILE_ERROR"] = "file_error";\n    ErrorType["VALIDATION_ERROR"] = "validation_error";\n})(ErrorType || (ErrorType = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvcHJvZmlsZS90eXBlcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBOzs7R0FHRztBQWtDSDs7R0FFRztBQUNJLE1BQU0sZ0JBQWdCLEdBQWdCO0lBQzNDLGlCQUFpQixFQUFFLHFDQUFxQztJQUN4RCxtQkFBbUIsRUFBRSxFQUFFO0lBQ3ZCLHdCQUF3QixFQUFFLEVBQUU7SUFDNUIsdUJBQXVCLEVBQUUsSUFBSTtJQUM3QixvQkFBb0IsRUFBRSxLQUFLO0lBQzNCLE9BQU8sRUFBRSxPQUFPO0NBQ2pCLENBQUM7QUFFRjs7R0FFRztBQUNJLE1BQU0sWUFBWSxHQUFHO0lBQzFCLFNBQVMsRUFBRSx1QkFBdUI7SUFDbEMsWUFBWSxFQUFFLDBCQUEwQjtDQUNoQyxDQUFDO0FBd0JYOztHQUVHO0FBQ0ksTUFBTSxxQkFBcUIsR0FBcUI7SUFDckQsT0FBTyxFQUFFLENBQUMsR0FBRyxJQUFJLEdBQUcsSUFBSSxFQUFFLE1BQU07SUFDaEMsYUFBYSxFQUFFLENBQUMsWUFBWSxFQUFFLFdBQVcsRUFBRSxZQUFZLENBQUM7SUFDeEQsT0FBTyxFQUFFLEdBQUc7Q0FDYixDQUFDO0FBRUY7O0dBRUc7QUFDSCxJQUFZLGNBTVg7QUFORCxXQUFZLGNBQWM7SUFDeEIsK0JBQWE7SUFDYixxQ0FBbUI7SUFDbkIscUNBQW1CO0lBQ25CLG1DQUFpQjtJQUNqQixpQ0FBZTtBQUNqQixDQUFDLEVBTlcsY0FBYyxLQUFkLGNBQWMsUUFNekI7QUFFRDs7R0FFRztBQUNILElBQVksU0FLWDtBQUxELFdBQVksU0FBUztJQUNuQiw0Q0FBK0I7SUFDL0IsNENBQStCO0lBQy9CLHNDQUF5QjtJQUN6QixrREFBcUM7QUFDdkMsQ0FBQyxFQUxXLFNBQVMsS0FBVCxTQUFTLFFBS3BCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy9wcm9maWxlL3R5cGVzLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogUHJvZmlsZSBNb2R1bGUgVHlwZXNcclxuICog5oiR55qE6aG16Z2i5qih5Z2X55qE57G75Z6L5a6a5LmJXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIOeUqOaIt+aVsOaNruaOpeWPo1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBVc2VyRGF0YSB7XHJcbiAgLyoqIOeUqOaIt+WQjeensCAqL1xyXG4gIG5hbWU6IHN0cmluZztcclxuICAvKiog5aS05YOP5pWw5o2uIChiYXNlNjQg5oiWIFVSTCkgKi9cclxuICBhdmF0YXI6IHN0cmluZztcclxuICAvKiog5piv5ZCm5Li66Ieq5a6a5LmJ5pWw5o2uICovXHJcbiAgaXNDdXN0b206IGJvb2xlYW47XHJcbiAgLyoqIOacgOWQjuabtOaWsOaXtumXtOaIsyAqL1xyXG4gIGxhc3RVcGRhdGVkOiBudW1iZXI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDlupTnlKjorr7nva7mjqXlj6NcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQXBwU2V0dGluZ3Mge1xyXG4gIC8qKiDogYrlpKnliJfooajlo4HnurggKi9cclxuICBjaGF0TGlzdFdhbGxwYXBlcjogc3RyaW5nO1xyXG4gIC8qKiDlhajlsYDlr7nor53moYblo4HnurggKi9cclxuICBnbG9iYWxDaGF0V2FsbHBhcGVyOiBzdHJpbmc7XHJcbiAgLyoqIOWNleeLrOWvueivneahhuWjgee6uOaYoOWwhCAqL1xyXG4gIGluZGl2aWR1YWxDaGF0V2FsbHBhcGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcclxuICAvKiog6KGo5oOF5YyF5bu66K6u5byA5YWzICovXHJcbiAgZW1vamlTdWdnZXN0aW9uc0VuYWJsZWQ6IGJvb2xlYW47XHJcbiAgLyoqIOi3qOiBiuWkqeWPkemAgeW8gOWFsyAqL1xyXG4gIGNyb3NzQ2hhdFNlbmRFbmFibGVkOiBib29sZWFuO1xyXG4gIC8qKiDorr7nva7niYjmnKzlj7cgKi9cclxuICB2ZXJzaW9uOiBzdHJpbmc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDpu5jorqTorr7nva7luLjph49cclxuICovXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBBcHBTZXR0aW5ncyA9IHtcclxuICBjaGF0TGlzdFdhbGxwYXBlcjogJ2h0dHBzOi8vZmlsZXMuY2F0Ym94Lm1vZS9vODRqNG4uanBnJyxcclxuICBnbG9iYWxDaGF0V2FsbHBhcGVyOiAnJyxcclxuICBpbmRpdmlkdWFsQ2hhdFdhbGxwYXBlcnM6IHt9LFxyXG4gIGVtb2ppU3VnZ2VzdGlvbnNFbmFibGVkOiB0cnVlLFxyXG4gIGNyb3NzQ2hhdFNlbmRFbmFibGVkOiBmYWxzZSxcclxuICB2ZXJzaW9uOiAnMS4wLjAnLFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIOWtmOWCqOmUruWQjeW4uOmHj1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFNUT1JBR0VfS0VZUyA9IHtcclxuICBVU0VSX0RBVEE6ICdkdW95dW54aW9uZ191c2VyX2RhdGEnLFxyXG4gIEFQUF9TRVRUSU5HUzogJ2R1b3l1bnhpb25nX2FwcF9zZXR0aW5ncycsXHJcbn0gYXMgY29uc3Q7XHJcblxyXG4vKipcclxuICog55So5oi35L+h5oGv5Y+Y5pu05LqL5Lu257G75Z6LXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFVzZXJJbmZvQ2hhbmdlRXZlbnQge1xyXG4gIHR5cGU6ICdhdmF0YXInIHwgJ25hbWUnO1xyXG4gIG9sZFZhbHVlOiBzdHJpbmc7XHJcbiAgbmV3VmFsdWU6IHN0cmluZztcclxuICB0aW1lc3RhbXA6IG51bWJlcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIOaWh+S7tuS4iuS8oOmFjee9rlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBGaWxlVXBsb2FkQ29uZmlnIHtcclxuICAvKiog5pyA5aSn5paH5Lu25aSn5bCPICjlrZfoioIpICovXHJcbiAgbWF4U2l6ZTogbnVtYmVyO1xyXG4gIC8qKiDmlK/mjIHnmoTmlofku7bnsbvlnosgKi9cclxuICBhY2NlcHRlZFR5cGVzOiBzdHJpbmdbXTtcclxuICAvKiog5Zu+54mH6LSo6YePICgwLTEpICovXHJcbiAgcXVhbGl0eTogbnVtYmVyO1xyXG59XHJcblxyXG4vKipcclxuICog6buY6K6k5paH5Lu25LiK5Lyg6YWN572uXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgREVGQVVMVF9VUExPQURfQ09ORklHOiBGaWxlVXBsb2FkQ29uZmlnID0ge1xyXG4gIG1heFNpemU6IDIgKiAxMDI0ICogMTAyNCwgLy8gMk1CXHJcbiAgYWNjZXB0ZWRUeXBlczogWydpbWFnZS9qcGVnJywgJ2ltYWdlL3BuZycsICdpbWFnZS93ZWJwJ10sXHJcbiAgcXVhbGl0eTogMC44LFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIOe7hOS7tueKtuaAgeaemuS4vlxyXG4gKi9cclxuZXhwb3J0IGVudW0gQ29tcG9uZW50U3RhdGUge1xyXG4gIElETEUgPSAnaWRsZScsXHJcbiAgTE9BRElORyA9ICdsb2FkaW5nJyxcclxuICBFRElUSU5HID0gJ2VkaXRpbmcnLFxyXG4gIFNBVklORyA9ICdzYXZpbmcnLFxyXG4gIEVSUk9SID0gJ2Vycm9yJyxcclxufVxyXG5cclxuLyoqXHJcbiAqIOmUmeivr+exu+Wei+aemuS4vlxyXG4gKi9cclxuZXhwb3J0IGVudW0gRXJyb3JUeXBlIHtcclxuICBTVE9SQUdFX0VSUk9SID0gJ3N0b3JhZ2VfZXJyb3InLFxyXG4gIE5FVFdPUktfRVJST1IgPSAnbmV0d29ya19lcnJvcicsXHJcbiAgRklMRV9FUlJPUiA9ICdmaWxlX2Vycm9yJyxcclxuICBWQUxJREFUSU9OX0VSUk9SID0gJ3ZhbGlkYXRpb25fZXJyb3InLFxyXG59XHJcblxyXG4vKipcclxuICog6ZSZ6K+v5L+h5oGv5o6l5Y+jXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEVycm9ySW5mbyB7XHJcbiAgdHlwZTogRXJyb3JUeXBlO1xyXG4gIG1lc3NhZ2U6IHN0cmluZztcclxuICBkZXRhaWxzPzogYW55O1xyXG4gIHRpbWVzdGFtcDogbnVtYmVyO1xyXG59XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/profile/types.ts\n\n}');
  },
  "./src/多云熊/备份/给rovo的/modules/utils/AvatarSourceService.ts": 
  /*!****************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/utils/AvatarSourceService.ts ***!
  \****************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AvatarSource: () => (/* binding */ AvatarSource),\n/* harmony export */   AvatarSourceService: () => (/* binding */ AvatarSourceService),\n/* harmony export */   avatarSourceService: () => (/* binding */ avatarSourceService),\n/* harmony export */   getCachedUserAvatar: () => (/* binding */ getCachedUserAvatar),\n/* harmony export */   getCurrentUserAvatar: () => (/* binding */ getCurrentUserAvatar),\n/* harmony export */   refreshUserAvatarCache: () => (/* binding */ refreshUserAvatarCache),\n/* harmony export */   setCachedUserAvatar: () => (/* binding */ setCachedUserAvatar)\n/* harmony export */ });\n/* harmony import */ var _profile_GlobalUserManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../profile/GlobalUserManager */ \"./src/多云熊/备份/给rovo的/modules/profile/GlobalUserManager.ts\");\n/* harmony import */ var _userInfoRetrieval__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./userInfoRetrieval */ \"./src/多云熊/备份/给rovo的/modules/utils/userInfoRetrieval.ts\");\n/**\n * AvatarSourceService - 增强的头像获取服务\n * 基于现有的userInfoRetrieval.ts和GlobalUserManager.ts实现统一的头像源管理\n * 优先使用浏览器缓存，提供多级降级策略\n */\n\n\n/**\n * 头像获取策略枚举\n */\nvar AvatarSource;\n(function (AvatarSource) {\n    AvatarSource[\"CACHE\"] = \"cache\";\n    AvatarSource[\"GLOBAL_USER_MANAGER\"] = \"global_user_manager\";\n    AvatarSource[\"TAVERN_HELPER\"] = \"tavern_helper\";\n    AvatarSource[\"DOM_DETECTION\"] = \"dom_detection\";\n    AvatarSource[\"GLOBAL_VARS\"] = \"global_vars\";\n    AvatarSource[\"DEFAULT\"] = \"default\";\n})(AvatarSource || (AvatarSource = {}));\n/**\n * 增强的头像源服务\n */\nclass AvatarSourceService {\n    static instance;\n    config;\n    globalUserManager;\n    userInfoRetrieval;\n    cache = new Map();\n    lastKnownAvatar = '';\n    constructor(config = {}) {\n        this.config = {\n            debug: config.debug ?? false,\n            cacheTimeout: config.cacheTimeout ?? 5 * 60 * 1000, // 5分钟\n            defaultAvatarUrl: config.defaultAvatarUrl ?? 'https://files.catbox.moe/u8ccy5.jpg',\n            enableDOMDetection: config.enableDOMDetection ?? true,\n        };\n        this.globalUserManager = _profile_GlobalUserManager__WEBPACK_IMPORTED_MODULE_0__.GlobalUserManager.getInstance();\n        this.userInfoRetrieval = new _userInfoRetrieval__WEBPACK_IMPORTED_MODULE_1__.UserInfoRetrieval({\n            defaultAvatarUrl: this.config.defaultAvatarUrl,\n            enableLogging: this.config.debug,\n        });\n        this.initializeService();\n    }\n    /**\n     * 获取单例实例\n     */\n    static getInstance(config) {\n        if (!AvatarSourceService.instance) {\n            AvatarSourceService.instance = new AvatarSourceService(config);\n        }\n        return AvatarSourceService.instance;\n    }\n    /**\n     * 初始化服务\n     */\n    async initializeService() {\n        try {\n            // 监听GlobalUserManager的头像变更事件\n            this.globalUserManager.addEventListener('avatar', event => {\n                this.log(`头像变更事件: ${event.oldValue} -> ${event.newValue}`);\n                this.setCachedAvatar(event.newValue, AvatarSource.GLOBAL_USER_MANAGER);\n                this.lastKnownAvatar = event.newValue;\n            });\n            // 初始化时获取一次头像\n            const initialAvatar = await this.getCurrentAvatar();\n            this.lastKnownAvatar = initialAvatar;\n            this.log(`服务初始化完成，当前头像: ${initialAvatar}`);\n        }\n        catch (error) {\n            this.log(`服务初始化失败: ${error}`);\n        }\n    }\n    /**\n     * 获取当前用户头像（主要方法）\n     * 按优先级依次尝试各种获取方式\n     * 优先使用GlobalUserManager的持久化数据\n     */\n    async getCurrentAvatar() {\n        const strategies = [\n            { source: AvatarSource.GLOBAL_USER_MANAGER, method: () => this.getAvatarFromGlobalUserManager() },\n            { source: AvatarSource.CACHE, method: () => Promise.resolve(this.getCachedAvatar()) },\n            { source: AvatarSource.TAVERN_HELPER, method: () => this.getAvatarFromTavernHelper() },\n            { source: AvatarSource.DOM_DETECTION, method: () => this.getAvatarFromDOM() },\n            { source: AvatarSource.GLOBAL_VARS, method: () => this.getAvatarFromGlobalVars() },\n            { source: AvatarSource.DEFAULT, method: () => Promise.resolve(this.config.defaultAvatarUrl) },\n        ];\n        for (const strategy of strategies) {\n            try {\n                const result = await strategy.method();\n                if (result && result.trim()) {\n                    this.log(`从 ${strategy.source} 获取到头像: ${result}`);\n                    // 如果不是从缓存获取的，则更新缓存\n                    if (strategy.source !== AvatarSource.CACHE) {\n                        this.setCachedAvatar(result, strategy.source);\n                    }\n                    return result;\n                }\n            }\n            catch (error) {\n                this.log(`从 ${strategy.source} 获取头像失败: ${error}`);\n            }\n        }\n        this.log(`所有策略都失败，使用默认头像: ${this.config.defaultAvatarUrl}`);\n        return this.config.defaultAvatarUrl;\n    }\n    /**\n     * 从缓存获取头像\n     */\n    getCachedAvatar() {\n        const cacheKey = 'user_avatar';\n        const cached = this.cache.get(cacheKey);\n        if (!cached) {\n            return null;\n        }\n        // 检查缓存是否过期\n        const now = Date.now();\n        if (now - cached.timestamp > this.config.cacheTimeout) {\n            this.cache.delete(cacheKey);\n            this.log('缓存已过期，已清理');\n            return null;\n        }\n        // 减少日志频率，避免循环日志\n        if (this.config.debug && Math.random() < 0.1) {\n            // 只有10%的概率记录缓存命中\n            this.log(`从缓存获取头像: ${cached.url} (来源: ${cached.source})`);\n        }\n        return cached.url;\n    }\n    /**\n     * 设置缓存头像\n     */\n    setCachedAvatar(avatarUrl, source) {\n        if (!avatarUrl || !avatarUrl.trim()) {\n            return;\n        }\n        const cacheKey = 'user_avatar';\n        const cacheEntry = {\n            url: avatarUrl.trim(),\n            timestamp: Date.now(),\n            source,\n        };\n        this.cache.set(cacheKey, cacheEntry);\n        this.log(`头像已缓存: ${avatarUrl} (来源: ${source})`);\n    }\n    /**\n     * 从GlobalUserManager获取头像\n     */\n    async getAvatarFromGlobalUserManager() {\n        try {\n            const userData = this.globalUserManager.getCurrentUserData();\n            if (userData?.isCustom && userData.avatar) {\n                return userData.avatar;\n            }\n            // 如果没有自定义数据，尝试异步获取\n            const avatar = await this.globalUserManager.getUserAvatar();\n            return avatar || null;\n        }\n        catch (error) {\n            this.log(`从GlobalUserManager获取头像失败: ${error}`);\n            return null;\n        }\n    }\n    /**\n     * 从TavernHelper获取头像\n     */\n    async getAvatarFromTavernHelper() {\n        try {\n            if (window.TavernHelper && window.TavernHelper.substitudeMacros) {\n                const userAvatarPath = window.TavernHelper.substitudeMacros('{{userAvatarPath}}');\n                if (userAvatarPath && userAvatarPath !== '{{userAvatarPath}}' && userAvatarPath.trim()) {\n                    return userAvatarPath.trim();\n                }\n            }\n            // 尝试使用triggerSlash\n            if (typeof triggerSlash === 'function') {\n                const result = await triggerSlash('/pass {{userAvatarPath}}');\n                if (result && result.trim()) {\n                    return result.trim();\n                }\n            }\n            return null;\n        }\n        catch (error) {\n            this.log(`从TavernHelper获取头像失败: ${error}`);\n            return null;\n        }\n    }\n    /**\n     * 从DOM元素获取头像\n     */\n    getAvatarFromDOM() {\n        return Promise.resolve(this.config.enableDOMDetection ? (0,_userInfoRetrieval__WEBPACK_IMPORTED_MODULE_1__.getSimpleUserAvatar)() : null);\n    }\n    /**\n     * 从全局变量获取头像\n     */\n    getAvatarFromGlobalVars() {\n        try {\n            const globalAvatarVars = [\n                () => window.power_user?.avatar,\n                () => window.user_avatar,\n                () => window.settings?.user_avatar,\n                () => window.chat_metadata?.user_avatar,\n                () => window.persona?.avatar,\n            ];\n            for (const getVar of globalAvatarVars) {\n                try {\n                    const value = getVar();\n                    if (value && typeof value === 'string' && value.trim()) {\n                        return Promise.resolve(value.trim());\n                    }\n                }\n                catch (e) {\n                    // 忽略访问错误，继续尝试下一个\n                }\n            }\n            return Promise.resolve(null);\n        }\n        catch (error) {\n            this.log(`从全局变量获取头像失败: ${error}`);\n            return Promise.resolve(null);\n        }\n    }\n    /**\n     * 强制刷新头像缓存\n     */\n    async refreshCache() {\n        this.log('强制刷新头像缓存');\n        this.cache.clear();\n        const newAvatar = await this.getCurrentAvatar();\n        this.lastKnownAvatar = newAvatar;\n        return newAvatar;\n    }\n    /**\n     * 获取最后已知的头像\n     */\n    getLastKnownAvatar() {\n        return this.lastKnownAvatar || this.config.defaultAvatarUrl;\n    }\n    /**\n     * 检查头像是否发生变化\n     */\n    async hasAvatarChanged() {\n        const currentAvatar = await this.getCurrentAvatar();\n        const changed = currentAvatar !== this.lastKnownAvatar;\n        if (changed) {\n            this.log(`头像已变化: ${this.lastKnownAvatar} -> ${currentAvatar}`);\n            this.lastKnownAvatar = currentAvatar;\n        }\n        return changed;\n    }\n    /**\n     * 获取头像获取统计信息\n     */\n    getStats() {\n        const cacheEntries = Array.from(this.cache.entries()).map(([key, entry]) => ({\n            source: entry.source,\n            url: entry.url,\n            age: Date.now() - entry.timestamp,\n        }));\n        return {\n            cacheSize: this.cache.size,\n            lastKnownAvatar: this.lastKnownAvatar,\n            cacheEntries,\n        };\n    }\n    /**\n     * 清理过期缓存\n     */\n    cleanupExpiredCache() {\n        const now = Date.now();\n        let cleanedCount = 0;\n        for (const [key, entry] of this.cache.entries()) {\n            if (now - entry.timestamp > this.config.cacheTimeout) {\n                this.cache.delete(key);\n                cleanedCount++;\n            }\n        }\n        if (cleanedCount > 0) {\n            this.log(`清理了 ${cleanedCount} 个过期缓存条目`);\n        }\n        return cleanedCount;\n    }\n    /**\n     * 更新配置\n     */\n    updateConfig(newConfig) {\n        this.config = { ...this.config, ...newConfig };\n        this.userInfoRetrieval.updateOptions({\n            defaultAvatarUrl: this.config.defaultAvatarUrl,\n            enableLogging: this.config.debug,\n        });\n        this.log('配置已更新');\n    }\n    /**\n     * 销毁服务\n     */\n    destroy() {\n        this.cache.clear();\n        this.log('AvatarSourceService已销毁');\n        AvatarSourceService.instance = null;\n    }\n    /**\n     * 日志输出\n     */\n    log(message) {\n        if (this.config.debug) {\n            console.log(`[AvatarSourceService] ${message}`);\n        }\n    }\n}\n// 导出全局实例 - 禁用调试日志\nconst avatarSourceService = AvatarSourceService.getInstance({ debug: false });\n/**\n * 便捷函数：获取当前头像\n */\nasync function getCurrentUserAvatar() {\n    return avatarSourceService.getCurrentAvatar();\n}\n/**\n * 便捷函数：获取缓存头像\n */\nfunction getCachedUserAvatar() {\n    return avatarSourceService.getCachedAvatar();\n}\n/**\n * 便捷函数：设置缓存头像\n */\nfunction setCachedUserAvatar(avatarUrl, source = AvatarSource.CACHE) {\n    avatarSourceService.setCachedAvatar(avatarUrl, source);\n}\n/**\n * 便捷函数：刷新头像缓存\n */\nasync function refreshUserAvatarCache() {\n    return avatarSourceService.refreshCache();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvdXRpbHMvQXZhdGFyU291cmNlU2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTs7OztHQUlHO0FBRThEO0FBQ1k7QUFtQjdFOztHQUVHO0FBQ0gsSUFBWSxZQU9YO0FBUEQsV0FBWSxZQUFZO0lBQ3RCLCtCQUFlO0lBQ2YsMkRBQTJDO0lBQzNDLCtDQUErQjtJQUMvQiwrQ0FBK0I7SUFDL0IsMkNBQTJCO0lBQzNCLG1DQUFtQjtBQUNyQixDQUFDLEVBUFcsWUFBWSxLQUFaLFlBQVksUUFPdkI7QUFFRDs7R0FFRztBQUNJLE1BQU0sbUJBQW1CO0lBQ3RCLE1BQU0sQ0FBQyxRQUFRLENBQXNCO0lBQ3JDLE1BQU0sQ0FBK0I7SUFDckMsaUJBQWlCLENBQW9CO0lBQ3JDLGlCQUFpQixDQUFvQjtJQUNyQyxLQUFLLEdBQWtDLElBQUksR0FBRyxFQUFFLENBQUM7SUFDakQsZUFBZSxHQUFXLEVBQUUsQ0FBQztJQUVyQyxZQUFvQixTQUE2QixFQUFFO1FBQ2pELElBQUksQ0FBQyxNQUFNLEdBQUc7WUFDWixLQUFLLEVBQUUsTUFBTSxDQUFDLEtBQUssSUFBSSxLQUFLO1lBQzVCLFlBQVksRUFBRSxNQUFNLENBQUMsWUFBWSxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsSUFBSSxFQUFFLE1BQU07WUFDMUQsZ0JBQWdCLEVBQUUsTUFBTSxDQUFDLGdCQUFnQixJQUFJLHFDQUFxQztZQUNsRixrQkFBa0IsRUFBRSxNQUFNLENBQUMsa0JBQWtCLElBQUksSUFBSTtTQUN0RCxDQUFDO1FBRUYsSUFBSSxDQUFDLGlCQUFpQixHQUFHLHlFQUFpQixDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ3pELElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLGlFQUFpQixDQUFDO1lBQzdDLGdCQUFnQixFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsZ0JBQWdCO1lBQzlDLGFBQWEsRUFBRSxJQUFJLENB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Q0FBQyxPQUFPLENBQUMsQ0FBQztJQUNwQixDQUFDO0lBRUQ7O09BRUc7SUFDSSxPQUFPO1FBQ1osSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNuQixJQUFJLENBQUMsR0FBRyxDQUFDLHdCQUF3QixDQUFDLENBQUM7UUFDbkMsbUJBQW1CLENBQUMsUUFBUSxHQUFHLElBQVcsQ0FBQztJQUM3QyxDQUFDO0lBRUQ7O09BRUc7SUFDSyxHQUFHLENBQUMsT0FBZTtRQUN6QixJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDdEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyx5QkFBeUIsT0FBTyxFQUFFLENBQUMsQ0FBQztRQUNsRCxDQUFDO0lBQ0gsQ0FBQztDQUNGO0FBRUQsa0JBQWtCO0FBQ1gsTUFBTSxtQkFBbUIsR0FBRyxtQkFBbUIsQ0FBQyxXQUFXLENBQUMsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztBQUVyRjs7R0FFRztBQUNJLEtBQUssVUFBVSxvQkFBb0I7SUFDeEMsT0FBTyxtQkFBbUIsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0FBQ2hELENBQUM7QUFFRDs7R0FFRztBQUNJLFNBQVMsbUJBQW1CO0lBQ2pDLE9BQU8sbUJBQW1CLENBQUMsZUFBZSxFQUFFLENBQUM7QUFDL0MsQ0FBQztBQUVEOztHQUVHO0FBQ0ksU0FBUyxtQkFBbUIsQ0FBQyxTQUFpQixFQUFFLFNBQXVCLFlBQVksQ0FBQyxLQUFLO0lBQzlGLG1CQUFtQixDQUFDLGVBQWUsQ0FBQyxTQUFTLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDekQsQ0FBQztBQUVEOztHQUVHO0FBQ0ksS0FBSyxVQUFVLHNCQUFzQjtJQUMxQyxPQUFPLG1CQUFtQixDQUFDLFlBQVksRUFBRSxDQUFDO0FBQzVDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WkmuS6keeGii/lpIfku70v57uZcm92b+eahC9tb2R1bGVzL3V0aWxzL0F2YXRhclNvdXJjZVNlcnZpY2UudHM/Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBBdmF0YXJTb3VyY2VTZXJ2aWNlIC0g5aKe5by655qE5aS05YOP6I635Y+W5pyN5YqhXHJcbiAqIOWfuuS6jueOsOacieeahHVzZXJJbmZvUmV0cmlldmFsLnRz5ZKMR2xvYmFsVXNlck1hbmFnZXIudHPlrp7njrDnu5/kuIDnmoTlpLTlg4/mupDnrqHnkIZcclxuICog5LyY5YWI5L2/55So5rWP6KeI5Zmo57yT5a2Y77yM5o+Q5L6b5aSa57qn6ZmN57qn562W55WlXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgR2xvYmFsVXNlck1hbmFnZXIgfSBmcm9tICcuLi9wcm9maWxlL0dsb2JhbFVzZXJNYW5hZ2VyJztcclxuaW1wb3J0IHsgVXNlckluZm9SZXRyaWV2YWwsIGdldFNpbXBsZVVzZXJBdmF0YXIgfSBmcm9tICcuL3VzZXJJbmZvUmV0cmlldmFsJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQXZhdGFyU291cmNlQ29uZmlnIHtcclxuICAvKiog5piv5ZCm5ZCv55So6LCD6K+V5pel5b+XICovXHJcbiAgZGVidWc/OiBib29sZWFuO1xyXG4gIC8qKiDnvJPlrZjotoXml7bml7bpl7TvvIjmr6vnp5LvvIkgKi9cclxuICBjYWNoZVRpbWVvdXQ/OiBudW1iZXI7XHJcbiAgLyoqIOm7mOiupOWktOWDj1VSTCAqL1xyXG4gIGRlZmF1bHRBdmF0YXJVcmw/OiBzdHJpbmc7XHJcbiAgLyoqIOaYr+WQpuWQr+eUqERPTeajgOa1iyAqL1xyXG4gIGVuYWJsZURPTURldGVjdGlvbj86IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQXZhdGFyQ2FjaGVFbnRyeSB7XHJcbiAgdXJsOiBzdHJpbmc7XHJcbiAgdGltZXN0YW1wOiBudW1iZXI7XHJcbiAgc291cmNlOiBzdHJpbmc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDlpLTlg4/ojrflj5bnrZbnlaXmnprkuL5cclxuICovXHJcbmV4cG9ydCBlbnVtIEF2YXRhclNvdXJjZSB7XHJcbiAgQ0FDSEUgPSAnY2FjaGUnLFxyXG4gIEdMT0JBTF9VU0VSX01BTkFHRVIgPSAnZ2xvYmFsX3VzZXJfbWFuYWdlcicsXHJcbiAgVEFWRVJOX0hFTFBFUiA9ICd0YXZlcm5faGVscGVyJyxcclxuICBET01fREVURUNUSU9OID0gJ2RvbV9kZXRlY3Rpb24nLFxyXG4gIEdMT0JBTF9WQVJTID0gJ2dsb2JhbF92YXJzJyxcclxuICBERUZBVUxUID0gJ2RlZmF1bHQnLFxyXG59XHJcblxyXG4vKipcclxuICog5aKe5by655qE5aS05YOP5rqQ5pyN5YqhXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQXZhdGFyU291cmNlU2VydmljZSB7XHJcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IEF2YXRhclNvdXJjZVNlcnZpY2U7XHJcbiAgcHJpdmF0ZSBjb25maWc6IFJlcXVpcmVkPEF2YXRhclNvdXJjZUNvbmZpZz47XHJcbiAgcHJpdmF0ZSBnbG9iYWxVc2VyTWFuYWdlcjogR2xvYmFsVXNlck1hbmFnZXI7XHJcbiAgcHJpdmF0ZSB1c2VySW5mb1JldHJpZXZhbDogVXNlckluZm9SZXRyaWV2YWw7XHJcbiAgcHJpdmF0ZSBjYWNoZTogTWFwPHN0cmluZywgQXZhdGFyQ2FjaGVFbnRyeT4gPSBuZXcgTWFwKCk7XHJcbiAgcHJpdmF0ZSBsYXN0S25vd25BdmF0YXI6IHN0cmluZyA9ICcnO1xyXG5cclxuICBwcml2YXRlIGNvbnN0cnVjdG9yKGNvbmZpZzogQXZhdGFyU291cmNlQ29uZmlnID0ge30pIHtcclxuICAgIHRoaXMuY29uZmlnID0ge1xyXG4gICAgICBkZWJ1ZzogY29uZmlnLmRlYnVnID8/IGZhbHNlLFxyXG4gICAgICBjYWNoZVRpbWVvdXQ6IGNvbmZpZy5jYWNoZVRpbWVvdXQgPz8gNSAqIDYwICogMTAwMCwgLy8gNeWIhumSn1xyXG4gICAgICBkZWZhdWx0QXZhdGFyVXJsOiBjb25maWcuZGVmYXVsdEF2YXRhclVybCA/PyAnaHR0cHM6Ly9maWxlcy5jYXRib3gubW9lL3U4Y2N5NS5qcGcnLFxyXG4gICAgICBlbmFibGVET01EZXRlY3Rpb246IGNvbmZpZy5lbmFibGVET01EZXRlY3Rpb24gPz8gdHJ1ZSxcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5nbG9iYWxVc2VyTWFuYWdlciA9IEdsb2JhbFVzZXJNYW5hZ2VyLmdldEluc3RhbmNlKCk7XHJcbiAgICB0aGlzLnVzZXJJbmZvUmV0cmlldmFsID0gbmV3IFVzZXJJbmZvUmV0cmlldmFsKHtcclxuICAgICAgZGVmYXVsdEF2YXRhclVybDogdGhpcy5jb25maWcuZGVmYXVsdEF2YXRhclVybCxcclxuICAgICAgZW5hYmxlTG9nZ2luZzogdGhpcy5jb25maWcuZGVidWcsXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmluaXRpYWxpemVTZXJ2aWNlKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bljZXkvovlrp7kvotcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldEluc3RhbmNlKGNvbmZpZz86IEF2YXRhclNvdXJjZUNvbmZpZyk6IEF2YXRhclNvdXJjZVNlcnZpY2Uge1xyXG4gICAgaWYgKCFBdmF0YXJTb3VyY2VTZXJ2aWNlLmluc3RhbmNlKSB7XHJcbiAgICAgIEF2YXRhclNvdXJjZVNlcnZpY2UuaW5zdGFuY2UgPSBuZXcgQXZhdGFyU291cmNlU2VydmljZShjb25maWcpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEF2YXRhclNvdXJjZVNlcnZpY2UuaW5zdGFuY2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliJ3lp4vljJbmnI3liqFcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVTZXJ2aWNlKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g55uR5ZCsR2xvYmFsVXNlck1hbmFnZXLnmoTlpLTlg4/lj5jmm7Tkuovku7ZcclxuICAgICAgdGhpcy5nbG9iYWxVc2VyTWFuYWdlci5hZGRFdmVudExpc3RlbmVyKCdhdmF0YXInLCBldmVudCA9PiB7XHJcbiAgICAgICAgdGhpcy5sb2coYOWktOWDj+WPmOabtOS6i+S7tjogJHtldmVudC5vbGRWYWx1ZX0gLT4gJHtldmVudC5uZXdWYWx1ZX1gKTtcclxuICAgICAgICB0aGlzLnNldENhY2hlZEF2YXRhcihldmVudC5uZXdWYWx1ZSwgQXZhdGFyU291cmNlLkdMT0JBTF9VU0VSX01BTkFHRVIpO1xyXG4gICAgICAgIHRoaXMubGFzdEtub3duQXZhdGFyID0gZXZlbnQubmV3VmFsdWU7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8g5Yid5aeL5YyW5pe26I635Y+W5LiA5qyh5aS05YOPXHJcbiAgICAgIGNvbnN0IGluaXRpYWxBdmF0YXIgPSBhd2FpdCB0aGlzLmdldEN1cnJlbnRBdmF0YXIoKTtcclxuICAgICAgdGhpcy5sYXN0S25vd25BdmF0YXIgPSBpbml0aWFsQXZhdGFyO1xyXG4gICAgICB0aGlzLmxvZyhg5pyN5Yqh5Yid5aeL5YyW5a6M5oiQ77yM5b2T5YmN5aS05YOPOiAke2luaXRpYWxBdmF0YXJ9YCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLmxvZyhg5pyN5Yqh5Yid5aeL5YyW5aSx6LSlOiAke2Vycm9yfWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5b2T5YmN55So5oi35aS05YOP77yI5Li76KaB5pa55rOV77yJXHJcbiAgICog5oyJ5LyY5YWI57qn5L6d5qyh5bCd6K+V5ZCE56eN6I635Y+W5pa55byPXHJcbiAgICog5LyY5YWI5L2/55SoR2xvYmFsVXNlck1hbmFnZXLnmoTmjIHkuYXljJbmlbDmja5cclxuICAgKi9cclxuICBwdWJsaWMgYXN5bmMgZ2V0Q3VycmVudEF2YXRhcigpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgY29uc3Qgc3RyYXRlZ2llcyA9IFtcclxuICAgICAgeyBzb3VyY2U6IEF2YXRhclNvdXJjZS5HTE9CQUxfVVNFUl9NQU5BR0VSLCBtZXRob2Q6ICgpID0+IHRoaXMuZ2V0QXZhdGFyRnJvbUdsb2JhbFVzZXJNYW5hZ2VyKCkgfSxcclxuICAgICAgeyBzb3VyY2U6IEF2YXRhclNvdXJjZS5DQUNIRSwgbWV0aG9kOiAoKSA9PiBQcm9taXNlLnJlc29sdmUodGhpcy5nZXRDYWNoZWRBdmF0YXIoKSkgfSxcclxuICAgICAgeyBzb3VyY2U6IEF2YXRhclNvdXJjZS5UQVZFUk5fSEVMUEVSLCBtZXRob2Q6ICgpID0+IHRoaXMuZ2V0QXZhdGFyRnJvbVRhdmVybkhlbHBlcigpIH0sXHJcbiAgICAgIHsgc291cmNlOiBBdmF0YXJTb3VyY2UuRE9NX0RFVEVDVElPTiwgbWV0aG9kOiAoKSA9PiB0aGlzLmdldEF2YXRhckZyb21ET00oKSB9LFxyXG4gICAgICB7IHNvdXJjZTogQXZhdGFyU291cmNlLkdMT0JBTF9WQVJTLCBtZXRob2Q6ICgpID0+IHRoaXMuZ2V0QXZhdGFyRnJvbUdsb2JhbFZhcnMoKSB9LFxyXG4gICAgICB7IHNvdXJjZTogQXZhdGFyU291cmNlLkRFRkFVTFQsIG1ldGhvZDogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuY29uZmlnLmRlZmF1bHRBdmF0YXJVcmwpIH0sXHJcbiAgICBdO1xyXG5cclxuICAgIGZvciAoY29uc3Qgc3RyYXRlZ3kgb2Ygc3RyYXRlZ2llcykge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHN0cmF0ZWd5Lm1ldGhvZCgpO1xyXG4gICAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0LnRyaW0oKSkge1xyXG4gICAgICAgICAgdGhpcy5sb2coYOS7jiAke3N0cmF0ZWd5LnNvdXJjZX0g6I635Y+W5Yiw5aS05YOPOiAke3Jlc3VsdH1gKTtcclxuXHJcbiAgICAgICAgICAvLyDlpoLmnpzkuI3mmK/ku47nvJPlrZjojrflj5bnmoTvvIzliJnmm7TmlrDnvJPlrZhcclxuICAgICAgICAgIGlmIChzdHJhdGVneS5zb3VyY2UgIT09IEF2YXRhclNvdXJjZS5DQUNIRSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldENhY2hlZEF2YXRhcihyZXN1bHQsIHN0cmF0ZWd5LnNvdXJjZSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5sb2coYOS7jiAke3N0cmF0ZWd5LnNvdXJjZX0g6I635Y+W5aS05YOP5aSx6LSlOiAke2Vycm9yfWApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5sb2coYOaJgOacieetlueVpemDveWksei0pe+8jOS9v+eUqOm7mOiupOWktOWDjzogJHt0aGlzLmNvbmZpZy5kZWZhdWx0QXZhdGFyVXJsfWApO1xyXG4gICAgcmV0dXJuIHRoaXMuY29uZmlnLmRlZmF1bHRBdmF0YXJVcmw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDku47nvJPlrZjojrflj5blpLTlg49cclxuICAgKi9cclxuICBwdWJsaWMgZ2V0Q2FjaGVkQXZhdGFyKCk6IHN0cmluZyB8IG51bGwge1xyXG4gICAgY29uc3QgY2FjaGVLZXkgPSAndXNlcl9hdmF0YXInO1xyXG4gICAgY29uc3QgY2FjaGVkID0gdGhpcy5jYWNoZS5nZXQoY2FjaGVLZXkpO1xyXG5cclxuICAgIGlmICghY2FjaGVkKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOajgOafpee8k+WtmOaYr+WQpui/h+acn1xyXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgIGlmIChub3cgLSBjYWNoZWQudGltZXN0YW1wID4gdGhpcy5jb25maWcuY2FjaGVUaW1lb3V0KSB7XHJcbiAgICAgIHRoaXMuY2FjaGUuZGVsZXRlKGNhY2hlS2V5KTtcclxuICAgICAgdGhpcy5sb2coJ+e8k+WtmOW3sui/h+acn++8jOW3sua4heeQhicpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvLyDlh4/lsJHml6Xlv5fpopHnjofvvIzpgb/lhY3lvqrnjq/ml6Xlv5dcclxuICAgIGlmICh0aGlzLmNvbmZpZy5kZWJ1ZyAmJiBNYXRoLnJhbmRvbSgpIDwgMC4xKSB7XHJcbiAgICAgIC8vIOWPquaciTEwJeeahOamgueOh+iusOW9lee8k+WtmOWRveS4rVxyXG4gICAgICB0aGlzLmxvZyhg5LuO57yT5a2Y6I635Y+W5aS05YOPOiAke2NhY2hlZC51cmx9ICjmnaXmupA6ICR7Y2FjaGVkLnNvdXJjZX0pYCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2FjaGVkLnVybDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiuvue9rue8k+WtmOWktOWDj1xyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXRDYWNoZWRBdmF0YXIoYXZhdGFyVXJsOiBzdHJpbmcsIHNvdXJjZTogQXZhdGFyU291cmNlKTogdm9pZCB7XHJcbiAgICBpZiAoIWF2YXRhclVybCB8fCAhYXZhdGFyVXJsLnRyaW0oKSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY2FjaGVLZXkgPSAndXNlcl9hdmF0YXInO1xyXG4gICAgY29uc3QgY2FjaGVFbnRyeTogQXZhdGFyQ2FjaGVFbnRyeSA9IHtcclxuICAgICAgdXJsOiBhdmF0YXJVcmwudHJpbSgpLFxyXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgIHNvdXJjZSxcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5jYWNoZS5zZXQoY2FjaGVLZXksIGNhY2hlRW50cnkpO1xyXG4gICAgdGhpcy5sb2coYOWktOWDj+W3sue8k+WtmDogJHthdmF0YXJVcmx9ICjmnaXmupA6ICR7c291cmNlfSlgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOS7jkdsb2JhbFVzZXJNYW5hZ2Vy6I635Y+W5aS05YOPXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBnZXRBdmF0YXJGcm9tR2xvYmFsVXNlck1hbmFnZXIoKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB1c2VyRGF0YSA9IHRoaXMuZ2xvYmFsVXNlck1hbmFnZXIuZ2V0Q3VycmVudFVzZXJEYXRhKCk7XHJcbiAgICAgIGlmICh1c2VyRGF0YT8uaXNDdXN0b20gJiYgdXNlckRhdGEuYXZhdGFyKSB7XHJcbiAgICAgICAgcmV0dXJuIHVzZXJEYXRhLmF2YXRhcjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5aaC5p6c5rKh5pyJ6Ieq5a6a5LmJ5pWw5o2u77yM5bCd6K+V5byC5q2l6I635Y+WXHJcbiAgICAgIGNvbnN0IGF2YXRhciA9IGF3YWl0IHRoaXMuZ2xvYmFsVXNlck1hbmFnZXIuZ2V0VXNlckF2YXRhcigpO1xyXG4gICAgICByZXR1cm4gYXZhdGFyIHx8IG51bGw7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLmxvZyhg5LuOR2xvYmFsVXNlck1hbmFnZXLojrflj5blpLTlg4/lpLHotKU6ICR7ZXJyb3J9YCk7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5LuOVGF2ZXJuSGVscGVy6I635Y+W5aS05YOPXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBnZXRBdmF0YXJGcm9tVGF2ZXJuSGVscGVyKCk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKHdpbmRvdy5UYXZlcm5IZWxwZXIgJiYgd2luZG93LlRhdmVybkhlbHBlci5zdWJzdGl0dWRlTWFjcm9zKSB7XHJcbiAgICAgICAgY29uc3QgdXNlckF2YXRhclBhdGggPSB3aW5kb3cuVGF2ZXJuSGVscGVyLnN1YnN0aXR1ZGVNYWNyb3MoJ3t7dXNlckF2YXRhclBhdGh9fScpO1xyXG4gICAgICAgIGlmICh1c2VyQXZhdGFyUGF0aCAmJiB1c2VyQXZhdGFyUGF0aCAhPT0gJ3t7dXNlckF2YXRhclBhdGh9fScgJiYgdXNlckF2YXRhclBhdGgudHJpbSgpKSB7XHJcbiAgICAgICAgICByZXR1cm4gdXNlckF2YXRhclBhdGgudHJpbSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5bCd6K+V5L2/55SodHJpZ2dlclNsYXNoXHJcbiAgICAgIGlmICh0eXBlb2YgdHJpZ2dlclNsYXNoID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdHJpZ2dlclNsYXNoKCcvcGFzcyB7e3VzZXJBdmF0YXJQYXRofX0nKTtcclxuICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC50cmltKCkpIHtcclxuICAgICAgICAgIHJldHVybiByZXN1bHQudHJpbSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLmxvZyhg5LuOVGF2ZXJuSGVscGVy6I635Y+W5aS05YOP5aSx6LSlOiAke2Vycm9yfWApO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOS7jkRPTeWFg+e0oOiOt+WPluWktOWDj1xyXG4gICAqL1xyXG4gIHByaXZhdGUgZ2V0QXZhdGFyRnJvbURPTSgpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcclxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5jb25maWcuZW5hYmxlRE9NRGV0ZWN0aW9uID8gZ2V0U2ltcGxlVXNlckF2YXRhcigpIDogbnVsbCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDku47lhajlsYDlj5jph4/ojrflj5blpLTlg49cclxuICAgKi9cclxuICBwcml2YXRlIGdldEF2YXRhckZyb21HbG9iYWxWYXJzKCk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZ2xvYmFsQXZhdGFyVmFycyA9IFtcclxuICAgICAgICAoKSA9PiAod2luZG93IGFzIGFueSkucG93ZXJfdXNlcj8uYXZhdGFyLFxyXG4gICAgICAgICgpID0+ICh3aW5kb3cgYXMgYW55KS51c2VyX2F2YXRhcixcclxuICAgICAgICAoKSA9PiAod2luZG93IGFzIGFueSkuc2V0dGluZ3M/LnVzZXJfYXZhdGFyLFxyXG4gICAgICAgICgpID0+ICh3aW5kb3cgYXMgYW55KS5jaGF0X21ldGFkYXRhPy51c2VyX2F2YXRhcixcclxuICAgICAgICAoKSA9PiAod2luZG93IGFzIGFueSkucGVyc29uYT8uYXZhdGFyLFxyXG4gICAgICBdO1xyXG5cclxuICAgICAgZm9yIChjb25zdCBnZXRWYXIgb2YgZ2xvYmFsQXZhdGFyVmFycykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IGdldFZhcigpO1xyXG4gICAgICAgICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUudHJpbSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodmFsdWUudHJpbSgpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAvLyDlv73nlaXorr/pl67plJnor6/vvIznu6fnu63lsJ3or5XkuIvkuIDkuKpcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLmxvZyhg5LuO5YWo5bGA5Y+Y6YeP6I635Y+W5aS05YOP5aSx6LSlOiAke2Vycm9yfWApO1xyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5by65Yi25Yi35paw5aS05YOP57yT5a2YXHJcbiAgICovXHJcbiAgcHVibGljIGFzeW5jIHJlZnJlc2hDYWNoZSgpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgdGhpcy5sb2coJ+W8uuWItuWIt+aWsOWktOWDj+e8k+WtmCcpO1xyXG4gICAgdGhpcy5jYWNoZS5jbGVhcigpO1xyXG4gICAgY29uc3QgbmV3QXZhdGFyID0gYXdhaXQgdGhpcy5nZXRDdXJyZW50QXZhdGFyKCk7XHJcbiAgICB0aGlzLmxhc3RLbm93bkF2YXRhciA9IG5ld0F2YXRhcjtcclxuICAgIHJldHVybiBuZXdBdmF0YXI7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bmnIDlkI7lt7Lnn6XnmoTlpLTlg49cclxuICAgKi9cclxuICBwdWJsaWMgZ2V0TGFzdEtub3duQXZhdGFyKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5sYXN0S25vd25BdmF0YXIgfHwgdGhpcy5jb25maWcuZGVmYXVsdEF2YXRhclVybDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOajgOafpeWktOWDj+aYr+WQpuWPkeeUn+WPmOWMllxyXG4gICAqL1xyXG4gIHB1YmxpYyBhc3luYyBoYXNBdmF0YXJDaGFuZ2VkKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgY29uc3QgY3VycmVudEF2YXRhciA9IGF3YWl0IHRoaXMuZ2V0Q3VycmVudEF2YXRhcigpO1xyXG4gICAgY29uc3QgY2hhbmdlZCA9IGN1cnJlbnRBdmF0YXIgIT09IHRoaXMubGFzdEtub3duQXZhdGFyO1xyXG4gICAgaWYgKGNoYW5nZWQpIHtcclxuICAgICAgdGhpcy5sb2coYOWktOWDj+W3suWPmOWMljogJHt0aGlzLmxhc3RLbm93bkF2YXRhcn0gLT4gJHtjdXJyZW50QXZhdGFyfWApO1xyXG4gICAgICB0aGlzLmxhc3RLbm93bkF2YXRhciA9IGN1cnJlbnRBdmF0YXI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2hhbmdlZDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluWktOWDj+iOt+WPlue7n+iuoeS/oeaBr1xyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRTdGF0cygpOiB7XHJcbiAgICBjYWNoZVNpemU6IG51bWJlcjtcclxuICAgIGxhc3RLbm93bkF2YXRhcjogc3RyaW5nO1xyXG4gICAgY2FjaGVFbnRyaWVzOiBBcnJheTx7IHNvdXJjZTogc3RyaW5nOyB1cmw6IHN0cmluZzsgYWdlOiBudW1iZXIgfT47XHJcbiAgfSB7XHJcbiAgICBjb25zdCBjYWNoZUVudHJpZXMgPSBBcnJheS5mcm9tKHRoaXMuY2FjaGUuZW50cmllcygpKS5tYXAoKFtrZXksIGVudHJ5XSkgPT4gKHtcclxuICAgICAgc291cmNlOiBlbnRyeS5zb3VyY2UsXHJcbiAgICAgIHVybDogZW50cnkudXJsLFxyXG4gICAgICBhZ2U6IERhdGUubm93KCkgLSBlbnRyeS50aW1lc3RhbXAsXHJcbiAgICB9KSk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgY2FjaGVTaXplOiB0aGlzLmNhY2hlLnNpemUsXHJcbiAgICAgIGxhc3RLbm93bkF2YXRhcjogdGhpcy5sYXN0S25vd25BdmF0YXIsXHJcbiAgICAgIGNhY2hlRW50cmllcyxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmuIXnkIbov4fmnJ/nvJPlrZhcclxuICAgKi9cclxuICBwdWJsaWMgY2xlYW51cEV4cGlyZWRDYWNoZSgpOiBudW1iZXIge1xyXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgIGxldCBjbGVhbmVkQ291bnQgPSAwO1xyXG5cclxuICAgIGZvciAoY29uc3QgW2tleSwgZW50cnldIG9mIHRoaXMuY2FjaGUuZW50cmllcygpKSB7XHJcbiAgICAgIGlmIChub3cgLSBlbnRyeS50aW1lc3RhbXAgPiB0aGlzLmNvbmZpZy5jYWNoZVRpbWVvdXQpIHtcclxuICAgICAgICB0aGlzLmNhY2hlLmRlbGV0ZShrZXkpO1xyXG4gICAgICAgIGNsZWFuZWRDb3VudCsrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNsZWFuZWRDb3VudCA+IDApIHtcclxuICAgICAgdGhpcy5sb2coYOa4heeQhuS6hiAke2NsZWFuZWRDb3VudH0g5Liq6L+H5pyf57yT5a2Y5p2h55uuYCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNsZWFuZWRDb3VudDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOabtOaWsOmFjee9rlxyXG4gICAqL1xyXG4gIHB1YmxpYyB1cGRhdGVDb25maWcobmV3Q29uZmlnOiBQYXJ0aWFsPEF2YXRhclNvdXJjZUNvbmZpZz4pOiB2b2lkIHtcclxuICAgIHRoaXMuY29uZmlnID0geyAuLi50aGlzLmNvbmZpZywgLi4ubmV3Q29uZmlnIH07XHJcbiAgICB0aGlzLnVzZXJJbmZvUmV0cmlldmFsLnVwZGF0ZU9wdGlvbnMoe1xyXG4gICAgICBkZWZhdWx0QXZhdGFyVXJsOiB0aGlzLmNvbmZpZy5kZWZhdWx0QXZhdGFyVXJsLFxyXG4gICAgICBlbmFibGVMb2dnaW5nOiB0aGlzLmNvbmZpZy5kZWJ1ZyxcclxuICAgIH0pO1xyXG4gICAgdGhpcy5sb2coJ+mFjee9ruW3suabtOaWsCcpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6ZSA5q+B5pyN5YqhXHJcbiAgICovXHJcbiAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICB0aGlzLmNhY2hlLmNsZWFyKCk7XHJcbiAgICB0aGlzLmxvZygnQXZhdGFyU291cmNlU2VydmljZeW3sumUgOavgScpO1xyXG4gICAgQXZhdGFyU291cmNlU2VydmljZS5pbnN0YW5jZSA9IG51bGwgYXMgYW55O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5pel5b+X6L6T5Ye6XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBsb2cobWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5jb25maWcuZGVidWcpIHtcclxuICAgICAgY29uc29sZS5sb2coYFtBdmF0YXJTb3VyY2VTZXJ2aWNlXSAke21lc3NhZ2V9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4vLyDlr7zlh7rlhajlsYDlrp7kvosgLSDnpoHnlKjosIPor5Xml6Xlv5dcclxuZXhwb3J0IGNvbnN0IGF2YXRhclNvdXJjZVNlcnZpY2UgPSBBdmF0YXJTb3VyY2VTZXJ2aWNlLmdldEluc3RhbmNlKHsgZGVidWc6IGZhbHNlIH0pO1xyXG5cclxuLyoqXHJcbiAqIOS+v+aNt+WHveaVsO+8muiOt+WPluW9k+WJjeWktOWDj1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEN1cnJlbnRVc2VyQXZhdGFyKCk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgcmV0dXJuIGF2YXRhclNvdXJjZVNlcnZpY2UuZ2V0Q3VycmVudEF2YXRhcigpO1xyXG59XHJcblxyXG4vKipcclxuICog5L6/5o235Ye95pWw77ya6I635Y+W57yT5a2Y5aS05YOPXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2FjaGVkVXNlckF2YXRhcigpOiBzdHJpbmcgfCBudWxsIHtcclxuICByZXR1cm4gYXZhdGFyU291cmNlU2VydmljZS5nZXRDYWNoZWRBdmF0YXIoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOS+v+aNt+WHveaVsO+8muiuvue9rue8k+WtmOWktOWDj1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldENhY2hlZFVzZXJBdmF0YXIoYXZhdGFyVXJsOiBzdHJpbmcsIHNvdXJjZTogQXZhdGFyU291cmNlID0gQXZhdGFyU291cmNlLkNBQ0hFKTogdm9pZCB7XHJcbiAgYXZhdGFyU291cmNlU2VydmljZS5zZXRDYWNoZWRBdmF0YXIoYXZhdGFyVXJsLCBzb3VyY2UpO1xyXG59XHJcblxyXG4vKipcclxuICog5L6/5o235Ye95pWw77ya5Yi35paw5aS05YOP57yT5a2YXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVmcmVzaFVzZXJBdmF0YXJDYWNoZSgpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gIHJldHVybiBhdmF0YXJTb3VyY2VTZXJ2aWNlLnJlZnJlc2hDYWNoZSgpO1xyXG59XHJcblxyXG4vLyDlo7DmmI7lhajlsYDlh73mlbBcclxuZGVjbGFyZSBmdW5jdGlvbiB0cmlnZ2VyU2xhc2goY29tbWFuZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+O1xyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/utils/AvatarSourceService.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/utils/AvatarSync.ts": 
  /*!*******************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/utils/AvatarSync.ts ***!
  \*******************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AvatarSync: () => (/* binding */ AvatarSync),\n/* harmony export */   SimpleAvatarMixin: () => (/* binding */ SimpleAvatarMixin),\n/* harmony export */   autoRegisterAvatars: () => (/* binding */ autoRegisterAvatars),\n/* harmony export */   avatarSync: () => (/* binding */ avatarSync),\n/* harmony export */   cleanupInvalidAvatarElements: () => (/* binding */ cleanupInvalidAvatarElements),\n/* harmony export */   forceUpdateAvatars: () => (/* binding */ forceUpdateAvatars),\n/* harmony export */   getAvatarSyncDebugInfo: () => (/* binding */ getAvatarSyncDebugInfo),\n/* harmony export */   getMemberAvatarStats: () => (/* binding */ getMemberAvatarStats),\n/* harmony export */   registerAvatarElement: () => (/* binding */ registerAvatarElement),\n/* harmony export */   registerMemberAvatarElement: () => (/* binding */ registerMemberAvatarElement),\n/* harmony export */   syncAvatars: () => (/* binding */ syncAvatars)\n/* harmony export */ });\n/* harmony import */ var _userInfoRetrieval__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./userInfoRetrieval */ \"./src/多云熊/备份/给rovo的/modules/utils/userInfoRetrieval.ts\");\n/* harmony import */ var _AvatarSourceService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AvatarSourceService */ \"./src/多云熊/备份/给rovo的/modules/utils/AvatarSourceService.ts\");\n/**\n * 增强的头像同步管理器\n * 基于现有的 userInfoRetrieval.ts 实现全局头像同步\n * 支持member-avatar类型元素的智能识别和同步\n */\n\n\n/**\n * 增强的头像同步管理器\n */\nclass AvatarSync {\n    static instance;\n    currentAvatar = '';\n    registeredElements = new Map();\n    memberElements = new Map();\n    options;\n    syncTimer = null;\n    mutationObserver = null;\n    discoveryDebounceTimer = null;\n    isDestroyed = false;\n    isInternalOperation = false; // 标记是否正在进行内部操作\n    constructor(options = {}) {\n        this.options = {\n            debug: options.debug ?? false,\n            syncInterval: options.syncInterval ?? 1000, // 1秒检查一次\n            enableMutationObserver: options.enableMutationObserver ?? true,\n            discoveryDebounceDelay: options.discoveryDebounceDelay ?? 300,\n            enablePeriodicSync: options.enablePeriodicSync ?? false, // 默认禁用定时同步\n        };\n        this.log('增强的头像同步管理器已初始化');\n        this.initialize();\n    }\n    /**\n     * 初始化管理器\n     */\n    initialize() {\n        // 只在启用定时同步时才启动定时器\n        if (this.options.enablePeriodicSync) {\n            this.startSync();\n        }\n        else {\n            // 只执行一次初始同步，不启动定时器\n            this.sync();\n        }\n        this.setupMutationObserver();\n        this.performInitialDiscovery();\n    }\n    /**\n     * 获取单例实例\n     */\n    static getInstance(options) {\n        if (!AvatarSync.instance) {\n            AvatarSync.instance = new AvatarSync(options);\n        }\n        return AvatarSync.instance;\n    }\n    /**\n     * 注册需要同步的头像元素（增强版本）\n     */\n    registerElement(element, config = 'background') {\n        if (this.isDestroyed)\n            return;\n        // 检查是否已经注册，避免重复注册\n        if (this.registeredElements.has(element)) {\n            this.log(`元素已经注册，跳过: ${element.className || element.tagName}`);\n            return;\n        }\n        // 向后兼容：如果传入的是字符串，转换为ElementConfig\n        const elementConfig = typeof config === 'string' ? { type: config } : config;\n        // 验证元素\n        if (elementConfig.validator && !elementConfig.validator(element)) {\n            this.log(`元素验证失败，跳过注册: ${element.className || element.tagName}`);\n            return;\n        }\n        // 设置元素属性（在内部操作标志下进行，避免触发 MutationObserver）\n        this.withInternalOperation(() => {\n            element.setAttribute('data-avatar-sync', 'true');\n            element.setAttribute('data-avatar-type', elementConfig.type);\n            if (elementConfig.memberId) {\n                element.setAttribute('data-member-id', elementConfig.memberId);\n            }\n        });\n        // 创建注册信息\n        const registeredInfo = {\n            element,\n            config: elementConfig,\n            lastUpdate: Date.now(),\n            isValid: true,\n        };\n        this.registeredElements.set(element, registeredInfo);\n        // 如果是member-avatar类型，添加到成员元素映射\n        if (elementConfig.type === 'member-avatar' && elementConfig.memberId) {\n            if (!this.memberElements.has(elementConfig.memberId)) {\n                this.memberElements.set(elementConfig.memberId, new Set());\n            }\n            this.memberElements.get(elementConfig.memberId).add(element);\n        }\n        // 立即同步当前头像\n        this.updateElement(element, elementConfig, this.currentAvatar || this.getUnifiedUserAvatarSyncLocal());\n        this.log(`已注册头像元素: ${element.className || element.tagName} (类型: ${elementConfig.type})`);\n    }\n    /**\n     * 取消注册头像元素\n     */\n    unregisterElement(element) {\n        const registeredInfo = this.registeredElements.get(element);\n        if (registeredInfo) {\n            // 从成员元素映射中移除\n            if (registeredInfo.config.type === 'member-avatar' && registeredInfo.config.memberId) {\n                const memberSet = this.memberElements.get(registeredInfo.config.memberId);\n                if (memberSet) {\n                    memberSet.delete(element);\n                    if (memberSet.size === 0) {\n                        this.memberElements.delete(registeredInfo.config.memberId);\n                    }\n                }\n            }\n        }\n        // 清理元素属性（在内部操作标志下进行，避免触发 MutationObserver）\n        this.withInternalOperation(() => {\n            element.removeAttribute('data-avatar-sync');\n            element.removeAttribute('data-avatar-type');\n            element.removeAttribute('data-member-id');\n        });\n        this.registeredElements.delete(element);\n        this.log(`已取消注册头像元素: ${element.className || element.tagName}`);\n    }\n    /**\n     * 自动发现并注册页面中的用户头像元素（增强版本）\n     */\n    autoRegister() {\n        if (this.isDestroyed)\n            return;\n        let registeredCount = 0;\n        // 1. 注册普通用户头像元素\n        registeredCount += this.registerUserAvatarElements();\n        // 2. 注册member-avatar类型元素\n        registeredCount += this.registerMemberAvatarElements();\n        // 3. 注册特殊界面的头像元素\n        registeredCount += this.registerSpecialAvatarElements();\n        if (registeredCount > 0) {\n            this.log(`自动注册了 ${registeredCount} 个头像元素`);\n        }\n    }\n    /**\n     * 注册普通用户头像元素\n     */\n    registerUserAvatarElements() {\n        const selectors = [\n            '.user_avatar.avatar.avatar-hover', // 聊天框用户头像\n            '.user-avatar', // 通用用户头像\n            '.user_avatar', // 用户头像（备用）\n        ];\n        let count = 0;\n        selectors.forEach(selector => {\n            const elements = document.querySelectorAll(selector);\n            elements.forEach(element => {\n                const htmlElement = element;\n                if (!htmlElement.hasAttribute('data-avatar-sync') && this.isUserAvatarElement(htmlElement)) {\n                    const type = htmlElement.tagName === 'IMG' ? 'img' : 'background';\n                    this.registerElement(htmlElement, { type });\n                    count++;\n                }\n            });\n        });\n        return count;\n    }\n    /**\n     * 判断元素是否为用户头像元素（避免误注册角色头像）\n     */\n    isUserAvatarElement(element) {\n        // 检查元素是否在聊天列表中（聊天列表中的头像不应该被同步）\n        const chatListContainer = element.closest('.chat-list, .chatlist, .contact-list');\n        if (chatListContainer) {\n            return false; // 聊天列表中的头像不是用户头像\n        }\n        // 检查元素是否在群聊头像区域\n        const groupAvatarContainer = element.closest('.group-avatar, .chat-avatar, .contact-avatar');\n        if (groupAvatarContainer) {\n            return false; // 群聊或联系人头像不是用户头像\n        }\n        // 检查元素的类名，排除明显的角色头像\n        const className = element.className.toLowerCase();\n        const excludePatterns = [\n            'character-avatar',\n            'char-avatar',\n            'contact-avatar',\n            'chat-avatar',\n            'group-avatar',\n            'bot-avatar',\n            'ai-avatar',\n        ];\n        if (excludePatterns.some(pattern => className.includes(pattern))) {\n            return false;\n        }\n        // 检查父元素，确保不在角色相关的容器中\n        const parentContainer = element.closest('[data-character], [data-char], [data-contact], .character-item, .contact-item, .chat-item');\n        if (parentContainer) {\n            // 如果父容器明确标识为用户相关，则允许\n            const isUserContainer = parentContainer.hasAttribute('data-user') ||\n                parentContainer.classList.contains('user-item') ||\n                parentContainer.classList.contains('profile-item');\n            return isUserContainer;\n        }\n        return true; // 默认认为是用户头像\n    }\n    /**\n     * 注册member-avatar类型元素\n     */\n    registerMemberAvatarElements() {\n        const memberAvatars = document.querySelectorAll('.member-avatar');\n        let count = 0;\n        memberAvatars.forEach(element => {\n            const htmlElement = element;\n            if (!htmlElement.hasAttribute('data-avatar-sync')) {\n                const memberId = htmlElement.getAttribute('data-member-id') ||\n                    htmlElement.getAttribute('data-member') ||\n                    this.extractMemberIdFromElement(htmlElement);\n                // 只注册用户自己的头像\n                if (this.isUserMemberId(memberId)) {\n                    const config = {\n                        type: 'member-avatar',\n                        memberId: memberId || undefined,\n                        validator: el => this.validateMemberAvatarElement(el),\n                    };\n                    this.registerElement(htmlElement, config);\n                    count++;\n                }\n            }\n        });\n        return count;\n    }\n    /**\n     * 注册特殊界面的头像元素\n     */\n    registerSpecialAvatarElements() {\n        const specialSelectors = [\n            '#avatarImage', // \"我的\"界面头像图片\n            '.profile-avatar', // 个人资料头像\n        ];\n        let count = 0;\n        specialSelectors.forEach(selector => {\n            const elements = document.querySelectorAll(selector);\n            elements.forEach(element => {\n                const htmlElement = element;\n                if (!htmlElement.hasAttribute('data-avatar-sync')) {\n                    const type = htmlElement.tagName === 'IMG' ? 'img' : 'background';\n                    this.registerElement(htmlElement, { type, priority: 1 }); // 高优先级\n                    count++;\n                }\n            });\n        });\n        return count;\n    }\n    /**\n     * 从元素中提取成员ID\n     */\n    extractMemberIdFromElement(element) {\n        // 尝试从各种可能的属性中获取成员ID\n        const possibleAttributes = ['data-member-id', 'data-member', 'data-user-id', 'data-user'];\n        for (const attr of possibleAttributes) {\n            const value = element.getAttribute(attr);\n            if (value) {\n                return value;\n            }\n        }\n        // 尝试从父元素获取\n        const parent = element.closest('[data-member-id], [data-member], [data-user-id], [data-user]');\n        if (parent) {\n            for (const attr of possibleAttributes) {\n                const value = parent.getAttribute(attr);\n                if (value) {\n                    return value;\n                }\n            }\n        }\n        return null;\n    }\n    /**\n     * 判断成员ID是否为用户自己\n     */\n    isUserMemberId(memberId) {\n        if (!memberId)\n            return false;\n        const userIds = ['{{user}}', 'user', 'User', 'USER'];\n        return userIds.includes(memberId);\n    }\n    /**\n     * 验证member-avatar元素的有效性\n     */\n    validateMemberAvatarElement(element) {\n        // 检查元素是否在DOM中\n        if (!document.contains(element)) {\n            return false;\n        }\n        // 检查元素是否可见\n        const style = window.getComputedStyle(element);\n        if (style.display === 'none' || style.visibility === 'hidden') {\n            return false;\n        }\n        // 检查元素是否有有效的成员ID\n        const memberId = element.getAttribute('data-member-id') || this.extractMemberIdFromElement(element);\n        return this.isUserMemberId(memberId);\n    }\n    /**\n     * 手动触发头像同步\n     */\n    sync() {\n        if (this.isDestroyed)\n            return;\n        const newAvatar = this.getUnifiedUserAvatarSyncLocal();\n        // 只有头像发生变化时才更新\n        if (newAvatar !== this.currentAvatar) {\n            this.log(`头像已更新: ${this.currentAvatar} -> ${newAvatar}`);\n            this.currentAvatar = newAvatar;\n            this.updateAllElements(newAvatar);\n        }\n    }\n    /**\n     * 强制更新所有头像元素\n     */\n    forceUpdate(newAvatarUrl) {\n        if (this.isDestroyed)\n            return;\n        const avatar = newAvatarUrl ?? this.getUnifiedUserAvatarSyncLocal();\n        this.currentAvatar = avatar;\n        this.updateAllElements(avatar);\n        this.log(`已强制更新所有头像元素 (URL: ${newAvatarUrl ? 'provided' : 'fetched'})`);\n    }\n    /**\n     * 更新单个头像元素（增强版本）\n     */\n    updateElement(element, config, avatarUrl) {\n        try {\n            // 对于member-avatar类型，只更新用户自己的头像\n            if (config.type === 'member-avatar') {\n                if (!this.isUserMemberId(config.memberId || null)) {\n                    return; // 不是用户自己的头像，跳过更新\n                }\n            }\n            // 根据类型更新元素\n            switch (config.type) {\n                case 'img':\n                    if (element.tagName === 'IMG') {\n                        element.src = avatarUrl;\n                    }\n                    break;\n                case 'background':\n                    element.style.backgroundImage = `url(${avatarUrl})`;\n                    break;\n                case 'member-avatar':\n                    // member-avatar可能是img或background\n                    if (element.tagName === 'IMG') {\n                        element.src = avatarUrl;\n                    }\n                    else {\n                        element.style.backgroundImage = `url(${avatarUrl})`;\n                    }\n                    break;\n                default:\n                    // 默认使用background方式\n                    element.style.backgroundImage = `url(${avatarUrl})`;\n            }\n            // 更新最后更新时间\n            const registeredInfo = this.registeredElements.get(element);\n            if (registeredInfo) {\n                registeredInfo.lastUpdate = Date.now();\n            }\n        }\n        catch (error) {\n            this.log(`更新头像元素失败: ${error}`);\n            // 标记元素为无效\n            const registeredInfo = this.registeredElements.get(element);\n            if (registeredInfo) {\n                registeredInfo.isValid = false;\n            }\n        }\n    }\n    /**\n     * 更新所有头像元素\n     */\n    updateAllElements(avatarUrl) {\n        const elementsToRemove = [];\n        const elementsToUpdate = [];\n        // 收集需要更新和清理的元素\n        this.registeredElements.forEach((registeredInfo, element) => {\n            if (!document.contains(element) || !registeredInfo.isValid) {\n                elementsToRemove.push(element);\n            }\n            else {\n                // 重新验证元素（如果有验证器）\n                if (registeredInfo.config.validator) {\n                    if (!registeredInfo.config.validator(element)) {\n                        elementsToRemove.push(element);\n                    }\n                    else {\n                        elementsToUpdate.push({ element, config: registeredInfo.config });\n                    }\n                }\n                else {\n                    elementsToUpdate.push({ element, config: registeredInfo.config });\n                }\n            }\n        });\n        // 按优先级排序更新\n        elementsToUpdate.sort((a, b) => (a.config.priority || 999) - (b.config.priority || 999));\n        // 更新有效元素\n        elementsToUpdate.forEach(({ element, config }) => {\n            this.updateElement(element, config, avatarUrl);\n        });\n        // 清理无效元素\n        elementsToRemove.forEach(element => {\n            this.unregisterElement(element);\n        });\n        if (elementsToRemove.length > 0) {\n            this.log(`清理了 ${elementsToRemove.length} 个无效的头像元素`);\n        }\n        if (elementsToUpdate.length > 0) {\n            this.log(`更新了 ${elementsToUpdate.length} 个头像元素`);\n        }\n    }\n    /**\n     * 开始自动同步\n     */\n    startSync() {\n        if (this.isDestroyed || this.syncTimer !== null)\n            return;\n        // 立即执行一次同步\n        this.sync();\n        // 启用定时同步（降低频率，避免性能问题）\n        this.syncTimer = window.setInterval(() => {\n            this.sync();\n            this.performPeriodicMaintenance();\n        }, this.options.syncInterval);\n        this.log('自动同步已启动');\n    }\n    /**\n     * 执行定期维护\n     */\n    performPeriodicMaintenance() {\n        // 清理无效元素\n        this.cleanupInvalidElements();\n        // 重新发现新元素（防抖）\n        this.debouncedAutoRegister();\n    }\n    /**\n     * 防抖的自动注册\n     */\n    debouncedAutoRegister() {\n        if (this.discoveryDebounceTimer !== null) {\n            clearTimeout(this.discoveryDebounceTimer);\n        }\n        this.discoveryDebounceTimer = window.setTimeout(() => {\n            this.autoRegister();\n            this.discoveryDebounceTimer = null;\n        }, this.options.discoveryDebounceDelay);\n    }\n    /**\n     * 清理无效元素\n     */\n    cleanupInvalidElements() {\n        const elementsToRemove = [];\n        this.registeredElements.forEach((registeredInfo, element) => {\n            if (!document.contains(element) || !registeredInfo.isValid) {\n                elementsToRemove.push(element);\n            }\n        });\n        elementsToRemove.forEach(element => {\n            this.unregisterElement(element);\n        });\n        if (elementsToRemove.length > 0) {\n            this.log(`定期清理了 ${elementsToRemove.length} 个无效元素`);\n        }\n    }\n    /**\n     * 执行初始发现\n     */\n    performInitialDiscovery() {\n        // 延迟执行，确保DOM已完全加载\n        setTimeout(() => {\n            this.autoRegister();\n        }, 100);\n    }\n    /**\n     * 停止自动同步\n     */\n    stopSync() {\n        if (this.syncTimer !== null) {\n            clearInterval(this.syncTimer);\n            this.syncTimer = null;\n            this.log('自动同步已停止');\n        }\n        if (this.discoveryDebounceTimer !== null) {\n            clearTimeout(this.discoveryDebounceTimer);\n            this.discoveryDebounceTimer = null;\n        }\n    }\n    /**\n     * 设置DOM变化监听器\n     */\n    setupMutationObserver() {\n        if (!this.options.enableMutationObserver || typeof MutationObserver === 'undefined') {\n            return;\n        }\n        this.mutationObserver = new MutationObserver(mutations => {\n            // 如果正在进行内部操作，忽略所有变化\n            if (this.isInternalOperation) {\n                return;\n            }\n            let shouldAutoRegister = false;\n            mutations.forEach(mutation => {\n                // 检查新增的节点\n                if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {\n                    mutation.addedNodes.forEach(node => {\n                        if (node.nodeType === Node.ELEMENT_NODE) {\n                            const element = node;\n                            // 检查是否包含头像相关的元素\n                            if (this.containsAvatarElements(element)) {\n                                shouldAutoRegister = true;\n                            }\n                        }\n                    });\n                }\n            });\n            if (shouldAutoRegister) {\n                this.debouncedAutoRegister();\n            }\n        });\n        // 开始观察（暂时只监听DOM结构变化，不监听属性变化）\n        this.mutationObserver.observe(document.body, {\n            childList: true,\n            subtree: true,\n            // attributes: true,  // 暂时禁用属性监听\n            // attributeFilter: ['data-member-id', 'data-member', 'data-user-id', 'class'],\n        });\n        this.log('DOM变化监听器已启动');\n    }\n    /**\n     * 检查元素是否包含头像相关的子元素\n     */\n    containsAvatarElements(element) {\n        const avatarSelectors = [\n            '.user_avatar',\n            '.user-avatar',\n            '.member-avatar',\n            '.profile-avatar',\n            '.chat-avatar',\n            '[data-member-id]',\n            '#avatarImage',\n        ];\n        return avatarSelectors.some(selector => {\n            return (element.matches && element.matches(selector)) || element.querySelector(selector);\n        });\n    }\n    /**\n     * 停止DOM变化监听器\n     */\n    stopMutationObserver() {\n        if (this.mutationObserver) {\n            this.mutationObserver.disconnect();\n            this.mutationObserver = null;\n            this.log('DOM变化监听器已停止');\n        }\n    }\n    /**\n     * 销毁管理器\n     */\n    destroy() {\n        this.isDestroyed = true;\n        this.stopSync();\n        this.stopMutationObserver();\n        // 清理所有注册的元素\n        this.registeredElements.forEach((registeredInfo, element) => {\n            element.removeAttribute('data-avatar-sync');\n            element.removeAttribute('data-avatar-type');\n            element.removeAttribute('data-member-id');\n        });\n        this.registeredElements.clear();\n        this.memberElements.clear();\n        this.log('增强的头像同步管理器已销毁');\n        AvatarSync.instance = null;\n    }\n    /**\n     * 获取调试信息\n     */\n    getDebugInfo() {\n        const elementsByType = {};\n        const memberElementsCount = {};\n        this.registeredElements.forEach(registeredInfo => {\n            const type = registeredInfo.config.type;\n            elementsByType[type] = (elementsByType[type] || 0) + 1;\n        });\n        this.memberElements.forEach((elements, memberId) => {\n            memberElementsCount[memberId] = elements.size;\n        });\n        return {\n            currentAvatar: this.currentAvatar,\n            totalRegisteredElements: this.registeredElements.size,\n            elementsByType,\n            memberElementsCount,\n            isDestroyed: this.isDestroyed,\n            options: this.options,\n            hasMutationObserver: !!this.mutationObserver,\n            hasActiveTimer: !!this.syncTimer,\n        };\n    }\n    /**\n     * 获取注册的元素列表（用于调试）\n     */\n    getRegisteredElements() {\n        const result = [];\n        this.registeredElements.forEach((registeredInfo, element) => {\n            result.push({\n                element,\n                config: registeredInfo.config,\n                lastUpdate: registeredInfo.lastUpdate,\n                isValid: registeredInfo.isValid,\n                className: element.className,\n                tagName: element.tagName,\n            });\n        });\n        return result;\n    }\n    /**\n     * 获取成员头像统计\n     */\n    getMemberAvatarStats() {\n        const stats = {};\n        this.memberElements.forEach((elements, memberId) => {\n            stats[memberId] = {\n                count: elements.size,\n                elements: Array.from(elements),\n            };\n        });\n        return stats;\n    }\n    /**\n     * 在内部操作期间执行函数，暂停 MutationObserver 处理\n     */\n    withInternalOperation(operation) {\n        const wasInternalOperation = this.isInternalOperation;\n        this.isInternalOperation = true;\n        try {\n            return operation();\n        }\n        finally {\n            this.isInternalOperation = wasInternalOperation;\n        }\n    }\n    /**\n     * 本地版本的统一头像获取函数\n     * 避免循环依赖问题\n     */\n    getUnifiedUserAvatarSyncLocal() {\n        try {\n            // 优先从GlobalUserManager获取持久化的头像数据\n            const { GlobalUserManager } = __webpack_require__(/*! ../profile/GlobalUserManager */ \"./src/多云熊/备份/给rovo的/modules/profile/GlobalUserManager.ts\");\n            const globalUserManager = GlobalUserManager.getInstance();\n            const userData = globalUserManager.getCurrentUserData();\n            // 如果有自定义头像数据，优先使用\n            if (userData?.isCustom && userData.avatar) {\n                return userData.avatar;\n            }\n            // 尝试从缓存获取\n            const cached = (0,_AvatarSourceService__WEBPACK_IMPORTED_MODULE_1__.getCachedUserAvatar)();\n            if (cached) {\n                return cached;\n            }\n            // 使用简化的头像获取\n            const simple = (0,_userInfoRetrieval__WEBPACK_IMPORTED_MODULE_0__.getSimpleUserAvatar)();\n            if (simple && simple !== 'https://files.catbox.moe/u8ccy5.jpg') {\n                return simple;\n            }\n            // 使用传统的头像获取\n            return (0,_userInfoRetrieval__WEBPACK_IMPORTED_MODULE_0__.getUserAvatar)();\n        }\n        catch (error) {\n            console.warn('[AvatarSync.getUnifiedUserAvatarSyncLocal] 获取头像失败:', error);\n            return 'https://files.catbox.moe/u8ccy5.jpg';\n        }\n    }\n    /**\n     * 日志输出\n     */\n    log(message) {\n        if (this.options.debug) {\n            console.log(`[AvatarSync] ${message}`);\n        }\n    }\n}\n/**\n * 便捷的头像同步混入类\n */\nclass SimpleAvatarMixin {\n    avatarSync;\n    registeredElements = new Set();\n    constructor(options) {\n        this.avatarSync = AvatarSync.getInstance(options);\n    }\n    /**\n     * 注册头像元素\n     */\n    register(element, config) {\n        this.avatarSync.registerElement(element, config || 'background');\n        this.registeredElements.add(element);\n    }\n    /**\n     * 取消注册头像元素\n     */\n    unregister(element) {\n        this.avatarSync.unregisterElement(element);\n        this.registeredElements.delete(element);\n    }\n    /**\n     * 自动注册页面中的头像元素\n     */\n    autoRegister() {\n        this.avatarSync.autoRegister();\n    }\n    /**\n     * 强制更新头像\n     */\n    forceUpdate() {\n        this.avatarSync.forceUpdate();\n    }\n    /**\n     * 销毁混入\n     */\n    destroy() {\n        this.registeredElements.forEach(element => {\n            this.avatarSync.unregisterElement(element);\n        });\n        this.registeredElements.clear();\n    }\n}\n// 导出全局实例 - 禁用定时同步和调试日志，使用事件驱动\nconst avatarSync = AvatarSync.getInstance({\n    debug: false,\n    enablePeriodicSync: false,\n});\n/**\n * 便捷函数：注册头像元素\n */\nfunction registerAvatarElement(element, config) {\n    avatarSync.registerElement(element, config);\n}\n/**\n * 便捷函数：自动注册页面中的头像元素\n */\nfunction autoRegisterAvatars() {\n    avatarSync.autoRegister();\n}\n/**\n * 便捷函数：强制更新所有头像\n */\nfunction forceUpdateAvatars(newAvatarUrl) {\n    avatarSync.forceUpdate(newAvatarUrl);\n}\n/**\n * 便捷函数：手动同步头像\n */\nfunction syncAvatars() {\n    avatarSync.sync();\n}\n/**\n * 便捷函数：注册member-avatar元素\n */\nfunction registerMemberAvatarElement(element, memberId) {\n    const config = {\n        type: 'member-avatar',\n        memberId,\n        validator: el => document.contains(el),\n    };\n    avatarSync.registerElement(element, config);\n}\n/**\n * 便捷函数：获取调试信息\n */\nfunction getAvatarSyncDebugInfo() {\n    return avatarSync.getDebugInfo();\n}\n/**\n * 便捷函数：获取成员头像统计\n */\nfunction getMemberAvatarStats() {\n    return avatarSync.getMemberAvatarStats();\n}\n/**\n * 便捷函数：清理无效元素\n */\nfunction cleanupInvalidAvatarElements() {\n    // 触发一次同步，会自动清理无效元素\n    avatarSync.sync();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvdXRpbHMvQXZhdGFyU3luYy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7R0FJRztBQUVzRTtBQUNiO0FBaUM1RDs7R0FFRztBQUNJLE1BQU0sVUFBVTtJQUNiLE1BQU0sQ0FBQyxRQUFRLENBQWE7SUFDNUIsYUFBYSxHQUFXLEVBQUUsQ0FBQztJQUMzQixrQkFBa0IsR0FBNEMsSUFBSSxHQUFHLEVBQUUsQ0FBQztJQUN4RSxjQUFjLEdBQWtDLElBQUksR0FBRyxFQUFFLENBQUM7SUFDMUQsT0FBTyxDQUE4QjtJQUNyQyxTQUFTLEdBQWtCLElBQUksQ0FBQztJQUNoQyxnQkFBZ0IsR0FBNEIsSUFBSSxDQUFDO0lBQ2pELHNCQUFzQixHQUFrQixJQUFJLENBQUM7SUFDN0MsV0FBVyxHQUFHLEtBQUssQ0FBQztJQUNwQixtQkFBbUIsR0FBRyxLQUFLLENBQUMsQ0FBQyxlQUFlO0lBRXBELFlBQW9CLFVBQTZCLEVBQUU7UUFDakQsSUFBSSxDQUFDLE9BQU8sR0FBRztZQUNiLEtBQUssRUFBRSxPQUFPLENBQUMsS0FBSyxJQUFJLEtBQUs7WUFDN0IsWUFBWSxFQUFFLE9BQU8sQ0FBQyxZQUFZLElBQUksSUFBSSxFQUFFLFNBQVM7WUFDckQsc0JBQXNCLEVBQUUsT0FBTyxDQUFDLHNCQUFzQixJQUFJLElBQUk7WUFDOUQsc0JBQXNCLEVBQUUsT0FBTyxDQUFDLHNCQUFzQixJQUFJLEdBQUc7WUFDN0Qsa0JBQWtCLEVBQUUsT0FBTyxDQUFDLGtCQUFrQixJQUFJLEtBQUssRUFBRSxXQUFXO1NBQ3JFLENBQUM7UUFFRixJQUFJLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDM0IsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO0lBQ3BCLENBQUM7SUFFRDs7T0FFRztJQUNLLFVBQVU7UUFDaEIsa0JBQWtCO1FBQ2xCLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FB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RUQ7O0dBRUc7QUFDSSxTQUFTLG9CQUFvQjtJQUNsQyxPQUFPLFVBQVUsQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO0FBQzNDLENBQUM7QUFFRDs7R0FFRztBQUNJLFNBQVMsNEJBQTRCO0lBQzFDLG1CQUFtQjtJQUNuQixVQUFVLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDcEIsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvdXRpbHMvQXZhdGFyU3luYy50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiDlop7lvLrnmoTlpLTlg4/lkIzmraXnrqHnkIblmahcbiAqIOWfuuS6jueOsOacieeahCB1c2VySW5mb1JldHJpZXZhbC50cyDlrp7njrDlhajlsYDlpLTlg4/lkIzmraVcbiAqIOaUr+aMgW1lbWJlci1hdmF0YXLnsbvlnovlhYPntKDnmoTmmbrog73or4bliKvlkozlkIzmraVcbiAqL1xuXG5pbXBvcnQgeyBnZXRTaW1wbGVVc2VyQXZhdGFyLCBnZXRVc2VyQXZhdGFyIH0gZnJvbSAnLi91c2VySW5mb1JldHJpZXZhbCc7XG5pbXBvcnQgeyBnZXRDYWNoZWRVc2VyQXZhdGFyIH0gZnJvbSAnLi9BdmF0YXJTb3VyY2VTZXJ2aWNlJztcblxuZXhwb3J0IGludGVyZmFjZSBBdmF0YXJTeW5jT3B0aW9ucyB7XG4gIC8qKiDmmK/lkKblkK/nlKjosIPor5Xml6Xlv5cgKi9cbiAgZGVidWc/OiBib29sZWFuO1xuICAvKiog5ZCM5q2l6Ze06ZqU77yI5q+r56eS77yJICovXG4gIHN5bmNJbnRlcnZhbD86IG51bWJlcjtcbiAgLyoqIOaYr+WQpuWQr+eUqERPTeWPmOWMluebkeWQrCAqL1xuICBlbmFibGVNdXRhdGlvbk9ic2VydmVyPzogYm9vbGVhbjtcbiAgLyoqIOWFg+e0oOWPkeeOsOeahOmYsuaKluW7tui/n++8iOavq+enku+8iSAqL1xuICBkaXNjb3ZlcnlEZWJvdW5jZURlbGF5PzogbnVtYmVyO1xuICAvKiog5piv5ZCm5ZCv55So5a6a5pe25ZCM5q2lICovXG4gIGVuYWJsZVBlcmlvZGljU3luYz86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWxlbWVudENvbmZpZyB7XG4gIC8qKiDlhYPntKDnsbvlnosgKi9cbiAgdHlwZTogJ2ltZycgfCAnYmFja2dyb3VuZCcgfCAnbWVtYmVyLWF2YXRhcic7XG4gIC8qKiDmiJDlkZhJRO+8iOeUqOS6jm1lbWJlci1hdmF0YXLnsbvlnovvvIkgKi9cbiAgbWVtYmVySWQ/OiBzdHJpbmc7XG4gIC8qKiDkvJjlhYjnuqfvvIjmlbDlrZfotorlsI/kvJjlhYjnuqfotorpq5jvvIkgKi9cbiAgcHJpb3JpdHk/OiBudW1iZXI7XG4gIC8qKiDlhYPntKDpqozor4Hlh73mlbAgKi9cbiAgdmFsaWRhdG9yPzogKGVsZW1lbnQ6IEhUTUxFbGVtZW50KSA9PiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlZ2lzdGVyZWRFbGVtZW50SW5mbyB7XG4gIGVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICBjb25maWc6IEVsZW1lbnRDb25maWc7XG4gIGxhc3RVcGRhdGU6IG51bWJlcjtcbiAgaXNWYWxpZDogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiDlop7lvLrnmoTlpLTlg4/lkIzmraXnrqHnkIblmahcbiAqL1xuZXhwb3J0IGNsYXNzIEF2YXRhclN5bmMge1xuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogQXZhdGFyU3luYztcbiAgcHJpdmF0ZSBjdXJyZW50QXZhdGFyOiBzdHJpbmcgPSAnJztcbiAgcHJpdmF0ZSByZWdpc3RlcmVkRWxlbWVudHM6IE1hcDxIVE1MRWxlbWVudCwgUmVnaXN0ZXJlZEVsZW1lbnRJbmZvPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBtZW1iZXJFbGVtZW50czogTWFwPHN0cmluZywgU2V0PEhUTUxFbGVtZW50Pj4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgb3B0aW9uczogUmVxdWlyZWQ8QXZhdGFyU3luY09wdGlvbnM+O1xuICBwcml2YXRlIHN5bmNUaW1lcjogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgbXV0YXRpb25PYnNlcnZlcjogTXV0YXRpb25PYnNlcnZlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGRpc2NvdmVyeURlYm91bmNlVGltZXI6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGlzRGVzdHJveWVkID0gZmFsc2U7XG4gIHByaXZhdGUgaXNJbnRlcm5hbE9wZXJhdGlvbiA9IGZhbHNlOyAvLyDmoIforrDmmK/lkKbmraPlnKjov5vooYzlhoXpg6jmk43kvZxcblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKG9wdGlvbnM6IEF2YXRhclN5bmNPcHRpb25zID0ge30pIHtcbiAgICB0aGlzLm9wdGlvbnMgPSB7XG4gICAgICBkZWJ1Zzogb3B0aW9ucy5kZWJ1ZyA/PyBmYWxzZSxcbiAgICAgIHN5bmNJbnRlcnZhbDogb3B0aW9ucy5zeW5jSW50ZXJ2YWwgPz8gMTAwMCwgLy8gMeenkuajgOafpeS4gOasoVxuICAgICAgZW5hYmxlTXV0YXRpb25PYnNlcnZlcjogb3B0aW9ucy5lbmFibGVNdXRhdGlvbk9ic2VydmVyID8/IHRydWUsXG4gICAgICBkaXNjb3ZlcnlEZWJvdW5jZURlbGF5OiBvcHRpb25zLmRpc2NvdmVyeURlYm91bmNlRGVsYXkgPz8gMzAwLFxuICAgICAgZW5hYmxlUGVyaW9kaWNTeW5jOiBvcHRpb25zLmVuYWJsZVBlcmlvZGljU3luYyA/PyBmYWxzZSwgLy8g6buY6K6k56aB55So5a6a5pe25ZCM5q2lXG4gICAgfTtcblxuICAgIHRoaXMubG9nKCflop7lvLrnmoTlpLTlg4/lkIzmraXnrqHnkIblmajlt7LliJ3lp4vljJYnKTtcbiAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliJ3lp4vljJbnrqHnkIblmahcbiAgICovXG4gIHByaXZhdGUgaW5pdGlhbGl6ZSgpOiB2b2lkIHtcbiAgICAvLyDlj6rlnKjlkK/nlKjlrprml7blkIzmraXml7bmiY3lkK/liqjlrprml7blmahcbiAgICBpZiAodGhpcy5vcHRpb25zLmVuYWJsZVBlcmlvZGljU3luYykge1xuICAgICAgdGhpcy5zdGFydFN5bmMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8g5Y+q5omn6KGM5LiA5qyh5Yid5aeL5ZCM5q2l77yM5LiN5ZCv5Yqo5a6a5pe25ZmoXG4gICAgICB0aGlzLnN5bmMoKTtcbiAgICB9XG4gICAgdGhpcy5zZXR1cE11dGF0aW9uT2JzZXJ2ZXIoKTtcbiAgICB0aGlzLnBlcmZvcm1Jbml0aWFsRGlzY292ZXJ5KCk7XG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5Y2V5L6L5a6e5L6LXG4gICAqL1xuICBzdGF0aWMgZ2V0SW5zdGFuY2Uob3B0aW9ucz86IEF2YXRhclN5bmNPcHRpb25zKTogQXZhdGFyU3luYyB7XG4gICAgaWYgKCFBdmF0YXJTeW5jLmluc3RhbmNlKSB7XG4gICAgICBBdmF0YXJTeW5jLmluc3RhbmNlID0gbmV3IEF2YXRhclN5bmMob3B0aW9ucyk7XG4gICAgfVxuICAgIHJldHVybiBBdmF0YXJTeW5jLmluc3RhbmNlO1xuICB9XG5cbiAgLyoqXG4gICAqIOazqOWGjOmcgOimgeWQjOatpeeahOWktOWDj+WFg+e0oO+8iOWinuW8uueJiOacrO+8iVxuICAgKi9cbiAgcmVnaXN0ZXJFbGVtZW50KGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBjb25maWc6IEVsZW1lbnRDb25maWcgfCAnaW1nJyB8ICdiYWNrZ3JvdW5kJyA9ICdiYWNrZ3JvdW5kJyk6IHZvaWQge1xuICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSByZXR1cm47XG5cbiAgICAvLyDmo4Dmn6XmmK/lkKblt7Lnu4/ms6jlhozvvIzpgb/lhY3ph43lpI3ms6jlhoxcbiAgICBpZiAodGhpcy5yZWdpc3RlcmVkRWxlbWVudHMuaGFzKGVsZW1lbnQpKSB7XG4gICAgICB0aGlzLmxvZyhg5YWD57Sg5bey57uP5rOo5YaM77yM6Lez6L+HOiAke2VsZW1lbnQuY2xhc3NOYW1lIHx8IGVsZW1lbnQudGFnTmFtZX1gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyDlkJHlkI7lhbzlrrnvvJrlpoLmnpzkvKDlhaXnmoTmmK/lrZfnrKbkuLLvvIzovazmjaLkuLpFbGVtZW50Q29uZmlnXG4gICAgY29uc3QgZWxlbWVudENvbmZpZzogRWxlbWVudENvbmZpZyA9IHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnID8geyB0eXBlOiBjb25maWcgfSA6IGNvbmZpZztcblxuICAgIC8vIOmqjOivgeWFg+e0oFxuICAgIGlmIChlbGVtZW50Q29uZmlnLnZhbGlkYXRvciAmJiAhZWxlbWVudENvbmZpZy52YWxpZGF0b3IoZWxlbWVudCkpIHtcbiAgICAgIHRoaXMubG9nKGDlhYPntKDpqozor4HlpLHotKXvvIzot7Pov4fms6jlhow6ICR7ZWxlbWVudC5jbGFzc05hbWUgfHwgZWxlbWVudC50YWdOYW1lfWApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIOiuvue9ruWFg+e0oOWxnuaAp++8iOWcqOWGhemDqOaTjeS9nOagh+W/l+S4i+i/m+ihjO+8jOmBv+WFjeinpuWPkSBNdXRhdGlvbk9ic2VydmVy77yJXG4gICAgdGhpcy53aXRoSW50ZXJuYWxPcGVyYXRpb24oKCkgPT4ge1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtYXZhdGFyLXN5bmMnLCAndHJ1ZScpO1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtYXZhdGFyLXR5cGUnLCBlbGVtZW50Q29uZmlnLnR5cGUpO1xuICAgICAgaWYgKGVsZW1lbnRDb25maWcubWVtYmVySWQpIHtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWVtYmVyLWlkJywgZWxlbWVudENvbmZpZy5tZW1iZXJJZCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyDliJvlu7rms6jlhozkv6Hmga9cbiAgICBjb25zdCByZWdpc3RlcmVkSW5mbzogUmVnaXN0ZXJlZEVsZW1lbnRJbmZvID0ge1xuICAgICAgZWxlbWVudCxcbiAgICAgIGNvbmZpZzogZWxlbWVudENvbmZpZyxcbiAgICAgIGxhc3RVcGRhdGU6IERhdGUubm93KCksXG4gICAgICBpc1ZhbGlkOiB0cnVlLFxuICAgIH07XG5cbiAgICB0aGlzLnJlZ2lzdGVyZWRFbGVtZW50cy5zZXQoZWxlbWVudCwgcmVnaXN0ZXJlZEluZm8pO1xuXG4gICAgLy8g5aaC5p6c5pivbWVtYmVyLWF2YXRhcuexu+Wei++8jOa3u+WKoOWIsOaIkOWRmOWFg+e0oOaYoOWwhFxuICAgIGlmIChlbGVtZW50Q29uZmlnLnR5cGUgPT09ICdtZW1iZXItYXZhdGFyJyAmJiBlbGVtZW50Q29uZmlnLm1lbWJlcklkKSB7XG4gICAgICBpZiAoIXRoaXMubWVtYmVyRWxlbWVudHMuaGFzKGVsZW1lbnRDb25maWcubWVtYmVySWQpKSB7XG4gICAgICAgIHRoaXMubWVtYmVyRWxlbWVudHMuc2V0KGVsZW1lbnRDb25maWcubWVtYmVySWQsIG5ldyBTZXQoKSk7XG4gICAgICB9XG4gICAgICB0aGlzLm1lbWJlckVsZW1lbnRzLmdldChlbGVtZW50Q29uZmlnLm1lbWJlcklkKSEuYWRkKGVsZW1lbnQpO1xuICAgIH1cblxuICAgIC8vIOeri+WNs+WQjOatpeW9k+WJjeWktOWDj1xuICAgIHRoaXMudXBkYXRlRWxlbWVudChlbGVtZW50LCBlbGVtZW50Q29uZmlnLCB0aGlzLmN1cnJlbnRBdmF0YXIgfHwgdGhpcy5nZXRVbmlmaWVkVXNlckF2YXRhclN5bmNMb2NhbCgpKTtcblxuICAgIHRoaXMubG9nKGDlt7Lms6jlhozlpLTlg4/lhYPntKA6ICR7ZWxlbWVudC5jbGFzc05hbWUgfHwgZWxlbWVudC50YWdOYW1lfSAo57G75Z6LOiAke2VsZW1lbnRDb25maWcudHlwZX0pYCk7XG4gIH1cblxuICAvKipcbiAgICog5Y+W5raI5rOo5YaM5aS05YOP5YWD57SgXG4gICAqL1xuICB1bnJlZ2lzdGVyRWxlbWVudChlbGVtZW50OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIGNvbnN0IHJlZ2lzdGVyZWRJbmZvID0gdGhpcy5yZWdpc3RlcmVkRWxlbWVudHMuZ2V0KGVsZW1lbnQpO1xuXG4gICAgaWYgKHJlZ2lzdGVyZWRJbmZvKSB7XG4gICAgICAvLyDku47miJDlkZjlhYPntKDmmKDlsITkuK3np7vpmaRcbiAgICAgIGlmIChyZWdpc3RlcmVkSW5mby5jb25maWcudHlwZSA9PT0gJ21lbWJlci1hdmF0YXInICYmIHJlZ2lzdGVyZWRJbmZvLmNvbmZpZy5tZW1iZXJJZCkge1xuICAgICAgICBjb25zdCBtZW1iZXJTZXQgPSB0aGlzLm1lbWJlckVsZW1lbnRzLmdldChyZWdpc3RlcmVkSW5mby5jb25maWcubWVtYmVySWQpO1xuICAgICAgICBpZiAobWVtYmVyU2V0KSB7XG4gICAgICAgICAgbWVtYmVyU2V0LmRlbGV0ZShlbGVtZW50KTtcbiAgICAgICAgICBpZiAobWVtYmVyU2V0LnNpemUgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMubWVtYmVyRWxlbWVudHMuZGVsZXRlKHJlZ2lzdGVyZWRJbmZvLmNvbmZpZy5tZW1iZXJJZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8g5riF55CG5YWD57Sg5bGe5oCn77yI5Zyo5YaF6YOo5pON5L2c5qCH5b+X5LiL6L+b6KGM77yM6YG/5YWN6Kem5Y+RIE11dGF0aW9uT2JzZXJ2ZXLvvIlcbiAgICB0aGlzLndpdGhJbnRlcm5hbE9wZXJhdGlvbigoKSA9PiB7XG4gICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1hdmF0YXItc3luYycpO1xuICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtYXZhdGFyLXR5cGUnKTtcbiAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLW1lbWJlci1pZCcpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5yZWdpc3RlcmVkRWxlbWVudHMuZGVsZXRlKGVsZW1lbnQpO1xuXG4gICAgdGhpcy5sb2coYOW3suWPlua2iOazqOWGjOWktOWDj+WFg+e0oDogJHtlbGVtZW50LmNsYXNzTmFtZSB8fCBlbGVtZW50LnRhZ05hbWV9YCk7XG4gIH1cblxuICAvKipcbiAgICog6Ieq5Yqo5Y+R546w5bm25rOo5YaM6aG16Z2i5Lit55qE55So5oi35aS05YOP5YWD57Sg77yI5aKe5by654mI5pys77yJXG4gICAqL1xuICBhdXRvUmVnaXN0ZXIoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHJldHVybjtcblxuICAgIGxldCByZWdpc3RlcmVkQ291bnQgPSAwO1xuXG4gICAgLy8gMS4g5rOo5YaM5pmu6YCa55So5oi35aS05YOP5YWD57SgXG4gICAgcmVnaXN0ZXJlZENvdW50ICs9IHRoaXMucmVnaXN0ZXJVc2VyQXZhdGFyRWxlbWVudHMoKTtcblxuICAgIC8vIDIuIOazqOWGjG1lbWJlci1hdmF0YXLnsbvlnovlhYPntKBcbiAgICByZWdpc3RlcmVkQ291bnQgKz0gdGhpcy5yZWdpc3Rlck1lbWJlckF2YXRhckVsZW1lbnRzKCk7XG5cbiAgICAvLyAzLiDms6jlhoznibnmrornlYzpnaLnmoTlpLTlg4/lhYPntKBcbiAgICByZWdpc3RlcmVkQ291bnQgKz0gdGhpcy5yZWdpc3RlclNwZWNpYWxBdmF0YXJFbGVtZW50cygpO1xuXG4gICAgaWYgKHJlZ2lzdGVyZWRDb3VudCA+IDApIHtcbiAgICAgIHRoaXMubG9nKGDoh6rliqjms6jlhozkuoYgJHtyZWdpc3RlcmVkQ291bnR9IOS4quWktOWDj+WFg+e0oGApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDms6jlhozmma7pgJrnlKjmiLflpLTlg4/lhYPntKBcbiAgICovXG4gIHByaXZhdGUgcmVnaXN0ZXJVc2VyQXZhdGFyRWxlbWVudHMoKTogbnVtYmVyIHtcbiAgICBjb25zdCBzZWxlY3RvcnMgPSBbXG4gICAgICAnLnVzZXJfYXZhdGFyLmF2YXRhci5hdmF0YXItaG92ZXInLCAvLyDogYrlpKnmoYbnlKjmiLflpLTlg49cbiAgICAgICcudXNlci1hdmF0YXInLCAvLyDpgJrnlKjnlKjmiLflpLTlg49cbiAgICAgICcudXNlcl9hdmF0YXInLCAvLyDnlKjmiLflpLTlg4/vvIjlpIfnlKjvvIlcbiAgICBdO1xuXG4gICAgbGV0IGNvdW50ID0gMDtcbiAgICBzZWxlY3RvcnMuZm9yRWFjaChzZWxlY3RvciA9PiB7XG4gICAgICBjb25zdCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICAgICAgZWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgICAgY29uc3QgaHRtbEVsZW1lbnQgPSBlbGVtZW50IGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBpZiAoIWh0bWxFbGVtZW50Lmhhc0F0dHJpYnV0ZSgnZGF0YS1hdmF0YXItc3luYycpICYmIHRoaXMuaXNVc2VyQXZhdGFyRWxlbWVudChodG1sRWxlbWVudCkpIHtcbiAgICAgICAgICBjb25zdCB0eXBlID0gaHRtbEVsZW1lbnQudGFnTmFtZSA9PT0gJ0lNRycgPyAnaW1nJyA6ICdiYWNrZ3JvdW5kJztcbiAgICAgICAgICB0aGlzLnJlZ2lzdGVyRWxlbWVudChodG1sRWxlbWVudCwgeyB0eXBlIH0pO1xuICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNvdW50O1xuICB9XG5cbiAgLyoqXG4gICAqIOWIpOaWreWFg+e0oOaYr+WQpuS4uueUqOaIt+WktOWDj+WFg+e0oO+8iOmBv+WFjeivr+azqOWGjOinkuiJsuWktOWDj++8iVxuICAgKi9cbiAgcHJpdmF0ZSBpc1VzZXJBdmF0YXJFbGVtZW50KGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogYm9vbGVhbiB7XG4gICAgLy8g5qOA5p+l5YWD57Sg5piv5ZCm5Zyo6IGK5aSp5YiX6KGo5Lit77yI6IGK5aSp5YiX6KGo5Lit55qE5aS05YOP5LiN5bqU6K+l6KKr5ZCM5q2l77yJXG4gICAgY29uc3QgY2hhdExpc3RDb250YWluZXIgPSBlbGVtZW50LmNsb3Nlc3QoJy5jaGF0LWxpc3QsIC5jaGF0bGlzdCwgLmNvbnRhY3QtbGlzdCcpO1xuICAgIGlmIChjaGF0TGlzdENvbnRhaW5lcikge1xuICAgICAgcmV0dXJuIGZhbHNlOyAvLyDogYrlpKnliJfooajkuK3nmoTlpLTlg4/kuI3mmK/nlKjmiLflpLTlg49cbiAgICB9XG5cbiAgICAvLyDmo4Dmn6XlhYPntKDmmK/lkKblnKjnvqTogYrlpLTlg4/ljLrln59cbiAgICBjb25zdCBncm91cEF2YXRhckNvbnRhaW5lciA9IGVsZW1lbnQuY2xvc2VzdCgnLmdyb3VwLWF2YXRhciwgLmNoYXQtYXZhdGFyLCAuY29udGFjdC1hdmF0YXInKTtcbiAgICBpZiAoZ3JvdXBBdmF0YXJDb250YWluZXIpIHtcbiAgICAgIHJldHVybiBmYWxzZTsgLy8g576k6IGK5oiW6IGU57O75Lq65aS05YOP5LiN5piv55So5oi35aS05YOPXG4gICAgfVxuXG4gICAgLy8g5qOA5p+l5YWD57Sg55qE57G75ZCN77yM5o6S6Zmk5piO5pi+55qE6KeS6Imy5aS05YOPXG4gICAgY29uc3QgY2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWUudG9Mb3dlckNhc2UoKTtcbiAgICBjb25zdCBleGNsdWRlUGF0dGVybnMgPSBbXG4gICAgICAnY2hhcmFjdGVyLWF2YXRhcicsXG4gICAgICAnY2hhci1hdmF0YXInLFxuICAgICAgJ2NvbnRhY3QtYXZhdGFyJyxcbiAgICAgICdjaGF0LWF2YXRhcicsXG4gICAgICAnZ3JvdXAtYXZhdGFyJyxcbiAgICAgICdib3QtYXZhdGFyJyxcbiAgICAgICdhaS1hdmF0YXInLFxuICAgIF07XG5cbiAgICBpZiAoZXhjbHVkZVBhdHRlcm5zLnNvbWUocGF0dGVybiA9PiBjbGFzc05hbWUuaW5jbHVkZXMocGF0dGVybikpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8g5qOA5p+l54i25YWD57Sg77yM56Gu5L+d5LiN5Zyo6KeS6Imy55u45YWz55qE5a655Zmo5LitXG4gICAgY29uc3QgcGFyZW50Q29udGFpbmVyID0gZWxlbWVudC5jbG9zZXN0KFxuICAgICAgJ1tkYXRhLWNoYXJhY3Rlcl0sIFtkYXRhLWNoYXJdLCBbZGF0YS1jb250YWN0XSwgLmNoYXJhY3Rlci1pdGVtLCAuY29udGFjdC1pdGVtLCAuY2hhdC1pdGVtJyxcbiAgICApO1xuICAgIGlmIChwYXJlbnRDb250YWluZXIpIHtcbiAgICAgIC8vIOWmguaenOeItuWuueWZqOaYjuehruagh+ivhuS4uueUqOaIt+ebuOWFs++8jOWImeWFgeiuuFxuICAgICAgY29uc3QgaXNVc2VyQ29udGFpbmVyID1cbiAgICAgICAgcGFyZW50Q29udGFpbmVyLmhhc0F0dHJpYnV0ZSgnZGF0YS11c2VyJykgfHxcbiAgICAgICAgcGFyZW50Q29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygndXNlci1pdGVtJykgfHxcbiAgICAgICAgcGFyZW50Q29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygncHJvZmlsZS1pdGVtJyk7XG4gICAgICByZXR1cm4gaXNVc2VyQ29udGFpbmVyO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlOyAvLyDpu5jorqTorqTkuLrmmK/nlKjmiLflpLTlg49cbiAgfVxuXG4gIC8qKlxuICAgKiDms6jlhoxtZW1iZXItYXZhdGFy57G75Z6L5YWD57SgXG4gICAqL1xuICBwcml2YXRlIHJlZ2lzdGVyTWVtYmVyQXZhdGFyRWxlbWVudHMoKTogbnVtYmVyIHtcbiAgICBjb25zdCBtZW1iZXJBdmF0YXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lbWJlci1hdmF0YXInKTtcbiAgICBsZXQgY291bnQgPSAwO1xuXG4gICAgbWVtYmVyQXZhdGFycy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgY29uc3QgaHRtbEVsZW1lbnQgPSBlbGVtZW50IGFzIEhUTUxFbGVtZW50O1xuICAgICAgaWYgKCFodG1sRWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2RhdGEtYXZhdGFyLXN5bmMnKSkge1xuICAgICAgICBjb25zdCBtZW1iZXJJZCA9XG4gICAgICAgICAgaHRtbEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLW1lbWJlci1pZCcpIHx8XG4gICAgICAgICAgaHRtbEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLW1lbWJlcicpIHx8XG4gICAgICAgICAgdGhpcy5leHRyYWN0TWVtYmVySWRGcm9tRWxlbWVudChodG1sRWxlbWVudCk7XG5cbiAgICAgICAgLy8g5Y+q5rOo5YaM55So5oi36Ieq5bex55qE5aS05YOPXG4gICAgICAgIGlmICh0aGlzLmlzVXNlck1lbWJlcklkKG1lbWJlcklkKSkge1xuICAgICAgICAgIGNvbnN0IGNvbmZpZzogRWxlbWVudENvbmZpZyA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdtZW1iZXItYXZhdGFyJyxcbiAgICAgICAgICAgIG1lbWJlcklkOiBtZW1iZXJJZCB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICB2YWxpZGF0b3I6IGVsID0+IHRoaXMudmFsaWRhdGVNZW1iZXJBdmF0YXJFbGVtZW50KGVsKSxcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdGhpcy5yZWdpc3RlckVsZW1lbnQoaHRtbEVsZW1lbnQsIGNvbmZpZyk7XG4gICAgICAgICAgY291bnQrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNvdW50O1xuICB9XG5cbiAgLyoqXG4gICAqIOazqOWGjOeJueauiueVjOmdoueahOWktOWDj+WFg+e0oFxuICAgKi9cbiAgcHJpdmF0ZSByZWdpc3RlclNwZWNpYWxBdmF0YXJFbGVtZW50cygpOiBudW1iZXIge1xuICAgIGNvbnN0IHNwZWNpYWxTZWxlY3RvcnMgPSBbXG4gICAgICAnI2F2YXRhckltYWdlJywgLy8gXCLmiJHnmoRcIueVjOmdouWktOWDj+WbvueJh1xuICAgICAgJy5wcm9maWxlLWF2YXRhcicsIC8vIOS4quS6uui1hOaWmeWktOWDj1xuICAgIF07XG5cbiAgICBsZXQgY291bnQgPSAwO1xuICAgIHNwZWNpYWxTZWxlY3RvcnMuZm9yRWFjaChzZWxlY3RvciA9PiB7XG4gICAgICBjb25zdCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICAgICAgZWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgICAgY29uc3QgaHRtbEVsZW1lbnQgPSBlbGVtZW50IGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBpZiAoIWh0bWxFbGVtZW50Lmhhc0F0dHJpYnV0ZSgnZGF0YS1hdmF0YXItc3luYycpKSB7XG4gICAgICAgICAgY29uc3QgdHlwZSA9IGh0bWxFbGVtZW50LnRhZ05hbWUgPT09ICdJTUcnID8gJ2ltZycgOiAnYmFja2dyb3VuZCc7XG4gICAgICAgICAgdGhpcy5yZWdpc3RlckVsZW1lbnQoaHRtbEVsZW1lbnQsIHsgdHlwZSwgcHJpb3JpdHk6IDEgfSk7IC8vIOmrmOS8mOWFiOe6p1xuICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNvdW50O1xuICB9XG5cbiAgLyoqXG4gICAqIOS7juWFg+e0oOS4reaPkOWPluaIkOWRmElEXG4gICAqL1xuICBwcml2YXRlIGV4dHJhY3RNZW1iZXJJZEZyb21FbGVtZW50KGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogc3RyaW5nIHwgbnVsbCB7XG4gICAgLy8g5bCd6K+V5LuO5ZCE56eN5Y+v6IO955qE5bGe5oCn5Lit6I635Y+W5oiQ5ZGYSURcbiAgICBjb25zdCBwb3NzaWJsZUF0dHJpYnV0ZXMgPSBbJ2RhdGEtbWVtYmVyLWlkJywgJ2RhdGEtbWVtYmVyJywgJ2RhdGEtdXNlci1pZCcsICdkYXRhLXVzZXInXTtcblxuICAgIGZvciAoY29uc3QgYXR0ciBvZiBwb3NzaWJsZUF0dHJpYnV0ZXMpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoYXR0cik7XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIOWwneivleS7jueItuWFg+e0oOiOt+WPllxuICAgIGNvbnN0IHBhcmVudCA9IGVsZW1lbnQuY2xvc2VzdCgnW2RhdGEtbWVtYmVyLWlkXSwgW2RhdGEtbWVtYmVyXSwgW2RhdGEtdXNlci1pZF0sIFtkYXRhLXVzZXJdJyk7XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgZm9yIChjb25zdCBhdHRyIG9mIHBvc3NpYmxlQXR0cmlidXRlcykge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHBhcmVudC5nZXRBdHRyaWJ1dGUoYXR0cik7XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIpOaWreaIkOWRmElE5piv5ZCm5Li655So5oi36Ieq5bexXG4gICAqL1xuICBwcml2YXRlIGlzVXNlck1lbWJlcklkKG1lbWJlcklkOiBzdHJpbmcgfCBudWxsKTogYm9vbGVhbiB7XG4gICAgaWYgKCFtZW1iZXJJZCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgY29uc3QgdXNlcklkcyA9IFsne3t1c2VyfX0nLCAndXNlcicsICdVc2VyJywgJ1VTRVInXTtcbiAgICByZXR1cm4gdXNlcklkcy5pbmNsdWRlcyhtZW1iZXJJZCk7XG4gIH1cblxuICAvKipcbiAgICog6aqM6K+BbWVtYmVyLWF2YXRhcuWFg+e0oOeahOacieaViOaAp1xuICAgKi9cbiAgcHJpdmF0ZSB2YWxpZGF0ZU1lbWJlckF2YXRhckVsZW1lbnQoZWxlbWVudDogSFRNTEVsZW1lbnQpOiBib29sZWFuIHtcbiAgICAvLyDmo4Dmn6XlhYPntKDmmK/lkKblnKhET03kuK1cbiAgICBpZiAoIWRvY3VtZW50LmNvbnRhaW5zKGVsZW1lbnQpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8g5qOA5p+l5YWD57Sg5piv5ZCm5Y+v6KeBXG4gICAgY29uc3Qgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbiAgICBpZiAoc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnIHx8IHN0eWxlLnZpc2liaWxpdHkgPT09ICdoaWRkZW4nKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8g5qOA5p+l5YWD57Sg5piv5ZCm5pyJ5pyJ5pWI55qE5oiQ5ZGYSURcbiAgICBjb25zdCBtZW1iZXJJZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLW1lbWJlci1pZCcpIHx8IHRoaXMuZXh0cmFjdE1lbWJlcklkRnJvbUVsZW1lbnQoZWxlbWVudCk7XG5cbiAgICByZXR1cm4gdGhpcy5pc1VzZXJNZW1iZXJJZChtZW1iZXJJZCk7XG4gIH1cblxuICAvKipcbiAgICog5omL5Yqo6Kem5Y+R5aS05YOP5ZCM5q2lXG4gICAqL1xuICBzeW5jKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSByZXR1cm47XG5cbiAgICBjb25zdCBuZXdBdmF0YXIgPSB0aGlzLmdldFVuaWZpZWRVc2VyQXZhdGFyU3luY0xvY2FsKCk7XG5cbiAgICAvLyDlj6rmnInlpLTlg4/lj5HnlJ/lj5jljJbml7bmiY3mm7TmlrBcbiAgICBpZiAobmV3QXZhdGFyICE9PSB0aGlzLmN1cnJlbnRBdmF0YXIpIHtcbiAgICAgIHRoaXMubG9nKGDlpLTlg4/lt7Lmm7TmlrA6ICR7dGhpcy5jdXJyZW50QXZhdGFyfSAtPiAke25ld0F2YXRhcn1gKTtcbiAgICAgIHRoaXMuY3VycmVudEF2YXRhciA9IG5ld0F2YXRhcjtcbiAgICAgIHRoaXMudXBkYXRlQWxsRWxlbWVudHMobmV3QXZhdGFyKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5by65Yi25pu05paw5omA5pyJ5aS05YOP5YWD57SgXG4gICAqL1xuICBmb3JjZVVwZGF0ZShuZXdBdmF0YXJVcmw/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc0Rlc3Ryb3llZCkgcmV0dXJuO1xuXG4gICAgY29uc3QgYXZhdGFyID0gbmV3QXZhdGFyVXJsID8/IHRoaXMuZ2V0VW5pZmllZFVzZXJBdmF0YXJTeW5jTG9jYWwoKTtcbiAgICB0aGlzLmN1cnJlbnRBdmF0YXIgPSBhdmF0YXI7XG4gICAgdGhpcy51cGRhdGVBbGxFbGVtZW50cyhhdmF0YXIpO1xuICAgIHRoaXMubG9nKGDlt7LlvLrliLbmm7TmlrDmiYDmnInlpLTlg4/lhYPntKAgKFVSTDogJHtuZXdBdmF0YXJVcmwgPyAncHJvdmlkZWQnIDogJ2ZldGNoZWQnfSlgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmm7TmlrDljZXkuKrlpLTlg4/lhYPntKDvvIjlop7lvLrniYjmnKzvvIlcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlRWxlbWVudChlbGVtZW50OiBIVE1MRWxlbWVudCwgY29uZmlnOiBFbGVtZW50Q29uZmlnLCBhdmF0YXJVcmw6IHN0cmluZyk6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICAvLyDlr7nkuo5tZW1iZXItYXZhdGFy57G75Z6L77yM5Y+q5pu05paw55So5oi36Ieq5bex55qE5aS05YOPXG4gICAgICBpZiAoY29uZmlnLnR5cGUgPT09ICdtZW1iZXItYXZhdGFyJykge1xuICAgICAgICBpZiAoIXRoaXMuaXNVc2VyTWVtYmVySWQoY29uZmlnLm1lbWJlcklkIHx8IG51bGwpKSB7XG4gICAgICAgICAgcmV0dXJuOyAvLyDkuI3mmK/nlKjmiLfoh6rlt7HnmoTlpLTlg4/vvIzot7Pov4fmm7TmlrBcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyDmoLnmja7nsbvlnovmm7TmlrDlhYPntKBcbiAgICAgIHN3aXRjaCAoY29uZmlnLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnaW1nJzpcbiAgICAgICAgICBpZiAoZWxlbWVudC50YWdOYW1lID09PSAnSU1HJykge1xuICAgICAgICAgICAgKGVsZW1lbnQgYXMgSFRNTEltYWdlRWxlbWVudCkuc3JjID0gYXZhdGFyVXJsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdiYWNrZ3JvdW5kJzpcbiAgICAgICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHthdmF0YXJVcmx9KWA7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnbWVtYmVyLWF2YXRhcic6XG4gICAgICAgICAgLy8gbWVtYmVyLWF2YXRhcuWPr+iDveaYr2ltZ+aIlmJhY2tncm91bmRcbiAgICAgICAgICBpZiAoZWxlbWVudC50YWdOYW1lID09PSAnSU1HJykge1xuICAgICAgICAgICAgKGVsZW1lbnQgYXMgSFRNTEltYWdlRWxlbWVudCkuc3JjID0gYXZhdGFyVXJsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHthdmF0YXJVcmx9KWA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgLy8g6buY6K6k5L2/55SoYmFja2dyb3VuZOaWueW8j1xuICAgICAgICAgIGVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke2F2YXRhclVybH0pYDtcbiAgICAgIH1cblxuICAgICAgLy8g5pu05paw5pyA5ZCO5pu05paw5pe26Ze0XG4gICAgICBjb25zdCByZWdpc3RlcmVkSW5mbyA9IHRoaXMucmVnaXN0ZXJlZEVsZW1lbnRzLmdldChlbGVtZW50KTtcbiAgICAgIGlmIChyZWdpc3RlcmVkSW5mbykge1xuICAgICAgICByZWdpc3RlcmVkSW5mby5sYXN0VXBkYXRlID0gRGF0ZS5ub3coKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5sb2coYOabtOaWsOWktOWDj+WFg+e0oOWksei0pTogJHtlcnJvcn1gKTtcblxuICAgICAgLy8g5qCH6K6w5YWD57Sg5Li65peg5pWIXG4gICAgICBjb25zdCByZWdpc3RlcmVkSW5mbyA9IHRoaXMucmVnaXN0ZXJlZEVsZW1lbnRzLmdldChlbGVtZW50KTtcbiAgICAgIGlmIChyZWdpc3RlcmVkSW5mbykge1xuICAgICAgICByZWdpc3RlcmVkSW5mby5pc1ZhbGlkID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOabtOaWsOaJgOacieWktOWDj+WFg+e0oFxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVBbGxFbGVtZW50cyhhdmF0YXJVcmw6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IGVsZW1lbnRzVG9SZW1vdmU6IEhUTUxFbGVtZW50W10gPSBbXTtcbiAgICBjb25zdCBlbGVtZW50c1RvVXBkYXRlOiBBcnJheTx7IGVsZW1lbnQ6IEhUTUxFbGVtZW50OyBjb25maWc6IEVsZW1lbnRDb25maWcgfT4gPSBbXTtcblxuICAgIC8vIOaUtumbhumcgOimgeabtOaWsOWSjOa4heeQhueahOWFg+e0oFxuICAgIHRoaXMucmVnaXN0ZXJlZEVsZW1lbnRzLmZvckVhY2goKHJlZ2lzdGVyZWRJbmZvLCBlbGVtZW50KSA9PiB7XG4gICAgICBpZiAoIWRvY3VtZW50LmNvbnRhaW5zKGVsZW1lbnQpIHx8ICFyZWdpc3RlcmVkSW5mby5pc1ZhbGlkKSB7XG4gICAgICAgIGVsZW1lbnRzVG9SZW1vdmUucHVzaChlbGVtZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOmHjeaWsOmqjOivgeWFg+e0oO+8iOWmguaenOaciemqjOivgeWZqO+8iVxuICAgICAgICBpZiAocmVnaXN0ZXJlZEluZm8uY29uZmlnLnZhbGlkYXRvcikge1xuICAgICAgICAgIGlmICghcmVnaXN0ZXJlZEluZm8uY29uZmlnLnZhbGlkYXRvcihlbGVtZW50KSkge1xuICAgICAgICAgICAgZWxlbWVudHNUb1JlbW92ZS5wdXNoKGVsZW1lbnQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbGVtZW50c1RvVXBkYXRlLnB1c2goeyBlbGVtZW50LCBjb25maWc6IHJlZ2lzdGVyZWRJbmZvLmNvbmZpZyB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZWxlbWVudHNUb1VwZGF0ZS5wdXNoKHsgZWxlbWVudCwgY29uZmlnOiByZWdpc3RlcmVkSW5mby5jb25maWcgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIOaMieS8mOWFiOe6p+aOkuW6j+abtOaWsFxuICAgIGVsZW1lbnRzVG9VcGRhdGUuc29ydCgoYSwgYikgPT4gKGEuY29uZmlnLnByaW9yaXR5IHx8IDk5OSkgLSAoYi5jb25maWcucHJpb3JpdHkgfHwgOTk5KSk7XG5cbiAgICAvLyDmm7TmlrDmnInmlYjlhYPntKBcbiAgICBlbGVtZW50c1RvVXBkYXRlLmZvckVhY2goKHsgZWxlbWVudCwgY29uZmlnIH0pID0+IHtcbiAgICAgIHRoaXMudXBkYXRlRWxlbWVudChlbGVtZW50LCBjb25maWcsIGF2YXRhclVybCk7XG4gICAgfSk7XG5cbiAgICAvLyDmuIXnkIbml6DmlYjlhYPntKBcbiAgICBlbGVtZW50c1RvUmVtb3ZlLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICB0aGlzLnVucmVnaXN0ZXJFbGVtZW50KGVsZW1lbnQpO1xuICAgIH0pO1xuXG4gICAgaWYgKGVsZW1lbnRzVG9SZW1vdmUubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5sb2coYOa4heeQhuS6hiAke2VsZW1lbnRzVG9SZW1vdmUubGVuZ3RofSDkuKrml6DmlYjnmoTlpLTlg4/lhYPntKBgKTtcbiAgICB9XG5cbiAgICBpZiAoZWxlbWVudHNUb1VwZGF0ZS5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLmxvZyhg5pu05paw5LqGICR7ZWxlbWVudHNUb1VwZGF0ZS5sZW5ndGh9IOS4quWktOWDj+WFg+e0oGApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlvIDlp4voh6rliqjlkIzmraVcbiAgICovXG4gIHByaXZhdGUgc3RhcnRTeW5jKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmlzRGVzdHJveWVkIHx8IHRoaXMuc3luY1RpbWVyICE9PSBudWxsKSByZXR1cm47XG5cbiAgICAvLyDnq4vljbPmiafooYzkuIDmrKHlkIzmraVcbiAgICB0aGlzLnN5bmMoKTtcblxuICAgIC8vIOWQr+eUqOWumuaXtuWQjOatpe+8iOmZjeS9jumikeeOh++8jOmBv+WFjeaAp+iDvemXrumimO+8iVxuICAgIHRoaXMuc3luY1RpbWVyID0gd2luZG93LnNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHRoaXMuc3luYygpO1xuICAgICAgdGhpcy5wZXJmb3JtUGVyaW9kaWNNYWludGVuYW5jZSgpO1xuICAgIH0sIHRoaXMub3B0aW9ucy5zeW5jSW50ZXJ2YWwpO1xuXG4gICAgdGhpcy5sb2coJ+iHquWKqOWQjOatpeW3suWQr+WKqCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIOaJp+ihjOWumuacn+e7tOaKpFxuICAgKi9cbiAgcHJpdmF0ZSBwZXJmb3JtUGVyaW9kaWNNYWludGVuYW5jZSgpOiB2b2lkIHtcbiAgICAvLyDmuIXnkIbml6DmlYjlhYPntKBcbiAgICB0aGlzLmNsZWFudXBJbnZhbGlkRWxlbWVudHMoKTtcblxuICAgIC8vIOmHjeaWsOWPkeeOsOaWsOWFg+e0oO+8iOmYsuaKlu+8iVxuICAgIHRoaXMuZGVib3VuY2VkQXV0b1JlZ2lzdGVyKCk7XG4gIH1cblxuICAvKipcbiAgICog6Ziy5oqW55qE6Ieq5Yqo5rOo5YaMXG4gICAqL1xuICBwcml2YXRlIGRlYm91bmNlZEF1dG9SZWdpc3RlcigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5kaXNjb3ZlcnlEZWJvdW5jZVRpbWVyICE9PSBudWxsKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5kaXNjb3ZlcnlEZWJvdW5jZVRpbWVyKTtcbiAgICB9XG5cbiAgICB0aGlzLmRpc2NvdmVyeURlYm91bmNlVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmF1dG9SZWdpc3RlcigpO1xuICAgICAgdGhpcy5kaXNjb3ZlcnlEZWJvdW5jZVRpbWVyID0gbnVsbDtcbiAgICB9LCB0aGlzLm9wdGlvbnMuZGlzY292ZXJ5RGVib3VuY2VEZWxheSk7XG4gIH1cblxuICAvKipcbiAgICog5riF55CG5peg5pWI5YWD57SgXG4gICAqL1xuICBwcml2YXRlIGNsZWFudXBJbnZhbGlkRWxlbWVudHMoKTogdm9pZCB7XG4gICAgY29uc3QgZWxlbWVudHNUb1JlbW92ZTogSFRNTEVsZW1lbnRbXSA9IFtdO1xuXG4gICAgdGhpcy5yZWdpc3RlcmVkRWxlbWVudHMuZm9yRWFjaCgocmVnaXN0ZXJlZEluZm8sIGVsZW1lbnQpID0+IHtcbiAgICAgIGlmICghZG9jdW1lbnQuY29udGFpbnMoZWxlbWVudCkgfHwgIXJlZ2lzdGVyZWRJbmZvLmlzVmFsaWQpIHtcbiAgICAgICAgZWxlbWVudHNUb1JlbW92ZS5wdXNoKGVsZW1lbnQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZWxlbWVudHNUb1JlbW92ZS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgdGhpcy51bnJlZ2lzdGVyRWxlbWVudChlbGVtZW50KTtcbiAgICB9KTtcblxuICAgIGlmIChlbGVtZW50c1RvUmVtb3ZlLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMubG9nKGDlrprmnJ/muIXnkIbkuoYgJHtlbGVtZW50c1RvUmVtb3ZlLmxlbmd0aH0g5Liq5peg5pWI5YWD57SgYCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOaJp+ihjOWIneWni+WPkeeOsFxuICAgKi9cbiAgcHJpdmF0ZSBwZXJmb3JtSW5pdGlhbERpc2NvdmVyeSgpOiB2b2lkIHtcbiAgICAvLyDlu7bov5/miafooYzvvIznoa7kv51ET03lt7LlrozlhajliqDovb1cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuYXV0b1JlZ2lzdGVyKCk7XG4gICAgfSwgMTAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlgZzmraLoh6rliqjlkIzmraVcbiAgICovXG4gIHByaXZhdGUgc3RvcFN5bmMoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc3luY1RpbWVyICE9PSBudWxsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuc3luY1RpbWVyKTtcbiAgICAgIHRoaXMuc3luY1RpbWVyID0gbnVsbDtcbiAgICAgIHRoaXMubG9nKCfoh6rliqjlkIzmraXlt7LlgZzmraInKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5kaXNjb3ZlcnlEZWJvdW5jZVRpbWVyICE9PSBudWxsKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5kaXNjb3ZlcnlEZWJvdW5jZVRpbWVyKTtcbiAgICAgIHRoaXMuZGlzY292ZXJ5RGVib3VuY2VUaW1lciA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOiuvue9rkRPTeWPmOWMluebkeWQrOWZqFxuICAgKi9cbiAgcHJpdmF0ZSBzZXR1cE11dGF0aW9uT2JzZXJ2ZXIoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZW5hYmxlTXV0YXRpb25PYnNlcnZlciB8fCB0eXBlb2YgTXV0YXRpb25PYnNlcnZlciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihtdXRhdGlvbnMgPT4ge1xuICAgICAgLy8g5aaC5p6c5q2j5Zyo6L+b6KGM5YaF6YOo5pON5L2c77yM5b+955Wl5omA5pyJ5Y+Y5YyWXG4gICAgICBpZiAodGhpcy5pc0ludGVybmFsT3BlcmF0aW9uKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbGV0IHNob3VsZEF1dG9SZWdpc3RlciA9IGZhbHNlO1xuXG4gICAgICBtdXRhdGlvbnMuZm9yRWFjaChtdXRhdGlvbiA9PiB7XG4gICAgICAgIC8vIOajgOafpeaWsOWinueahOiKgueCuVxuICAgICAgICBpZiAobXV0YXRpb24udHlwZSA9PT0gJ2NoaWxkTGlzdCcgJiYgbXV0YXRpb24uYWRkZWROb2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgbXV0YXRpb24uYWRkZWROb2Rlcy5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBub2RlIGFzIEVsZW1lbnQ7XG5cbiAgICAgICAgICAgICAgLy8g5qOA5p+l5piv5ZCm5YyF5ZCr5aS05YOP55u45YWz55qE5YWD57SgXG4gICAgICAgICAgICAgIGlmICh0aGlzLmNvbnRhaW5zQXZhdGFyRWxlbWVudHMoZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICBzaG91bGRBdXRvUmVnaXN0ZXIgPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoc2hvdWxkQXV0b1JlZ2lzdGVyKSB7XG4gICAgICAgIHRoaXMuZGVib3VuY2VkQXV0b1JlZ2lzdGVyKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyDlvIDlp4vop4Llr5/vvIjmmoLml7blj6rnm5HlkKxET03nu5PmnoTlj5jljJbvvIzkuI3nm5HlkKzlsZ7mgKflj5jljJbvvIlcbiAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7XG4gICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICBzdWJ0cmVlOiB0cnVlLFxuICAgICAgLy8gYXR0cmlidXRlczogdHJ1ZSwgIC8vIOaaguaXtuemgeeUqOWxnuaAp+ebkeWQrFxuICAgICAgLy8gYXR0cmlidXRlRmlsdGVyOiBbJ2RhdGEtbWVtYmVyLWlkJywgJ2RhdGEtbWVtYmVyJywgJ2RhdGEtdXNlci1pZCcsICdjbGFzcyddLFxuICAgIH0pO1xuXG4gICAgdGhpcy5sb2coJ0RPTeWPmOWMluebkeWQrOWZqOW3suWQr+WKqCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIOajgOafpeWFg+e0oOaYr+WQpuWMheWQq+WktOWDj+ebuOWFs+eahOWtkOWFg+e0oFxuICAgKi9cbiAgcHJpdmF0ZSBjb250YWluc0F2YXRhckVsZW1lbnRzKGVsZW1lbnQ6IEVsZW1lbnQpOiBib29sZWFuIHtcbiAgICBjb25zdCBhdmF0YXJTZWxlY3RvcnMgPSBbXG4gICAgICAnLnVzZXJfYXZhdGFyJyxcbiAgICAgICcudXNlci1hdmF0YXInLFxuICAgICAgJy5tZW1iZXItYXZhdGFyJyxcbiAgICAgICcucHJvZmlsZS1hdmF0YXInLFxuICAgICAgJy5jaGF0LWF2YXRhcicsXG4gICAgICAnW2RhdGEtbWVtYmVyLWlkXScsXG4gICAgICAnI2F2YXRhckltYWdlJyxcbiAgICBdO1xuXG4gICAgcmV0dXJuIGF2YXRhclNlbGVjdG9ycy5zb21lKHNlbGVjdG9yID0+IHtcbiAgICAgIHJldHVybiAoZWxlbWVudC5tYXRjaGVzICYmIGVsZW1lbnQubWF0Y2hlcyhzZWxlY3RvcikpIHx8IGVsZW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog5YGc5q2iRE9N5Y+Y5YyW55uR5ZCs5ZmoXG4gICAqL1xuICBwcml2YXRlIHN0b3BNdXRhdGlvbk9ic2VydmVyKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLm11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgICAgIHRoaXMubXV0YXRpb25PYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXIgPSBudWxsO1xuICAgICAgdGhpcy5sb2coJ0RPTeWPmOWMluebkeWQrOWZqOW3suWBnOatoicpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDplIDmr4HnrqHnkIblmahcbiAgICovXG4gIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy5pc0Rlc3Ryb3llZCA9IHRydWU7XG4gICAgdGhpcy5zdG9wU3luYygpO1xuICAgIHRoaXMuc3RvcE11dGF0aW9uT2JzZXJ2ZXIoKTtcblxuICAgIC8vIOa4heeQhuaJgOacieazqOWGjOeahOWFg+e0oFxuICAgIHRoaXMucmVnaXN0ZXJlZEVsZW1lbnRzLmZvckVhY2goKHJlZ2lzdGVyZWRJbmZvLCBlbGVtZW50KSA9PiB7XG4gICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1hdmF0YXItc3luYycpO1xuICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtYXZhdGFyLXR5cGUnKTtcbiAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLW1lbWJlci1pZCcpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5yZWdpc3RlcmVkRWxlbWVudHMuY2xlYXIoKTtcbiAgICB0aGlzLm1lbWJlckVsZW1lbnRzLmNsZWFyKCk7XG5cbiAgICB0aGlzLmxvZygn5aKe5by655qE5aS05YOP5ZCM5q2l566h55CG5Zmo5bey6ZSA5q+BJyk7XG4gICAgQXZhdGFyU3luYy5pbnN0YW5jZSA9IG51bGwgYXMgYW55O1xuICB9XG5cbiAgLyoqXG4gICAqIOiOt+WPluiwg+ivleS/oeaBr1xuICAgKi9cbiAgZ2V0RGVidWdJbmZvKCk6IFJlY29yZDxzdHJpbmcsIGFueT4ge1xuICAgIGNvbnN0IGVsZW1lbnRzQnlUeXBlOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG4gICAgY29uc3QgbWVtYmVyRWxlbWVudHNDb3VudDogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuXG4gICAgdGhpcy5yZWdpc3RlcmVkRWxlbWVudHMuZm9yRWFjaChyZWdpc3RlcmVkSW5mbyA9PiB7XG4gICAgICBjb25zdCB0eXBlID0gcmVnaXN0ZXJlZEluZm8uY29uZmlnLnR5cGU7XG4gICAgICBlbGVtZW50c0J5VHlwZVt0eXBlXSA9IChlbGVtZW50c0J5VHlwZVt0eXBlXSB8fCAwKSArIDE7XG4gICAgfSk7XG5cbiAgICB0aGlzLm1lbWJlckVsZW1lbnRzLmZvckVhY2goKGVsZW1lbnRzLCBtZW1iZXJJZCkgPT4ge1xuICAgICAgbWVtYmVyRWxlbWVudHNDb3VudFttZW1iZXJJZF0gPSBlbGVtZW50cy5zaXplO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGN1cnJlbnRBdmF0YXI6IHRoaXMuY3VycmVudEF2YXRhcixcbiAgICAgIHRvdGFsUmVnaXN0ZXJlZEVsZW1lbnRzOiB0aGlzLnJlZ2lzdGVyZWRFbGVtZW50cy5zaXplLFxuICAgICAgZWxlbWVudHNCeVR5cGUsXG4gICAgICBtZW1iZXJFbGVtZW50c0NvdW50LFxuICAgICAgaXNEZXN0cm95ZWQ6IHRoaXMuaXNEZXN0cm95ZWQsXG4gICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsXG4gICAgICBoYXNNdXRhdGlvbk9ic2VydmVyOiAhIXRoaXMubXV0YXRpb25PYnNlcnZlcixcbiAgICAgIGhhc0FjdGl2ZVRpbWVyOiAhIXRoaXMuc3luY1RpbWVyLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5rOo5YaM55qE5YWD57Sg5YiX6KGo77yI55So5LqO6LCD6K+V77yJXG4gICAqL1xuICBnZXRSZWdpc3RlcmVkRWxlbWVudHMoKTogQXJyYXk8e1xuICAgIGVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICAgIGNvbmZpZzogRWxlbWVudENvbmZpZztcbiAgICBsYXN0VXBkYXRlOiBudW1iZXI7XG4gICAgaXNWYWxpZDogYm9vbGVhbjtcbiAgICBjbGFzc05hbWU6IHN0cmluZztcbiAgICB0YWdOYW1lOiBzdHJpbmc7XG4gIH0+IHtcbiAgICBjb25zdCByZXN1bHQ6IEFycmF5PGFueT4gPSBbXTtcblxuICAgIHRoaXMucmVnaXN0ZXJlZEVsZW1lbnRzLmZvckVhY2goKHJlZ2lzdGVyZWRJbmZvLCBlbGVtZW50KSA9PiB7XG4gICAgICByZXN1bHQucHVzaCh7XG4gICAgICAgIGVsZW1lbnQsXG4gICAgICAgIGNvbmZpZzogcmVnaXN0ZXJlZEluZm8uY29uZmlnLFxuICAgICAgICBsYXN0VXBkYXRlOiByZWdpc3RlcmVkSW5mby5sYXN0VXBkYXRlLFxuICAgICAgICBpc1ZhbGlkOiByZWdpc3RlcmVkSW5mby5pc1ZhbGlkLFxuICAgICAgICBjbGFzc05hbWU6IGVsZW1lbnQuY2xhc3NOYW1lLFxuICAgICAgICB0YWdOYW1lOiBlbGVtZW50LnRhZ05hbWUsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5oiQ5ZGY5aS05YOP57uf6K6hXG4gICAqL1xuICBnZXRNZW1iZXJBdmF0YXJTdGF0cygpOiBSZWNvcmQ8c3RyaW5nLCB7IGNvdW50OiBudW1iZXI7IGVsZW1lbnRzOiBIVE1MRWxlbWVudFtdIH0+IHtcbiAgICBjb25zdCBzdGF0czogUmVjb3JkPHN0cmluZywgeyBjb3VudDogbnVtYmVyOyBlbGVtZW50czogSFRNTEVsZW1lbnRbXSB9PiA9IHt9O1xuXG4gICAgdGhpcy5tZW1iZXJFbGVtZW50cy5mb3JFYWNoKChlbGVtZW50cywgbWVtYmVySWQpID0+IHtcbiAgICAgIHN0YXRzW21lbWJlcklkXSA9IHtcbiAgICAgICAgY291bnQ6IGVsZW1lbnRzLnNpemUsXG4gICAgICAgIGVsZW1lbnRzOiBBcnJheS5mcm9tKGVsZW1lbnRzKSxcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc3RhdHM7XG4gIH1cblxuICAvKipcbiAgICog5Zyo5YaF6YOo5pON5L2c5pyf6Ze05omn6KGM5Ye95pWw77yM5pqC5YGcIE11dGF0aW9uT2JzZXJ2ZXIg5aSE55CGXG4gICAqL1xuICBwcml2YXRlIHdpdGhJbnRlcm5hbE9wZXJhdGlvbjxUPihvcGVyYXRpb246ICgpID0+IFQpOiBUIHtcbiAgICBjb25zdCB3YXNJbnRlcm5hbE9wZXJhdGlvbiA9IHRoaXMuaXNJbnRlcm5hbE9wZXJhdGlvbjtcbiAgICB0aGlzLmlzSW50ZXJuYWxPcGVyYXRpb24gPSB0cnVlO1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gb3BlcmF0aW9uKCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuaXNJbnRlcm5hbE9wZXJhdGlvbiA9IHdhc0ludGVybmFsT3BlcmF0aW9uO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDmnKzlnLDniYjmnKznmoTnu5/kuIDlpLTlg4/ojrflj5blh73mlbBcbiAgICog6YG/5YWN5b6q546v5L6d6LWW6Zeu6aKYXG4gICAqL1xuICBwcml2YXRlIGdldFVuaWZpZWRVc2VyQXZhdGFyU3luY0xvY2FsKCk6IHN0cmluZyB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIOS8mOWFiOS7jkdsb2JhbFVzZXJNYW5hZ2Vy6I635Y+W5oyB5LmF5YyW55qE5aS05YOP5pWw5o2uXG4gICAgICBjb25zdCB7IEdsb2JhbFVzZXJNYW5hZ2VyIH0gPSByZXF1aXJlKCcuLi9wcm9maWxlL0dsb2JhbFVzZXJNYW5hZ2VyJyk7XG4gICAgICBjb25zdCBnbG9iYWxVc2VyTWFuYWdlciA9IEdsb2JhbFVzZXJNYW5hZ2VyLmdldEluc3RhbmNlKCk7XG4gICAgICBjb25zdCB1c2VyRGF0YSA9IGdsb2JhbFVzZXJNYW5hZ2VyLmdldEN1cnJlbnRVc2VyRGF0YSgpO1xuXG4gICAgICAvLyDlpoLmnpzmnInoh6rlrprkuYnlpLTlg4/mlbDmja7vvIzkvJjlhYjkvb/nlKhcbiAgICAgIGlmICh1c2VyRGF0YT8uaXNDdXN0b20gJiYgdXNlckRhdGEuYXZhdGFyKSB7XG4gICAgICAgIHJldHVybiB1c2VyRGF0YS5hdmF0YXI7XG4gICAgICB9XG5cbiAgICAgIC8vIOWwneivleS7jue8k+WtmOiOt+WPllxuICAgICAgY29uc3QgY2FjaGVkID0gZ2V0Q2FjaGVkVXNlckF2YXRhcigpO1xuICAgICAgaWYgKGNhY2hlZCkge1xuICAgICAgICByZXR1cm4gY2FjaGVkO1xuICAgICAgfVxuXG4gICAgICAvLyDkvb/nlKjnroDljJbnmoTlpLTlg4/ojrflj5ZcbiAgICAgIGNvbnN0IHNpbXBsZSA9IGdldFNpbXBsZVVzZXJBdmF0YXIoKTtcbiAgICAgIGlmIChzaW1wbGUgJiYgc2ltcGxlICE9PSAnaHR0cHM6Ly9maWxlcy5jYXRib3gubW9lL3U4Y2N5NS5qcGcnKSB7XG4gICAgICAgIHJldHVybiBzaW1wbGU7XG4gICAgICB9XG5cbiAgICAgIC8vIOS9v+eUqOS8oOe7n+eahOWktOWDj+iOt+WPllxuICAgICAgcmV0dXJuIGdldFVzZXJBdmF0YXIoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCdbQXZhdGFyU3luYy5nZXRVbmlmaWVkVXNlckF2YXRhclN5bmNMb2NhbF0g6I635Y+W5aS05YOP5aSx6LSlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiAnaHR0cHM6Ly9maWxlcy5jYXRib3gubW9lL3U4Y2N5NS5qcGcnO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDml6Xlv5fovpPlh7pcbiAgICovXG4gIHByaXZhdGUgbG9nKG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICh0aGlzLm9wdGlvbnMuZGVidWcpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBbQXZhdGFyU3luY10gJHttZXNzYWdlfWApO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIOS+v+aNt+eahOWktOWDj+WQjOatpea3t+WFpeexu1xuICovXG5leHBvcnQgY2xhc3MgU2ltcGxlQXZhdGFyTWl4aW4ge1xuICBwcml2YXRlIGF2YXRhclN5bmM6IEF2YXRhclN5bmM7XG4gIHByaXZhdGUgcmVnaXN0ZXJlZEVsZW1lbnRzOiBTZXQ8SFRNTEVsZW1lbnQ+ID0gbmV3IFNldCgpO1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBBdmF0YXJTeW5jT3B0aW9ucykge1xuICAgIHRoaXMuYXZhdGFyU3luYyA9IEF2YXRhclN5bmMuZ2V0SW5zdGFuY2Uob3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICog5rOo5YaM5aS05YOP5YWD57SgXG4gICAqL1xuICByZWdpc3RlcihlbGVtZW50OiBIVE1MRWxlbWVudCwgY29uZmlnPzogRWxlbWVudENvbmZpZyB8ICdpbWcnIHwgJ2JhY2tncm91bmQnKTogdm9pZCB7XG4gICAgdGhpcy5hdmF0YXJTeW5jLnJlZ2lzdGVyRWxlbWVudChlbGVtZW50LCBjb25maWcgfHwgJ2JhY2tncm91bmQnKTtcbiAgICB0aGlzLnJlZ2lzdGVyZWRFbGVtZW50cy5hZGQoZWxlbWVudCk7XG4gIH1cblxuICAvKipcbiAgICog5Y+W5raI5rOo5YaM5aS05YOP5YWD57SgXG4gICAqL1xuICB1bnJlZ2lzdGVyKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgdGhpcy5hdmF0YXJTeW5jLnVucmVnaXN0ZXJFbGVtZW50KGVsZW1lbnQpO1xuICAgIHRoaXMucmVnaXN0ZXJlZEVsZW1lbnRzLmRlbGV0ZShlbGVtZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDoh6rliqjms6jlhozpobXpnaLkuK3nmoTlpLTlg4/lhYPntKBcbiAgICovXG4gIGF1dG9SZWdpc3RlcigpOiB2b2lkIHtcbiAgICB0aGlzLmF2YXRhclN5bmMuYXV0b1JlZ2lzdGVyKCk7XG4gIH1cblxuICAvKipcbiAgICog5by65Yi25pu05paw5aS05YOPXG4gICAqL1xuICBmb3JjZVVwZGF0ZSgpOiB2b2lkIHtcbiAgICB0aGlzLmF2YXRhclN5bmMuZm9yY2VVcGRhdGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDplIDmr4Hmt7flhaVcbiAgICovXG4gIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy5yZWdpc3RlcmVkRWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgIHRoaXMuYXZhdGFyU3luYy51bnJlZ2lzdGVyRWxlbWVudChlbGVtZW50KTtcbiAgICB9KTtcbiAgICB0aGlzLnJlZ2lzdGVyZWRFbGVtZW50cy5jbGVhcigpO1xuICB9XG59XG5cbi8vIOWvvOWHuuWFqOWxgOWunuS+iyAtIOemgeeUqOWumuaXtuWQjOatpeWSjOiwg+ivleaXpeW/l++8jOS9v+eUqOS6i+S7tumpseWKqFxuZXhwb3J0IGNvbnN0IGF2YXRhclN5bmMgPSBBdmF0YXJTeW5jLmdldEluc3RhbmNlKHtcbiAgZGVidWc6IGZhbHNlLFxuICBlbmFibGVQZXJpb2RpY1N5bmM6IGZhbHNlLFxufSk7XG5cbi8qKlxuICog5L6/5o235Ye95pWw77ya5rOo5YaM5aS05YOP5YWD57SgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckF2YXRhckVsZW1lbnQoZWxlbWVudDogSFRNTEVsZW1lbnQsIGNvbmZpZz86IEVsZW1lbnRDb25maWcgfCAnaW1nJyB8ICdiYWNrZ3JvdW5kJyk6IHZvaWQge1xuICBhdmF0YXJTeW5jLnJlZ2lzdGVyRWxlbWVudChlbGVtZW50LCBjb25maWcpO1xufVxuXG4vKipcbiAqIOS+v+aNt+WHveaVsO+8muiHquWKqOazqOWGjOmhtemdouS4reeahOWktOWDj+WFg+e0oFxuICovXG5leHBvcnQgZnVuY3Rpb24gYXV0b1JlZ2lzdGVyQXZhdGFycygpOiB2b2lkIHtcbiAgYXZhdGFyU3luYy5hdXRvUmVnaXN0ZXIoKTtcbn1cblxuLyoqXG4gKiDkvr/mjbflh73mlbDvvJrlvLrliLbmm7TmlrDmiYDmnInlpLTlg49cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcmNlVXBkYXRlQXZhdGFycyhuZXdBdmF0YXJVcmw/OiBzdHJpbmcpOiB2b2lkIHtcbiAgYXZhdGFyU3luYy5mb3JjZVVwZGF0ZShuZXdBdmF0YXJVcmwpO1xufVxuXG4vKipcbiAqIOS+v+aNt+WHveaVsO+8muaJi+WKqOWQjOatpeWktOWDj1xuICovXG5leHBvcnQgZnVuY3Rpb24gc3luY0F2YXRhcnMoKTogdm9pZCB7XG4gIGF2YXRhclN5bmMuc3luYygpO1xufVxuXG4vKipcbiAqIOS+v+aNt+WHveaVsO+8muazqOWGjG1lbWJlci1hdmF0YXLlhYPntKBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyTWVtYmVyQXZhdGFyRWxlbWVudChlbGVtZW50OiBIVE1MRWxlbWVudCwgbWVtYmVySWQ6IHN0cmluZyk6IHZvaWQge1xuICBjb25zdCBjb25maWc6IEVsZW1lbnRDb25maWcgPSB7XG4gICAgdHlwZTogJ21lbWJlci1hdmF0YXInLFxuICAgIG1lbWJlcklkLFxuICAgIHZhbGlkYXRvcjogZWwgPT4gZG9jdW1lbnQuY29udGFpbnMoZWwpLFxuICB9O1xuICBhdmF0YXJTeW5jLnJlZ2lzdGVyRWxlbWVudChlbGVtZW50LCBjb25maWcpO1xufVxuXG4vKipcbiAqIOS+v+aNt+WHveaVsO+8muiOt+WPluiwg+ivleS/oeaBr1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXZhdGFyU3luY0RlYnVnSW5mbygpOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcbiAgcmV0dXJuIGF2YXRhclN5bmMuZ2V0RGVidWdJbmZvKCk7XG59XG5cbi8qKlxuICog5L6/5o235Ye95pWw77ya6I635Y+W5oiQ5ZGY5aS05YOP57uf6K6hXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRNZW1iZXJBdmF0YXJTdGF0cygpOiBSZWNvcmQ8c3RyaW5nLCB7IGNvdW50OiBudW1iZXI7IGVsZW1lbnRzOiBIVE1MRWxlbWVudFtdIH0+IHtcbiAgcmV0dXJuIGF2YXRhclN5bmMuZ2V0TWVtYmVyQXZhdGFyU3RhdHMoKTtcbn1cblxuLyoqXG4gKiDkvr/mjbflh73mlbDvvJrmuIXnkIbml6DmlYjlhYPntKBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFudXBJbnZhbGlkQXZhdGFyRWxlbWVudHMoKTogdm9pZCB7XG4gIC8vIOinpuWPkeS4gOasoeWQjOatpe+8jOS8muiHquWKqOa4heeQhuaXoOaViOWFg+e0oFxuICBhdmF0YXJTeW5jLnN5bmMoKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/utils/AvatarSync.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/utils/BearContentExtractor.ts": 
  /*!*****************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/utils/BearContentExtractor.ts ***!
  \*****************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BearContentExtractor: () => (/* binding */ BearContentExtractor)\n/* harmony export */ });\n/**\n * Bear容器内容提取工具类\n * 提供统一的Bear标签内容提取和处理方法\n */\nclass BearContentExtractor {\n    // Bear容器正则表达式\n    static BEAR_REGEX = /<bear>([\\s\\S]*?)<\\/bear>/g;\n    static SINGLE_BEAR_REGEX = /<bear>([\\s\\S]*?)<\\/bear>/;\n    /**\n     * 从文本中提取第一个Bear容器的内容\n     * @param text 输入文本\n     * @returns 提取结果\n     */\n    static extractFirst(text) {\n        try {\n            if (!text || typeof text !== 'string') {\n                return {\n                    success: false,\n                    content: null,\n                    error: '输入文本无效',\n                };\n            }\n            const match = text.match(this.SINGLE_BEAR_REGEX);\n            if (match && match[1] !== undefined) {\n                return {\n                    success: true,\n                    content: match[1].trim(),\n                };\n            }\n            return {\n                success: false,\n                content: null,\n                error: '未找到Bear容器',\n            };\n        }\n        catch (error) {\n            return {\n                success: false,\n                content: null,\n                error: `提取失败: ${error instanceof Error ? error.message : String(error)}`,\n            };\n        }\n    }\n    /**\n     * 从文本中提取最后一个Bear容器的内容\n     * @param text 输入文本\n     * @returns 提取结果\n     */\n    static extractLast(text) {\n        try {\n            if (!text || typeof text !== 'string') {\n                return {\n                    success: false,\n                    content: null,\n                    error: '输入文本无效',\n                };\n            }\n            const matches = [...text.matchAll(this.BEAR_REGEX)];\n            if (matches.length > 0) {\n                const lastMatch = matches[matches.length - 1];\n                return {\n                    success: true,\n                    content: lastMatch[1].trim(),\n                };\n            }\n            return {\n                success: false,\n                content: null,\n                error: '未找到Bear容器',\n            };\n        }\n        catch (error) {\n            return {\n                success: false,\n                content: null,\n                error: `提取失败: ${error instanceof Error ? error.message : String(error)}`,\n            };\n        }\n    }\n    /**\n     * 从文本中提取所有Bear容器的内容\n     * @param text 输入文本\n     * @returns 提取结果\n     */\n    static extractAll(text) {\n        try {\n            if (!text || typeof text !== 'string') {\n                return {\n                    success: false,\n                    contents: [],\n                    totalFound: 0,\n                    error: '输入文本无效',\n                };\n            }\n            const matches = [...text.matchAll(this.BEAR_REGEX)];\n            const contents = matches.map(match => match[1].trim());\n            return {\n                success: true,\n                contents,\n                totalFound: contents.length,\n            };\n        }\n        catch (error) {\n            return {\n                success: false,\n                contents: [],\n                totalFound: 0,\n                error: `提取失败: ${error instanceof Error ? error.message : String(error)}`,\n            };\n        }\n    }\n    /**\n     * 从消息数组中提取所有Bear容器内容\n     * @param messages 消息数组\n     * @returns 提取结果\n     */\n    static extractFromMessages(messages) {\n        try {\n            if (!Array.isArray(messages)) {\n                return {\n                    success: false,\n                    contents: [],\n                    totalFound: 0,\n                    error: '消息数组无效',\n                };\n            }\n            const allContents = [];\n            for (const msg of messages) {\n                const content = msg.message || '';\n                if (typeof content === 'string') {\n                    const result = this.extractAll(content);\n                    if (result.success) {\n                        allContents.push(...result.contents);\n                    }\n                }\n            }\n            return {\n                success: true,\n                contents: allContents,\n                totalFound: allContents.length,\n            };\n        }\n        catch (error) {\n            return {\n                success: false,\n                contents: [],\n                totalFound: 0,\n                error: `从消息提取失败: ${error instanceof Error ? error.message : String(error)}`,\n            };\n        }\n    }\n    /**\n     * 检查文本是否包含Bear容器\n     * @param text 输入文本\n     * @returns 是否包含Bear容器\n     */\n    static hasBearContent(text) {\n        if (!text || typeof text !== 'string') {\n            return false;\n        }\n        return this.SINGLE_BEAR_REGEX.test(text);\n    }\n    /**\n     * 统计文本中Bear容器的数量\n     * @param text 输入文本\n     * @returns Bear容器数量\n     */\n    static countBearContainers(text) {\n        if (!text || typeof text !== 'string') {\n            return 0;\n        }\n        const matches = [...text.matchAll(this.BEAR_REGEX)];\n        return matches.length;\n    }\n    /**\n     * 替换文本中的Bear容器内容（只替换内容，保留标签）\n     * @param originalText 原始文本\n     * @param newContent 新的Bear内容\n     * @param replaceAll 是否替换所有Bear容器（默认只替换第一个）\n     * @returns 替换后的文本\n     */\n    static replaceBearContent(originalText, newContent, replaceAll = false) {\n        if (!originalText || typeof originalText !== 'string') {\n            return `<bear>${newContent}</bear>`;\n        }\n        if (replaceAll) {\n            return originalText.replace(this.BEAR_REGEX, `<bear>${newContent}</bear>`);\n        }\n        else {\n            return originalText.replace(this.SINGLE_BEAR_REGEX, `<bear>${newContent}</bear>`);\n        }\n    }\n    /**\n     * 在文本中添加Bear容器（如果不存在）或替换现有内容\n     * @param originalText 原始文本\n     * @param bearContent Bear内容\n     * @returns 处理后的文本\n     */\n    static ensureBearContent(originalText, bearContent) {\n        if (!originalText || typeof originalText !== 'string') {\n            return `<bear>${bearContent}</bear>`;\n        }\n        if (this.hasBearContent(originalText)) {\n            return this.replaceBearContent(originalText, bearContent, false);\n        }\n        else {\n            return `${originalText}<bear>${bearContent}</bear>`;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvdXRpbHMvQmVhckNvbnRlbnRFeHRyYWN0b3IudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7R0FHRztBQWVJLE1BQU0sb0JBQW9CO0lBQy9CLGNBQWM7SUFDTixNQUFNLENBQVUsVUFBVSxHQUFHLDJCQUEyQixDQUFDO0lBQ3pELE1BQU0sQ0FBVSxpQkFBaUIsR0FBRywwQkFBMEIsQ0FBQztJQUV2RTs7OztPQUlHO0lBQ0ksTUFBTSxDQUFDLFlBQVksQ0FBQyxJQUFZO1FBQ3JDLElBQUksQ0FBQztZQUNILElBQUksQ0FBQyxJQUFJLElBQUksT0FBTyxJQUFJLEtBQUssUUFBUSxFQUFFLENBQUM7Z0JBQ3RDLE9BQU87b0JBQ0wsT0FBTyxFQUFFLEtBQUs7b0JBQ2QsT0FBTyxFQUFFLElBQUk7b0JBQ2IsS0FBSyxFQUFFLFFBQVE7aUJBQ2hCLENBQUM7WUFDSixDQUFDO1lBRUQsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQztZQUVqRCxJQUFJLEtBQUssSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssU0FBUyxFQUFFLENBQUM7Z0JBQ3BDLE9BQU87b0JBQ0wsT0FBTyxFQUFFLElBQUk7b0JBQ2IsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUU7aUJBQ3pCLENBQUM7WUFDSixDQUFDO1lBRUQsT0FBTztnQkFDTCxPQUFPLEVBQUUsS0FBSztnQkFDZCxPQUFPLEVBQUUsSUFBSTtnQkFDYixLQUFLLEVBQUUsV0FBVzthQUNuQixDQUFDO1FBQ0osQ0FBQztRQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7WUFDZixPQUFPO2dCQUNMLE9BQU8sRUFBRSxLQUFLO2dCQUNkLE9BQU8sRUFBRSxJQUFJO2dCQUNiLEtBQUssRUFBRSxTQUFTLEtBQUssWUFBWSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRTthQUN6RSxDQUFDO1FBQ0osQ0FBQztJQUNILENBQUM7SUFFRDs7OztPQUlHO0lBQ0ksTUFBTSxDQUFDLFdBQVcsQ0FBQyxJQUFZO1FBQ3BDLElBQUksQ0FBQztZQUNILElBQUksQ0FBQyxJQUFJLElBQUksT0FBTyxJQUFJLEtBQUssUUFBUSxFQUFFLENBQUM7Z0JBQ3RDLE9BQU87b0JBQ0wsT0FBTyxFQUFFLEtBQUs7b0JBQ2QsT0FBTyxFQUFFLElBQUk7b0JBQ2IsS0FBSyxFQUFFLFFBQVE7aUJBQ2hCLENBQUM7WUFDSixDQUFDO1lBRUQsTUFBTSxPQUFPLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7WUFFcEQsSUFBSSxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO2dCQUN2QixNQUFNLFNBQVMsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDOUMsT0FBTztvQkFDTCxPQUFPLEVBQUUsSUFBSTtvQkFDYixPQUFPLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRTtpQkFDN0IsQ0FBQztZQUNKLENBQUM7WUFFRCxPQUFPO2dCQUNMLE9BQU8sRUFBRSxLQUFLO2dCQUNkLE9BQU8sRUFBRSxJQUFJO2dCQUNiLEtBQUssRUFBRSxXQUFXO2FBQ25CLENBQUM7UUFDSixDQUFDO1FBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNmLE9BQU87Z0JBQ0wsT0FBTyxFQUFFLEtBQUs7Z0JBQ2QsT0FBTyxFQUFFLElBQUk7Z0JBQ2IsS0FBSyxFQUFFLFNBQVMsS0FBSyxZQUFZLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFO2FBQ3pFLENBQUM7UUFDSixDQUFDO0lBQ0gsQ0FBQztJQUVEOzs7O09BSUc7SUFDSSxNQUFNLENBQUMsVUFBVSxDQUFDLElBQVk7UUFDbkMsSUFBSSxDQUFDO1lBQ0gsSUFBSSxDQUFDLElBQUksSUFBSSxPQUFPLElBQUksS0FBSyxRQUFRLEVBQUUsQ0FBQztnQkFDdEMsT0FBTztvQkFDTCxPQUFPLEVBQUUsS0FBSztvQkFDZCxRQUFRLEVBQUUsRUFBRTtvQkFDWixVQUFVLEVBQUUsQ0FBQztvQkFDYixLQUFLLEVBQUUsUUFBUTtpQkFDaEIsQ0FBQztZQUNKLENBQUM7WUFFRCxNQUFNLE9BQU8sR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztZQUNwRCxNQUFNLFFBQVEsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7WUFFdkQsT0FBTztnQkFDTCxPQUFPLEVBQUUsSUFBSTtnQkFDYixRQUFRO2dCQUNSLFVBQVUsRUFBRSxRQUFRLENBQUMsTUFBTTthQUM1QixDQUFDO1FBQ0osQ0FBQztRQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7WUFDZixPQUFPO2dCQUNMLE9BQU8sRUFBRSxLQUFLO2dCQUNkLFFBQVEsRUFBRSxFQUFFO2dCQUNaLFVBQVUsRUFBRSxDQUFDO2dCQUNiLEtBQUssRUFBRSxTQUFTLEtBQUssWUFBWSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRTthQUN6RSxDQUFDO1FBQ0osQ0FBQztJQUNILENBQUM7SUFFRDs7OztPQUlHO0lBQ0ksTUFBTSxDQUFDLG1CQUFtQixDQUFDLFFBQWU7UUFDL0MsSUFBSSxDQUFDO1lBQ0gsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQztnQkFDN0IsT0FBTztvQkFDTCxPQUFPLEVBQUUsS0FBSztvQkFDZCxRQUFRLEVBQUUsRUFBRTtvQkFDWixVQUFVLEVBQUUsQ0FBQztvQkFDYixLQUFLLEVBQUUsUUFBUTtpQkFDaEIsQ0FBQztZQUNKLENBQUM7WUFFRCxNQUFNLFdBQVcsR0FBYSxFQUFFLENBQUM7WUFFakMsS0FBSyxNQUFNLEdBQUcsSUFBSSxRQUFRLEVBQUUsQ0FBQztnQkFDM0IsTUFBTSxPQUFPLEdBQUcsR0FBRyxDQUFDLE9BQU8sSUFBSSxFQUFFLENBQUM7Z0JBQ2xDLElBQUksT0FBTyxPQUFPLEtBQUssUUFBUSxFQUFFLENBQUM7b0JBQ2hDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUM7b0JBQ3hDLElBQUksTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDO3dCQUNuQixXQUFXLENBQUMsSUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO29CQUN2QyxDQUFDO2dCQUNILENBQUM7WUFDSCxDQUFDO1lBRUQsT0FBTztnQkFDTCxPQUFPLEVBQUUsSUFBSTtnQkFDYixRQUFRLEVBQUUsV0FBVztnQkFDckIsVUFBVSxFQUFFLFdBQVcsQ0FBQyxNQUFNO2FBQy9CLENBQUM7UUFDSixDQUFDO1FBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNmLE9BQU87Z0JBQ0wsT0FBTyxFQUFFLEtBQUs7Z0JBQ2QsUUFBUSxFQUFFLEVBQUU7Z0JBQ1osVUFBVSxFQUFFLENBQUM7Z0JBQ2IsS0FBSyxFQUFFLFlBQVksS0FBSyxZQUFZLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFO2FBQzVFLENBQUM7UUFDSixDQUFDO0lBQ0gsQ0FBQztJQUVEOzs7O09BSUc7SUFDSSxNQUFNLENBQUMsY0FBYyxDQUFDLElBQVk7UUFDdkMsSUFBSSxDQUFDLElBQUksSUFBSSxPQUFPLElBQUksS0FBSyxRQUFRLEVBQUUsQ0FBQztZQUN0QyxPQUFPLEtBQUssQ0FBQztRQUNmLENBQUM7UUFDRCxPQUFPLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDM0MsQ0FBQztJQUVEOzs7O09BSUc7SUFDSSxNQUFNLENBQUMsbUJBQW1CLENBQUMsSUFBWTtRQUM1QyxJQUFJLENBQUMsSUFBSSxJQUFJLE9BQU8sSUFBSSxLQUFLLFFBQVEsRUFBRSxDQUFDO1lBQ3RDLE9BQU8sQ0FBQyxDQUFDO1FBQ1gsQ0FBQztRQUNELE1BQU0sT0FBTyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO1FBQ3BELE9BQU8sT0FBTyxDQUFDLE1BQU0sQ0FBQztJQUN4QixDQUFDO0lBRUQ7Ozs7OztPQU1HO0lBQ0ksTUFBTSxDQUFDLGtCQUFrQixDQUFDLFlBQW9CLEVBQUUsVUFBa0IsRUFBRSxhQUFzQixLQUFLO1FBQ3BHLElBQUksQ0FBQyxZQUFZLElBQUksT0FBTyxZQUFZLEtBQUssUUFBUSxFQUFFLENBQUM7WUFDdEQsT0FBTyxTQUFTLFVBQVUsU0FBUyxDQUFDO1FBQ3RDLENBQUM7UUFFRCxJQUFJLFVBQVUsRUFBRSxDQUFDO1lBQ2YsT0FBTyxZQUFZLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsU0FBUyxVQUFVLFNBQVMsQ0FBQyxDQUFDO1FBQzdFLENBQUM7YUFBTSxDQUFDO1lBQ04sT0FBTyxZQUFZLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxTQUFTLFVBQVUsU0FBUyxDQUFDLENBQUM7UUFDcEYsQ0FBQztJQUNILENBQUM7SUFFRDs7Ozs7T0FLRztJQUNJLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxZQUFvQixFQUFFLFdBQW1CO1FBQ3ZFLElBQUksQ0FBQyxZQUFZLElBQUksT0FBTyxZQUFZLEtBQUssUUFBUSxFQUFFLENBQUM7WUFDdEQsT0FBTyxTQUFTLFdBQVcsU0FBUyxDQUFDO1FBQ3ZDLENBQUM7UUFFRCxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQztZQUN0QyxPQUFPLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxZQUFZLEVBQUUsV0FBVyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ25FLENBQUM7YUFBTSxDQUFDO1lBQ04sT0FBTyxHQUFHLFlBQVksU0FBUyxXQUFXLFNBQVMsQ0FBQztRQUN0RCxDQUFDO0lBQ0gsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvdXRpbHMvQmVhckNvbnRlbnRFeHRyYWN0b3IudHM/Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBCZWFy5a655Zmo5YaF5a655o+Q5Y+W5bel5YW357G7XHJcbiAqIOaPkOS+m+e7n+S4gOeahEJlYXLmoIfnrb7lhoXlrrnmj5Dlj5blkozlpITnkIbmlrnms5VcclxuICovXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEJlYXJFeHRyYWN0aW9uUmVzdWx0IHtcclxuICBzdWNjZXNzOiBib29sZWFuO1xyXG4gIGNvbnRlbnQ6IHN0cmluZyB8IG51bGw7XHJcbiAgZXJyb3I/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTXVsdGlwbGVCZWFyRXh0cmFjdGlvblJlc3VsdCB7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICBjb250ZW50czogc3RyaW5nW107XHJcbiAgdG90YWxGb3VuZDogbnVtYmVyO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQmVhckNvbnRlbnRFeHRyYWN0b3Ige1xyXG4gIC8vIEJlYXLlrrnlmajmraPliJnooajovr7lvI9cclxuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBCRUFSX1JFR0VYID0gLzxiZWFyPihbXFxzXFxTXSo/KTxcXC9iZWFyPi9nO1xyXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IFNJTkdMRV9CRUFSX1JFR0VYID0gLzxiZWFyPihbXFxzXFxTXSo/KTxcXC9iZWFyPi87XHJcblxyXG4gIC8qKlxyXG4gICAqIOS7juaWh+acrOS4reaPkOWPluesrOS4gOS4qkJlYXLlrrnlmajnmoTlhoXlrrlcclxuICAgKiBAcGFyYW0gdGV4dCDovpPlhaXmlofmnKxcclxuICAgKiBAcmV0dXJucyDmj5Dlj5bnu5PmnpxcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGV4dHJhY3RGaXJzdCh0ZXh0OiBzdHJpbmcpOiBCZWFyRXh0cmFjdGlvblJlc3VsdCB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAoIXRleHQgfHwgdHlwZW9mIHRleHQgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgY29udGVudDogbnVsbCxcclxuICAgICAgICAgIGVycm9yOiAn6L6T5YWl5paH5pys5peg5pWIJyxcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBtYXRjaCA9IHRleHQubWF0Y2godGhpcy5TSU5HTEVfQkVBUl9SRUdFWCk7XHJcblxyXG4gICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgY29udGVudDogbWF0Y2hbMV0udHJpbSgpLFxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgY29udGVudDogbnVsbCxcclxuICAgICAgICBlcnJvcjogJ+acquaJvuWIsEJlYXLlrrnlmagnLFxyXG4gICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBjb250ZW50OiBudWxsLFxyXG4gICAgICAgIGVycm9yOiBg5o+Q5Y+W5aSx6LSlOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKX1gLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5LuO5paH5pys5Lit5o+Q5Y+W5pyA5ZCO5LiA5LiqQmVhcuWuueWZqOeahOWGheWuuVxyXG4gICAqIEBwYXJhbSB0ZXh0IOi+k+WFpeaWh+acrFxyXG4gICAqIEByZXR1cm5zIOaPkOWPlue7k+aenFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZXh0cmFjdExhc3QodGV4dDogc3RyaW5nKTogQmVhckV4dHJhY3Rpb25SZXN1bHQge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKCF0ZXh0IHx8IHR5cGVvZiB0ZXh0ICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgIGNvbnRlbnQ6IG51bGwsXHJcbiAgICAgICAgICBlcnJvcjogJ+i+k+WFpeaWh+acrOaXoOaViCcsXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgbWF0Y2hlcyA9IFsuLi50ZXh0Lm1hdGNoQWxsKHRoaXMuQkVBUl9SRUdFWCldO1xyXG5cclxuICAgICAgaWYgKG1hdGNoZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGxhc3RNYXRjaCA9IG1hdGNoZXNbbWF0Y2hlcy5sZW5ndGggLSAxXTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgIGNvbnRlbnQ6IGxhc3RNYXRjaFsxXS50cmltKCksXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBjb250ZW50OiBudWxsLFxyXG4gICAgICAgIGVycm9yOiAn5pyq5om+5YiwQmVhcuWuueWZqCcsXHJcbiAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGNvbnRlbnQ6IG51bGwsXHJcbiAgICAgICAgZXJyb3I6IGDmj5Dlj5blpLHotKU6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpfWAsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDku47mlofmnKzkuK3mj5Dlj5bmiYDmnIlCZWFy5a655Zmo55qE5YaF5a65XHJcbiAgICogQHBhcmFtIHRleHQg6L6T5YWl5paH5pysXHJcbiAgICogQHJldHVybnMg5o+Q5Y+W57uT5p6cXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBleHRyYWN0QWxsKHRleHQ6IHN0cmluZyk6IE11bHRpcGxlQmVhckV4dHJhY3Rpb25SZXN1bHQge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKCF0ZXh0IHx8IHR5cGVvZiB0ZXh0ICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgIGNvbnRlbnRzOiBbXSxcclxuICAgICAgICAgIHRvdGFsRm91bmQ6IDAsXHJcbiAgICAgICAgICBlcnJvcjogJ+i+k+WFpeaWh+acrOaXoOaViCcsXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgbWF0Y2hlcyA9IFsuLi50ZXh0Lm1hdGNoQWxsKHRoaXMuQkVBUl9SRUdFWCldO1xyXG4gICAgICBjb25zdCBjb250ZW50cyA9IG1hdGNoZXMubWFwKG1hdGNoID0+IG1hdGNoWzFdLnRyaW0oKSk7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgY29udGVudHMsXHJcbiAgICAgICAgdG90YWxGb3VuZDogY29udGVudHMubGVuZ3RoLFxyXG4gICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBjb250ZW50czogW10sXHJcbiAgICAgICAgdG90YWxGb3VuZDogMCxcclxuICAgICAgICBlcnJvcjogYOaPkOWPluWksei0pTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9YCxcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOS7jua2iOaBr+aVsOe7hOS4reaPkOWPluaJgOaciUJlYXLlrrnlmajlhoXlrrlcclxuICAgKiBAcGFyYW0gbWVzc2FnZXMg5raI5oGv5pWw57uEXHJcbiAgICogQHJldHVybnMg5o+Q5Y+W57uT5p6cXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBleHRyYWN0RnJvbU1lc3NhZ2VzKG1lc3NhZ2VzOiBhbnlbXSk6IE11bHRpcGxlQmVhckV4dHJhY3Rpb25SZXN1bHQge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG1lc3NhZ2VzKSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgIGNvbnRlbnRzOiBbXSxcclxuICAgICAgICAgIHRvdGFsRm91bmQ6IDAsXHJcbiAgICAgICAgICBlcnJvcjogJ+a2iOaBr+aVsOe7hOaXoOaViCcsXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgYWxsQ29udGVudHM6IHN0cmluZ1tdID0gW107XHJcblxyXG4gICAgICBmb3IgKGNvbnN0IG1zZyBvZiBtZXNzYWdlcykge1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBtc2cubWVzc2FnZSB8fCAnJztcclxuICAgICAgICBpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmV4dHJhY3RBbGwoY29udGVudCk7XHJcbiAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgYWxsQ29udGVudHMucHVzaCguLi5yZXN1bHQuY29udGVudHMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIGNvbnRlbnRzOiBhbGxDb250ZW50cyxcclxuICAgICAgICB0b3RhbEZvdW5kOiBhbGxDb250ZW50cy5sZW5ndGgsXHJcbiAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGNvbnRlbnRzOiBbXSxcclxuICAgICAgICB0b3RhbEZvdW5kOiAwLFxyXG4gICAgICAgIGVycm9yOiBg5LuO5raI5oGv5o+Q5Y+W5aSx6LSlOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKX1gLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5qOA5p+l5paH5pys5piv5ZCm5YyF5ZCrQmVhcuWuueWZqFxyXG4gICAqIEBwYXJhbSB0ZXh0IOi+k+WFpeaWh+acrFxyXG4gICAqIEByZXR1cm5zIOaYr+WQpuWMheWQq0JlYXLlrrnlmahcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGhhc0JlYXJDb250ZW50KHRleHQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgaWYgKCF0ZXh0IHx8IHR5cGVvZiB0ZXh0ICE9PSAnc3RyaW5nJykge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5TSU5HTEVfQkVBUl9SRUdFWC50ZXN0KHRleHQpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog57uf6K6h5paH5pys5LitQmVhcuWuueWZqOeahOaVsOmHj1xyXG4gICAqIEBwYXJhbSB0ZXh0IOi+k+WFpeaWh+acrFxyXG4gICAqIEByZXR1cm5zIEJlYXLlrrnlmajmlbDph49cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGNvdW50QmVhckNvbnRhaW5lcnModGV4dDogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgIGlmICghdGV4dCB8fCB0eXBlb2YgdGV4dCAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcbiAgICBjb25zdCBtYXRjaGVzID0gWy4uLnRleHQubWF0Y2hBbGwodGhpcy5CRUFSX1JFR0VYKV07XHJcbiAgICByZXR1cm4gbWF0Y2hlcy5sZW5ndGg7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmm7/mjaLmlofmnKzkuK3nmoRCZWFy5a655Zmo5YaF5a6577yI5Y+q5pu/5o2i5YaF5a6577yM5L+d55WZ5qCH562+77yJXHJcbiAgICogQHBhcmFtIG9yaWdpbmFsVGV4dCDljp/lp4vmlofmnKxcclxuICAgKiBAcGFyYW0gbmV3Q29udGVudCDmlrDnmoRCZWFy5YaF5a65XHJcbiAgICogQHBhcmFtIHJlcGxhY2VBbGwg5piv5ZCm5pu/5o2i5omA5pyJQmVhcuWuueWZqO+8iOm7mOiupOWPquabv+aNouesrOS4gOS4qu+8iVxyXG4gICAqIEByZXR1cm5zIOabv+aNouWQjueahOaWh+acrFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgcmVwbGFjZUJlYXJDb250ZW50KG9yaWdpbmFsVGV4dDogc3RyaW5nLCBuZXdDb250ZW50OiBzdHJpbmcsIHJlcGxhY2VBbGw6IGJvb2xlYW4gPSBmYWxzZSk6IHN0cmluZyB7XHJcbiAgICBpZiAoIW9yaWdpbmFsVGV4dCB8fCB0eXBlb2Ygb3JpZ2luYWxUZXh0ICE9PSAnc3RyaW5nJykge1xyXG4gICAgICByZXR1cm4gYDxiZWFyPiR7bmV3Q29udGVudH08L2JlYXI+YDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocmVwbGFjZUFsbCkge1xyXG4gICAgICByZXR1cm4gb3JpZ2luYWxUZXh0LnJlcGxhY2UodGhpcy5CRUFSX1JFR0VYLCBgPGJlYXI+JHtuZXdDb250ZW50fTwvYmVhcj5gKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBvcmlnaW5hbFRleHQucmVwbGFjZSh0aGlzLlNJTkdMRV9CRUFSX1JFR0VYLCBgPGJlYXI+JHtuZXdDb250ZW50fTwvYmVhcj5gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWcqOaWh+acrOS4rea3u+WKoEJlYXLlrrnlmajvvIjlpoLmnpzkuI3lrZjlnKjvvInmiJbmm7/mjaLnjrDmnInlhoXlrrlcclxuICAgKiBAcGFyYW0gb3JpZ2luYWxUZXh0IOWOn+Wni+aWh+acrFxyXG4gICAqIEBwYXJhbSBiZWFyQ29udGVudCBCZWFy5YaF5a65XHJcbiAgICogQHJldHVybnMg5aSE55CG5ZCO55qE5paH5pysXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBlbnN1cmVCZWFyQ29udGVudChvcmlnaW5hbFRleHQ6IHN0cmluZywgYmVhckNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBpZiAoIW9yaWdpbmFsVGV4dCB8fCB0eXBlb2Ygb3JpZ2luYWxUZXh0ICE9PSAnc3RyaW5nJykge1xyXG4gICAgICByZXR1cm4gYDxiZWFyPiR7YmVhckNvbnRlbnR9PC9iZWFyPmA7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuaGFzQmVhckNvbnRlbnQob3JpZ2luYWxUZXh0KSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5yZXBsYWNlQmVhckNvbnRlbnQob3JpZ2luYWxUZXh0LCBiZWFyQ29udGVudCwgZmFsc2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGAke29yaWdpbmFsVGV4dH08YmVhcj4ke2JlYXJDb250ZW50fTwvYmVhcj5gO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/utils/BearContentExtractor.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/utils/DynamicsDataProcessor.ts": 
  /*!******************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/utils/DynamicsDataProcessor.ts ***!
  \******************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DynamicsDataProcessor: () => (/* binding */ DynamicsDataProcessor)\n/* harmony export */ });\n/**\n * 动态数据处理工具类\n * 提供动态数据合并、去重等公共处理方法\n */\nclass DynamicsDataProcessor {\n    /**\n     * 合并点赞者列表（去重）\n     * @param existing 现有点赞者列表\n     * @param newLikes 新的点赞者列表\n     * @returns 合并后的点赞者列表\n     */\n    static mergeLikedBy(existing, newLikes) {\n        const likeSet = new Set(existing || []);\n        newLikes?.forEach(liker => likeSet.add(liker));\n        return Array.from(likeSet);\n    }\n    /**\n     * 合并评论列表（去重）\n     * @param existing 现有评论列表\n     * @param newComments 新的评论列表\n     * @returns 合并后的评论列表\n     */\n    static mergeComments(existing, newComments) {\n        const existingKeys = new Set();\n        const result = [...(existing || [])];\n        // 为现有评论生成更精确的指纹\n        existing?.forEach(c => {\n            const key = `${c.authorName}||${c.content}`;\n            existingKeys.add(key);\n        });\n        // 添加新评论，使用相同的指纹算法去重\n        const commentsToAdd = Array.isArray(newComments) ? newComments : [newComments];\n        commentsToAdd?.forEach(comment => {\n            if (!comment)\n                return; // 防止空评论\n            const key = `${comment.authorName}||${comment.content}`;\n            if (!existingKeys.has(key)) {\n                result.push(comment);\n                existingKeys.add(key);\n                console.log(`🆕 添加新评论: ${comment.authorName} - ${comment.content.substring(0, 20)}...`);\n            }\n            else {\n                console.log(`⚠️ 跳过重复评论: ${comment.authorName} - ${comment.content.substring(0, 20)}...`);\n            }\n        });\n        return result;\n    }\n    /**\n     * 合并动态的互动数据（点赞、评论）\n     * @param existing 现有动态数据\n     * @param newData 新的动态数据\n     */\n    static mergeInteractions(existing, newData) {\n        console.log(`🔄 合并动态 #${existing.no} 的互动数据`);\n        // 合并点赞者\n        if (newData.likedBy && newData.likedBy.length > 0) {\n            const oldLikesCount = existing.likedBy?.length || 0;\n            existing.likedBy = this.mergeLikedBy(existing.likedBy || [], newData.likedBy);\n            existing.likesCount = existing.likedBy.length;\n            console.log(`👍 点赞数据: ${oldLikesCount} -> ${existing.likesCount}`);\n        }\n        // 合并评论\n        if (newData.comments?.length > 0) {\n            const oldCommentsCount = existing.comments?.length || 0;\n            existing.comments = this.mergeComments(existing.comments || [], newData.comments);\n            console.log(`💬 评论数据: ${oldCommentsCount} -> ${existing.comments.length}`);\n        }\n        // 注意：分享数相关功能已删除，不再处理 sharesCount\n    }\n    /**\n     * 生成动态指纹（统一算法）\n     * @param dynamic 动态数据\n     * @returns 动态指纹字符串\n     */\n    static generateFingerprint(dynamic) {\n        return `${dynamic.no || 0}_${dynamic.authorName || ''}_${(dynamic.content || '').substring(0, 50)}`;\n    }\n    /**\n     * 补全动态数据的缺失字段\n     * @param existing 现有动态数据\n     * @param newData 新的动态数据\n     */\n    static fillMissingFields(existing, newData) {\n        // 文本/作者/图片：保留已存在值，缺失时用新的补全\n        if (!existing.content && newData.content)\n            existing.content = newData.content;\n        if (!existing.authorName && newData.authorName)\n            existing.authorName = newData.authorName;\n        if (!existing.imageDescription && newData.imageDescription)\n            existing.imageDescription = newData.imageDescription;\n        if (!existing.imageUrl && newData.imageUrl)\n            existing.imageUrl = newData.imageUrl;\n        if (!existing.timestamp && newData.timestamp)\n            existing.timestamp = newData.timestamp;\n    }\n    /**\n     * 验证动态数据的基本完整性\n     * @param dynamic 动态数据\n     * @returns 是否有效\n     */\n    static isValidDynamic(dynamic) {\n        return !!(dynamic.no !== undefined && dynamic.content && dynamic.authorName);\n    }\n    /**\n     * 深拷贝动态数据（避免引用问题）\n     * @param dynamic 原始动态数据\n     * @returns 深拷贝后的动态数据\n     */\n    static cloneDynamic(dynamic) {\n        return {\n            no: dynamic.no,\n            messageId: dynamic.messageId,\n            authorName: dynamic.authorName,\n            content: dynamic.content,\n            imageDescription: dynamic.imageDescription,\n            imageUrl: dynamic.imageUrl,\n            timestamp: dynamic.timestamp,\n            likesCount: dynamic.likesCount,\n            sharesCount: dynamic.sharesCount,\n            likedBy: dynamic.likedBy ? [...dynamic.likedBy] : [],\n            comments: dynamic.comments ? [...dynamic.comments] : [],\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvdXRpbHMvRHluYW1pY3NEYXRhUHJvY2Vzc29yLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7O0dBR0c7QUFJSSxNQUFNLHFCQUFxQjtJQUNoQzs7Ozs7T0FLRztJQUNILE1BQU0sQ0FBQyxZQUFZLENBQUMsUUFBa0IsRUFBRSxRQUFrQjtRQUN4RCxNQUFNLE9BQU8sR0FBRyxJQUFJLEdBQUcsQ0FBUyxRQUFRLElBQUksRUFBRSxDQUFDLENBQUM7UUFDaEQsUUFBUSxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUMvQyxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDN0IsQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0gsTUFBTSxDQUFDLGFBQWEsQ0FBQyxRQUEwQixFQUFFLFdBQTZCO1FBQzVFLE1BQU0sWUFBWSxHQUFHLElBQUksR0FBRyxFQUFVLENBQUM7UUFDdkMsTUFBTSxNQUFNLEdBQUcsQ0FBQyxHQUFHLENBQUMsUUFBUSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFFckMsZ0JBQWdCO1FBQ2hCLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUU7WUFDcEIsTUFBTSxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUMsVUFBVSxLQUFLLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUM1QyxZQUFZLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3hCLENBQUMsQ0FBQyxDQUFDO1FBRUgsb0JBQW9CO1FBQ3BCLE1BQU0sYUFBYSxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUMvRSxhQUFhLEVBQUUsT0FBTyxDQUFDLE9BQU8s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QUFXO1lBQ2hDLE9BQU8sRUFBRSxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO1lBQ3BELFFBQVEsRUFBRSxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO1NBQ3hELENBQUM7SUFDSixDQUFDO0NBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WkmuS6keeGii/lpIfku70v57uZcm92b+eahC9tb2R1bGVzL3V0aWxzL0R5bmFtaWNzRGF0YVByb2Nlc3Nvci50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIOWKqOaAgeaVsOaNruWkhOeQhuW3peWFt+exu1xyXG4gKiDmj5DkvpvliqjmgIHmlbDmja7lkIjlubbjgIHljrvph43nrYnlhazlhbHlpITnkIbmlrnms5VcclxuICovXHJcblxyXG5pbXBvcnQgeyBSYXdDb21tZW50RGF0YSwgUmF3UG9zdERhdGEgfSBmcm9tICcuLi9wYXJzZXJzL3R5cGVzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBEeW5hbWljc0RhdGFQcm9jZXNzb3Ige1xyXG4gIC8qKlxyXG4gICAqIOWQiOW5tueCuei1nuiAheWIl+ihqO+8iOWOu+mHje+8iVxyXG4gICAqIEBwYXJhbSBleGlzdGluZyDnjrDmnInngrnotZ7ogIXliJfooahcclxuICAgKiBAcGFyYW0gbmV3TGlrZXMg5paw55qE54K56LWe6ICF5YiX6KGoXHJcbiAgICogQHJldHVybnMg5ZCI5bm25ZCO55qE54K56LWe6ICF5YiX6KGoXHJcbiAgICovXHJcbiAgc3RhdGljIG1lcmdlTGlrZWRCeShleGlzdGluZzogc3RyaW5nW10sIG5ld0xpa2VzOiBzdHJpbmdbXSk6IHN0cmluZ1tdIHtcclxuICAgIGNvbnN0IGxpa2VTZXQgPSBuZXcgU2V0PHN0cmluZz4oZXhpc3RpbmcgfHwgW10pO1xyXG4gICAgbmV3TGlrZXM/LmZvckVhY2gobGlrZXIgPT4gbGlrZVNldC5hZGQobGlrZXIpKTtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKGxpa2VTZXQpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5ZCI5bm26K+E6K665YiX6KGo77yI5Y676YeN77yJXHJcbiAgICogQHBhcmFtIGV4aXN0aW5nIOeOsOacieivhOiuuuWIl+ihqFxyXG4gICAqIEBwYXJhbSBuZXdDb21tZW50cyDmlrDnmoTor4TorrrliJfooahcclxuICAgKiBAcmV0dXJucyDlkIjlubblkI7nmoTor4TorrrliJfooahcclxuICAgKi9cclxuICBzdGF0aWMgbWVyZ2VDb21tZW50cyhleGlzdGluZzogUmF3Q29tbWVudERhdGFbXSwgbmV3Q29tbWVudHM6IFJhd0NvbW1lbnREYXRhW10pOiBSYXdDb21tZW50RGF0YVtdIHtcclxuICAgIGNvbnN0IGV4aXN0aW5nS2V5cyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gWy4uLihleGlzdGluZyB8fCBbXSldO1xyXG5cclxuICAgIC8vIOS4uueOsOacieivhOiuuueUn+aIkOabtOeyvuehrueahOaMh+e6uVxyXG4gICAgZXhpc3Rpbmc/LmZvckVhY2goYyA9PiB7XHJcbiAgICAgIGNvbnN0IGtleSA9IGAke2MuYXV0aG9yTmFtZX18fCR7Yy5jb250ZW50fWA7XHJcbiAgICAgIGV4aXN0aW5nS2V5cy5hZGQoa2V5KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIOa3u+WKoOaWsOivhOiuuu+8jOS9v+eUqOebuOWQjOeahOaMh+e6ueeul+azleWOu+mHjVxyXG4gICAgY29uc3QgY29tbWVudHNUb0FkZCA9IEFycmF5LmlzQXJyYXkobmV3Q29tbWVudHMpID8gbmV3Q29tbWVudHMgOiBbbmV3Q29tbWVudHNdO1xyXG4gICAgY29tbWVudHNUb0FkZD8uZm9yRWFjaChjb21tZW50ID0+IHtcclxuICAgICAgaWYgKCFjb21tZW50KSByZXR1cm47IC8vIOmYsuatouepuuivhOiuulxyXG5cclxuICAgICAgY29uc3Qga2V5ID0gYCR7Y29tbWVudC5hdXRob3JOYW1lfXx8JHtjb21tZW50LmNvbnRlbnR9YDtcclxuICAgICAgaWYgKCFleGlzdGluZ0tleXMuaGFzKGtleSkpIHtcclxuICAgICAgICByZXN1bHQucHVzaChjb21tZW50KTtcclxuICAgICAgICBleGlzdGluZ0tleXMuYWRkKGtleSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coYPCfhpUg5re75Yqg5paw6K+E6K66OiAke2NvbW1lbnQuYXV0aG9yTmFtZX0gLSAke2NvbW1lbnQuY29udGVudC5zdWJzdHJpbmcoMCwgMjApfS4uLmApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGDimqDvuI8g6Lez6L+H6YeN5aSN6K+E6K66OiAke2NvbW1lbnQuYXV0aG9yTmFtZX0gLSAke2NvbW1lbnQuY29udGVudC5zdWJzdHJpbmcoMCwgMjApfS4uLmApO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5ZCI5bm25Yqo5oCB55qE5LqS5Yqo5pWw5o2u77yI54K56LWe44CB6K+E6K6677yJXHJcbiAgICogQHBhcmFtIGV4aXN0aW5nIOeOsOacieWKqOaAgeaVsOaNrlxyXG4gICAqIEBwYXJhbSBuZXdEYXRhIOaWsOeahOWKqOaAgeaVsOaNrlxyXG4gICAqL1xyXG4gIHN0YXRpYyBtZXJnZUludGVyYWN0aW9ucyhleGlzdGluZzogUmF3UG9zdERhdGEsIG5ld0RhdGE6IFJhd1Bvc3REYXRhKTogdm9pZCB7XHJcbiAgICBjb25zb2xlLmxvZyhg8J+UhCDlkIjlubbliqjmgIEgIyR7ZXhpc3Rpbmcubm99IOeahOS6kuWKqOaVsOaNrmApO1xyXG5cclxuICAgIC8vIOWQiOW5tueCuei1nuiAhVxyXG4gICAgaWYgKG5ld0RhdGEubGlrZWRCeSAmJiBuZXdEYXRhLmxpa2VkQnkubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zdCBvbGRMaWtlc0NvdW50ID0gZXhpc3RpbmcubGlrZWRCeT8ubGVuZ3RoIHx8IDA7XHJcbiAgICAgIGV4aXN0aW5nLmxpa2VkQnkgPSB0aGlzLm1lcmdlTGlrZWRCeShleGlzdGluZy5saWtlZEJ5IHx8IFtdLCBuZXdEYXRhLmxpa2VkQnkpO1xyXG4gICAgICBleGlzdGluZy5saWtlc0NvdW50ID0gZXhpc3RpbmcubGlrZWRCeS5sZW5ndGg7XHJcbiAgICAgIGNvbnNvbGUubG9nKGDwn5GNIOeCuei1nuaVsOaNrjogJHtvbGRMaWtlc0NvdW50fSAtPiAke2V4aXN0aW5nLmxpa2VzQ291bnR9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5ZCI5bm26K+E6K66XHJcbiAgICBpZiAobmV3RGF0YS5jb21tZW50cz8ubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zdCBvbGRDb21tZW50c0NvdW50ID0gZXhpc3RpbmcuY29tbWVudHM/Lmxlbmd0aCB8fCAwO1xyXG4gICAgICBleGlzdGluZy5jb21tZW50cyA9IHRoaXMubWVyZ2VDb21tZW50cyhleGlzdGluZy5jb21tZW50cyB8fCBbXSwgbmV3RGF0YS5jb21tZW50cyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKGDwn5KsIOivhOiuuuaVsOaNrjogJHtvbGRDb21tZW50c0NvdW50fSAtPiAke2V4aXN0aW5nLmNvbW1lbnRzLmxlbmd0aH1gKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDms6jmhI/vvJrliIbkuqvmlbDnm7jlhbPlip/og73lt7LliKDpmaTvvIzkuI3lho3lpITnkIYgc2hhcmVzQ291bnRcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOeUn+aIkOWKqOaAgeaMh+e6ue+8iOe7n+S4gOeul+azle+8iVxyXG4gICAqIEBwYXJhbSBkeW5hbWljIOWKqOaAgeaVsOaNrlxyXG4gICAqIEByZXR1cm5zIOWKqOaAgeaMh+e6ueWtl+espuS4slxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZW5lcmF0ZUZpbmdlcnByaW50KGR5bmFtaWM6IFJhd1Bvc3REYXRhKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBgJHtkeW5hbWljLm5vIHx8IDB9XyR7ZHluYW1pYy5hdXRob3JOYW1lIHx8ICcnfV8keyhkeW5hbWljLmNvbnRlbnQgfHwgJycpLnN1YnN0cmluZygwLCA1MCl9YDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOihpeWFqOWKqOaAgeaVsOaNrueahOe8uuWkseWtl+autVxyXG4gICAqIEBwYXJhbSBleGlzdGluZyDnjrDmnInliqjmgIHmlbDmja5cclxuICAgKiBAcGFyYW0gbmV3RGF0YSDmlrDnmoTliqjmgIHmlbDmja5cclxuICAgKi9cclxuICBzdGF0aWMgZmlsbE1pc3NpbmdGaWVsZHMoZXhpc3Rpbmc6IFJhd1Bvc3REYXRhLCBuZXdEYXRhOiBSYXdQb3N0RGF0YSk6IHZvaWQge1xyXG4gICAgLy8g5paH5pysL+S9nOiAhS/lm77niYfvvJrkv53nlZnlt7LlrZjlnKjlgLzvvIznvLrlpLHml7bnlKjmlrDnmoTooaXlhahcclxuICAgIGlmICghZXhpc3RpbmcuY29udGVudCAmJiBuZXdEYXRhLmNvbnRlbnQpIGV4aXN0aW5nLmNvbnRlbnQgPSBuZXdEYXRhLmNvbnRlbnQ7XHJcbiAgICBpZiAoIWV4aXN0aW5nLmF1dGhvck5hbWUgJiYgbmV3RGF0YS5hdXRob3JOYW1lKSBleGlzdGluZy5hdXRob3JOYW1lID0gbmV3RGF0YS5hdXRob3JOYW1lO1xyXG4gICAgaWYgKCFleGlzdGluZy5pbWFnZURlc2NyaXB0aW9uICYmIG5ld0RhdGEuaW1hZ2VEZXNjcmlwdGlvbikgZXhpc3RpbmcuaW1hZ2VEZXNjcmlwdGlvbiA9IG5ld0RhdGEuaW1hZ2VEZXNjcmlwdGlvbjtcclxuICAgIGlmICghZXhpc3RpbmcuaW1hZ2VVcmwgJiYgbmV3RGF0YS5pbWFnZVVybCkgZXhpc3RpbmcuaW1hZ2VVcmwgPSBuZXdEYXRhLmltYWdlVXJsO1xyXG4gICAgaWYgKCFleGlzdGluZy50aW1lc3RhbXAgJiYgbmV3RGF0YS50aW1lc3RhbXApIGV4aXN0aW5nLnRpbWVzdGFtcCA9IG5ld0RhdGEudGltZXN0YW1wO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6aqM6K+B5Yqo5oCB5pWw5o2u55qE5Z+65pys5a6M5pW05oCnXHJcbiAgICogQHBhcmFtIGR5bmFtaWMg5Yqo5oCB5pWw5o2uXHJcbiAgICogQHJldHVybnMg5piv5ZCm5pyJ5pWIXHJcbiAgICovXHJcbiAgc3RhdGljIGlzVmFsaWREeW5hbWljKGR5bmFtaWM6IFJhd1Bvc3REYXRhKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gISEoZHluYW1pYy5ubyAhPT0gdW5kZWZpbmVkICYmIGR5bmFtaWMuY29udGVudCAmJiBkeW5hbWljLmF1dGhvck5hbWUpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5rex5ou36LSd5Yqo5oCB5pWw5o2u77yI6YG/5YWN5byV55So6Zeu6aKY77yJXHJcbiAgICogQHBhcmFtIGR5bmFtaWMg5Y6f5aeL5Yqo5oCB5pWw5o2uXHJcbiAgICogQHJldHVybnMg5rex5ou36LSd5ZCO55qE5Yqo5oCB5pWw5o2uXHJcbiAgICovXHJcbiAgc3RhdGljIGNsb25lRHluYW1pYyhkeW5hbWljOiBSYXdQb3N0RGF0YSk6IFJhd1Bvc3REYXRhIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5vOiBkeW5hbWljLm5vLFxyXG4gICAgICBtZXNzYWdlSWQ6IGR5bmFtaWMubWVzc2FnZUlkLFxyXG4gICAgICBhdXRob3JOYW1lOiBkeW5hbWljLmF1dGhvck5hbWUsXHJcbiAgICAgIGNvbnRlbnQ6IGR5bmFtaWMuY29udGVudCxcclxuICAgICAgaW1hZ2VEZXNjcmlwdGlvbjogZHluYW1pYy5pbWFnZURlc2NyaXB0aW9uLFxyXG4gICAgICBpbWFnZVVybDogZHluYW1pYy5pbWFnZVVybCxcclxuICAgICAgdGltZXN0YW1wOiBkeW5hbWljLnRpbWVzdGFtcCxcclxuICAgICAgbGlrZXNDb3VudDogZHluYW1pYy5saWtlc0NvdW50LFxyXG4gICAgICBzaGFyZXNDb3VudDogZHluYW1pYy5zaGFyZXNDb3VudCxcclxuICAgICAgbGlrZWRCeTogZHluYW1pYy5saWtlZEJ5ID8gWy4uLmR5bmFtaWMubGlrZWRCeV0gOiBbXSxcclxuICAgICAgY29tbWVudHM6IGR5bmFtaWMuY29tbWVudHMgPyBbLi4uZHluYW1pYy5jb21tZW50c10gOiBbXSxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/utils/DynamicsDataProcessor.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/utils/characterStorage.ts": 
  /*!*************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/utils/characterStorage.ts ***!
  \*************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearCharacterIdCache: () => (/* binding */ clearCharacterIdCache),\n/* harmony export */   getCharacterItem: () => (/* binding */ getCharacterItem),\n/* harmony export */   removeCharacterItem: () => (/* binding */ removeCharacterItem),\n/* harmony export */   setCharacterItem: () => (/* binding */ setCharacterItem)\n/* harmony export */ });\n/**\n * 角色隔离存储工具函数\n * 集成了数据压缩和存储空间管理\n */\n// 缓存上次获取的角色ID，避免重复日志和重复计算\nlet lastCharacterId = null;\nlet cachedCharacterId = null;\nlet cacheTimestamp = 0;\nconst CACHE_DURATION = 1000; // 缓存1秒，避免短时间内重复计算\n/**\n * 获取当前角色ID\n */\nfunction getCurrentCharacterId() {\n    try {\n        // 检查缓存是否有效\n        const now = Date.now();\n        if (cachedCharacterId && now - cacheTimestamp < CACHE_DURATION) {\n            return cachedCharacterId;\n        }\n        // 方法1: 使用 TavernHelper.getCharData() (不带window前缀)\n        if (typeof TavernHelper !== 'undefined' && typeof TavernHelper.getCharData === 'function') {\n            try {\n                const charData = TavernHelper.getCharData();\n                if (charData) {\n                    // 优先使用name，避免avatar的.png后缀\n                    const characterId = charData.name || charData.avatar || 'default';\n                    // 更新缓存\n                    cachedCharacterId = characterId;\n                    cacheTimestamp = now;\n                    // 只在角色ID变化时输出日志\n                    if (characterId !== lastCharacterId) {\n                        console.log(`[CharacterStorage] ✅ 角色ID变更: ${lastCharacterId} → ${characterId}`);\n                        lastCharacterId = characterId;\n                    }\n                    return characterId;\n                }\n            }\n            catch (error) {\n                console.error('[CharacterStorage] TavernHelper.getCharData() 调用失败:', error);\n            }\n        }\n        // 方法2: 备用方案：尝试window.TavernHelper\n        if (window.TavernHelper && typeof window.TavernHelper.getCharData === 'function') {\n            try {\n                const charData = window.TavernHelper.getCharData();\n                if (charData) {\n                    // 优先使用name，避免avatar的.png后缀\n                    const characterId = charData.name || charData.avatar || 'default';\n                    // 更新缓存\n                    cachedCharacterId = characterId;\n                    cacheTimestamp = now;\n                    // 只在角色ID变化时输出日志\n                    if (characterId !== lastCharacterId) {\n                        console.log(`[CharacterStorage] ✅ 角色ID变更(window): ${lastCharacterId} → ${characterId}`);\n                        lastCharacterId = characterId;\n                    }\n                    return characterId;\n                }\n            }\n            catch (error) {\n                console.error('[CharacterStorage] window.TavernHelper.getCharData() 调用失败:', error);\n            }\n        }\n        // 方法3: 尝试传统的酒馆变量\n        if (typeof window.this_chid !== 'undefined' && typeof window.characters !== 'undefined') {\n            const this_chid = window.this_chid;\n            const characters = window.characters;\n            if (characters[this_chid]) {\n                const charData = characters[this_chid];\n                // 优先使用name，避免avatar的.png后缀\n                const characterId = charData.name || charData.avatar || `char_${this_chid}`;\n                // 更新缓存\n                cachedCharacterId = characterId;\n                cacheTimestamp = now;\n                // 只在角色ID变化时输出日志\n                if (characterId !== lastCharacterId) {\n                    console.log(`[CharacterStorage] ✅ 角色ID变更(传统): ${lastCharacterId} → ${characterId}`);\n                    lastCharacterId = characterId;\n                }\n                return characterId;\n            }\n        }\n        // 如果无法获取角色数据，使用默认值\n        const defaultId = 'default';\n        // 更新缓存\n        cachedCharacterId = defaultId;\n        cacheTimestamp = now;\n        if (defaultId !== lastCharacterId) {\n            console.log('[CharacterStorage] ⚠️ 所有方法都失败，使用默认角色ID');\n            lastCharacterId = defaultId;\n        }\n        return defaultId;\n    }\n    catch (error) {\n        console.error('[CharacterStorage] 获取角色ID失败:', error);\n        return 'default';\n    }\n}\n/**\n * 获取当前角色ID（异步版本，实际上直接调用同步版本）\n */\nasync function getCurrentCharacterIdAsync() {\n    // 由于 TavernHelper.getCharData() 是同步的，直接返回同步结果\n    return getCurrentCharacterId();\n}\n/**\n * 生成角色专用的存储键\n */\nfunction getCharacterStorageKey(key) {\n    const characterId = getCurrentCharacterId();\n    return `bear_chat_isolated_${characterId}_${key}`;\n}\n/**\n * 存储数据到角色专用空间\n */\nfunction setCharacterItem(key, value) {\n    try {\n        const storageKey = getCharacterStorageKey(key);\n        localStorage.setItem(storageKey, JSON.stringify(value));\n    }\n    catch (error) {\n        console.error(`[CharacterStorage] 存储失败 ${key}:`, error);\n    }\n}\n/**\n * 从角色专用空间获取数据\n */\nfunction getCharacterItem(key, defaultValue = null) {\n    try {\n        const storageKey = getCharacterStorageKey(key);\n        const stored = localStorage.getItem(storageKey);\n        return stored ? JSON.parse(stored) : defaultValue;\n    }\n    catch (error) {\n        console.error(`[CharacterStorage] 获取失败 ${key}:`, error);\n        return defaultValue;\n    }\n}\n/**\n * 从角色专用空间删除数据\n */\nfunction removeCharacterItem(key) {\n    try {\n        const storageKey = getCharacterStorageKey(key);\n        localStorage.removeItem(storageKey);\n    }\n    catch (error) {\n        console.error(`[CharacterStorage] 删除失败 ${key}:`, error);\n    }\n}\n/**\n * 清除角色ID缓存（在角色切换时调用）\n */\nfunction clearCharacterIdCache() {\n    cachedCharacterId = null;\n    cacheTimestamp = 0;\n    lastCharacterId = null;\n    console.log('[CharacterStorage] 角色ID缓存已清除');\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvdXRpbHMvY2hhcmFjdGVyU3RvcmFnZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7OztHQUdHO0FBRUgsMEJBQTBCO0FBQzFCLElBQUksZUFBZSxHQUFrQixJQUFJLENBQUM7QUFDMUMsSUFBSSxpQkFBaUIsR0FBa0IsSUFBSSxDQUFDO0FBQzVDLElBQUksY0FBYyxHQUFXLENBQUMsQ0FBQztBQUMvQixNQUFNLGNBQWMsR0FBRyxJQUFJLENBQUMsQ0FBQyxrQkFBa0I7QUFFL0M7O0dBRUc7QUFDSCxTQUFTLHFCQUFxQjtJQUM1QixJQUFJLENBQUM7UUFDSCxXQUFXO1FBQ1gsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ3ZCLElBQUksaUJBQWlCLElBQUksR0FBRyxHQUFHLGNBQWMsR0FBRyxjQUFjLEVBQUUsQ0FBQztZQUMvRCxPQUFPLGlCQUFpQixDQUFDO1FBQzNCLENBQUM7UUFFRCxrREFBa0Q7UUFDbEQsSUFBSSxPQUFPLFlBQVksS0FBSyxXQUFXLElBQUksT0FBTyxZQUFZLENBQUMsV0FBVyxLQUFLLFVBQVUsRUFBRSxDQUFDO1lBQzFGLElBQUksQ0FBQztnQkFDSCxNQUFNLFFBQVEsR0FBRyxZQUFZLENBQUMsV0FBVyxFQUFFLENBQUM7Z0JBQzVDLElBQUksUUFBUSxFQUFFLENBQUM7b0JBQ2IsMkJBQTJCO29CQUMzQixNQUFNLFdBQVcsR0FBRyxRQUFRLENBQUMsSUFBSSxJQUFJLFFBQVEsQ0FBQyxNQUFNLElBQUksU0FBUyxDQUFDO29CQUVsRSxPQUFPO29CQUNQLGlCQUFpQixHQUFHLFdBQVcsQ0FBQztvQkFDaEMsY0FBYyxHQUFHLEdBQUcsQ0FBQztvQkFFckIsZ0JBQWdCO29CQUNoQixJQUFJLFdBQVcsS0FBSyxlQUFlLEVBQUUsQ0FBQzt3QkFDcEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxnQ0FBZ0MsZUFBZSxNQUFNLFdBQVcsRUFBRSxD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QUMsQ0FBQztRQUN4RCxPQUFPLFlBQVksQ0FBQztJQUN0QixDQUFDO0FBQ0gsQ0FBQztBQUVEOztHQUVHO0FBQ0ksU0FBUyxtQkFBbUIsQ0FBQyxHQUFXO0lBQzdDLElBQUksQ0FBQztRQUNILE1BQU0sVUFBVSxHQUFHLHNCQUFzQixDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQy9DLFlBQVksQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDdEMsQ0FBQztJQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7UUFDZixPQUFPLENBQUMsS0FBSyxDQUFDLDJCQUEyQixHQUFHLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUMxRCxDQUFDO0FBQ0gsQ0FBQztBQUVEOztHQUVHO0FBQ0ksU0FBUyxxQkFBcUI7SUFDbkMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDO0lBQ3pCLGNBQWMsR0FBRyxDQUFDLENBQUM7SUFDbkIsZUFBZSxHQUFHLElBQUksQ0FBQztJQUN2QixPQUFPLENBQUMsR0FBRyxDQUFDLDhCQUE4QixDQUFDLENBQUM7QUFDOUMsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvdXRpbHMvY2hhcmFjdGVyU3RvcmFnZS50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIOinkuiJsumalOemu+WtmOWCqOW3peWFt+WHveaVsFxyXG4gKiDpm4bmiJDkuobmlbDmja7ljovnvKnlkozlrZjlgqjnqbrpl7TnrqHnkIZcclxuICovXHJcblxyXG4vLyDnvJPlrZjkuIrmrKHojrflj5bnmoTop5LoibJJRO+8jOmBv+WFjemHjeWkjeaXpeW/l+WSjOmHjeWkjeiuoeeul1xyXG5sZXQgbGFzdENoYXJhY3RlcklkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxubGV0IGNhY2hlZENoYXJhY3RlcklkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxubGV0IGNhY2hlVGltZXN0YW1wOiBudW1iZXIgPSAwO1xyXG5jb25zdCBDQUNIRV9EVVJBVElPTiA9IDEwMDA7IC8vIOe8k+WtmDHnp5LvvIzpgb/lhY3nn63ml7bpl7TlhoXph43lpI3orqHnrpdcclxuXHJcbi8qKlxyXG4gKiDojrflj5blvZPliY3op5LoibJJRFxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0Q3VycmVudENoYXJhY3RlcklkKCk6IHN0cmluZyB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIOajgOafpee8k+WtmOaYr+WQpuacieaViFxyXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgIGlmIChjYWNoZWRDaGFyYWN0ZXJJZCAmJiBub3cgLSBjYWNoZVRpbWVzdGFtcCA8IENBQ0hFX0RVUkFUSU9OKSB7XHJcbiAgICAgIHJldHVybiBjYWNoZWRDaGFyYWN0ZXJJZDtcclxuICAgIH1cclxuXHJcbiAgICAvLyDmlrnms5UxOiDkvb/nlKggVGF2ZXJuSGVscGVyLmdldENoYXJEYXRhKCkgKOS4jeW4pndpbmRvd+WJjee8gClcclxuICAgIGlmICh0eXBlb2YgVGF2ZXJuSGVscGVyICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgVGF2ZXJuSGVscGVyLmdldENoYXJEYXRhID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgY2hhckRhdGEgPSBUYXZlcm5IZWxwZXIuZ2V0Q2hhckRhdGEoKTtcclxuICAgICAgICBpZiAoY2hhckRhdGEpIHtcclxuICAgICAgICAgIC8vIOS8mOWFiOS9v+eUqG5hbWXvvIzpgb/lhY1hdmF0YXLnmoQucG5n5ZCO57yAXHJcbiAgICAgICAgICBjb25zdCBjaGFyYWN0ZXJJZCA9IGNoYXJEYXRhLm5hbWUgfHwgY2hhckRhdGEuYXZhdGFyIHx8ICdkZWZhdWx0JztcclxuXHJcbiAgICAgICAgICAvLyDmm7TmlrDnvJPlrZhcclxuICAgICAgICAgIGNhY2hlZENoYXJhY3RlcklkID0gY2hhcmFjdGVySWQ7XHJcbiAgICAgICAgICBjYWNoZVRpbWVzdGFtcCA9IG5vdztcclxuXHJcbiAgICAgICAgICAvLyDlj6rlnKjop5LoibJJROWPmOWMluaXtui+k+WHuuaXpeW/l1xyXG4gICAgICAgICAgaWYgKGNoYXJhY3RlcklkICE9PSBsYXN0Q2hhcmFjdGVySWQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFtDaGFyYWN0ZXJTdG9yYWdlXSDinIUg6KeS6ImySUTlj5jmm7Q6ICR7bGFzdENoYXJhY3RlcklkfSDihpIgJHtjaGFyYWN0ZXJJZH1gKTtcclxuICAgICAgICAgICAgbGFzdENoYXJhY3RlcklkID0gY2hhcmFjdGVySWQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gY2hhcmFjdGVySWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tDaGFyYWN0ZXJTdG9yYWdlXSBUYXZlcm5IZWxwZXIuZ2V0Q2hhckRhdGEoKSDosIPnlKjlpLHotKU6JywgZXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5pa55rOVMjog5aSH55So5pa55qGI77ya5bCd6K+Vd2luZG93LlRhdmVybkhlbHBlclxyXG4gICAgaWYgKHdpbmRvdy5UYXZlcm5IZWxwZXIgJiYgdHlwZW9mIHdpbmRvdy5UYXZlcm5IZWxwZXIuZ2V0Q2hhckRhdGEgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBjaGFyRGF0YSA9IHdpbmRvdy5UYXZlcm5IZWxwZXIuZ2V0Q2hhckRhdGEoKTtcclxuICAgICAgICBpZiAoY2hhckRhdGEpIHtcclxuICAgICAgICAgIC8vIOS8mOWFiOS9v+eUqG5hbWXvvIzpgb/lhY1hdmF0YXLnmoQucG5n5ZCO57yAXHJcbiAgICAgICAgICBjb25zdCBjaGFyYWN0ZXJJZCA9IGNoYXJEYXRhLm5hbWUgfHwgY2hhckRhdGEuYXZhdGFyIHx8ICdkZWZhdWx0JztcclxuXHJcbiAgICAgICAgICAvLyDmm7TmlrDnvJPlrZhcclxuICAgICAgICAgIGNhY2hlZENoYXJhY3RlcklkID0gY2hhcmFjdGVySWQ7XHJcbiAgICAgICAgICBjYWNoZVRpbWVzdGFtcCA9IG5vdztcclxuXHJcbiAgICAgICAgICAvLyDlj6rlnKjop5LoibJJROWPmOWMluaXtui+k+WHuuaXpeW/l1xyXG4gICAgICAgICAgaWYgKGNoYXJhY3RlcklkICE9PSBsYXN0Q2hhcmFjdGVySWQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFtDaGFyYWN0ZXJTdG9yYWdlXSDinIUg6KeS6ImySUTlj5jmm7Qod2luZG93KTogJHtsYXN0Q2hhcmFjdGVySWR9IOKGkiAke2NoYXJhY3RlcklkfWApO1xyXG4gICAgICAgICAgICBsYXN0Q2hhcmFjdGVySWQgPSBjaGFyYWN0ZXJJZDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBjaGFyYWN0ZXJJZDtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignW0NoYXJhY3RlclN0b3JhZ2VdIHdpbmRvdy5UYXZlcm5IZWxwZXIuZ2V0Q2hhckRhdGEoKSDosIPnlKjlpLHotKU6JywgZXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5pa55rOVMzog5bCd6K+V5Lyg57uf55qE6YWS6aaG5Y+Y6YePXHJcbiAgICBpZiAodHlwZW9mICh3aW5kb3cgYXMgYW55KS50aGlzX2NoaWQgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiAod2luZG93IGFzIGFueSkuY2hhcmFjdGVycyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgY29uc3QgdGhpc19jaGlkID0gKHdpbmRvdyBhcyBhbnkpLnRoaXNfY2hpZDtcclxuICAgICAgY29uc3QgY2hhcmFjdGVycyA9ICh3aW5kb3cgYXMgYW55KS5jaGFyYWN0ZXJzO1xyXG5cclxuICAgICAgaWYgKGNoYXJhY3RlcnNbdGhpc19jaGlkXSkge1xyXG4gICAgICAgIGNvbnN0IGNoYXJEYXRhID0gY2hhcmFjdGVyc1t0aGlzX2NoaWRdO1xyXG4gICAgICAgIC8vIOS8mOWFiOS9v+eUqG5hbWXvvIzpgb/lhY1hdmF0YXLnmoQucG5n5ZCO57yAXHJcbiAgICAgICAgY29uc3QgY2hhcmFjdGVySWQgPSBjaGFyRGF0YS5uYW1lIHx8IGNoYXJEYXRhLmF2YXRhciB8fCBgY2hhcl8ke3RoaXNfY2hpZH1gO1xyXG5cclxuICAgICAgICAvLyDmm7TmlrDnvJPlrZhcclxuICAgICAgICBjYWNoZWRDaGFyYWN0ZXJJZCA9IGNoYXJhY3RlcklkO1xyXG4gICAgICAgIGNhY2hlVGltZXN0YW1wID0gbm93O1xyXG5cclxuICAgICAgICAvLyDlj6rlnKjop5LoibJJROWPmOWMluaXtui+k+WHuuaXpeW/l1xyXG4gICAgICAgIGlmIChjaGFyYWN0ZXJJZCAhPT0gbGFzdENoYXJhY3RlcklkKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhgW0NoYXJhY3RlclN0b3JhZ2VdIOKchSDop5LoibJJROWPmOabtCjkvKDnu58pOiAke2xhc3RDaGFyYWN0ZXJJZH0g4oaSICR7Y2hhcmFjdGVySWR9YCk7XHJcbiAgICAgICAgICBsYXN0Q2hhcmFjdGVySWQgPSBjaGFyYWN0ZXJJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNoYXJhY3RlcklkO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5aaC5p6c5peg5rOV6I635Y+W6KeS6Imy5pWw5o2u77yM5L2/55So6buY6K6k5YC8XHJcbiAgICBjb25zdCBkZWZhdWx0SWQgPSAnZGVmYXVsdCc7XHJcblxyXG4gICAgLy8g5pu05paw57yT5a2YXHJcbiAgICBjYWNoZWRDaGFyYWN0ZXJJZCA9IGRlZmF1bHRJZDtcclxuICAgIGNhY2hlVGltZXN0YW1wID0gbm93O1xyXG5cclxuICAgIGlmIChkZWZhdWx0SWQgIT09IGxhc3RDaGFyYWN0ZXJJZCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnW0NoYXJhY3RlclN0b3JhZ2VdIOKaoO+4jyDmiYDmnInmlrnms5Xpg73lpLHotKXvvIzkvb/nlKjpu5jorqTop5LoibJJRCcpO1xyXG4gICAgICBsYXN0Q2hhcmFjdGVySWQgPSBkZWZhdWx0SWQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGVmYXVsdElkO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdbQ2hhcmFjdGVyU3RvcmFnZV0g6I635Y+W6KeS6ImySUTlpLHotKU6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuICdkZWZhdWx0JztcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDojrflj5blvZPliY3op5LoibJJRO+8iOW8guatpeeJiOacrO+8jOWunumZheS4iuebtOaOpeiwg+eUqOWQjOatpeeJiOacrO+8iVxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudENoYXJhY3RlcklkQXN5bmMoKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAvLyDnlLHkuo4gVGF2ZXJuSGVscGVyLmdldENoYXJEYXRhKCkg5piv5ZCM5q2l55qE77yM55u05o6l6L+U5Zue5ZCM5q2l57uT5p6cXHJcbiAgcmV0dXJuIGdldEN1cnJlbnRDaGFyYWN0ZXJJZCgpO1xyXG59XHJcblxyXG4vKipcclxuICog55Sf5oiQ6KeS6Imy5LiT55So55qE5a2Y5YKo6ZSuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRDaGFyYWN0ZXJTdG9yYWdlS2V5KGtleTogc3RyaW5nKTogc3RyaW5nIHtcclxuICBjb25zdCBjaGFyYWN0ZXJJZCA9IGdldEN1cnJlbnRDaGFyYWN0ZXJJZCgpO1xyXG4gIHJldHVybiBgYmVhcl9jaGF0X2lzb2xhdGVkXyR7Y2hhcmFjdGVySWR9XyR7a2V5fWA7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDlrZjlgqjmlbDmja7liLDop5LoibLkuJPnlKjnqbrpl7RcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRDaGFyYWN0ZXJJdGVtKGtleTogc3RyaW5nLCB2YWx1ZTogYW55KTogdm9pZCB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN0b3JhZ2VLZXkgPSBnZXRDaGFyYWN0ZXJTdG9yYWdlS2V5KGtleSk7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShzdG9yYWdlS2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGBbQ2hhcmFjdGVyU3RvcmFnZV0g5a2Y5YKo5aSx6LSlICR7a2V5fTpgLCBlcnJvcik7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICog5LuO6KeS6Imy5LiT55So56m66Ze06I635Y+W5pWw5o2uXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2hhcmFjdGVySXRlbTxUID0gYW55PihrZXk6IHN0cmluZywgZGVmYXVsdFZhbHVlOiBUIHwgbnVsbCA9IG51bGwpOiBUIHwgbnVsbCB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN0b3JhZ2VLZXkgPSBnZXRDaGFyYWN0ZXJTdG9yYWdlS2V5KGtleSk7XHJcbiAgICBjb25zdCBzdG9yZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShzdG9yYWdlS2V5KTtcclxuICAgIHJldHVybiBzdG9yZWQgPyBKU09OLnBhcnNlKHN0b3JlZCkgOiBkZWZhdWx0VmFsdWU7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoYFtDaGFyYWN0ZXJTdG9yYWdlXSDojrflj5blpLHotKUgJHtrZXl9OmAsIGVycm9yKTtcclxuICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICog5LuO6KeS6Imy5LiT55So56m66Ze05Yig6Zmk5pWw5o2uXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ2hhcmFjdGVySXRlbShrZXk6IHN0cmluZyk6IHZvaWQge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzdG9yYWdlS2V5ID0gZ2V0Q2hhcmFjdGVyU3RvcmFnZUtleShrZXkpO1xyXG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oc3RvcmFnZUtleSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoYFtDaGFyYWN0ZXJTdG9yYWdlXSDliKDpmaTlpLHotKUgJHtrZXl9OmAsIGVycm9yKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmuIXpmaTop5LoibJJROe8k+WtmO+8iOWcqOinkuiJsuWIh+aNouaXtuiwg+eUqO+8iVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyQ2hhcmFjdGVySWRDYWNoZSgpOiB2b2lkIHtcclxuICBjYWNoZWRDaGFyYWN0ZXJJZCA9IG51bGw7XHJcbiAgY2FjaGVUaW1lc3RhbXAgPSAwO1xyXG4gIGxhc3RDaGFyYWN0ZXJJZCA9IG51bGw7XHJcbiAgY29uc29sZS5sb2coJ1tDaGFyYWN0ZXJTdG9yYWdlXSDop5LoibJJROe8k+WtmOW3sua4hemZpCcpO1xyXG59XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/utils/characterStorage.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/modules/utils/index.ts": 
  /*!**************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/utils/index.ts ***!
  \**************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AvatarSource: () => (/* reexport safe */ _AvatarSourceService__WEBPACK_IMPORTED_MODULE_2__.AvatarSource),\n/* harmony export */   AvatarSourceService: () => (/* reexport safe */ _AvatarSourceService__WEBPACK_IMPORTED_MODULE_2__.AvatarSourceService),\n/* harmony export */   AvatarSync: () => (/* reexport safe */ _AvatarSync__WEBPACK_IMPORTED_MODULE_0__.AvatarSync),\n/* harmony export */   BearContentExtractor: () => (/* reexport safe */ _BearContentExtractor__WEBPACK_IMPORTED_MODULE_3__.BearContentExtractor),\n/* harmony export */   DynamicsDataProcessor: () => (/* reexport safe */ _DynamicsDataProcessor__WEBPACK_IMPORTED_MODULE_4__.DynamicsDataProcessor),\n/* harmony export */   SimpleAvatarMixin: () => (/* reexport safe */ _AvatarSync__WEBPACK_IMPORTED_MODULE_0__.SimpleAvatarMixin),\n/* harmony export */   UserInfoRetrieval: () => (/* reexport safe */ _userInfoRetrieval__WEBPACK_IMPORTED_MODULE_1__.UserInfoRetrieval),\n/* harmony export */   autoRegisterAvatars: () => (/* reexport safe */ _AvatarSync__WEBPACK_IMPORTED_MODULE_0__.autoRegisterAvatars),\n/* harmony export */   avatarSourceService: () => (/* reexport safe */ _AvatarSourceService__WEBPACK_IMPORTED_MODULE_2__.avatarSourceService),\n/* harmony export */   avatarSync: () => (/* reexport safe */ _AvatarSync__WEBPACK_IMPORTED_MODULE_0__.avatarSync),\n/* harmony export */   cleanupInvalidAvatarElements: () => (/* reexport safe */ _AvatarSync__WEBPACK_IMPORTED_MODULE_0__.cleanupInvalidAvatarElements),\n/* harmony export */   debugUserInfoEnvironment: () => (/* reexport safe */ _userInfoRetrieval__WEBPACK_IMPORTED_MODULE_1__.debugUserInfoEnvironment),\n/* harmony export */   defaultUserInfoRetrieval: () => (/* reexport safe */ _userInfoRetrieval__WEBPACK_IMPORTED_MODULE_1__.defaultUserInfoRetrieval),\n/* harmony export */   forceUpdateAvatars: () => (/* reexport safe */ _AvatarSync__WEBPACK_IMPORTED_MODULE_0__.forceUpdateAvatars),\n/* harmony export */   getAvatarSyncDebugInfo: () => (/* reexport safe */ _AvatarSync__WEBPACK_IMPORTED_MODULE_0__.getAvatarSyncDebugInfo),\n/* harmony export */   getCachedUserAvatar: () => (/* reexport safe */ _AvatarSourceService__WEBPACK_IMPORTED_MODULE_2__.getCachedUserAvatar),\n/* harmony export */   getCurrentUserAvatar: () => (/* reexport safe */ _AvatarSourceService__WEBPACK_IMPORTED_MODULE_2__.getCurrentUserAvatar),\n/* harmony export */   getMemberAvatarStats: () => (/* reexport safe */ _AvatarSync__WEBPACK_IMPORTED_MODULE_0__.getMemberAvatarStats),\n/* harmony export */   getSimpleUserAvatar: () => (/* reexport safe */ _userInfoRetrieval__WEBPACK_IMPORTED_MODULE_1__.getSimpleUserAvatar),\n/* harmony export */   getUnifiedUserAvatar: () => (/* binding */ getUnifiedUserAvatar),\n/* harmony export */   getUnifiedUserAvatarSync: () => (/* binding */ getUnifiedUserAvatarSync),\n/* harmony export */   getUserAvatar: () => (/* reexport safe */ _userInfoRetrieval__WEBPACK_IMPORTED_MODULE_1__.getUserAvatar),\n/* harmony export */   getUserAvatarAsync: () => (/* reexport safe */ _userInfoRetrieval__WEBPACK_IMPORTED_MODULE_1__.getUserAvatarAsync),\n/* harmony export */   getUserInfo: () => (/* reexport safe */ _userInfoRetrieval__WEBPACK_IMPORTED_MODULE_1__.getUserInfo),\n/* harmony export */   getUserName: () => (/* reexport safe */ _userInfoRetrieval__WEBPACK_IMPORTED_MODULE_1__.getUserName),\n/* harmony export */   getUserNameAsync: () => (/* reexport safe */ _userInfoRetrieval__WEBPACK_IMPORTED_MODULE_1__.getUserNameAsync),\n/* harmony export */   refreshUserAvatarCache: () => (/* reexport safe */ _AvatarSourceService__WEBPACK_IMPORTED_MODULE_2__.refreshUserAvatarCache),\n/* harmony export */   registerAvatarElement: () => (/* reexport safe */ _AvatarSync__WEBPACK_IMPORTED_MODULE_0__.registerAvatarElement),\n/* harmony export */   registerMemberAvatarElement: () => (/* reexport safe */ _AvatarSync__WEBPACK_IMPORTED_MODULE_0__.registerMemberAvatarElement),\n/* harmony export */   setCachedUserAvatar: () => (/* reexport safe */ _AvatarSourceService__WEBPACK_IMPORTED_MODULE_2__.setCachedUserAvatar),\n/* harmony export */   syncAvatars: () => (/* reexport safe */ _AvatarSync__WEBPACK_IMPORTED_MODULE_0__.syncAvatars)\n/* harmony export */ });\n/* harmony import */ var _AvatarSync__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AvatarSync */ "./src/多云熊/备份/给rovo的/modules/utils/AvatarSync.ts");\n/* harmony import */ var _userInfoRetrieval__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./userInfoRetrieval */ "./src/多云熊/备份/给rovo的/modules/utils/userInfoRetrieval.ts");\n/* harmony import */ var _AvatarSourceService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AvatarSourceService */ "./src/多云熊/备份/给rovo的/modules/utils/AvatarSourceService.ts");\n/* harmony import */ var _BearContentExtractor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./BearContentExtractor */ "./src/多云熊/备份/给rovo的/modules/utils/BearContentExtractor.ts");\n/* harmony import */ var _DynamicsDataProcessor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./DynamicsDataProcessor */ "./src/多云熊/备份/给rovo的/modules/utils/DynamicsDataProcessor.ts");\n/**\n * Utils模块统一导出\n * 提供头像同步和用户信息获取的统一接口\n */\n// 导出AvatarSync相关\n\n// 导出用户信息获取相关\n\n// 导出新的AvatarSourceService\n\n// 导出Bear容器提取工具\n\n// 导出动态数据处理工具\n\n// 快速修复工具已移除，功能已整合到主应用中\n// 为了向后兼容，重新导出一些常用函数\n\n\n/**\n * 统一的头像获取接口\n * 优先使用GlobalUserManager的持久化数据，确保与"我的"界面同步\n */\nasync function getUnifiedUserAvatar() {\n    try {\n        // 优先从GlobalUserManager获取持久化的头像数据\n        const { GlobalUserManager } = __webpack_require__(/*! ../profile/GlobalUserManager */ "./src/多云熊/备份/给rovo的/modules/profile/GlobalUserManager.ts");\n        const globalUserManager = GlobalUserManager.getInstance();\n        const userData = globalUserManager.getCurrentUserData();\n        // 如果有自定义头像数据，优先使用\n        if (userData?.isCustom && userData.avatar) {\n            return userData.avatar;\n        }\n        // 尝试异步获取用户头像\n        const userAvatar = await globalUserManager.getUserAvatar();\n        if (userAvatar) {\n            return userAvatar;\n        }\n        // 使用增强的头像源服务作为降级\n        return await (0,_AvatarSourceService__WEBPACK_IMPORTED_MODULE_2__.getCurrentUserAvatar)();\n    }\n    catch (error) {\n        console.warn(\'[getUnifiedUserAvatar] 使用GlobalUserManager失败，降级到传统方法:\', error);\n        // 降级策略1: 尝试从缓存获取\n        const cached = (0,_AvatarSourceService__WEBPACK_IMPORTED_MODULE_2__.getCachedUserAvatar)();\n        if (cached) {\n            return cached;\n        }\n        // 降级策略2: 使用简化的头像获取\n        const simple = (0,_userInfoRetrieval__WEBPACK_IMPORTED_MODULE_1__.getSimpleUserAvatar)();\n        if (simple && simple !== \'https://files.catbox.moe/u8ccy5.jpg\') {\n            return simple;\n        }\n        // 降级策略3: 使用传统的头像获取\n        return (0,_userInfoRetrieval__WEBPACK_IMPORTED_MODULE_1__.getUserAvatar)();\n    }\n}\n/**\n * 同步版本的统一头像获取接口\n * 主要用于需要立即返回结果的场景\n * 优先使用GlobalUserManager的持久化数据，确保与"我的"界面同步\n */\nfunction getUnifiedUserAvatarSync() {\n    try {\n        // 优先从GlobalUserManager获取持久化的头像数据\n        const { GlobalUserManager } = __webpack_require__(/*! ../profile/GlobalUserManager */ "./src/多云熊/备份/给rovo的/modules/profile/GlobalUserManager.ts");\n        const globalUserManager = GlobalUserManager.getInstance();\n        const userData = globalUserManager.getCurrentUserData();\n        // 如果有自定义头像数据，优先使用\n        if (userData?.isCustom && userData.avatar) {\n            return userData.avatar;\n        }\n        // 尝试从缓存获取\n        const cached = (0,_AvatarSourceService__WEBPACK_IMPORTED_MODULE_2__.getCachedUserAvatar)();\n        if (cached) {\n            return cached;\n        }\n        // 使用简化的头像获取\n        const simple = (0,_userInfoRetrieval__WEBPACK_IMPORTED_MODULE_1__.getSimpleUserAvatar)();\n        if (simple && simple !== \'https://files.catbox.moe/u8ccy5.jpg\') {\n            return simple;\n        }\n        // 使用传统的头像获取\n        return (0,_userInfoRetrieval__WEBPACK_IMPORTED_MODULE_1__.getUserAvatar)();\n    }\n    catch (error) {\n        console.warn(\'[getUnifiedUserAvatarSync] 获取头像失败:\', error);\n        return \'https://files.catbox.moe/u8ccy5.jpg\';\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvdXRpbHMvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7OztHQUdHO0FBRUgsaUJBQWlCO0FBQ1k7QUFFN0IsYUFBYTtBQUN1QjtBQUVwQywwQkFBMEI7QUFDWTtBQUV0QyxlQUFlO0FBQ3dCO0FBRXZDLGFBQWE7QUFDMkI7QUFFeEMsdUJBQXVCO0FBRXZCLG9CQUFvQjtBQUM4RDtBQUNUO0FBRXpFOzs7R0FHRztBQUNJLEtBQUssVUFBVSxvQkFBb0I7SUFDeEMsSUFBSSxDQUFDO1FBQ0gsaUNBQWlDO1FBQ2pDLE1BQU0sRUFBRSxpQkFBaUIsRUFBRSxHQUFHLG1CQUFPLENBQUMsOEZBQThCLENBQUMsQ0FBQztRQUN0RSxNQUFNLGlCQUFpQixHQUFHLGlCQUFpQixDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQzFELE1BQU0sUUFBUSxHQUFHLGlCQUFpQixDQUFDLGtCQUFrQixFQUFFLENBQUM7UUFFeEQsa0JBQWtCO1FBQ2xCLElBQUksUUFBUSxFQUFFLFFBQVEsSUFBSSxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDMUMsT0FBTyxRQUFRLENBQUMsTUFBTSxDQUFDO1FBQ3pCLENBQUM7UUFFRCxhQUFhO1FBQ2IsTUFBTSxVQUFVLEdBQUcsTUFBTSxpQkFBaUIsQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUMzRCxJQUFJLFVBQVUsRUFBRSxDQUFDO1lBQ2YsT0FBTyxVQUFVLENBQUM7UUFDcEIsQ0FBQztRQUVELGlCQUFpQjtRQUNqQixPQUFPLE1BQU0sMEVBQW9CLEVBQUUsQ0FBQztJQUN0QyxDQUFDO0lBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztRQUNmLE9BQU8sQ0FBQyxJQUFJLENBQUMsdURBQXVELEVBQUUsS0FBSyxDQUFDLENBQUM7UUFFN0UsaUJBQWlCO1FBQ2pCLE1BQU0sTUFBTSxHQUFHLHlFQUFtQixFQUFFLENBQUM7UUFDckMsSUFBSSxNQUFNLEVBQUUsQ0FBQztZQUNYLE9BQU8sTUFBTSxDQUFDO1FBQ2hCLENBQUM7UUFFRCxtQkFBbUI7UUFDbkIsTUFBTSxNQUFNLEdBQUcsdUVBQW1CLEVBQUUsQ0FBQztRQUNyQyxJQUFJLE1BQU0sSUFBSSxNQUFNLEtBQUsscUNBQXFDLEVBQUUsQ0FBQztZQUMvRCxPQUFPLE1BQU0sQ0FBQztRQUNoQixDQUFDO1FBRUQsbUJBQW1CO1FBQ25CLE9BQU8saUVBQWEsRUFBRSxDQUFDO0lBQ3pCLENBQUM7QUFDSCxDQUFDO0FBRUQ7Ozs7R0FJRztBQUNJLFNBQVMsd0JBQXdCO0lBQ3RDLElBQUksQ0FBQztRQUNILGlDQUFpQztRQUNqQyxNQUFNLEVBQUUsaUJBQWlCLEVBQUUsR0FBRyxtQkFBTyxDQUFDLDhGQUE4QixDQUFDLENBQUM7UUFDdEUsTUFBTSxpQkFBaUIsR0FBRyxpQkFBaUIsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUMxRCxNQUFNLFFBQVEsR0FBRyxpQkFBaUIsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1FBRXhELGtCQUFrQjtRQUNsQixJQUFJLFFBQVEsRUFBRSxRQUFRLElBQUksUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQzFDLE9BQU8sUUFBUSxDQUFDLE1BQU0sQ0FBQztRQUN6QixDQUFDO1FBRUQsVUFBVTtRQUNWLE1BQU0sTUFBTSxHQUFHLHlFQUFtQixFQUFFLENBQUM7UUFDckMsSUFBSSxNQUFNLEVBQUUsQ0FBQztZQUNYLE9BQU8sTUFBTSxDQUFDO1FBQ2hCLENBQUM7UUFFRCxZQUFZO1FBQ1osTUFBTSxNQUFNLEdBQUcsdUVBQW1CLEVBQUUsQ0FBQztRQUNyQyxJQUFJLE1BQU0sSUFBSSxNQUFNLEtBQUsscUNBQXFDLEVBQUUsQ0FBQztZQUMvRCxPQUFPLE1BQU0sQ0FBQztRQUNoQixDQUFDO1FBRUQsWUFBWTtRQUNaLE9BQU8saUVBQWEsRUFBRSxDQUFDO0lBQ3pCLENBQUM7SUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1FBQ2YsT0FBTyxDQUFDLElBQUksQ0FBQyxvQ0FBb0MsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUMxRCxPQUFPLHFDQUFxQyxDQUFDO0lBQy9DLENBQUM7QUFDSCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy91dGlscy9pbmRleC50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFV0aWxz5qih5Z2X57uf5LiA5a+85Ye6XHJcbiAqIOaPkOS+m+WktOWDj+WQjOatpeWSjOeUqOaIt+S/oeaBr+iOt+WPlueahOe7n+S4gOaOpeWPo1xyXG4gKi9cclxuXHJcbi8vIOWvvOWHukF2YXRhclN5bmPnm7jlhbNcclxuZXhwb3J0ICogZnJvbSAnLi9BdmF0YXJTeW5jJztcclxuXHJcbi8vIOWvvOWHuueUqOaIt+S/oeaBr+iOt+WPluebuOWFs1xyXG5leHBvcnQgKiBmcm9tICcuL3VzZXJJbmZvUmV0cmlldmFsJztcclxuXHJcbi8vIOWvvOWHuuaWsOeahEF2YXRhclNvdXJjZVNlcnZpY2VcclxuZXhwb3J0ICogZnJvbSAnLi9BdmF0YXJTb3VyY2VTZXJ2aWNlJztcclxuXHJcbi8vIOWvvOWHukJlYXLlrrnlmajmj5Dlj5blt6XlhbdcclxuZXhwb3J0ICogZnJvbSAnLi9CZWFyQ29udGVudEV4dHJhY3Rvcic7XHJcblxyXG4vLyDlr7zlh7rliqjmgIHmlbDmja7lpITnkIblt6XlhbdcclxuZXhwb3J0ICogZnJvbSAnLi9EeW5hbWljc0RhdGFQcm9jZXNzb3InO1xyXG5cclxuLy8g5b+r6YCf5L+u5aSN5bel5YW35bey56e76Zmk77yM5Yqf6IO95bey5pW05ZCI5Yiw5Li75bqU55So5LitXHJcblxyXG4vLyDkuLrkuoblkJHlkI7lhbzlrrnvvIzph43mlrDlr7zlh7rkuIDkupvluLjnlKjlh73mlbBcclxuaW1wb3J0IHsgZ2V0Q2FjaGVkVXNlckF2YXRhciwgZ2V0Q3VycmVudFVzZXJBdmF0YXIgfSBmcm9tICcuL0F2YXRhclNvdXJjZVNlcnZpY2UnO1xyXG5pbXBvcnQgeyBnZXRTaW1wbGVVc2VyQXZhdGFyLCBnZXRVc2VyQXZhdGFyIH0gZnJvbSAnLi91c2VySW5mb1JldHJpZXZhbCc7XHJcblxyXG4vKipcclxuICog57uf5LiA55qE5aS05YOP6I635Y+W5o6l5Y+jXHJcbiAqIOS8mOWFiOS9v+eUqEdsb2JhbFVzZXJNYW5hZ2Vy55qE5oyB5LmF5YyW5pWw5o2u77yM56Gu5L+d5LiOXCLmiJHnmoRcIueVjOmdouWQjOatpVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVuaWZpZWRVc2VyQXZhdGFyKCk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIOS8mOWFiOS7jkdsb2JhbFVzZXJNYW5hZ2Vy6I635Y+W5oyB5LmF5YyW55qE5aS05YOP5pWw5o2uXHJcbiAgICBjb25zdCB7IEdsb2JhbFVzZXJNYW5hZ2VyIH0gPSByZXF1aXJlKCcuLi9wcm9maWxlL0dsb2JhbFVzZXJNYW5hZ2VyJyk7XHJcbiAgICBjb25zdCBnbG9iYWxVc2VyTWFuYWdlciA9IEdsb2JhbFVzZXJNYW5hZ2VyLmdldEluc3RhbmNlKCk7XHJcbiAgICBjb25zdCB1c2VyRGF0YSA9IGdsb2JhbFVzZXJNYW5hZ2VyLmdldEN1cnJlbnRVc2VyRGF0YSgpO1xyXG5cclxuICAgIC8vIOWmguaenOacieiHquWumuS5ieWktOWDj+aVsOaNru+8jOS8mOWFiOS9v+eUqFxyXG4gICAgaWYgKHVzZXJEYXRhPy5pc0N1c3RvbSAmJiB1c2VyRGF0YS5hdmF0YXIpIHtcclxuICAgICAgcmV0dXJuIHVzZXJEYXRhLmF2YXRhcjtcclxuICAgIH1cclxuXHJcbiAgICAvLyDlsJ3or5XlvILmraXojrflj5bnlKjmiLflpLTlg49cclxuICAgIGNvbnN0IHVzZXJBdmF0YXIgPSBhd2FpdCBnbG9iYWxVc2VyTWFuYWdlci5nZXRVc2VyQXZhdGFyKCk7XHJcbiAgICBpZiAodXNlckF2YXRhcikge1xyXG4gICAgICByZXR1cm4gdXNlckF2YXRhcjtcclxuICAgIH1cclxuXHJcbiAgICAvLyDkvb/nlKjlop7lvLrnmoTlpLTlg4/mupDmnI3liqHkvZzkuLrpmY3nuqdcclxuICAgIHJldHVybiBhd2FpdCBnZXRDdXJyZW50VXNlckF2YXRhcigpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLndhcm4oJ1tnZXRVbmlmaWVkVXNlckF2YXRhcl0g5L2/55SoR2xvYmFsVXNlck1hbmFnZXLlpLHotKXvvIzpmY3nuqfliLDkvKDnu5/mlrnms5U6JywgZXJyb3IpO1xyXG5cclxuICAgIC8vIOmZjee6p+etlueVpTE6IOWwneivleS7jue8k+WtmOiOt+WPllxyXG4gICAgY29uc3QgY2FjaGVkID0gZ2V0Q2FjaGVkVXNlckF2YXRhcigpO1xyXG4gICAgaWYgKGNhY2hlZCkge1xyXG4gICAgICByZXR1cm4gY2FjaGVkO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOmZjee6p+etlueVpTI6IOS9v+eUqOeugOWMlueahOWktOWDj+iOt+WPllxyXG4gICAgY29uc3Qgc2ltcGxlID0gZ2V0U2ltcGxlVXNlckF2YXRhcigpO1xyXG4gICAgaWYgKHNpbXBsZSAmJiBzaW1wbGUgIT09ICdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvdThjY3k1LmpwZycpIHtcclxuICAgICAgcmV0dXJuIHNpbXBsZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDpmY3nuqfnrZbnlaUzOiDkvb/nlKjkvKDnu5/nmoTlpLTlg4/ojrflj5ZcclxuICAgIHJldHVybiBnZXRVc2VyQXZhdGFyKCk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICog5ZCM5q2l54mI5pys55qE57uf5LiA5aS05YOP6I635Y+W5o6l5Y+jXHJcbiAqIOS4u+imgeeUqOS6jumcgOimgeeri+WNs+i/lOWbnue7k+aenOeahOWcuuaZr1xyXG4gKiDkvJjlhYjkvb/nlKhHbG9iYWxVc2VyTWFuYWdlcueahOaMgeS5heWMluaVsOaNru+8jOehruS/neS4jlwi5oiR55qEXCLnlYzpnaLlkIzmraVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRVbmlmaWVkVXNlckF2YXRhclN5bmMoKTogc3RyaW5nIHtcclxuICB0cnkge1xyXG4gICAgLy8g5LyY5YWI5LuOR2xvYmFsVXNlck1hbmFnZXLojrflj5bmjIHkuYXljJbnmoTlpLTlg4/mlbDmja5cclxuICAgIGNvbnN0IHsgR2xvYmFsVXNlck1hbmFnZXIgfSA9IHJlcXVpcmUoJy4uL3Byb2ZpbGUvR2xvYmFsVXNlck1hbmFnZXInKTtcclxuICAgIGNvbnN0IGdsb2JhbFVzZXJNYW5hZ2VyID0gR2xvYmFsVXNlck1hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcclxuICAgIGNvbnN0IHVzZXJEYXRhID0gZ2xvYmFsVXNlck1hbmFnZXIuZ2V0Q3VycmVudFVzZXJEYXRhKCk7XHJcblxyXG4gICAgLy8g5aaC5p6c5pyJ6Ieq5a6a5LmJ5aS05YOP5pWw5o2u77yM5LyY5YWI5L2/55SoXHJcbiAgICBpZiAodXNlckRhdGE/LmlzQ3VzdG9tICYmIHVzZXJEYXRhLmF2YXRhcikge1xyXG4gICAgICByZXR1cm4gdXNlckRhdGEuYXZhdGFyO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOWwneivleS7jue8k+WtmOiOt+WPllxyXG4gICAgY29uc3QgY2FjaGVkID0gZ2V0Q2FjaGVkVXNlckF2YXRhcigpO1xyXG4gICAgaWYgKGNhY2hlZCkge1xyXG4gICAgICByZXR1cm4gY2FjaGVkO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOS9v+eUqOeugOWMlueahOWktOWDj+iOt+WPllxyXG4gICAgY29uc3Qgc2ltcGxlID0gZ2V0U2ltcGxlVXNlckF2YXRhcigpO1xyXG4gICAgaWYgKHNpbXBsZSAmJiBzaW1wbGUgIT09ICdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvdThjY3k1LmpwZycpIHtcclxuICAgICAgcmV0dXJuIHNpbXBsZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDkvb/nlKjkvKDnu5/nmoTlpLTlg4/ojrflj5ZcclxuICAgIHJldHVybiBnZXRVc2VyQXZhdGFyKCk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUud2FybignW2dldFVuaWZpZWRVc2VyQXZhdGFyU3luY10g6I635Y+W5aS05YOP5aSx6LSlOicsIGVycm9yKTtcclxuICAgIHJldHVybiAnaHR0cHM6Ly9maWxlcy5jYXRib3gubW9lL3U4Y2N5NS5qcGcnO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/utils/index.ts\n\n}');
  },
  "./src/多云熊/备份/给rovo的/modules/utils/userInfoRetrieval.ts": 
  /*!**************************************************************!*\
  !*** ./src/多云熊/备份/给rovo的/modules/utils/userInfoRetrieval.ts ***!
  \**************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UserInfoRetrieval: () => (/* binding */ UserInfoRetrieval),\n/* harmony export */   debugUserInfoEnvironment: () => (/* binding */ debugUserInfoEnvironment),\n/* harmony export */   defaultUserInfoRetrieval: () => (/* binding */ defaultUserInfoRetrieval),\n/* harmony export */   getSimpleUserAvatar: () => (/* binding */ getSimpleUserAvatar),\n/* harmony export */   getUserAvatar: () => (/* binding */ getUserAvatar),\n/* harmony export */   getUserAvatarAsync: () => (/* binding */ getUserAvatarAsync),\n/* harmony export */   getUserInfo: () => (/* binding */ getUserInfo),\n/* harmony export */   getUserName: () => (/* binding */ getUserName),\n/* harmony export */   getUserNameAsync: () => (/* binding */ getUserNameAsync)\n/* harmony export */ });\n/**\n * 用户信息获取工具类\n * 提供获取当前用户姓名和头像的统一接口\n */\n/**\n * 用户信息获取工具类\n */\nclass UserInfoRetrieval {\n    options;\n    constructor(options = {}) {\n        this.options = {\n            defaultUserName: options.defaultUserName || 'User',\n            defaultAvatarUrl: options.defaultAvatarUrl || 'https://files.catbox.moe/u8ccy5.jpg',\n            enableLogging: options.enableLogging !== false, // 默认启用日志\n        };\n    }\n    /**\n     * 获取完整的用户信息\n     */\n    getUserInfo() {\n        return {\n            id: '{{user}}',\n            name: this.getUserName(),\n            avatar: this.getUserAvatar(),\n        };\n    }\n    /**\n     * 获取用户名称\n     */\n    getUserName() {\n        try {\n            // 方案1: 使用 TavernHelper 的宏替换功能\n            if (window.TavernHelper && window.TavernHelper.substitudeMacros) {\n                const userName = window.TavernHelper.substitudeMacros('{{user}}');\n                if (userName && userName !== '{{user}}' && userName.trim()) {\n                    return userName.trim();\n                }\n            }\n            // 方案2: 尝试从全局变量获取\n            const globalVars = [\n                () => window.power_user?.name,\n                () => window.name1,\n                () => window.user_name,\n                () => window.userName,\n            ];\n            for (const getVar of globalVars) {\n                try {\n                    const value = getVar();\n                    if (value && typeof value === 'string' && value.trim()) {\n                        return value.trim();\n                    }\n                }\n                catch (e) {\n                    // 忽略访问错误，继续尝试下一个\n                }\n            }\n            // 使用默认值\n            return this.options.defaultUserName;\n        }\n        catch (error) {\n            return this.options.defaultUserName;\n        }\n    }\n    /**\n     * 异步获取用户名称（使用 triggerSlash 方法）\n     */\n    async getUserNameAsync() {\n        try {\n            // 方案1: 使用 triggerSlash 执行 /pass {{user}} 命令\n            if (typeof triggerSlash === 'function') {\n                try {\n                    const result = await triggerSlash('/pass {{user}}');\n                    if (result && typeof result === 'string' && result.trim() && result !== '{{user}}') {\n                        return result.trim();\n                    }\n                }\n                catch (e) {\n                    // 忽略错误，继续尝试其他方法\n                }\n            }\n            // 方案2: 回退到同步方法\n            return this.getUserName();\n        }\n        catch (error) {\n            return this.options.defaultUserName;\n        }\n    }\n    /**\n     * 获取用户头像\n     */\n    getUserAvatar() {\n        try {\n            // 方案1: 使用 TavernHelper 的宏替换功能获取 {{userAvatarPath}}\n            if (window.TavernHelper && window.TavernHelper.substitudeMacros) {\n                try {\n                    const userAvatarPath = window.TavernHelper.substitudeMacros('{{userAvatarPath}}');\n                    if (userAvatarPath && userAvatarPath !== '{{userAvatarPath}}' && userAvatarPath.trim()) {\n                        this.log('✅ 从 {{userAvatarPath}} 宏获取到用户头像:', userAvatarPath);\n                        return userAvatarPath.trim();\n                    }\n                }\n                catch (e) {\n                    this.log('⚠️ 宏替换失败:', e);\n                }\n            }\n            // 方案2: 从 power_user 获取\n            if (window.power_user?.avatar) {\n                this.log('✅ 从 power_user.avatar 获取到用户头像');\n                return window.power_user.avatar;\n            }\n            // 方案3: 从全局变量 user_avatar 获取\n            if (window.user_avatar) {\n                const userAvatar = window.user_avatar;\n                if (typeof userAvatar === 'string' && userAvatar.trim()) {\n                    this.log('✅ 从 user_avatar 全局变量获取到用户头像:', userAvatar);\n                    return userAvatar.trim();\n                }\n            }\n            // 方案4: 从 DOM 元素获取\n            const userAvatarElement = document.querySelector('.user-avatar, .user_avatar');\n            if (userAvatarElement) {\n                this.log('🔍 找到 .user_avatar 元素，尝试获取头像');\n                // 子方案4.1: 从 background-image 获取\n                const bgImage = window.getComputedStyle(userAvatarElement).backgroundImage;\n                if (bgImage && bgImage !== 'none') {\n                    const match = bgImage.match(/url\\([\"']?([^\"']*)[\"']?\\)/);\n                    if (match?.[1]) {\n                        this.log('✅ 从 .user_avatar 元素的 background-image 获取到用户头像:', match[1]);\n                        return match[1];\n                    }\n                }\n                // 子方案4.2: 从 src 属性获取（如果是 img 元素）\n                if (userAvatarElement.tagName === 'IMG') {\n                    const imgSrc = userAvatarElement.src;\n                    if (imgSrc) {\n                        this.log('✅ 从 .user_avatar img 元素的 src 获取到用户头像:', imgSrc);\n                        return imgSrc;\n                    }\n                }\n                // 子方案4.3: 从内部 img 元素获取\n                const innerImg = userAvatarElement.querySelector('img');\n                if (innerImg && innerImg.src) {\n                    this.log('✅ 从 .user_avatar 内部 img 元素获取到用户头像:', innerImg.src);\n                    return innerImg.src;\n                }\n                // 子方案4.4: 从 data 属性获取\n                const dataAvatar = userAvatarElement.getAttribute('data-avatar') ||\n                    userAvatarElement.getAttribute('data-src') ||\n                    userAvatarElement.getAttribute('data-image');\n                if (dataAvatar) {\n                    this.log('✅ 从 .user_avatar 元素的 data 属性获取到用户头像:', dataAvatar);\n                    return dataAvatar;\n                }\n                this.log('⚠️ .user_avatar 元素存在但未找到头像信息');\n            }\n            else {\n                this.log('⚠️ 未找到 .user_avatar 元素');\n            }\n            // 方案5: 从其他可能的全局变量获取\n            const globalAvatarVars = [\n                () => window.settings?.user_avatar,\n                () => window.chat_metadata?.user_avatar,\n                () => window.persona?.avatar,\n            ];\n            for (const getVar of globalAvatarVars) {\n                try {\n                    const value = getVar();\n                    if (value && typeof value === 'string' && value.trim()) {\n                        this.log('✅ 从其他全局变量获取到用户头像:', value);\n                        return value.trim();\n                    }\n                }\n                catch (e) {\n                    // 忽略访问错误，继续尝试下一个\n                }\n            }\n            // 使用默认头像\n            this.log('⚠️ 无法获取用户头像，使用默认头像');\n            return this.options.defaultAvatarUrl;\n        }\n        catch (error) {\n            this.log('❌ 获取用户头像失败，使用默认值:', error);\n            return this.options.defaultAvatarUrl;\n        }\n    }\n    /**\n     * 检查 TavernHelper 是否可用\n     */\n    isTavernHelperAvailable() {\n        return !!(window.TavernHelper && window.TavernHelper.substitudeMacros);\n    }\n    /**\n     * 获取可用的全局变量列表\n     */\n    getAvailableGlobalVars() {\n        const vars = {};\n        try {\n            // 检查所有可能的全局变量\n            const varNames = [\n                'power_user',\n                'name1',\n                'user_name',\n                'userName',\n                'user_avatar',\n                'settings',\n                'chat_metadata',\n                'characters',\n                'this_chid',\n                'TavernHelper',\n                'eventSource',\n                'main_api',\n            ];\n            for (const varName of varNames) {\n                try {\n                    const value = window[varName];\n                    if (value !== undefined) {\n                        vars[varName] = value;\n                    }\n                }\n                catch (e) {\n                    // 忽略访问错误\n                }\n            }\n        }\n        catch (e) {\n            this.log('获取全局变量时出错:', e);\n        }\n        return vars;\n    }\n    /**\n     * 调试方法：打印当前环境信息\n     */\n    debugEnvironment() {\n        this.log('=== 用户信息获取环境检查 ===');\n        this.log('triggerSlash 函数可用:', typeof triggerSlash === 'function');\n        this.log('TavernHelper 可用:', !!window.TavernHelper);\n        this.log('power_user 可用:', !!window.power_user);\n        // 检查 .user_avatar 元素\n        const userAvatarElement = document.querySelector('.user_avatar');\n        if (userAvatarElement) {\n            this.log('✅ .user_avatar 元素存在');\n            this.log('元素标签:', userAvatarElement.tagName);\n            this.log('元素类名:', userAvatarElement.className);\n            const bgImage = window.getComputedStyle(userAvatarElement).backgroundImage;\n            this.log('背景图片:', bgImage);\n            if (userAvatarElement.tagName === 'IMG') {\n                this.log('img src:', userAvatarElement.src);\n            }\n            const innerImg = userAvatarElement.querySelector('img');\n            if (innerImg) {\n                this.log('内部 img src:', innerImg.src);\n            }\n            const dataAttrs = ['data-avatar', 'data-src', 'data-image'];\n            dataAttrs.forEach(attr => {\n                const value = userAvatarElement.getAttribute(attr);\n                if (value) {\n                    this.log(`${attr}:`, value);\n                }\n            });\n        }\n        else {\n            this.log('❌ .user_avatar 元素不存在');\n        }\n        this.log('=== 检查完成 ===');\n    }\n    /**\n     * 日志记录方法\n     */\n    log(message, data) {\n        if (this.options.enableLogging) {\n            if (data !== undefined) {\n                console.log(`[UserInfoRetrieval] ${message}`, data);\n            }\n            else {\n                console.log(`[UserInfoRetrieval] ${message}`);\n            }\n        }\n    }\n    /**\n     * 更新配置选项\n     */\n    updateOptions(options) {\n        this.options = { ...this.options, ...options };\n    }\n}\n/**\n * 创建默认的用户信息获取实例\n */\nconst defaultUserInfoRetrieval = new UserInfoRetrieval();\n/**\n * 便捷方法：获取用户信息\n */\nfunction getUserInfo(options) {\n    const retrieval = options ? new UserInfoRetrieval(options) : defaultUserInfoRetrieval;\n    return retrieval.getUserInfo();\n}\n/**\n * 便捷方法：获取用户名\n */\nfunction getUserName(options) {\n    const retrieval = options ? new UserInfoRetrieval(options) : defaultUserInfoRetrieval;\n    return retrieval.getUserName();\n}\n/**\n * 便捷方法：异步获取用户名\n */\nasync function getUserNameAsync(options) {\n    const retrieval = options ? new UserInfoRetrieval(options) : defaultUserInfoRetrieval;\n    return retrieval.getUserNameAsync();\n}\n/**\n * 便捷方法：调试环境信息\n */\nfunction debugUserInfoEnvironment(options) {\n    const retrieval = options ? new UserInfoRetrieval(options) : defaultUserInfoRetrieval;\n    retrieval.debugEnvironment();\n}\n/**\n * 便捷方法：获取用户头像\n */\nfunction getUserAvatar(options) {\n    const retrieval = options ? new UserInfoRetrieval(options) : defaultUserInfoRetrieval;\n    return retrieval.getUserAvatar();\n}\n/**\n * 异步获取用户头像（推荐使用，支持更多获取策略）\n */\nasync function getUserAvatarAsync(options) {\n    try {\n        // 优先尝试使用AvatarSourceService（如果可用）\n        if (typeof window !== 'undefined' && window.avatarSourceService) {\n            return await window.avatarSourceService.getCurrentAvatar();\n        }\n        // 降级到同步方法\n        return getUserAvatar(options);\n    }\n    catch (error) {\n        console.warn('[getUserAvatarAsync] 异步获取失败，降级到同步方法:', error);\n        return getUserAvatar(options);\n    }\n}\n/**\n * 简化的用户头像获取函数 - 专门针对 .user_avatar 元素优化\n * @param defaultUrl 默认头像URL\n * @returns 用户头像URL\n */\n// 缓存上次的结果，避免重复日志\nlet lastSimpleAvatarResult = null;\nlet lastSimpleAvatarTime = 0;\nconst SIMPLE_AVATAR_CACHE_DURATION = 1000; // 1秒缓存\n// 调试模式开关\nconst DEBUG_SIMPLE_AVATAR = false;\nfunction getSimpleUserAvatar(defaultUrl = 'https://files.catbox.moe/u8ccy5.jpg') {\n    try {\n        // 检查缓存\n        const now = Date.now();\n        if (lastSimpleAvatarResult && now - lastSimpleAvatarTime < SIMPLE_AVATAR_CACHE_DURATION) {\n            return lastSimpleAvatarResult;\n        }\n        // 直接查找 .user-avatar 或 .user_avatar 元素\n        const userAvatarElement = document.querySelector('.user-avatar, .user_avatar');\n        if (!userAvatarElement) {\n            // 只在调试模式和结果发生变化时才输出日志\n            if (DEBUG_SIMPLE_AVATAR && lastSimpleAvatarResult !== defaultUrl) {\n                console.log('[SimpleUserAvatar] 未找到 .user_avatar 元素');\n            }\n            lastSimpleAvatarResult = defaultUrl;\n            lastSimpleAvatarTime = now;\n            return defaultUrl;\n        }\n        // 尝试多种方式获取头像\n        const methods = [\n            // 方法1: background-image\n            () => {\n                const bgImage = window.getComputedStyle(userAvatarElement).backgroundImage;\n                if (bgImage && bgImage !== 'none') {\n                    const match = bgImage.match(/url\\([\"']?([^\"']*)[\"']?\\)/);\n                    if (match?.[1]) {\n                        if (DEBUG_SIMPLE_AVATAR)\n                            console.log('[SimpleUserAvatar] 从 background-image 获取头像:', match[1]);\n                        return match[1];\n                    }\n                }\n                return null;\n            },\n            // 方法2: img 元素的 src\n            () => {\n                if (userAvatarElement.tagName === 'IMG') {\n                    const src = userAvatarElement.src;\n                    if (src) {\n                        if (DEBUG_SIMPLE_AVATAR)\n                            console.log('[SimpleUserAvatar] 从 img src 获取头像:', src);\n                        return src;\n                    }\n                }\n                return null;\n            },\n            // 方法3: 内部 img 元素\n            () => {\n                const innerImg = userAvatarElement.querySelector('img');\n                if (innerImg && innerImg.src) {\n                    if (DEBUG_SIMPLE_AVATAR)\n                        console.log('[SimpleUserAvatar] 从内部 img 获取头像:', innerImg.src);\n                    return innerImg.src;\n                }\n                return null;\n            },\n            // 方法4: data 属性\n            () => {\n                const dataAttrs = ['data-avatar', 'data-src', 'data-image', 'data-url'];\n                for (const attr of dataAttrs) {\n                    const value = userAvatarElement.getAttribute(attr);\n                    if (value) {\n                        if (DEBUG_SIMPLE_AVATAR)\n                            console.log(`[SimpleUserAvatar] 从 ${attr} 获取头像:`, value);\n                        return value;\n                    }\n                }\n                return null;\n            },\n            // 方法5: style 属性中的 background-image\n            () => {\n                const style = userAvatarElement.getAttribute('style');\n                if (style) {\n                    const match = style.match(/background-image:\\s*url\\([\"']?([^\"']*)[\"']?\\)/);\n                    if (match?.[1]) {\n                        if (DEBUG_SIMPLE_AVATAR)\n                            console.log('[SimpleUserAvatar] 从 style 属性获取头像:', match[1]);\n                        return match[1];\n                    }\n                }\n                return null;\n            },\n        ];\n        // 依次尝试各种方法\n        for (const method of methods) {\n            try {\n                const result = method();\n                if (result) {\n                    return result;\n                }\n            }\n            catch (e) {\n                // 忽略单个方法的错误，继续尝试下一个\n            }\n        }\n        if (DEBUG_SIMPLE_AVATAR)\n            console.log('[SimpleUserAvatar] 所有方法都失败，使用默认头像');\n        return defaultUrl;\n    }\n    catch (error) {\n        if (DEBUG_SIMPLE_AVATAR)\n            console.error('[SimpleUserAvatar] 获取头像时发生错误:', error);\n        return defaultUrl;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL21vZHVsZXMvdXRpbHMvdXNlckluZm9SZXRyaWV2YWwudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7OztHQUdHO0FBaUJIOztHQUVHO0FBQ0ksTUFBTSxpQkFBaUI7SUFDcEIsT0FBTyxDQUFxQztJQUVwRCxZQUFZLFVBQW9DLEVBQUU7UUFDaEQsSUFBSSxDQUFDLE9BQU8sR0FBRztZQUNiLGVBQWUsRUFBRSxPQUFPLENBQUMsZUFBZSxJQUFJLE1BQU07WUFDbEQsZ0JBQWdCLEVBQUUsT0FBTyxDQUFDLGdCQUFnQixJQUFJLHFDQUFxQztZQUNuRixhQUFhLEVBQUUsT0FBTyxDQUFDLGFBQWEsS0FBSyxLQUFLLEVBQUUsU0FBUztTQUMxRCxDQUFDO0lBQ0osQ0FBQztJQUVEOztPQUVHO0lBQ0gsV0FBVztRQUNULE9BQU87WUFDTCxFQUFFLEVBQUUsVUFBVTtZQUNkLElBQUksRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFO1lBQ3hCLE1BQU0sRUFBRSxJQUFJLENBQUMsYUFBYSxFQUFFO1NBQzdCLENBQUM7SUFDSixDQUFDO0lBRUQ7O09BRUc7SUFDSCxXQUFXO1FBQ1QsSUFBSSxDQUFDO1lBQ0gsOEJBQThCO1lBQzlCLElBQUksTUFBTSxDQUFDLFlBQVksSUFBSSxNQUFNLENBQUMsWUFBWSxDQUFDLGdCQUFnQixFQUFFLENBQUM7Z0JBQ2hFLE1BQU0sUUFBUSxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUMsZ0JBQWdCLENBQUMsVUFBVSxDQUFDLENBQUM7Z0JBQ2xFLElBQUksUUFBUSxJQUFJLFFBQVEsS0FBSyxVQUFVLElBQUksUUFBUSxDQUFDLElBQUksRUFBRSxFQUFFLENBQUM7b0JBQzNELE9BQU8sUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDO2dCQUN6QixDQUFDO1lBQ0gsQ0FBQztZQUVELGlCQUFpQjtZQUNqQixNQUFNLFVBQVUsR0FBRztnQkFDakIsR0FBRyxFQUFFLENBQUUsTUFBYyxD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TyxDQUFDLEdBQUcsQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFDO1FBQzFFLE9BQU8sVUFBVSxDQUFDO0lBQ3BCLENBQUM7SUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1FBQ2YsSUFBSSxtQkFBbUI7WUFBRSxPQUFPLENBQUMsS0FBSyxDQUFDLCtCQUErQixFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQy9FLE9BQU8sVUFBVSxDQUFDO0lBQ3BCLENBQUM7QUFDSCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQvbW9kdWxlcy91dGlscy91c2VySW5mb1JldHJpZXZhbC50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIOeUqOaIt+S/oeaBr+iOt+WPluW3peWFt+exu1xyXG4gKiDmj5Dkvpvojrflj5blvZPliY3nlKjmiLflp5PlkI3lkozlpLTlg4/nmoTnu5/kuIDmjqXlj6NcclxuICovXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFVzZXJJbmZvIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIG5hbWU6IHN0cmluZztcclxuICBhdmF0YXI6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBVc2VySW5mb1JldHJpZXZhbE9wdGlvbnMge1xyXG4gIC8qKiDpu5jorqTnlKjmiLflkI3vvIzlvZPmiYDmnInojrflj5bmlrnlvI/pg73lpLHotKXml7bkvb/nlKggKi9cclxuICBkZWZhdWx0VXNlck5hbWU/OiBzdHJpbmc7XHJcbiAgLyoqIOm7mOiupOWktOWDj1VSTO+8jOW9k+aJgOacieiOt+WPluaWueW8j+mDveWksei0peaXtuS9v+eUqCAqL1xyXG4gIGRlZmF1bHRBdmF0YXJVcmw/OiBzdHJpbmc7XHJcbiAgLyoqIOaYr+WQpuWQr+eUqOivpue7huaXpeW/lyAqL1xyXG4gIGVuYWJsZUxvZ2dpbmc/OiBib29sZWFuO1xyXG59XHJcblxyXG4vKipcclxuICog55So5oi35L+h5oGv6I635Y+W5bel5YW357G7XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVXNlckluZm9SZXRyaWV2YWwge1xyXG4gIHByaXZhdGUgb3B0aW9uczogUmVxdWlyZWQ8VXNlckluZm9SZXRyaWV2YWxPcHRpb25zPjtcclxuXHJcbiAgY29uc3RydWN0b3Iob3B0aW9uczogVXNlckluZm9SZXRyaWV2YWxPcHRpb25zID0ge30pIHtcclxuICAgIHRoaXMub3B0aW9ucyA9IHtcclxuICAgICAgZGVmYXVsdFVzZXJOYW1lOiBvcHRpb25zLmRlZmF1bHRVc2VyTmFtZSB8fCAnVXNlcicsXHJcbiAgICAgIGRlZmF1bHRBdmF0YXJVcmw6IG9wdGlvbnMuZGVmYXVsdEF2YXRhclVybCB8fCAnaHR0cHM6Ly9maWxlcy5jYXRib3gubW9lL3U4Y2N5NS5qcGcnLFxyXG4gICAgICBlbmFibGVMb2dnaW5nOiBvcHRpb25zLmVuYWJsZUxvZ2dpbmcgIT09IGZhbHNlLCAvLyDpu5jorqTlkK/nlKjml6Xlv5dcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5blrozmlbTnmoTnlKjmiLfkv6Hmga9cclxuICAgKi9cclxuICBnZXRVc2VySW5mbygpOiBVc2VySW5mbyB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpZDogJ3t7dXNlcn19JyxcclxuICAgICAgbmFtZTogdGhpcy5nZXRVc2VyTmFtZSgpLFxyXG4gICAgICBhdmF0YXI6IHRoaXMuZ2V0VXNlckF2YXRhcigpLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPlueUqOaIt+WQjeensFxyXG4gICAqL1xyXG4gIGdldFVzZXJOYW1lKCk6IHN0cmluZyB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDmlrnmoYgxOiDkvb/nlKggVGF2ZXJuSGVscGVyIOeahOWuj+abv+aNouWKn+iDvVxyXG4gICAgICBpZiAod2luZG93LlRhdmVybkhlbHBlciAmJiB3aW5kb3cuVGF2ZXJuSGVscGVyLnN1YnN0aXR1ZGVNYWNyb3MpIHtcclxuICAgICAgICBjb25zdCB1c2VyTmFtZSA9IHdpbmRvdy5UYXZlcm5IZWxwZXIuc3Vic3RpdHVkZU1hY3Jvcygne3t1c2VyfX0nKTtcclxuICAgICAgICBpZiAodXNlck5hbWUgJiYgdXNlck5hbWUgIT09ICd7e3VzZXJ9fScgJiYgdXNlck5hbWUudHJpbSgpKSB7XHJcbiAgICAgICAgICByZXR1cm4gdXNlck5hbWUudHJpbSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5pa55qGIMjog5bCd6K+V5LuO5YWo5bGA5Y+Y6YeP6I635Y+WXHJcbiAgICAgIGNvbnN0IGdsb2JhbFZhcnMgPSBbXHJcbiAgICAgICAgKCkgPT4gKHdpbmRvdyBhcyBhbnkpLnBvd2VyX3VzZXI/Lm5hbWUsXHJcbiAgICAgICAgKCkgPT4gKHdpbmRvdyBhcyBhbnkpLm5hbWUxLFxyXG4gICAgICAgICgpID0+ICh3aW5kb3cgYXMgYW55KS51c2VyX25hbWUsXHJcbiAgICAgICAgKCkgPT4gKHdpbmRvdyBhcyBhbnkpLnVzZXJOYW1lLFxyXG4gICAgICBdO1xyXG5cclxuICAgICAgZm9yIChjb25zdCBnZXRWYXIgb2YgZ2xvYmFsVmFycykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IGdldFZhcigpO1xyXG4gICAgICAgICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUudHJpbSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS50cmltKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgLy8g5b+955Wl6K6/6Zeu6ZSZ6K+v77yM57un57ut5bCd6K+V5LiL5LiA5LiqXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDkvb/nlKjpu5jorqTlgLxcclxuICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5kZWZhdWx0VXNlck5hbWU7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmRlZmF1bHRVc2VyTmFtZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOW8guatpeiOt+WPlueUqOaIt+WQjeensO+8iOS9v+eUqCB0cmlnZ2VyU2xhc2gg5pa55rOV77yJXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0VXNlck5hbWVBc3luYygpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g5pa55qGIMTog5L2/55SoIHRyaWdnZXJTbGFzaCDmiafooYwgL3Bhc3Mge3t1c2VyfX0g5ZG95LukXHJcbiAgICAgIGlmICh0eXBlb2YgdHJpZ2dlclNsYXNoID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRyaWdnZXJTbGFzaCgnL3Bhc3Mge3t1c2VyfX0nKTtcclxuICAgICAgICAgIGlmIChyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdCA9PT0gJ3N0cmluZycgJiYgcmVzdWx0LnRyaW0oKSAmJiByZXN1bHQgIT09ICd7e3VzZXJ9fScpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50cmltKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgLy8g5b+955Wl6ZSZ6K+v77yM57un57ut5bCd6K+V5YW25LuW5pa55rOVXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDmlrnmoYgyOiDlm57pgIDliLDlkIzmraXmlrnms5VcclxuICAgICAgcmV0dXJuIHRoaXMuZ2V0VXNlck5hbWUoKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuZGVmYXVsdFVzZXJOYW1lO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W55So5oi35aS05YOPXHJcbiAgICovXHJcbiAgZ2V0VXNlckF2YXRhcigpOiBzdHJpbmcge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g5pa55qGIMTog5L2/55SoIFRhdmVybkhlbHBlciDnmoTlro/mm7/mjaLlip/og73ojrflj5Yge3t1c2VyQXZhdGFyUGF0aH19XHJcbiAgICAgIGlmICh3aW5kb3cuVGF2ZXJuSGVscGVyICYmIHdpbmRvdy5UYXZlcm5IZWxwZXIuc3Vic3RpdHVkZU1hY3Jvcykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCB1c2VyQXZhdGFyUGF0aCA9IHdpbmRvdy5UYXZlcm5IZWxwZXIuc3Vic3RpdHVkZU1hY3Jvcygne3t1c2VyQXZhdGFyUGF0aH19Jyk7XHJcbiAgICAgICAgICBpZiAodXNlckF2YXRhclBhdGggJiYgdXNlckF2YXRhclBhdGggIT09ICd7e3VzZXJBdmF0YXJQYXRofX0nICYmIHVzZXJBdmF0YXJQYXRoLnRyaW0oKSkge1xyXG4gICAgICAgICAgICB0aGlzLmxvZygn4pyFIOS7jiB7e3VzZXJBdmF0YXJQYXRofX0g5a6P6I635Y+W5Yiw55So5oi35aS05YOPOicsIHVzZXJBdmF0YXJQYXRoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHVzZXJBdmF0YXJQYXRoLnRyaW0oKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICB0aGlzLmxvZygn4pqg77iPIOWuj+abv+aNouWksei0pTonLCBlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOaWueahiDI6IOS7jiBwb3dlcl91c2VyIOiOt+WPllxyXG4gICAgICBpZiAoKHdpbmRvdyBhcyBhbnkpLnBvd2VyX3VzZXI/LmF2YXRhcikge1xyXG4gICAgICAgIHRoaXMubG9nKCfinIUg5LuOIHBvd2VyX3VzZXIuYXZhdGFyIOiOt+WPluWIsOeUqOaIt+WktOWDjycpO1xyXG4gICAgICAgIHJldHVybiAod2luZG93IGFzIGFueSkucG93ZXJfdXNlci5hdmF0YXI7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOaWueahiDM6IOS7juWFqOWxgOWPmOmHjyB1c2VyX2F2YXRhciDojrflj5ZcclxuICAgICAgaWYgKCh3aW5kb3cgYXMgYW55KS51c2VyX2F2YXRhcikge1xyXG4gICAgICAgIGNvbnN0IHVzZXJBdmF0YXIgPSAod2luZG93IGFzIGFueSkudXNlcl9hdmF0YXI7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB1c2VyQXZhdGFyID09PSAnc3RyaW5nJyAmJiB1c2VyQXZhdGFyLnRyaW0oKSkge1xyXG4gICAgICAgICAgdGhpcy5sb2coJ+KchSDku44gdXNlcl9hdmF0YXIg5YWo5bGA5Y+Y6YeP6I635Y+W5Yiw55So5oi35aS05YOPOicsIHVzZXJBdmF0YXIpO1xyXG4gICAgICAgICAgcmV0dXJuIHVzZXJBdmF0YXIudHJpbSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5pa55qGINDog5LuOIERPTSDlhYPntKDojrflj5ZcclxuICAgICAgY29uc3QgdXNlckF2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXNlci1hdmF0YXIsIC51c2VyX2F2YXRhcicpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICBpZiAodXNlckF2YXRhckVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLmxvZygn8J+UjSDmib7liLAgLnVzZXJfYXZhdGFyIOWFg+e0oO+8jOWwneivleiOt+WPluWktOWDjycpO1xyXG5cclxuICAgICAgICAvLyDlrZDmlrnmoYg0LjE6IOS7jiBiYWNrZ3JvdW5kLWltYWdlIOiOt+WPllxyXG4gICAgICAgIGNvbnN0IGJnSW1hZ2UgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh1c2VyQXZhdGFyRWxlbWVudCkuYmFja2dyb3VuZEltYWdlO1xyXG4gICAgICAgIGlmIChiZ0ltYWdlICYmIGJnSW1hZ2UgIT09ICdub25lJykge1xyXG4gICAgICAgICAgY29uc3QgbWF0Y2ggPSBiZ0ltYWdlLm1hdGNoKC91cmxcXChbXCInXT8oW15cIiddKilbXCInXT9cXCkvKTtcclxuICAgICAgICAgIGlmIChtYXRjaD8uWzFdKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9nKCfinIUg5LuOIC51c2VyX2F2YXRhciDlhYPntKDnmoQgYmFja2dyb3VuZC1pbWFnZSDojrflj5bliLDnlKjmiLflpLTlg486JywgbWF0Y2hbMV0pO1xyXG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hbMV07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDlrZDmlrnmoYg0LjI6IOS7jiBzcmMg5bGe5oCn6I635Y+W77yI5aaC5p6c5pivIGltZyDlhYPntKDvvIlcclxuICAgICAgICBpZiAodXNlckF2YXRhckVsZW1lbnQudGFnTmFtZSA9PT0gJ0lNRycpIHtcclxuICAgICAgICAgIGNvbnN0IGltZ1NyYyA9ICh1c2VyQXZhdGFyRWxlbWVudCBhcyBIVE1MSW1hZ2VFbGVtZW50KS5zcmM7XHJcbiAgICAgICAgICBpZiAoaW1nU3JjKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9nKCfinIUg5LuOIC51c2VyX2F2YXRhciBpbWcg5YWD57Sg55qEIHNyYyDojrflj5bliLDnlKjmiLflpLTlg486JywgaW1nU3JjKTtcclxuICAgICAgICAgICAgcmV0dXJuIGltZ1NyYztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOWtkOaWueahiDQuMzog5LuO5YaF6YOoIGltZyDlhYPntKDojrflj5ZcclxuICAgICAgICBjb25zdCBpbm5lckltZyA9IHVzZXJBdmF0YXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2ltZycpO1xyXG4gICAgICAgIGlmIChpbm5lckltZyAmJiBpbm5lckltZy5zcmMpIHtcclxuICAgICAgICAgIHRoaXMubG9nKCfinIUg5LuOIC51c2VyX2F2YXRhciDlhoXpg6ggaW1nIOWFg+e0oOiOt+WPluWIsOeUqOaIt+WktOWDjzonLCBpbm5lckltZy5zcmMpO1xyXG4gICAgICAgICAgcmV0dXJuIGlubmVySW1nLnNyYztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOWtkOaWueahiDQuNDog5LuOIGRhdGEg5bGe5oCn6I635Y+WXHJcbiAgICAgICAgY29uc3QgZGF0YUF2YXRhciA9XHJcbiAgICAgICAgICB1c2VyQXZhdGFyRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYXZhdGFyJykgfHxcclxuICAgICAgICAgIHVzZXJBdmF0YXJFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1zcmMnKSB8fFxyXG4gICAgICAgICAgdXNlckF2YXRhckVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWltYWdlJyk7XHJcbiAgICAgICAgaWYgKGRhdGFBdmF0YXIpIHtcclxuICAgICAgICAgIHRoaXMubG9nKCfinIUg5LuOIC51c2VyX2F2YXRhciDlhYPntKDnmoQgZGF0YSDlsZ7mgKfojrflj5bliLDnlKjmiLflpLTlg486JywgZGF0YUF2YXRhcik7XHJcbiAgICAgICAgICByZXR1cm4gZGF0YUF2YXRhcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubG9nKCfimqDvuI8gLnVzZXJfYXZhdGFyIOWFg+e0oOWtmOWcqOS9huacquaJvuWIsOWktOWDj+S/oeaBrycpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMubG9nKCfimqDvuI8g5pyq5om+5YiwIC51c2VyX2F2YXRhciDlhYPntKAnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5pa55qGINTog5LuO5YW25LuW5Y+v6IO955qE5YWo5bGA5Y+Y6YeP6I635Y+WXHJcbiAgICAgIGNvbnN0IGdsb2JhbEF2YXRhclZhcnMgPSBbXHJcbiAgICAgICAgKCkgPT4gKHdpbmRvdyBhcyBhbnkpLnNldHRpbmdzPy51c2VyX2F2YXRhcixcclxuICAgICAgICAoKSA9PiAod2luZG93IGFzIGFueSkuY2hhdF9tZXRhZGF0YT8udXNlcl9hdmF0YXIsXHJcbiAgICAgICAgKCkgPT4gKHdpbmRvdyBhcyBhbnkpLnBlcnNvbmE/LmF2YXRhcixcclxuICAgICAgXTtcclxuXHJcbiAgICAgIGZvciAoY29uc3QgZ2V0VmFyIG9mIGdsb2JhbEF2YXRhclZhcnMpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3QgdmFsdWUgPSBnZXRWYXIoKTtcclxuICAgICAgICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLnRyaW0oKSkge1xyXG4gICAgICAgICAgICB0aGlzLmxvZygn4pyFIOS7juWFtuS7luWFqOWxgOWPmOmHj+iOt+WPluWIsOeUqOaIt+WktOWDjzonLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS50cmltKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgLy8g5b+955Wl6K6/6Zeu6ZSZ6K+v77yM57un57ut5bCd6K+V5LiL5LiA5LiqXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDkvb/nlKjpu5jorqTlpLTlg49cclxuICAgICAgdGhpcy5sb2coJ+KaoO+4jyDml6Dms5Xojrflj5bnlKjmiLflpLTlg4/vvIzkvb/nlKjpu5jorqTlpLTlg48nKTtcclxuICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5kZWZhdWx0QXZhdGFyVXJsO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5sb2coJ+KdjCDojrflj5bnlKjmiLflpLTlg4/lpLHotKXvvIzkvb/nlKjpu5jorqTlgLw6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmRlZmF1bHRBdmF0YXJVcmw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmo4Dmn6UgVGF2ZXJuSGVscGVyIOaYr+WQpuWPr+eUqFxyXG4gICAqL1xyXG4gIGlzVGF2ZXJuSGVscGVyQXZhaWxhYmxlKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuICEhKHdpbmRvdy5UYXZlcm5IZWxwZXIgJiYgd2luZG93LlRhdmVybkhlbHBlci5zdWJzdGl0dWRlTWFjcm9zKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluWPr+eUqOeahOWFqOWxgOWPmOmHj+WIl+ihqFxyXG4gICAqL1xyXG4gIGdldEF2YWlsYWJsZUdsb2JhbFZhcnMoKTogUmVjb3JkPHN0cmluZywgYW55PiB7XHJcbiAgICBjb25zdCB2YXJzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g5qOA5p+l5omA5pyJ5Y+v6IO955qE5YWo5bGA5Y+Y6YePXHJcbiAgICAgIGNvbnN0IHZhck5hbWVzID0gW1xyXG4gICAgICAgICdwb3dlcl91c2VyJyxcclxuICAgICAgICAnbmFtZTEnLFxyXG4gICAgICAgICd1c2VyX25hbWUnLFxyXG4gICAgICAgICd1c2VyTmFtZScsXHJcbiAgICAgICAgJ3VzZXJfYXZhdGFyJyxcclxuICAgICAgICAnc2V0dGluZ3MnLFxyXG4gICAgICAgICdjaGF0X21ldGFkYXRhJyxcclxuICAgICAgICAnY2hhcmFjdGVycycsXHJcbiAgICAgICAgJ3RoaXNfY2hpZCcsXHJcbiAgICAgICAgJ1RhdmVybkhlbHBlcicsXHJcbiAgICAgICAgJ2V2ZW50U291cmNlJyxcclxuICAgICAgICAnbWFpbl9hcGknLFxyXG4gICAgICBdO1xyXG5cclxuICAgICAgZm9yIChjb25zdCB2YXJOYW1lIG9mIHZhck5hbWVzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IHZhbHVlID0gKHdpbmRvdyBhcyBhbnkpW3Zhck5hbWVdO1xyXG4gICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdmFyc1t2YXJOYW1lXSA9IHZhbHVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgIC8vIOW/veeVpeiuv+mXrumUmeivr1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICB0aGlzLmxvZygn6I635Y+W5YWo5bGA5Y+Y6YeP5pe25Ye66ZSZOicsIGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB2YXJzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6LCD6K+V5pa55rOV77ya5omT5Y2w5b2T5YmN546v5aKD5L+h5oGvXHJcbiAgICovXHJcbiAgZGVidWdFbnZpcm9ubWVudCgpOiB2b2lkIHtcclxuICAgIHRoaXMubG9nKCc9PT0g55So5oi35L+h5oGv6I635Y+W546v5aKD5qOA5p+lID09PScpO1xyXG4gICAgdGhpcy5sb2coJ3RyaWdnZXJTbGFzaCDlh73mlbDlj6/nlKg6JywgdHlwZW9mIHRyaWdnZXJTbGFzaCA9PT0gJ2Z1bmN0aW9uJyk7XHJcbiAgICB0aGlzLmxvZygnVGF2ZXJuSGVscGVyIOWPr+eUqDonLCAhIXdpbmRvdy5UYXZlcm5IZWxwZXIpO1xyXG4gICAgdGhpcy5sb2coJ3Bvd2VyX3VzZXIg5Y+v55SoOicsICEhKHdpbmRvdyBhcyBhbnkpLnBvd2VyX3VzZXIpO1xyXG5cclxuICAgIC8vIOajgOafpSAudXNlcl9hdmF0YXIg5YWD57SgXHJcbiAgICBjb25zdCB1c2VyQXZhdGFyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51c2VyX2F2YXRhcicpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgaWYgKHVzZXJBdmF0YXJFbGVtZW50KSB7XHJcbiAgICAgIHRoaXMubG9nKCfinIUgLnVzZXJfYXZhdGFyIOWFg+e0oOWtmOWcqCcpO1xyXG4gICAgICB0aGlzLmxvZygn5YWD57Sg5qCH562+OicsIHVzZXJBdmF0YXJFbGVtZW50LnRhZ05hbWUpO1xyXG4gICAgICB0aGlzLmxvZygn5YWD57Sg57G75ZCNOicsIHVzZXJBdmF0YXJFbGVtZW50LmNsYXNzTmFtZSk7XHJcblxyXG4gICAgICBjb25zdCBiZ0ltYWdlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodXNlckF2YXRhckVsZW1lbnQpLmJhY2tncm91bmRJbWFnZTtcclxuICAgICAgdGhpcy5sb2coJ+iDjOaZr+WbvueJhzonLCBiZ0ltYWdlKTtcclxuXHJcbiAgICAgIGlmICh1c2VyQXZhdGFyRWxlbWVudC50YWdOYW1lID09PSAnSU1HJykge1xyXG4gICAgICAgIHRoaXMubG9nKCdpbWcgc3JjOicsICh1c2VyQXZhdGFyRWxlbWVudCBhcyBIVE1MSW1hZ2VFbGVtZW50KS5zcmMpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBpbm5lckltZyA9IHVzZXJBdmF0YXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2ltZycpO1xyXG4gICAgICBpZiAoaW5uZXJJbWcpIHtcclxuICAgICAgICB0aGlzLmxvZygn5YaF6YOoIGltZyBzcmM6JywgaW5uZXJJbWcuc3JjKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZGF0YUF0dHJzID0gWydkYXRhLWF2YXRhcicsICdkYXRhLXNyYycsICdkYXRhLWltYWdlJ107XHJcbiAgICAgIGRhdGFBdHRycy5mb3JFYWNoKGF0dHIgPT4ge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gdXNlckF2YXRhckVsZW1lbnQuZ2V0QXR0cmlidXRlKGF0dHIpO1xyXG4gICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgdGhpcy5sb2coYCR7YXR0cn06YCwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmxvZygn4p2MIC51c2VyX2F2YXRhciDlhYPntKDkuI3lrZjlnKgnKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmxvZygnPT09IOajgOafpeWujOaIkCA9PT0nKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaXpeW/l+iusOW9leaWueazlVxyXG4gICAqL1xyXG4gIHByaXZhdGUgbG9nKG1lc3NhZ2U6IHN0cmluZywgZGF0YT86IGFueSk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMub3B0aW9ucy5lbmFibGVMb2dnaW5nKSB7XHJcbiAgICAgIGlmIChkYXRhICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgW1VzZXJJbmZvUmV0cmlldmFsXSAke21lc3NhZ2V9YCwgZGF0YSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFtVc2VySW5mb1JldHJpZXZhbF0gJHttZXNzYWdlfWApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmm7TmlrDphY3nva7pgInpoblcclxuICAgKi9cclxuICB1cGRhdGVPcHRpb25zKG9wdGlvbnM6IFBhcnRpYWw8VXNlckluZm9SZXRyaWV2YWxPcHRpb25zPik6IHZvaWQge1xyXG4gICAgdGhpcy5vcHRpb25zID0geyAuLi50aGlzLm9wdGlvbnMsIC4uLm9wdGlvbnMgfTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDliJvlu7rpu5jorqTnmoTnlKjmiLfkv6Hmga/ojrflj5blrp7kvotcclxuICovXHJcbmV4cG9ydCBjb25zdCBkZWZhdWx0VXNlckluZm9SZXRyaWV2YWwgPSBuZXcgVXNlckluZm9SZXRyaWV2YWwoKTtcclxuXHJcbi8qKlxyXG4gKiDkvr/mjbfmlrnms5XvvJrojrflj5bnlKjmiLfkv6Hmga9cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRVc2VySW5mbyhvcHRpb25zPzogVXNlckluZm9SZXRyaWV2YWxPcHRpb25zKTogVXNlckluZm8ge1xyXG4gIGNvbnN0IHJldHJpZXZhbCA9IG9wdGlvbnMgPyBuZXcgVXNlckluZm9SZXRyaWV2YWwob3B0aW9ucykgOiBkZWZhdWx0VXNlckluZm9SZXRyaWV2YWw7XHJcbiAgcmV0dXJuIHJldHJpZXZhbC5nZXRVc2VySW5mbygpO1xyXG59XHJcblxyXG4vKipcclxuICog5L6/5o235pa55rOV77ya6I635Y+W55So5oi35ZCNXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VXNlck5hbWUob3B0aW9ucz86IFVzZXJJbmZvUmV0cmlldmFsT3B0aW9ucyk6IHN0cmluZyB7XHJcbiAgY29uc3QgcmV0cmlldmFsID0gb3B0aW9ucyA/IG5ldyBVc2VySW5mb1JldHJpZXZhbChvcHRpb25zKSA6IGRlZmF1bHRVc2VySW5mb1JldHJpZXZhbDtcclxuICByZXR1cm4gcmV0cmlldmFsLmdldFVzZXJOYW1lKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDkvr/mjbfmlrnms5XvvJrlvILmraXojrflj5bnlKjmiLflkI1cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyTmFtZUFzeW5jKG9wdGlvbnM/OiBVc2VySW5mb1JldHJpZXZhbE9wdGlvbnMpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gIGNvbnN0IHJldHJpZXZhbCA9IG9wdGlvbnMgPyBuZXcgVXNlckluZm9SZXRyaWV2YWwob3B0aW9ucykgOiBkZWZhdWx0VXNlckluZm9SZXRyaWV2YWw7XHJcbiAgcmV0dXJuIHJldHJpZXZhbC5nZXRVc2VyTmFtZUFzeW5jKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDkvr/mjbfmlrnms5XvvJrosIPor5Xnjq/looPkv6Hmga9cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWJ1Z1VzZXJJbmZvRW52aXJvbm1lbnQob3B0aW9ucz86IFVzZXJJbmZvUmV0cmlldmFsT3B0aW9ucyk6IHZvaWQge1xyXG4gIGNvbnN0IHJldHJpZXZhbCA9IG9wdGlvbnMgPyBuZXcgVXNlckluZm9SZXRyaWV2YWwob3B0aW9ucykgOiBkZWZhdWx0VXNlckluZm9SZXRyaWV2YWw7XHJcbiAgcmV0cmlldmFsLmRlYnVnRW52aXJvbm1lbnQoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOS+v+aNt+aWueazle+8muiOt+WPlueUqOaIt+WktOWDj1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFVzZXJBdmF0YXIob3B0aW9ucz86IFVzZXJJbmZvUmV0cmlldmFsT3B0aW9ucyk6IHN0cmluZyB7XHJcbiAgY29uc3QgcmV0cmlldmFsID0gb3B0aW9ucyA/IG5ldyBVc2VySW5mb1JldHJpZXZhbChvcHRpb25zKSA6IGRlZmF1bHRVc2VySW5mb1JldHJpZXZhbDtcclxuICByZXR1cm4gcmV0cmlldmFsLmdldFVzZXJBdmF0YXIoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOW8guatpeiOt+WPlueUqOaIt+WktOWDj++8iOaOqOiNkOS9v+eUqO+8jOaUr+aMgeabtOWkmuiOt+WPluetlueVpe+8iVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJBdmF0YXJBc3luYyhvcHRpb25zPzogVXNlckluZm9SZXRyaWV2YWxPcHRpb25zKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICB0cnkge1xyXG4gICAgLy8g5LyY5YWI5bCd6K+V5L2/55SoQXZhdGFyU291cmNlU2VydmljZe+8iOWmguaenOWPr+eUqO+8iVxyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICh3aW5kb3cgYXMgYW55KS5hdmF0YXJTb3VyY2VTZXJ2aWNlKSB7XHJcbiAgICAgIHJldHVybiBhd2FpdCAod2luZG93IGFzIGFueSkuYXZhdGFyU291cmNlU2VydmljZS5nZXRDdXJyZW50QXZhdGFyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g6ZmN57qn5Yiw5ZCM5q2l5pa55rOVXHJcbiAgICByZXR1cm4gZ2V0VXNlckF2YXRhcihvcHRpb25zKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS53YXJuKCdbZ2V0VXNlckF2YXRhckFzeW5jXSDlvILmraXojrflj5blpLHotKXvvIzpmY3nuqfliLDlkIzmraXmlrnms5U6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIGdldFVzZXJBdmF0YXIob3B0aW9ucyk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICog566A5YyW55qE55So5oi35aS05YOP6I635Y+W5Ye95pWwIC0g5LiT6Zeo6ZKI5a+5IC51c2VyX2F2YXRhciDlhYPntKDkvJjljJZcclxuICogQHBhcmFtIGRlZmF1bHRVcmwg6buY6K6k5aS05YOPVVJMXHJcbiAqIEByZXR1cm5zIOeUqOaIt+WktOWDj1VSTFxyXG4gKi9cclxuLy8g57yT5a2Y5LiK5qyh55qE57uT5p6c77yM6YG/5YWN6YeN5aSN5pel5b+XXHJcbmxldCBsYXN0U2ltcGxlQXZhdGFyUmVzdWx0OiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxubGV0IGxhc3RTaW1wbGVBdmF0YXJUaW1lID0gMDtcclxuY29uc3QgU0lNUExFX0FWQVRBUl9DQUNIRV9EVVJBVElPTiA9IDEwMDA7IC8vIDHnp5LnvJPlrZhcclxuXHJcbi8vIOiwg+ivleaooeW8j+W8gOWFs1xyXG5jb25zdCBERUJVR19TSU1QTEVfQVZBVEFSID0gZmFsc2U7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2ltcGxlVXNlckF2YXRhcihkZWZhdWx0VXJsOiBzdHJpbmcgPSAnaHR0cHM6Ly9maWxlcy5jYXRib3gubW9lL3U4Y2N5NS5qcGcnKTogc3RyaW5nIHtcclxuICB0cnkge1xyXG4gICAgLy8g5qOA5p+l57yT5a2YXHJcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgaWYgKGxhc3RTaW1wbGVBdmF0YXJSZXN1bHQgJiYgbm93IC0gbGFzdFNpbXBsZUF2YXRhclRpbWUgPCBTSU1QTEVfQVZBVEFSX0NBQ0hFX0RVUkFUSU9OKSB7XHJcbiAgICAgIHJldHVybiBsYXN0U2ltcGxlQXZhdGFyUmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOebtOaOpeafpeaJviAudXNlci1hdmF0YXIg5oiWIC51c2VyX2F2YXRhciDlhYPntKBcclxuICAgIGNvbnN0IHVzZXJBdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVzZXItYXZhdGFyLCAudXNlcl9hdmF0YXInKSBhcyBIVE1MRWxlbWVudDtcclxuXHJcbiAgICBpZiAoIXVzZXJBdmF0YXJFbGVtZW50KSB7XHJcbiAgICAgIC8vIOWPquWcqOiwg+ivleaooeW8j+WSjOe7k+aenOWPkeeUn+WPmOWMluaXtuaJjei+k+WHuuaXpeW/l1xyXG4gICAgICBpZiAoREVCVUdfU0lNUExFX0FWQVRBUiAmJiBsYXN0U2ltcGxlQXZhdGFyUmVzdWx0ICE9PSBkZWZhdWx0VXJsKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1tTaW1wbGVVc2VyQXZhdGFyXSDmnKrmib7liLAgLnVzZXJfYXZhdGFyIOWFg+e0oCcpO1xyXG4gICAgICB9XHJcbiAgICAgIGxhc3RTaW1wbGVBdmF0YXJSZXN1bHQgPSBkZWZhdWx0VXJsO1xyXG4gICAgICBsYXN0U2ltcGxlQXZhdGFyVGltZSA9IG5vdztcclxuICAgICAgcmV0dXJuIGRlZmF1bHRVcmw7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5bCd6K+V5aSa56eN5pa55byP6I635Y+W5aS05YOPXHJcbiAgICBjb25zdCBtZXRob2RzID0gW1xyXG4gICAgICAvLyDmlrnms5UxOiBiYWNrZ3JvdW5kLWltYWdlXHJcbiAgICAgICgpID0+IHtcclxuICAgICAgICBjb25zdCBiZ0ltYWdlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodXNlckF2YXRhckVsZW1lbnQpLmJhY2tncm91bmRJbWFnZTtcclxuICAgICAgICBpZiAoYmdJbWFnZSAmJiBiZ0ltYWdlICE9PSAnbm9uZScpIHtcclxuICAgICAgICAgIGNvbnN0IG1hdGNoID0gYmdJbWFnZS5tYXRjaCgvdXJsXFwoW1wiJ10/KFteXCInXSopW1wiJ10/XFwpLyk7XHJcbiAgICAgICAgICBpZiAobWF0Y2g/LlsxXSkge1xyXG4gICAgICAgICAgICBpZiAoREVCVUdfU0lNUExFX0FWQVRBUikgY29uc29sZS5sb2coJ1tTaW1wbGVVc2VyQXZhdGFyXSDku44gYmFja2dyb3VuZC1pbWFnZSDojrflj5blpLTlg486JywgbWF0Y2hbMV0pO1xyXG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hbMV07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgLy8g5pa55rOVMjogaW1nIOWFg+e0oOeahCBzcmNcclxuICAgICAgKCkgPT4ge1xyXG4gICAgICAgIGlmICh1c2VyQXZhdGFyRWxlbWVudC50YWdOYW1lID09PSAnSU1HJykge1xyXG4gICAgICAgICAgY29uc3Qgc3JjID0gKHVzZXJBdmF0YXJFbGVtZW50IGFzIEhUTUxJbWFnZUVsZW1lbnQpLnNyYztcclxuICAgICAgICAgIGlmIChzcmMpIHtcclxuICAgICAgICAgICAgaWYgKERFQlVHX1NJTVBMRV9BVkFUQVIpIGNvbnNvbGUubG9nKCdbU2ltcGxlVXNlckF2YXRhcl0g5LuOIGltZyBzcmMg6I635Y+W5aS05YOPOicsIHNyYyk7XHJcbiAgICAgICAgICAgIHJldHVybiBzcmM7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgLy8g5pa55rOVMzog5YaF6YOoIGltZyDlhYPntKBcclxuICAgICAgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGlubmVySW1nID0gdXNlckF2YXRhckVsZW1lbnQucXVlcnlTZWxlY3RvcignaW1nJyk7XHJcbiAgICAgICAgaWYgKGlubmVySW1nICYmIGlubmVySW1nLnNyYykge1xyXG4gICAgICAgICAgaWYgKERFQlVHX1NJTVBMRV9BVkFUQVIpIGNvbnNvbGUubG9nKCdbU2ltcGxlVXNlckF2YXRhcl0g5LuO5YaF6YOoIGltZyDojrflj5blpLTlg486JywgaW5uZXJJbWcuc3JjKTtcclxuICAgICAgICAgIHJldHVybiBpbm5lckltZy5zcmM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgLy8g5pa55rOVNDogZGF0YSDlsZ7mgKdcclxuICAgICAgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGRhdGFBdHRycyA9IFsnZGF0YS1hdmF0YXInLCAnZGF0YS1zcmMnLCAnZGF0YS1pbWFnZScsICdkYXRhLXVybCddO1xyXG4gICAgICAgIGZvciAoY29uc3QgYXR0ciBvZiBkYXRhQXR0cnMpIHtcclxuICAgICAgICAgIGNvbnN0IHZhbHVlID0gdXNlckF2YXRhckVsZW1lbnQuZ2V0QXR0cmlidXRlKGF0dHIpO1xyXG4gICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmIChERUJVR19TSU1QTEVfQVZBVEFSKSBjb25zb2xlLmxvZyhgW1NpbXBsZVVzZXJBdmF0YXJdIOS7jiAke2F0dHJ9IOiOt+WPluWktOWDjzpgLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvLyDmlrnms5U1OiBzdHlsZSDlsZ7mgKfkuK3nmoQgYmFja2dyb3VuZC1pbWFnZVxyXG4gICAgICAoKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgc3R5bGUgPSB1c2VyQXZhdGFyRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3N0eWxlJyk7XHJcbiAgICAgICAgaWYgKHN0eWxlKSB7XHJcbiAgICAgICAgICBjb25zdCBtYXRjaCA9IHN0eWxlLm1hdGNoKC9iYWNrZ3JvdW5kLWltYWdlOlxccyp1cmxcXChbXCInXT8oW15cIiddKilbXCInXT9cXCkvKTtcclxuICAgICAgICAgIGlmIChtYXRjaD8uWzFdKSB7XHJcbiAgICAgICAgICAgIGlmIChERUJVR19TSU1QTEVfQVZBVEFSKSBjb25zb2xlLmxvZygnW1NpbXBsZVVzZXJBdmF0YXJdIOS7jiBzdHlsZSDlsZ7mgKfojrflj5blpLTlg486JywgbWF0Y2hbMV0pO1xyXG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hbMV07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICB9LFxyXG4gICAgXTtcclxuXHJcbiAgICAvLyDkvp3mrKHlsJ3or5XlkITnp43mlrnms5VcclxuICAgIGZvciAoY29uc3QgbWV0aG9kIG9mIG1ldGhvZHMpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBtZXRob2QoKTtcclxuICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIC8vIOW/veeVpeWNleS4quaWueazleeahOmUmeivr++8jOe7p+e7reWwneivleS4i+S4gOS4qlxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKERFQlVHX1NJTVBMRV9BVkFUQVIpIGNvbnNvbGUubG9nKCdbU2ltcGxlVXNlckF2YXRhcl0g5omA5pyJ5pa55rOV6YO95aSx6LSl77yM5L2/55So6buY6K6k5aS05YOPJyk7XHJcbiAgICByZXR1cm4gZGVmYXVsdFVybDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgaWYgKERFQlVHX1NJTVBMRV9BVkFUQVIpIGNvbnNvbGUuZXJyb3IoJ1tTaW1wbGVVc2VyQXZhdGFyXSDojrflj5blpLTlg4/ml7blj5HnlJ/plJnor686JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIGRlZmF1bHRVcmw7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/modules/utils/userInfoRetrieval.ts\n\n}");
  },
  "./src/多云熊/备份/给rovo的/备份.scss": 
  /*!***********************************!*\
  !*** ./src/多云熊/备份/给rovo的/备份.scss ***!
  \***********************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL+Wkh+S7vS5zY3NzIiwibWFwcGluZ3MiOiI7QUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL+Wkh+S7vS5zY3NzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/备份.scss\n\n}");
  },
  "./src/多云熊/备份/给rovo的/备份.ts": 
  /*!*********************************!*\
  !*** ./src/多云熊/备份/给rovo的/备份.ts ***!
  \*********************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./备份.scss */ \"./src/多云熊/备份/给rovo的/备份.scss\");\n/* harmony import */ var _modules_chatList__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./modules/chatList */ \"./src/多云熊/备份/给rovo的/modules/chatList/index.ts\");\n/* harmony import */ var _modules_profile__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./modules/profile */ \"./src/多云熊/备份/给rovo的/modules/profile/index.ts\");\n/* harmony import */ var _modules_core_StatusBar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./modules/core/StatusBar */ \"./src/多云熊/备份/给rovo的/modules/core/StatusBar.ts\");\n/* harmony import */ var _modules_chat_ChatWallpaperManager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./modules/chat/ChatWallpaperManager */ \"./src/多云熊/备份/给rovo的/modules/chat/ChatWallpaperManager.ts\");\n/* harmony import */ var _modules_chatMigration_ChatMigrationManager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./modules/chatMigration/ChatMigrationManager */ \"./src/多云熊/备份/给rovo的/modules/chatMigration/ChatMigrationManager.ts\");\n/* harmony import */ var _modules_extensions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./modules/extensions */ \"./src/多云熊/备份/给rovo的/modules/extensions/index.ts\");\n/* harmony import */ var _modules_groupChat_GroupNameOverrideManager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./modules/groupChat/GroupNameOverrideManager */ \"./src/多云熊/备份/给rovo的/modules/groupChat/GroupNameOverrideManager.ts\");\n/* harmony import */ var _modules_groupChat_manager__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./modules/groupChat/manager */ \"./src/多云熊/备份/给rovo的/modules/groupChat/manager.ts\");\n/* harmony import */ var _modules_profile_GlobalUserManager__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./modules/profile/GlobalUserManager */ \"./src/多云熊/备份/给rovo的/modules/profile/GlobalUserManager.ts\");\n/* harmony import */ var _modules_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./modules/utils */ \"./src/多云熊/备份/给rovo的/modules/utils/index.ts\");\n/* harmony import */ var _modules_utils_AvatarSync__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./modules/utils/AvatarSync */ \"./src/多云熊/备份/给rovo的/modules/utils/AvatarSync.ts\");\n/* harmony import */ var _modules_dynamicIsland__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./modules/dynamicIsland */ \"./src/多云熊/备份/给rovo的/modules/dynamicIsland/index.ts\");\n/* harmony import */ var _modules_dynamics__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./modules/dynamics */ \"./src/多云熊/备份/给rovo的/modules/dynamics/index.ts\");\n/* harmony import */ var _modules_core__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./modules/core */ \"./src/多云熊/备份/给rovo的/modules/core/index.ts\");\n/* harmony import */ var _modules_parsers__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./modules/parsers */ \"./src/多云熊/备份/给rovo的/modules/parsers/index.ts\");\n/* harmony import */ var _modules_utils_DynamicsDataProcessor__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./modules/utils/DynamicsDataProcessor */ \"./src/多云熊/备份/给rovo的/modules/utils/DynamicsDataProcessor.ts\");\n/**\n * 多云熊聊天界面重构版\n * 基于Log-based状态管理模式的单正则实现\n */\n// 导入样式文件\n\n// 导入聊天列表模块\n\n// 导入我的页面模块\n\n// 导入通用状态栏组件\n\n// 导入用户信息获取工具\n\n\n\n\n\n\n\n\n// 导入灵动岛模块（自初始化）\n\n// 导入动态页面模块\n\n// 导入核心服务模块\n\n\n\n/**\n * 消息解析器类\n * 负责解析Bear格式数据，提取聊天块和消息数据，处理不同消息类型\n * 支持单聊和群聊格式，支持中英文冒号兼容性\n * 单聊格式：[S_小明|小明|消息内容|15:30]\n * 群聊格式：[群聊{{群名}}][成员：成员A，成员B，user][G_{{群名}}|发送者|消息内容|15:30][/群聊{{群名}}]\n */\nclass MessageParser {\n    // 正则表达式定义\n    MAIN_REGEX = /<bear>([\\s\\S]*?)<\\/bear>/g;\n    // 通用消息正则表达式，匹配所有消息格式 - 修复：匹配完整的消息格式\n    MESSAGE_REGEX = /\\[([SG])_[^|]*\\|[^|]*\\|[^|]*\\|[^\\]]*\\]/g;\n    CHAT_BLOCK_REGEX = /\\[([^/][^\\]]*?)\\]([\\s\\S]*?)\\[\\/\\1\\]/g;\n    // 群聊相关正则表达式 - 支持中英文冒号和换行格式\n    GROUP_CHAT_REGEX = /\\[群聊([^\\]]+)\\]\\s*\\n?\\s*\\[成员[：:]([^\\]]+)\\]\\s*\\n?([\\s\\S]*?)\\n?\\s*\\[\\/群聊\\1\\]/g;\n    GROUP_MESSAGE_REGEX = /\\[G_[^|]*\\|([^|]+)\\|([^|]+)\\|([^\\]]+)\\]/g;\n    MEMBER_LIST_REGEX = /\\[成员[：:]([^\\]]+)\\]/;\n    // 消息类型解析正则 - 支持中英文冒号\n    MESSAGE_TYPE_REGEX = /^([^：:]+)[：:](.*)$/;\n    contactManager; // 联系人管理器引用\n    errorStats; // 错误统计管理器\n    dynamicsParser; // 动态解析器\n    constructor(contactManager) {\n        this.contactManager = contactManager;\n        this.errorStats = new _modules_core__WEBPACK_IMPORTED_MODULE_14__.ErrorStatsManager();\n        this.dynamicsParser = new _modules_parsers__WEBPACK_IMPORTED_MODULE_15__.DynamicsParser({\n            enablePartialParsing: true,\n            enableErrorRecovery: true,\n            logErrors: true,\n        });\n    }\n    /** 动态注入联系人管理器，打破初始化循环依赖 */\n    setContactManager(contactManager) {\n        this.contactManager = contactManager;\n    }\n    /**\n     * 冒号兼容性处理方法\n     * @param text 原始文本\n     * @returns 标准化后的文本\n     */\n    normalizeColons(text) {\n        // 将中文冒号统一转换为英文冒号进行处理\n        return text.replace(/：/g, ':');\n    }\n    /**\n     * 解析消息类型和内容\n     * @param messageBody 消息主体\n     * @returns 解析结果\n     */\n    parseMessageTypeAndContent(messageBody) {\n        // 支持中英文冒号的消息类型解析\n        const colonMatch = messageBody.match(this.MESSAGE_TYPE_REGEX);\n        if (colonMatch) {\n            return {\n                type: colonMatch[1],\n                content: colonMatch[2],\n            };\n        }\n        return {\n            type: 'text',\n            content: messageBody,\n        };\n    }\n    /**\n     * 解析Bear格式的聊天数据\n     * @param bearContent Bear标签包裹的内容\n     * @returns 解析后的聊天数据Map\n     */\n    async parseBearContent(bearContent) {\n        const chatDataMap = new Map();\n        // 1. 首先解析群聊块\n        const groupChats = await this.parseGroupChats(bearContent);\n        groupChats.forEach(chat => {\n            chatDataMap.set(chat.chatId, chat);\n        });\n        // 2. 然后解析单聊块（排除群聊块）\n        const singleChats = this.parseSingleChats(bearContent);\n        singleChats.forEach(chat => {\n            chatDataMap.set(chat.chatId, chat);\n        });\n        return chatDataMap;\n    }\n    /**\n     * 扩展的Bear内容解析方法（同时解析聊天和动态）\n     * @param bearContent Bear标签包裹的内容\n     * @returns 解析后的聊天数据Map和动态数据数组\n     */\n    async parseBearContentPlus(bearContent) {\n        // 1. 解析聊天数据（复用现有方法）\n        const chatMap = await this.parseBearContent(bearContent);\n        // 2. 解析动态数据\n        let dynamics = [];\n        try {\n            // 使用DynamicsParser解析[动态]容器\n            const parseResult = this.dynamicsParser.parse(bearContent);\n            if (parseResult.success && parseResult.data) {\n                dynamics = parseResult.data;\n                console.log(`✅ 解析到 ${dynamics.length} 条动态数据`);\n            }\n            else if (parseResult.warnings.length > 0) {\n                console.log('⚠️ 动态解析警告:', parseResult.warnings);\n            }\n            if (parseResult.errors.length > 0) {\n                console.warn('❌ 动态解析错误:', parseResult.errors);\n            }\n        }\n        catch (error) {\n            console.error('💥 动态解析异常:', error);\n        }\n        return {\n            chatMap,\n            dynamics,\n        };\n    }\n    /**\n     * 解析群聊数据块\n     * @param bearContent Bear标签包裹的内容\n     * @returns 解析后的群聊数据数组\n     */\n    async parseGroupChats(bearContent) {\n        const groupChats = [];\n        const matches = [...bearContent.matchAll(this.GROUP_CHAT_REGEX)];\n        for (const match of matches) {\n            const groupName = match[1];\n            const memberList = match[2];\n            const messagesContent = match[3];\n            // 应用冒号兼容性处理\n            const normalizedMessagesContent = this.normalizeColons(messagesContent);\n            const chatData = await this.buildGroupChatData(groupName, memberList, normalizedMessagesContent);\n            if (chatData) {\n                groupChats.push(chatData);\n            }\n        }\n        return groupChats;\n    }\n    /**\n     * 解析单聊数据块（排除群聊块和动态块）\n     * @param bearContent Bear标签包裹的内容\n     * @returns 解析后的单聊数据数组\n     */\n    parseSingleChats(bearContent) {\n        const singleChats = [];\n        // 先移除所有群聊块，避免重复解析\n        let contentWithoutGroups = bearContent;\n        const groupMatches = [...bearContent.matchAll(this.GROUP_CHAT_REGEX)];\n        for (const match of groupMatches) {\n            contentWithoutGroups = contentWithoutGroups.replace(match[0], '');\n        }\n        // 移除所有动态块，避免被当作聊天块解析\n        const dynamicsRegex = /\\[动态\\]([\\s\\S]*?)\\[\\/动态\\]/g;\n        const dynamicsMatches = [...contentWithoutGroups.matchAll(dynamicsRegex)];\n        for (const match of dynamicsMatches) {\n            contentWithoutGroups = contentWithoutGroups.replace(match[0], '');\n        }\n        // 解析剩余的聊天块\n        const chatBlocks = [...contentWithoutGroups.matchAll(this.CHAT_BLOCK_REGEX)];\n        if (chatBlocks.length === 0) {\n            console.warn('没有匹配到任何聊天块');\n            return singleChats;\n        }\n        for (let i = 0; i < chatBlocks.length; i++) {\n            const block = chatBlocks[i];\n            const chatName = block[1];\n            const chatContent = block[2];\n            const chatId = this.generateChatId(chatName);\n            const chatData = {\n                chatId,\n                chatName,\n                avatar: this.getDefaultAvatar(chatName),\n                messages: [],\n            };\n            // 解析聊天块中的消息\n            const messages = this.parseMessages(chatContent, chatId);\n            chatData.messages = messages;\n            if (messages.length > 0) {\n                chatData.lastMessage = messages[messages.length - 1].content;\n            }\n            singleChats.push(chatData);\n        }\n        return singleChats;\n    }\n    /**\n     * 统一的群聊ID生成方法\n     * @param groupName 群聊名称\n     * @returns 标准化的群聊ID，格式：群聊{{群名称}}\n     */\n    generateGroupChatId(groupName) {\n        // 如果已经有\"群聊\"前缀，直接返回\n        if (groupName.startsWith('群聊')) {\n            return groupName;\n        }\n        // 否则添加\"群聊\"前缀\n        return `群聊${groupName}`;\n    }\n    /**\n     * 构建群聊数据对象\n     * @param groupName 群名称\n     * @param memberList 成员列表字符串\n     * @param messagesContent 消息内容\n     * @returns 群聊数据对象\n     */\n    async buildGroupChatData(groupName, memberList, messagesContent) {\n        try {\n            const members = this.parseGroupMembers(memberList);\n            const messages = this.parseGroupMessages(messagesContent, groupName);\n            // 使用统一的ID生成方法\n            const chatId = this.generateGroupChatId(groupName);\n            // 使用GroupChatStorage统一获取群头像（包含缓存逻辑）\n            const { GroupChatStorage } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./modules/groupChat/storage */ \"./src/多云熊/备份/给rovo的/modules/groupChat/storage.ts\"));\n            const defaultAvatar = GroupChatStorage.getDefaultGroupAvatar(groupName);\n            const groupAvatar = GroupChatStorage.getGroupAvatarWithFallback(chatId, defaultAvatar);\n            const chatData = {\n                chatId: chatId,\n                chatName: groupName,\n                avatar: groupAvatar,\n                messages,\n                lastMessage: messages.length > 0 ? this.formatGroupLastMessage(messages[messages.length - 1]) : '',\n                // 扩展字段用于标识群聊\n                type: 'group',\n                members: members.map(name => {\n                    const avatar = this.getDefaultAvatar(name);\n                    const isUser = name === '{{user}}' || name === 'user';\n                    return {\n                        id: name,\n                        name,\n                        avatar,\n                        role: isUser ? 'owner' : 'member',\n                        joinedAt: new Date().toISOString(),\n                    };\n                }),\n            };\n            console.log(`✅ 解析群聊成功: ${chatData.chatName}, chatId: ${chatId}, 成员: ${members.length}, 消息: ${messages.length}`);\n            return chatData;\n        }\n        catch (error) {\n            console.error(`❌ 解析群聊失败: ${groupName}`, error);\n            return null;\n        }\n    }\n    /**\n     * 解析群成员列表\n     * @param memberListString 成员列表字符串\n     * @returns 成员名称数组\n     */\n    parseGroupMembers(memberListString) {\n        // 成员列表可能使用中文冒号：[成员：小明，小红，user] 或 [成员:小明，小红，user]\n        const normalizedString = this.normalizeColons(memberListString);\n        const members = normalizedString\n            .split(/[，,]/)\n            .map(name => name.trim())\n            .filter(name => name.length > 0);\n        return members;\n    }\n    /**\n     * 解析群聊消息\n     * @param messagesContent 消息内容字符串\n     * @param groupName 群名称\n     * @returns 解析后的消息数组\n     */\n    parseGroupMessages(messagesContent, groupName) {\n        const messages = [];\n        const messageMatches = [...messagesContent.matchAll(this.GROUP_MESSAGE_REGEX)];\n        for (const msgMatch of messageMatches) {\n            const message = this.parseGroupMessage(msgMatch, groupName);\n            if (message) {\n                messages.push(message);\n            }\n        }\n        return messages;\n    }\n    /**\n     * 解析单条群聊消息\n     * 格式：[G_群名|发送者|消息类型:内容|时间戳]\n     * @param match 正则匹配结果\n     * @param groupName 群名称\n     * @returns 解析后的消息对象\n     */\n    parseGroupMessage(match, groupName) {\n        try {\n            // 获取完整的消息字符串\n            const fullMessageString = match[0];\n            // 移除首尾的 \"[]\"，然后用 \"|\" 分割成数组\n            const parts = fullMessageString.slice(1, -1).split('|');\n            if (parts.length < 4) {\n                console.warn('群聊消息格式无效 (部分太少):', fullMessageString);\n                return null;\n            }\n            // 提取基本信息\n            const typeAndGroupId = parts[0].split('_');\n            const type = typeAndGroupId[0]; // 应该是 'G'\n            const sender = parts[1];\n            const messageBody = parts[2] || '';\n            const timestamp = parts[parts.length - 1]; // 修复：时间戳应为最后一个字段（4字段=第4位，5字段=第5位）\n            // 解析消息类型和内容 - 支持中英文冒号\n            const { type: messageType, content: processedContent } = this.parseMessageTypeAndContent(messageBody);\n            // 处理特殊消息类型\n            let finalContent = processedContent;\n            let originalNote = '';\n            if (messageType === 'transfer') {\n                // 转账消息可能有备注\n                if (parts.length === 5) {\n                    // 5字段格式：[G_群名|发送者|transfer:50|拿去花|15:30]\n                    originalNote = parts[3];\n                    finalContent = `${processedContent}|${originalNote}`;\n                }\n                else {\n                    // 4字段格式：[G_群名|发送者|transfer:50|15:30]\n                    originalNote = '等待接收';\n                    finalContent = `${processedContent}|等待接收`;\n                }\n            }\n            else if (messageType === 'voice') {\n                // 语音消息可能有时长\n                if (parts.length === 5) {\n                    // 5字段格式：[G_群名|发送者|voice:内容|2|15:30]\n                    const duration = parts[3] || '0';\n                    finalContent = `${processedContent}|${duration}`;\n                }\n                else {\n                    finalContent = `${processedContent}|0`;\n                }\n            }\n            const message = {\n                id: this.generateMessageId(),\n                type: 'G',\n                chatId: this.generateGroupChatId(groupName),\n                sender: sender || '未知用户',\n                avatar: this.getDefaultAvatar(sender),\n                messageType: messageType,\n                content: finalContent,\n                timestamp: timestamp ||\n                    new Date().toLocaleTimeString('zh-CN', {\n                        hour: '2-digit',\n                        minute: '2-digit',\n                    }),\n                // 群聊特有字段：发送者显示名称\n                senderDisplayName: sender,\n                ...(messageType === 'transfer' ? { data: { originalNote } } : {}),\n            };\n            return message;\n        }\n        catch (error) {\n            console.error('解析群聊消息时出错:', error, match);\n            return null;\n        }\n    }\n    /**\n     * 解析消息内容\n     * @param content 消息内容字符串\n     * @param chatId 聊天ID\n     * @returns 解析后的消息数组\n     */\n    parseMessages(content, chatId) {\n        const messages = [];\n        const messageMatches = [...content.matchAll(this.MESSAGE_REGEX)];\n        if (messageMatches.length === 0) {\n            console.warn(`没有匹配到任何消息: ${chatId}`);\n            return messages;\n        }\n        for (const msgMatch of messageMatches) {\n            const message = this.parseMessage(msgMatch, chatId);\n            if (message) {\n                messages.push(message);\n            }\n        }\n        return messages;\n    }\n    /**\n     * 解析单条消息（新格式，4字段）\n     * 格式：[S_小明|小明|消息内容|15:30] - 删除头像字段\n     * 支持的消息类型：\n     * - 文本：[S_chat|小明|你好|15:30]\n     * - 转账：[S_chat|小明|transfer:100|备注|15:30]\n     * - 语音：[S_chat|小明|voice:语音内容|时长|15:30]\n     * - 图片：[S_chat|小明|image:图片URL|15:30]\n     * - 表情包：[S_chat|小明|sticker:表情包URL|15:30]\n     * - 位置：[S_chat|小明|location:位置信息|15:30]\n     * @param match 正则匹配结果\n     * @param chatId 聊天ID\n     * @returns 解析后的消息对象\n     */\n    parseMessage(match, chatId) {\n        try {\n            // 获取完整的消息字符串\n            const fullMessageString = match[0];\n            // 1. 移除首尾的 \"[]\"，然后用 \"|\" 分割成数组\n            const parts = fullMessageString.slice(1, -1).split('|');\n            // 2. 基础格式校验\n            if (parts.length < 4) {\n                console.warn('消息格式无效 (部分太少):', fullMessageString);\n                return null;\n            }\n            // 3. 提取基本信息\n            const typeAndSenderId = parts[0].split('_');\n            const type = typeAndSenderId[0];\n            const sender = parts[1];\n            const timestamp = parts[parts.length - 1]; // 时间戳总是在最后\n            // 4. 判断是4字段还是5字段格式\n            const is5FieldFormat = parts.length === 5;\n            // 5. 核心逻辑: 解析消息类型、内容和备注\n            let messageType = 'text';\n            let processedContent = '';\n            let originalNote = '';\n            // 消息主体部分从索引2开始\n            const messageBodyPart = parts[2] || '';\n            if (messageBodyPart.startsWith('transfer:')) {\n                messageType = 'transfer';\n                if (is5FieldFormat) {\n                    // 5字段格式：[S_小明|小明|transfer:50|拿去花|15:30]\n                    const amount = messageBodyPart.substring(9); // 移除 'transfer:' 前缀\n                    const note = parts[3] || '等待接收';\n                    originalNote = note;\n                    processedContent = `${amount}|${note}`;\n                }\n                else {\n                    // 4字段格式：[S_小明|小明|transfer:50|15:30]\n                    const amount = messageBodyPart.substring(9);\n                    originalNote = '等待接收';\n                    processedContent = `${amount}|等待接收`;\n                }\n            }\n            else if (messageBodyPart.startsWith('voice:')) {\n                messageType = 'voice';\n                if (is5FieldFormat) {\n                    // 5字段格式：[S_小明|小明|voice:内容|2|15:30]\n                    const voiceContent = messageBodyPart.substring(6); // 移除 'voice:' 前缀\n                    const duration = parts[3] || '0';\n                    processedContent = `${voiceContent}|${duration}`;\n                }\n                else {\n                    // 4字段格式：[S_小明|小明|voice:内容|15:30]\n                    const voiceContent = messageBodyPart.substring(6);\n                    processedContent = `${voiceContent}|0`;\n                }\n            }\n            else if (messageBodyPart.includes(':')) {\n                // 处理其他 \"类型:内容\" 格式的消息\n                const [typePart, ...contentParts] = messageBodyPart.split(':');\n                messageType = typePart;\n                processedContent = contentParts.join(':');\n            }\n            else {\n                // 如果没有特殊格式，则视为普通文本消息\n                messageType = 'text';\n                processedContent = messageBodyPart;\n            }\n            // 5. 组装最终的消息对象\n            const message = {\n                id: this.generateMessageId(),\n                type: type,\n                chatId,\n                sender: sender || '未知用户',\n                avatar: this.getDefaultAvatar(sender), // 使用默认头像，不再从消息中解析\n                messageType: messageType,\n                content: processedContent,\n                timestamp: timestamp ||\n                    new Date().toLocaleTimeString('zh-CN', {\n                        hour: '2-digit',\n                        minute: '2-digit',\n                    }),\n                // 关键: 将原始转账留言保存到 data 字段，供后续使用 (例如点击转账时显示)\n                ...(messageType === 'transfer' ? { data: { originalNote: originalNote } } : {}),\n            };\n            return message;\n        }\n        catch (error) {\n            console.error('解析消息时出错:', error, match);\n            return null;\n        }\n    }\n    /**\n     * 从现有消息中提取Bear内容\n     * @param messages 消息数组\n     * @returns Bear内容字符串，如果没有找到则返回null\n     */\n    extractBearContent(messages) {\n        for (const msg of messages) {\n            const content = msg.message || '';\n            const bearMatch = content.match(this.MAIN_REGEX);\n            if (bearMatch && bearMatch[0]) {\n                return bearMatch[0];\n            }\n        }\n        console.warn('未找到Bear内容');\n        return null;\n    }\n    /**\n     * 从字符串中提取Bear内容\n     * @param text 文本内容\n     * @returns Bear内容字符串，如果没有找到则返回null\n     */\n    extractBearContentFromText(text) {\n        const bearMatch = text.match(this.MAIN_REGEX);\n        if (bearMatch && bearMatch[0]) {\n            return bearMatch[0];\n        }\n        return null;\n    }\n    /**\n     * 提取所有Bear内容块（方案B：合并所有楼层）\n     * @param messages 消息数组\n     * @returns 所有Bear内容块的数组\n     */\n    extractAllBearContents(messages) {\n        const bearBlocks = [];\n        for (const msg of messages) {\n            const content = msg.message || '';\n            const bearMatches = [...content.matchAll(this.MAIN_REGEX)];\n            for (const match of bearMatches) {\n                if (match && match[0]) {\n                    bearBlocks.push(match[0]);\n                }\n            }\n        }\n        console.log(`📦 找到 ${bearBlocks.length} 个Bear内容块`);\n        return bearBlocks;\n    }\n    /**\n     * 获取头像URL\n     * @param name 用户名\n     * @returns 头像URL\n     */\n    getDefaultAvatar(name) {\n        // 如果是用户自己，使用统一的头像获取方法\n        if (name === '{{user}}' || name === 'user') {\n            // 使用统一的头像获取接口（同步版本）\n            return (0,_modules_utils__WEBPACK_IMPORTED_MODULE_10__.getUnifiedUserAvatarSync)();\n        }\n        // 如果有联系人管理器，尝试从中获取头像\n        if (this.contactManager) {\n            const contacts = this.contactManager.getAllContacts();\n            const contact = contacts.find((c) => c.name === name);\n            if (contact && contact.avatar) {\n                return contact.avatar;\n            }\n        }\n        // 如果没有找到联系人或头像，使用默认头像\n        return 'https://files.catbox.moe/u8ccy5.jpg';\n    }\n    /**\n     * 处理图片URL，自动添加前缀（用于头像和表情包）\n     * 支持三种解析方式：\n     * 1. 完整URL直接使用\n     * 2. 文件名添加catbox前缀\n     * 3. 中文名称+文件名格式，自动提取文件名部分\n     * @param imageUrl 原始图片URL\n     * @returns 处理后的图片URL\n     */\n    processImageUrl(imageUrl) {\n        if (!imageUrl) {\n            return '';\n        }\n        // 如果已经是完整URL，直接返回\n        if (imageUrl.startsWith('http://') || imageUrl.startsWith('https://')) {\n            return imageUrl;\n        }\n        // 如果是base64格式的图片，直接返回\n        if (imageUrl.startsWith('data:image/')) {\n            return imageUrl;\n        }\n        // 处理临时存储的图片\n        if (imageUrl.startsWith('temp://')) {\n            const fileId = imageUrl.replace('temp://', '');\n            const base64Data = localStorage.getItem(`temp_image_${fileId}`);\n            if (base64Data) {\n                return base64Data;\n            }\n            else {\n                console.warn('临时图片数据未找到:', fileId);\n                return '';\n            }\n        }\n        // 处理中文名称+文件名格式（如：\"我是败犬ei6coi.jpeg\"）\n        // 使用正则表达式匹配文件名部分（字母、数字、点、下划线、连字符）\n        const fileNameMatch = imageUrl.match(/([a-zA-Z0-9._-]+\\.[a-zA-Z0-9]+)$/);\n        if (fileNameMatch) {\n            const fileName = fileNameMatch[1];\n            return `https://files.catbox.moe/${fileName}`;\n        }\n        // 如果只是普通文件名，添加catbox前缀\n        return `https://files.catbox.moe/${imageUrl}`;\n    }\n    /**\n     * 生成消息ID\n     * @returns 唯一的消息ID\n     */\n    generateMessageId() {\n        return 'msg_' + Date.now() + '_' + Math.random().toString(36).substring(2, 9);\n    }\n    /**\n     * 处理解析错误\n     * @param error 错误对象\n     * @param context 错误上下文\n     */\n    handleParseError(error, context) {\n        console.error(`群聊解析错误 [${context}]:`, error);\n        // 记录错误统计\n        this.errorStats.increment(`parse_error_${context}`);\n        // 发送错误事件\n        document.dispatchEvent(new CustomEvent('groupChatParseError', {\n            detail: { error, context },\n        }));\n    }\n    /**\n     * 获取错误统计\n     * @returns 错误统计信息\n     */\n    getErrorStats() {\n        return this.errorStats.getStats();\n    }\n    /**\n     * 重置错误统计\n     */\n    resetErrorStats() {\n        this.errorStats.reset();\n    }\n    /**\n     * 构建Bear格式的消息内容\n     * @param chatDataMap 聊天数据Map\n     * @returns Bear格式的字符串\n     */\n    buildBearContent(chatDataMap) {\n        // 使用新的扩展方法，但不传入动态数据（保持向后兼容）\n        return this.buildBearContentPlus({ chatMap: chatDataMap, dynamics: [] });\n    }\n    /**\n     * 扩展的Bear格式内容构建方法（支持聊天和动态）\n     * @param data 包含聊天数据Map和动态数据数组的对象\n     * @returns Bear格式的字符串\n     */\n    buildBearContentPlus(data) {\n        let bearContent = '<bear>\\n';\n        // 1. 构建聊天块\n        for (const [, chatData] of data.chatMap) {\n            // 检查是否为群聊\n            if (chatData.type === 'group') {\n                // 构建群聊格式\n                bearContent += this.buildGroupChatBlock(chatData);\n            }\n            else {\n                // 构建单聊格式\n                bearContent += `[${chatData.chatName}]\\n`;\n                for (const message of chatData.messages) {\n                    const messageStr = this.buildMessageString(message);\n                    bearContent += messageStr + '\\n';\n                }\n                bearContent += `[/${chatData.chatName}]\\n`;\n            }\n        }\n        // 2. 构建动态块（如果有动态数据）\n        if (data.dynamics && data.dynamics.length > 0) {\n            const dynamicsContent = _modules_parsers__WEBPACK_IMPORTED_MODULE_15__.DynamicsBuilder.buildDynamicsContainer(data.dynamics);\n            if (dynamicsContent) {\n                bearContent += dynamicsContent;\n            }\n        }\n        bearContent += '</bear>';\n        return bearContent;\n    }\n    /**\n     * 构建单个聊天的Bear格式内容（用于删除消息后重建）\n     * @param chatData 单个聊天数据\n     * @returns Bear格式的字符串\n     */\n    buildSingleChatBearContent(chatData) {\n        // 创建一个临时的 Map 来重用现有的 buildBearContent 方法\n        const tempChatDataMap = new Map();\n        tempChatDataMap.set(chatData.chatId, chatData);\n        // 使用现有的方法构建完整的 bear 内容\n        const fullBearContent = this.buildBearContent(tempChatDataMap);\n        // 提取 <bear> 标签内的内容\n        const bearMatch = fullBearContent.match(/<bear>([\\s\\S]*?)<\\/bear>/);\n        if (bearMatch && bearMatch[1]) {\n            return `<bear>${bearMatch[1]}</bear>`;\n        }\n        // 如果匹配失败，返回原始内容\n        return fullBearContent;\n    }\n    /**\n     * 构建群聊Bear格式字符串\n     * @param chatData 群聊数据\n     * @returns 群聊Bear格式字符串\n     */\n    buildGroupChatBlock(chatData) {\n        if (chatData.type !== 'group') {\n            return '';\n        }\n        // 群名称（现在chatName就是纯群名）\n        const groupName = chatData.chatName;\n        // 构建成员列表\n        const members = chatData.members || [];\n        const memberNames = members.map((member) => member.name).join('，');\n        let bearContent = `[群聊${groupName}]\\n`;\n        bearContent += `[成员：${memberNames}]\\n`;\n        // 构建消息列表\n        for (const message of chatData.messages) {\n            const messageStr = this.buildGroupMessageString(message);\n            if (messageStr) {\n                bearContent += messageStr + '\\n';\n            }\n        }\n        bearContent += `[/群聊${groupName}]\\n`;\n        return bearContent;\n    }\n    /**\n     * 构建单条群聊消息字符串\n     * @param message 消息对象\n     * @returns 群聊消息字符串\n     */\n    buildGroupMessageString(message) {\n        if (message.type !== 'G') {\n            return '';\n        }\n        // 提取群名称（移除\"群聊\"前缀）\n        const groupName = message.chatId.replace(/^群聊/, '');\n        // 构建消息内容\n        let messageContent = '';\n        if (message.messageType === 'text') {\n            messageContent = message.content;\n        }\n        else {\n            messageContent = `${message.messageType}:${message.content}`;\n        }\n        return `[G_${groupName}|${message.sender}|${messageContent}|${message.timestamp}]`;\n    }\n    /**\n     * 构建单条消息字符串（新格式，4字段）\n     * 格式：[S_小明|小明|消息内容|15:30] - 删除头像字段\n     * @param message 消息对象\n     * @returns 消息字符串\n     */\n    buildMessageString(message) {\n        return `[${message.type}_${message.chatId}|${message.sender}|${message.messageType}:${message.content}|${message.timestamp}]`;\n    }\n    /**\n     * 格式化最后一条消息显示文本（通用方法）\n     * @param message 消息对象\n     * @returns 格式化后的消息文本\n     */\n    formatLastMessage(message) {\n        const senderName = message.sender === '{{user}}' ? '我' : message.sender;\n        let content = '';\n        switch (message.messageType) {\n            case 'text':\n                content = message.content;\n                break;\n            case 'image':\n                content = '[图片]';\n                break;\n            case 'voice':\n                content = '[语音]';\n                break;\n            case 'sticker':\n                content = '[表情包]';\n                break;\n            case 'location':\n                content = '[位置]';\n                break;\n            case 'transfer':\n                content = '[转账]';\n                break;\n            default:\n                content = message.content;\n        }\n        return `${senderName}: ${content}`;\n    }\n    /**\n     * 格式化群聊最后一条消息用于显示\n     * @param message 消息对象\n     * @returns 格式化后的消息文本\n     */\n    formatGroupLastMessage(message) {\n        const senderName = message.sender === '{{user}}' ? '我' : message.senderDisplayName || message.sender;\n        let content = '';\n        switch (message.messageType) {\n            case 'text':\n                content = message.content;\n                break;\n            case 'image':\n                content = '[图片]';\n                break;\n            case 'voice':\n                content = '[语音]';\n                break;\n            case 'sticker':\n                content = '[表情包]';\n                break;\n            case 'location':\n                content = '[位置]';\n                break;\n            case 'transfer':\n                content = '[转账]';\n                break;\n            default:\n                content = message.content;\n        }\n        return `${senderName}: ${content}`;\n    }\n    /**\n     * 生成聊天ID\n     * 仅进行 trim，不改变大小写与空白，保持与块名一致\n     * @param chatName 聊天名称\n     * @returns 聊天ID\n     */\n    generateChatId(chatName) {\n        return (chatName ?? '').trim();\n    }\n}\n/**\n * 多云熊聊天管理器主类\n * 实现基础的状态管理、事件监听器初始化和音效预加载功能\n */\nclass BearChatManager {\n    currentChat = '';\n    chatData = new Map();\n    avatarMixin;\n    sendQueue = [];\n    currentInterface = 'list';\n    messageParser;\n    soundManager;\n    isMenuVisible = false;\n    isStickerSelectorVisible = false;\n    isRenderingMessages = false; // 消息渲染状态标志\n    shouldStopRendering = false; // 渲染中断标志\n    isSending = false; // 发送状态标志，防止重复点击\n    crossChatSendEnabled = false; // 跨聊天发送功能开关\n    // 动态数据存储\n    dynamicsData = [];\n    // 表情包管理相关属性\n    stickerData = [];\n    stickerOrder = {};\n    stickerLorebookName = '';\n    stickerCache = new Map();\n    stickerSelectorClickOutsideHandler = null;\n    isDeleteMode = false;\n    selectedStickers = new Set();\n    // 批量删除模式相关属性\n    isBatchDeleteMode = false;\n    selectedMessages = new Set(); // 存储DOM位置索引（字符串格式）\n    batchDeleteToolbar = null;\n    // 统一转账点击委托是否已绑定\n    transferDelegationBound = false;\n    // 角色切换防抖\n    characterChangeTimeout = null;\n    // 聊天界面状态栏实例\n    chatStatusBar = null;\n    // 智能表情包建议相关属性\n    isSuggestionVisible = false;\n    suggestionContainer = null;\n    inputChangeTimer = null;\n    // AI回复处理相关属性\n    lastBearContent = '';\n    // 聊天列表管理器\n    chatListManager;\n    // 群聊管理器\n    groupChatManager;\n    // 我的页面管理器\n    profileInterface = null;\n    settingsModal; // 引用设置模态框\n    chatWallpaperManager = null; // 聊天壁纸管理器\n    scaleManager; // 界面缩放管理器\n    typingSpeedManager; // 打字速度管理器\n    // 动态页面管理器\n    dynamicsManager = null;\n    // 分页渲染相关\n    visibleCounts = new Map(); // chatId -> 当前可见消息数\n    INITIAL_VISIBLE_COUNT = 50; // 初次进入显示最近50条\n    LOAD_MORE_STEP = 20; // 每次“查看更多”增加20条\n    // 上滑加载更多相关\n    topScrollHandler = null;\n    lastLoadMoreAt = 0;\n    LOAD_MORE_THROTTLE_MS = 300;\n    // UI 预览图缓存（仅用于前端显示复水，不落盘）\n    uiImageCache = new Map(); // key: chatId|sender|timestamp -> src(base64/URL)\n    cachedUserName = null;\n    getUiImageKey(message) {\n        return `${message.chatId}|${message.sender}|${message.timestamp}`;\n    }\n    cacheUiImagePreview(message, src) {\n        this.uiImageCache.set(this.getUiImageKey(message), src);\n    }\n    // 同步获取用户真实显示名（若可用），失败则返回缓存的值\n    getRealUserNameSync() {\n        try {\n            const gum = _modules_profile_GlobalUserManager__WEBPACK_IMPORTED_MODULE_9__.GlobalUserManager.getInstance?.();\n            const data = gum?.getCurrentUserData?.();\n            if (data?.name) {\n                this.cachedUserName = data.name;\n                return data.name;\n            }\n            if (this.cachedUserName)\n                return this.cachedUserName;\n        }\n        catch (e) {\n            return this.cachedUserName;\n        }\n        return this.cachedUserName;\n    }\n    // 判断该 sender 是否属于“用户本人”\n    isUserSender(sender) {\n        if (sender === '{{user}}' || sender === 'user')\n            return true;\n        const realName = this.getRealUserNameSync();\n        return !!realName && sender === realName;\n    }\n    // 从 UI 缓存读取预览图（容错 sender / 时间戳差异）：\n    // 1) 精确键 chatId|sender|timestamp\n    // 2) 前缀回退（兼容 {{user}} / user / 真实用户名）\n    // 3) 兜底仅按 chatId 搜索（本 Map 只缓存 user 的图片，不会误命中 AI）\n    getCachedUiImage(message) {\n        // 1) 精确命中\n        const exact = this.uiImageCache.get(this.getUiImageKey(message));\n        if (exact)\n            return exact;\n        // 2) 前缀回退（最后一次插入）\n        const realName = this.getRealUserNameSync();\n        const candidates = new Set([\n            `${message.chatId}|${message.sender}|`,\n            `${message.chatId}|{{user}}|`,\n            `${message.chatId}|user|`,\n        ]);\n        if (realName)\n            candidates.add(`${message.chatId}|${realName}|`);\n        for (const prefix of candidates) {\n            let last;\n            for (const [k, v] of this.uiImageCache) {\n                if (k.startsWith(prefix))\n                    last = v;\n            }\n            if (last)\n                return last;\n        }\n        // 3) 兜底：仅按 chatId 搜\n        const chatPrefix = `${message.chatId}|`;\n        let lastInChat;\n        for (const [k, v] of this.uiImageCache) {\n            if (k.startsWith(chatPrefix))\n                lastInChat = v;\n        }\n        return lastInChat;\n    }\n    /**\n     * 使用 UI 预览缓存对当前聊天的 user 图片消息进行复水（仅内存）\n     * 确保在返回聊天时仍能显示原图\n     */\n    rehydrateUserImageMessages(chat) {\n        try {\n            chat.messages.forEach(msg => {\n                if (msg.messageType === 'image' &&\n                    this.isUserSender(msg.sender) &&\n                    !(msg.data?.uploadedFile || msg.data?.base64Image || msg.data?.imageUrl)) {\n                    const cachedSrc = this.getCachedUiImage(msg);\n                    if (cachedSrc) {\n                        msg.data = { ...(msg.data || {}), imageUrl: cachedSrc };\n                    }\n                }\n            });\n        }\n        catch (e) {\n            console.warn('rehydrateUserImageMessages 失败:', e);\n        }\n    }\n    constructor() {\n        this.soundManager = new _modules_core__WEBPACK_IMPORTED_MODULE_14__.SoundManager();\n        this.scaleManager = new _modules_core__WEBPACK_IMPORTED_MODULE_14__.ScaleManager(); // 初始化界面缩放管理器\n        this.typingSpeedManager = new _modules_core__WEBPACK_IMPORTED_MODULE_14__.TypingSpeedManager(); // 初始化打字速度管理器\n        this.groupChatManager = new _modules_groupChat_manager__WEBPACK_IMPORTED_MODULE_8__.GroupChatManager();\n        // 先创建解析器（暂不注入联系人管理器，稍后设置）\n        this.messageParser = new MessageParser();\n        // 再创建聊天列表管理器，传入解析器实例\n        this.chatListManager = new _modules_chatList__WEBPACK_IMPORTED_MODULE_1__.ChatListManager(this.soundManager, this.groupChatManager, this.messageParser);\n        // 设置 GroupChatManager 的 ContactManager 依赖\n        this.groupChatManager.setContactManager(this.chatListManager.getContactManager());\n        // 现在解析器可以注入联系人管理器\n        this.messageParser.setContactManager(this.chatListManager.getContactManager());\n        this.avatarMixin = new _modules_utils_AvatarSync__WEBPACK_IMPORTED_MODULE_11__.SimpleAvatarMixin({ debug: false });\n        // 初始化动态管理器\n        this.dynamicsManager = new _modules_dynamics__WEBPACK_IMPORTED_MODULE_13__.DynamicsManager(this.soundManager);\n        console.log('✅ 动态管理器已创建');\n        // 异步初始化所有模块\n        this.initializeApplication().catch(error => {\n            console.error('❌ 应用初始化失败:', error);\n            // 可以在这里显示一个全局的错误提示\n        });\n    }\n    /**\n     * 统一的应用初始化流程\n     */\n    async initializeApplication() {\n        console.log('🚀 应用初始化开始...');\n        // 1. 初始化事件监听器 (可以同步执行)\n        this.initializeEventListeners();\n        // 2. 初始化全局用户管理器 (这是关键的异步阻塞步骤)\n        await _modules_profile_GlobalUserManager__WEBPACK_IMPORTED_MODULE_9__.GlobalUserManager.getInstance().initialize();\n        // 3. 初始化 \"我的\" 页面模块\n        await this.initializeProfileModule();\n        // 4. 初始化扩展功能模块\n        this.initializeExtensionsModule();\n        // 4.1. 初始化聊天迁移管理器\n        this.initializeChatMigrationManager();\n        // 5. 初始化聊天壁纸管理器\n        await this.initializeChatWallpaperManager();\n        // 6. 初始化表情包系统\n        await this.initializeStickerSystem();\n        // 7. 初始化群名覆盖管理器 (新增功能)\n        await this.initializeGroupNameOverrideManager();\n        // 8. 从现有数据初始化聊天\n        this.initializeFromExistingData();\n        // 8. 群聊数据通过消息标记自动解析，无需单独同步\n        // 8. 初始化聊天列表事件\n        this.initializeChatListEvents();\n        // 8. 初始化并强制同步一次头像\n        this.initializeAvatarSync();\n        // 9. 消息回复功能已直接集成到主类中\n        console.log('应用初始化完成');\n        // 应用初始化完成后触发聊天迁移检查\n        console.log('🎯 [主应用] 应用初始化完成，准备触发聊天迁移检查');\n        await this.triggerChatMigrationCheck();\n    }\n    /**\n     * 初始化头像同步\n     */\n    initializeAvatarSync() {\n        try {\n            // 获取GlobalUserManager实例\n            const globalUserManager = _modules_profile_GlobalUserManager__WEBPACK_IMPORTED_MODULE_9__.GlobalUserManager.getInstance();\n            const userData = globalUserManager.getCurrentUserData();\n            // 如果有自定义头像，立即同步到所有地方\n            if (userData?.isCustom && userData.avatar) {\n                console.log('[BearChatManager] 发现自定义头像，立即同步:', userData.avatar);\n                // 使用forceUpdateAvatars强制更新所有头像元素\n                const { forceUpdateAvatars } = __webpack_require__(/*! ./modules/utils/AvatarSync */ \"./src/多云熊/备份/给rovo的/modules/utils/AvatarSync.ts\");\n                forceUpdateAvatars(userData.avatar);\n            }\n            // 立即尝试一次注册和更新\n            this.avatarMixin.autoRegister();\n            this.avatarMixin.forceUpdate();\n            // 监听GlobalUserManager的头像变更事件\n            globalUserManager.addEventListener('avatar', event => {\n                console.log('[BearChatManager] 检测到头像变更，同步到所有地方:', event.newValue);\n                const { forceUpdateAvatars } = __webpack_require__(/*! ./modules/utils/AvatarSync */ \"./src/多云熊/备份/给rovo的/modules/utils/AvatarSync.ts\");\n                forceUpdateAvatars(event.newValue);\n            });\n            // 延迟注册已移除 - MutationObserver会自动检测新元素\n            // 移除定期检查，改为基于事件的同步机制\n            // 现在头像同步完全基于GlobalUserManager的事件驱动，不需要定时器\n            console.log('[BearChatManager] 头像同步已初始化');\n        }\n        catch (error) {\n            console.error('[BearChatManager] 头像同步初始化失败:', error);\n        }\n    }\n    // 移除了 waitForTavernHelper 方法，因为我们直接使用 triggerSlash 而不是 window.TavernHelper\n    /**\n     * 动态获取当前可用的世界书名称\n     * 优先级：1.角色主要世界书 2.全局世界书 3.失败返回null\n     * 这是一个通用方法，可用于获取任何需要世界书的功能\n     */\n    async getCurrentLorebook() {\n        try {\n            let lorebookName = null;\n            // 优先级1: 尝试获取角色卡绑定的主要世界书\n            console.log('📖 尝试获取角色主要世界书...');\n            try {\n                if (typeof getCurrentCharPrimaryLorebook === 'function') {\n                    console.log('✅ 全局函数 getCurrentCharPrimaryLorebook 可用');\n                    lorebookName = getCurrentCharPrimaryLorebook();\n                    console.log('📖 角色主要世界书获取结果:', JSON.stringify(lorebookName));\n                }\n                else {\n                    console.log('❌ 全局函数 getCurrentCharPrimaryLorebook 不可用');\n                }\n            }\n            catch (error) {\n                console.log(`❌ 获取角色世界书异常: ${error}`);\n            }\n            if (lorebookName) {\n                console.log('✅ 使用角色主要世界书:', lorebookName);\n                return lorebookName;\n            }\n            // 优先级2: 尝试全局世界书\n            console.log('🌍 尝试获取全局世界书...');\n            try {\n                if (typeof getLorebookSettings === 'function') {\n                    console.log('✅ 全局函数 getLorebookSettings 可用');\n                    const settings = getLorebookSettings();\n                    console.log('🌍 全局世界书设置:', settings);\n                    const globalLorebooks = settings.selected_global_lorebooks;\n                    if (globalLorebooks && globalLorebooks.length > 0) {\n                        console.log('✅ 使用全局世界书:', globalLorebooks[0]);\n                        return globalLorebooks[0];\n                    }\n                    else {\n                        console.log('❌ 没有启用的全局世界书');\n                    }\n                }\n                else {\n                    console.log('❌ 全局函数 getLorebookSettings 不可用');\n                }\n            }\n            catch (error) {\n                console.log(`❌ 获取全局世界书异常: ${error}`);\n            }\n            console.warn('❌ 没有找到可用的世界书');\n            return null;\n        }\n        catch (error) {\n            console.error('❌ 获取世界书失败:', error);\n            return null;\n        }\n    }\n    /**\n     * 初始化事件监听器\n     */\n    initializeEventListeners() {\n        // 使用项目标准的jQuery模式等待DOM加载完成\n        $(() => {\n            this.setupEventListeners();\n            // 委托注册：确保转账气泡在首次渲染即可点击\n            this.initializeTransferClickDelegation();\n        });\n    }\n    /**\n     * 设置所有事件监听器\n     */\n    setupEventListeners() {\n        // 加号按钮点击\n        const plusBtn = document.getElementById('plusBtn');\n        const plusMenu = document.getElementById('plusMenu');\n        if (plusBtn && plusMenu) {\n            plusBtn.addEventListener('click', e => {\n                e.preventDefault();\n                e.stopPropagation();\n                this.togglePlusMenu();\n                this.soundManager.playSound('emoji');\n            });\n        }\n        // 加号菜单项点击\n        const menuItems = document.querySelectorAll('.menu-item');\n        menuItems.forEach(item => {\n            item.addEventListener('click', e => {\n                e.preventDefault();\n                e.stopPropagation();\n                const type = e.currentTarget.dataset.type;\n                if (type) {\n                    this.handleMenuItemClick(type);\n                    // 音效在具体的处理函数中播放，避免重复\n                }\n            });\n        });\n        // 输入框事件监听\n        const inputField = document.getElementById('inputField');\n        if (inputField) {\n            // 回车键处理\n            inputField.addEventListener('keypress', e => {\n                if (e.key === 'Enter') {\n                    this.handleEnterKey();\n                }\n            });\n            // 输入变化监听（智能表情包建议）\n            inputField.addEventListener('input', e => {\n                this.handleInputChange(e);\n            });\n            // 失去焦点时隐藏建议\n            inputField.addEventListener('blur', () => {\n                // 延迟隐藏，允许点击建议\n                setTimeout(() => {\n                    this.hideStickerSuggestions();\n                }, 200);\n            });\n        }\n        // 发送按钮点击\n        const sendBtn = document.getElementById('sendBtn');\n        if (sendBtn) {\n            sendBtn.addEventListener('click', () => {\n                this.handleSendClick();\n                // 音效已在handleSendClick中播放，无需重复\n            });\n        }\n        // 头部按钮点击\n        const homeBtn = document.querySelector('.home-btn');\n        const diaryBtn = document.querySelector('.diary-btn');\n        const callBtn = document.querySelector('.call-btn');\n        if (homeBtn) {\n            homeBtn.addEventListener('click', () => {\n                this.showChatList();\n                this.soundManager.playSound('click');\n            });\n        }\n        if (diaryBtn) {\n            diaryBtn.addEventListener('click', () => {\n                this.showDiaryInterface();\n                this.soundManager.playSound('click');\n            });\n        }\n        if (callBtn) {\n            callBtn.addEventListener('click', () => {\n                this.showCallInterface();\n                this.soundManager.playSound('click');\n            });\n        }\n        // 头像点击\n        const headerAvatar = document.getElementById('headerAvatar');\n        if (headerAvatar) {\n            headerAvatar.addEventListener('click', async () => {\n                await this.handleAvatarClick();\n                this.soundManager.playSound('avatar');\n            });\n        }\n        // 点击其他地方关闭菜单 - 使用延迟执行避免与按钮点击冲突\n        document.addEventListener('click', e => {\n            const target = e.target;\n            const stickerSelector = document.getElementById('stickerSelector');\n            // 使用 setTimeout 确保在按钮点击事件处理完成后再执行\n            setTimeout(() => {\n                // 如果点击的不是加号按钮、加号菜单或表情包选择器，则关闭加号菜单\n                if (!plusBtn?.contains(target) && !plusMenu?.contains(target) && !stickerSelector?.contains(target)) {\n                    this.hidePlusMenu();\n                }\n            }, 0);\n        });\n        // 监听个人主页显示事件\n        document.addEventListener('showProfilePage', (event) => {\n            const customEvent = event;\n            console.log('📱 接收到显示个人主页事件:', customEvent.detail);\n            this.handleShowProfilePage(customEvent.detail);\n        });\n        // 监听底部导航页面切换事件（统一由 BottomNavigation 组件分发）\n        document.addEventListener('pageSwitch', (e) => {\n            const customEvent = e;\n            const { from, to } = customEvent.detail;\n            console.log(`🔄 页面切换: ${from} -> ${to}`);\n            // 统一点击反馈\n            this.soundManager.playSound('click');\n            if (to === 'profile') {\n                this.switchToProfilePage();\n            }\n            else if (to === 'chatList') {\n                this.switchToChatListPage();\n            }\n            else if (to === 'feed') {\n                this.switchToDynamicsPage();\n            }\n        });\n        // 角色切换监听\n        this.initializeCharacterChangeListener();\n        // 初始化设置相关功能\n        this.initializeSettings().catch(error => {\n            console.error('设置初始化失败:', error);\n        });\n        // 初始化动态管理器\n        if (this.dynamicsManager) {\n            console.log('🎬 初始化动态管理器...');\n            this.dynamicsManager.initialize();\n            console.log('✅ 动态管理器初始化完成');\n        }\n    }\n    /**\n     * 初始化角色切换监听\n     */\n    initializeCharacterChangeListener() {\n        const currentCharacterId = this.getCurrentCharacterId();\n        console.log(`🔄 角色切换监听已初始化，当前角色: ${currentCharacterId}`);\n        // 监听酒馆的角色切换事件\n        try {\n            // 方法1: 监听酒馆的CHARACTER_CHANGED事件\n            if (typeof eventSource !== 'undefined' && eventSource.on) {\n                eventSource.on('CHARACTER_CHANGED', () => {\n                    console.log('🔄 检测到角色切换事件 (CHARACTER_CHANGED)');\n                    this.handleCharacterChange();\n                });\n                console.log('✅ 已监听 CHARACTER_CHANGED 事件');\n            }\n            // 方法2: 监听document的自定义事件\n            document.addEventListener('characterChanged', () => {\n                console.log('🔄 检测到角色切换事件 (characterChanged)');\n                this.handleCharacterChange();\n            });\n            // 方法3: 监听酒馆可能的其他事件\n            document.addEventListener('character_loaded', () => {\n                console.log('🔄 检测到角色加载事件 (character_loaded)');\n                this.handleCharacterChange();\n            });\n            console.log('✅ 角色切换事件监听已设置');\n        }\n        catch (error) {\n            console.error('设置角色切换监听失败:', error);\n        }\n    }\n    /**\n     * 获取当前角色ID\n     */\n    getCurrentCharacterId() {\n        try {\n            // 使用与characterStorage相同的逻辑\n            if (typeof TavernHelper !== 'undefined' && TavernHelper.getCharData) {\n                const charData = TavernHelper.getCharData();\n                if (charData) {\n                    // 优先使用name，避免avatar的.png后缀\n                    return charData.name || charData.avatar || 'default';\n                }\n            }\n            // 备用方案：尝试全局函数\n            if (typeof getCharData === 'function') {\n                const charData = getCharData();\n                if (charData) {\n                    // 优先使用name，避免avatar的.png后缀\n                    return charData.name || charData.avatar || 'default';\n                }\n            }\n            return 'default';\n        }\n        catch (error) {\n            console.error('获取角色ID失败:', error);\n            return 'default';\n        }\n    }\n    /**\n     * 处理角色切换\n     */\n    handleCharacterChange() {\n        // 清除之前的定时器，实现防抖\n        if (this.characterChangeTimeout) {\n            clearTimeout(this.characterChangeTimeout);\n        }\n        // 设置新的定时器\n        this.characterChangeTimeout = setTimeout(async () => {\n            console.log('🔄 处理角色切换，重新加载联系人数据...');\n            // 清除角色ID缓存，确保获取最新的角色信息\n            try {\n                const { clearCharacterIdCache } = __webpack_require__(/*! ./modules/utils/characterStorage */ \"./src/多云熊/备份/给rovo的/modules/utils/characterStorage.ts\");\n                clearCharacterIdCache();\n            }\n            catch (error) {\n                console.error('清除角色ID缓存失败:', error);\n            }\n            // 重新加载联系人数据\n            await this.chatListManager.reloadContacts();\n            // 重新加载壁纸设置\n            try {\n                const { WallpaperManager } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./modules/chatList/wallpaperManager */ \"./src/多云熊/备份/给rovo的/modules/chatList/wallpaperManager.ts\"));\n                const wallpaperManager = WallpaperManager.getInstance();\n                wallpaperManager.handleCharacterChange();\n                console.log('🖼️ 聊天列表壁纸设置已重新加载');\n            }\n            catch (error) {\n                console.error('重新加载聊天列表壁纸设置失败:', error);\n            }\n            // 重新加载聊天窗口壁纸设置\n            try {\n                if (this.chatWallpaperManager) {\n                    this.chatWallpaperManager.handleCharacterChange();\n                    console.log('🖼️ 聊天窗口壁纸设置已重新加载');\n                }\n            }\n            catch (error) {\n                console.error('重新加载聊天窗口壁纸设置失败:', error);\n            }\n            // 如果当前正在显示聊天列表，刷新显示\n            const chatListContainer = document.getElementById('chatListInterface');\n            if (chatListContainer && chatListContainer.classList.contains('active')) {\n                console.log('📋 刷新聊天列表显示');\n                this.chatListManager.refreshChatList();\n            }\n            // 通知外部模块角色切换（jQuery事件），以便灵动岛等模块重新初始化\n            try {\n                $(document).trigger('characterChange');\n            }\n            catch (error) {\n                console.warn('触发 characterChange 事件失败:', error);\n            }\n            console.log('✅ 角色切换处理完成');\n        }, 300); // 300毫秒的防抖延迟\n    }\n    /**\n     * 初始化设置相关功能\n     */\n    async initializeSettings() {\n        // 从存储中加载跨聊天发送设置\n        try {\n            const { StorageManager } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./modules/profile/StorageManager */ \"./src/多云熊/备份/给rovo的/modules/profile/StorageManager.ts\"));\n            const storageManager = StorageManager.getInstance();\n            const settings = storageManager.loadSettings();\n            this.crossChatSendEnabled = settings.crossChatSendEnabled;\n            console.log('🔄 跨聊天发送设置已加载:', this.crossChatSendEnabled);\n        }\n        catch (error) {\n            console.error('加载跨聊天发送设置失败:', error);\n            this.crossChatSendEnabled = false;\n        }\n        // 监听设置更新事件\n        document.addEventListener('settingsUpdated', (event) => {\n            const { crossChatSendEnabled } = event.detail;\n            if (typeof crossChatSendEnabled === 'boolean') {\n                this.crossChatSendEnabled = crossChatSendEnabled;\n                console.log('🔄 跨聊天发送设置已同步:', crossChatSendEnabled);\n            }\n        });\n    }\n    /**\n     * 切换到指定页面\n     */\n    switchToPage(page) {\n        console.log(`🔄 切换到页面: ${page}`);\n        // 隐藏所有界面\n        this.hideAllInterfaces();\n        // 显示对应界面\n        switch (page) {\n            case 'chat-list':\n                this.showChatList();\n                break;\n            case 'dynamics':\n                this.showDynamicsInterface();\n                break;\n            case 'profile':\n                this.showProfileInterface();\n                break;\n            default:\n                console.warn(`未知页面: ${page}`);\n        }\n    }\n    /**\n     * 切换到聊天列表页面\n     */\n    switchToChatListPage() {\n        this.hideAllInterfaces();\n        this.showChatList();\n    }\n    /**\n     * 切换到我的页面\n     */\n    switchToProfilePage() {\n        this.hideAllInterfaces();\n        this.showProfileInterface();\n    }\n    /**\n     * 切换到动态页面\n     */\n    switchToDynamicsPage() {\n        console.log('🔄 切换到动态页面');\n        this.hideAllInterfaces();\n        this.showDynamicsInterface();\n    }\n    /**\n     * 显示动态界面\n     */\n    showDynamicsInterface() {\n        console.log('📱 准备显示动态界面...');\n        if (this.dynamicsManager) {\n            try {\n                // 显示动态页面\n                this.dynamicsManager.showDynamicsInterface();\n                console.log('✅ 动态界面显示成功');\n            }\n            catch (error) {\n                console.error('显示动态界面失败:', error);\n                this.soundManager.playSound('error');\n                // 回退到聊天列表\n                this.switchToPage('chat-list');\n            }\n        }\n        else {\n            console.error('❌ 动态页面模块未初始化');\n            this.soundManager.playSound('error');\n            // 显示错误提示并回退到聊天列表\n            if (typeof toastr !== 'undefined') {\n                toastr.error('动态页面模块未初始化，请刷新页面重试');\n            }\n            // 直接回退到聊天列表，避免死循环\n            this.switchToPage('chat-list');\n        }\n    }\n    /**\n     * 隐藏所有界面\n     */\n    hideAllInterfaces() {\n        // 隐藏聊天界面\n        const chatInterface = document.getElementById('chatInterface');\n        if (chatInterface) {\n            chatInterface.style.display = 'none';\n        }\n        // 隐藏聊天列表\n        this.chatListManager.hideChatListInterface();\n        // 隐藏我的页面\n        if (this.profileInterface) {\n            this.profileInterface.hide();\n        }\n        // 隐藏动态页面\n        if (this.dynamicsManager) {\n            this.dynamicsManager.hideDynamicsInterface();\n        }\n    }\n    /**\n     * 显示我的页面界面\n     */\n    showProfileInterface() {\n        console.log('👤 准备显示个人主页界面...');\n        if (this.profileInterface) {\n            try {\n                // 显示个人主页\n                this.profileInterface.show();\n                console.log('✅ 个人主页界面显示成功');\n            }\n            catch (error) {\n                console.error('显示个人主页界面失败:', error);\n                this.soundManager.playSound('error');\n                // 回退到聊天列表\n                this.switchToPage('chat-list');\n            }\n        }\n        else {\n            console.error('❌ 我的页面模块未初始化');\n            this.soundManager.playSound('error');\n            // 显示错误提示并回退到聊天列表\n            if (typeof toastr !== 'undefined') {\n                toastr.error('个人主页模块未初始化，请刷新页面重试');\n            }\n            // 直接回退到聊天列表，避免死循环\n            this.switchToPage('chat-list');\n        }\n    }\n    /**\n     * 处理显示个人主页事件\n     * @param detail 事件详情\n     */\n    handleShowProfilePage(detail) {\n        console.log(`👤 显示个人主页 - 来源: ${detail.source}`);\n        try {\n            // 播放点击音效\n            this.soundManager.playSound('click');\n            // 切换到个人主页界面\n            this.switchToPage('profile');\n        }\n        catch (error) {\n            console.error('显示个人主页失败:', error);\n            this.soundManager.playSound('error');\n            // 显示错误提示\n            if (typeof toastr !== 'undefined') {\n                toastr.error('无法打开个人主页，请稍后重试');\n            }\n        }\n    }\n    /**\n     * 清除世界书角色缓存\n     */\n    async clearLorebookCharacterCache() {\n        try {\n            const contactManager = this.chatListManager.getContactManager();\n            const result = await contactManager.clearLorebookCharacterCache();\n            console.log(`🗑️ [BearChatManager] 世界书角色缓存清除完成: ${result.cleared}/${result.total}`);\n            // 播放成功音效\n            this.soundManager.playSound('success');\n            // 显示成功提示\n            if (typeof toastr !== 'undefined') {\n                if (result.cleared > 0) {\n                    toastr.success(`已清除 ${result.cleared} 个世界书角色的缓存`);\n                }\n                else if (result.total > 0) {\n                    toastr.info(`世界书中有 ${result.total} 个角色，但没有自定义头像缓存需要清除`);\n                }\n                else {\n                    toastr.info('世界书中没有找到联系人');\n                }\n            }\n            return result;\n        }\n        catch (error) {\n            console.error('❌ [BearChatManager] 清除世界书角色缓存失败:', error);\n            // 播放错误音效\n            this.soundManager.playSound('error');\n            // 显示错误提示\n            if (typeof toastr !== 'undefined') {\n                toastr.error('清除世界书角色缓存失败，请稍后重试');\n            }\n            return { cleared: 0, total: 0 };\n        }\n    }\n    /**\n     * 获取世界书角色缓存统计信息\n     */\n    getLorebookCacheStats() {\n        try {\n            const contactManager = this.chatListManager.getContactManager();\n            return contactManager.getLorebookCacheStats();\n        }\n        catch (error) {\n            console.error('❌ [BearChatManager] 获取世界书缓存统计失败:', error);\n            return { worldbookContacts: 0, cachedContacts: 0, cachedWorldbookContacts: 0 };\n        }\n    }\n    /**\n     * 从现有数据初始化\n     */\n    initializeFromExistingData() {\n        // 尝试从当前消息中解析数据\n        if (typeof getChatMessages === 'function') {\n            try {\n                const messages = getChatMessages('0-{{lastMessageId}}');\n                this.parseExistingMessages(messages);\n            }\n            catch (error) {\n                console.error('获取现有消息失败:', error);\n                this.initializeDefaultData();\n            }\n        }\n        else {\n            console.warn('getChatMessages函数不可用，使用默认数据');\n            this.initializeDefaultData();\n        }\n    }\n    /**\n     * 解析现有消息\n     */\n    async parseExistingMessages(messages) {\n        // 方案B：初始化阶段合并所有楼层\n        console.log('🔄 开始解析现有消息，合并所有楼层...');\n        // 1. 收集所有 bear 段\n        const bearBlocks = this.messageParser.extractAllBearContents(messages);\n        if (bearBlocks.length === 0) {\n            console.warn('未找到任何Bear内容块');\n            return;\n        }\n        // 2. 初始化聊天数据和动态数据\n        this.chatData = new Map();\n        this.dynamicsData = [];\n        // 3. 逐段解析并合并\n        for (const block of bearBlocks) {\n            try {\n                // 使用新的扩展解析方法\n                const parseResult = await this.messageParser.parseBearContentPlus(block);\n                const partialChatData = parseResult.chatMap;\n                const partialDynamics = parseResult.dynamics;\n                // 合并聊天数据\n                for (const [chatId, chat] of partialChatData) {\n                    const existingChat = this.chatData.get(chatId);\n                    if (existingChat) {\n                        // 如果聊天已存在，合并消息\n                        existingChat.messages = this.mergeMessages(existingChat.messages, chat.messages);\n                        // 更新最后消息\n                        if (existingChat.messages.length > 0) {\n                            const lastMessage = existingChat.messages[existingChat.messages.length - 1];\n                            existingChat.lastMessage =\n                                existingChat.type === 'group' ? this.formatGroupLastMessage(lastMessage) : lastMessage.content;\n                        }\n                    }\n                    else {\n                        // 新聊天，直接添加\n                        this.chatData.set(chatId, chat);\n                    }\n                }\n                // 合并动态数据到本地存储\n                if (partialDynamics && partialDynamics.length > 0) {\n                    this.dynamicsData = this.mergeDynamicsData(this.dynamicsData, partialDynamics);\n                    console.log(`📝 合并动态数据，当前共 ${this.dynamicsData.length} 条动态`);\n                }\n            }\n            catch (error) {\n                console.error('解析Bear块时出错:', error);\n            }\n        }\n        console.log(`✅ 合并完成，共解析 ${this.chatData.size} 个聊天，来自 ${bearBlocks.length} 个Bear块`);\n        // 4. 应用 localStorage 群名覆盖 (保持原有覆盖)\n        _modules_groupChat_GroupNameOverrideManager__WEBPACK_IMPORTED_MODULE_7__.GroupNameOverrideManager.applyOverridesToChatData(this.chatData);\n        // 5. 验证和清理无效的覆盖数据\n        const validGroupIds = Array.from(this.chatData.keys()).filter(chatId => this.chatData.get(chatId)?.type === 'group');\n        _modules_groupChat_GroupNameOverrideManager__WEBPACK_IMPORTED_MODULE_7__.GroupNameOverrideManager.validateAndCleanOverrides(validGroupIds);\n        // 有数据时也显示聊天列表作为主页\n        if (this.chatData.size > 0) {\n            const firstChatId = this.chatData.keys().next().value;\n            if (firstChatId) {\n                this.currentChat = firstChatId;\n            }\n            this.showChatList();\n        }\n        if (this.chatData.size === 0) {\n            this.initializeDefaultData();\n        }\n    }\n    /**\n     * 初始化默认数据\n     */\n    initializeDefaultData() {\n        // 不创建任何默认聊天数据，直接显示聊天列表\n        this.showChatList();\n    }\n    /**\n     * 切换加号菜单的显示状态\n     */\n    togglePlusMenu() {\n        const plusMenu = document.getElementById('plusMenu');\n        if (!plusMenu)\n            return;\n        // 先隐藏表情包选择器，避免同时显示\n        this.hideStickerSelector();\n        this.isMenuVisible = !this.isMenuVisible;\n        if (this.isMenuVisible) {\n            // 显示菜单\n            plusMenu.classList.add('active');\n            // 添加动画效果\n            setTimeout(() => {\n                plusMenu.classList.add('show');\n            }, 10);\n        }\n        else {\n            // 隐藏菜单\n            this.hidePlusMenu();\n        }\n    }\n    /**\n     * 隐藏加号菜单并重置状态\n     */\n    hidePlusMenu() {\n        const plusMenu = document.getElementById('plusMenu');\n        if (!plusMenu)\n            return;\n        // 移除显示状态\n        plusMenu.classList.remove('active', 'show');\n        this.isMenuVisible = false;\n    }\n    /**\n     * 处理菜单项点击事件\n     * @param type 菜单项类型\n     */\n    handleMenuItemClick(type) {\n        this.soundManager.playSound('emoji');\n        // 首先隐藏菜单\n        this.hidePlusMenu();\n        // 根据类型分发到对应的处理函数\n        switch (type) {\n            case 'sticker':\n                this.handleStickerMenuClick();\n                break;\n            case 'image':\n                this.handleImageMenuClick();\n                break;\n            case 'voice':\n                this.handleVoiceMenuClick();\n                break;\n            case 'location':\n                this.handleLocationMenuClick();\n                break;\n            case 'transfer':\n                this.handleTransferMenuClick();\n                break;\n            default:\n                console.warn(`未知的菜单项类型: ${type}`);\n                this.showToast(`功能 \"${type}\" 暂未实现`, 'warning');\n        }\n    }\n    /**\n     * 处理表情包菜单点击\n     */\n    handleStickerMenuClick() {\n        this.showStickerSelector();\n    }\n    /**\n     * 处理图片菜单点击\n     */\n    handleImageMenuClick() {\n        this.showImageInputModal();\n    }\n    /**\n     * 处理语音菜单点击\n     */\n    handleVoiceMenuClick() {\n        this.showVoiceInputModal();\n    }\n    /**\n     * 处理位置菜单点击\n     */\n    handleLocationMenuClick() {\n        this.showLocationInputModal();\n    }\n    /**\n     * 处理转账菜单点击\n     */\n    handleTransferMenuClick() {\n        this.showTransferInputModal();\n    }\n    /**\n     * 处理回车键 - 添加消息到队列\n     */\n    handleEnterKey() {\n        // 如果正在发送中，不允许添加新消息\n        if (this.isSending) {\n            console.log('🚫 正在发送中，请等待发送完成');\n            return;\n        }\n        const inputField = document.getElementById('inputField');\n        // 创建待发送消息\n        const pendingMessage = {\n            id: this.generateMessageId(),\n            type: 'S',\n            chatId: this.currentChat,\n            sender: '{{user}}',\n            avatar: '',\n            messageType: 'text',\n            content: inputField.value.trim(),\n            timestamp: this.getCurrentTime(),\n            isPending: true,\n        };\n        // 添加到发送队列\n        this.addToSendQueue(pendingMessage);\n        // 清空输入框\n        inputField.value = '';\n        // 只添加新消息到界面，不重新渲染整个列表\n        this.addNewMessageToInterface(pendingMessage);\n        // 播放发送音效\n        this.soundManager.playSound('send');\n    }\n    /**\n     * 更新发送按钮状态\n     * @param isSending 是否正在发送\n     */\n    updateSendButtonState(isSending) {\n        const sendBtn = document.getElementById('sendBtn');\n        if (sendBtn) {\n            sendBtn.disabled = isSending;\n            if (isSending) {\n                sendBtn.style.opacity = '0.6';\n                sendBtn.style.cursor = 'not-allowed';\n            }\n            else {\n                sendBtn.style.opacity = '1';\n                sendBtn.style.cursor = 'pointer';\n            }\n        }\n    }\n    /**\n     * 处理发送按钮点击\n     */\n    async handleSendClick() {\n        // 防止重复点击\n        if (this.isSending) {\n            console.log('🚫 正在发送中，请勿重复点击');\n            return;\n        }\n        console.log(`🔄 跨聊天发送模式: ${this.crossChatSendEnabled ? '开启' : '关闭'}`);\n        // 根据跨聊天发送设置决定发送哪些消息\n        const messagesToSend = this.crossChatSendEnabled\n            ? this.sendQueue // 跨聊天模式：发送所有队列中的消息\n            : this.getPendingMessagesForCurrentChat(); // 普通模式：只发送当前聊天的消息\n        if (messagesToSend.length === 0) {\n            console.log('没有待发送的消息');\n            return;\n        }\n        // 设置发送状态\n        this.isSending = true;\n        this.updateSendButtonState(true);\n        console.log(`📤 实际发送 ${messagesToSend.length} 条消息`);\n        // 如果是跨聊天模式，显示详细统计\n        if (this.crossChatSendEnabled && this.sendQueue.length > 0) {\n            const messagesByChat = {};\n            for (const message of messagesToSend) {\n                messagesByChat[message.chatId] = (messagesByChat[message.chatId] || 0) + 1;\n            }\n            console.log('📊 跨聊天发送统计:', messagesByChat);\n        }\n        // 播放发送音效\n        this.soundManager.playSound('send');\n        try {\n            // 批量发送消息\n            await this.processSendQueue(messagesToSend);\n            // 发送完成后立即恢复按钮状态（不等待消息渲染）\n            this.isSending = false;\n            this.updateSendButtonState(false);\n            console.log('✅ 发送完成，按钮状态已恢复');\n        }\n        catch (error) {\n            // 发送失败时也要重置发送状态\n            this.isSending = false;\n            this.updateSendButtonState(false);\n            console.error('❌ 发送失败，按钮状态已恢复:', error);\n            throw error;\n        }\n    }\n    /**\n     * 处理发送队列中的消息（支持跨聊天发送）\n     */\n    async processSendQueue(messages) {\n        if (messages.length === 0) {\n            console.log('📭 发送队列为空');\n            return;\n        }\n        try {\n            console.log(`🚀 开始批量发送 ${messages.length} 条消息`);\n            if (this.crossChatSendEnabled) {\n                // 跨聊天模式：按聊天分组发送\n                await this.processCrossChatSend(messages);\n            }\n            else {\n                // 普通模式：合并发送当前聊天的消息\n                await this.processSingleChatSend(messages);\n            }\n            // 清空已发送的消息\n            this.clearSentMessages(messages);\n            // 如果是跨聊天模式且还有剩余消息，提示用户\n            if (this.crossChatSendEnabled && this.sendQueue.length > 0) {\n                console.log(`📝 跨聊天发送完成，队列中还有 ${this.sendQueue.length} 条消息`);\n            }\n            console.log('✅ 批量消息发送成功');\n        }\n        catch (error) {\n            console.error('❌ 批量消息发送失败:', error);\n            this.showErrorToast(`消息发送失败: ${error.message || '未知错误'}`);\n        }\n    }\n    /**\n     * 处理跨聊天发送\n     */\n    async processCrossChatSend(messages) {\n        // 按聊天分组消息\n        const messagesByChat = new Map();\n        for (const message of messages) {\n            if (!messagesByChat.has(message.chatId)) {\n                messagesByChat.set(message.chatId, []);\n            }\n            messagesByChat.get(message.chatId).push(message);\n        }\n        console.log(`📤 跨聊天发送：将向 ${messagesByChat.size} 个聊天发送消息`);\n        // 构建跨聊天合并提示词\n        const crossChatPrompt = this.buildCrossChatPrompt(messagesByChat);\n        console.log('📝 跨聊天合并提示词:', crossChatPrompt);\n        let typingMessage = null;\n        try {\n            // 显示打字动画\n            typingMessage = this.showTypingIndicator();\n            // 检查是否有图片文件（跨聊天时只取第一个图片文件）\n            let imageData = null;\n            for (const [_, chatMessages] of messagesByChat) {\n                imageData = this.extractImageFileFromMessages(chatMessages);\n                if (imageData)\n                    break;\n            }\n            // 一次性发送所有消息\n            console.log('📡 调用 generate 函数（跨聊天合并发送）...');\n            const generateConfig = {\n                user_input: crossChatPrompt,\n                should_stream: false,\n            };\n            // 如果有图片数据，添加到generate配置中\n            if (imageData) {\n                generateConfig.image = imageData;\n                if (imageData instanceof File) {\n                    console.log('📷 跨聊天包含图片文件:', imageData.name);\n                }\n                else {\n                    console.log('📷 跨聊天包含图片数据:', imageData.startsWith('data:image/') ? 'base64' : 'url');\n                }\n            }\n            // 跨聊天调用generate\n            console.log('🚀 跨聊天调用generate');\n            const aiResponse = await generate(generateConfig);\n            console.log('🤖 收到AI回复:', aiResponse);\n            // 移除打字动画\n            this.hideTypingIndicator(await typingMessage);\n            // 处理AI回复（需要解析并分发到各个聊天）\n            await this.handleCrossChatAIResponse(aiResponse, messagesByChat);\n        }\n        catch (error) {\n            // 隐藏打字动画（如果存在）\n            if (typingMessage) {\n                this.hideTypingIndicator(await typingMessage);\n            }\n            throw error; // 重新抛出错误，让上层处理\n        }\n    }\n    /**\n     * 处理单个聊天的发送\n     */\n    async processSingleChatSend(messages) {\n        let typingMessage = null;\n        try {\n            console.log('📤 开始处理单个聊天发送，消息数量:', messages.length);\n            // 简化消息信息输出\n            console.log('📤 处理消息:', messages.length, '条');\n            // 检查是否有图片文件或base64数据\n            const imageData = this.extractImageFileFromMessages(messages);\n            console.log('🔍 [DEBUG] 提取到的图片数据:', imageData\n                ? {\n                    type: typeof imageData,\n                    isFile: imageData instanceof File,\n                    isString: typeof imageData === 'string',\n                    fileName: imageData instanceof File ? imageData.name : undefined,\n                    fileSize: imageData instanceof File ? imageData.size : undefined,\n                    isBase64: typeof imageData === 'string' && imageData.startsWith('data:image/'),\n                    base64Length: typeof imageData === 'string' ? imageData.length : undefined,\n                }\n                : null);\n            // 构建合并的提示词（如果有图片数据，会排除临时引用）\n            const combinedPrompt = this.buildCombinedPrompt(messages, imageData !== null);\n            console.log('📝 构建提示词完成');\n            // 显示打字动画\n            typingMessage = this.showTypingIndicator();\n            // 调用 generate 函数\n            console.log('📡 调用 generate 函数...');\n            // 确保user_input是字符串\n            if (typeof combinedPrompt !== 'string') {\n                console.error('🚨 [ERROR] combinedPrompt不是字符串:', typeof combinedPrompt, combinedPrompt);\n                throw new Error(`combinedPrompt必须是字符串，但收到了: ${typeof combinedPrompt}`);\n            }\n            const generateConfig = {\n                user_input: combinedPrompt,\n                should_stream: false,\n            };\n            // 如果有图片数据，添加到generate配置中\n            if (imageData) {\n                generateConfig.image = imageData;\n                if (imageData instanceof File) {\n                    console.log('📷 包含图片文件:', imageData.name, '类型:', imageData.type);\n                }\n                else {\n                    console.log('📷 包含base64图片数据');\n                }\n            }\n            console.log('🔍 [DEBUG] 最终的generate配置:', {\n                user_input: generateConfig.user_input.substring(0, 200) + (generateConfig.user_input.length > 200 ? '...' : ''),\n                should_stream: generateConfig.should_stream,\n                hasImage: !!generateConfig.image,\n                imageInfo: generateConfig.image\n                    ? generateConfig.image instanceof File\n                        ? {\n                            type: 'File',\n                            name: generateConfig.image.name,\n                            size: generateConfig.image.size,\n                            fileType: generateConfig.image.type,\n                        }\n                        : {\n                            type: 'String',\n                            isUrl: generateConfig.image.startsWith('http'),\n                            isBase64: generateConfig.image.startsWith('data:image/'),\n                            length: generateConfig.image.length,\n                        }\n                    : null,\n            });\n            // 调用generate\n            console.log('🚀 调用generate');\n            const aiResponse = await generate(generateConfig);\n            console.log('🤖 收到AI回复:', aiResponse);\n            // 移除打字动画\n            this.hideTypingIndicator(await typingMessage);\n            // 处理AI回复（异步执行，不阻塞发送按钮恢复）\n            this.handleAIResponse(aiResponse, messages[messages.length - 1]).catch(error => {\n                console.error('❌ 处理AI回复失败:', error);\n            });\n            console.log('✅ generate调用完成，processSingleChatSend即将返回');\n        }\n        catch (error) {\n            // 隐藏打字动画（如果存在）\n            if (typingMessage) {\n                this.hideTypingIndicator(await typingMessage);\n            }\n            throw error; // 重新抛出错误，让上层处理\n        }\n    }\n    /**\n     * 清空已发送的消息\n     */\n    clearSentMessages(sentMessages) {\n        const sentMessageIds = new Set(sentMessages.map(msg => msg.id));\n        this.sendQueue = this.sendQueue.filter(msg => !sentMessageIds.has(msg.id));\n        console.log(`🧹 已清空 ${sentMessages.length} 条消息，队列剩余 ${this.sendQueue.length} 条`);\n    }\n    /**\n     * 从消息中提取图片文件或base64数据\n     */\n    extractImageFileFromMessages(messages) {\n        console.log('🔍 [DEBUG] extractImageFileFromMessages 开始，消息数量:', messages.length);\n        for (const message of messages) {\n            console.log('🔍 [DEBUG] 检查消息:', {\n                id: message.id,\n                messageType: message.messageType,\n                hasData: !!message.data,\n                hasUploadedFile: !!message.data?.uploadedFile,\n                hasBase64Image: !!message.data?.base64Image,\n                hasImageUrl: !!message.data?.imageUrl,\n                uploadedFileType: message.data?.uploadedFile?.constructor?.name,\n            });\n            if (message.messageType === 'image') {\n                // 优先返回File对象\n                if (message.data?.uploadedFile) {\n                    const file = message.data.uploadedFile;\n                    console.log('🔍 [DEBUG] 找到图片文件:', {\n                        name: file.name,\n                        size: file.size,\n                        type: file.type,\n                        isFile: file instanceof File,\n                    });\n                    return file;\n                }\n                // 其次返回base64数据\n                if (message.data?.base64Image) {\n                    const base64 = message.data.base64Image;\n                    console.log('🔍 [DEBUG] 找到base64图片数据:', {\n                        length: base64.length,\n                        isBase64: base64.startsWith('data:image/'),\n                    });\n                    return base64;\n                }\n                // 最后返回图片URL\n                if (message.data?.imageUrl) {\n                    const imageUrl = message.data.imageUrl;\n                    console.log('🔍 [DEBUG] 找到图片URL:', {\n                        url: imageUrl,\n                        isHttpUrl: imageUrl.startsWith('http://') || imageUrl.startsWith('https://'),\n                    });\n                    return imageUrl;\n                }\n            }\n        }\n        console.log('🔍 [DEBUG] 未找到图片文件或base64数据');\n        return null;\n    }\n    /**\n     * 处理消息内容，如果有图片数据则提取描述\n     */\n    processMessageContent(message, hasImageData) {\n        console.log('🔍 [DEBUG] processMessageContent 开始:', {\n            messageId: message.id,\n            messageType: message.messageType,\n            hasImageData: hasImageData,\n            hasUploadedFile: !!message.data?.uploadedFile,\n            hasBase64Image: !!message.data?.base64Image,\n            contentPreview: message.content.substring(0, 100) + (message.content.length > 100 ? '...' : ''),\n        });\n        let content = message.content;\n        // 如果是图片消息且有图片数据，提取描述部分\n        if (message.messageType === 'image' &&\n            hasImageData &&\n            (message.data?.uploadedFile || message.data?.base64Image || message.data?.imageUrl)) {\n            // 检测组合格式（图片URL + 描述）\n            const combinedRegex = /^图片URL：.*?\\n图片描述：(.*?)$/;\n            const combinedMatch = content.match(combinedRegex);\n            if (combinedMatch) {\n                const description = combinedMatch[1] || '';\n                return description;\n            }\n            // 检测文件格式（图片文件 + 描述）\n            const fileRegex = /^图片文件：.*?(?:\\n图片描述：(.*?))?$/;\n            const fileMatch = content.match(fileRegex);\n            if (fileMatch) {\n                const description = fileMatch[1] || '';\n                return description;\n            }\n            // 如果消息内容就是描述（base64图片或URL图片的情况）\n            if ((message.data?.base64Image || message.data?.imageUrl) && content && !content.includes('╒═════')) {\n                console.log('🔍 [DEBUG] 图片消息，直接使用内容作为描述:', content);\n                return content;\n            }\n            // 如果都不匹配，返回空描述\n            return '';\n        }\n        // 非图片消息或没有图片文件，按原逻辑处理\n        if (message.messageType !== 'text') {\n            content = `${message.messageType}:${content}`;\n        }\n        // 确保返回的是字符串\n        if (typeof content !== 'string') {\n            console.error('🚨 [ERROR] processMessageContent返回了非字符串:', typeof content, content);\n            return ''; // 返回空字符串\n        }\n        return content;\n    }\n    /**\n     * 构建合并的提示词\n     */\n    buildCombinedPrompt(messages, hasImageFile = false) {\n        if (messages.length === 0) {\n            return '';\n        }\n        // 获取聊天数据\n        const firstMessage = messages[0];\n        const chatData = this.chatData.get(firstMessage.chatId);\n        // 构建基础提示词\n        let basePrompt = '';\n        if (chatData?.type === 'group') {\n            // 群聊格式\n            const groupName = chatData.chatName || firstMessage.chatId;\n            basePrompt = `回复和${groupName}的聊天：`;\n        }\n        else {\n            // 私聊格式\n            const chatName = chatData?.chatName || firstMessage.chatId;\n            const characterName = this.extractCharacterNameFromChatName(chatName);\n            basePrompt = `回复和${characterName}的聊天：`;\n        }\n        // 如果只有一条消息，使用简单格式\n        if (messages.length === 1) {\n            const processedContent = this.processMessageContent(messages[0], hasImageFile);\n            return `${basePrompt}${processedContent}`;\n        }\n        // 多条消息，按顺序组合\n        const messageContents = messages\n            .map((msg, index) => {\n            // 处理消息内容（如果有图片文件，会提取描述）\n            const processedContent = this.processMessageContent(msg, hasImageFile);\n            return `${index + 1}. ${processedContent}`;\n        })\n            .join('\\n');\n        return `${basePrompt}\\n${messageContents}`;\n    }\n    /**\n     * 构建跨聊天合并提示词\n     */\n    buildCrossChatPrompt(messagesByChat) {\n        const chatPrompts = [];\n        // 检查是否有图片文件\n        let hasImageFile = false;\n        for (const [_, messages] of messagesByChat) {\n            if (this.extractImageFileFromMessages(messages)) {\n                hasImageFile = true;\n                break;\n            }\n        }\n        for (const [chatId, messages] of messagesByChat) {\n            if (messages.length === 0)\n                continue;\n            // 获取聊天数据\n            const chatData = this.chatData.get(chatId);\n            // 构建单个聊天的提示词\n            let chatPrompt = '';\n            if (chatData?.type === 'group') {\n                // 群聊格式\n                const groupName = chatData.chatName || chatId;\n                chatPrompt = `回复和${groupName}的聊天：`;\n            }\n            else {\n                // 私聊格式\n                const chatName = chatData?.chatName || chatId;\n                const characterName = this.extractCharacterNameFromChatName(chatName);\n                chatPrompt = `回复和${characterName}的聊天：`;\n            }\n            // 添加消息内容\n            if (messages.length === 1) {\n                const processedContent = this.processMessageContent(messages[0], hasImageFile);\n                chatPrompt += processedContent;\n            }\n            else {\n                const messageContents = messages\n                    .map((msg, index) => {\n                    const processedContent = this.processMessageContent(msg, hasImageFile);\n                    return `${index + 1}. ${processedContent}`;\n                })\n                    .join('');\n                chatPrompt += messageContents;\n            }\n            chatPrompts.push(chatPrompt);\n        }\n        return chatPrompts.join('\\n');\n    }\n    /**\n     * 处理跨聊天AI回复\n     */\n    async handleCrossChatAIResponse(aiResponse, messagesByChat) {\n        try {\n            // 清理AI内部思考标签\n            const cleanedResponse = this.cleanAIInternalTags(aiResponse);\n            console.log('🧹 已清理AI内部思考标签');\n            // 提取最后一对 <bear></bear> 中的内容\n            const bearContent = this.extractLastBearContent(cleanedResponse);\n            if (bearContent) {\n                console.log('🐻 检测到 Bear 标签，开始跨聊天数据处理流程...');\n                // Bear格式：数据处理 → 保存 → 清空队列 → 渲染\n                await this.updateCurrentMessageWithBearContent(bearContent);\n            }\n            else {\n                console.log('📝 未找到Bear标签，使用/sendas输出到新楼层...');\n                // 非Bear格式：发送消息到当前聊天\n                // 对于跨聊天发送，我们选择最后一个聊天作为输出目标\n                const lastChatId = Array.from(messagesByChat.keys()).pop();\n                const lastMessages = messagesByChat.get(lastChatId);\n                if (lastMessages && lastMessages.length > 0) {\n                    await this.sendAIResponseToNewFloor(cleanedResponse, lastMessages[lastMessages.length - 1]);\n                }\n            }\n        }\n        catch (error) {\n            console.error('❌ 处理跨聊天AI回复失败:', error);\n            throw error;\n        }\n    }\n    /**\n     * 清空发送队列\n     */\n    clearSendQueue() {\n        this.sendQueue = [];\n        console.log('🧹 发送队列已清空');\n    }\n    /**\n     * 处理AI回复\n     * 新的执行顺序：数据处理 → 数据保存 → 队列清空 → 界面渲染\n     * 确保数据安全性，避免刷新后消息丢失\n     */\n    async handleAIResponse(aiResponse, originalMessage) {\n        try {\n            // 清理AI内部思考标签\n            const cleanedResponse = this.cleanAIInternalTags(aiResponse);\n            console.log('🧹 已清理AI内部思考标签');\n            // 提取最后一对 <bear></bear> 中的内容\n            const bearContent = this.extractLastBearContent(cleanedResponse);\n            if (bearContent) {\n                console.log('🐻 检测到 Bear 标签，开始完整的数据处理流程...');\n                // Bear格式：数据处理 → 保存 → 清空队列 → 渲染\n                await this.updateCurrentMessageWithBearContent(bearContent);\n            }\n            else {\n                console.log('📝 未找到Bear标签，使用/sendas输出到新楼层...');\n                // 非Bear格式：发送消息 → 清空队列\n                await this.sendAIResponseToNewFloor(cleanedResponse, originalMessage);\n            }\n        }\n        catch (error) {\n            console.error('❌ 处理AI回复失败:', error);\n            throw error;\n        }\n    }\n    /**\n     * 使用setChatMessages更新当前楼层的Bear内容\n     * 新的执行顺序：先保存数据，再清空队列，最后渲染界面\n     * 只替换<bear></bear>标签内的内容，保留标签外的规范要求\n     */\n    async updateCurrentMessageWithBearContent(bearContent) {\n        try {\n            console.log('📝 开始更新Bear内容');\n            // 获取最新楼层的消息\n            const lastMessage = getChatMessages(-1)[0];\n            if (!lastMessage) {\n                console.error('❌ 无法获取最新楼层消息');\n                return;\n            }\n            const lastMessageId = lastMessage.message_id;\n            // 1. 先检测新消息（在合并数据之前）\n            console.log('�  [DEBUG] 开始检测新消息...');\n            const newMessagesToRender = await this.detectNewMessagesBeforeMerge(bearContent);\n            // 2. 合并Bear内容到现有聊天数据（数据处理）\n            const mergedBearContent = await this.mergeBearContentToExistingData(bearContent);\n            // 3. 提取原消息中<bear>标签外的内容，只替换标签内的内容\n            const originalMessage = lastMessage.message || '';\n            const updatedMessage = this.replaceOnlyBearTagContent(originalMessage, mergedBearContent);\n            console.log('💾 保存数据到SillyTavern...');\n            await setChatMessages([\n                {\n                    message_id: lastMessageId,\n                    message: updatedMessage,\n                },\n            ], { refresh: 'none' });\n            console.log('✅ 已使用setChatMessages更新当前楼层的Bear内容（保留标签外内容）');\n            // 4. 清空发送队列\n            this.clearSendQueue();\n            // 4.5 在内存中进行“UI 复水”：为 user 的 image 且无 data.* 的消息补上缓存的预览图（仅内存，不落盘）\n            try {\n                this.chatData.forEach(chat => {\n                    chat.messages.forEach(msg => {\n                        if (msg.messageType === 'image' &&\n                            this.isUserSender(msg.sender) &&\n                            !(msg.data?.uploadedFile || msg.data?.base64Image || msg.data?.imageUrl)) {\n                            const cachedSrc = this.getCachedUiImage(msg);\n                            if (cachedSrc) {\n                                msg.data = { ...(msg.data || {}), imageUrl: cachedSrc };\n                            }\n                        }\n                    });\n                });\n            }\n            catch (rehydrateError) {\n                console.warn('UI 预览图缓存复水失败:', rehydrateError);\n            }\n            // 5. 最后进行前端界面渲染（使用之前检测到的新消息）\n            await this.renderDetectedNewMessages(newMessagesToRender);\n            // 更新lastBearContent为完整的合并后内容\n            this.lastBearContent = mergedBearContent;\n            // 刷新聊天列表以显示最新消息\n            if (this.chatListManager) {\n                this.chatListManager.refreshChatList(this.chatData);\n            }\n            console.log('✅ AI回复处理完成（数据已安全保存）');\n        }\n        catch (error) {\n            console.error('❌ 更新Bear内容失败:', error);\n            throw error;\n        }\n    }\n    /**\n     * 只替换<bear></bear>标签内的内容，保留标签外的内容\n     * @param originalMessage 原始消息内容\n     * @param newBearContent 新的bear标签内容\n     * @returns 更新后的完整消息\n     */\n    replaceOnlyBearTagContent(originalMessage, newBearContent) {\n        // 使用正则表达式匹配<bear>标签，提取标签前后的内容\n        const bearRegex = /<bear>([\\s\\S]*?)<\\/bear>/;\n        const match = originalMessage.match(bearRegex);\n        if (match) {\n            // 如果找到了<bear>标签，只替换标签内的内容\n            const beforeBear = originalMessage.substring(0, match.index);\n            const afterBear = originalMessage.substring(match.index + match[0].length);\n            return `${beforeBear}<bear>${newBearContent}</bear>${afterBear}`;\n        }\n        else {\n            // 如果没有找到<bear>标签，直接添加新的bear内容\n            console.log('📝 未找到现有bear标签，直接添加新内容');\n            return `${originalMessage}<bear>${newBearContent}</bear>`;\n        }\n    }\n    /**\n     * 将Bear内容合并到现有聊天数据中\n     */\n    async mergeBearContentToExistingData(newBearContent) {\n        try {\n            console.log('🔄 开始合并Bear内容');\n            // === 方案A：回灌机制 ===\n            // 在合并前，先从当前楼层文本中回灌 [动态] 容器内容到内存池\n            await this.backfillDynamicsFromCurrentMessage();\n            // 解析新的Bear内容（包括聊天和动态）\n            const parseResult = await this.messageParser.parseBearContentPlus(newBearContent);\n            const newMessages = parseResult.chatMap;\n            const newDynamics = parseResult.dynamics;\n            // 动态数据将在后续的合并逻辑中统一处理\n            // 检查迁移功能是否启用\n            const chatMigrationManager = _modules_chatMigration_ChatMigrationManager__WEBPACK_IMPORTED_MODULE_5__.ChatMigrationManager.getInstance();\n            const isMigrationEnabled = chatMigrationManager.isFeatureEnabled();\n            // 检查是否存在多个Bear楼层\n            const hasMultipleBearFloors = await this.hasMultipleBearFloors();\n            console.log('🔍 楼层状态分析:', {\n                hasMultipleBearFloors,\n                isMigrationEnabled,\n                existingChatCount: this.chatData.size,\n            });\n            // 默认情况：使用累积模式（和迁移开启时一样的逻辑）\n            // 特殊情况：只有当存在多个Bear楼层且迁移功能禁用时，才使用分离模式\n            const shouldUseSeparateMode = hasMultipleBearFloors && !isMigrationEnabled;\n            if (!shouldUseSeparateMode) {\n                // 默认模式：累积历史消息（和迁移开启时一样的逻辑）\n                console.log('🔄 累积模式：合并历史消息 + 新消息');\n                // 1. 合并聊天数据\n                for (const [chatId, newChatData] of newMessages) {\n                    const existingChatData = this.chatData.get(chatId);\n                    if (existingChatData) {\n                        // 如果聊天已存在，合并消息（去重并按时间排序）\n                        const mergedMessages = this.mergeMessages(existingChatData.messages, newChatData.messages);\n                        existingChatData.messages = mergedMessages;\n                        existingChatData.lastMessage =\n                            mergedMessages.length > 0\n                                ? this.messageParser.formatLastMessage(mergedMessages[mergedMessages.length - 1])\n                                : '';\n                        console.log(`📝 累积聊天 ${chatId}，现有 ${mergedMessages.length} 条消息`);\n                    }\n                    else {\n                        // 如果是新聊天，直接添加\n                        this.chatData.set(chatId, newChatData);\n                        console.log(`🆕 添加新聊天 ${chatId}，包含 ${newChatData.messages.length} 条消息`);\n                    }\n                }\n                // 2. 合并动态数据（类似聊天消息的合并逻辑）\n                if (newDynamics && newDynamics.length > 0) {\n                    this.dynamicsData = this.mergeDynamicsData(this.dynamicsData, newDynamics);\n                    console.log(`📝 合并动态数据，当前共 ${this.dynamicsData.length} 条动态`);\n                }\n                // 3. 重新构建完整的Bear内容（包含合并后的聊天和动态数据）\n                const completeBearContent = this.messageParser.buildBearContentPlus({\n                    chatMap: this.chatData,\n                    dynamics: this.dynamicsData,\n                });\n                console.log('✅ Bear内容处理完成（累积模式：包含历史消息和动态）');\n                return completeBearContent.replace('<bear>', '').replace('</bear>', '');\n            }\n            else {\n                // 特殊情况：多个Bear楼层 + 迁移功能禁用 - 分离模式：在当前楼层内容基础上累积\n                console.log('🔄 分离模式：在当前楼层内容基础上累积新消息');\n                // 1. 获取当前楼层的Bear内容\n                const lastMessage = getChatMessages(-1)[0];\n                const currentBearContent = this.messageParser.extractBearContentFromText(lastMessage?.message || '');\n                // 2. 解析当前楼层已有的内容\n                let currentChatData = new Map();\n                let currentDynamicsData = [];\n                if (currentBearContent) {\n                    const currentParseResult = await this.messageParser.parseBearContentPlus(currentBearContent);\n                    currentChatData = currentParseResult.chatMap;\n                    currentDynamicsData = currentParseResult.dynamics || [];\n                }\n                // 3. 合并当前楼层内容 + 新内容\n                // 合并聊天数据\n                for (const [chatId, newChatData] of newMessages) {\n                    const existingChatData = currentChatData.get(chatId);\n                    if (existingChatData) {\n                        // 如果聊天已存在，合并消息（去重并按时间排序）\n                        const mergedMessages = this.mergeMessages(existingChatData.messages, newChatData.messages);\n                        existingChatData.messages = mergedMessages;\n                        existingChatData.lastMessage =\n                            mergedMessages.length > 0\n                                ? this.messageParser.formatLastMessage(mergedMessages[mergedMessages.length - 1])\n                                : '';\n                        console.log(`📝 分离模式：合并楼层聊天 ${chatId}，现有 ${mergedMessages.length} 条消息`);\n                    }\n                    else {\n                        // 如果是新聊天，直接添加\n                        currentChatData.set(chatId, newChatData);\n                        console.log(`🆕 分离模式：添加新聊天 ${chatId}，包含 ${newChatData.messages.length} 条消息`);\n                    }\n                }\n                // 合并动态数据\n                if (newDynamics && newDynamics.length > 0) {\n                    currentDynamicsData = this.mergeDynamicsData(currentDynamicsData, newDynamics);\n                    console.log(`📝 分离模式：合并动态数据，当前楼层共 ${currentDynamicsData.length} 条动态`);\n                }\n                // 4. 更新界面数据（用于显示）\n                this.updateInterfaceDataWithNewMessages(newMessages);\n                if (newDynamics && newDynamics.length > 0) {\n                    this.dynamicsData = this.mergeDynamicsData(this.dynamicsData, newDynamics);\n                }\n                // 5. 构建楼层保存内容（当前楼层内容 + 新内容）\n                const mergedBearContent = this.messageParser.buildBearContentPlus({\n                    chatMap: currentChatData,\n                    dynamics: currentDynamicsData,\n                });\n                console.log('✅ Bear内容处理完成（分离模式：当前楼层内容 + 新内容）');\n                return mergedBearContent.replace('<bear>', '').replace('</bear>', '');\n            }\n        }\n        catch (error) {\n            console.error('❌ 合并Bear内容失败:', error);\n            // 如果合并失败，返回原始内容\n            return newBearContent;\n        }\n    }\n    /**\n     * 合并消息数组（新消息永远排在最后）\n     */\n    mergeMessages(existingMessages, newMessages) {\n        console.log(`🔄 合并消息: 现有 ${existingMessages.length}, 新增 ${newMessages.length}`);\n        // 创建现有消息的指纹集合，用于去重\n        const existingFingerprints = new Set();\n        for (const message of existingMessages) {\n            const fingerprint = this.generateMessageFingerprint(message);\n            existingFingerprints.add(fingerprint);\n        }\n        // 过滤出真正的新消息（去重）\n        const actualNewMessages = [];\n        for (const message of newMessages) {\n            const fingerprint = this.generateMessageFingerprint(message);\n            const isNew = !existingFingerprints.has(fingerprint);\n            console.log(`🔄 [DEBUG] ${isNew ? '添加新消息' : '跳过重复消息'}: \"${fingerprint}\", 发送者: \"${message.sender}\", 内容: \"${message.content.substring(0, 30)}...\"`);\n            if (isNew) {\n                actualNewMessages.push(message);\n            }\n        }\n        // 对新消息内部按时间排序（保证新消息之间的顺序正确）\n        actualNewMessages.sort((a, b) => {\n            return this.compareMessageTimestamps(a.timestamp, b.timestamp);\n        });\n        // 简单合并：现有消息 + 新消息（新消息永远在最后）\n        const mergedMessages = [...existingMessages, ...actualNewMessages];\n        console.log(`🔄 合并完成，最终消息数量: ${mergedMessages.length}，新增: ${actualNewMessages.length}`);\n        return mergedMessages;\n    }\n    /**\n     * 方案A：从当前楼层文本回灌动态数据到内存池\n     * 确保后续重建不会丢失刚刚插入的互动行\n     */\n    async backfillDynamicsFromCurrentMessage() {\n        try {\n            console.log('🔄 [回灌] 开始从当前楼层回灌动态数据');\n            // 1. 获取当前最后楼层文本（使用正确的API）\n            const messages = getChatMessages(-1);\n            if (!messages || messages.length === 0) {\n                console.log('ℹ️ [回灌] 未找到当前楼层，跳过回灌');\n                return;\n            }\n            const lastMessage = messages[0];\n            const originalMessage = lastMessage.message || '';\n            // 2. 提取原始 [动态] 容器文本\n            const dynamicsContainerMatch = originalMessage.match(/\\[动态\\]([\\s\\S]*?)\\[\\/动态\\]/);\n            if (!dynamicsContainerMatch) {\n                console.log('ℹ️ [回灌] 当前楼层无 [动态] 容器，跳过回灌');\n                return;\n            }\n            const originalContainerText = dynamicsContainerMatch[0];\n            console.log('📝 [回灌] 提取到原始容器文本，长度:', originalContainerText.length);\n            // 3. 解析当前楼层的动态数据\n            const parseResult = await this.messageParser.parseBearContentPlus(originalContainerText);\n            const textDynamics = parseResult.dynamics;\n            if (textDynamics && textDynamics.length > 0) {\n                // 4. 合并到内存池\n                this.dynamicsData = this.mergeDynamicsData(this.dynamicsData, textDynamics);\n                console.log(`✅ [回灌] 成功回灌 ${textDynamics.length} 条动态数据到内存池`);\n            }\n            else {\n                console.log('ℹ️ [回灌] 当前楼层无动态数据需要回灌');\n            }\n        }\n        catch (error) {\n            console.error('❌ [回灌] 回灌动态数据失败:', error);\n            // 回灌失败不应该影响主流程，只记录错误\n        }\n    }\n    /**\n     * 合并动态数据数组（类似mergeMessages的逻辑）\n     * 修复：保持原始接收顺序，不进行自动排序\n     */\n    mergeDynamicsData(existingDynamics, newDynamics) {\n        console.log(`🔄 合并动态数据: 现有 ${existingDynamics.length}, 新增 ${newDynamics.length}`);\n        // 创建现有动态的编号到索引的映射，用于更精确的匹配\n        const existingDynamicsMap = new Map();\n        for (const dynamic of existingDynamics) {\n            if (dynamic.no !== undefined) {\n                existingDynamicsMap.set(dynamic.no, dynamic);\n            }\n        }\n        // 处理新动态数据\n        const actualNewDynamics = [];\n        for (const dynamic of newDynamics) {\n            if (dynamic.no !== undefined && existingDynamicsMap.has(dynamic.no)) {\n                // 如果动态已存在（按编号匹配），合并点赞和评论数据\n                const existingDynamic = existingDynamicsMap.get(dynamic.no);\n                console.log(`🔄 合并动态 #${dynamic.no} 的互动数据`);\n                // 补全缺失字段\n                _modules_utils_DynamicsDataProcessor__WEBPACK_IMPORTED_MODULE_16__.DynamicsDataProcessor.fillMissingFields(existingDynamic, dynamic);\n                // 合并互动数据（点赞、评论）\n                _modules_utils_DynamicsDataProcessor__WEBPACK_IMPORTED_MODULE_16__.DynamicsDataProcessor.mergeInteractions(existingDynamic, dynamic);\n            }\n            else {\n                // 如果是新动态，添加到新动态列表\n                actualNewDynamics.push(dynamic);\n                console.log(`🆕 发现新动态 #${dynamic.no}`);\n            }\n        }\n        // 保持原始顺序合并：现有动态 + 新动态（不进行排序）\n        const mergedDynamics = [...existingDynamics, ...actualNewDynamics];\n        console.log(`🔄 动态合并完成，最终数量: ${mergedDynamics.length}，新增: ${actualNewDynamics.length}`);\n        console.log(`📝 保持原始接收顺序，未进行自动排序`);\n        return mergedDynamics;\n    }\n    /**\n     * 格式化群聊最后一条消息用于显示\n     * 委托给 MessageParser 处理，避免重复实现\n     */\n    formatGroupLastMessage(message) {\n        return this.messageParser.formatGroupLastMessage(message);\n    }\n    /**\n     * 比较消息时间戳，正确处理跨日期的情况\n     * @param timestampA 时间戳A (格式: HH:MM)\n     * @param timestampB 时间戳B (格式: HH:MM)\n     * @returns 比较结果 (-1, 0, 1)\n     */\n    compareMessageTimestamps(timestampA, timestampB) {\n        // 解析时间\n        const parseTime = (timestamp) => {\n            const [hours, minutes] = timestamp.split(':').map(Number);\n            return { hours, minutes };\n        };\n        const timeA = parseTime(timestampA);\n        const timeB = parseTime(timestampB);\n        // 创建今天的日期对象用于比较\n        const now = new Date();\n        const dateA = new Date(now.getFullYear(), now.getMonth(), now.getDate(), timeA.hours, timeA.minutes);\n        const dateB = new Date(now.getFullYear(), now.getMonth(), now.getDate(), timeB.hours, timeB.minutes);\n        // 如果时间A比当前时间晚很多（比如23:xx），而时间B比当前时间早很多（比如00:xx）\n        // 那么时间B可能是第二天的时间\n        const currentHour = now.getHours();\n        // 检测跨日期情况：如果一个时间在深夜（20:00之后），另一个在上午（12:00之前）\n        // 那么上午的时间是第二天\n        if (timeA.hours >= 20 && timeB.hours < 12) {\n            // A是深夜，B是第二天上午，B应该排在后面\n            dateB.setDate(dateB.getDate() + 1);\n        }\n        else if (timeB.hours >= 20 && timeA.hours < 12) {\n            // B是深夜，A是第二天上午，A应该排在后面\n            dateA.setDate(dateA.getDate() + 1);\n        }\n        return dateA.getTime() - dateB.getTime();\n    }\n    /**\n     * 检测并渲染新消息\n     */\n    async detectAndRenderNewMessages(newBearContent) {\n        try {\n            let newlyAddedMessages = [];\n            if (!this.lastBearContent) {\n                console.log('🔍 首次解析Bear内容，检查是否有新的AI回复');\n                // 首次解析：只渲染当前界面中不存在的AI消息\n                const newMessages = this.messageParser.parseBearContent(newBearContent);\n                const existingMessages = this.getExistingMessagesFromInterface();\n                console.log('🔍 [DEBUG] 现有消息指纹集合:', Array.from(existingMessages));\n                console.log('🔍 [DEBUG] 当前聊天ID:', this.currentChat);\n                for (const [chatId, chatData] of await newMessages) {\n                    console.log(`🔍 [DEBUG] 检查聊天 \"${chatId}\" 的消息`);\n                    for (const message of chatData.messages) {\n                        const messageFingerprint = this.generateMessageFingerprint(message);\n                        console.log(`🔍 [DEBUG] 消息指纹: \"${messageFingerprint}\", 发送者: \"${message.sender}\", 内容: \"${message.content.substring(0, 30)}...\"`);\n                        // 只添加非用户消息（AI回复的消息）且不在当前界面中的消息\n                        if (message.sender !== '{{user}}' && message.sender !== 'user') {\n                            console.log(`🔍 [DEBUG] 这是AI消息，检查是否已存在`);\n                            if (!existingMessages.has(messageFingerprint)) {\n                                console.log(`🔍 [DEBUG] ✅ 发现新AI消息，添加到渲染队列`);\n                                newlyAddedMessages.push(message);\n                            }\n                            else {\n                                console.log(`🔍 [DEBUG] ❌ AI消息已存在，跳过`);\n                            }\n                        }\n                        else {\n                            console.log(`🔍 [DEBUG] 这是用户消息，跳过`);\n                        }\n                    }\n                }\n            }\n            else {\n                // 非首次解析：进行差异检测\n                console.log('🔍 进行Bear内容差异检测');\n                const oldMessages = this.messageParser.parseBearContent(this.lastBearContent);\n                const newMessages = this.messageParser.parseBearContent(newBearContent);\n                // 找出新增的消息\n                newlyAddedMessages = this.findNewMessages(await oldMessages, await newMessages);\n            }\n            console.log(`🔍 [DEBUG] 最终新消息数量: ${newlyAddedMessages.length}`);\n            if (newlyAddedMessages.length === 0) {\n                console.log('🔍 未发现新消息');\n                return;\n            }\n            console.log(`🆕 发现 ${newlyAddedMessages.length} 条新消息`);\n            // 新消息详情已记录\n            // 渲染当前聊天的新消息\n            await this.renderNewMessagesForCurrentChat(newlyAddedMessages);\n        }\n        catch (error) {\n            console.error('❌ 检测和渲染新消息失败:', error);\n            // 不抛出错误，避免影响主流程\n        }\n    }\n    /**\n     * 找出新增的消息\n     */\n    findNewMessages(oldMessages, newMessages) {\n        const newlyAdded = [];\n        const oldFingerprints = new Set();\n        // 收集旧消息的指纹\n        for (const [, chatData] of oldMessages) {\n            for (const message of chatData.messages) {\n                const fingerprint = this.generateMessageFingerprint(message);\n                oldFingerprints.add(fingerprint);\n            }\n        }\n        // 找出新消息（主要关注AI回复的消息，排除用户消息）\n        for (const [, chatData] of newMessages) {\n            for (const message of chatData.messages) {\n                const fingerprint = this.generateMessageFingerprint(message);\n                if (!oldFingerprints.has(fingerprint)) {\n                    // 只添加非用户消息（AI回复的消息）\n                    if (message.sender !== '{{user}}' && message.sender !== 'user') {\n                        newlyAdded.push(message);\n                    }\n                }\n            }\n        }\n        return newlyAdded;\n    }\n    /**\n     * 生成消息指纹\n     */\n    generateMessageFingerprint(message) {\n        const fingerprint = `${message.chatId}_${message.sender}_${message.content}_${message.timestamp}`;\n        // 生成消息指纹\n        return fingerprint;\n    }\n    /**\n     * 渲染当前聊天的新消息（带打字动画）\n     */\n    async renderNewMessagesForCurrentChat(newMessages) {\n        // 检查当前是否在聊天界面\n        console.log(`🔍 界面状态检查: currentInterface = \"${this.currentInterface}\"`);\n        // 如果当前不在聊天界面，跳过消息渲染\n        if (this.currentInterface !== 'chat') {\n            console.log('🔍 当前不在聊天界面，跳过消息渲染');\n            return;\n        }\n        // 如果已经有渲染在进行，先中断之前的渲染\n        if (this.isRenderingMessages) {\n            console.log('🛑 检测到新的渲染请求，中断之前的渲染');\n            this.shouldStopRendering = true;\n            // 等待之前的渲染完全停止\n            while (this.isRenderingMessages) {\n                await this.delay(50);\n            }\n        }\n        // 过滤出当前聊天的消息（考虑群聊ID匹配）\n        console.log(`🔍 当前聊天ID: \"${this.currentChat}\"`);\n        console.log(`🔍 新消息的聊天ID:`, newMessages.map(m => `\"${m.chatId}\"`));\n        const currentChatMessages = newMessages.filter(message => {\n            // 直接匹配\n            if (message.chatId === this.currentChat) {\n                console.log(`✅ 直接匹配: ${message.chatId} === ${this.currentChat}`);\n                return true;\n            }\n            // 标准化匹配（处理大小写和空格差异）\n            const normalizedMessageChatId = this.normalizeChatIdForComparison(message.chatId);\n            const normalizedCurrentChat = this.normalizeChatIdForComparison(this.currentChat);\n            if (normalizedMessageChatId === normalizedCurrentChat) {\n                console.log(`✅ 标准化匹配: \"${message.chatId}\" -> \"${normalizedMessageChatId}\" === \"${this.currentChat}\" -> \"${normalizedCurrentChat}\"`);\n                return true;\n            }\n            // 群聊ID匹配（处理可能的ID格式差异）\n            if (this.currentChat.startsWith('群聊')) {\n                // 当前是群聊，检查消息是否属于同一个群\n                const isMatch = normalizedCurrentChat === normalizedMessageChatId;\n                console.log(`🔍 群聊匹配检查: \"${normalizedCurrentChat}\" === \"${normalizedMessageChatId}\" = ${isMatch}`);\n                return isMatch;\n            }\n            console.log(`❌ 不匹配: ${message.chatId} (${normalizedMessageChatId}) !== ${this.currentChat} (${normalizedCurrentChat})`);\n            return false;\n        });\n        console.log(`🔍 过滤后的当前聊天消息数量: ${currentChatMessages.length}`);\n        if (currentChatMessages.length === 0) {\n            console.log('🔍 当前聊天没有新消息');\n            return;\n        }\n        console.log(`🎨 开始渲染 ${currentChatMessages.length} 条当前聊天的新消息（带打字动画）`);\n        // 逐条显示消息（带打字动画）\n        await this.showMessagesSequentially(currentChatMessages);\n        console.log('✅ 新消息渲染完成');\n        // 渲染完成后触发聊天迁移检查\n        console.log('🎨 [主应用] 新消息渲染完成，准备触发聊天迁移检查');\n        await this.triggerChatMigrationCheck();\n    }\n    /**\n     * 逐条显示消息（带打字动画）\n     */\n    async showMessagesSequentially(messages) {\n        // 设置渲染状态\n        this.isRenderingMessages = true;\n        this.shouldStopRendering = false;\n        console.log(`🎨 开始渲染 ${messages.length} 条消息`);\n        // 检查是否为\"全部\"模式（直接显示所有消息）\n        if (this.typingSpeedManager.shouldShowAll()) {\n            console.log('⚡ 全部模式：直接显示所有消息');\n            try {\n                // 直接渲染所有消息，不带动画\n                for (const message of messages) {\n                    this.addNewMessageToInterface(message);\n                }\n                // 播放音效\n                this.soundManager.playSound('newMessage');\n            }\n            finally {\n                // 重置渲染状态\n                this.isRenderingMessages = false;\n                this.shouldStopRendering = false;\n            }\n            return;\n        }\n        try {\n            for (let i = 0; i < messages.length; i++) {\n                // 检查是否需要中断渲染\n                if (this.shouldStopRendering) {\n                    console.log(`🛑 渲染被中断，已渲染 ${i}/${messages.length} 条消息`);\n                    break;\n                }\n                const message = messages[i];\n                try {\n                    // 渲染消息到界面\n                    this.addNewMessageToInterface(message);\n                    // 获取刚添加的消息元素\n                    const messageElements = document.querySelectorAll('.message');\n                    const lastMessageElement = messageElements[messageElements.length - 1];\n                    if (lastMessageElement) {\n                        // 开始打字动画\n                        await this.typeMessage(lastMessageElement, message);\n                    }\n                    // 检查是否需要中断渲染（在打字动画后再次检查）\n                    if (this.shouldStopRendering) {\n                        console.log(`🛑 渲染被中断，已渲染 ${i + 1}/${messages.length} 条消息`);\n                        break;\n                    }\n                    // 消息间隔时间\n                    if (i < messages.length - 1) {\n                        await this.delay(this.getRandomDelay());\n                    }\n                }\n                catch (error) {\n                    console.error('❌ 渲染消息失败:', message, error);\n                }\n            }\n        }\n        finally {\n            // 重置渲染状态\n            this.isRenderingMessages = false;\n            this.shouldStopRendering = false;\n            console.log('🎨 消息渲染流程结束');\n        }\n    }\n    /**\n     * 打字动画效果\n     */\n    async typeMessage(messageElement, message) {\n        const messageContent = messageElement.querySelector('.message-content');\n        if (!messageContent)\n            return;\n        const originalContent = messageContent.innerHTML;\n        // 检查是否需要中断\n        if (this.shouldStopRendering) {\n            // 如果需要中断，直接显示完整内容\n            messageContent.innerHTML = originalContent;\n            return;\n        }\n        // 检查是否跳过打字动画（瞬间模式）\n        if (this.typingSpeedManager.shouldSkipTyping()) {\n            // 瞬间模式：直接显示完整内容\n            messageContent.innerHTML = originalContent;\n            this.soundManager.playSound('newMessage');\n            return;\n        }\n        // 检查是否包含特殊内容\n        if (this.hasSpecialContent(originalContent)) {\n            // 如果包含特殊内容，直接显示原始HTML\n            messageContent.innerHTML = originalContent;\n            this.soundManager.playSound('newMessage');\n            return;\n        }\n        // 创建打字指示器\n        const typingIndicator = document.createElement('div');\n        typingIndicator.className = 'typing-indicator';\n        typingIndicator.innerHTML =\n            '<span class=\"typing-dot\"></span><span class=\"typing-dot\"></span><span class=\"typing-dot\"></span>';\n        messageContent.textContent = '';\n        messageContent.appendChild(typingIndicator);\n        // 随机打字时间\n        const typingTime = this.getRandomTypingTime();\n        return new Promise(resolve => {\n            const typingTimeout = setTimeout(() => {\n                // 再次检查是否需要中断\n                if (this.shouldStopRendering) {\n                    typingIndicator.remove();\n                    messageContent.innerHTML = originalContent;\n                    resolve();\n                    return;\n                }\n                // 渐变过渡效果\n                typingIndicator.style.transition = 'opacity 0.5s';\n                typingIndicator.style.opacity = '0';\n                const fadeTimeout = setTimeout(() => {\n                    // 再次检查是否需要中断\n                    if (this.shouldStopRendering) {\n                        typingIndicator.remove();\n                        messageContent.innerHTML = originalContent;\n                        resolve();\n                        return;\n                    }\n                    typingIndicator.remove();\n                    messageContent.textContent = '';\n                    // 开始逐字显示\n                    this.typeCharacters(messageContent, originalContent, () => {\n                        resolve();\n                    });\n                }, 500);\n                // 如果需要中断，清除延时器\n                if (this.shouldStopRendering) {\n                    clearTimeout(fadeTimeout);\n                    typingIndicator.remove();\n                    messageContent.innerHTML = originalContent;\n                    resolve();\n                }\n            }, typingTime);\n            // 如果需要中断，清除延时器\n            if (this.shouldStopRendering) {\n                clearTimeout(typingTimeout);\n                typingIndicator.remove();\n                messageContent.innerHTML = originalContent;\n                resolve();\n            }\n        });\n    }\n    /**\n     * 逐字显示文本\n     */\n    typeCharacters(messageContent, originalContent, onComplete) {\n        let charIndex = 0;\n        let soundPlayed = false;\n        let typingTimeoutId = null;\n        // 如果内容包含HTML标签，直接显示\n        if (this.hasSpecialContent(originalContent)) {\n            messageContent.innerHTML = originalContent;\n            if (!soundPlayed) {\n                this.soundManager.playSound('newMessage');\n            }\n            onComplete();\n            return;\n        }\n        // 提取纯文本内容进行打字效果\n        const tempDiv = document.createElement('div');\n        tempDiv.innerHTML = originalContent;\n        const textContent = tempDiv.textContent || tempDiv.innerText || originalContent;\n        const typeChar = () => {\n            // 检查是否需要中断\n            if (this.shouldStopRendering) {\n                // 如果需要中断，直接显示完整内容\n                messageContent.innerHTML = originalContent;\n                if (typingTimeoutId) {\n                    clearTimeout(typingTimeoutId);\n                }\n                onComplete();\n                return;\n            }\n            if (charIndex === 0 && !soundPlayed) {\n                // 在开始显示文字时播放新消息音效\n                this.soundManager.playSound('newMessage');\n                soundPlayed = true;\n            }\n            if (charIndex < textContent.length) {\n                messageContent.textContent += textContent.charAt(charIndex);\n                charIndex++;\n                typingTimeoutId = setTimeout(typeChar, 50); // 每个字符间隔50ms\n            }\n            else {\n                // 打字完成后，如果原内容有HTML，则替换为完整的HTML内容\n                if (originalContent !== textContent) {\n                    messageContent.innerHTML = originalContent;\n                }\n                onComplete();\n            }\n        };\n        typeChar();\n    }\n    /**\n     * 检查是否包含特殊内容\n     */\n    hasSpecialContent(content) {\n        return (content.includes('random-image-container') ||\n            content.includes('typing-indicator') ||\n            content.includes('<div') ||\n            content.includes('<img') ||\n            content.includes('<audio') ||\n            content.includes('<video') ||\n            content.includes('sticker-container') ||\n            content.includes('transfer-container'));\n    }\n    /**\n     * 获取随机打字时间（根据用户设置）\n     */\n    getRandomTypingTime() {\n        return this.typingSpeedManager.getTypingTime();\n    }\n    /**\n     * 获取随机消息间隔时间（根据用户设置）\n     */\n    getRandomDelay() {\n        return this.typingSpeedManager.getMessageDelay();\n    }\n    /**\n     * 获取当前界面中已存在的消息指纹\n     */\n    getExistingMessagesFromInterface() {\n        const existingMessages = new Set();\n        // 检查迁移功能是否启用\n        const chatMigrationManager = _modules_chatMigration_ChatMigrationManager__WEBPACK_IMPORTED_MODULE_5__.ChatMigrationManager.getInstance();\n        const isMigrationEnabled = chatMigrationManager.isFeatureEnabled();\n        if (isMigrationEnabled) {\n            // 迁移功能启用时：从内存中的chatData获取（包含历史消息）\n            const currentChatData = this.chatData.get(this.currentChat);\n            if (currentChatData) {\n                console.log(`🔍 找到当前聊天数据，包含 ${currentChatData.messages.length} 条消息`);\n                for (const message of currentChatData.messages) {\n                    const fingerprint = this.generateMessageFingerprint(message);\n                    existingMessages.add(fingerprint);\n                }\n            }\n        }\n        else {\n            // 迁移功能禁用时：不使用历史消息，让系统认为没有现有消息\n            console.log('🔍 迁移功能禁用，不使用历史消息');\n            // existingMessages 保持为空集合，这样系统就不会尝试合并任何历史消息\n        }\n        // 也检查发送队列中的消息（用户刚发送但还未被AI处理的消息）\n        for (const message of this.sendQueue) {\n            if (message.chatId === this.currentChat) {\n                const fingerprint = this.generateMessageFingerprint(message);\n                existingMessages.add(fingerprint);\n            }\n        }\n        console.log(`🔍 收集到 ${existingMessages.size} 个现有消息指纹`);\n        return existingMessages;\n    }\n    /**\n     * 延迟工具方法\n     */\n    delay(ms) {\n        return new Promise(resolve => setTimeout(resolve, ms));\n    }\n    /**\n     * 使用setChatMessages更新当前楼层的普通内容\n     */\n    async updateCurrentMessageWithContent(content) {\n        try {\n            // 获取最新楼层的消息\n            const lastMessage = getChatMessages(-1)[0];\n            if (!lastMessage) {\n                console.error('❌ 无法获取最新楼层消息');\n                return;\n            }\n            const lastMessageId = lastMessage.message_id;\n            console.log('📝 当前楼层ID:', lastMessageId);\n            // 使用setChatMessages替换当前楼层内容\n            await setChatMessages([\n                {\n                    message_id: lastMessageId,\n                    message: content,\n                },\n            ], { refresh: 'none' });\n            console.log('✅ 已使用setChatMessages更新当前楼层的普通内容');\n        }\n        catch (error) {\n            console.error('❌ 更新普通内容失败:', error);\n            throw error;\n        }\n    }\n    /**\n     * 使用/sendas命令把AI回复输出到新楼层\n     * 新的执行顺序：先发送消息，再清空队列\n     */\n    async sendAIResponseToNewFloor(content, originalMessage) {\n        try {\n            // 获取当前角色名称，如果没有则使用默认名称\n            const characterName = originalMessage.sender || '助手';\n            // 使用/sendas命令发送AI回复到新楼层\n            const sendasCommand = `/sendas name=\"${characterName}\" ${content}`;\n            console.log('📤 使用/sendas发送AI回复到新楼层');\n            // 执行/sendas命令\n            triggerSlash(sendasCommand);\n            console.log('✅ 已使用/sendas发送AI回复到新楼层');\n            // 清空发送队列\n            console.log('🧹 清空发送队列...');\n            this.clearSendQueue();\n            console.log('✅ 非Bear格式AI回复处理完成');\n        }\n        catch (error) {\n            console.error('❌ 使用/sendas发送AI回复失败:', error);\n            // 如果/sendas失败，回退到替换当前楼层的方式\n            console.log('🔄 回退到替换当前楼层的方式...');\n            await this.updateCurrentMessageWithContent(content);\n            // 回退情况下也要清空队列\n            console.log('🧹 清空发送队列（回退情况）...');\n            this.clearSendQueue();\n        }\n    }\n    /**\n     * 显示打字动画\n     */\n    async showTypingIndicator() {\n        const messagesContainer = document.getElementById('chatMessages');\n        if (!messagesContainer) {\n            return null;\n        }\n        // 获取AI头像\n        let aiAvatar = 'https://files.catbox.moe/u8ccy5.jpg'; // 默认头像\n        try {\n            const currentChatData = this.chatData.get(this.currentChat);\n            const chatName = currentChatData?.chatName || this.currentChat;\n            if (this.currentChat && this.currentChat.startsWith('群聊')) {\n                // 群聊情况，获取群聊头像\n                if (currentChatData && currentChatData.avatar) {\n                    aiAvatar = currentChatData.avatar;\n                }\n                else {\n                    const { GroupChatStorage } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./modules/groupChat/storage */ \"./src/多云熊/备份/给rovo的/modules/groupChat/storage.ts\"));\n                    aiAvatar = GroupChatStorage.getDefaultGroupAvatar(this.currentChat);\n                }\n            }\n            else if (this.currentChat && !this.currentChat.startsWith('群聊')) {\n                // 单聊情况，从原始聊天名称提取角色名（保持大小写）\n                let characterName = chatName.replace(/^和|的聊天$/g, '');\n                if (!characterName || characterName === chatName) {\n                    characterName = chatName;\n                }\n                if (characterName) {\n                    // 方法1：通过消息解析器获取头像\n                    const avatarFromParser = this.messageParser.getDefaultAvatar(characterName);\n                    if (avatarFromParser && avatarFromParser !== 'https://files.catbox.moe/u8ccy5.jpg') {\n                        aiAvatar = avatarFromParser;\n                    }\n                    else {\n                        // 方法2：直接从SillyTavern获取角色头像\n                        try {\n                            if (typeof getCharAvatarPath === 'function') {\n                                const directAvatar = getCharAvatarPath(characterName, true);\n                                if (directAvatar) {\n                                    aiAvatar = directAvatar;\n                                }\n                            }\n                        }\n                        catch (directError) {\n                            // 静默处理角色头像获取失败\n                        }\n                    }\n                }\n            }\n        }\n        catch (error) {\n            // 静默处理头像获取失败，使用默认头像\n        }\n        // 创建打字动画消息\n        const typingMessage = document.createElement('div');\n        typingMessage.className = 'message received typing-message';\n        typingMessage.innerHTML = `\n      <img src=\"${aiAvatar}\" class=\"avatar\" alt=\"角色头像\" />\n      <div class=\"message-wrapper\">\n        <div class=\"message-content\">\n          <div class=\"typing-indicator\">\n            <span class=\"typing-dot\"></span>\n            <span class=\"typing-dot\"></span>\n            <span class=\"typing-dot\"></span>\n          </div>\n        </div>\n      </div>\n    `;\n        // 添加头像加载失败的处理\n        const avatarImg = typingMessage.querySelector('.avatar');\n        if (avatarImg) {\n            avatarImg.onerror = () => {\n                avatarImg.src = 'https://files.catbox.moe/u8ccy5.jpg';\n            };\n        }\n        // 打字动画样式已在SCSS中定义，无需动态添加\n        // 添加到消息容器\n        messagesContainer.appendChild(typingMessage);\n        // 滚动到底部\n        messagesContainer.scrollTop = messagesContainer.scrollHeight;\n        return typingMessage;\n    }\n    /**\n     * 隐藏打字动画\n     */\n    hideTypingIndicator(typingMessage) {\n        if (typingMessage && typingMessage.parentNode) {\n            typingMessage.parentNode.removeChild(typingMessage);\n        }\n    }\n    /**\n     * 提取最后一对 <bear></bear> 中的内容\n     * @param text 包含Bear标签的文本\n     * @returns Bear标签内的内容，如果没有找到则返回null\n     */\n    extractLastBearContent(text) {\n        if (!text) {\n            return null;\n        }\n        // 从后往前查找最后一个 </bear> 标签\n        const lastBearEndIndex = text.lastIndexOf('</bear>');\n        if (lastBearEndIndex === -1) {\n            console.log('❌ 未找到 </bear> 标签');\n            return null;\n        }\n        // 从最后一个 </bear> 位置往前查找对应的 <bear> 标签\n        const textBeforeEnd = text.substring(0, lastBearEndIndex);\n        const lastBearStartIndex = textBeforeEnd.lastIndexOf('<bear>');\n        if (lastBearStartIndex === -1) {\n            console.log('❌ 未找到对应的 <bear> 标签');\n            return null;\n        }\n        // 提取最后一对 bear 标签之间的内容\n        const bearContent = text.substring(lastBearStartIndex + 6, lastBearEndIndex);\n        console.log(`🐻 找到最后一对Bear标签`);\n        // 检查是否包含聊天格式的内容\n        if (this.hasValidChatContent(bearContent)) {\n            console.log('✅ Bear标签包含有效聊天内容');\n            return bearContent;\n        }\n        else {\n            console.log('❌ Bear标签不包含有效聊天内容');\n            return null;\n        }\n    }\n    /**\n     * 检查Bear内容是否包含有效的聊天内容特征\n     * @param content Bear标签内的内容\n     * @returns 是否包含聊天内容\n     */\n    hasValidChatContent(content) {\n        if (!content)\n            return false;\n        // 方案A：宽松放行\n        // 只要包含任一聊天标记或动态容器标记，即认为是有效 Bear：\n        // - 聊天块：[和…的聊天] 或 [群聊…]…[/群聊…]\n        // - 消息标记：[S_] 或 [G_]\n        // - 动态容器：[动态]…[/动态]\n        const hasPrivateChat = content.includes('[和') && content.includes('的聊天]');\n        const hasGroupChat = content.includes('[群聊') && content.includes('[/群聊');\n        const hasPrivateMessage = content.includes('[S_');\n        const hasGroupMessage = content.includes('[G_');\n        const hasDynamics = /\\[动态\\][\\s\\S]*?\\[\\/动态\\]/.test(content);\n        const ok = hasPrivateChat || hasGroupChat || hasPrivateMessage || hasGroupMessage || hasDynamics;\n        if (!ok) {\n            console.log('🚫 未找到有效聊天或动态标记');\n        }\n        else {\n            console.log('✅ Bear内容通过验证（方案A：存在聊天/动态标记即有效）');\n        }\n        return ok;\n    }\n    /**\n     * 清理AI内部思考标签\n     * 移除 <analyze>、<think>、<thinking> 等AI内部思考过程的标签及其内容\n     *\n     * @param text 原始AI回复文本\n     * @returns 清理后的文本\n     */\n    cleanAIInternalTags(text) {\n        if (!text)\n            return text;\n        let cleanedText = text;\n        // 定义需要移除的AI内部思考标签\n        const internalTags = ['analyze', 'think', 'thinking', 'reasoning', 'internal', 'thought', 'process'];\n        // 移除每种标签及其内容\n        for (const tag of internalTags) {\n            // 匹配开始和结束标签，包括其中的所有内容\n            const regex = new RegExp(`<${tag}[^>]*>[\\\\s\\\\S]*?<\\\\/${tag}>`, 'gi');\n            cleanedText = cleanedText.replace(regex, '');\n            // 也处理自闭合标签\n            const selfClosingRegex = new RegExp(`<${tag}[^>]*\\\\/>`, 'gi');\n            cleanedText = cleanedText.replace(selfClosingRegex, '');\n        }\n        // 清理多余的空白字符\n        cleanedText = cleanedText.replace(/\\n\\s*\\n\\s*\\n/g, '\\n\\n'); // 移除多余的空行\n        cleanedText = cleanedText.trim();\n        // 如果清理后发现有内容被移除，记录日志\n        if (cleanedText.length !== text.length) {\n            console.log(`🧹 已移除 ${text.length - cleanedText.length} 个字符的AI内部思考内容`);\n        }\n        return cleanedText;\n    }\n    /**\n     * 显示错误提示\n     */\n    showErrorToast(message) {\n        // 使用 toastr 显示错误提示\n        if (typeof toastr !== 'undefined') {\n            toastr.error(message, '发送失败');\n        }\n        else {\n            // 备用方案：使用 alert\n            alert(`发送失败: ${message}`);\n        }\n    }\n    // 消息回复功能已直接集成到 handleAIResponse 方法中，不需要单独初始化\n    /**\n     * 显示聊天列表界面\n     */\n    showChatList() {\n        // 中断正在进行的消息渲染\n        if (this.isRenderingMessages) {\n            console.log('🛑 检测到界面切换，中断消息渲染');\n            console.log('🛑 当前渲染状态:', {\n                isRenderingMessages: this.isRenderingMessages,\n                shouldStopRendering: this.shouldStopRendering,\n            });\n            this.shouldStopRendering = true;\n        }\n        // 隐藏当前聊天界面\n        this.hideChatInterface();\n        // 如果有当前聊天，标记为已读（用户刚才在查看这个聊天）\n        if (this.currentChat && this.chatListManager) {\n            console.log('📖 返回聊天列表时标记当前聊天为已读:', this.currentChat);\n            this.chatListManager.getUnreadMessageManager().markAsRead(this.currentChat, this.chatData);\n        }\n        // 显示聊天列表界面\n        this.chatListManager.showChatListInterface(this.chatData);\n        // 更新当前界面状态\n        this.currentInterface = 'list';\n    }\n    /**\n     * 隐藏聊天界面\n     */\n    hideChatInterface() {\n        const chatInterface = document.getElementById('chatInterface');\n        if (chatInterface) {\n            chatInterface.style.display = 'none';\n        }\n        // 移除滚动监听，防止内存泄漏和重复绑定\n        this.detachTopScrollListener();\n        // 销毁聊天状态栏\n        this.destroyChatStatusBar();\n    }\n    /**\n     * 初始化聊天列表事件监听\n     */\n    initializeChatListEvents() {\n        // 监听聊天列表项点击事件\n        document.addEventListener('chatListItemClick', (e) => {\n            const customEvent = e;\n            const { chatId } = customEvent.detail;\n            this.switchToChat(chatId);\n        });\n        // 监听创建新聊天事件\n        document.addEventListener('createNewChat', (e) => {\n            const customEvent = e;\n            const { type, contactIds } = customEvent.detail;\n            this.handleCreateNewChat(type, contactIds);\n        });\n        // 监听联系人更新事件\n        document.addEventListener('contactUpdated', (e) => {\n            const customEvent = e;\n            const { oldName, newName, newAvatar } = customEvent.detail;\n            this.handleContactUpdated(oldName, newName, newAvatar);\n        });\n        // 监听刷新聊天列表事件\n        document.addEventListener('refreshChatList', () => {\n            this.handleRefreshChatList();\n        });\n        // 监听群聊创建事件\n        document.addEventListener('chatListChanged', (e) => {\n            const customEvent = e;\n            if (customEvent.detail?.type === 'groupChatCreated') {\n                console.log('🎉 检测到群聊创建事件，创建群聊消息标记');\n                this.handleGroupChatCreated(customEvent.detail?.groupChatData);\n            }\n        });\n        // 监听删除聊天事件\n        document.addEventListener('deleteChatRequest', (e) => {\n            const customEvent = e;\n            const { chatId } = customEvent.detail;\n            console.log('🗑️ 检测到删除聊天请求:', chatId);\n            this.handleDeleteChatRequest(chatId);\n        });\n        // 监听头像缓存清除事件\n        document.addEventListener('avatarCacheCleared', (e) => {\n            const customEvent = e;\n            console.log('🔄 [BearChatManager] 检测到头像缓存清除事件，刷新聊天界面:', customEvent.detail);\n            this.handleAvatarCacheCleared(customEvent.detail);\n        });\n        // 监听世界书头像缓存清除事件\n        document.addEventListener('worldbookAvatarCacheCleared', (e) => {\n            const customEvent = e;\n            console.log('🔄 [BearChatManager] 收到世界书头像缓存清除事件, detail: ', customEvent.detail);\n            this.handleWorldbookAvatarCacheCleared(customEvent.detail);\n        });\n    }\n    /**\n     * 初始化我的页面模块\n     */\n    async initializeProfileModule() {\n        try {\n            this.profileInterface = await (0,_modules_profile__WEBPACK_IMPORTED_MODULE_2__.initializeProfileModule)();\n            if (this.profileInterface) {\n                this.settingsModal = this.profileInterface.getSettingsModal();\n            }\n            console.log('✅ 我的页面模块初始化成功');\n        }\n        catch (error) {\n            console.error('❌ 我的页面模块初始化失败:', error);\n        }\n    }\n    /**\n     * 初始化扩展功能模块\n     */\n    initializeExtensionsModule() {\n        try {\n            (0,_modules_extensions__WEBPACK_IMPORTED_MODULE_6__.initializeExtensions)();\n            console.log('✅ 扩展功能模块初始化成功');\n        }\n        catch (error) {\n            console.error('❌ 扩展功能模块初始化失败:', error);\n            // 扩展功能失败不应该阻止应用启动\n        }\n    }\n    /**\n     * 初始化聊天迁移管理器\n     */\n    initializeChatMigrationManager() {\n        try {\n            const chatMigrationManager = _modules_chatMigration_ChatMigrationManager__WEBPACK_IMPORTED_MODULE_5__.ChatMigrationManager.getInstance();\n            chatMigrationManager.initialize();\n            console.log('✅ 聊天迁移管理器初始化成功');\n        }\n        catch (error) {\n            console.error('❌ 聊天迁移管理器初始化失败:', error);\n        }\n    }\n    /**\n     * 触发聊天迁移检查\n     */\n    async triggerChatMigrationCheck() {\n        console.log('🔔 [主应用] 触发聊天迁移检查');\n        try {\n            const chatMigrationManager = _modules_chatMigration_ChatMigrationManager__WEBPACK_IMPORTED_MODULE_5__.ChatMigrationManager.getInstance();\n            console.log('📋 [主应用] 获取到 ChatMigrationManager 实例');\n            await chatMigrationManager.checkAndMigrate();\n            console.log('✅ [主应用] 聊天迁移检查完成');\n        }\n        catch (error) {\n            console.error('❌ [主应用] 聊天迁移检查失败:', error);\n        }\n    }\n    /**\n     * 初始化聊天壁纸管理器\n     */\n    async initializeChatWallpaperManager() {\n        try {\n            this.chatWallpaperManager = _modules_chat_ChatWallpaperManager__WEBPACK_IMPORTED_MODULE_4__.ChatWallpaperManager.getInstance();\n            console.log('✅ 聊天壁纸管理器初始化成功');\n        }\n        catch (error) {\n            console.error('❌ 聊天壁纸管理器初始化失败:', error);\n        }\n    }\n    /**\n     * 切换到指定聊天\n     */\n    switchToChat(chatId) {\n        console.log(`🔄 尝试切换到聊天: ${chatId}`);\n        // 隐藏聊天列表\n        this.chatListManager.hideChatListInterface();\n        // 检查是否是群聊\n        if (chatId.startsWith('群聊')) {\n            this.switchToGroupChat(chatId);\n            return;\n        }\n        // 首先尝试直接查找\n        let currentChatData = this.chatData.get(chatId);\n        let finalChatId = chatId;\n        // 如果直接查找失败，尝试不同的ID格式\n        if (!currentChatData) {\n            console.log(`🔍 直接查找失败，尝试其他格式...`);\n            // 尝试添加群聊前缀（可能是群聊但没有前缀）\n            const groupChatId = this.messageParser.generateGroupChatId(chatId);\n            currentChatData = this.chatData.get(groupChatId);\n            if (currentChatData) {\n                console.log(`✅ 找到群聊数据，使用ID: ${groupChatId}`);\n                this.switchToGroupChat(groupChatId);\n                return;\n            }\n            // 尝试大小写不敏感匹配\n            console.log(`🔍 尝试大小写不敏感匹配...`);\n            const chatIdLower = chatId.toLowerCase();\n            for (const [existingChatId, chatData] of this.chatData.entries()) {\n                if (existingChatId.toLowerCase() === chatIdLower) {\n                    console.log(`✅ 找到大小写匹配的聊天: ${existingChatId} (原查找: ${chatId})`);\n                    currentChatData = chatData;\n                    finalChatId = existingChatId; // 使用实际存储的ID\n                    break;\n                }\n            }\n        }\n        if (!currentChatData) {\n            console.error('❌ 找不到聊天数据:', chatId);\n            console.log('🔍 可用的聊天数据:', Array.from(this.chatData.keys()));\n            return;\n        }\n        // 显示聊天界面\n        this.detachTopScrollListener();\n        this.showChatInterface();\n        // 切换到指定聊天\n        this.currentChat = finalChatId;\n        // 进入聊天时重置分页可见条数（不超过总消息数）\n        {\n            const total = this.chatData.get(finalChatId)?.messages.length ?? this.INITIAL_VISIBLE_COUNT;\n            this.visibleCounts.set(finalChatId, Math.min(this.INITIAL_VISIBLE_COUNT, total));\n        }\n        this.renderCurrentChat();\n        // 绑定顶部上滑加载更多监听\n        this.attachTopScrollListener();\n        // 标记该聊天为已读\n        if (this.chatListManager) {\n            console.log('📖 标记聊天为已读:', finalChatId);\n            this.chatListManager.getUnreadMessageManager().markAsRead(finalChatId, this.chatData);\n        }\n        // 通知壁纸管理器聊天切换\n        if (this.chatWallpaperManager) {\n            console.log('[BearChatManager] 通知壁纸管理器聊天切换:', finalChatId);\n            this.chatWallpaperManager.setCurrentChatId(finalChatId);\n        }\n        // 更新界面状态\n        this.currentInterface = 'chat';\n    }\n    /**\n     * 切换到群聊\n     */\n    switchToGroupChat(groupChatId) {\n        console.log(`🔄 切换到群聊: ${groupChatId}`);\n        // 首先尝试从已解析的数据中查找\n        const groupChatData = this.chatData.get(groupChatId);\n        // 不再从localStorage获取群聊数据，统一使用内存中的chatData\n        if (!groupChatData) {\n            console.error('❌ 群聊数据不存在:', groupChatId);\n            console.log('🔍 可用的聊天数据:', Array.from(this.chatData.keys()));\n            this.showToast('群聊不存在', 'error');\n            return;\n        }\n        // 显示聊天界面\n        this.detachTopScrollListener();\n        this.showChatInterface();\n        // 切换到群聊\n        this.currentChat = groupChatId;\n        // 进入群聊时重置分页可见条数（不超过总数）\n        {\n            const total = this.chatData.get(groupChatId)?.messages.length ?? this.INITIAL_VISIBLE_COUNT;\n            this.visibleCounts.set(groupChatId, Math.min(this.INITIAL_VISIBLE_COUNT, total));\n        }\n        this.renderCurrentChat();\n        // 绑定顶部上滑加载更多监听\n        this.attachTopScrollListener();\n        // 标记该群聊为已读\n        if (this.chatListManager) {\n            console.log('📖 标记群聊为已读:', groupChatId);\n            this.chatListManager.getUnreadMessageManager().markAsRead(groupChatId, this.chatData);\n        }\n        // 通知壁纸管理器聊天切换\n        if (this.chatWallpaperManager) {\n            console.log('[BearChatManager] 通知壁纸管理器群聊切换:', groupChatId);\n            this.chatWallpaperManager.setCurrentChatId(groupChatId);\n        }\n        // 更新界面状态\n        this.currentInterface = 'chat';\n        // 进入群聊时自动补齐群聊骨架（同步快速注入）\n        this.ensureGroupSkeletonExists(groupChatId);\n    }\n    // 新增：确保当前楼层存在群聊骨架（进入群聊时调用）\n    ensureGroupSkeletonExists(groupChatId) {\n        try {\n            const groupChatData = this.chatData.get(groupChatId);\n            if (!groupChatData)\n                return;\n            // 判断是否为群聊\n            const isGroup = groupChatData.type === 'group' || groupChatId.startsWith('群聊');\n            if (!isGroup)\n                return;\n            // 获取当前最后一条消息\n            const lastMessage = getChatMessages(-1)?.[0];\n            if (!lastMessage)\n                return;\n            const originalMessage = lastMessage.message || '';\n            // 提取bear标签内的内容\n            const bearMatch = originalMessage.match(/<bear>([\\s\\S]*?)<\\/bear>/) || originalMessage.match(/<bear>([\\s\\S]*?)<\\/bear>/);\n            const bearInner = bearMatch ? bearMatch[1] : '';\n            // 如果已存在对应群聊块则跳过\n            const groupName = groupChatData.chatName;\n            if (!groupName)\n                return;\n            const esc = (s) => s.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n            const groupBlockRegex = new RegExp(`\\\\[群聊${esc(groupName)}\\\\][\\\\s\\\\S]*?\\\\[\\\\/群聊${esc(groupName)}\\\\]`);\n            if (bearInner && groupBlockRegex.test(bearInner)) {\n                return;\n            }\n            // 使用内存中的成员构建仅“头+成员+尾”的骨架\n            const skeletonChat = {\n                chatId: groupChatId,\n                chatName: groupChatData.chatName,\n                avatar: groupChatData.avatar,\n                messages: [],\n                lastMessage: '',\n                type: 'group',\n                members: groupChatData.members || [],\n            };\n            // 复用解析器的构建器生成群聊块（messages为空即得到骨架）\n            const skeletonWithBear = this.messageParser.buildSingleChatBearContent(skeletonChat);\n            const m2 = skeletonWithBear.match(/<bear>([\\s\\S]*?)<\\/bear>/);\n            const skeletonInner = m2 ? m2[1] : skeletonWithBear;\n            // 组合新的bear内容（在末尾追加骨架）\n            const newInner = (bearInner ? (bearInner.endsWith('\\n') ? bearInner : bearInner + '\\n') : '') + skeletonInner;\n            // 写回到当前楼层：仅替换<bear>内部内容\n            const updatedMessage = this.replaceOnlyBearTagContent(originalMessage, newInner);\n            setChatMessages([\n                {\n                    message_id: lastMessage.message_id,\n                    message: updatedMessage,\n                },\n            ], { refresh: 'none' })\n                .then(() => {\n                console.log('✅ 已在当前楼层补齐群聊骨架:', groupChatId);\n            })\n                .catch(err => {\n                console.error('❌ 补齐群聊骨架失败:', err);\n            });\n        }\n        catch (error) {\n            console.error('❌ ensureGroupSkeletonExists 执行失败:', error);\n        }\n    }\n    /**\n     * 显示聊天界面\n     */\n    showChatInterface() {\n        // 重置渲染中断标志，允许新的消息渲染\n        this.shouldStopRendering = false;\n        console.log('🎨 进入聊天界面，重置渲染中断标志');\n        const chatInterface = document.getElementById('chatInterface');\n        if (chatInterface) {\n            chatInterface.style.display = 'flex';\n        }\n        // 初始化聊天状态栏\n        this.initializeChatStatusBar();\n        // 移除这里的触发检查，避免每次进入聊天都触发\n    }\n    /**\n     * 初始化聊天状态栏\n     */\n    initializeChatStatusBar() {\n        const container = document.getElementById('chatStatusBarContainer');\n        if (container) {\n            this.chatStatusBar = _modules_core_StatusBar__WEBPACK_IMPORTED_MODULE_3__.StatusBar.create(container);\n        }\n    }\n    /**\n     * 销毁聊天状态栏\n     */\n    destroyChatStatusBar() {\n        if (this.chatStatusBar) {\n            this.chatStatusBar.destroy();\n            this.chatStatusBar = null;\n        }\n    }\n    /**\n     * 处理创建新聊天\n     */\n    handleCreateNewChat(type, contactIds) {\n        console.log(`创建新聊天: ${type}, 联系人:`, contactIds);\n        // 获取联系人信息\n        const contactManager = this.chatListManager.getContactManager();\n        const contacts = contactIds.map(id => contactManager.getContactById(id)).filter(Boolean);\n        if (contacts.length === 0) {\n            this.showToast('未找到有效联系人', 'error');\n            return;\n        }\n        // 对于单聊，先检查是否已经存在与该联系人的聊天记录\n        if (type === 'single' && contacts.length === 1) {\n            const contactName = contacts[0].name;\n            // 查找是否已存在与该联系人的聊天\n            const existingChatId = this.findExistingChatWithContact(contactName);\n            if (existingChatId) {\n                console.log(`找到已存在的聊天: ${existingChatId}`);\n                this.switchToChat(existingChatId);\n                this.showToast(`已切换到与${contactName}的聊天`, 'info');\n                return;\n            }\n        }\n        // 创建新的聊天数据\n        let chatName;\n        let chatId;\n        if (type === 'single' && contacts.length === 1) {\n            // 单聊处理\n            chatName = `和${contacts[0].name}的聊天`;\n            chatId = chatName; // 直接使用chatName作为chatId，与AI回复格式保持一致\n            // 创建单聊数据\n            const newChatData = {\n                chatId,\n                chatName,\n                avatar: contacts[0].avatar,\n                messages: [],\n                type: 'S',\n            };\n            // 添加到聊天数据中\n            this.chatData.set(chatId, newChatData);\n            // 通过setChatMessages创建单聊块（异步）\n            this.createSingleChatBlock(newChatData)\n                .then(() => {\n                console.log('✅ 单聊块创建成功，切换到新聊天');\n                // 切换到新聊天\n                this.switchToChat(chatId);\n                this.showToast('已创建单聊', 'info');\n            })\n                .catch(error => {\n                console.error('❌ 创建单聊块失败:', error);\n                // 即使创建失败，也切换到聊天，并刷新聊天列表\n                if (this.chatListManager) {\n                    this.chatListManager.refreshChatList(this.chatData);\n                }\n                this.switchToChat(chatId);\n                this.showToast('已创建单聊（本地模式）', 'warning');\n            });\n        }\n        else {\n            // 群聊处理 - 使用专门的群聊管理器\n            console.log('🔄 使用GroupChatManager创建群聊');\n            this.groupChatManager.createGroupChat(contactIds);\n        }\n    }\n    /**\n     * 处理联系人更新事件\n     * @param oldName 原联系人名称\n     * @param newName 新联系人名称\n     * @param newAvatar 新头像URL\n     */\n    handleContactUpdated(oldName, newName, newAvatar) {\n        console.log(`🔄 处理联系人更新: ${oldName} -> ${newName}`);\n        try {\n            // 1. 更新聊天数据中的相关信息\n            this.updateChatDataForContact(oldName, newName, newAvatar);\n            // 2. 如果当前正在显示相关聊天，立即更新界面\n            this.updateCurrentChatInterface(oldName, newName, newAvatar);\n            // 3. 重新渲染当前聊天（如果需要）\n            if (this.currentChat) {\n                const currentChatData = this.chatData.get(this.currentChat);\n                if (currentChatData && this.isChatRelatedToContact(currentChatData, oldName, newName)) {\n                    this.renderCurrentChat();\n                }\n            }\n            console.log(`✅ 联系人更新处理完成: ${oldName} -> ${newName}`);\n        }\n        catch (error) {\n            console.error('❌ 处理联系人更新失败:', error);\n        }\n    }\n    /**\n     * 更新聊天数据中与联系人相关的信息\n     */\n    updateChatDataForContact(oldName, newName, newAvatar) {\n        this.chatData.forEach((chatData, chatId) => {\n            let updated = false;\n            // 更新聊天名称\n            if (chatData.chatName === `和${oldName}的聊天`) {\n                chatData.chatName = `和${newName}的聊天`;\n                updated = true;\n            }\n            // 更新聊天头像（如果是单聊）\n            if (chatData.chatName.includes(newName) && !chatData.chatName.includes('群聊')) {\n                chatData.avatar = newAvatar;\n                updated = true;\n            }\n            // 更新消息中的发送者信息\n            chatData.messages.forEach(message => {\n                if (message.sender === oldName) {\n                    message.sender = newName;\n                    message.avatar = newAvatar;\n                    updated = true;\n                }\n            });\n            if (updated) {\n                console.log(`🔄 更新聊天数据: ${chatId}`);\n            }\n        });\n    }\n    /**\n     * 更新当前聊天界面\n     */\n    updateCurrentChatInterface(oldName, newName, newAvatar) {\n        // 更新聊天标题\n        const chatTitle = document.getElementById('chatTitle');\n        if (chatTitle && chatTitle.textContent === `和${oldName}的聊天`) {\n            chatTitle.textContent = `和${newName}的聊天`;\n        }\n        // header头像保持默认，不跟随联系人头像更新\n        const headerAvatar = document.getElementById('headerAvatar');\n        if (headerAvatar) {\n            headerAvatar.src = 'https://files.catbox.moe/u8ccy5.jpg';\n            headerAvatar.alt = '默认头像';\n        }\n        // 更新所有消息中的头像和发送者名称\n        const messageElements = document.querySelectorAll('.message');\n        messageElements.forEach(messageElement => {\n            const avatar = messageElement.querySelector('.avatar');\n            const senderElement = messageElement.querySelector('.message-sender, .sender-name');\n            if (avatar && (avatar.alt === oldName || avatar.alt === newName)) {\n                avatar.src = newAvatar;\n                avatar.alt = newName;\n            }\n            if (senderElement && senderElement.textContent === oldName) {\n                senderElement.textContent = newName;\n            }\n        });\n    }\n    /**\n     * 检查聊天是否与指定联系人相关\n     */\n    isChatRelatedToContact(chatData, oldName, newName) {\n        // 检查聊天名称\n        if (chatData.chatName === `和${oldName}的聊天` || chatData.chatName === `和${newName}的聊天`) {\n            return true;\n        }\n        // 检查消息中是否有该联系人\n        return chatData.messages.some(message => message.sender === oldName || message.sender === newName);\n    }\n    /**\n     * 创建单聊块并通过setChatMessages保存\n     * @param chatData 单聊数据\n     */\n    async createSingleChatBlock(chatData) {\n        try {\n            console.log('🔄 开始创建单聊块:', chatData.chatName);\n            console.log('📝 单聊数据:', { chatId: chatData.chatId, chatName: chatData.chatName });\n            // 构建单聊块标记（不包含默认消息）\n            const singleChatMarker = `[${chatData.chatName}]\\n[/${chatData.chatName}]`;\n            console.log('📝 构建的单聊标记:', singleChatMarker);\n            // 获取当前消息\n            const currentMessages = getChatMessages(-1) || [];\n            if (currentMessages.length > 0) {\n                // 如果有现有消息，添加到bear标签内\n                const lastMessage = currentMessages[0];\n                const bearContent = lastMessage.message || '';\n                let updatedMessage;\n                // 检查是否已有bear标签\n                if (bearContent.includes('<bear>')) {\n                    // 在bear标签内添加单聊块\n                    const newBearContent = bearContent.replace('</bear>', `${singleChatMarker}\\n</bear>`);\n                    const bearContentOnly = newBearContent.replace('<bear>', '').replace('</bear>', '');\n                    // 只替换bear标签内容，保留标签外的规范要求\n                    updatedMessage = this.replaceOnlyBearTagContent(lastMessage.message || '', bearContentOnly);\n                }\n                else {\n                    // 没有bear标签，直接在原消息前添加bear标签\n                    const originalMessage = lastMessage.message || '';\n                    updatedMessage = `<bear>\\n${singleChatMarker}\\n</bear>${originalMessage}`;\n                }\n                await setChatMessages([\n                    {\n                        message_id: lastMessage.message_id,\n                        message: updatedMessage,\n                    },\n                ], { refresh: 'none' });\n                console.log('✅ 已添加单聊块到现有bear标签内');\n            }\n            else {\n                // 如果没有消息，创建一条包含bear标签的新消息\n                const newMessage = `<bear>\\n${singleChatMarker}\\n</bear>`;\n                await setChatMessages([\n                    {\n                        message_id: Date.now(),\n                        message: newMessage,\n                    },\n                ], { refresh: 'none' });\n                console.log('✅ 已创建新消息包含单聊块');\n            }\n            // 触发消息解析和聊天列表更新\n            await this.initializeFromExistingData();\n            // 验证单聊是否成功创建\n            const createdChat = this.chatData.get(chatData.chatId);\n            if (createdChat && createdChat.messages.length > 0) {\n                console.log('✅ 单聊块创建完成，包含消息:', createdChat.messages.length);\n            }\n            else {\n                console.warn('⚠️ 单聊块创建完成，但未检测到消息');\n            }\n        }\n        catch (error) {\n            console.error('❌ 创建单聊块失败:', error);\n            // 如果创建失败，至少刷新聊天列表显示\n            if (this.chatListManager) {\n                this.chatListManager.refreshChatList(this.chatData);\n                console.log(`✅ 已刷新聊天列表，新增单聊: ${chatData.chatName}`);\n            }\n        }\n    }\n    /**\n     * 处理删除聊天请求\n     * @param chatId 要删除的聊天ID\n     */\n    async handleDeleteChatRequest(chatId) {\n        try {\n            console.log('🗑️ 开始处理删除聊天请求:', chatId);\n            // 从内存中的聊天数据中删除\n            const deletedChatData = this.chatData.get(chatId);\n            if (deletedChatData) {\n                this.chatData.delete(chatId);\n                console.log('✅ 已从内存中删除聊天数据:', chatId);\n            }\n            else {\n                console.warn('⚠️ 未在内存中找到要删除的聊天数据:', chatId);\n            }\n            // 从bear标签中删除对应的聊天块\n            await this.deleteChatBlockFromBear(chatId, deletedChatData);\n            // 如果当前正在查看被删除的聊天，返回聊天列表\n            if (this.currentChat === chatId) {\n                console.log('🔄 当前正在查看被删除的聊天，返回聊天列表');\n                this.showChatList();\n            }\n            console.log('✅ 删除聊天请求处理完成');\n        }\n        catch (error) {\n            console.error('❌ 处理删除聊天请求失败:', error);\n            this.showToast('删除聊天失败', 'error');\n        }\n    }\n    /**\n     * 从bear标签中删除聊天块\n     * @param chatId 聊天ID\n     * @param chatData 聊天数据（可选，用于确定聊天类型）\n     */\n    async deleteChatBlockFromBear(chatId, chatData) {\n        try {\n            console.log('🗑️ 开始从bear标签中删除聊天块:', chatId);\n            // 获取当前消息\n            const currentMessages = getChatMessages(-1) || [];\n            if (currentMessages.length === 0) {\n                console.log('⚠️ 没有找到当前消息，无法删除聊天块');\n                return;\n            }\n            const lastMessage = currentMessages[0];\n            const bearContent = lastMessage.message || '';\n            // 检查是否包含bear标签\n            if (!bearContent.includes('<bear>')) {\n                console.log('⚠️ 当前消息不包含bear标签，无法删除聊天块');\n                return;\n            }\n            // 提取bear标签内容\n            const bearMatch = bearContent.match(/<bear>([\\s\\S]*?)<\\/bear>/);\n            if (!bearMatch) {\n                console.log('⚠️ 无法解析bear标签内容');\n                return;\n            }\n            let bearInnerContent = bearMatch[1];\n            console.log('📝 开始删除聊天块');\n            // 判断是群聊还是单聊，并删除对应的块\n            const isGroupChat = chatData?.type === 'group' || chatId.startsWith('群聊');\n            if (isGroupChat) {\n                // 删除群聊块\n                bearInnerContent = this.removeGroupChatBlock(bearInnerContent, chatId);\n            }\n            else {\n                // 删除单聊块\n                bearInnerContent = this.removeSingleChatBlock(bearInnerContent, chatId);\n            }\n            console.log('📝 聊天块删除完成');\n            // 只替换bear标签内容\n            const updatedMessage = this.replaceOnlyBearTagContent(bearContent, bearInnerContent);\n            // 使用setChatMessages更新消息\n            await setChatMessages([\n                {\n                    message_id: lastMessage.message_id,\n                    message: updatedMessage,\n                },\n            ], { refresh: 'none' });\n            console.log('✅ 已从bear标签中删除聊天块');\n            // 重新解析数据以更新界面\n            await this.initializeFromExistingData();\n        }\n        catch (error) {\n            console.error('❌ 从bear标签中删除聊天块失败:', error);\n            throw error;\n        }\n    }\n    /**\n     * 删除单聊块\n     * @param bearContent bear标签内容\n     * @param chatId 聊天ID\n     * @returns 删除后的bear内容\n     */\n    removeSingleChatBlock(bearContent, chatId) {\n        // 单聊块格式：[聊天名称]...[/聊天名称]\n        // 需要匹配完整的聊天块\n        const chatName = chatId; // 对于单聊，chatId就是聊天名称\n        // 构建正则表达式来匹配整个聊天块\n        const chatBlockRegex = new RegExp(`\\\\[${chatName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\]([\\\\s\\\\S]*?)\\\\[\\\\/${chatName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\]`, 'g');\n        const originalLength = bearContent.length;\n        const updatedContent = bearContent.replace(chatBlockRegex, '');\n        if (updatedContent.length < originalLength) {\n            console.log(`✅ 已删除单聊块: ${chatName}`);\n        }\n        else {\n            console.warn(`⚠️ 未找到要删除的单聊块: ${chatName}`);\n        }\n        return updatedContent;\n    }\n    /**\n     * 删除群聊块\n     * @param bearContent bear标签内容\n     * @param chatId 聊天ID\n     * @returns 删除后的bear内容\n     */\n    removeGroupChatBlock(bearContent, chatId) {\n        // 群聊块格式：[群聊群名][成员：...][消息...][/群聊群名]\n        // 提取群名称\n        const groupName = chatId.replace(/^群聊/, '');\n        // 构建正则表达式来匹配整个群聊块\n        const groupBlockRegex = new RegExp(`\\\\[群聊${groupName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\]\\\\s*\\\\n?\\\\s*\\\\[成员[：:]([^\\\\]]+)\\\\]\\\\s*\\\\n?([\\\\s\\\\S]*?)\\\\n?\\\\s*\\\\[/群聊${groupName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\]`, 'g');\n        const originalLength = bearContent.length;\n        const updatedContent = bearContent.replace(groupBlockRegex, '');\n        if (updatedContent.length < originalLength) {\n            console.log(`✅ 已删除群聊块: ${groupName}`);\n        }\n        else {\n            console.warn(`⚠️ 未找到要删除的群聊块: ${groupName}`);\n        }\n        return updatedContent;\n    }\n    /**\n     * 处理群聊创建完成事件\n     */\n    async handleGroupChatCreated(groupChatData) {\n        try {\n            console.log('🔄 开始处理群聊创建');\n            // 优先使用传递的群聊数据，否则尝试从GroupChatManager获取\n            let latestGroupChat = groupChatData;\n            if (!latestGroupChat) {\n                try {\n                    const groupChats = this.groupChatManager.getAllGroupChats();\n                    if (groupChats.length > 0) {\n                        // 获取最新创建的群聊（按创建时间排序）\n                        latestGroupChat = groupChats.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime())[0];\n                    }\n                }\n                catch (storageError) {\n                    console.warn('⚠️ 从localStorage获取群聊数据失败:', storageError);\n                }\n            }\n            // 如果无法获取群聊数据，创建一个默认的群聊标记\n            if (!latestGroupChat) {\n                console.warn('⚠️ 没有找到群聊数据，创建默认群聊标记');\n                const defaultGroupChatMarker = `[群聊新建群聊]\\n[成员：角色1，角色2，{{user}}]\\n[/群聊新建群聊]`;\n                try {\n                    if (typeof setChatMessages === 'function') {\n                        const defaultMessage = `<bear>\\n${defaultGroupChatMarker}\\n</bear>`;\n                        await setChatMessages([\n                            {\n                                message_id: Date.now(),\n                                message: defaultMessage,\n                            },\n                        ], { refresh: 'none' });\n                        console.log('✅ 已创建默认群聊标记');\n                        // 触发消息解析和聊天列表更新\n                        this.initializeFromExistingData();\n                    }\n                }\n                catch (messageError) {\n                    console.error('❌ 创建默认群聊标记失败:', messageError);\n                }\n                return;\n            }\n            console.log('📊 最新创建的群聊:', latestGroupChat);\n            // 构建群聊标记消息 - 获取真实的角色名称\n            const contactManager = this.chatListManager.getContactManager();\n            const memberNames = latestGroupChat.members\n                .map(memberId => {\n                if (memberId === '{{user}}' || memberId === 'user') {\n                    return '{{user}}';\n                }\n                // 从联系人管理器获取真实名称\n                const contact = contactManager.getContactById(memberId);\n                return contact ? contact.name : memberId;\n            })\n                .join('，');\n            // 格式化群聊标记，三个块之间换行\n            const groupChatMarker = `[群聊${latestGroupChat.name}]\\n[成员：${memberNames}]\\n[/群聊${latestGroupChat.name}]`;\n            console.log('📝 群聊标记消息:', groupChatMarker);\n            // 获取当前消息\n            let currentMessages = [];\n            let lastMessage = null;\n            try {\n                // 尝试获取最后一条消息\n                if (typeof getChatMessages === 'function') {\n                    currentMessages = getChatMessages(-1) || [];\n                    lastMessage = currentMessages.length > 0 ? currentMessages[0] : null;\n                }\n            }\n            catch (error) {\n                console.warn('⚠️ 获取当前消息失败，将创建新消息:', error);\n            }\n            try {\n                if (typeof setChatMessages === 'function') {\n                    if (lastMessage) {\n                        // 检查消息是否包含 <bear> 标签\n                        let updatedContent = lastMessage.message;\n                        if (updatedContent.includes('<bear>') && updatedContent.includes('</bear>')) {\n                            // 如果包含 bear 标签，在 </bear> 前添加群聊标记\n                            const bearEndIndex = updatedContent.lastIndexOf('</bear>');\n                            updatedContent =\n                                updatedContent.slice(0, bearEndIndex) +\n                                    '\\n\\n' +\n                                    groupChatMarker +\n                                    '\\n' +\n                                    updatedContent.slice(bearEndIndex);\n                        }\n                        else {\n                            // 如果不包含 bear 标签，包装在 bear 标签中\n                            updatedContent = `<bear>\\n${updatedContent}\\n\\n${groupChatMarker}\\n</bear>`;\n                        }\n                        await setChatMessages([\n                            {\n                                message_id: lastMessage.message_id,\n                                message: updatedContent,\n                            },\n                        ], { refresh: 'none' });\n                        console.log('✅ 已添加群聊标记到 bear 标签内');\n                    }\n                    else {\n                        // 如果没有消息，创建一条包含 bear 标签的新消息\n                        const newMessage = `<bear>\\n${groupChatMarker}\\n</bear>`;\n                        await setChatMessages([\n                            {\n                                message_id: Date.now(),\n                                message: newMessage,\n                            },\n                        ], { refresh: 'none' });\n                        console.log('✅ 已创建新消息包含群聊标记');\n                    }\n                }\n                else {\n                    console.warn('⚠️ setChatMessages 函数不可用');\n                }\n            }\n            catch (messageError) {\n                console.error('❌ 处理消息失败:', messageError);\n            }\n            // 触发消息解析和聊天列表更新\n            this.initializeFromExistingData();\n            console.log('✅ 群聊创建处理完成');\n        }\n        catch (error) {\n            console.error('❌ 处理群聊创建失败:', error);\n        }\n    }\n    /**\n     * 处理刷新聊天列表事件\n     */\n    handleRefreshChatList() {\n        console.log(`🔄 刷新聊天列表`);\n        try {\n            // 如果聊天列表界面当前可见，重新渲染\n            const chatListInterface = document.getElementById('chatListInterface');\n            if (chatListInterface && chatListInterface.classList.contains('active')) {\n                this.chatListManager.renderChatList(this.chatData);\n                console.log(`✅ 聊天列表已刷新`);\n            }\n        }\n        catch (error) {\n            console.error('❌ 刷新聊天列表失败:', error);\n        }\n    }\n    /**\n     * 处理头像缓存清除事件\n     */\n    handleAvatarCacheCleared(detail) {\n        console.log(`🔄 [BearChatManager] 处理头像缓存清除事件:`, detail);\n        try {\n            // 1. 刷新聊天列表界面\n            const chatListInterface = document.getElementById('chatListInterface');\n            if (chatListInterface && chatListInterface.classList.contains('active')) {\n                this.chatListManager.renderChatList(this.chatData);\n                console.log(`✅ 聊天列表头像已刷新`);\n            }\n            // 2. 刷新当前聊天界面中的消息头像\n            if (this.currentChat) {\n                this.refreshCurrentChatAvatars(detail.clearedContacts);\n                console.log(`✅ 当前聊天界面头像已刷新`);\n            }\n            // 3. 刷新聊天头部的头像（如果是当前聊天的联系人）\n            this.refreshChatHeaderAvatar(detail.clearedContacts);\n        }\n        catch (error) {\n            console.error('❌ 处理头像缓存清除事件失败:', error);\n        }\n    }\n    /**\n     * 刷新当前聊天界面中的消息头像\n     */\n    refreshCurrentChatAvatars(clearedContacts) {\n        try {\n            const messageElements = document.querySelectorAll('.message');\n            let refreshedCount = 0;\n            // 获取联系人管理器\n            const contactManager = this.chatListManager.getContactManager();\n            messageElements.forEach(messageElement => {\n                const avatar = messageElement.querySelector('.avatar');\n                const senderElement = messageElement.querySelector('.message-sender, .sender-name');\n                if (avatar && senderElement) {\n                    const senderName = senderElement.textContent?.trim();\n                    // 检查是否是被清除缓存的联系人\n                    if (senderName && clearedContacts.includes(senderName)) {\n                        // 使用联系人管理器获取正确的头像URL（会获取世界书默认头像）\n                        const newAvatarUrl = contactManager.getContactAvatar(senderName);\n                        if (newAvatarUrl && avatar.src !== newAvatarUrl) {\n                            avatar.src = newAvatarUrl;\n                            refreshedCount++;\n                            console.log(`🔄 刷新消息头像: ${senderName} -> ${newAvatarUrl}`);\n                        }\n                    }\n                }\n            });\n            if (refreshedCount > 0) {\n                console.log(`✅ 刷新了 ${refreshedCount} 个消息头像`);\n            }\n        }\n        catch (error) {\n            console.error('❌ 刷新当前聊天头像失败:', error);\n        }\n    }\n    /**\n     * 刷新聊天头部的头像\n     */\n    refreshChatHeaderAvatar(clearedContacts) {\n        try {\n            const headerAvatar = document.getElementById('headerAvatar');\n            const headerTitle = document.getElementById('headerTitle');\n            // 获取联系人管理器\n            const contactManager = this.chatListManager.getContactManager();\n            if (headerAvatar && headerTitle && this.currentChat) {\n                const chatData = this.chatData.get(this.currentChat);\n                if (chatData) {\n                    // 提取聊天对象的名称\n                    const chatName = chatData.chatName;\n                    const displayName = this.extractDisplayName(chatName);\n                    // 检查是否是被清除缓存的联系人\n                    if (displayName && clearedContacts.includes(displayName)) {\n                        // 使用联系人管理器获取正确的头像URL（会获取世界书默认头像）\n                        const newAvatarUrl = contactManager.getContactAvatar(displayName);\n                        if (newAvatarUrl && headerAvatar.src !== newAvatarUrl) {\n                            headerAvatar.src = newAvatarUrl;\n                            console.log(`🔄 刷新聊天头部头像: ${displayName} -> ${newAvatarUrl}`);\n                        }\n                    }\n                }\n            }\n        }\n        catch (error) {\n            console.error('❌ 刷新聊天头部头像失败:', error);\n        }\n    }\n    /**\n     * 从聊天名称中提取显示名称\n     */\n    extractDisplayName(chatName) {\n        // 处理\"和xxx的聊天\"格式\n        const match = chatName.match(/^和(.+)的聊天$/);\n        if (match) {\n            return match[1];\n        }\n        // 直接返回聊天名称\n        return chatName;\n    }\n    /**\n     * 处理世界书头像缓存清除事件\n     */\n    handleWorldbookAvatarCacheCleared(detail) {\n        const { clearedCount, clearedContactNames } = detail;\n        // 如果没有实际清除任何缓存，则无需更新\n        if (clearedCount === 0 || !clearedContactNames || clearedContactNames.length === 0) {\n            console.log(`ℹ️ [BearChatManager] 世界书头像缓存清除事件: 清除了 ${clearedCount} 个缓存，无需更新聊天数据`);\n            return;\n        }\n        console.log(`🔄 [BearChatManager] 正在更新 ${clearedContactNames.length} 个被清除缓存的角色头像数据...`);\n        const contactManager = this.chatListManager.getContactManager();\n        let isCurrentChatAffected = false;\n        // 1. 更新 this.chatData 中所有相关聊天的头像数据\n        this.chatData.forEach((chat, chatId) => {\n            let chatUpdated = false;\n            if (chat.type === 'group') {\n                // --- 群聊处理逻辑 ---\n                chat.messages.forEach(msg => {\n                    if (clearedContactNames.includes(msg.sender)) {\n                        const newAvatar = contactManager.getContactAvatar(msg.sender);\n                        if (msg.avatar !== newAvatar) {\n                            console.log(`  - 更新群聊[${chat.chatName}]内消息发送者[${msg.sender}]的头像`);\n                            msg.avatar = newAvatar;\n                            chatUpdated = true;\n                        }\n                    }\n                });\n            }\n            else {\n                // --- 单聊处理逻辑 (保持不变) ---\n                const displayName = this.extractDisplayName(chat.chatName);\n                if (clearedContactNames.includes(displayName)) {\n                    const newAvatar = contactManager.getContactAvatar(displayName);\n                    if (chat.avatar !== newAvatar) {\n                        console.log(`  - 更新单聊: \"${chat.chatName}\", 旧头像: ${chat.avatar}, 新头像: ${newAvatar}`);\n                        chat.avatar = newAvatar;\n                        // 单聊的所有消息发送者都是同一个人，所以可以一次性更新\n                        chat.messages.forEach(msg => {\n                            if (msg.sender === displayName) {\n                                msg.avatar = newAvatar;\n                            }\n                        });\n                        chatUpdated = true;\n                    }\n                }\n            }\n            if (chatUpdated && this.currentChat === chatId) {\n                isCurrentChatAffected = true;\n            }\n        });\n        // 2. 如果当前打开的聊天受影响，则重新渲染它\n        if (isCurrentChatAffected) {\n            console.log('🎨 当前聊天头像已过时，正在重新渲染...');\n            this.renderCurrentChat();\n        }\n        // 3. 通知聊天列表刷新显示\n        this.chatListManager.refreshChatList(this.chatData);\n        console.log('✅ [BearChatManager] 世界书联系人头像数据更新完成。');\n    }\n    /**\n     * 查找与指定联系人的已存在聊天\n     * @param contactName 联系人名称\n     * @returns 找到的聊天ID，如果没有找到则返回null\n     */\n    findExistingChatWithContact(contactName) {\n        for (const [chatId, chatData] of this.chatData) {\n            // 检查聊天名称是否匹配单聊格式\n            if (chatData.chatName === `和${contactName}的聊天`) {\n                return chatId;\n            }\n            // 检查聊天中是否有该联系人的消息\n            const hasContactMessages = chatData.messages.some(message => message.sender === contactName && message.sender !== '{{user}}');\n            if (hasContactMessages) {\n                // 进一步检查是否为单聊（不是群聊）\n                const uniqueSenders = new Set(chatData.messages.filter(msg => msg.sender !== '{{user}}').map(msg => msg.sender));\n                // 如果只有一个非用户发送者，且就是目标联系人，则认为是单聊\n                if (uniqueSenders.size === 1 && uniqueSenders.has(contactName)) {\n                    return chatId;\n                }\n            }\n        }\n        return null;\n    }\n    /**\n     * 显示提示信息\n     */\n    showToast(message, type = 'info') {\n        // 使用toastr显示提示信息\n        if (typeof toastr !== 'undefined') {\n            if (type === 'success') {\n                toastr.success(message);\n            }\n            else {\n                toastr[type](message);\n            }\n        }\n        else {\n            console.log(`[${type.toUpperCase()}] ${message}`);\n        }\n    }\n    showDiaryInterface() {\n        // TODO: 实现显示日记界面\n    }\n    showCallInterface() {\n        // TODO: 实现显示语音通话界面\n    }\n    /**\n     * 处理头像点击事件\n     * 单聊：显示个人资料或联系人信息\n     * 群聊：显示群聊管理模态框\n     */\n    async handleAvatarClick() {\n        const currentChat = this.chatData.get(this.currentChat);\n        if (!currentChat) {\n            console.warn('当前聊天数据不存在');\n            return;\n        }\n        // 检查是否为群聊\n        if (currentChat.type === 'group') {\n            // 显示群聊管理模态框\n            await this.showGroupChatModal(currentChat);\n        }\n        else {\n            // 显示单聊的个人资料或联系人信息\n            this.showSingleChatProfile(currentChat);\n        }\n    }\n    /**\n     * 显示群聊管理模态框\n     * @param groupData 群聊数据\n     */\n    async showGroupChatModal(groupData) {\n        // 创建群聊管理模态框\n        const modal = await this.createGroupManagementModal(groupData);\n        // 将模态框添加到界面容器\n        const interfaceContainer = document.querySelector('.interface-container');\n        if (interfaceContainer) {\n            interfaceContainer.appendChild(modal);\n        }\n        else {\n            document.body.appendChild(modal);\n        }\n        // 显示模态框\n        setTimeout(() => {\n            modal.classList.add('show');\n        }, 10);\n    }\n    /**\n     * 显示单聊的个人资料\n     * @param chatData 单聊数据\n     */\n    showSingleChatProfile(chatData) {\n        console.log('👤 显示个人资料:', chatData.chatName);\n        // 提取联系人名称\n        // const contactName = this.extractDisplayName(chatData.chatName);\n        // 显示提示信息\n        this.showToast(`查看 ${chatData.chatName} 的个人资料`, 'info');\n        // TODO: 实现个人资料显示逻辑\n        // 可以显示联系人详情、聊天设置等\n    }\n    /**\n     * 创建群聊管理模态框\n     * @param groupData 群聊数据\n     * @returns 模态框元素\n     */\n    async createGroupManagementModal(groupData) {\n        const overlay = document.createElement('div');\n        overlay.className = 'modal-overlay group-management-modal';\n        overlay.id = 'groupManagementModal';\n        const members = groupData.members || [];\n        const memberCount = members.length;\n        // 构建成员列表HTML - 使用异步方式获取用户信息\n        const memberHtmlPromises = members.map(async (member, index) => {\n            // 处理用户头像和名字，使用统一的用户信息获取方法\n            let memberAvatar = member.avatar;\n            let memberName = member.name;\n            // 扩展用户检测逻辑：检查固定字符串和真实用户名\n            let isUser = member.name === '{{user}}' || member.name === 'user' || member.id === '{{user}}';\n            // 如果基础检测失败，尝试检查是否是用户的真实姓名\n            if (!isUser) {\n                try {\n                    const { getUserNameAsync } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./modules/utils/userInfoRetrieval */ \"./src/多云熊/备份/给rovo的/modules/utils/userInfoRetrieval.ts\"));\n                    const realUserName = await getUserNameAsync();\n                    isUser = member.name === realUserName || member.id === realUserName;\n                }\n                catch (error) {\n                    // 静默处理错误，不影响正常流程\n                }\n            }\n            if (isUser) {\n                // 使用与创建群聊一致的头像获取方法\n                const { getUserAvatar, getUserNameAsync } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./modules/utils/userInfoRetrieval */ \"./src/多云熊/备份/给rovo的/modules/utils/userInfoRetrieval.ts\"));\n                try {\n                    memberAvatar = getUserAvatar();\n                    memberName = await getUserNameAsync();\n                }\n                catch (error) {\n                    // 如果获取失败，保持原始值\n                }\n            }\n            return `\n      <div class=\"member-item\" data-member-id=\"${member.id}\">\n        <img src=\"${memberAvatar}\" class=\"member-avatar\" alt=\"${memberName}\">\n        <div class=\"member-info\">\n          <span class=\"member-name\">${memberName}</span>\n          <span class=\"member-role\">${this.getMemberRoleText(member.role)}</span>\n        </div>\n        <div class=\"member-actions\">\n          ${member.role !== 'owner'\n                ? `\n            <button class=\"kick-member-btn\" data-member-id=\"${member.id}\" title=\"移除成员\">\n              <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\">\n                <path fill=\"currentColor\" d=\"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z\" />\n              </svg>\n            </button>\n          `\n                : ''}\n        </div>\n      </div>\n    `;\n        });\n        // 等待所有成员HTML生成完成\n        const memberHtmlArray = await Promise.all(memberHtmlPromises);\n        const membersHtml = memberHtmlArray.join('');\n        overlay.innerHTML = `\n      <div class=\"modal-container\">\n        <div class=\"modal-header\">\n          <h3>群聊设置</h3>\n        </div>\n        \n        <div class=\"modal-body\">\n          \x3c!-- 群基本信息 --\x3e\n          <div class=\"group-info-section\">\n            <div class=\"group-avatar-section\">\n              <img class=\"group-avatar-preview\" src=\"${groupData.avatar}\" alt=\"群头像\">\n              <button class=\"change-avatar-btn\" data-action=\"change-avatar\">更换头像</button>\n            </div>\n            <div class=\"group-name-section\">\n              <label>群名称</label>\n              <input type=\"text\" class=\"group-name-input\" value=\"${groupData.chatName}\" maxlength=\"20\">\n            </div>\n          </div>\n          \n          \x3c!-- 群成员管理 --\x3e\n          <div class=\"group-members-section\">\n            <div class=\"section-header\">\n              <h4>群成员 (<span class=\"member-count\">${memberCount}</span>)</h4>\n              <button class=\"invite-member-btn\" data-action=\"invite-member\">邀请成员</button>\n            </div>\n            <div class=\"members-list\">\n              ${membersHtml}\n            </div>\n          </div>\n          \n          \x3c!-- 危险操作区域 --\x3e\n          <div class=\"danger-section\">\n            <button class=\"disband-btn\" data-action=\"disband\">解散群聊</button>\n          </div>\n        </div>\n        \n        <div class=\"modal-footer\">\n          <button class=\"cancel-btn\" data-action=\"cancel\">取消</button>\n          <button class=\"save-btn\" data-action=\"save\">保存</button>\n        </div>\n      </div>\n    `;\n        // 绑定事件\n        this.bindGroupManagementModalEvents(overlay, groupData);\n        // 注册用户头像到头像同步系统\n        this.registerGroupMemberAvatars(overlay);\n        return overlay;\n    }\n    /**\n     * 注册群成员头像到头像同步系统\n     * @param modal 模态框元素\n     */\n    registerGroupMemberAvatars(modal) {\n        try {\n            // 查找所有用户成员的头像元素\n            const memberAvatars = modal.querySelectorAll('.member-avatar');\n            memberAvatars.forEach(avatarElement => {\n                const memberItem = avatarElement.closest('.member-item');\n                if (memberItem) {\n                    const memberId = memberItem.getAttribute('data-member-id');\n                    // 只注册用户自己的头像（user或{{user}}）\n                    if (memberId === 'user' || memberId === '{{user}}') {\n                        console.log('🔗 注册群成员中的用户头像到同步系统');\n                        // 注册到头像同步系统，使用member-avatar类型\n                        this.avatarMixin.register(avatarElement, 'img');\n                        // 立即更新头像\n                        const currentAvatar = (0,_modules_utils__WEBPACK_IMPORTED_MODULE_10__.getUnifiedUserAvatarSync)();\n                        avatarElement.src = currentAvatar;\n                    }\n                }\n            });\n        }\n        catch (error) {\n            console.warn('注册群成员头像失败:', error);\n        }\n    }\n    /**\n     * 绑定群聊管理模态框事件\n     * @param modal 模态框元素\n     * @param groupData 群聊数据\n     */\n    bindGroupManagementModalEvents(modal, groupData) {\n        // 关闭按钮\n        const closeBtn = modal.querySelector('[data-action=\"close\"]');\n        const cancelBtn = modal.querySelector('[data-action=\"cancel\"]');\n        [closeBtn, cancelBtn].forEach(btn => {\n            if (btn) {\n                btn.addEventListener('click', () => {\n                    this.hideGroupManagementModal();\n                });\n            }\n        });\n        // 保存按钮\n        const saveBtn = modal.querySelector('[data-action=\"save\"]');\n        if (saveBtn) {\n            saveBtn.addEventListener('click', () => {\n                this.handleGroupSettingsSave(modal, groupData);\n            });\n        }\n        // 更换头像按钮\n        const changeAvatarBtn = modal.querySelector('[data-action=\"change-avatar\"]');\n        if (changeAvatarBtn) {\n            changeAvatarBtn.addEventListener('click', () => {\n                this.handleGroupAvatarChange(groupData);\n            });\n        }\n        // 邀请成员按钮\n        const inviteBtn = modal.querySelector('[data-action=\"invite-member\"]');\n        if (inviteBtn) {\n            inviteBtn.addEventListener('click', () => {\n                this.handleGroupMemberInvite(groupData);\n            });\n        }\n        // 解散群聊按钮\n        const disbandBtn = modal.querySelector('[data-action=\"disband\"]');\n        if (disbandBtn) {\n            disbandBtn.addEventListener('click', () => {\n                this.handleGroupDisband(groupData);\n            });\n        }\n        // 移除成员按钮\n        const kickBtns = modal.querySelectorAll('.kick-member-btn');\n        kickBtns.forEach(btn => {\n            btn.addEventListener('click', async (e) => {\n                const memberId = e.target.closest('[data-member-id]')?.getAttribute('data-member-id');\n                if (memberId) {\n                    await this.handleGroupMemberKick(groupData, memberId);\n                }\n            });\n        });\n        // 点击遮罩关闭\n        modal.addEventListener('click', e => {\n            if (e.target === modal) {\n                this.hideGroupManagementModal();\n            }\n        });\n    }\n    /**\n     * 隐藏群聊管理模态框\n     */\n    hideGroupManagementModal() {\n        const modal = document.getElementById('groupManagementModal');\n        if (modal) {\n            // 清理注册的头像元素\n            this.unregisterGroupMemberAvatars(modal);\n            modal.classList.remove('show');\n            setTimeout(() => {\n                modal.remove();\n            }, 300);\n        }\n    }\n    /**\n     * 刷新群聊管理模态框的成员列表（轻量级更新，不关闭模态框）\n     * @param groupData 群聊数据\n     */\n    async refreshGroupManagementModal(groupData) {\n        try {\n            const existingModal = document.getElementById('groupManagementModal');\n            if (!existingModal) {\n                console.warn('⚠️ 未找到现有的群聊管理模态框');\n                return;\n            }\n            // 只更新成员列表部分，不重新创建整个模态框\n            const membersList = existingModal.querySelector('.members-list');\n            const memberCountSpan = existingModal.querySelector('.member-count');\n            if (!membersList) {\n                console.warn('⚠️ 未找到成员列表容器');\n                throw new Error('成员列表容器不存在');\n            }\n            // 重用现有的成员列表生成逻辑\n            const members = (groupData.members || []);\n            const memberHtmlPromises = members.map(async (member) => {\n                // 处理用户头像和名字，使用统一的用户信息获取方法\n                let memberAvatar = member.avatar;\n                let memberName = member.name;\n                // 如果是用户，获取真实的用户头像和名字\n                if (member.id === '{{user}}' || member.id === 'user') {\n                    try {\n                        const { getUserAvatar, getUserNameAsync } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./modules/utils/userInfoRetrieval */ \"./src/多云熊/备份/给rovo的/modules/utils/userInfoRetrieval.ts\"));\n                        memberAvatar = getUserAvatar();\n                        memberName = await getUserNameAsync();\n                    }\n                    catch (error) {\n                        // 如果获取失败，保持原始值\n                    }\n                }\n                return `\n        <div class=\"member-item\" data-member-id=\"${member.id}\">\n          <img src=\"${memberAvatar}\" class=\"member-avatar\" alt=\"${memberName}\">\n          <div class=\"member-info\">\n            <span class=\"member-name\">${memberName}</span>\n            <span class=\"member-role\">${this.getMemberRoleText(member.role)}</span>\n          </div>\n          <div class=\"member-actions\">\n            ${member.role !== 'owner'\n                    ? `\n              <button class=\"kick-member-btn\" data-member-id=\"${member.id}\" title=\"移除成员\">\n                <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\">\n                  <path fill=\"currentColor\" d=\"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z\" />\n                </svg>\n              </button>\n            `\n                    : ''}\n          </div>\n        </div>\n      `;\n            });\n            // 等待所有成员HTML生成完成\n            const memberHtmlArray = await Promise.all(memberHtmlPromises);\n            const membersHtml = memberHtmlArray.join('');\n            const memberCount = members.length;\n            // 更新成员列表内容\n            membersList.innerHTML = membersHtml;\n            // 更新成员数量显示\n            if (memberCountSpan) {\n                memberCountSpan.textContent = memberCount.toString();\n            }\n            // 重新绑定成员相关的事件（只绑定成员列表的事件）\n            this.bindMemberListEvents(membersList, groupData);\n            console.log('✅ 群聊成员列表刷新完成');\n        }\n        catch (error) {\n            console.error('❌ 刷新成员列表失败:', error);\n            // 简单的错误处理，不关闭模态框\n            this.showToast('刷新成员列表失败', 'error');\n        }\n    }\n    /**\n     * 绑定成员列表相关事件\n     * @param membersList 成员列表容器\n     * @param groupData 群聊数据\n     */\n    bindMemberListEvents(membersList, groupData) {\n        // 绑定踢出成员按钮事件\n        const kickBtns = membersList.querySelectorAll('.kick-member-btn');\n        kickBtns.forEach(btn => {\n            btn.addEventListener('click', async (e) => {\n                e.stopPropagation();\n                const memberId = e.target.closest('[data-member-id]')?.getAttribute('data-member-id');\n                if (memberId) {\n                    await this.handleGroupMemberKick(groupData, memberId);\n                }\n            });\n        });\n    }\n    /**\n     * 取消注册群成员头像\n     * @param modal 模态框元素\n     */\n    unregisterGroupMemberAvatars(modal) {\n        try {\n            // 查找所有用户成员的头像元素并取消注册\n            const memberAvatars = modal.querySelectorAll('.member-avatar');\n            memberAvatars.forEach(avatarElement => {\n                const memberItem = avatarElement.closest('.member-item');\n                if (memberItem) {\n                    const memberId = memberItem.getAttribute('data-member-id');\n                    // 只处理用户自己的头像\n                    if (memberId === 'user' || memberId === '{{user}}') {\n                        console.log('🔗 取消注册群成员中的用户头像');\n                        this.avatarMixin.unregister(avatarElement);\n                    }\n                }\n            });\n        }\n        catch (error) {\n            console.warn('取消注册群成员头像失败:', error);\n        }\n    }\n    /**\n     * 处理群信息保存\n     * @param modal 模态框元素\n     * @param groupData 群聊数据\n     */\n    async handleGroupSettingsSave(modal, groupData) {\n        const nameInput = modal.querySelector('.group-name-input');\n        const newGroupName = nameInput?.value.trim();\n        if (!newGroupName) {\n            this.showToast('群名称不能为空', 'error');\n            return;\n        }\n        // 更新群名称\n        if (newGroupName !== groupData.chatName) {\n            const oldChatName = groupData.chatName;\n            // 1. 保存到 localStorage 覆盖 (新增功能)\n            _modules_groupChat_GroupNameOverrideManager__WEBPACK_IMPORTED_MODULE_7__.GroupNameOverrideManager.saveGroupNameOverride(groupData.chatId, newGroupName);\n            // 2. 更新内存数据\n            groupData.chatName = newGroupName;\n            console.log(`📝 群名称已更新: ${oldChatName} -> ${groupData.chatName}`);\n            // 3. 更新界面显示\n            this.updateGroupChatDisplay(groupData);\n        }\n        // 注意：不再立即更新Bear格式，保持原始数据不变\n        // this.updateGroupDataInBear(groupData);\n        this.showToast('群信息已保存', 'success');\n        this.hideGroupManagementModal();\n    }\n    /**\n     * 处理群头像更换\n     * @param groupData 群聊数据\n     */\n    handleGroupAvatarChange(groupData) {\n        // 创建文件输入元素\n        const fileInput = document.createElement('input');\n        fileInput.type = 'file';\n        fileInput.accept = 'image/*';\n        fileInput.style.display = 'none';\n        // 添加到页面\n        document.body.appendChild(fileInput);\n        // 监听文件选择\n        fileInput.addEventListener('change', async (event) => {\n            const file = event.target.files?.[0];\n            if (!file) {\n                document.body.removeChild(fileInput);\n                return;\n            }\n            try {\n                // 验证文件类型\n                if (!file.type.startsWith('image/')) {\n                    this.showToast('请选择图片文件', 'error');\n                    return;\n                }\n                // 验证文件大小（限制为5MB）\n                if (file.size > 5 * 1024 * 1024) {\n                    this.showToast('图片文件不能超过5MB', 'error');\n                    return;\n                }\n                // 显示加载提示\n                this.showToast('正在上传头像...', 'info');\n                // 导入GroupChatStorage模块\n                const { GroupChatStorage } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./modules/groupChat/storage */ \"./src/多云熊/备份/给rovo的/modules/groupChat/storage.ts\"));\n                // 将文件转换为Base64\n                const base64 = await GroupChatStorage.fileToBase64(file);\n                // 使用GroupChatStorage统一保存群头像（包含缓存和数据同步）\n                await GroupChatStorage.saveGroupAvatar(groupData.chatId, base64);\n                // 更新内存中的群聊数据\n                groupData.avatar = base64;\n                // 更新界面中的头像预览\n                const avatarPreview = document.querySelector('.group-avatar-preview');\n                if (avatarPreview) {\n                    avatarPreview.src = base64;\n                }\n                // 更新聊天列表中的群聊头像\n                this.updateChatListAvatar(groupData.chatId, base64);\n                // 更新聊天界面头部的头像\n                this.updateChatHeaderAvatar(base64);\n                // 注意：群头像已保存到浏览器缓存，无需立即同步到SillyTavern\n                // 数据会在下次发送消息时自动同步\n                this.showToast('群头像更换成功', 'success');\n            }\n            catch (error) {\n                console.error('更换群头像失败:', error);\n                this.showToast('更换群头像失败', 'error');\n            }\n            finally {\n                // 清理文件输入元素\n                document.body.removeChild(fileInput);\n            }\n        });\n        // 触发文件选择对话框\n        fileInput.click();\n    }\n    // 群头像缓存功能已迁移到 GroupChatStorage 模块中统一管理\n    /**\n     * 更新聊天列表中的头像\n     * @param chatId 聊天ID\n     * @param avatarUrl 新头像URL\n     */\n    updateChatListAvatar(chatId, avatarUrl) {\n        const chatItem = document.querySelector(`[data-chat-id=\"${chatId}\"] .chat-avatar`);\n        if (chatItem) {\n            chatItem.src = avatarUrl;\n        }\n    }\n    /**\n     * 更新聊天界面头部的头像\n     * @param avatarUrl 新头像URL\n     */\n    updateChatHeaderAvatar(avatarUrl) {\n        const headerAvatar = document.getElementById('headerAvatar');\n        if (headerAvatar) {\n            headerAvatar.src = avatarUrl;\n        }\n    }\n    /**\n     * 保存聊天数据到Bear内容\n     */\n    async saveChatDataToBear() {\n        try {\n            // 构建完整的Bear内容\n            const completeBearContent = this.messageParser.buildBearContent(this.chatData);\n            const bearContentOnly = completeBearContent.replace('<bear>', '').replace('</bear>', '');\n            // 获取当前消息并只替换bear标签内容\n            const lastMessageId = await getLastMessageId();\n            const lastMessage = getChatMessages(-1)[0];\n            const originalMessage = lastMessage?.message || '';\n            const updatedMessage = this.replaceOnlyBearTagContent(originalMessage, bearContentOnly);\n            // 使用setChatMessages更新当前楼层\n            await setChatMessages([\n                {\n                    message_id: lastMessageId,\n                    message: updatedMessage,\n                },\n            ], { refresh: 'none' });\n        }\n        catch (error) {\n            console.error('保存聊天数据失败:', error);\n            throw error;\n        }\n    }\n    /**\n     * 处理群成员邀请\n     * @param groupData 群聊数据\n     */\n    handleGroupMemberInvite(groupData) {\n        try {\n            // 获取所有联系人\n            const contactManager = this.chatListManager.getContactManager();\n            const allContacts = contactManager.getAllContacts();\n            // 过滤掉已经在群聊中的成员\n            const currentMembers = groupData.members || [];\n            const availableContacts = allContacts.filter(contact => !currentMembers.some(member => member.id === contact.id));\n            if (availableContacts.length === 0) {\n                this.showToast('没有可邀请的联系人', 'warning');\n                return;\n            }\n            // 显示邀请成员选择界面\n            this.showInviteMemberModal(groupData, availableContacts);\n        }\n        catch (error) {\n            console.error('处理群聊成员邀请失败:', error);\n            this.showToast('邀请成员失败', 'error');\n        }\n    }\n    /**\n     * 显示邀请成员模态框\n     * @param groupData 群聊数据\n     * @param availableContacts 可邀请的联系人列表\n     */\n    showInviteMemberModal(groupData, availableContacts) {\n        const overlay = document.createElement('div');\n        overlay.className = 'invite-member-overlay';\n        overlay.id = 'inviteMemberModal';\n        const contactsHtml = availableContacts\n            .map(contact => `\n      <div class=\"invite-contact-item\" data-contact-id=\"${contact.id}\">\n        <img class=\"invite-contact-avatar\" src=\"${contact.avatar}\" alt=\"${contact.name}\">\n        <div class=\"invite-contact-info\">\n          <div class=\"invite-contact-name\">${contact.name}</div>\n        </div>\n        <div class=\"invite-contact-checkbox\">\n          <input type=\"checkbox\" id=\"invite_${contact.id}\" value=\"${contact.id}\">\n          <label for=\"invite_${contact.id}\"></label>\n        </div>\n      </div>\n    `)\n            .join('');\n        overlay.innerHTML = `\n      <div class=\"invite-modal-container\">\n        <div class=\"invite-modal-header\">\n          <h3>邀请成员</h3>\n          <button class=\"invite-close-btn\" data-action=\"close\">×</button>\n        </div>\n        \n        <div class=\"invite-modal-body\">\n          <div class=\"invite-contacts-list\">\n            ${contactsHtml}\n          </div>\n        </div>\n        \n        <div class=\"invite-modal-footer\">\n          <button class=\"invite-cancel-btn\" data-action=\"cancel\">取消</button>\n          <button class=\"invite-confirm-btn\" data-action=\"confirm\">邀请</button>\n        </div>\n      </div>\n    `;\n        // 将模态框添加到手机容器内，而不是整个页面\n        const phoneContainer = document.querySelector('.phone-container');\n        if (phoneContainer) {\n            phoneContainer.appendChild(overlay);\n        }\n        else {\n            document.body.appendChild(overlay);\n        }\n        // 绑定事件\n        this.bindInviteMemberModalEvents(overlay, groupData);\n    }\n    /**\n     * 绑定邀请成员模态框事件\n     * @param modal 模态框元素\n     * @param groupData 群聊数据\n     */\n    bindInviteMemberModalEvents(modal, groupData) {\n        // 关闭按钮\n        const closeBtn = modal.querySelector('[data-action=\"close\"]');\n        const cancelBtn = modal.querySelector('[data-action=\"cancel\"]');\n        [closeBtn, cancelBtn].forEach(btn => {\n            if (btn) {\n                btn.addEventListener('click', () => {\n                    // 从正确的父元素中移除模态框\n                    if (modal.parentNode) {\n                        modal.parentNode.removeChild(modal);\n                    }\n                });\n            }\n        });\n        // 邀请确认按钮\n        const inviteBtn = modal.querySelector('[data-action=\"confirm\"]');\n        if (inviteBtn) {\n            inviteBtn.addEventListener('click', () => {\n                this.handleInviteMemberConfirm(modal, groupData);\n            });\n        }\n    }\n    /**\n     * 处理邀请成员确认\n     * @param modal 模态框元素\n     * @param groupData 群聊数据\n     */\n    async handleInviteMemberConfirm(modal, groupData) {\n        try {\n            // 获取选中的联系人\n            const checkboxes = modal.querySelectorAll('input[type=\"checkbox\"]:checked');\n            const selectedContactIds = Array.from(checkboxes).map(cb => cb.value);\n            if (selectedContactIds.length === 0) {\n                this.showToast('请选择要邀请的成员', 'warning');\n                return;\n            }\n            // 更新群聊成员列表\n            const contactManager = this.chatListManager.getContactManager();\n            const newMembers = selectedContactIds.map(id => {\n                const contact = contactManager.getContactById(id);\n                return {\n                    id: contact.id,\n                    name: contact.name,\n                    avatar: contact.avatar,\n                };\n            });\n            // 添加到群聊成员中\n            groupData.members = [...(groupData.members || []), ...newMembers];\n            // 同步成员变更到酒馆聊天块\n            await this.syncGroupMembersToTavern(groupData);\n            // 关闭模态框\n            if (modal.parentNode) {\n                modal.parentNode.removeChild(modal);\n            }\n            // 刷新群聊设置界面内容，而不是关闭重开\n            await this.refreshGroupManagementModal(groupData);\n            this.showToast(`成功邀请 ${selectedContactIds.length} 名成员`, 'success');\n        }\n        catch (error) {\n            console.error('邀请成员确认失败:', error);\n            this.showToast('邀请成员失败', 'error');\n        }\n    }\n    /**\n     * 处理群成员踢出\n     * @param groupData 群聊数据\n     * @param memberId 成员ID\n     */\n    async handleGroupMemberKick(groupData, memberId) {\n        const members = groupData.members || [];\n        const member = members.find((m) => m.id === memberId);\n        if (!member) {\n            this.showToast('成员不存在', 'error');\n            return;\n        }\n        if (confirm(`确定要移除成员 \"${member.name}\" 吗？`)) {\n            // 从成员列表中移除\n            groupData.members = members.filter((m) => m.id !== memberId);\n            console.log(`👋 成员已移除: ${member.name}`);\n            // 同步成员变更到酒馆聊天块\n            await this.syncGroupMembersToTavern(groupData);\n            // 刷新群聊设置界面内容，而不是关闭重开\n            await this.refreshGroupManagementModal(groupData);\n            this.showToast(`成员 \"${member.name}\" 已移除`, 'success');\n        }\n    }\n    /**\n     * 处理群聊解散\n     * @param groupData 群聊数据\n     */\n    async handleGroupDisband(groupData) {\n        try {\n            // 确认对话框\n            const confirmed = confirm(`确定要解散群聊 \"${groupData.chatName}\" 吗？\\n\\n解散后将删除所有群聊消息，此操作不可恢复。`);\n            if (!confirmed) {\n                return;\n            }\n            console.log('🗑️ 开始解散群聊:', groupData.chatName);\n            // 1. 关闭群聊设置界面\n            this.hideGroupManagementModal();\n            // 2. 群聊特有的额外清理：从群聊存储中删除\n            if (this.groupChatManager) {\n                this.groupChatManager.deleteGroupChat(groupData.chatId);\n            }\n            // 3. 使用通用的删除聊天逻辑（处理Bear格式、内存清理、界面切换等）\n            await this.handleDeleteChatRequest(groupData.chatId);\n            this.showToast(`群聊 \"${groupData.chatName}\" 已解散`, 'success');\n            console.log('✅ 群聊解散完成');\n        }\n        catch (error) {\n            console.error('解散群聊失败:', error);\n            this.showToast('解散群聊失败', 'error');\n        }\n    }\n    /**\n     * 根据群聊ID获取群聊名称\n     * @param groupChatId 群聊ID\n     * @returns 群聊名称\n     */\n    getGroupNameById(groupChatId) {\n        const groupData = this.chatData.get(groupChatId);\n        return groupData ? groupData.chatName : null;\n    }\n    /**\n     * 更新群聊数据存储\n     * @param groupData 群聊数据\n     */\n    updateGroupChatData(groupData) {\n        try {\n            // 更新内存中的数据\n            this.chatData.set(groupData.chatId, groupData);\n            // 更新群聊存储\n            if (this.groupChatManager) {\n                // 转换为GroupChatData格式\n                const groupChatData = {\n                    id: groupData.chatId,\n                    name: groupData.chatName,\n                    avatar: groupData.avatar,\n                    members: (groupData.members || []).map(member => member.id),\n                    userParticipation: 'member',\n                    createdAt: Date.now(),\n                    messages: [],\n                    type: 'group',\n                };\n                // 保存到群聊存储\n                const GroupChatStorage = (__webpack_require__(/*! ./modules/groupChat/storage */ \"./src/多云熊/备份/给rovo的/modules/groupChat/storage.ts\").GroupChatStorage);\n                GroupChatStorage.saveGroupChat(groupChatData);\n            }\n            console.log('✅ 群聊数据已更新:', groupData.chatName);\n        }\n        catch (error) {\n            console.error('更新群聊数据失败:', error);\n        }\n    }\n    /**\n     * 更新群聊界面显示\n     * @param groupData 群聊数据\n     */\n    updateGroupChatDisplay(groupData) {\n        // 更新聊天标题 - 修复选择器\n        const chatTitle = document.getElementById('chatTitle');\n        if (chatTitle) {\n            chatTitle.textContent = groupData.chatName;\n            console.log(`🔄 已更新聊天标题: ${groupData.chatName}`);\n        }\n        else {\n            console.warn('⚠️ 未找到聊天标题元素 #chatTitle');\n        }\n        // 更新聊天列表显示\n        if (this.chatListManager) {\n            this.chatListManager.refreshChatList(this.chatData);\n            console.log('🔄 已刷新聊天列表');\n        }\n    }\n    /**\n     * 获取成员角色文本\n     * @param role 成员角色\n     * @returns 角色文本\n     */\n    getMemberRoleText(role) {\n        switch (role) {\n            case 'owner':\n                return '群主';\n            case 'admin':\n                return '管理员';\n            case 'member':\n                return '成员';\n            default:\n                return '成员';\n        }\n    }\n    /**\n     * 验证Bear数据完整性\n     * @param bearContent Bear内容\n     * @returns 验证结果\n     */\n    validateBearData(bearContent) {\n        const errors = [];\n        try {\n            // 检查基本格式\n            if (!bearContent.includes('<bear>') || !bearContent.includes('</bear>')) {\n                errors.push('缺少Bear标签');\n            }\n            // 检查聊天块格式\n            const chatBlocks = [...bearContent.matchAll(/\\[([^\\]]+)\\]([\\s\\S]*?)\\[\\/\\1\\]/g)];\n            if (chatBlocks.length === 0) {\n                errors.push('没有找到有效的聊天块');\n            }\n            // 检查群聊格式\n            const groupBlocks = [\n                ...bearContent.matchAll(/\\[群聊([^\\]]+)\\]\\s*\\n?\\s*\\[成员[：:]([^\\]]+)\\]\\s*\\n?([\\s\\S]*?)\\n?\\s*\\[\\/群聊\\1\\]/g),\n            ];\n            for (const block of groupBlocks) {\n                const groupName = block[1];\n                const memberList = block[2];\n                if (!groupName.trim()) {\n                    errors.push('群聊名称不能为空');\n                }\n                if (!memberList.trim()) {\n                    errors.push(`群聊\"${groupName}\"的成员列表不能为空`);\n                }\n            }\n            // 检查消息格式\n            const messages = [...bearContent.matchAll(/\\[([SG])_[^\\]]*\\]/g)];\n            if (messages.length === 0) {\n                errors.push('没有找到有效的消息');\n            }\n            return {\n                valid: errors.length === 0,\n                errors,\n            };\n        }\n        catch (error) {\n            errors.push(`验证过程出错: ${error}`);\n            return {\n                valid: false,\n                errors,\n            };\n        }\n    }\n    /**\n     * 同步群成员变更到酒馆聊天块\n     * @param groupData 群聊数据\n     */\n    async syncGroupMembersToTavern(groupData) {\n        try {\n            console.log('🔄 开始同步群成员变更到酒馆聊天块');\n            console.log('📊 群聊数据:', {\n                chatId: groupData.chatId,\n                chatName: groupData.chatName,\n                memberCount: (groupData.members || []).length,\n            });\n            // 更新内存中的聊天数据\n            this.chatData.set(groupData.chatId, groupData);\n            // 重要提示：此方法只能更新当前打开的聊天中的群聊信息\n            // 如果目标群聊的数据存储在其他聊天文件中，需要先切换到对应的聊天\n            console.log('⚠️ 注意：只能更新当前聊天中的群聊信息');\n            // 查找包含目标群聊信息的消息\n            const messages = getChatMessages('0-{{lastMessageId}}');\n            let memberMessageId = -1;\n            console.log(`📝 当前聊天共有 ${messages.length} 条消息`);\n            // 查找包含特定群聊信息的消息\n            let targetMessage = null;\n            // 准备搜索模式：同时尝试当前名称和可能的原始名称\n            const searchPatterns = [groupData.chatName];\n            // 检查是否有群名覆盖，如果有，可能需要搜索原始名称\n            const hasOverride = _modules_groupChat_GroupNameOverrideManager__WEBPACK_IMPORTED_MODULE_7__.GroupNameOverrideManager.hasOverride(groupData.chatId);\n            if (hasOverride) {\n                console.log(`🔍 检测到群名覆盖，将同时搜索原始名称和覆盖名称`);\n                // 尝试从Bear格式中提取所有群聊名称，找到可能的原始名称\n                for (let i = 0; i < messages.length; i++) {\n                    const message = messages[i];\n                    if (message.message) {\n                        // 查找所有群聊块模式\n                        const groupMatches = message.message.matchAll(/\\[群聊([^\\]]+)\\]/g);\n                        for (const match of groupMatches) {\n                            const foundGroupName = match[1];\n                            if (!searchPatterns.includes(foundGroupName)) {\n                                searchPatterns.push(foundGroupName);\n                                console.log(`📝 发现可能的原始群名: ${foundGroupName}`);\n                            }\n                        }\n                    }\n                }\n            }\n            console.log(`🔍 搜索模式: ${searchPatterns.join(', ')}`);\n            // 使用所有搜索模式查找目标消息\n            for (const searchName of searchPatterns) {\n                const groupChatPattern = `[群聊${searchName}]`;\n                for (let i = 0; i < messages.length; i++) {\n                    const message = messages[i];\n                    if (message.message && message.message.includes(groupChatPattern)) {\n                        // 确保这是目标群聊的消息块\n                        const messageContent = message.message;\n                        // 检查是否包含完整的群聊块结构\n                        if (messageContent.includes(`[/群聊${searchName}]`) ||\n                            (messageContent.includes('<bear>') && messageContent.includes(groupChatPattern))) {\n                            memberMessageId = message.message_id;\n                            targetMessage = message;\n                            console.log(`🎯 找到目标群聊消息: ${searchName} (消息ID: ${memberMessageId})`);\n                            // 记录使用的搜索名称，后续替换时需要用到\n                            targetMessage.foundGroupName = searchName;\n                            break;\n                        }\n                    }\n                }\n                if (targetMessage)\n                    break; // 找到了就停止搜索\n            }\n            // 构建新的成员列表字符串\n            const members = groupData.members || [];\n            const memberNames = members.map((member) => member.name).join('，');\n            const newMemberContent = `[成员：${memberNames}]`;\n            if (memberMessageId >= 0 && targetMessage) {\n                // 更新现有的消息\n                let updatedMessage = targetMessage.message;\n                // 使用实际找到的群聊名称进行精确替换\n                const actualGroupName = targetMessage.foundGroupName || groupData.chatName;\n                const groupChatBlockPattern = new RegExp(`(\\\\[群聊${actualGroupName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\][\\\\s\\\\S]*?)\\\\[成员：[^\\\\]]*\\\\]`, 'g');\n                // 先尝试精确匹配群聊块内的成员信息\n                if (groupChatBlockPattern.test(updatedMessage)) {\n                    updatedMessage = updatedMessage.replace(groupChatBlockPattern, `$1${newMemberContent}`);\n                    console.log(`🎯 精确替换群聊块内的成员信息 (使用名称: ${actualGroupName})`);\n                }\n                else {\n                    // 降级处理：如果是简单格式，直接替换（但要确保在正确的上下文中）\n                    const actualGroupChatPattern = `[群聊${actualGroupName}]`;\n                    if (updatedMessage.includes(actualGroupChatPattern)) {\n                        updatedMessage = updatedMessage.replace(/\\[成员：[^\\]]*\\]/, newMemberContent);\n                        console.log(`📝 降级替换成员信息 (使用名称: ${actualGroupName})`);\n                    }\n                    else {\n                        console.warn('⚠️ 未找到合适的成员信息替换位置');\n                    }\n                }\n                await setChatMessages([\n                    {\n                        message_id: memberMessageId,\n                        message: updatedMessage,\n                    },\n                ], { refresh: 'none' });\n                console.log(`✅ 已更新群聊成员信息到消息 ${memberMessageId}`);\n                console.log(`📝 新成员列表: ${memberNames}`);\n            }\n            else {\n                // 如果没有找到目标群聊的消息，更新整个Bear内容到现有消息\n                console.log('🔄 未找到目标群聊消息，更新整个Bear内容');\n                // 构建完整的Bear内容\n                const completeBearContent = this.messageParser.buildBearContent(this.chatData);\n                // 获取最后一条消息\n                const lastMessage = getChatMessages(-1)[0];\n                if (lastMessage) {\n                    const originalMessage = lastMessage.message || '';\n                    const bearContentOnly = completeBearContent.replace('<bear>', '').replace('</bear>', '');\n                    const updatedMessage = this.replaceOnlyBearTagContent(originalMessage, bearContentOnly);\n                    await setChatMessages([\n                        {\n                            message_id: lastMessage.message_id,\n                            message: updatedMessage,\n                        },\n                    ], { refresh: 'none' });\n                    console.log('✅ 已更新Bear内容包含群聊成员信息');\n                    console.log(`📝 新成员列表: ${memberNames}`);\n                }\n                else {\n                    console.warn('⚠️ 没有找到可更新的消息');\n                }\n            }\n            // 同时更新内存中的Bear格式数据\n            this.updateGroupDataInBear(groupData);\n            console.log('✅ 群成员同步完成');\n        }\n        catch (error) {\n            console.error('❌ 同步群成员到酒馆失败:', error);\n            console.error('错误详情:', error);\n            this.showToast('同步成员信息失败', 'error');\n            // 降级处理：至少更新内存数据\n            this.updateGroupDataInBear(groupData);\n        }\n    }\n    /**\n     * 更新群聊数据在Bear格式中\n     * @param groupData 群聊数据\n     */\n    updateGroupDataInBear(groupData) {\n        try {\n            // 更新内存中的聊天数据\n            this.chatData.set(groupData.chatId, groupData);\n            // 构建新的Bear内容\n            const bearContent = this.messageParser.buildBearContent(this.chatData);\n            // 验证数据完整性\n            const validation = this.validateBearData(bearContent);\n            if (!validation.valid) {\n                console.error('Bear数据验证失败:', validation.errors);\n                this.showToast('数据验证失败: ' + validation.errors.join(', '), 'error');\n                return;\n            }\n            // 注意：群聊数据已更新到内存，会在下次发送消息时自动同步到SillyTavern\n            console.log('✅ 群聊数据已更新到内存');\n        }\n        catch (error) {\n            console.error('更新群聊数据失败:', error);\n            this.showToast('更新失败，请重试', 'error');\n        }\n    }\n    /**\n     * 渲染当前聊天\n     */\n    renderCurrentChat() {\n        const currentChatData = this.chatData.get(this.currentChat);\n        if (!currentChatData) {\n            console.error('❌ 找不到当前聊天数据:', this.currentChat);\n            // 尝试模糊匹配\n            const possibleMatches = Array.from(this.chatData.keys()).filter(key => key.includes(this.currentChat) || this.currentChat.includes(key));\n            if (possibleMatches.length > 0) {\n            }\n            return;\n        }\n        // 在渲染前进行一次基于 UI 缓存的复水，避免切换界面后预览图丢失\n        this.rehydrateUserImageMessages(currentChatData);\n        // 更新头部信息\n        this.updateChatHeader(currentChatData);\n        // 渲染消息列表\n        this.renderMessages(currentChatData);\n    }\n    /**\n     * 更新聊天头部信息\n     */\n    updateChatHeader(chatData) {\n        const chatTitle = document.getElementById('chatTitle');\n        const headerAvatar = document.getElementById('headerAvatar');\n        const headerStatus = document.querySelector('.header-status');\n        if (chatTitle) {\n            // 从聊天名称中提取角色名\n            // 例如：\"和小明的聊天\" -> \"小明\"\n            let displayName = chatData.chatName;\n            const chatNameMatch = chatData.chatName.match(/^和(.+)的聊天$/);\n            if (chatNameMatch) {\n                displayName = chatNameMatch[1];\n            }\n            chatTitle.textContent = displayName;\n        }\n        if (headerAvatar) {\n            headerAvatar.src = this.messageParser.processImageUrl(chatData.avatar);\n            headerAvatar.alt = chatData.chatName;\n        }\n        // 根据聊天类型显示或隐藏在线状态\n        if (headerStatus) {\n            // 判断是否为群聊：优先使用chatId判断，其次检查消息类型和聊天名称\n            const isGroupChat = chatData.chatId.startsWith('群聊') ||\n                chatData.chatId.startsWith('G_') ||\n                chatData.chatName.includes('群聊') ||\n                chatData.messages.some(message => message.type === 'G');\n            if (isGroupChat) {\n                // 群聊：隐藏在线状态\n                headerStatus.style.display = 'none';\n            }\n            else {\n                // 单聊：显示在线状态\n                headerStatus.style.display = 'flex';\n            }\n        }\n    }\n    /**\n     * 渲染消息列表（分页：默认显示最近50条，顶部“查看更多消息”每次+20）\n     */\n    renderMessages(chatData, options) {\n        const messagesContainer = document.getElementById('chatMessages');\n        if (!messagesContainer) {\n            console.error('找不到消息容器 #chatMessages');\n            return;\n        }\n        const preserveScroll = !!options?.preserveScroll;\n        // 记录旧滚动状态（在保留滚动时用于回补）\n        const oldScrollTop = messagesContainer.scrollTop;\n        const oldScrollHeight = messagesContainer.scrollHeight;\n        // 计算可见窗口\n        const total = chatData.messages.length;\n        const initialCount = Math.min(total, this.INITIAL_VISIBLE_COUNT);\n        if (!this.visibleCounts.has(chatData.chatId)) {\n            this.visibleCounts.set(chatData.chatId, initialCount);\n        }\n        let count = Math.min(this.visibleCounts.get(chatData.chatId) || initialCount, total);\n        const start = Math.max(total - count, 0);\n        // 局部“加载更多”处理函数（点击顶部按钮时触发）\n        const handleLoadMore = () => {\n            const now = Date.now();\n            if (now - this.lastLoadMoreAt < this.LOAD_MORE_THROTTLE_MS)\n                return;\n            this.lastLoadMoreAt = now;\n            const total = chatData.messages.length;\n            const prev = Math.min(this.visibleCounts.get(chatData.chatId) ?? Math.min(total, this.INITIAL_VISIBLE_COUNT), total);\n            if (prev >= total)\n                return;\n            const next = Math.min(prev + this.LOAD_MORE_STEP, total);\n            this.visibleCounts.set(chatData.chatId, next);\n            this.prependOlderMessages(chatData, prev, next);\n        };\n        // 清空并重新渲染\n        messagesContainer.innerHTML = '';\n        // 渲染可见历史消息\n        for (let i = start; i < total; i++) {\n            const messageElement = this.createMessageElement(chatData.messages[i]);\n            messagesContainer.appendChild(messageElement);\n        }\n        // 渲染队列中的待发送消息（不参与分页）\n        const queueMessages = this.sendQueue.filter(message => message.chatId === this.currentChat);\n        queueMessages.forEach(message => {\n            const messageElement = this.createMessageElement(message);\n            messagesContainer.appendChild(messageElement);\n        });\n        // 初次渲染或普通刷新滚动到底部；在保留滚动时不改变位置\n        if (!preserveScroll) {\n            this.scrollToBottom(messagesContainer);\n        }\n        else if (oldScrollHeight > 0) {\n            const afterHeight = messagesContainer.scrollHeight;\n            if (afterHeight === oldScrollHeight) {\n                messagesContainer.scrollTop = oldScrollTop;\n            }\n        }\n    }\n    // 仅前插新增旧消息对应的 DOM，并做滚动补偿\n    prependOlderMessages(chatData, prevCount, nextCount) {\n        const container = document.getElementById('chatMessages');\n        if (!container)\n            return;\n        const total = chatData.messages.length;\n        const oldStart = Math.max(total - prevCount, 0);\n        const newStart = Math.max(total - nextCount, 0);\n        if (newStart >= oldStart)\n            return;\n        const beforeHeight = container.scrollHeight;\n        const sentinel = container.querySelector('.load-more-sentinel');\n        const anchor = (sentinel ? sentinel.nextSibling : container.firstChild);\n        for (let i = newStart; i < oldStart; i++) {\n            const el = this.createMessageElement(chatData.messages[i]);\n            if (anchor) {\n                container.insertBefore(el, anchor);\n            }\n            else {\n                container.insertBefore(el, container.firstChild);\n            }\n        }\n        if (newStart === 0 && sentinel) {\n            sentinel.remove();\n        }\n        const afterHeight = container.scrollHeight;\n        container.scrollTop += afterHeight - beforeHeight;\n    }\n    // ============== 顶部上滑加载更多（分页增量） ==============\n    handleTopScrollLoadMore(chatId) {\n        try {\n            const container = document.getElementById('chatMessages');\n            if (!container)\n                return;\n            const chatData = this.chatData.get(chatId);\n            if (!chatData)\n                return;\n            const total = chatData.messages.length;\n            const prev = Math.min(this.visibleCounts.get(chatId) ?? this.INITIAL_VISIBLE_COUNT, total);\n            if (prev >= total)\n                return;\n            const next = Math.min(prev + this.LOAD_MORE_STEP, total);\n            this.visibleCounts.set(chatId, next);\n            this.prependOlderMessages(chatData, prev, next);\n        }\n        catch (err) {\n            console.warn('handleTopScrollLoadMore 失败:', err);\n        }\n    }\n    attachTopScrollListener() {\n        const container = document.getElementById('chatMessages');\n        if (!container)\n            return;\n        // 避免重复绑定\n        this.detachTopScrollListener();\n        const handler = (e) => {\n            const el = e.target;\n            if (el.scrollTop <= 0) {\n                const now = Date.now();\n                if (now - this.lastLoadMoreAt < this.LOAD_MORE_THROTTLE_MS) {\n                    return;\n                }\n                this.lastLoadMoreAt = now;\n                this.handleTopScrollLoadMore(this.currentChat);\n            }\n        };\n        container.addEventListener('scroll', handler);\n        this.topScrollHandler = handler;\n    }\n    detachTopScrollListener() {\n        const container = document.getElementById('chatMessages');\n        if (container && this.topScrollHandler) {\n            container.removeEventListener('scroll', this.topScrollHandler);\n        }\n        this.topScrollHandler = null;\n    }\n    /**\n     * 添加消息到聊天数据\n     */\n    addMessageToChatData(message) {\n        const chatData = this.chatData.get(message.chatId);\n        if (chatData) {\n            chatData.messages.push(message);\n            chatData.lastMessage = this.messageParser.formatLastMessage(message);\n            chatData.timestamp = message.timestamp;\n        }\n        else {\n            // 如果聊天数据不存在，创建新的\n            const newChatData = {\n                chatId: message.chatId,\n                chatName: message.chatId,\n                avatar: message.avatar,\n                messages: [message],\n                lastMessage: this.messageParser.formatLastMessage(message),\n                timestamp: message.timestamp,\n                type: message.type,\n            };\n            this.chatData.set(message.chatId, newChatData);\n        }\n    }\n    /**\n     * 添加单条新消息到界面（不重新渲染整个列表）\n     */\n    addNewMessageToInterface(message) {\n        const messagesContainer = document.getElementById('chatMessages');\n        if (!messagesContainer)\n            return;\n        const messageElement = this.createMessageElement(message);\n        messagesContainer.appendChild(messageElement);\n        // 确保DOM完全插入后再绑定事件（特别是语音消息）\n        // 使用 requestAnimationFrame 确保DOM渲染完成\n        requestAnimationFrame(() => {\n            this.ensureVoiceMessageInteractions(messageElement, message);\n        });\n        // 滚动到底部\n        this.scrollToBottom(messagesContainer);\n    }\n    /**\n     * 创建消息元素\n     */\n    createMessageElement(message) {\n        const messageDiv = document.createElement('div');\n        const isUserMessage = this.isUserSender(message.sender);\n        const isGroupMessage = message.type === 'G';\n        // 设置消息基础样式 - 匹配原版结构\n        messageDiv.className = `message ${isUserMessage ? 'sent' : 'received'}${isGroupMessage ? ' group-message' : ''}`;\n        messageDiv.dataset.messageId = message.id;\n        // 创建头像 - 匹配原版结构\n        const avatar = this.createAvatar(message, isUserMessage);\n        messageDiv.appendChild(avatar);\n        // 创建消息包装器 - 匹配原版结构\n        const messageWrapper = this.createMessageWrapper(message, isGroupMessage);\n        messageDiv.appendChild(messageWrapper);\n        // 添加动画效果\n        this.addMessageAnimation(messageDiv);\n        // 添加交互事件\n        this.addMessageInteractions(messageDiv, message);\n        return messageDiv;\n    }\n    /**\n     * 创建消息内容\n     */\n    createMessageContent(message) {\n        const contentDiv = document.createElement('div');\n        contentDiv.className = 'message-content';\n        // 根据消息类型渲染不同内容\n        switch (message.messageType) {\n            case 'text':\n                this.renderTextMessage(contentDiv, message);\n                break;\n            case 'image':\n                this.renderImageMessage(contentDiv, message);\n                break;\n            case 'voice':\n                this.renderVoiceMessage(contentDiv, message);\n                break;\n            case 'sticker':\n                this.renderStickerMessage(contentDiv, message);\n                break;\n            case 'location':\n                this.renderLocationMessage(contentDiv, message);\n                break;\n            case 'transfer':\n                this.renderTransferMessage(contentDiv, message);\n                break;\n            default:\n                this.renderTextMessage(contentDiv, message);\n        }\n        return contentDiv;\n    }\n    /**\n     * 创建头像元素 - 匹配原版结构\n     */\n    createAvatar(message, isUserMessage) {\n        if (isUserMessage) {\n            // 用户头像 - 匹配原版user消息.html结构，添加avatar-hover类\n            const avatar = document.createElement('div');\n            avatar.className = 'user_avatar avatar avatar-hover';\n            // 使用统一的头像获取接口（同步版本）\n            const avatarUrl = (0,_modules_utils__WEBPACK_IMPORTED_MODULE_10__.getUnifiedUserAvatarSync)();\n            avatar.style.backgroundImage = `url(${avatarUrl})`;\n            // 注册到头像同步系统\n            this.avatarMixin.register(avatar, 'background');\n            return avatar;\n        }\n        else {\n            // 对方头像 - 匹配原版对方消息.html结构\n            const avatar = document.createElement('img');\n            avatar.className = 'avatar';\n            avatar.src = this.messageParser.processImageUrl(message.avatar) || 'https://files.catbox.moe/u8ccy5.jpg';\n            avatar.alt = message.sender;\n            return avatar;\n        }\n    }\n    /**\n     * 创建消息包装器 - 匹配原版结构\n     */\n    createMessageWrapper(message, isGroupMessage = false) {\n        const wrapper = document.createElement('div');\n        wrapper.className = 'message-wrapper';\n        wrapper.dataset.messageId = message.id;\n        // 如果是群聊消息且不是用户自己发送的，显示发送者名称\n        if (isGroupMessage && !this.isUserSender(message.sender)) {\n            const senderName = document.createElement('div');\n            senderName.className = 'message-sender';\n            senderName.textContent = message.senderDisplayName || message.sender;\n            wrapper.appendChild(senderName);\n        }\n        // 创建消息内容\n        const messageContent = this.createMessageContent(message);\n        wrapper.appendChild(messageContent);\n        // 添加时间戳 - 匹配原版结构\n        const timestamp = document.createElement('div');\n        timestamp.className = 'message-time';\n        timestamp.textContent = message.timestamp;\n        wrapper.appendChild(timestamp);\n        return wrapper;\n    }\n    /**\n     * 渲染文本消息\n     */\n    renderTextMessage(container, message) {\n        const textElement = document.createElement('span');\n        textElement.textContent = message.content;\n        container.appendChild(textElement);\n    }\n    /**\n     * 渲染本地文件图片\n     * @param container 容器元素\n     * @param file 文件对象\n     * @param content 消息内容\n     */\n    renderFileImage(container, file, content) {\n        // 创建文件URL用于显示\n        const fileUrl = URL.createObjectURL(file);\n        // 创建图片元素\n        const img = document.createElement('img');\n        img.src = fileUrl;\n        img.className = 'message-image';\n        img.alt = file.name;\n        img.loading = 'lazy';\n        // 图片加载完成后清理URL对象\n        img.onload = () => {\n            URL.revokeObjectURL(fileUrl);\n        };\n        // 图片加载错误处理\n        img.onerror = () => {\n            img.classList.add('hidden');\n            const errorText = document.createElement('span');\n            errorText.textContent = '[图片加载失败]';\n            errorText.className = 'error-text';\n            container.appendChild(errorText);\n            URL.revokeObjectURL(fileUrl);\n        };\n        container.appendChild(img);\n    }\n    /**\n     * 渲染图片消息\n     */\n    renderImageMessage(container, message) {\n        // 非“用户本人”的 image 一律渲染为“附件卡片”\n        if (!this.isUserSender(message.sender)) {\n            this.renderAttachmentMessage(container, (message.content || '').trim());\n            return;\n        }\n        // 优先处理本地文件上传\n        if (message.data?.uploadedFile) {\n            this.renderFileImage(container, message.data.uploadedFile, message.content);\n            return;\n        }\n        // 处理base64图片\n        if (message.data?.base64Image) {\n            const img = document.createElement('img');\n            img.src = message.data.base64Image;\n            img.className = 'message-image';\n            img.alt = message.content || '图片';\n            img.loading = 'lazy';\n            // 图片加载错误处理\n            img.onerror = () => {\n                img.classList.add('hidden');\n                const errorText = document.createElement('span');\n                errorText.textContent = '[图片加载失败]';\n                errorText.className = 'error-text';\n                container.appendChild(errorText);\n            };\n            container.appendChild(img);\n            return;\n        }\n        // 处理URL图片\n        if (message.data?.imageUrl) {\n            const img = document.createElement('img');\n            img.src = message.data.imageUrl;\n            img.className = 'message-image';\n            img.alt = message.content || '图片';\n            img.loading = 'lazy';\n            // 图片加载错误处理\n            img.onerror = () => {\n                img.classList.add('hidden');\n                const errorText = document.createElement('span');\n                errorText.textContent = '[图片加载失败]';\n                errorText.className = 'error-text';\n                container.appendChild(errorText);\n            };\n            container.appendChild(img);\n            return;\n        }\n        // 检测是否为组合格式（图片URL + 描述） - 兼容旧数据\n        const combinedRegex = /^图片URL：(.*?)\\n图片描述：(.*?)$/;\n        const combinedMatch = message.content.match(combinedRegex);\n        if (combinedMatch) {\n            // 渲染组合格式：只显示图片，不显示描述\n            const url = combinedMatch[1].trim();\n            const description = combinedMatch[2].trim();\n            // 创建图片元素\n            const img = document.createElement('img');\n            img.src = this.messageParser.processImageUrl(url); // 使用processImageUrl处理URL\n            img.className = 'message-image';\n            img.alt = description; // 描述作为alt属性保留，但不在界面显示\n            img.loading = 'lazy';\n            // 图片加载错误处理\n            img.onerror = () => {\n                img.classList.add('hidden');\n                const errorText = document.createElement('span');\n                errorText.textContent = '[图片加载失败]';\n                errorText.className = 'error-text';\n                container.appendChild(errorText);\n            };\n            container.appendChild(img);\n            return;\n        }\n        // “╒═════…╘═════” 兼容：识别为附件卡片（旧楼层）\n        const attachmentRegex = /╒═════\\s*(.*?)\\s*╘═════/;\n        const match = message.content.match(attachmentRegex);\n        if (match) {\n            this.renderAttachmentMessage(container, match[1]);\n            return;\n        }\n        // User 图像兜底：无 data.* 时尝试 UI 缓存\n        const hasData = !!(message.data?.uploadedFile || message.data?.base64Image || message.data?.imageUrl);\n        if (!hasData) {\n            const cached = this.getCachedUiImage(message);\n            if (cached) {\n                // 将命中缓存的预览写入内存，便于后续逻辑统一处理\n                message.data = { ...(message.data || {}), imageUrl: cached };\n                const img = document.createElement('img');\n                img.src = cached;\n                img.className = 'message-image';\n                img.alt = message.content || '图片';\n                img.loading = 'lazy';\n                img.onerror = () => {\n                    img.classList.add('hidden');\n                    const errorText = document.createElement('span');\n                    errorText.textContent = '[图片加载失败]';\n                    errorText.className = 'error-text';\n                    container.appendChild(errorText);\n                };\n                container.appendChild(img);\n                return;\n            }\n        }\n        // “描述早退分支”：无数据且 content 既非 http(s)/data: 也不像 name.ext → 附件卡片\n        if (!hasData) {\n            const c = (message.content || '').trim();\n            const isHttp = c.startsWith('http://') || c.startsWith('https://');\n            const isData = c.startsWith('data:');\n            const looksLikeFilename = /([a-zA-Z0-9._-]+\\.[a-zA-Z0-9]+)$/.test(c);\n            if (!isHttp && !isData && !looksLikeFilename) {\n                this.renderAttachmentMessage(container, c);\n                return;\n            }\n        }\n        // 默认把 content 当 URL 或文件名渲染为真实图片\n        const img = document.createElement('img');\n        img.src = this.messageParser.processImageUrl(message.content);\n        img.className = 'message-image';\n        img.alt = '图片消息';\n        img.loading = 'lazy';\n        // 图片加载错误处理\n        img.onerror = () => {\n            img.classList.add('hidden');\n            const errorText = document.createElement('span');\n            errorText.textContent = '[图片加载失败]';\n            errorText.className = 'error-text';\n            container.appendChild(errorText);\n        };\n        container.appendChild(img);\n    }\n    /**\n     * 渲染附件消息 - 使用纯色图片样式\n     */\n    renderAttachmentMessage(container, description) {\n        // 创建随机背景图片数组\n        const images = [\n            'https://files.catbox.moe/0g3kqu.jpg',\n            'https://files.catbox.moe/d5b7k6.jpg',\n            'https://files.catbox.moe/0yrhh6.jpg',\n            'https://files.catbox.moe/8mjvdg.jpg',\n            'https://files.catbox.moe/fvidas.jpg',\n            'https://files.catbox.moe/q6so2i.jpg',\n            'https://files.catbox.moe/5a96cp.jpg',\n            'https://files.catbox.moe/0mp6h0.jpg',\n            'https://files.catbox.moe/epcn03.jpg',\n            'https://files.catbox.moe/7jzdp7.jpg',\n            'https://files.catbox.moe/jrmu6w.jpg',\n            'https://files.catbox.moe/c0bwhn.jpg',\n            'https://files.catbox.moe/0blxme.jpg',\n            'https://files.catbox.moe/qicobr.jpg',\n            'https://files.catbox.moe/n94ztu.jpg',\n        ];\n        // 随机选择背景图片\n        const randomImage = images[Math.floor(Math.random() * images.length)];\n        // 创建附件容器\n        const attachmentContainer = document.createElement('div');\n        attachmentContainer.className = 'random-image-container dynamic-bg';\n        // 动态设置背景图片\n        attachmentContainer.style.backgroundImage = `url('${randomImage}')`;\n        // 创建详情元素\n        const details = document.createElement('details');\n        // 创建摘要元素\n        const summary = document.createElement('summary');\n        // 创建内容容器\n        const contentDiv = document.createElement('div');\n        contentDiv.className = 'attachment-content';\n        // 创建文本容器\n        const textDiv = document.createElement('div');\n        textDiv.className = 'attachment-text';\n        // 创建文本段落\n        const textP = document.createElement('p');\n        textP.textContent = description;\n        // 组装结构\n        textDiv.appendChild(textP);\n        contentDiv.appendChild(textDiv);\n        details.appendChild(summary);\n        details.appendChild(contentDiv);\n        attachmentContainer.appendChild(details);\n        container.appendChild(attachmentContainer);\n    }\n    /**\n     * 渲染语音消息\n     */\n    renderVoiceMessage(container, message) {\n        // 解析语音内容和时长\n        const parts = message.content.split('|');\n        const voiceContent = parts[0] || '语音消息'; // 实际语音内容\n        const duration = parts[1] || '0'; // 语音时长（秒）\n        const voiceDiv = document.createElement('div');\n        voiceDiv.className = 'voice-message';\n        // 语音图标 - 使用HTML模板，如果模板不存在则创建默认图标\n        const voiceIcon = document.createElement('div');\n        voiceIcon.className = 'voice-icon';\n        const voiceIconTemplate = document.getElementById('voiceIconTemplate');\n        if (voiceIconTemplate) {\n            voiceIcon.innerHTML = voiceIconTemplate.innerHTML;\n        }\n        else {\n            // 如果模板不存在，创建默认的图标结构\n            console.warn('语音图标模板未找到，使用默认图标');\n            voiceIcon.innerHTML = `\n        <svg class=\"mic-icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n          <path d=\"M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z\" />\n        </svg>\n        <svg class=\"pause-icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"display: none\">\n          <path d=\"M14,19H18V5H14M6,19H10V5H6V19Z\" />\n        </svg>\n      `;\n        }\n        // 声波动画容器\n        const waveContainer = document.createElement('div');\n        waveContainer.className = 'voice-wave-container';\n        // 创建多个声波条\n        for (let i = 0; i < 5; i++) {\n            const wave = document.createElement('div');\n            wave.className = 'voice-wave';\n            wave.style.animationDelay = `${i * 0.1}s`;\n            waveContainer.appendChild(wave);\n        }\n        // 语音时长显示\n        const voiceDuration = document.createElement('span');\n        voiceDuration.className = 'voice-duration';\n        voiceDuration.textContent = `${duration}\"`;\n        voiceDiv.appendChild(voiceIcon);\n        voiceDiv.appendChild(waveContainer);\n        voiceDiv.appendChild(voiceDuration);\n        container.appendChild(voiceDiv);\n        // 创建转录文本容器（初始隐藏）\n        const transcriptDiv = document.createElement('div');\n        transcriptDiv.className = 'voice-transcript';\n        transcriptDiv.textContent = voiceContent; // 显示实际的语音内容\n        transcriptDiv.style.display = 'none';\n        // 存储语音内容到语音消息元素上，方便后续访问\n        voiceDiv.setAttribute('data-voice-content', voiceContent);\n        voiceDiv.setAttribute('data-duration', duration);\n        // 将转录文本添加到容器后面\n        container.appendChild(transcriptDiv);\n    }\n    /**\n     * 添加语音消息交互功能\n     */\n    addVoiceMessageInteractions(voiceDiv, transcriptDiv, voiceContent, duration) {\n        let isExpanded = false;\n        // 点击展开/收起语音消息\n        voiceDiv.addEventListener('click', e => {\n            e.stopPropagation();\n            isExpanded = !isExpanded;\n            if (isExpanded) {\n                // 展开状态：显示动画和转录文本\n                voiceDiv.classList.add('expanded');\n                transcriptDiv.style.display = 'block';\n                transcriptDiv.classList.add('show');\n            }\n            else {\n                // 收起状态：隐藏动画和转录文本\n                voiceDiv.classList.remove('expanded');\n                transcriptDiv.style.display = 'none';\n                transcriptDiv.classList.remove('show');\n            }\n            this.soundManager.playSound('click');\n        });\n    }\n    /**\n     * 渲染表情包消息\n     */\n    renderStickerMessage(container, message) {\n        const sticker = document.createElement('img');\n        sticker.src = this.messageParser.processImageUrl(message.content) || message.content;\n        sticker.className = 'message-sticker';\n        sticker.alt = '表情包';\n        sticker.loading = 'lazy';\n        sticker.onerror = () => {\n            sticker.classList.add('hidden');\n            const errorText = document.createElement('span');\n            errorText.textContent = '[表情包加载失败]';\n            errorText.className = 'error-text';\n            container.appendChild(errorText);\n        };\n        container.appendChild(sticker);\n    }\n    /**\n     * 渲染位置消息\n     */\n    renderLocationMessage(container, message) {\n        const locationDiv = document.createElement('div');\n        locationDiv.className = 'location-message';\n        // 位置图标 - 使用HTML模板\n        const locationIcon = document.createElement('div');\n        locationIcon.className = 'location-icon';\n        const locationIconTemplate = document.getElementById('locationIconTemplate');\n        if (locationIconTemplate) {\n            locationIcon.innerHTML = locationIconTemplate.innerHTML;\n        }\n        // 位置文本\n        const locationText = document.createElement('span');\n        locationText.className = 'location-text';\n        locationText.textContent = message.content || '位置信息';\n        locationDiv.appendChild(locationIcon);\n        locationDiv.appendChild(locationText);\n        container.appendChild(locationDiv);\n    }\n    /**\n     * 渲染转账消息 - 匹配原版复杂样式\n     */\n    renderTransferMessage(container, message) {\n        const parts = message.content.split('|');\n        const amount = parts[0] || '0';\n        const note = parts[1] || '等待接收';\n        // 创建转账气泡 - 匹配原版样式\n        const transferBubble = document.createElement('div');\n        transferBubble.className = 'transfer-bubble';\n        // 转账内容容器\n        const transferContent = document.createElement('div');\n        transferContent.className = 'transfer-content';\n        // 转账图标 - 使用HTML模板\n        const transferIcon = document.createElement('div');\n        transferIcon.className = 'transfer-icon';\n        const transferIconTemplate = document.getElementById('transferIconTemplate');\n        if (transferIconTemplate) {\n            transferIcon.innerHTML = transferIconTemplate.innerHTML;\n        }\n        // 转账信息\n        const transferInfo = document.createElement('div');\n        transferInfo.className = 'transfer-info';\n        const transferAmount = document.createElement('div');\n        transferAmount.className = 'transfer-amount';\n        // 样式已移动到 SCSS\n        transferAmount.textContent = `￥${amount}`;\n        const transferStatus = document.createElement('div');\n        transferStatus.className = 'transfer-status';\n        // 只有当note是明确的状态时才添加颜色类\n        // 否则保持默认颜色（灰色）\n        if (note === '已接收') {\n            transferStatus.classList.add('completed');\n        }\n        else if (note === '已退回' || note === '已拒绝') {\n            transferStatus.classList.add('failed');\n        }\n        else if (note === '待接收') {\n            transferStatus.classList.add('pending');\n        }\n        // 如果note是用户备注（不是状态），则不添加任何状态类，保持默认灰色\n        transferStatus.textContent = note;\n        // 组装结构\n        transferInfo.appendChild(transferAmount);\n        transferInfo.appendChild(transferStatus);\n        transferContent.appendChild(transferIcon);\n        transferContent.appendChild(transferInfo);\n        transferBubble.appendChild(transferContent);\n        // 如果是用户发送的转账，添加用户转账类\n        if (this.isUserSender(message.sender)) {\n            transferBubble.classList.add('user-transfer');\n            // 用户发送的转账不可点击，不添加任何事件监听器\n        }\n        else {\n            // 非用户转账可以悬停，样式在CSS中处理\n            // 转账点击事件 - 只有非用户发送的转账才可点击\n            transferBubble.addEventListener('click', () => {\n                this.handleTransferClick(message, transferStatus);\n                this.soundManager.playSound('click');\n            });\n        }\n        container.appendChild(transferBubble);\n    }\n    /**\n     * 添加消息动画效果\n     */\n    addMessageAnimation(messageElement) {\n        // 添加淡入动画类\n        messageElement.classList.add('message-animation');\n        // 使用requestAnimationFrame确保动画流畅\n        requestAnimationFrame(() => {\n            messageElement.classList.add('show');\n        });\n    }\n    /**\n     * 添加消息交互事件\n     */\n    addMessageInteractions(messageElement, message) {\n        // 1. 消息气泡交互\n        this.addBubbleInteractions(messageElement, message);\n        // 2. 头像交互\n        this.addAvatarInteractions(messageElement, message);\n        // 3. 时间戳交互\n        this.addTimestampInteractions(messageElement, message);\n        // 4. 特殊消息类型交互\n        this.addSpecialMessageInteractions(messageElement, message);\n        // 5. 双击编辑功能（仅对待发送消息）\n        if (message.isPending) {\n            this.addDoubleClickEdit(messageElement, message);\n        }\n    }\n    /**\n     * 添加消息气泡交互\n     */\n    addBubbleInteractions(messageElement, message) {\n        const messageWrapper = messageElement.querySelector('.message-wrapper');\n        const messageContent = messageElement.querySelector('.message-content');\n        if (messageContent) {\n            // 转账消息的点击事件已在renderTransferMessage中处理，避免重复\n            if (message.messageType !== 'transfer') {\n                // 点击气泡音效\n                messageContent.addEventListener('click', e => {\n                    // 阻止事件冒泡，避免重复触发\n                    e.stopPropagation();\n                    this.soundManager.playSound('click');\n                    // 添加点击反馈效果\n                    this.addClickFeedback(messageContent);\n                });\n            }\n            // 双击编辑功能已在addMessageInteractions中统一处理，避免重复\n        }\n    }\n    /**\n     * 添加头像交互\n     */\n    addAvatarInteractions(messageElement, message) {\n        const avatar = messageElement.querySelector('.avatar');\n        if (avatar) {\n            // 头像点击音效和交互\n            avatar.addEventListener('click', e => {\n                e.stopPropagation();\n                this.soundManager.playSound('avatar');\n                // 头像点击效果\n                this.addAvatarClickEffect(avatar);\n            });\n            // 用户头像双击事件（删除消息和重roll功能）\n            const isUserMessage = this.isUserSender(message.sender);\n            if (isUserMessage) {\n                avatar.addEventListener('dblclick', e => {\n                    // 在批量删除模式下禁用双击菜单\n                    if (this.isBatchDeleteMode) {\n                        return;\n                    }\n                    e.stopPropagation();\n                    this.showUserMessageContextMenu(e, message, messageElement);\n                });\n            }\n            // 头像悬停效果\n            avatar.classList.add('avatar-hover');\n        }\n    }\n    /**\n     * 添加时间戳交互\n     */\n    addTimestampInteractions(messageElement, message) {\n        // 时间戳交互功能已移除，保持简洁\n    }\n    /**\n     * 添加特殊消息类型交互\n     */\n    addSpecialMessageInteractions(messageElement, message) {\n        switch (message.messageType) {\n            case 'image':\n                // 移除图片点击预览功能 - 图片不再可点击\n                break;\n            case 'voice':\n                this.addVoiceInteractions(messageElement, message);\n                break;\n            case 'sticker':\n                this.addStickerInteractions(messageElement, message);\n                break;\n            case 'transfer':\n                // 转账交互已在renderTransferMessage中处理\n                break;\n        }\n    }\n    /**\n     * 统一为转账气泡添加事件委托，保证首次渲染即可点击\n     * 使用捕获阶段监听，避免与后续绑定的冲突和丢失\n     */\n    initializeTransferClickDelegation() {\n        try {\n            if (this.transferDelegationBound)\n                return;\n            const handler = (ev) => {\n                const target = ev.target;\n                if (!target || !('closest' in target))\n                    return;\n                const bubble = target.closest?.('.transfer-bubble');\n                if (!bubble)\n                    return;\n                // 仅处理聊天消息区域的转账气泡\n                if (!bubble.closest('#chatMessages'))\n                    return;\n                // 找到所属消息元素和消息ID\n                const messageEl = bubble.closest('.message');\n                const messageId = messageEl?.dataset.messageId;\n                if (!messageId)\n                    return;\n                // 在当前聊天数据或发送队列中查找消息\n                const currentChatData = this.chatData.get(this.currentChat);\n                let msg = currentChatData?.messages.find(m => m.id === messageId) ||\n                    this.sendQueue.find(m => m.id === messageId);\n                if (!msg)\n                    return;\n                // 用户自己发起的转账不可点击（保持原设计）\n                if (this.isUserSender(msg.sender))\n                    return;\n                if (msg.messageType !== 'transfer')\n                    return;\n                const statusEl = bubble.querySelector('.transfer-status');\n                // 捕获阶段拦截，防止冒泡到可能的其他处理器，避免重复执行\n                ev.stopPropagation();\n                this.handleTransferClick(msg, statusEl || undefined);\n                this.soundManager.playSound('click');\n            };\n            document.addEventListener('click', handler, true);\n            this.transferDelegationBound = true;\n            console.log('[BearChatManager] 转账点击事件委托已启用');\n        }\n        catch (err) {\n            console.warn('initializeTransferClickDelegation 失败:', err);\n        }\n    }\n    /**\n     * 添加双击编辑功能\n     */\n    addDoubleClickEdit(element, message) {\n        // 找到消息内容元素\n        const messageContent = element.querySelector('.message-content');\n        if (!messageContent) {\n            return;\n        }\n        const handleDoubleClick = (e) => {\n            this.handleMessageEdit(message);\n            this.soundManager.playSound('click');\n            // 阻止事件冒泡和默认行为\n            e.stopPropagation();\n            e.preventDefault();\n        };\n        // 使用原生的dblclick事件，更可靠\n        messageContent.addEventListener('dblclick', handleDoubleClick, true); // 使用capture模式\n    }\n    /**\n     * 添加点击反馈效果\n     */\n    addClickFeedback(element) {\n        element.classList.add('click-feedback');\n        setTimeout(() => {\n            element.classList.remove('click-feedback');\n        }, 100);\n    }\n    /**\n     * 添加头像点击效果\n     */\n    addAvatarClickEffect(avatar) {\n        avatar.classList.add('avatar-click-effect');\n        setTimeout(() => {\n            avatar.classList.remove('avatar-click-effect');\n        }, 150);\n    }\n    /**\n     * 添加语音交互\n     */\n    addVoiceInteractions(messageElement, message) {\n        const voiceMessage = messageElement.querySelector('.voice-message');\n        const transcriptDiv = messageElement.querySelector('.voice-transcript');\n        if (voiceMessage && transcriptDiv) {\n            let isExpanded = false;\n            const micIcon = voiceMessage.querySelector('.mic-icon');\n            const pauseIcon = voiceMessage.querySelector('.pause-icon');\n            voiceMessage.addEventListener('click', e => {\n                e.stopPropagation();\n                isExpanded = !isExpanded;\n                if (isExpanded) {\n                    // 展开状态：显示动画和转录文本，切换到播放图标\n                    voiceMessage.classList.add('expanded');\n                    transcriptDiv.style.display = 'block';\n                    transcriptDiv.classList.add('show');\n                    // 切换图标\n                    if (micIcon)\n                        micIcon.style.display = 'none';\n                    if (pauseIcon)\n                        pauseIcon.style.display = 'block';\n                }\n                else {\n                    // 收起状态：隐藏动画和转录文本，切换到麦克风图标\n                    voiceMessage.classList.remove('expanded');\n                    transcriptDiv.style.display = 'none';\n                    transcriptDiv.classList.remove('show');\n                    // 切换图标\n                    if (micIcon)\n                        micIcon.style.display = 'block';\n                    if (pauseIcon)\n                        pauseIcon.style.display = 'none';\n                }\n                this.soundManager.playSound('click');\n            });\n        }\n    }\n    /**\n     * 确保语音消息的事件绑定（用于新消息渲染后的补充绑定）\n     */\n    ensureVoiceMessageInteractions(messageElement, message) {\n        // 只处理语音消息\n        if (message.messageType !== 'voice') {\n            return;\n        }\n        const voiceMessage = messageElement.querySelector('.voice-message');\n        const transcriptDiv = messageElement.querySelector('.voice-transcript');\n        // 检查是否已经绑定了事件（避免重复绑定）\n        if (voiceMessage && !voiceMessage.hasAttribute('data-voice-bound')) {\n            // 标记已绑定，避免重复绑定\n            voiceMessage.setAttribute('data-voice-bound', 'true');\n            // 等待模板内容加载完成\n            const checkAndBind = () => {\n                const micIcon = voiceMessage.querySelector('.mic-icon');\n                const pauseIcon = voiceMessage.querySelector('.pause-icon');\n                // 如果图标元素存在，说明模板已加载完成\n                if (micIcon && pauseIcon && transcriptDiv) {\n                    let isExpanded = false;\n                    // 移除可能存在的旧事件监听器\n                    const newVoiceMessage = voiceMessage.cloneNode(true);\n                    voiceMessage.parentNode?.replaceChild(newVoiceMessage, voiceMessage);\n                    // 重新获取元素引用\n                    const newMicIcon = newVoiceMessage.querySelector('.mic-icon');\n                    const newPauseIcon = newVoiceMessage.querySelector('.pause-icon');\n                    // 绑定点击事件\n                    newVoiceMessage.addEventListener('click', e => {\n                        e.stopPropagation();\n                        isExpanded = !isExpanded;\n                        if (isExpanded) {\n                            // 展开状态：显示动画和转录文本，切换到播放图标\n                            newVoiceMessage.classList.add('expanded');\n                            transcriptDiv.style.display = 'block';\n                            transcriptDiv.classList.add('show');\n                            // 切换图标\n                            if (newMicIcon)\n                                newMicIcon.style.display = 'none';\n                            if (newPauseIcon)\n                                newPauseIcon.style.display = 'block';\n                        }\n                        else {\n                            // 收起状态：隐藏动画和转录文本，切换到麦克风图标\n                            newVoiceMessage.classList.remove('expanded');\n                            transcriptDiv.style.display = 'none';\n                            transcriptDiv.classList.remove('show');\n                            // 切换图标\n                            if (newMicIcon)\n                                newMicIcon.style.display = 'block';\n                            if (newPauseIcon)\n                                newPauseIcon.style.display = 'none';\n                        }\n                        this.soundManager.playSound('click');\n                    });\n                    console.log('✅ 语音消息事件绑定成功');\n                }\n                else {\n                    // 如果模板还没加载完成，延迟重试\n                    setTimeout(checkAndBind, 50);\n                }\n            };\n            // 开始检查和绑定\n            checkAndBind();\n        }\n    }\n    /**\n     * 添加表情包交互\n     */\n    addStickerInteractions(messageElement, message) {\n        const sticker = messageElement.querySelector('.message-sticker');\n        if (sticker) {\n            sticker.addEventListener('click', () => {\n                this.soundManager.playSound('emoji');\n                this.addStickerAnimation(sticker);\n            });\n        }\n    }\n    /**\n     * 添加表情包动画\n     */\n    addStickerAnimation(sticker) {\n        // 先移除之前的动画类，确保可以重复触发\n        sticker.classList.remove('sticker-animation', 'reset');\n        // 强制重绘，确保类被完全移除\n        sticker.offsetHeight;\n        // 添加动画类\n        sticker.classList.add('sticker-animation');\n        setTimeout(() => {\n            sticker.classList.add('reset');\n            // 动画结束后移除所有动画类，为下次动画做准备\n            setTimeout(() => {\n                sticker.classList.remove('sticker-animation', 'reset');\n            }, 100);\n        }, 300);\n    }\n    /**\n     * 显示提示消息\n     * @param message 提示消息内容\n     * @param type 提示类型：info, success, warning, error\n     */\n    /**\n     * 滚动到底部\n     */\n    scrollToBottom(container) {\n        container.scrollTop = container.scrollHeight;\n    }\n    // ==================== 模态框管理系统 ====================\n    /**\n     * 创建模态框遮罩层\n     * @returns 遮罩层元素\n     */\n    createModalOverlay() {\n        const overlay = document.createElement('div');\n        overlay.className = 'modal-overlay';\n        // 点击遮罩层关闭模态框\n        overlay.addEventListener('click', e => {\n            if (e.target === overlay) {\n                this.hideModal();\n            }\n        });\n        return overlay;\n    }\n    /**\n     * 创建模态框容器\n     * @param title 模态框标题\n     * @param content 模态框内容元素\n     * @returns 模态框容器元素\n     */\n    createModalContainer(title, content) {\n        const modal = document.createElement('div');\n        modal.className = 'modal-container';\n        // 创建标题\n        const titleElement = document.createElement('div');\n        titleElement.className = 'modal-title';\n        titleElement.textContent = title;\n        // 创建内容区域\n        const contentArea = document.createElement('div');\n        contentArea.className = 'modal-content';\n        contentArea.appendChild(content);\n        modal.appendChild(titleElement);\n        modal.appendChild(contentArea);\n        return modal;\n    }\n    /**\n     * 显示模态框\n     * @param title 模态框标题\n     * @param content 模态框内容元素\n     * @param playSound 是否播放音效，默认为true\n     * @returns 遮罩层元素，用于后续操作\n     */\n    showModal(title, content, playSound = true) {\n        // 创建遮罩层和模态框\n        const overlay = this.createModalOverlay();\n        const modal = this.createModalContainer(title, content);\n        overlay.appendChild(modal);\n        // 添加到界面容器中\n        const interfaceContainer = document.querySelector('.interface-container');\n        const container = interfaceContainer || document.body;\n        container.appendChild(overlay);\n        // 添加显示动画\n        setTimeout(() => {\n            overlay.classList.add('show');\n        }, 10);\n        // 添加ESC键关闭功能\n        const handleEscKey = (e) => {\n            if (e.key === 'Escape') {\n                this.hideModal();\n                document.removeEventListener('keydown', handleEscKey);\n            }\n        };\n        document.addEventListener('keydown', handleEscKey);\n        // 可选择性播放音效\n        if (playSound) {\n            this.soundManager.playSound('click');\n        }\n        return overlay;\n    }\n    /**\n     * 隐藏模态框\n     */\n    hideModal() {\n        const overlay = document.querySelector('.modal-overlay');\n        if (overlay) {\n            overlay.classList.remove('show');\n            setTimeout(() => {\n                if (overlay.parentNode) {\n                    overlay.parentNode.removeChild(overlay);\n                }\n            }, 300);\n        }\n        // 播放音效\n        this.soundManager.playSound('click');\n    }\n    /**\n     * 处理模态框确认操作\n     * @param callback 确认回调函数\n     */\n    handleModalConfirm(callback) {\n        if (callback) {\n            callback();\n        }\n        this.hideModal();\n    }\n    /**\n     * 处理模态框取消操作\n     * @param callback 取消回调函数\n     */\n    handleModalCancel(callback) {\n        if (callback) {\n            callback();\n        }\n        this.hideModal();\n    }\n    /**\n     * 创建带有确认和取消按钮的模态框内容\n     * @param content 主要内容元素\n     * @param onConfirm 确认回调\n     * @param onCancel 取消回调\n     * @param confirmText 确认按钮文本\n     * @param cancelText 取消按钮文本\n     * @returns 完整的模态框内容元素\n     */\n    createModalWithButtons(content, onConfirm, onCancel, showConfirmButton = true, confirmText = '确认', cancelText = '取消') {\n        const container = document.createElement('div');\n        // 添加主要内容\n        container.appendChild(content);\n        // 创建按钮区域\n        const buttonArea = document.createElement('div');\n        buttonArea.className = 'modal-buttons';\n        // 取消按钮\n        const cancelBtn = document.createElement('button');\n        cancelBtn.className = 'modal-btn cancel-btn';\n        cancelBtn.textContent = cancelText;\n        cancelBtn.addEventListener('click', () => {\n            this.handleModalCancel(onCancel);\n        });\n        buttonArea.appendChild(cancelBtn);\n        // 确认按钮（可选）\n        if (showConfirmButton && onConfirm) {\n            const confirmBtn = document.createElement('button');\n            confirmBtn.className = 'modal-btn confirm-btn';\n            confirmBtn.textContent = confirmText;\n            confirmBtn.addEventListener('click', () => {\n                this.handleModalConfirm(onConfirm);\n            });\n            buttonArea.appendChild(confirmBtn);\n        }\n        container.appendChild(buttonArea);\n        return container;\n    }\n    handleTransferClick(message, statusElement) {\n        // 只有非用户发送的转账才显示弹窗\n        if (message.sender === '{{user}}' || message.sender === 'user') {\n            return;\n        }\n        const parts = message.content.split('|');\n        const amount = parts[0] || '0';\n        // 从保存的数据中获取原始转账留言\n        const originalNote = message.data?.originalNote || '';\n        this.showTransferModal(message.sender, amount, originalNote, (accepted) => {\n            const statusText = accepted ? '已接收' : '已退回';\n            if (statusElement) {\n                statusElement.textContent = statusText;\n                // 移除旧的状态类\n                statusElement.classList.remove('completed', 'failed');\n                // 添加新的状态类\n                statusElement.classList.add(accepted ? 'completed' : 'failed');\n            }\n            // 更新原始转账消息的状态\n            message.content = `${amount}|${statusText}`;\n            // 发送用户的转账响应消息\n            this.sendTransferResponse(message.sender, amount, accepted);\n        });\n    }\n    /**\n     * 显示转账确认弹窗\n     */\n    showTransferModal(senderName, amount, note, callback) {\n        // 创建遮罩层\n        const overlay = document.createElement('div');\n        overlay.className = 'modal-overlay';\n        // 创建弹窗 - 使用HTML模板\n        const modal = document.createElement('div');\n        const transferModalTemplate = document.getElementById('transferModalTemplate');\n        if (transferModalTemplate) {\n            modal.innerHTML = transferModalTemplate.innerHTML;\n            modal.className = 'transfer-modal';\n            // 填充动态数据\n            const senderNameSpan = modal.querySelector('.sender-name');\n            const amountValueSpan = modal.querySelector('.amount-value');\n            const transferNoteSpan = modal.querySelector('.transfer-note');\n            if (senderNameSpan)\n                senderNameSpan.textContent = senderName;\n            if (amountValueSpan)\n                amountValueSpan.textContent = amount;\n            if (transferNoteSpan)\n                transferNoteSpan.textContent = note || '转账';\n        }\n        // CSS动画已在SCSS文件中定义\n        overlay.appendChild(modal);\n        // 添加显示动画\n        setTimeout(() => {\n            overlay.classList.add('show');\n        }, 10);\n        // 将遮罩层添加到手机界面容器中，而不是整个页面\n        const interfaceContainer = document.querySelector('.interface-container');\n        if (interfaceContainer) {\n            interfaceContainer.appendChild(overlay);\n        }\n        else {\n            // 如果找不到界面容器，则添加到聊天界面\n            const chatContainer = document.querySelector('.chat-container');\n            if (chatContainer) {\n                chatContainer.appendChild(overlay);\n            }\n            else {\n                document.body.appendChild(overlay);\n            }\n        }\n        // 按钮事件\n        const acceptBtn = modal.querySelector('.accept-btn');\n        const rejectBtn = modal.querySelector('.reject-btn');\n        const removeTransferOverlay = () => {\n            if (overlay.parentNode) {\n                overlay.parentNode.removeChild(overlay);\n            }\n        };\n        acceptBtn.addEventListener('click', () => {\n            callback(true);\n            removeTransferOverlay();\n            this.soundManager.playSound('click');\n        });\n        rejectBtn.addEventListener('click', () => {\n            callback(false);\n            removeTransferOverlay();\n            this.soundManager.playSound('click');\n        });\n        // 点击遮罩关闭\n        overlay.addEventListener('click', e => {\n            if (e.target === overlay) {\n                removeTransferOverlay();\n            }\n        });\n    }\n    /**\n     * 发送转账响应消息\n     */\n    sendTransferResponse(senderName, amount, accepted) {\n        // 生成转账响应消息的唯一标识符\n        const transferResponseId = `transfer_response_${senderName}_${amount}`;\n        // 确定状态文本\n        const statusText = accepted ? '已接收' : '已退回';\n        // 判断是否群聊：优先看 ChatData.type，其次看 chatId 前缀\n        const currentChatData = this.chatData.get(this.currentChat);\n        const isGroupChat = currentChatData?.type === 'group' || this.currentChat.startsWith('群聊');\n        // 创建转账格式的响应消息\n        const responseMessage = {\n            id: transferResponseId,\n            type: isGroupChat ? 'G' : 'S',\n            chatId: this.currentChat,\n            sender: '{{user}}',\n            avatar: '',\n            messageType: 'transfer', // 使用转账消息类型\n            content: `${amount}|${statusText}`, // 转账格式：金额|状态\n            timestamp: new Date().toLocaleTimeString('zh-CN', {\n                hour: '2-digit',\n                minute: '2-digit',\n            }),\n        };\n        // 检查发送队列中是否已存在相同转账的响应消息\n        const existingIndex = this.sendQueue.findIndex(msg => msg.id === transferResponseId ||\n            (msg.content.includes(amount) && msg.sender === '{{user}}' && msg.messageType === 'transfer'));\n        if (existingIndex !== -1) {\n            // 如果存在，替换现有消息\n            this.sendQueue[existingIndex] = responseMessage;\n            console.log('替换转账响应消息:', responseMessage);\n        }\n        else {\n            // 如果不存在，添加新消息\n            this.sendQueue.push(responseMessage);\n            console.log('添加转账响应消息:', responseMessage);\n        }\n        // 更新待发送消息显示\n        this.renderCurrentChat();\n    }\n    handleMessageEdit(message) {\n        // 只允许编辑待发送的消息\n        if (!message.isPending) {\n            console.log('只能编辑待发送的消息');\n            return;\n        }\n        // 创建编辑弹窗\n        this.showEditDialog(message);\n    }\n    /**\n     * 显示编辑弹窗\n     */\n    showEditDialog(message) {\n        // 创建弹窗背景\n        const overlay = document.createElement('div');\n        overlay.className = 'edit-modal-overlay';\n        // 创建弹窗内容\n        const dialog = document.createElement('div');\n        dialog.className = 'edit-modal-dialog';\n        // 创建标题\n        const title = document.createElement('h3');\n        title.textContent = '编辑消息';\n        title.className = 'edit-modal-title';\n        // 创建输入框\n        const textarea = document.createElement('textarea');\n        textarea.value = message.content;\n        textarea.className = 'edit-modal-textarea';\n        // 创建按钮容器\n        const buttonContainer = document.createElement('div');\n        buttonContainer.className = 'edit-modal-buttons';\n        // 创建取消按钮\n        const cancelBtn = document.createElement('button');\n        cancelBtn.textContent = '取消';\n        cancelBtn.className = 'edit-modal-cancel-btn';\n        // 创建确认按钮\n        const confirmBtn = document.createElement('button');\n        confirmBtn.textContent = '确认';\n        confirmBtn.className = 'edit-modal-confirm-btn';\n        const removeEditOverlay = () => {\n            if (overlay.parentNode) {\n                overlay.parentNode.removeChild(overlay);\n            }\n        };\n        // 按钮事件\n        cancelBtn.addEventListener('click', () => {\n            removeEditOverlay();\n            this.soundManager.playSound('click');\n        });\n        confirmBtn.addEventListener('click', () => {\n            const newContent = textarea.value.trim();\n            if (newContent && newContent !== message.content) {\n                this.updateMessageInQueue(message.id, newContent);\n                console.log(`消息已更新: ${message.content} -> ${newContent}`);\n            }\n            removeEditOverlay();\n            this.soundManager.playSound('send');\n        });\n        // 组装弹窗\n        buttonContainer.appendChild(cancelBtn);\n        buttonContainer.appendChild(confirmBtn);\n        dialog.appendChild(title);\n        dialog.appendChild(textarea);\n        dialog.appendChild(buttonContainer);\n        overlay.appendChild(dialog);\n        // 将遮罩层添加到手机界面容器中\n        const interfaceContainer = document.querySelector('.interface-container');\n        if (interfaceContainer) {\n            interfaceContainer.appendChild(overlay);\n        }\n        else {\n            // 如果找不到界面容器，则添加到聊天界面\n            const chatInterface = document.querySelector('.chat-interface');\n            if (chatInterface) {\n                chatInterface.appendChild(overlay);\n            }\n            else {\n                document.body.appendChild(overlay);\n            }\n        }\n        textarea.focus();\n        textarea.select();\n        const removeEditModalOverlay = () => {\n            if (overlay.parentNode) {\n                overlay.parentNode.removeChild(overlay);\n            }\n        };\n        // 点击背景关闭\n        overlay.addEventListener('click', e => {\n            if (e.target === overlay) {\n                removeEditModalOverlay();\n                this.soundManager.playSound('click');\n            }\n        });\n    }\n    /**\n     * 更新队列中的消息内容\n     */\n    updateMessageInQueue(messageId, newContent) {\n        const messageIndex = this.sendQueue.findIndex(msg => msg.id === messageId);\n        if (messageIndex !== -1) {\n            this.sendQueue[messageIndex].content = newContent;\n            // 只重新渲染这一条消息，而不是整个聊天\n            this.updateSingleMessage(messageId, this.sendQueue[messageIndex]);\n            console.log(`队列中的消息已更新，消息ID: ${messageId}`);\n        }\n    }\n    /**\n     * 更新单条消息的显示\n     */\n    updateSingleMessage(messageId, updatedMessage) {\n        // 找到对应的消息元素\n        const messageElement = document.querySelector(`[data-message-id=\"${messageId}\"]`);\n        if (!messageElement) {\n            console.warn(`找不到消息元素，ID: ${messageId}`);\n            return;\n        }\n        // 创建新的消息元素\n        const newMessageElement = this.createMessageElement(updatedMessage);\n        // 替换旧的消息元素\n        messageElement.parentNode?.replaceChild(newMessageElement, messageElement);\n        console.log(`单条消息已更新显示，ID: ${messageId}`);\n    }\n    /**\n     * 添加消息到发送队列\n     */\n    addToSendQueue(message) {\n        // 检查是否已存在相同ID的消息\n        const existingIndex = this.sendQueue.findIndex(msg => msg.id === message.id);\n        if (existingIndex !== -1) {\n            // 更新现有消息\n            this.sendQueue[existingIndex] = message;\n        }\n        else {\n            // 添加新消息\n            this.sendQueue.push(message);\n        }\n        console.log(`消息已添加到队列，当前待发送消息: ${this.sendQueue.length}`);\n    }\n    /**\n     * 从发送队列中移除消息\n     */\n    removeFromSendQueue(messageId) {\n        const index = this.sendQueue.findIndex(msg => msg.id === messageId);\n        if (index !== -1) {\n            this.sendQueue.splice(index, 1);\n            console.log('消息已从队列移除');\n        }\n    }\n    /**\n     * 获取当前聊天的待发送消息\n     */\n    getPendingMessagesForCurrentChat() {\n        return this.sendQueue.filter(msg => msg.chatId === this.currentChat);\n    }\n    generateMessageId() {\n        return 'msg_' + Date.now() + '_' + Math.random().toString(36).substring(2, 9);\n    }\n    /**\n     * 获取当前时间\n     * 如果有历史记录，使用最新消息时间+1分钟；否则使用真实时间\n     * @returns 格式化的时间字符串\n     */\n    getCurrentTime() {\n        // 获取当前聊天的数据\n        const currentChatData = this.chatData.get(this.currentChat);\n        if (currentChatData && currentChatData.messages && currentChatData.messages.length > 0) {\n            // 有历史记录，获取最新一条消息的时间\n            const lastMessage = currentChatData.messages[currentChatData.messages.length - 1];\n            if (lastMessage.timestamp) {\n                try {\n                    // 解析最新消息的时间戳\n                    const lastTime = this.parseTimeString(lastMessage.timestamp);\n                    if (lastTime) {\n                        // 加1分钟\n                        lastTime.setMinutes(lastTime.getMinutes() + 1);\n                        return lastTime.toLocaleTimeString('zh-CN', {\n                            hour: '2-digit',\n                            minute: '2-digit',\n                        });\n                    }\n                }\n                catch (error) {\n                    console.warn('解析最新消息时间失败，使用当前时间:', error);\n                }\n            }\n        }\n        // 没有历史记录或解析失败，使用当前真实时间\n        return new Date().toLocaleTimeString('zh-CN', {\n            hour: '2-digit',\n            minute: '2-digit',\n        });\n    }\n    /**\n     * 解析时间字符串为Date对象\n     * @param timeString 时间字符串 (如: \"14:30\")\n     * @returns Date对象或null\n     */\n    parseTimeString(timeString) {\n        try {\n            // 匹配 HH:MM 格式\n            const timeMatch = timeString.match(/^(\\d{1,2}):(\\d{2})$/);\n            if (timeMatch) {\n                const hours = parseInt(timeMatch[1], 10);\n                const minutes = parseInt(timeMatch[2], 10);\n                if (hours >= 0 && hours <= 23 && minutes >= 0 && minutes <= 59) {\n                    const date = new Date();\n                    date.setHours(hours, minutes, 0, 0);\n                    return date;\n                }\n            }\n            return null;\n        }\n        catch (error) {\n            console.warn('解析时间字符串失败:', timeString, error);\n            return null;\n        }\n    }\n    /**\n     * 清理过期的临时图片数据\n     */\n    cleanupTempImages() {\n        try {\n            const keys = Object.keys(localStorage);\n            const tempImageKeys = keys.filter(key => key.startsWith('temp_image_'));\n            // 如果临时图片超过50个，清理最旧的\n            if (tempImageKeys.length > 50) {\n                // 按时间戳排序，删除最旧的\n                tempImageKeys.sort((a, b) => {\n                    const timeA = parseInt(a.split('_')[2]) || 0;\n                    const timeB = parseInt(b.split('_')[2]) || 0;\n                    return timeA - timeB;\n                });\n                // 删除最旧的一半\n                const toDelete = tempImageKeys.slice(0, Math.floor(tempImageKeys.length / 2));\n                toDelete.forEach(key => {\n                    localStorage.removeItem(key);\n                });\n                console.log(`清理了 ${toDelete.length} 个临时图片数据`);\n            }\n        }\n        catch (error) {\n            console.warn('清理临时图片数据失败:', error);\n        }\n    }\n    /**\n     * 创建图片输入模态框内容\n     * @returns 模态框内容元素\n     */\n    createImageInputModal() {\n        const template = document.getElementById('imageInputModalTemplate');\n        if (template) {\n            const content = document.createElement('div');\n            content.innerHTML = template.innerHTML;\n            const modalContent = content.firstElementChild;\n            // 设置文件上传事件监听器\n            this.setupImageUploadEvents(modalContent);\n            return modalContent;\n        }\n        // 如果模板不存在，回退到动态创建（保持向后兼容）\n        const content = document.createElement('div');\n        content.className = 'modal-content';\n        content.innerHTML = `\n      <div class=\"image-upload-section\">\n        <label class=\"modal-label\">选择图片：</label>\n        <div class=\"upload-options\">\n          <div class=\"upload-row\">\n            <button type=\"button\" class=\"upload-btn local-upload-btn\" id=\"localUploadBtn\">\n              选择本地文件\n            </button>\n            <span class=\"upload-divider\">或</span>\n          </div>\n          <div class=\"upload-row\">\n            <input type=\"text\" class=\"modal-input url-input\" placeholder=\"输入图片链接...\" id=\"imageUrlInput\" />\n          </div>\n        </div>\n        <div class=\"file-preview\" id=\"filePreview\" style=\"display: none;\">\n          <img id=\"previewImage\" alt=\"预览图片\" />\n          <div class=\"file-info\">\n            <span id=\"fileName\"></span>\n            <button type=\"button\" class=\"remove-file-btn\" id=\"removeFileBtn\">✕</button>\n          </div>\n        </div>\n      </div>\n      \n      <label class=\"modal-label modal-label-spaced\">图片描述：</label>\n      <input type=\"text\" class=\"modal-input\" placeholder=\"请输入图片描述（可选）...\" id=\"imageDescInput\" />\n      \n      <input type=\"file\" id=\"fileInput\" accept=\"image/*\" style=\"display: none;\" />\n    `;\n        // 设置文件上传事件监听器\n        this.setupImageUploadEvents(content);\n        return content;\n    }\n    /**\n     * 设置图片上传事件监听器\n     * @param container 模态框容器元素\n     */\n    setupImageUploadEvents(container) {\n        const localUploadBtn = container.querySelector('#localUploadBtn');\n        const fileInput = container.querySelector('#fileInput');\n        const filePreview = container.querySelector('#filePreview');\n        const previewImage = container.querySelector('#previewImage');\n        const fileName = container.querySelector('#fileName');\n        const removeFileBtn = container.querySelector('#removeFileBtn');\n        const urlInput = container.querySelector('#imageUrlInput');\n        // 本地文件选择按钮点击\n        if (localUploadBtn && fileInput) {\n            localUploadBtn.addEventListener('click', () => {\n                fileInput.click();\n            });\n        }\n        // 文件选择变化\n        if (fileInput) {\n            fileInput.addEventListener('change', e => {\n                const target = e.target;\n                const file = target.files?.[0];\n                if (file) {\n                    this.handleFileSelection(file, filePreview, previewImage, fileName, urlInput);\n                }\n            });\n        }\n        // 移除文件按钮点击\n        if (removeFileBtn) {\n            removeFileBtn.addEventListener('click', () => {\n                this.clearFileSelection(fileInput, filePreview, urlInput);\n            });\n        }\n        // URL输入变化时清除文件选择\n        if (urlInput) {\n            urlInput.addEventListener('input', () => {\n                if (urlInput.value.trim() && fileInput) {\n                    this.clearFileSelection(fileInput, filePreview, null);\n                }\n            });\n        }\n    }\n    /**\n     * 处理文件选择\n     * @param file 选择的文件\n     * @param filePreview 预览容器\n     * @param previewImage 预览图片元素\n     * @param fileName 文件名元素\n     * @param urlInput URL输入框\n     */\n    handleFileSelection(file, filePreview, previewImage, fileName, urlInput) {\n        // 验证文件类型\n        if (!file.type.startsWith('image/')) {\n            this.showToast('请选择图片文件', 'error');\n            return;\n        }\n        // 验证文件大小（限制为5MB）\n        const maxSize = 5 * 1024 * 1024; // 5MB\n        if (file.size > maxSize) {\n            this.showToast('图片文件大小不能超过5MB', 'error');\n            return;\n        }\n        // 读取文件并显示预览\n        const reader = new FileReader();\n        reader.onload = e => {\n            const result = e.target?.result;\n            if (previewImage && fileName && filePreview) {\n                previewImage.src = result;\n                fileName.textContent = file.name;\n                filePreview.style.display = 'flex';\n                // 清空URL输入框\n                if (urlInput) {\n                    urlInput.value = '';\n                }\n            }\n        };\n        reader.readAsDataURL(file);\n    }\n    /**\n     * 清除文件选择\n     * @param fileInput 文件输入元素\n     * @param filePreview 预览容器\n     * @param urlInput URL输入框（可选）\n     */\n    clearFileSelection(fileInput, filePreview, urlInput) {\n        if (fileInput) {\n            fileInput.value = '';\n        }\n        if (filePreview) {\n            filePreview.style.display = 'none';\n        }\n        if (urlInput) {\n            urlInput.value = '';\n        }\n    }\n    /**\n     * 创建语音输入模态框内容\n     * @returns 模态框内容元素\n     */\n    createVoiceInputModal() {\n        const template = document.getElementById('voiceInputModalTemplate');\n        if (template) {\n            const content = document.createElement('div');\n            content.innerHTML = template.innerHTML;\n            return content.firstElementChild;\n        }\n        // 如果模板不存在，回退到动态创建（保持向后兼容）\n        const content = document.createElement('div');\n        content.className = 'modal-content';\n        content.innerHTML = `\n      <label class=\"modal-label\">语音内容：</label>\n      <input type=\"text\" class=\"modal-input\" placeholder=\"请输入语音内容...\" id=\"voiceContentInput\" />\n      \n      <label class=\"modal-label modal-label-spaced\">语音时长：</label>\n      <input type=\"number\" class=\"modal-input\" placeholder=\"请输入时长（秒）...\" id=\"voiceDurationInput\" min=\"1\" max=\"300\" />\n    `;\n        return content;\n    }\n    /**\n     * 创建位置输入模态框内容\n     * @returns 模态框内容元素\n     */\n    createLocationInputModal() {\n        const template = document.getElementById('locationInputModalTemplate');\n        if (template) {\n            const content = document.createElement('div');\n            content.innerHTML = template.innerHTML;\n            return content.firstElementChild;\n        }\n        // 如果模板不存在，回退到动态创建（保持向后兼容）\n        const content = document.createElement('div');\n        content.className = 'modal-content';\n        content.innerHTML = `\n      <label class=\"modal-label\">位置描述：</label>\n      <input type=\"text\" class=\"modal-input\" placeholder=\"请输入位置描述...\" id=\"locationDescInput\" />\n    `;\n        return content;\n    }\n    /**\n     * 创建转账输入模态框内容\n     * @returns 模态框内容元素\n     */\n    createTransferInputModal() {\n        const template = document.getElementById('transferInputModalTemplate');\n        if (template) {\n            const content = document.createElement('div');\n            content.innerHTML = template.innerHTML;\n            return content.firstElementChild;\n        }\n        // 如果模板不存在，回退到动态创建（保持向后兼容）\n        const content = document.createElement('div');\n        content.className = 'modal-content';\n        content.innerHTML = `\n      <label class=\"modal-label\">转账金额：</label>\n      <input type=\"number\" class=\"modal-input\" placeholder=\"请输入转账金额...\" id=\"transferAmountInput\" min=\"0.01\" step=\"0.01\" />\n      \n      <label class=\"modal-label modal-label-spaced\">转账备注：</label>\n      <input type=\"text\" class=\"modal-input\" placeholder=\"请输入转账备注（可选）...\" id=\"transferNoteInput\" />\n    `;\n        return content;\n    }\n    /**\n     * 显示图片输入模态框\n     */\n    showImageInputModal() {\n        const content = this.createImageInputModal();\n        // 创建带按钮的模态框\n        const modalContent = this.createModalWithButtons(content, () => {\n            // 确认回调\n            const urlInput = document.getElementById('imageUrlInput');\n            const descInput = document.getElementById('imageDescInput');\n            const fileInput = document.getElementById('fileInput');\n            const filePreview = document.getElementById('filePreview');\n            if (urlInput && descInput && fileInput) {\n                const url = urlInput.value.trim();\n                const description = descInput.value.trim();\n                const hasFile = fileInput.files && fileInput.files.length > 0;\n                const hasFilePreview = filePreview && filePreview.style.display !== 'none';\n                // 输入验证 - URL、文件或描述至少需要输入一个\n                if (!url && !hasFile && !hasFilePreview && !description) {\n                    this.showToast('请选择图片文件、输入图片URL或图片描述', 'warning');\n                    return;\n                }\n                // 如果有文件，使用文件；否则使用URL\n                if (hasFile && fileInput.files) {\n                    const file = fileInput.files[0];\n                    this.createImageMessageFromFile(file, description);\n                }\n                else if (hasFilePreview) {\n                    // 如果有预览但没有文件（可能是从预览中获取的base64）\n                    const previewImage = document.getElementById('previewImage');\n                    if (previewImage && previewImage.src) {\n                        this.createImageMessage(previewImage.src, description);\n                    }\n                }\n                else {\n                    // 使用URL\n                    this.createImageMessage(url, description);\n                }\n                this.hideModal();\n            }\n        }, () => {\n            // 取消回调\n            this.hideModal();\n        });\n        // 显示模态框（不播放音效，因为加号按钮已经播放了emoji音效）\n        this.showModal('发送图片', modalContent, false);\n    }\n    /**\n     * 显示语音输入模态框\n     */\n    showVoiceInputModal() {\n        const content = this.createVoiceInputModal();\n        // 创建带按钮的模态框\n        const modalContent = this.createModalWithButtons(content, () => {\n            // 确认回调\n            const contentInput = document.getElementById('voiceContentInput');\n            const durationInput = document.getElementById('voiceDurationInput');\n            if (contentInput && durationInput) {\n                const voiceContent = contentInput.value.trim();\n                const durationStr = durationInput.value.trim();\n                // 输入验证 - 内容和时长都必须填写\n                if (!voiceContent) {\n                    this.showToast('请输入语音内容', 'warning');\n                    return;\n                }\n                if (!durationStr) {\n                    this.showToast('请输入语音时长', 'warning');\n                    return;\n                }\n                // 验证时长是否为有效数字\n                const duration = parseFloat(durationStr);\n                if (isNaN(duration) || duration <= 0 || duration > 300) {\n                    this.showToast('请输入有效的时长（1-300秒）', 'warning');\n                    return;\n                }\n                // 创建语音消息\n                this.createVoiceMessage(voiceContent, duration);\n                this.hideModal();\n            }\n        }, () => {\n            // 取消回调\n            this.hideModal();\n        });\n        // 显示模态框（不播放音效，因为加号按钮已经播放了emoji音效）\n        this.showModal('发送语音', modalContent, false);\n    }\n    /**\n     * 显示位置输入模态框\n     */\n    showLocationInputModal() {\n        const content = this.createLocationInputModal();\n        // 创建带按钮的模态框\n        const modalContent = this.createModalWithButtons(content, () => {\n            // 确认回调\n            const descInput = document.getElementById('locationDescInput');\n            if (descInput) {\n                const locationDesc = descInput.value.trim();\n                // 输入验证 - 位置描述必须填写\n                if (!locationDesc) {\n                    this.showToast('请输入位置描述', 'warning');\n                    return;\n                }\n                // 创建位置消息\n                this.createLocationMessage(locationDesc);\n                this.hideModal();\n            }\n        }, () => {\n            // 取消回调\n            this.hideModal();\n        });\n        // 显示模态框（不播放音效，因为加号按钮已经播放了emoji音效）\n        this.showModal('分享位置', modalContent, false);\n    }\n    /**\n     * 显示转账输入模态框\n     */\n    showTransferInputModal() {\n        const content = this.createTransferInputModal();\n        // 创建带按钮的模态框\n        const modalContent = this.createModalWithButtons(content, () => {\n            // 确认回调\n            const amountInput = document.getElementById('transferAmountInput');\n            const noteInput = document.getElementById('transferNoteInput');\n            if (amountInput && noteInput) {\n                const amountStr = amountInput.value.trim();\n                const note = noteInput.value.trim();\n                // 输入验证 - 金额必须填写\n                if (!amountStr) {\n                    this.showToast('请输入转账金额', 'warning');\n                    return;\n                }\n                // 验证金额是否为有效数字\n                const amount = parseFloat(amountStr);\n                if (isNaN(amount) || amount <= 0) {\n                    this.showToast('请输入有效的转账金额', 'warning');\n                    return;\n                }\n                // 创建转账消息\n                this.createTransferMessage(amount, note);\n                this.hideModal();\n            }\n        }, () => {\n            // 取消回调\n            this.hideModal();\n        });\n        // 显示模态框（不播放音效，因为加号按钮已经播放了emoji音效）\n        this.showModal('发起转账', modalContent, false);\n    }\n    /**\n     * 创建图片消息并添加到发送队列\n     * @param url 图片URL（可选）\n     * @param description 图片描述（可选）\n     */\n    createImageMessage(url, description) {\n        let messageContent = '';\n        const imageData = {};\n        console.log('🔍 [DEBUG] createImageMessage 调用:', {\n            url: url.substring(0, 100) + (url.length > 100 ? '...' : ''),\n            description: description,\n            isBase64: !!url && url.startsWith('data:'),\n            isHttpUrl: !!url && (url.startsWith('http://') || url.startsWith('https://')),\n        });\n        const isHttp = !!url && (url.startsWith('http://') || url.startsWith('https://'));\n        const isData = !!url && url.startsWith('data:');\n        const looksLikeFilename = !!(url && /([a-zA-Z0-9._-]+\\.[a-zA-Z0-9]+)$/.test(url));\n        if (isData) {\n            // base64 → 放入 data.base64Image，content 为描述\n            messageContent = description || '';\n            imageData.base64Image = url;\n        }\n        else if (isHttp) {\n            // http(s) → 放入 data.imageUrl，content 为描述\n            messageContent = description || '';\n            imageData.imageUrl = url;\n        }\n        else if (url) {\n            if (looksLikeFilename) {\n                // 仅文件名 → 转完整 URL 放入 data.imageUrl\n                const fullUrl = this.messageParser.processImageUrl(url);\n                imageData.imageUrl = fullUrl;\n                messageContent = description || '';\n            }\n            else {\n                // 非URL且不像文件名 → 视为“仅描述”\n                messageContent = description ? description : url;\n            }\n        }\n        else {\n            // 只有描述\n            messageContent = description || '';\n        }\n        // 创建图片消息\n        const imageMessage = {\n            id: this.generateMessageId(),\n            type: 'S',\n            chatId: this.currentChat,\n            sender: '{{user}}',\n            avatar: '',\n            messageType: 'image',\n            content: messageContent,\n            timestamp: this.getCurrentTime(),\n            isPending: true,\n            data: imageData,\n        };\n        console.log('🔍 [DEBUG] 创建图片消息:', {\n            id: imageMessage.id,\n            content: imageMessage.content,\n            hasBase64Image: !!imageMessage.data?.base64Image,\n            hasUploadedFile: !!imageMessage.data?.uploadedFile,\n            hasImageUrl: !!imageMessage.data?.imageUrl,\n        });\n        // 写入 UI 预览缓存（仅 http(s)/data:）\n        if (isData || isHttp) {\n            this.cacheUiImagePreview(imageMessage, url);\n        }\n        // 添加到发送队列\n        this.addToSendQueue(imageMessage);\n        // 添加到界面显示\n        this.addNewMessageToInterface(imageMessage);\n    }\n    /**\n     * 从文件创建图片消息并添加到发送队列\n     * @param file 图片文件\n     * @param description 图片描述（可选）\n     */\n    createImageMessageFromFile(file, description) {\n        // 检查文件大小（限制为5MB）\n        const maxSize = 5 * 1024 * 1024; // 5MB\n        if (file.size > maxSize) {\n            this.showToast('图片文件过大，请选择小于5MB的图片', 'error');\n            return;\n        }\n        // 读取文件为base64\n        const reader = new FileReader();\n        reader.onload = e => {\n            const base64Data = e.target?.result;\n            // 生成唯一的文件ID\n            const fileId = `img_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`;\n            // 清理过期的临时图片数据\n            this.cleanupTempImages();\n            // 将base64数据存储在本地存储中（可选）\n            try {\n                localStorage.setItem(`temp_image_${fileId}`, base64Data);\n            }\n            catch (error) {\n                console.warn('无法存储图片到本地存储，直接使用File对象:', error);\n                // 如果本地存储失败，直接创建带有File对象的消息\n                const imageMessage = {\n                    id: this.generateMessageId(),\n                    type: 'S',\n                    chatId: this.currentChat,\n                    sender: '{{user}}',\n                    avatar: '',\n                    messageType: 'image',\n                    content: description ? description : '', // 不包裹，走“描述早退分支”\n                    timestamp: this.getCurrentTime(),\n                    isPending: true,\n                    data: {\n                        uploadedFile: file, // 直接保存File对象\n                    },\n                };\n                console.log('🔍 [DEBUG] 创建图片消息（localStorage失败）:', {\n                    id: imageMessage.id,\n                    content: imageMessage.content,\n                    hasUploadedFile: !!imageMessage.data?.uploadedFile,\n                    uploadedFileName: imageMessage.data?.uploadedFile?.name,\n                });\n                // 缓存 UI 预览\n                this.cacheUiImagePreview(imageMessage, base64Data);\n                this.addToSendQueue(imageMessage);\n                this.addNewMessageToInterface(imageMessage);\n                return;\n            }\n            // 新规则：content 使用描述即可，图像数据通过 data/缓存驱动 UI\n            const messageContent = description || '';\n            // 创建图片消息\n            const imageMessage = {\n                id: this.generateMessageId(),\n                type: 'S',\n                chatId: this.currentChat,\n                sender: '{{user}}',\n                avatar: '',\n                messageType: 'image',\n                content: messageContent,\n                timestamp: this.getCurrentTime(),\n                isPending: true,\n                data: {\n                    // 保留 File 以便发送时优先使用\n                    uploadedFile: file,\n                    tempFileId: fileId,\n                },\n            };\n            console.log('🔍 [DEBUG] 创建图片消息:', {\n                id: imageMessage.id,\n                content: imageMessage.content,\n                hasUploadedFile: !!imageMessage.data?.uploadedFile,\n                uploadedFileName: imageMessage.data?.uploadedFile?.name,\n                tempFileId: imageMessage.data?.tempFileId,\n            });\n            // UI 预览缓存（复水用）\n            this.cacheUiImagePreview(imageMessage, base64Data);\n            // 添加到发送队列与界面\n            this.addToSendQueue(imageMessage);\n            this.addNewMessageToInterface(imageMessage);\n        };\n        reader.onerror = () => {\n            this.showToast('读取图片文件失败', 'error');\n        };\n        reader.readAsDataURL(file);\n    }\n    /**\n     * 创建语音消息并添加到发送队列\n     * @param content 语音内容\n     * @param duration 语音时长（秒）\n     */\n    createVoiceMessage(content, duration) {\n        // 按照\"内容|时长\"格式创建语音消息内容\n        const messageContent = `${content}|${duration}`;\n        // 创建语音消息\n        const voiceMessage = {\n            id: this.generateMessageId(),\n            type: 'S',\n            chatId: this.currentChat,\n            sender: '{{user}}',\n            avatar: '',\n            messageType: 'voice',\n            content: messageContent,\n            timestamp: this.getCurrentTime(),\n            isPending: true,\n        };\n        // 添加到发送队列\n        this.addToSendQueue(voiceMessage);\n        // 添加到界面显示\n        this.addNewMessageToInterface(voiceMessage);\n    }\n    /**\n     * 创建位置消息并添加到发送队列\n     * @param description 位置描述\n     */\n    createLocationMessage(description) {\n        // 创建位置消息\n        const locationMessage = {\n            id: this.generateMessageId(),\n            type: 'S',\n            chatId: this.currentChat,\n            sender: '{{user}}',\n            avatar: '',\n            messageType: 'location',\n            content: description,\n            timestamp: this.getCurrentTime(),\n            isPending: true,\n        };\n        // 添加到发送队列\n        this.addToSendQueue(locationMessage);\n        // 添加到界面显示\n        this.addNewMessageToInterface(locationMessage);\n    }\n    /**\n     * 创建转账消息并添加到发送队列\n     * @param amount 转账金额\n     * @param note 转账备注\n     */\n    createTransferMessage(amount, note) {\n        // 按照\"金额|备注\"格式创建转账消息内容\n        const messageContent = note ? `${amount}|${note}` : `${amount}|`;\n        // 创建转账消息\n        const transferMessage = {\n            id: this.generateMessageId(),\n            type: 'S',\n            chatId: this.currentChat,\n            sender: '{{user}}',\n            avatar: '',\n            messageType: 'transfer',\n            content: messageContent,\n            timestamp: this.getCurrentTime(),\n            isPending: true,\n        };\n        // 添加到发送队列\n        this.addToSendQueue(transferMessage);\n        // 添加到界面显示\n        this.addNewMessageToInterface(transferMessage);\n    }\n    // ==================== 表情包管理系统 ====================\n    /**\n     * 初始化群名覆盖管理器\n     */\n    async initializeGroupNameOverrideManager() {\n        try {\n            console.log('🚀 开始初始化群名覆盖管理器...');\n            _modules_groupChat_GroupNameOverrideManager__WEBPACK_IMPORTED_MODULE_7__.GroupNameOverrideManager.initialize();\n            console.log('✅ 群名覆盖管理器初始化完成');\n            // 添加调试信息\n            const debugInfo = _modules_groupChat_GroupNameOverrideManager__WEBPACK_IMPORTED_MODULE_7__.GroupNameOverrideManager.getDebugInfo();\n            console.log('🔧 群名覆盖管理器调试信息:', debugInfo);\n        }\n        catch (error) {\n            console.error('❌ 群名覆盖管理器初始化失败:', error);\n        }\n    }\n    /**\n     * 初始化表情包系统\n     */\n    async initializeStickerSystem() {\n        try {\n            // 动态获取世界书名称\n            const lorebookName = await this.getCurrentLorebook();\n            if (!lorebookName) {\n                this.showToast('调用世界书失败，请检查世界书绑定', 'warning');\n                return;\n            }\n            // 更新世界书名称\n            this.stickerLorebookName = lorebookName;\n            console.log(`🎯 确定使用世界书: ${lorebookName}`);\n            // 加载排序信息\n            this.loadStickerOrder();\n            // 从世界书加载表情包数据\n            await this.loadStickersFromLorebook();\n            console.log(`✅ 表情包系统初始化完成，使用世界书: ${lorebookName}，加载了 ${this.stickerData.length} 个表情包`);\n        }\n        catch (error) {\n            console.error('❌ 初始化表情包系统失败:', error);\n            this.showToast('调用世界书失败，请检查世界书绑定', 'error');\n        }\n    }\n    /**\n     * 从世界书加载表情包数据\n     * 优先从角色世界书搜索，如果没找到表情包条目，再从全局世界书搜索\n     */\n    async loadStickersFromLorebook() {\n        try {\n            console.log('🎯 开始从世界书加载表情包数据...');\n            // 检查是否有getLorebookEntries函数\n            if (typeof window.getLorebookEntries !== 'function') {\n                console.log('❌ 全局getLorebookEntries函数不存在，尝试从本地存储加载...');\n                await this.loadStickersFromLocalStorage();\n                return;\n            }\n            let stickerEntry = null;\n            let sourceInfo = '';\n            // 步骤1: 先尝试从角色世界书搜索表情包条目\n            const charLorebook = await this.getCharacterLorebook();\n            if (charLorebook) {\n                console.log(`📖 尝试从角色世界书搜索表情包: ${charLorebook}`);\n                try {\n                    const charEntries = await window.getLorebookEntries(charLorebook);\n                    stickerEntry = charEntries.find((entry) => entry.comment === '表情包' || entry.comment.includes('表情包'));\n                    if (stickerEntry) {\n                        sourceInfo = `角色世界书: ${charLorebook}`;\n                        console.log(`✅ 在角色世界书中找到表情包条目`);\n                    }\n                    else {\n                        console.log(`❌ 角色世界书中未找到表情包条目`);\n                    }\n                }\n                catch (error) {\n                    console.warn(`⚠️ 访问角色世界书失败:`, error);\n                }\n            }\n            // 步骤2: 如果角色世界书中没找到，再从全局世界书搜索\n            if (!stickerEntry) {\n                const globalLorebooks = await this.getGlobalLorebooks();\n                for (const globalLorebook of globalLorebooks) {\n                    console.log(`🌍 尝试从全局世界书搜索表情包: ${globalLorebook}`);\n                    try {\n                        const globalEntries = await window.getLorebookEntries(globalLorebook);\n                        stickerEntry = globalEntries.find((entry) => entry.comment === '表情包' || entry.comment.includes('表情包'));\n                        if (stickerEntry) {\n                            sourceInfo = `全局世界书: ${globalLorebook}`;\n                            console.log(`✅ 在全局世界书中找到表情包条目`);\n                            break;\n                        }\n                        else {\n                            console.log(`❌ 全局世界书 ${globalLorebook} 中未找到表情包条目`);\n                        }\n                    }\n                    catch (error) {\n                        console.warn(`⚠️ 访问全局世界书 ${globalLorebook} 失败:`, error);\n                    }\n                }\n            }\n            // 步骤3: 解析找到的表情包条目\n            if (stickerEntry) {\n                console.log(`🎉 找到表情包条目，来源: ${sourceInfo}`);\n                await this.parseStickerEntry(stickerEntry);\n            }\n            else {\n                console.log('❌ 在所有世界书中都未找到表情包条目，使用空数据');\n                this.stickerData = [];\n                this.stickerCache.clear();\n            }\n            // 根据排序信息排序\n            this.sortStickersByOrder();\n            console.log(`✅ 表情包数据加载完成，共 ${this.stickerData.length} 个表情包`);\n        }\n        catch (error) {\n            console.error('❌ 从世界书加载表情包失败:', error);\n            await this.loadStickersFromLocalStorage();\n        }\n    }\n    /**\n     * 获取角色世界书名称\n     */\n    async getCharacterLorebook() {\n        try {\n            if (typeof getCurrentCharPrimaryLorebook === 'function') {\n                return getCurrentCharPrimaryLorebook();\n            }\n            else {\n                console.warn('getCurrentCharPrimaryLorebook 函数不可用');\n            }\n        }\n        catch (error) {\n            console.warn('获取角色世界书失败:', error);\n        }\n        return null;\n    }\n    /**\n     * 获取全局世界书列表\n     */\n    async getGlobalLorebooks() {\n        try {\n            if (typeof getLorebookSettings === 'function') {\n                const settings = getLorebookSettings();\n                return settings.selected_global_lorebooks || [];\n            }\n            else {\n                console.warn('getLorebookSettings 函数不可用');\n                return [];\n            }\n        }\n        catch (error) {\n            console.warn('获取全局世界书设置失败:', error);\n        }\n        return [];\n    }\n    /**\n     * 解析表情包条目\n     */\n    async parseStickerEntry(stickerEntry) {\n        this.stickerData = [];\n        this.stickerCache.clear();\n        const content = stickerEntry.content || '';\n        const lines = content.split('\\n').filter((line) => line.trim());\n        for (let i = 0; i < lines.length; i++) {\n            const line = lines[i].trim();\n            if (line) {\n                const parsedSticker = this.parseStickerLine(line, i + 1);\n                if (parsedSticker) {\n                    this.stickerData.push(parsedSticker);\n                    this.stickerCache.set(parsedSticker.uid, parsedSticker);\n                }\n            }\n        }\n        console.log(`📦 从世界书条目解析了 ${this.stickerData.length} 个表情包`);\n    }\n    /**\n     * 从本地存储加载表情包（备用方案）\n     */\n    async loadStickersFromLocalStorage() {\n        try {\n            const savedData = localStorage.getItem('bear_stickers');\n            if (savedData) {\n                this.stickerData = JSON.parse(savedData);\n                console.log(`💾 从本地存储加载了 ${this.stickerData.length} 个表情包`);\n                // 重建缓存\n                this.stickerCache.clear();\n                for (const sticker of this.stickerData) {\n                    this.stickerCache.set(sticker.uid, sticker);\n                }\n                this.sortStickersByOrder();\n            }\n            else {\n                console.log('💾 本地存储中没有表情包数据');\n                this.stickerData = [];\n                this.stickerCache.clear();\n            }\n        }\n        catch (error) {\n            console.error('❌ 从本地存储加载表情包失败:', error);\n            this.stickerData = [];\n            this.stickerCache.clear();\n        }\n    }\n    /**\n     * 解析单行表情包数据\n     * 支持三种格式：\n     * 1. 完整URL：https://example.com/image.jpg\n     * 2. 文件名：ei6coi.jpeg\n     * 3. 备注+文件名：我是败犬ei6coi.jpeg\n     * @param line 表情包数据行\n     * @param uid 表情包ID\n     * @returns 解析后的表情包数据，如果解析失败返回null\n     */\n    parseStickerLine(line, uid) {\n        try {\n            const content = line.trim();\n            if (!content)\n                return null;\n            let comment = '';\n            let url = '';\n            // 检查是否是\"备注+文件名\"格式\n            const fileNameMatch = content.match(/^(.+?)([a-zA-Z0-9._-]+\\.[a-zA-Z0-9]+)$/);\n            if (fileNameMatch && fileNameMatch[1].trim() && fileNameMatch[2]) {\n                // 格式：我是败犬ei6coi.jpeg\n                comment = fileNameMatch[1].trim();\n                const fileName = fileNameMatch[2];\n                // 使用messageParser处理文件名，自动添加catbox前缀\n                url = this.messageParser.processImageUrl(fileName);\n            }\n            else {\n                // 直接使用processImageUrl处理（支持完整URL和文件名）\n                url = this.messageParser.processImageUrl(content);\n                comment = `表情包${uid}`;\n            }\n            console.log(`解析表情包: \"${content}\" -> 备注: \"${comment}\", URL: \"${url}\"`);\n            return {\n                uid: uid,\n                url: url,\n                note: comment,\n                rawContent: content,\n            };\n        }\n        catch (error) {\n            console.error('解析表情包行失败:', error, line);\n            return null;\n        }\n    }\n    /**\n     * 解析世界书条目为表情包数据\n     * 支持三种格式：\n     * 1. 完整URL：https://example.com/image.jpg\n     * 2. 文件名：ei6coi.jpeg\n     * 3. 备注+文件名：我是败犬ei6coi.jpeg\n     * @param entry 世界书条目\n     * @returns 解析后的表情包数据，如果解析失败返回null\n     */\n    parseStickerFromEntry(entry) {\n        try {\n            const content = entry.content?.trim();\n            if (!content)\n                return null;\n            let note = entry.comment?.trim() || '';\n            let url = '';\n            // 使用现有的processImageUrl方法处理URL\n            url = this.messageParser.processImageUrl(content);\n            // 如果comment为空，尝试从content中提取备注\n            if (!note) {\n                // 检查是否是\"备注+文件名\"格式\n                const fileNameMatch = content.match(/^(.+?)([a-zA-Z0-9._-]+\\.[a-zA-Z0-9]+)$/);\n                if (fileNameMatch && fileNameMatch[1].trim()) {\n                    note = fileNameMatch[1].trim();\n                }\n            }\n            // 如果仍然没有备注，使用默认值\n            if (!note) {\n                note = '表情包';\n            }\n            return {\n                uid: entry.uid,\n                url: url,\n                note: note,\n                rawContent: content,\n            };\n        }\n        catch (error) {\n            console.error('解析表情包条目失败:', error, entry);\n            return null;\n        }\n    }\n    /**\n     * 根据排序信息对表情包进行排序\n     */\n    sortStickersByOrder() {\n        this.stickerData.sort((a, b) => {\n            const orderA = this.stickerOrder[a.uid] || 999999;\n            const orderB = this.stickerOrder[b.uid] || 999999;\n            return orderA - orderB;\n        });\n    }\n    /**\n     * 加载表情包排序信息\n     */\n    loadStickerOrder() {\n        try {\n            const savedOrder = localStorage.getItem('sticker_order');\n            if (savedOrder) {\n                this.stickerOrder = JSON.parse(savedOrder);\n            }\n        }\n        catch (error) {\n            console.error('加载表情包排序失败:', error);\n            this.stickerOrder = {};\n        }\n    }\n    /**\n     * 保存表情包排序信息\n     */\n    saveStickerOrder() {\n        try {\n            localStorage.setItem('sticker_order', JSON.stringify(this.stickerOrder));\n        }\n        catch (error) {\n            console.error('保存表情包排序失败:', error);\n        }\n    }\n    /**\n     * 添加表情包到世界书\n     * @param content 表情包内容（URL、文件名或备注+文件名）\n     * @param comment 表情包备注（可选）\n     * @returns 是否添加成功\n     */\n    async addStickerToLorebook(content, comment) {\n        try {\n            console.log('尝试添加表情包到世界书:', content, comment);\n            // 尝试使用全局函数更新世界书条目\n            if (typeof window.getLorebookEntries === 'function' &&\n                typeof window.setLorebookEntries === 'function') {\n                console.log('使用全局函数操作世界书');\n                // 获取现有条目\n                const entries = await window.getLorebookEntries(this.stickerLorebookName);\n                const stickerEntry = entries.find((entry) => entry.comment === '表情包' || entry.comment.includes('表情包'));\n                if (stickerEntry) {\n                    console.log('找到表情包条目，准备更新');\n                    // 在现有内容后添加新表情包\n                    const currentContent = stickerEntry.content || '';\n                    const newContent = currentContent ? `${currentContent}\\n${content.trim()}` : content.trim();\n                    // 更新条目\n                    const updatedEntry = {\n                        ...stickerEntry,\n                        content: newContent,\n                    };\n                    await window.setLorebookEntries(this.stickerLorebookName, [updatedEntry]);\n                    // 重新加载数据\n                    await this.loadStickersFromLorebook();\n                    console.log('成功添加表情包到世界书');\n                    return true;\n                }\n                else {\n                    console.log('未找到表情包条目，无法添加');\n                    return false;\n                }\n            }\n            else {\n                console.log('世界书API不可用，添加到本地缓存');\n                // 作为备用，添加到本地存储\n                const newSticker = {\n                    uid: Date.now(),\n                    comment: comment || '',\n                    content: content.trim(),\n                    enabled: true,\n                    url: '',\n                    note: '',\n                    rawContent: content.trim(),\n                };\n                this.stickerData.push(newSticker);\n                this.stickerCache.set(newSticker.uid, newSticker);\n                // 保存到localStorage\n                localStorage.setItem('bear_stickers', JSON.stringify(this.stickerData));\n                console.log('成功添加表情包到本地缓存');\n                return true;\n            }\n        }\n        catch (error) {\n            console.error('添加表情包失败:', error);\n            // 最后的备用方案：添加到本地存储\n            try {\n                const newSticker = {\n                    uid: Date.now(),\n                    comment: comment || '',\n                    content: content.trim(),\n                    enabled: true,\n                    url: '',\n                    note: '',\n                    rawContent: content.trim(),\n                };\n                this.stickerData.push(newSticker);\n                this.stickerCache.set(newSticker.uid, newSticker);\n                localStorage.setItem('bear_stickers', JSON.stringify(this.stickerData));\n                console.log('备用方案：成功添加表情包到本地缓存');\n                return true;\n            }\n            catch (backupError) {\n                console.error('备用添加也失败:', backupError);\n                return false;\n            }\n        }\n    }\n    /**\n     * 从世界书删除表情包\n     * @param uid 表情包的行号ID\n     * @returns 是否删除成功\n     */\n    async removeStickerFromLorebook(uid) {\n        try {\n            console.log(`🗑️ 开始删除表情包，uid: ${uid}`);\n            // 尝试使用全局函数更新世界书条目\n            if (typeof window.getLorebookEntries === 'function' &&\n                typeof window.setLorebookEntries === 'function') {\n                console.log('使用全局函数操作世界书');\n                // 获取现有条目\n                const entries = await window.getLorebookEntries(this.stickerLorebookName);\n                const stickerEntry = entries.find((entry) => entry.comment === '表情包' || entry.comment.includes('表情包'));\n                if (stickerEntry) {\n                    console.log('✅ 找到表情包条目，准备删除指定行');\n                    // 获取当前内容并按行分割\n                    const currentContent = stickerEntry.content || '';\n                    const lines = currentContent.split('\\n').filter((line) => line.trim());\n                    console.log(`📝 当前表情包条目有 ${lines.length} 行`);\n                    console.log(`🎯 要删除第 ${uid} 行`);\n                    // 删除指定行（uid是从1开始的行号）\n                    if (uid > 0 && uid <= lines.length) {\n                        lines.splice(uid - 1, 1); // 删除指定行\n                        console.log(`✅ 成功删除第 ${uid} 行，剩余 ${lines.length} 行`);\n                    }\n                    else {\n                        console.error(`❌ 无效的行号: ${uid}，总行数: ${lines.length}`);\n                        return false;\n                    }\n                    // 重新组合内容\n                    const newContent = lines.join('\\n');\n                    // 更新条目\n                    const updatedEntry = {\n                        uid: stickerEntry.uid,\n                        content: newContent,\n                    };\n                    await window.setLorebookEntries(this.stickerLorebookName, [updatedEntry]);\n                    // 重新加载数据\n                    await this.loadStickersFromLorebook();\n                    console.log('✅ 成功从世界书删除表情包');\n                    return true;\n                }\n                else {\n                    console.error('❌ 未找到表情包条目');\n                    return false;\n                }\n            }\n            else {\n                console.error('❌ 世界书全局函数不可用');\n                return false;\n            }\n        }\n        catch (error) {\n            console.error('❌ 从世界书删除表情包失败:', error);\n            return false;\n        }\n    }\n    /**\n     * 显示表情包编辑模态框\n     * @param uid 表情包ID\n     */\n    showStickerEditModal(uid) {\n        const sticker = this.stickerCache.get(uid);\n        if (!sticker) {\n            this.showToast('表情包不存在', 'error');\n            return;\n        }\n        // 创建模态框\n        const overlay = document.createElement('div');\n        overlay.className = 'modal-overlay';\n        const modal = document.createElement('div');\n        modal.className = 'modal-container';\n        const template = document.getElementById('editStickerModalTemplate');\n        if (template) {\n            modal.innerHTML = template.innerHTML;\n            // 填充数据\n            const urlInput = modal.querySelector('#editStickerUrl');\n            const noteInput = modal.querySelector('#editStickerNote');\n            if (urlInput)\n                urlInput.value = sticker.url;\n            if (noteInput)\n                noteInput.value = sticker.note;\n        }\n        overlay.appendChild(modal);\n        // 将遮罩层添加到手机界面容器中，而不是整个页面\n        const interfaceContainer = document.querySelector('.interface-container');\n        if (interfaceContainer) {\n            interfaceContainer.appendChild(overlay);\n        }\n        else {\n            // 如果找不到界面容器，则添加到聊天界面\n            const chatContainer = document.querySelector('.chat-container');\n            if (chatContainer) {\n                chatContainer.appendChild(overlay);\n            }\n            else {\n                document.body.appendChild(overlay);\n            }\n        }\n        // 显示动画\n        setTimeout(() => overlay.classList.add('show'), 10);\n        // 事件处理\n        const urlInput = modal.querySelector('#editStickerUrl');\n        const noteInput = modal.querySelector('#editStickerNote');\n        const cancelBtn = modal.querySelector('.cancel-btn');\n        const confirmBtn = modal.querySelector('.confirm-btn');\n        // 取消按钮\n        cancelBtn.addEventListener('click', () => {\n            this.hideModal();\n        });\n        // 保存按钮\n        confirmBtn.addEventListener('click', async () => {\n            const newUrl = urlInput.value.trim();\n            const newNote = noteInput.value.trim();\n            if (!newUrl) {\n                this.showToast('请输入表情包URL', 'warning');\n                return;\n            }\n            try {\n                const success = await this.updateStickerInLorebook(uid, newUrl, newNote);\n                if (success) {\n                    this.showToast('表情包更新成功', 'success');\n                    this.hideModal();\n                    // 重新渲染表情包网格\n                    const stickerSelector = document.getElementById('stickerSelector');\n                    if (stickerSelector) {\n                        this.renderStickerGrid(stickerSelector);\n                    }\n                }\n                else {\n                    this.showToast('表情包更新失败', 'error');\n                }\n            }\n            catch (error) {\n                console.error('更新表情包失败:', error);\n                this.showToast('表情包更新失败', 'error');\n            }\n        });\n        // 点击遮罩关闭\n        overlay.addEventListener('click', e => {\n            if (e.target === overlay) {\n                this.hideModal();\n            }\n        });\n    }\n    /**\n     * 更新世界书中的表情包\n     * @param uid 表情包ID\n     * @param newUrl 新的URL\n     * @param newNote 新的备注\n     * @returns 是否更新成功\n     */\n    async updateStickerInLorebook(uid, newUrl, newNote) {\n        try {\n            console.log(`🔄 开始更新表情包，uid: ${uid}`);\n            // 使用全局函数获取世界书条目\n            if (typeof window.getLorebookEntries === 'function' &&\n                typeof window.setLorebookEntries === 'function') {\n                console.log('✅ 使用全局函数更新表情包');\n                // 获取现有条目\n                const entries = await window.getLorebookEntries(this.stickerLorebookName);\n                const stickerEntry = entries.find((entry) => entry.comment === '表情包' || entry.comment.includes('表情包'));\n                if (stickerEntry) {\n                    console.log('✅ 找到表情包条目，准备更新指定行');\n                    // 获取当前内容并按行分割\n                    const currentContent = stickerEntry.content || '';\n                    const lines = currentContent.split('\\n').filter((line) => line.trim());\n                    console.log(`📝 当前表情包条目有 ${lines.length} 行`);\n                    console.log(`🎯 要更新第 ${uid} 行`);\n                    // 更新指定行（uid是从1开始的行号）\n                    if (uid > 0 && uid <= lines.length) {\n                        // 构建新的表情包行内容\n                        const newContent = newNote ? `${newNote}${newUrl}` : newUrl;\n                        lines[uid - 1] = newContent;\n                        console.log(`✅ 成功更新第 ${uid} 行为: ${newContent}`);\n                    }\n                    else {\n                        console.error(`❌ 无效的行号: ${uid}，总行数: ${lines.length}`);\n                        return false;\n                    }\n                    // 重新组合内容\n                    const newEntryContent = lines.join('\\n');\n                    // 更新条目\n                    const updatedEntry = {\n                        uid: stickerEntry.uid,\n                        content: newEntryContent,\n                    };\n                    await window.setLorebookEntries(this.stickerLorebookName, [updatedEntry]);\n                    // 重新加载数据\n                    await this.loadStickersFromLorebook();\n                    console.log('✅ 成功更新世界书中的表情包');\n                    return true;\n                }\n                else {\n                    console.error('❌ 未找到表情包条目');\n                    return false;\n                }\n            }\n            else {\n                console.error('❌ 世界书全局函数不可用');\n                return false;\n            }\n        }\n        catch (error) {\n            console.error('❌ 更新世界书中的表情包失败:', error);\n            return false;\n        }\n    }\n    /**\n     * 更新表情包排序\n     * @param newOrder 新的排序数组（按uid排序）\n     */\n    updateStickerOrder(newOrder) {\n        // 更新排序映射\n        newOrder.forEach((uid, index) => {\n            this.stickerOrder[uid] = index;\n        });\n        // 保存到localStorage\n        this.saveStickerOrder();\n        // 重新排序本地数据\n        this.sortStickersByOrder();\n    }\n    /**\n     * 显示表情包选择器\n     */\n    showStickerSelector() {\n        // 检查是否已经显示\n        if (this.isStickerSelectorVisible) {\n            return;\n        }\n        // 首先隐藏加号菜单\n        this.hidePlusMenu();\n        const stickerSelector = document.getElementById('stickerSelector');\n        if (!stickerSelector) {\n            return;\n        }\n        // 渲染表情包网格\n        this.renderStickerGrid(stickerSelector);\n        // 显示选择器\n        stickerSelector.classList.add('active');\n        this.isStickerSelectorVisible = true;\n        // 添加动画效果\n        requestAnimationFrame(() => {\n            stickerSelector.classList.add('show');\n        });\n        // 延迟设置点击外部关闭，确保动画完成\n        setTimeout(() => {\n            this.setupStickerSelectorClickOutside();\n        }, 100);\n    }\n    /**\n     * 隐藏表情包选择器\n     */\n    hideStickerSelector() {\n        // 检查是否已经隐藏\n        if (!this.isStickerSelectorVisible) {\n            return;\n        }\n        const stickerSelector = document.getElementById('stickerSelector');\n        if (!stickerSelector)\n            return;\n        // 重置删除模式状态\n        this.isDeleteMode = false;\n        this.selectedStickers.clear();\n        // 移除显示状态\n        stickerSelector.classList.remove('active', 'show');\n        this.isStickerSelectorVisible = false;\n        // 移除点击外部关闭的事件监听器\n        this.removeStickerSelectorClickOutside();\n    }\n    /**\n     * 设置表情包选择器点击外部关闭\n     */\n    setupStickerSelectorClickOutside() {\n        // 移除之前的监听器（如果存在）\n        this.removeStickerSelectorClickOutside();\n        // 添加新的监听器\n        this.stickerSelectorClickOutsideHandler = (e) => {\n            const target = e.target;\n            const stickerSelector = document.getElementById('stickerSelector');\n            const plusBtn = document.getElementById('plusBtn');\n            const plusMenu = document.getElementById('plusMenu');\n            const stickerMenuItem = document.querySelector('[data-type=\"sticker\"]');\n            // 检查点击是否在表情包选择器内部、加号按钮、加号菜单或表情包菜单项上\n            if (stickerSelector &&\n                !stickerSelector.contains(target) &&\n                !plusBtn?.contains(target) &&\n                !plusMenu?.contains(target) &&\n                !stickerMenuItem?.contains(target)) {\n                this.hideStickerSelector();\n            }\n        };\n        // 增加延迟时间，确保表情包选择器完全显示后再添加事件监听器\n        setTimeout(() => {\n            if (this.stickerSelectorClickOutsideHandler) {\n                document.addEventListener('click', this.stickerSelectorClickOutsideHandler);\n            }\n        }, 300);\n    }\n    /**\n     * 移除表情包选择器点击外部关闭的事件监听器\n     */\n    removeStickerSelectorClickOutside() {\n        if (this.stickerSelectorClickOutsideHandler) {\n            document.removeEventListener('click', this.stickerSelectorClickOutsideHandler);\n            this.stickerSelectorClickOutsideHandler = null;\n        }\n    }\n    /**\n     * 渲染表情包网格\n     * @param container 容器元素\n     */\n    renderStickerGrid(container) {\n        const gridElement = container.querySelector('#stickerGrid');\n        if (!gridElement)\n            return;\n        // 清空现有内容\n        gridElement.innerHTML = '';\n        // 始终添加添加按钮作为第一个项目\n        const addBtn = this.createAddStickerButton();\n        gridElement.appendChild(addBtn);\n        // 添加删除模式按钮作为第二个项目\n        const deleteModeBtn = this.createDeleteModeButton();\n        gridElement.appendChild(deleteModeBtn);\n        // 如果在删除模式下，立即显示确认删除按钮\n        if (this.isDeleteMode) {\n            const confirmBtn = this.createDeleteConfirmButton();\n            gridElement.appendChild(confirmBtn);\n        }\n        if (this.stickerData.length === 0) {\n            // 显示空状态提示（占据剩余空间）\n            const emptyState = document.createElement('div');\n            emptyState.className = 'empty-state';\n            emptyState.style.gridColumn = 'span 2'; // 占据剩余的2列（4列总共，减去添加按钮和删除按钮）\n            const template = document.getElementById('stickerEmptyStateTemplate');\n            if (template) {\n                emptyState.innerHTML = template.innerHTML;\n            }\n            gridElement.appendChild(emptyState);\n            return;\n        }\n        // 渲染表情包项目\n        this.stickerData.forEach((sticker, index) => {\n            const stickerItem = this.createStickerItem(sticker, index);\n            gridElement.appendChild(stickerItem);\n        });\n    }\n    /**\n     * 创建表情包项目元素\n     * @param sticker 表情包数据\n     * @param index 索引\n     * @returns 表情包项目元素\n     */\n    createStickerItem(sticker, index) {\n        const item = document.createElement('div');\n        item.className = 'sticker-item';\n        item.dataset.uid = sticker.uid.toString();\n        item.dataset.index = index.toString();\n        // 如果在删除模式下，添加删除模式类\n        if (this.isDeleteMode) {\n            item.classList.add('delete-mode');\n        }\n        // 如果被选中，添加选中类\n        if (this.selectedStickers.has(sticker.uid)) {\n            item.classList.add('selected');\n        }\n        // 创建图片容器\n        const imageContainer = document.createElement('div');\n        imageContainer.className = 'sticker-image';\n        // 创建图片元素\n        const img = document.createElement('img');\n        img.src = sticker.url;\n        img.alt = sticker.note;\n        img.title = sticker.note;\n        // 创建备注文字\n        const noteElement = document.createElement('div');\n        noteElement.className = 'sticker-note';\n        noteElement.textContent = sticker.note || '表情包';\n        // 创建多选删除的选择框\n        const checkbox = document.createElement('div');\n        checkbox.className = 'delete-checkbox';\n        if (this.selectedStickers.has(sticker.uid)) {\n            checkbox.classList.add('checked');\n        }\n        // 添加事件监听器\n        item.addEventListener('click', e => {\n            e.stopPropagation();\n            if (this.isDeleteMode) {\n                this.toggleStickerSelection(sticker.uid);\n            }\n            else {\n                this.handleStickerSelection(sticker);\n            }\n        });\n        // 添加长按编辑事件\n        if (!this.isDeleteMode) {\n            this.addStickerEditEvents(item);\n        }\n        imageContainer.appendChild(img);\n        item.appendChild(imageContainer);\n        item.appendChild(noteElement);\n        item.appendChild(checkbox);\n        return item;\n    }\n    /**\n     * 创建添加表情包按钮\n     */\n    createAddStickerButton() {\n        const addBtn = document.createElement('button');\n        addBtn.className = 'add-sticker-btn';\n        addBtn.id = 'addStickerBtn';\n        addBtn.innerHTML = '<span class=\"add-icon\">+</span>';\n        addBtn.title = '添加表情包';\n        addBtn.addEventListener('click', e => {\n            e.stopPropagation();\n            this.hideStickerSelector();\n            this.showAddStickerModal();\n        });\n        return addBtn;\n    }\n    /**\n     * 创建删除模式按钮\n     */\n    createDeleteModeButton() {\n        const deleteModeBtn = document.createElement('button');\n        deleteModeBtn.className = 'delete-mode-btn';\n        deleteModeBtn.id = 'deleteModeBtn';\n        if (this.isDeleteMode) {\n            deleteModeBtn.classList.add('active');\n        }\n        const template = document.getElementById('deleteModeButtonTemplate');\n        if (template) {\n            deleteModeBtn.innerHTML = template.innerHTML;\n            const deleteText = deleteModeBtn.querySelector('.delete-text');\n            if (deleteText) {\n                deleteText.textContent = this.isDeleteMode ? '取消' : '删除';\n            }\n        }\n        deleteModeBtn.title = this.isDeleteMode ? '取消删除模式' : '进入删除模式';\n        deleteModeBtn.addEventListener('click', e => {\n            e.stopPropagation();\n            this.toggleDeleteMode();\n        });\n        return deleteModeBtn;\n    }\n    /**\n     * 创建删除确认按钮\n     */\n    createDeleteConfirmButton() {\n        const confirmBtn = document.createElement('button');\n        confirmBtn.className = 'delete-confirm-btn show';\n        // 根据选中状态设置按钮状态\n        const hasSelected = this.selectedStickers.size > 0;\n        if (!hasSelected) {\n            confirmBtn.classList.add('disabled');\n        }\n        const template = document.getElementById('confirmDeleteButtonTemplate');\n        if (template) {\n            confirmBtn.innerHTML = template.innerHTML;\n        }\n        if (hasSelected) {\n            confirmBtn.title = `删除选中的 ${this.selectedStickers.size} 个表情包`;\n        }\n        else {\n            confirmBtn.title = '请先选择要删除的表情包';\n        }\n        confirmBtn.addEventListener('click', e => {\n            e.stopPropagation();\n            if (this.selectedStickers.size > 0) {\n                this.handleDeleteSelectedStickers();\n            }\n            else {\n                this.showToast('请先选择要删除的表情包', 'warning');\n            }\n        });\n        return confirmBtn;\n    }\n    /**\n     * 切换删除模式\n     */\n    toggleDeleteMode() {\n        this.isDeleteMode = !this.isDeleteMode;\n        // 如果退出删除模式，清空选中的表情包\n        if (!this.isDeleteMode) {\n            this.selectedStickers.clear();\n        }\n        // 重新渲染网格\n        const stickerSelector = document.getElementById('stickerSelector');\n        if (stickerSelector) {\n            this.renderStickerGrid(stickerSelector);\n        }\n        // 播放音效\n        this.soundManager.playSound('click');\n    }\n    /**\n     * 切换表情包选择状态\n     */\n    toggleStickerSelection(uid) {\n        if (this.selectedStickers.has(uid)) {\n            this.selectedStickers.delete(uid);\n        }\n        else {\n            this.selectedStickers.add(uid);\n        }\n        // 更新确认按钮状态\n        this.updateDeleteConfirmButton();\n        // 重新渲染网格以更新选择状态\n        const stickerSelector = document.getElementById('stickerSelector');\n        if (stickerSelector) {\n            this.renderStickerGrid(stickerSelector);\n        }\n        // 播放音效\n        this.soundManager.playSound('click');\n    }\n    /**\n     * 更新删除确认按钮状态\n     */\n    updateDeleteConfirmButton() {\n        const confirmBtn = document.querySelector('.delete-confirm-btn');\n        if (!confirmBtn)\n            return;\n        const hasSelected = this.selectedStickers.size > 0;\n        if (hasSelected) {\n            confirmBtn.classList.remove('disabled');\n            confirmBtn.title = `删除选中的 ${this.selectedStickers.size} 个表情包`;\n        }\n        else {\n            confirmBtn.classList.add('disabled');\n            confirmBtn.title = '请先选择要删除的表情包';\n        }\n    }\n    /**\n     * 处理删除选中的表情包\n     */\n    async handleDeleteSelectedStickers() {\n        if (this.selectedStickers.size === 0)\n            return;\n        // 显示确认对话框\n        const confirmed = confirm(`确定要删除选中的 ${this.selectedStickers.size} 个表情包吗？此操作不可撤销。`);\n        if (!confirmed)\n            return;\n        try {\n            // 删除选中的表情包\n            const deletePromises = Array.from(this.selectedStickers).map(uid => this.removeStickerFromLorebook(uid));\n            const results = await Promise.all(deletePromises);\n            const successCount = results.filter(result => result).length;\n            if (successCount === this.selectedStickers.size) {\n                this.showToast(`成功删除 ${successCount} 个表情包`, 'success');\n            }\n            else if (successCount > 0) {\n                this.showToast(`删除了 ${successCount}/${this.selectedStickers.size} 个表情包`, 'warning');\n            }\n            else {\n                this.showToast('表情包删除失败', 'error');\n            }\n            // 清空选中状态并退出删除模式\n            this.selectedStickers.clear();\n            this.isDeleteMode = false;\n            // 重新渲染网格\n            const stickerSelector = document.getElementById('stickerSelector');\n            if (stickerSelector) {\n                this.renderStickerGrid(stickerSelector);\n            }\n        }\n        catch (error) {\n            console.error('删除选中表情包失败:', error);\n            this.showToast('删除表情包时发生错误', 'error');\n        }\n    }\n    /**\n     * 显示添加表情包模态框\n     */\n    showAddStickerModal() {\n        const content = this.createAddStickerModal();\n        // 创建带按钮的模态框\n        const modalContent = this.createModalWithButtons(content, () => {\n            // 确认回调\n            this.handleAddStickerConfirm();\n        }, () => {\n            // 取消回调\n            this.hideModal();\n            // 重新显示表情包选择器\n            setTimeout(() => this.showStickerSelector(), 100);\n        });\n        // 显示模态框\n        this.showModal('添加表情包', modalContent);\n    }\n    /**\n     * 创建添加表情包模态框内容\n     * @returns 模态框内容元素\n     */\n    createAddStickerModal() {\n        const template = document.getElementById('addStickerModalTemplate');\n        if (template) {\n            const content = document.createElement('div');\n            content.innerHTML = template.innerHTML;\n            return content.firstElementChild;\n        }\n        // 如果模板不存在，回退到动态创建\n        const content = document.createElement('div');\n        content.className = 'modal-content';\n        content.innerHTML = `\n      <label class=\"modal-label\">表情包内容：</label>\n      <input type=\"text\" class=\"modal-input\" placeholder=\"输入URL、文件名或备注+文件名...\" id=\"stickerContentInput\" />\n      \n      <label class=\"modal-label modal-label-spaced\">表情包备注：</label>\n      <input type=\"text\" class=\"modal-input\" placeholder=\"输入表情包备注（可选）...\" id=\"stickerNoteInput\" />\n      \n      <div class=\"input-help\">\n        <p>支持格式：</p>\n        <ul>\n          <li>完整URL：https://example.com/image.jpg</li>\n          <li>文件名：ei6coi.jpeg</li>\n          <li>备注+文件名：我是败犬ei6coi.jpeg</li>\n        </ul>\n      </div>\n    `;\n        return content;\n    }\n    /**\n     * 处理添加表情包确认\n     */\n    async handleAddStickerConfirm() {\n        const contentInput = document.getElementById('stickerContentInput');\n        const noteInput = document.getElementById('stickerNoteInput');\n        if (!contentInput || !noteInput)\n            return;\n        const content = contentInput.value.trim();\n        const note = noteInput.value.trim();\n        // 输入验证\n        if (!content) {\n            this.showToast('请输入表情包内容', 'warning');\n            return;\n        }\n        try {\n            // 添加到世界书\n            const success = await this.addStickerToLorebook(content, note);\n            if (success) {\n                this.showToast('表情包添加成功', 'success');\n                this.hideModal();\n                // 重新显示表情包选择器\n                setTimeout(() => this.showStickerSelector(), 100);\n            }\n            else {\n                this.showToast('表情包添加失败', 'error');\n            }\n        }\n        catch (error) {\n            console.error('添加表情包失败:', error);\n            this.showToast('表情包添加失败', 'error');\n        }\n    }\n    /**\n     * 处理表情包选择\n     * @param sticker 选中的表情包\n     */\n    handleStickerSelection(sticker) {\n        // 创建表情包消息\n        this.createStickerMessage(sticker);\n        // 隐藏表情包选择器\n        this.hideStickerSelector();\n        // 播放音效\n        this.soundManager.playSound('emoji');\n    }\n    /**\n     * 处理表情包删除\n     * @param uid 表情包的世界书条目ID\n     */\n    async handleStickerDelete(uid) {\n        try {\n            const success = await this.removeStickerFromLorebook(uid);\n            if (success) {\n                this.showToast('表情包删除成功', 'success');\n                // 重新渲染网格\n                const stickerSelector = document.getElementById('stickerSelector');\n                if (stickerSelector) {\n                    this.renderStickerGrid(stickerSelector);\n                }\n            }\n            else {\n                this.showToast('表情包删除失败', 'error');\n            }\n        }\n        catch (error) {\n            console.error('删除表情包失败:', error);\n            this.showToast('表情包删除失败', 'error');\n        }\n    }\n    /**\n     * 创建表情包消息并添加到发送队列\n     * @param sticker 表情包数据\n     */\n    createStickerMessage(sticker) {\n        // 从完整URL中提取文件名和后缀\n        const fileName = this.extractFileNameFromUrl(sticker.url);\n        // 组合备注和文件名，格式：备注+文件名（如：焦虑2a9wte.jpeg）\n        const stickerContent = sticker.note + fileName;\n        console.log(`📝 表情包发送格式: ${stickerContent} (原URL: ${sticker.url})`);\n        // 创建表情包消息 - 使用备注+文件名格式，让LLM能理解表情包含义\n        const stickerMessage = {\n            id: this.generateMessageId(),\n            type: 'S',\n            chatId: this.currentChat,\n            sender: '{{user}}',\n            avatar: '',\n            messageType: 'sticker',\n            content: stickerContent, // 使用备注+文件名格式（如：焦虑2a9wte.jpeg）\n            timestamp: this.getCurrentTime(),\n            isPending: true,\n            // 保存完整URL到data字段，用于界面显示\n            data: {\n                stickerUrl: sticker.url,\n                stickerNote: sticker.note,\n                stickerFileName: fileName,\n            },\n        };\n        // 添加到发送队列\n        this.addToSendQueue(stickerMessage);\n        // 添加到界面显示\n        this.addNewMessageToInterface(stickerMessage);\n    }\n    /**\n     * 从URL中提取文件名（包含后缀）\n     * @param url 完整的URL\n     * @returns 文件名（如：2a9wte.jpeg）\n     */\n    extractFileNameFromUrl(url) {\n        try {\n            // 从URL中提取文件名\n            const urlParts = url.split('/');\n            const fileName = urlParts[urlParts.length - 1];\n            // 如果文件名包含查询参数，去掉它们\n            const cleanFileName = fileName.split('?')[0];\n            console.log(`🔍 从URL提取文件名: ${url} -> ${cleanFileName}`);\n            return cleanFileName;\n        }\n        catch (error) {\n            console.warn('提取文件名失败:', error);\n            // 如果提取失败，生成一个随机文件名\n            const randomId = Math.random().toString(36).substr(2, 6);\n            return `${randomId}.jpg`;\n        }\n    }\n    /**\n     * 添加表情包长按编辑事件\n     * @param item 表情包项目元素\n     */\n    addStickerEditEvents(item) {\n        let longPressTimer;\n        let isLongPress = false;\n        let startX = 0;\n        let startY = 0;\n        const moveThreshold = 10; // 移动超过10像素就取消长按\n        // 获取触摸或鼠标位置\n        const getPosition = (e) => {\n            if (e instanceof TouchEvent && e.touches.length > 0) {\n                return { x: e.touches[0].clientX, y: e.touches[0].clientY };\n            }\n            else if (e instanceof MouseEvent) {\n                return { x: e.clientX, y: e.clientY };\n            }\n            return { x: 0, y: 0 };\n        };\n        // 检查是否移动过远\n        const checkMovement = (e) => {\n            const pos = getPosition(e);\n            const distance = Math.sqrt(Math.pow(pos.x - startX, 2) + Math.pow(pos.y - startY, 2));\n            // 如果移动距离超过阈值，取消长按\n            if (distance > moveThreshold) {\n                cancelLongPress();\n            }\n        };\n        // 长按开始编辑\n        const startLongPress = (e) => {\n            // 记录起始位置\n            const pos = getPosition(e);\n            startX = pos.x;\n            startY = pos.y;\n            longPressTimer = setTimeout(() => {\n                isLongPress = true;\n                const uid = parseInt(item.dataset.uid || '0');\n                this.showStickerEditModal(uid);\n            }, 500); // 500ms长按\n        };\n        // 取消长按\n        const cancelLongPress = () => {\n            if (longPressTimer) {\n                clearTimeout(longPressTimer);\n            }\n            isLongPress = false;\n        };\n        // 鼠标/触摸事件\n        item.addEventListener('mousedown', startLongPress);\n        item.addEventListener('touchstart', startLongPress, { passive: true });\n        // 移动事件 - 检测是否移动过远\n        item.addEventListener('mousemove', checkMovement);\n        item.addEventListener('touchmove', checkMovement, { passive: true });\n        item.addEventListener('mouseup', cancelLongPress);\n        item.addEventListener('mouseleave', cancelLongPress);\n        item.addEventListener('touchend', cancelLongPress);\n        item.addEventListener('touchcancel', cancelLongPress);\n        // 防止长按后的点击事件\n        item.addEventListener('click', e => {\n            if (isLongPress) {\n                e.preventDefault();\n                e.stopPropagation();\n                isLongPress = false;\n            }\n        });\n    }\n    // ==================== 智能表情包建议系统 ====================\n    /**\n     * 处理输入框变化事件\n     * @param event 输入事件\n     */\n    handleInputChange(event) {\n        // 检查设置是否允许表情包建议\n        if (!this.settingsModal || !this.settingsModal.getCurrentSettings().emojiSuggestionsEnabled) {\n            this.hideStickerSuggestionsImmediately();\n            return;\n        }\n        const input = event.target;\n        const text = input.value.trim();\n        // 清除之前的定时器\n        if (this.inputChangeTimer) {\n            clearTimeout(this.inputChangeTimer);\n        }\n        // 如果输入为空，立即隐藏建议\n        if (!text) {\n            this.hideStickerSuggestionsImmediately();\n            return;\n        }\n        // 防抖处理，300ms后执行搜索\n        this.inputChangeTimer = setTimeout(() => {\n            this.searchAndShowSuggestions(text);\n        }, 300);\n    }\n    /**\n     * 搜索并显示表情包建议\n     * @param searchText 搜索文本\n     */\n    searchAndShowSuggestions(searchText) {\n        const matchingStickers = this.findMatchingStickers(searchText);\n        if (matchingStickers.length > 0) {\n            this.showStickerSuggestions(matchingStickers);\n        }\n        else {\n            this.hideStickerSuggestionsImmediately();\n        }\n    }\n    /**\n     * 根据输入文字匹配表情包备注\n     * @param searchText 搜索文本\n     * @returns 匹配的表情包数组\n     */\n    findMatchingStickers(searchText) {\n        if (!searchText || this.stickerData.length === 0) {\n            return [];\n        }\n        const searchLower = searchText.toLowerCase();\n        const matches = [];\n        for (const sticker of this.stickerData) {\n            const note = sticker.note.toLowerCase();\n            let score = 0;\n            // 1. 完全匹配（最高优先级）\n            if (note === searchLower) {\n                score = 100;\n            }\n            // 2. 开头匹配\n            else if (note.startsWith(searchLower)) {\n                score = 80;\n            }\n            // 3. 包含匹配\n            else if (note.includes(searchLower)) {\n                score = 60;\n            }\n            // 4. 模糊匹配（每个字符都存在）\n            else if (this.fuzzyMatch(note, searchLower)) {\n                score = 40;\n            }\n            // 5. 拼音匹配（简单实现）\n            else if (this.pinyinMatch(note, searchLower)) {\n                score = 30;\n            }\n            if (score > 0) {\n                matches.push({ sticker, score });\n            }\n        }\n        // 按分数排序，取前6个\n        return matches\n            .sort((a, b) => b.score - a.score)\n            .slice(0, 6)\n            .map(match => match.sticker);\n    }\n    /**\n     * 模糊匹配算法\n     * @param text 目标文本\n     * @param pattern 搜索模式\n     * @returns 是否匹配\n     */\n    fuzzyMatch(text, pattern) {\n        let textIndex = 0;\n        let patternIndex = 0;\n        while (textIndex < text.length && patternIndex < pattern.length) {\n            if (text[textIndex] === pattern[patternIndex]) {\n                patternIndex++;\n            }\n            textIndex++;\n        }\n        return patternIndex === pattern.length;\n    }\n    /**\n     * 简单拼音匹配（基于常见拼音首字母）\n     * @param text 目标文本\n     * @param pattern 搜索模式\n     * @returns 是否匹配\n     */\n    pinyinMatch(text, pattern) {\n        // 简单的拼音映射表（可以扩展）\n        const pinyinMap = {\n            a: ['啊', '阿'],\n            b: ['不', '白', '被', '本', '比', '别', '把'],\n            c: ['出', '从', '才', '成', '长', '常', '吃'],\n            d: ['的', '到', '都', '大', '对', '但', '得', '打'],\n            e: ['额', '恶'],\n            f: ['发', '放', '非', '分', '风', '服'],\n            g: ['个', '给', '过', '国', '公', '高', '感'],\n            h: ['和', '很', '好', '还', '会', '后', '黑', '红'],\n            j: ['就', '进', '见', '叫', '家', '今', '几'],\n            k: ['可', '看', '开', '快', '哭'],\n            l: ['了', '来', '里', '老', '两', '路', '绿'],\n            m: ['没', '么', '们', '面', '美', '猫'],\n            n: ['你', '那', '能', '年', '女'],\n            p: ['跑', '怕', '朋'],\n            q: ['去', '前', '起', '请'],\n            r: ['人', '让', '如', '然'],\n            s: ['是', '说', '所', '三', '上', '时', '生'],\n            t: ['他', '她', '它', '太', '天', '听', '头'],\n            w: ['我', '为', '问', '王', '五', '万'],\n            x: ['想', '小', '心', '新', '笑', '下'],\n            y: ['一', '有', '要', '也', '用', '又', '眼'],\n            z: ['在', '这', '中', '自', '走', '最', '做'],\n        };\n        // 检查是否有拼音首字母匹配\n        for (const char of pattern) {\n            if (pinyinMap[char]) {\n                for (const pinyinChar of pinyinMap[char]) {\n                    if (text.includes(pinyinChar)) {\n                        return true;\n                    }\n                }\n            }\n        }\n        return false;\n    }\n    /**\n     * 显示表情包建议\n     * @param suggestions 建议的表情包数组\n     */\n    showStickerSuggestions(suggestions) {\n        const inputField = document.getElementById('inputField');\n        if (!inputField) {\n            return;\n        }\n        // 如果已经有建议容器，先立即清理（不使用延迟）\n        if (this.suggestionContainer && this.suggestionContainer.parentNode) {\n            this.suggestionContainer.parentNode.removeChild(this.suggestionContainer);\n        }\n        // 创建新的建议容器\n        this.suggestionContainer = document.createElement('div');\n        this.suggestionContainer.className = 'sticker-suggestions';\n        this.suggestionContainer.innerHTML = `\n      <div class=\"suggestions-header\">\n        <span class=\"suggestions-title\">表情包建议</span>\n        <span class=\"suggestions-count\">${suggestions.length}</span>\n      </div>\n      <div class=\"suggestions-grid\"></div>\n    `;\n        // 添加到输入区域\n        const chatInput = document.querySelector('.chat-input');\n        if (chatInput) {\n            chatInput.appendChild(this.suggestionContainer);\n        }\n        else {\n            return;\n        }\n        // 渲染建议表情包\n        const grid = this.suggestionContainer.querySelector('.suggestions-grid');\n        suggestions.forEach(sticker => {\n            const item = document.createElement('div');\n            item.className = 'suggestion-item';\n            item.title = sticker.note || '表情包';\n            const img = document.createElement('img');\n            img.src = sticker.url;\n            img.alt = sticker.note || '表情包';\n            img.onerror = () => {\n                item.style.display = 'none';\n            };\n            item.appendChild(img);\n            grid.appendChild(item);\n            // 点击建议发送表情包\n            item.addEventListener('click', e => {\n                e.preventDefault();\n                e.stopPropagation();\n                this.sendStickerFromSuggestion(sticker);\n            });\n        });\n        // 设置状态并显示动画\n        this.isSuggestionVisible = true;\n        setTimeout(() => {\n            if (this.suggestionContainer) {\n                this.suggestionContainer.classList.add('show');\n            }\n            else {\n            }\n        }, 10);\n    }\n    /**\n     * 隐藏表情包建议\n     */\n    hideStickerSuggestions() {\n        if (this.suggestionContainer) {\n            this.suggestionContainer.classList.remove('show');\n            setTimeout(() => {\n                if (this.suggestionContainer && this.suggestionContainer.parentNode) {\n                    this.suggestionContainer.parentNode.removeChild(this.suggestionContainer);\n                }\n                this.suggestionContainer = null;\n                // 只有在DOM移除后才设置状态为不可见\n                this.isSuggestionVisible = false;\n            }, 200);\n        }\n        else {\n            // 即使没有容器，也要确保状态正确\n            this.isSuggestionVisible = false;\n        }\n    }\n    /**\n     * 立即隐藏表情包建议（用于输入变化时的快速切换）\n     */\n    hideStickerSuggestionsImmediately() {\n        if (this.suggestionContainer) {\n            this.suggestionContainer.classList.remove('show');\n            if (this.suggestionContainer.parentNode) {\n                this.suggestionContainer.parentNode.removeChild(this.suggestionContainer);\n            }\n            this.suggestionContainer = null;\n            this.isSuggestionVisible = false;\n        }\n        else {\n            // 即使没有容器，也要确保状态正确\n            this.isSuggestionVisible = false;\n        }\n    }\n    /**\n     * 从建议中发送表情包\n     * @param sticker 表情包数据\n     */\n    sendStickerFromSuggestion(sticker) {\n        // 清空输入框\n        const inputField = document.getElementById('inputField');\n        if (inputField) {\n            inputField.value = '';\n        }\n        // 使用新的表情包发送格式：备注+后缀\n        const fileName = this.extractFileNameFromUrl(sticker.url);\n        const stickerContent = sticker.note ? `${sticker.note}${fileName}` : fileName;\n        // 创建表情包消息\n        const stickerMessage = {\n            id: this.generateMessageId(),\n            type: 'S',\n            chatId: this.currentChat,\n            sender: '{{user}}',\n            avatar: '',\n            messageType: 'sticker',\n            content: stickerContent, // 使用新格式：备注+后缀\n            timestamp: this.getCurrentTime(),\n            isPending: true,\n        };\n        // 添加到发送队列\n        this.addToSendQueue(stickerMessage);\n        // 添加到界面\n        this.addNewMessageToInterface(stickerMessage);\n        // 隐藏建议\n        this.hideStickerSuggestionsImmediately();\n        // 播放音效\n        this.soundManager.playSound('click');\n        console.log('从建议发送表情包:', sticker.note, '→', stickerContent);\n    }\n    /**\n     * 显示用户消息上下文菜单\n     */\n    showUserMessageContextMenu(event, message, messageElement) {\n        // 创建模态框\n        const modal = document.createElement('div');\n        modal.className = 'modal-overlay user-message-context-modal';\n        modal.innerHTML = `\n      <div class=\"modal-container\">\n        <div class=\"modal-header\">\n          <h3>消息操作</h3>\n          <button class=\"modal-close-btn\">×</button>\n        </div>\n        <div class=\"modal-body\">\n          <button class=\"modal-btn delete-btn\" data-action=\"batch-delete\">\n            删除消息\n          </button>\n          <button class=\"modal-btn reroll-btn\" data-action=\"reroll\">\n            重新生成\n          </button>\n        </div>\n      </div>\n    `;\n        // 添加到手机容器内，而不是整个页面\n        const phoneContainer = document.querySelector('.phone-container');\n        if (phoneContainer) {\n            phoneContainer.appendChild(modal);\n        }\n        else {\n            document.body.appendChild(modal);\n        }\n        // 显示模态框\n        setTimeout(() => {\n            modal.classList.add('show');\n        }, 10);\n        // 绑定按钮点击事件\n        const deleteBtn = modal.querySelector('[data-action=\"batch-delete\"]');\n        const rerollBtn = modal.querySelector('[data-action=\"reroll\"]');\n        const closeBtn = modal.querySelector('.modal-close-btn');\n        // 添加空值检查\n        if (deleteBtn) {\n            deleteBtn.addEventListener('click', () => {\n                this.enterBatchDeleteMode();\n                modal.remove();\n            });\n        }\n        if (rerollBtn) {\n            rerollBtn.addEventListener('click', () => {\n                this.handleRerollMessage(message, messageElement);\n                modal.remove();\n            });\n        }\n        if (closeBtn) {\n            closeBtn.addEventListener('click', () => {\n                modal.remove();\n            });\n        }\n        // 点击遮罩关闭\n        modal.addEventListener('click', e => {\n            if (e.target === modal) {\n                modal.remove();\n            }\n        });\n    }\n    /**\n     * 进入批量删除模式\n     */\n    enterBatchDeleteMode() {\n        this.isBatchDeleteMode = true;\n        this.selectedMessages.clear();\n        // 显示批量删除工具栏\n        this.showBatchDeleteToolbar();\n        // 为所有消息添加选择功能\n        this.enableMessageSelection();\n        // 添加批量删除模式的样式\n        const chatContainer = document.querySelector('.chat-container');\n        if (chatContainer) {\n            chatContainer.classList.add('batch-delete-mode');\n        }\n    }\n    /**\n     * 退出批量删除模式\n     */\n    exitBatchDeleteMode() {\n        this.isBatchDeleteMode = false;\n        this.selectedMessages.clear();\n        // 隐藏批量删除工具栏\n        this.hideBatchDeleteToolbar();\n        // 移除消息选择功能\n        this.disableMessageSelection();\n        // 移除批量删除模式的样式\n        const chatContainer = document.querySelector('.chat-container');\n        if (chatContainer) {\n            chatContainer.classList.remove('batch-delete-mode');\n        }\n    }\n    /**\n     * 显示批量删除工具栏\n     */\n    showBatchDeleteToolbar() {\n        // 如果工具栏已存在，先移除\n        if (this.batchDeleteToolbar) {\n            this.batchDeleteToolbar.remove();\n        }\n        // 创建工具栏\n        this.batchDeleteToolbar = document.createElement('div');\n        this.batchDeleteToolbar.className = 'batch-delete-toolbar';\n        this.batchDeleteToolbar.innerHTML = `\n      <div class=\"toolbar-content\">\n        <span class=\"selected-count\">已选择 0 条消息</span>\n        <div class=\"toolbar-buttons\">\n          <button class=\"toolbar-btn cancel-btn\">取消</button>\n          <button class=\"toolbar-btn delete-btn\" disabled>删除</button>\n        </div>\n      </div>\n    `;\n        // 添加到聊天容器内，作为绝对定位的覆盖层\n        const chatContainer = document.querySelector('.chat-container');\n        if (chatContainer) {\n            chatContainer.appendChild(this.batchDeleteToolbar);\n        }\n        // 绑定工具栏事件\n        this.bindBatchDeleteToolbarEvents();\n    }\n    /**\n     * 隐藏批量删除工具栏\n     */\n    hideBatchDeleteToolbar() {\n        if (this.batchDeleteToolbar) {\n            this.batchDeleteToolbar.remove();\n            this.batchDeleteToolbar = null;\n        }\n    }\n    /**\n     * 绑定批量删除工具栏事件\n     */\n    bindBatchDeleteToolbarEvents() {\n        if (!this.batchDeleteToolbar)\n            return;\n        const cancelBtn = this.batchDeleteToolbar.querySelector('.cancel-btn');\n        const deleteBtn = this.batchDeleteToolbar.querySelector('.delete-btn');\n        cancelBtn.addEventListener('click', () => {\n            this.exitBatchDeleteMode();\n        });\n        deleteBtn.addEventListener('click', async () => {\n            await this.confirmBatchDelete();\n        });\n    }\n    /**\n     * 启用消息选择功能\n     */\n    enableMessageSelection() {\n        const messageElements = document.querySelectorAll('.message');\n        messageElements.forEach(messageElement => {\n            messageElement.classList.add('selectable');\n            // 添加选择框到消息元素的最前面（头像左边）\n            const checkbox = document.createElement('div');\n            checkbox.className = 'message-checkbox';\n            checkbox.innerHTML = '<div class=\"checkbox-inner\"></div>';\n            messageElement.insertBefore(checkbox, messageElement.firstChild);\n            // 绑定点击事件到整个消息元素\n            const boundHandler = (event) => this.handleMessageSelection(event);\n            messageElement.addEventListener('click', boundHandler);\n            // 存储绑定的处理器以便后续移除\n            messageElement._selectionHandler = boundHandler;\n        });\n    }\n    /**\n     * 禁用消息选择功能\n     */\n    disableMessageSelection() {\n        const messageElements = document.querySelectorAll('.message');\n        messageElements.forEach(messageElement => {\n            messageElement.classList.remove('selectable', 'selected');\n            // 移除选择框\n            const checkbox = messageElement.querySelector('.message-checkbox');\n            if (checkbox) {\n                checkbox.remove();\n            }\n            // 移除点击事件监听器\n            const handler = messageElement._selectionHandler;\n            if (handler) {\n                messageElement.removeEventListener('click', handler);\n                delete messageElement._selectionHandler;\n            }\n        });\n    }\n    /**\n     * 处理消息选择\n     */\n    handleMessageSelection(event) {\n        if (!this.isBatchDeleteMode)\n            return;\n        const messageElement = event.currentTarget;\n        // 播放点击音效\n        this.soundManager.playSound('click');\n        // 使用DOM位置作为标识符，而不是消息ID\n        const messagesContainer = document.getElementById('chatMessages');\n        if (!messagesContainer)\n            return;\n        const allMessageElements = Array.from(messagesContainer.children);\n        const elementIndex = allMessageElements.indexOf(messageElement);\n        if (elementIndex === -1)\n            return;\n        const indexKey = elementIndex.toString();\n        // 切换选择状态\n        if (this.selectedMessages.has(indexKey)) {\n            this.selectedMessages.delete(indexKey);\n            messageElement.classList.remove('selected');\n        }\n        else {\n            this.selectedMessages.add(indexKey);\n            messageElement.classList.add('selected');\n        }\n        // 更新工具栏\n        this.updateBatchDeleteToolbar();\n    }\n    /**\n     * 更新批量删除工具栏\n     */\n    updateBatchDeleteToolbar() {\n        if (!this.batchDeleteToolbar)\n            return;\n        const selectedCount = this.selectedMessages.size;\n        const countElement = this.batchDeleteToolbar.querySelector('.selected-count');\n        const deleteBtn = this.batchDeleteToolbar.querySelector('.delete-btn');\n        countElement.textContent = `已选择 ${selectedCount} 条消息`;\n        deleteBtn.disabled = selectedCount === 0;\n    }\n    /**\n     * 确认批量删除\n     */\n    async confirmBatchDelete() {\n        if (this.selectedMessages.size === 0)\n            return;\n        const count = this.selectedMessages.size;\n        const confirmed = confirm(`确定要删除选中的 ${count} 条消息吗？此操作不可撤销。`);\n        if (confirmed) {\n            await this.executeBatchDelete();\n        }\n    }\n    /**\n     * 执行批量删除\n     */\n    async executeBatchDelete() {\n        console.log('🗑️ === 开始批量删除调试 ===');\n        const currentChatData = this.chatData.get(this.currentChat);\n        if (!currentChatData) {\n            console.error('❌ 当前聊天数据不存在');\n            return;\n        }\n        console.log('📋 批量删除状态:');\n        console.log('  - 当前聊天:', this.currentChat);\n        console.log('  - 选中的消息位置索引:', Array.from(this.selectedMessages));\n        console.log('  - 消息总数:', currentChatData.messages.length);\n        try {\n            // 现在selectedMessages存储的是DOM位置索引，直接转换为数字数组\n            const selectedIndices = Array.from(this.selectedMessages).map(indexStr => parseInt(indexStr, 10));\n            console.log('📊 选中的DOM位置索引:', selectedIndices);\n            console.log('  - 消息总数:', currentChatData.messages.length);\n            if (selectedIndices.length === 0) {\n                console.warn('⚠️ 没有选中要删除的消息');\n                this.showToast('没有选中要删除的消息', 'warning');\n                return;\n            }\n            // 验证索引有效性\n            const validIndices = selectedIndices.filter(index => index >= 0 && index < currentChatData.messages.length);\n            if (validIndices.length !== selectedIndices.length) {\n                console.warn('⚠️ 部分选中的消息索引无效');\n                console.log('  - 原始索引:', selectedIndices);\n                console.log('  - 有效索引:', validIndices);\n            }\n            if (validIndices.length === 0) {\n                console.warn('⚠️ 没有有效的消息索引');\n                this.showToast('选中的消息无效', 'warning');\n                return;\n            }\n            // 调用统一的删除方法（这个方法会处理 SillyTavern API 调用）\n            await this.deleteSelectedMessages(validIndices);\n            // 退出批量删除模式\n            this.exitBatchDeleteMode();\n            console.log('✅ 批量删除完成');\n        }\n        catch (error) {\n            console.error('❌ 批量删除失败:', error);\n            this.showToast('批量删除失败', 'error');\n        }\n        finally {\n            console.log('🗑️ === 批量删除调试结束 ===');\n        }\n    }\n    /**\n     * 删除选中的消息\n     */\n    async deleteSelectedMessages(messageIndices) {\n        console.log('🗑️ === 开始删除消息调试 ===');\n        console.log('📋 要删除的消息索引:', messageIndices);\n        try {\n            // 获取当前聊天数据\n            const currentChatData = this.chatData.get(this.currentChat);\n            if (!currentChatData) {\n                console.error('❌ 当前聊天数据不存在:', this.currentChat);\n                return;\n            }\n            console.log('📊 删除前聊天数据状态:');\n            console.log('  - 当前聊天:', this.currentChat);\n            console.log('  - 消息总数:', currentChatData.messages.length);\n            console.log('  - 要删除的消息数量:', messageIndices.length);\n            // 获取要删除的消息详情（用于调试）\n            const messagesToDelete = messageIndices.map(index => {\n                const message = currentChatData.messages[index];\n                console.log(`  - 索引 ${index}: ${message ? '消息存在' : '消息不存在'}`);\n                return message;\n            });\n            // 检查 SillyTavern 的楼层状态\n            console.log('📨 SillyTavern 楼层状态检查:');\n            const lastMessageId = typeof getLastMessageId === 'function' ? getLastMessageId() : 0;\n            console.log('  - 最后楼层ID:', lastMessageId);\n            console.log('  - 说明: 所有消息都存储在同一楼层中，使用 bear 标签格式');\n            // 从前端界面中移除消息\n            console.log('🔄 从前端数据中移除消息...');\n            messageIndices.sort((a, b) => b - a); // 从后往前删除，避免索引变化\n            messageIndices.forEach(index => {\n                const removedMessage = currentChatData.messages.splice(index, 1)[0];\n                console.log(`  - 移除索引 ${index}:`, removedMessage ? removedMessage.content.substring(0, 30) + '...' : '空消息');\n            });\n            console.log('📊 删除后前端数据状态:');\n            console.log('  - 剩余消息数:', currentChatData.messages.length);\n            // 重新构建 bear 日志内容（移除被删除的消息）\n            console.log('🔄 重新构建 bear 日志内容...');\n            const updatedBearContent = this.messageParser.buildSingleChatBearContent(currentChatData);\n            console.log('📝 bear 内容已更新');\n            // 使用 setChatMessages API 更新楼层内容\n            if (typeof setChatMessages === 'function') {\n                console.log('🚀 调用 setChatMessages API 更新楼层内容...');\n                // 获取最后一条消息的ID\n                const lastMessageId = typeof getLastMessageId === 'function' ? getLastMessageId() : 0;\n                console.log('  - 目标楼层ID:', lastMessageId);\n                // 获取当前消息并只替换bear标签内容\n                const currentMessage = getChatMessages(-1)[0];\n                const originalMessage = currentMessage?.message || '';\n                const bearContentOnly = updatedBearContent.replace('<bear>', '').replace('</bear>', '');\n                const finalMessage = this.replaceOnlyBearTagContent(originalMessage, bearContentOnly);\n                const messageData = [\n                    {\n                        message_id: lastMessageId,\n                        message: finalMessage,\n                    },\n                ];\n                console.log('  - 更新的消息数据:', {\n                    message_id: lastMessageId,\n                    content_length: updatedBearContent.length,\n                });\n                await setChatMessages(messageData, { refresh: 'none' });\n                console.log('✅ setChatMessages API 调用成功 - 楼层内容已更新');\n                // 验证更新结果\n                if (typeof getChatMessages === 'function') {\n                    try {\n                        const afterUpdateMessages = getChatMessages(`${lastMessageId}`);\n                        if (afterUpdateMessages && afterUpdateMessages.length > 0) {\n                            const updatedMessage = afterUpdateMessages[0];\n                            console.log('📊 SillyTavern 楼层已更新');\n                        }\n                    }\n                    catch (error) {\n                        console.error('❌ 验证更新结果失败:', error);\n                    }\n                }\n            }\n            else {\n                console.error('❌ setChatMessages 函数不可用');\n                this.showToast('删除功能不可用', 'error');\n                return;\n            }\n            // 重新渲染聊天界面\n            console.log('🎨 重新渲染聊天界面...');\n            this.renderCurrentChat();\n            console.log('✅ 消息删除完成');\n            this.showToast(`已删除 ${messageIndices.length} 条消息`, 'success');\n        }\n        catch (error) {\n            console.error('❌ 删除消息失败:', error);\n            console.error('错误详情:', {\n                message: error.message,\n                stack: error.stack,\n                messageIndices,\n                currentChat: this.currentChat,\n            });\n            this.showToast('删除消息失败', 'error');\n        }\n        finally {\n            console.log('🗑️ === 删除消息调试结束 ===');\n        }\n    }\n    /**\n     * 处理重新生成消息\n     * 删除指定消息之后的所有消息，然后重新生成AI回复\n     */\n    async handleRerollMessage(message, messageElement) {\n        try {\n            console.log('🔄 开始重新生成消息，从消息:', message);\n            // 1. 获取当前聊天数据\n            const currentChatData = this.chatData.get(this.currentChat);\n            if (!currentChatData) {\n                this.showToast('未找到当前聊天数据', 'error');\n                return;\n            }\n            // 2. 找到要重新生成的消息在数组中的位置\n            let messageIndex = -1;\n            if (messageElement) {\n                // 通过DOM元素位置确定消息索引\n                console.log('🔍 通过DOM元素位置查找消息...');\n                const messagesContainer = document.getElementById('chatMessages');\n                if (messagesContainer) {\n                    const allMessageElements = Array.from(messagesContainer.children);\n                    const elementIndex = allMessageElements.indexOf(messageElement);\n                    console.log('📍 DOM位置信息:');\n                    console.log('  - 消息元素在DOM中的索引:', elementIndex);\n                    console.log('  - DOM中总消息元素数:', allMessageElements.length);\n                    console.log('  - 聊天数据中的消息数:', currentChatData.messages.length);\n                    if (elementIndex !== -1 && elementIndex < currentChatData.messages.length) {\n                        messageIndex = elementIndex;\n                        console.log('✅ 通过DOM位置找到消息，索引:', messageIndex);\n                    }\n                }\n            }\n            if (messageIndex === -1) {\n                console.log('❌ 无法通过DOM位置找到消息，请从聊天列表重新进入后再试');\n                this.showToast('无法定位消息，请从聊天列表重新进入后再试', 'warning');\n                return;\n            }\n            console.log(`📍 找到消息位置: ${messageIndex}, 总消息数: ${currentChatData.messages.length}`);\n            // 3. 检查是否有需要删除的消息（该消息之后的所有消息）\n            const messagesToDelete = currentChatData.messages.slice(messageIndex + 1);\n            console.log(`🗑️ 需要删除 ${messagesToDelete.length} 条消息`);\n            // 4. 如果有消息需要删除，先删除它们（参考批量删除的实现）\n            if (messagesToDelete.length > 0) {\n                // 从前端数据中删除这些消息\n                currentChatData.messages = currentChatData.messages.slice(0, messageIndex + 1);\n                // 更新最后一条消息\n                if (currentChatData.messages.length > 0) {\n                    const lastMsg = currentChatData.messages[currentChatData.messages.length - 1];\n                    currentChatData.lastMessage = this.messageParser.formatLastMessage(lastMsg);\n                }\n                // 重新构建 bear 日志内容（移除被删除的消息）\n                console.log('🔄 重新构建 bear 日志内容...');\n                const updatedBearContent = this.messageParser.buildSingleChatBearContent(currentChatData);\n                // 使用 setChatMessages API 更新楼层内容\n                if (typeof setChatMessages === 'function') {\n                    console.log('🚀 调用 setChatMessages API 更新楼层内容...');\n                    const lastMessageId = typeof getLastMessageId === 'function' ? getLastMessageId() : 0;\n                    // 获取当前消息并只替换bear标签内容\n                    const currentMessage = getChatMessages(-1)[0];\n                    const originalMessage = currentMessage?.message || '';\n                    const bearContentOnly = updatedBearContent.replace('<bear>', '').replace('</bear>', '');\n                    const finalMessage = this.replaceOnlyBearTagContent(originalMessage, bearContentOnly);\n                    const messageData = [\n                        {\n                            message_id: lastMessageId,\n                            message: finalMessage,\n                        },\n                    ];\n                    await setChatMessages(messageData, { refresh: 'none' });\n                    console.log('✅ setChatMessages API 调用成功 - 楼层内容已更新');\n                }\n                else {\n                    console.error('❌ setChatMessages 函数不可用');\n                    this.showToast('删除功能不可用', 'error');\n                    return;\n                }\n                console.log('✅ 已删除后续消息并更新楼层');\n                // 精确删除DOM中的消息元素，而不是重新渲染整个界面\n                console.log('🎨 精确删除DOM中的后续消息元素...');\n                this.removeMessagesFromDOM(messageIndex + 1);\n            }\n            // 5. 构建提示词 - 只使用被双击的那条消息作为用户输入\n            const chatData = this.chatData.get(message.chatId);\n            let basePrompt = '';\n            if (chatData?.type === 'group') {\n                // 群聊格式\n                const groupName = chatData.chatName || message.chatId;\n                basePrompt = `回复和${groupName}的聊天：`;\n            }\n            else {\n                // 私聊格式\n                const chatName = chatData?.chatName || message.chatId;\n                const characterName = this.extractCharacterNameFromChatName(chatName);\n                basePrompt = `回复和${characterName}的聊天：`;\n            }\n            // 只使用被双击的消息内容作为用户输入\n            let messageContent = message.content;\n            if (message.messageType !== 'text') {\n                messageContent = `${message.messageType}:${message.content}`;\n            }\n            const prompt = `${basePrompt}${messageContent}`;\n            console.log('📝 构建的提示词:', prompt);\n            // 6. 显示加载状态\n            this.showToast('正在重新生成回复...', 'info');\n            // 显示打字动画\n            const typingMessage = await this.showTypingIndicator();\n            // 7. 调用AI生成，复用现有的generate方法\n            const aiResponse = await generate({\n                user_input: prompt,\n                should_stream: false,\n            });\n            console.log('🤖 收到AI回复:', aiResponse);\n            // 8. 隐藏打字动画\n            this.hideTypingIndicator(typingMessage);\n            // 9. 处理AI回复，复用现有的方法\n            await this.handleAIResponse(aiResponse, message);\n        }\n        catch (error) {\n            console.error('❌ 重新生成消息失败:', error);\n            this.showToast('重新生成失败，请重试', 'error');\n            // 播放错误音效\n            this.soundManager.playSound('error');\n        }\n    }\n    /**\n     * 精确删除DOM中指定索引之后的消息元素\n     * @param startIndex 开始删除的索引（包含该索引）\n     */\n    removeMessagesFromDOM(startIndex) {\n        try {\n            const messagesContainer = document.getElementById('chatMessages');\n            if (!messagesContainer) {\n                console.error('找不到消息容器 #chatMessages');\n                return;\n            }\n            const messageElements = Array.from(messagesContainer.children);\n            console.log(`🗑️ 准备删除DOM中索引 ${startIndex} 之后的消息元素`);\n            console.log(`  - DOM中总消息元素数: ${messageElements.length}`);\n            console.log(`  - 需要删除的元素数: ${messageElements.length - startIndex}`);\n            // 从后往前删除，避免索引变化的问题\n            for (let i = messageElements.length - 1; i >= startIndex; i--) {\n                const elementToRemove = messageElements[i];\n                if (elementToRemove) {\n                    console.log(`  - 删除DOM元素索引: ${i}`);\n                    elementToRemove.remove();\n                }\n            }\n            console.log('✅ DOM消息元素删除完成');\n        }\n        catch (error) {\n            console.error('❌ 删除DOM消息元素失败:', error);\n            // 如果精确删除失败，回退到重新渲染整个界面\n            console.log('🔄 回退到重新渲染整个界面...');\n            this.renderCurrentChat();\n        }\n    }\n    /**\n     * 截断文本\n     */\n    truncateText(text, maxLength) {\n        if (text.length <= maxLength)\n            return text;\n        return text.substring(0, maxLength) + '...';\n    }\n    /**\n     * 获取缩放管理器实例\n     */\n    getScaleManager() {\n        return this.scaleManager;\n    }\n    /**\n     * 获取打字速度管理器实例\n     */\n    getTypingSpeedManager() {\n        return this.typingSpeedManager;\n    }\n    /**\n     * 检查并处理角色切换（可以被外部调用）\n     */\n    checkCharacterChange() {\n        const currentCharId = this.getCurrentCharacterId();\n        console.log(`🔍 当前角色ID: ${currentCharId}`);\n        // 可以在这里添加逻辑来检查是否真的需要重新加载\n        this.handleCharacterChange();\n    }\n    /**\n     * 标准化聊天ID用于比较（处理大小写和空格差异）\n     * @param chatId 聊天ID\n     * @returns 标准化的聊天ID\n     */\n    normalizeChatIdForComparison(chatId) {\n        return chatId.trim().replace(/\\s+/g, '_').toLowerCase();\n    }\n    /**\n     * 从聊天名称中提取角色名称\n     * @param chatName 聊天名称（如\"和小明的聊天\"）\n     * @returns 角色名称（如\"小明\"）\n     */\n    extractCharacterNameFromChatName(chatName) {\n        // 匹配\"和XXX的聊天\"格式\n        const match = chatName.match(/^和(.+)的聊天$/);\n        if (match) {\n            return match[1];\n        }\n        // 如果不匹配，返回原始名称\n        return chatName;\n    }\n    /**\n     * 在合并数据之前检测新消息\n     * @param newBearContent 新的Bear内容\n     * @returns 需要渲染的新消息\n     */\n    async detectNewMessagesBeforeMerge(newBearContent) {\n        try {\n            let newlyAddedMessages = [];\n            if (!this.lastBearContent) {\n                console.log('🔍 首次解析Bear内容，检查是否有新的AI回复');\n                // 首次解析：只渲染当前界面中不存在的AI消息\n                const newMessages = this.messageParser.parseBearContent(newBearContent);\n                const existingMessages = this.getExistingMessagesFromInterface();\n                console.log('🔍 [DEBUG] 现有消息指纹集合:', Array.from(existingMessages));\n                console.log('🔍 [DEBUG] 当前聊天ID:', this.currentChat);\n                for (const [chatId, chatData] of await newMessages) {\n                    console.log(`🔍 [DEBUG] 检查聊天 \"${chatId}\" 的消息`);\n                    for (const message of chatData.messages) {\n                        const messageFingerprint = this.generateMessageFingerprint(message);\n                        console.log(`🔍 [DEBUG] 消息指纹: \"${messageFingerprint}\", 发送者: \"${message.sender}\", 内容: \"${message.content.substring(0, 30)}...\"`);\n                        // 只添加非用户消息（AI回复的消息）且不在当前界面中的消息\n                        if (message.sender !== '{{user}}' && message.sender !== 'user') {\n                            console.log(`🔍 [DEBUG] 这是AI消息，检查是否已存在`);\n                            if (!existingMessages.has(messageFingerprint)) {\n                                console.log(`🔍 [DEBUG] ✅ 发现新AI消息，添加到渲染队列`);\n                                newlyAddedMessages.push(message);\n                            }\n                            else {\n                                console.log(`🔍 [DEBUG] ❌ AI消息已存在，跳过`);\n                            }\n                        }\n                        else {\n                            console.log(`🔍 [DEBUG] 这是用户消息，跳过`);\n                        }\n                    }\n                }\n            }\n            else {\n                // 非首次解析：进行差异检测\n                console.log('🔍 进行Bear内容差异检测');\n                const oldMessages = this.messageParser.parseBearContent(this.lastBearContent);\n                const newMessages = this.messageParser.parseBearContent(newBearContent);\n                // 找出新增的消息\n                newlyAddedMessages = this.findNewMessages(await oldMessages, await newMessages);\n            }\n            console.log(`🔍 [DEBUG] 最终新消息数量: ${newlyAddedMessages.length}`);\n            if (newlyAddedMessages.length > 0) {\n                console.log(`🆕 发现 ${newlyAddedMessages.length} 条新消息`);\n                newlyAddedMessages.forEach((msg, index) => {\n                    console.log(`🆕 [DEBUG] 新消息${index + 1}: 发送者=\"${msg.sender}\", 内容=\"${msg.content.substring(0, 50)}...\"`);\n                });\n            }\n            return newlyAddedMessages;\n        }\n        catch (error) {\n            console.error('❌ 检测新消息失败:', error);\n            return [];\n        }\n    }\n    /**\n     * 渲染检测到的新消息\n     * @param newMessages 需要渲染的新消息\n     */\n    async renderDetectedNewMessages(newMessages) {\n        if (newMessages.length === 0) {\n            console.log('🔍 未发现新消息');\n            return;\n        }\n        // 立即更新未读消息计数和消息预览（不等待渲染完成）\n        if (this.chatListManager && newMessages.length > 0) {\n            console.log('📊 立即更新未读消息计数...', newMessages.length, '条新消息');\n            // 先更新chatListManager中的数据，确保消息预览能获取到最新消息（不显示界面）\n            this.chatListManager.updateChatData(this.chatData);\n            // 传递当前聊天ID，如果用户正在聊天界面中\n            const currentChatId = this.currentInterface === 'chat' ? this.currentChat : undefined;\n            this.chatListManager.onNewMessages(newMessages, currentChatId);\n            // 调试信息：显示涉及的聊天ID\n            const affectedChats = [...new Set(newMessages.map(m => m.chatId))];\n            console.log('📊 涉及的聊天:', affectedChats);\n            console.log('📖 当前聊天ID:', currentChatId);\n        }\n        // 然后渲染当前聊天的新消息（异步，不阻塞未读计数更新）\n        await this.renderNewMessagesForCurrentChat(newMessages);\n        // 渲染完成后触发聊天迁移检查\n        console.log('🎨 [主应用] 消息渲染完成，准备触发聊天迁移检查');\n        await this.triggerChatMigrationCheck();\n    }\n    /**\n     * 检查是否是空的Bear内容（用于判断是否是第一个Bear楼层）\n     */\n    isEmptyBearContent() {\n        // 检查是否有任何聊天数据包含消息\n        for (const [, chatData] of this.chatData) {\n            if (chatData.messages && chatData.messages.length > 0) {\n                return false;\n            }\n        }\n        return true;\n    }\n    /**\n     * 检查是否存在多个Bear楼层\n     * 通过检查历史消息中是否有多个包含<bear>标签的楼层\n     */\n    async hasMultipleBearFloors() {\n        try {\n            // 获取所有历史消息\n            const allMessages = getChatMessages('0-{{lastMessageId}}');\n            if (!allMessages || allMessages.length === 0) {\n                return false;\n            }\n            // 统计包含<bear>标签的楼层数量\n            let bearFloorCount = 0;\n            for (const message of allMessages) {\n                if (message.message && message.message.includes('<bear>')) {\n                    bearFloorCount++;\n                }\n            }\n            console.log(`🔍 检测到 ${bearFloorCount} 个Bear楼层`);\n            return bearFloorCount > 1;\n        }\n        catch (error) {\n            console.error('❌ 检查Bear楼层数量失败:', error);\n            return false;\n        }\n    }\n    /**\n     * 更新界面数据（用于显示），不影响楼层保存的内容\n     * 这样可以在迁移功能禁用时保持界面数据同步，同时楼层只保存新消息\n     */\n    updateInterfaceDataWithNewMessages(newMessages) {\n        console.log('🔄 更新界面数据以保持显示同步');\n        for (const [chatId, newChatData] of newMessages) {\n            const existingChatData = this.chatData.get(chatId);\n            if (existingChatData) {\n                // 如果聊天已存在，合并消息（去重并按时间排序）\n                const mergedMessages = this.mergeMessages(existingChatData.messages, newChatData.messages);\n                existingChatData.messages = mergedMessages;\n                existingChatData.lastMessage =\n                    mergedMessages.length > 0\n                        ? this.messageParser.formatLastMessage(mergedMessages[mergedMessages.length - 1])\n                        : '';\n                console.log(`📝 界面数据：更新聊天 ${chatId}，现有 ${mergedMessages.length} 条消息`);\n            }\n            else {\n                // 如果是新聊天，直接添加\n                this.chatData.set(chatId, newChatData);\n                console.log(`🆕 界面数据：添加新聊天 ${chatId}，包含 ${newChatData.messages.length} 条消息`);\n            }\n        }\n        console.log('✅ 界面数据更新完成，用户界面将显示最新消息');\n    }\n}\n// 全局变量声明\nlet bearChatManager = null;\n// 初始化管理器 - 只实例化一次\n$(() => {\n    if (!bearChatManager) {\n        // 初始化AvatarSourceService\n        try {\n            // 将avatarSourceService暴露到全局，便于其他模块使用\n            window.avatarSourceService = _modules_utils__WEBPACK_IMPORTED_MODULE_10__.avatarSourceService;\n            console.log('✅ AvatarSourceService已初始化');\n        }\n        catch (error) {\n            console.error('❌ AvatarSourceService初始化失败:', error);\n        }\n        // 创建多云熊聊天管理器实例\n        bearChatManager = new BearChatManager();\n        // 将实例暴露到全局，便于调试和外部访问\n        window.bearChatManager = bearChatManager;\n        // 暴露管理器到全局，便于测试\n        window.scaleManager = bearChatManager.getScaleManager();\n        window.typingSpeedManager = bearChatManager.getTypingSpeedManager();\n        console.log('多云熊聊天界面已初始化');\n        // 调试未读消息功能\n        window.debugUnreadMessages = () => {\n            if (bearChatManager && bearChatManager.chatListManager) {\n                const unreadManager = bearChatManager.chatListManager.getUnreadMessageManager();\n                console.log('📊 未读消息调试信息:');\n                console.log('- 总未读数:', unreadManager.getTotalUnreadCount());\n                console.log('- 所有未读计数:', Object.fromEntries(unreadManager.getAllUnreadCounts()));\n                return {\n                    totalUnread: unreadManager.getTotalUnreadCount(),\n                    allCounts: Object.fromEntries(unreadManager.getAllUnreadCounts()),\n                };\n            }\n            else {\n                console.error('❌ 未读消息管理器未初始化');\n            }\n        };\n        window.checkCharacterChange = () => {\n            if (bearChatManager) {\n                return bearChatManager.checkCharacterChange();\n            }\n            else {\n                console.error('❌ BearChatManager 未初始化');\n            }\n        };\n        // 添加一个简单的角色信息检查函数\n        window.checkCharacter = () => {\n            console.log('=== 简单角色检查 ===');\n            // 检查各种可能的角色信息源\n            const checks = {\n                'typeof TavernHelper': typeof TavernHelper,\n                getCharData函数存在: typeof getCharData === 'function',\n                deleteChatMessages函数存在: typeof deleteChatMessages === 'function',\n                setChatMessages函数存在: typeof setChatMessages === 'function',\n                this_chid: window.this_chid,\n                name2: window.name2,\n                characters存在: typeof window.characters !== 'undefined',\n            };\n            console.table(checks);\n            // 尝试获取角色数据\n            if (typeof getCharData === 'function') {\n                try {\n                    const charData = getCharData();\n                    console.log('getCharData() 结果:', charData);\n                }\n                catch (error) {\n                    console.error('getCharData() 错误:', error);\n                }\n            }\n            return checks;\n        };\n        // 调试工具已静默加载\n    }\n});\n// 卸载时清理 - 遵循项目模式\n$(window).on('unload', () => {\n    const bearChatManager = window.bearChatManager;\n    if (bearChatManager && bearChatManager.soundManager) {\n        bearChatManager.soundManager.destroy();\n    }\n    console.log('多云熊聊天界面已卸载');\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5aSa5LqR54aKL+Wkh+S7vS/nu5lyb3Zv55qEL+Wkh+S7vS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7O0dBR0c7QUFFSCxTQUFTO0FBQ1U7QUFFbkIsV0FBVztBQUMwQztBQUVyRCxXQUFXO0FBQ21FO0FBRTlFLFlBQVk7QUFDeUM7QUFFckQsYUFBYTtBQUM4RDtBQUNTO0FBQ3hCO0FBQzRCO0FBQ3pCO0FBQ1M7QUFDUTtBQUNqQjtBQUUvRCxnQkFBZ0I7QUFDaUI7QUFFakMsV0FBVztBQUMwQztBQUVyRCxXQUFXO0FBQ3dGO0FBQ2xCO0FBQ0g7QUFxRTlFOzs7Ozs7R0FNRztBQUNILE1BQU0sYUFBYTtJQUNqQixVQUFVO0lBQ08sVUFBVSxHQUFHLDJCQUEyQixDQUFDO0lBQzFELG9DQUFvQztJQUNuQixhQUFhLEdBQUcseUNBQXlDLENBQUM7SUFDMUQsZ0JBQWdCLEdBQUcsc0NBQXNDLENBQUM7SUFFM0UsMkJBQTJCO0lBQ1YsZ0JBQWdCLEdBQy9CLDRFQUE0RSxDQUFDO0lBQzlELG1CQUFtQixHQUFHLDBDQUEwQyxDQUFDO0lBQ2pFLGlCQUFpQixHQUFHLG9CQUFvQixDQUFDO0lBRTFELHFCQUFxQjtJQUNKLGtCQUFrQixHQUFHLG9CQUFvQixDQUFDO0lBRW5ELGNBQWMsQ0FBTSxDQUFDLFdBQVc7SUFDaEMsVUFBVSxDQUFvQixDQUFDLFVBQVU7SUFDekMsY0FBYyxDQUFpQixDQUFDLFFBQVE7SUFFaEQsWUFBWSxjQUFvQjtRQUM5QixJQUFJLENBQUMsY0FBYyxHQUFHLGNBQWMsQ0FBQztRQUNyQyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksNkRBQWlCLEVBQUUsQ0FBQztRQUMxQyxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksNkRBQWMsQ0FBQztZQUN2QyxvQkFBb0IsRUFBRSxJQUFJO1lBQzFCLG1CQUFtQixFQUFFLElBQUk7WUFDekIsU0FBUyxFQUFFLElBQUk7U0FDaEIsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVE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QUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQztZQUN0QyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDO1lBQzNDLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQztZQUN0QyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDO1lBQzVCLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQztZQUN0QyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQztZQUNqQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDO1lBQzVCLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDO1lBQ2xCLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQztZQUN2QixDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUM7WUFDdkIsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDO1lBQ3RDLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQztZQUN0QyxDQUFD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QztnQkFDdEMsSUFBSSxDQUFDO29CQUNILE1BQU0sUUFBUSxHQUFHLFdBQVcsRUFBRSxDQUFDO29CQUMvQixPQUFPLENBQUMsR0FBRyxDQUFDLG1CQUFtQixFQUFFLFFBQVEsQ0FBQyxDQUFDO2dCQUM3QyxDQUFDO2dCQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7b0JBQ2YsT0FBTyxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsRUFBRSxLQUFLLENBQUMsQ0FBQztnQkFDNUMsQ0FBQztZQUNILENBQUM7WUFFRCxPQUFPLE1BQU0sQ0FBQztRQUNoQixDQUFDLENBQUM7UUFFRixZQUFZO0lBQ2QsQ0FBQztBQUNILENBQUMsQ0FBQyxDQUFDO0FBRUgsaUJBQWlCO0FBQ2pCLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLEdBQUcsRUFBRTtJQUMxQixNQUFNLGVBQWUsR0FBSSxNQUFjLENBQUMsZUFBZSxDQUFDO0lBQ3hELElBQUksZUFBZSxJQUFJLGVBQWUsQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUNwRCxlQUFlLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQ3pDLENBQUM7SUFDRCxPQUFPLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDO0FBQzVCLENBQUMsQ0FBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lpJrkupHnhoov5aSH5Lu9L+e7mXJvdm/nmoQv5aSH5Lu9LnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIOWkmuS6keeGiuiBiuWkqeeVjOmdoumHjeaehOeJiFxuICog5Z+65LqOTG9nLWJhc2Vk54q25oCB566h55CG5qih5byP55qE5Y2V5q2j5YiZ5a6e546wXG4gKi9cblxuLy8g5a+85YWl5qC35byP5paH5Lu2XG5pbXBvcnQgJy4v5aSH5Lu9LnNjc3MnO1xuXG4vLyDlr7zlhaXogYrlpKnliJfooajmqKHlnZdcbmltcG9ydCB7IENoYXRMaXN0TWFuYWdlciB9IGZyb20gJy4vbW9kdWxlcy9jaGF0TGlzdCc7XG5cbi8vIOWvvOWFpeaIkeeahOmhtemdouaooeWdl1xuaW1wb3J0IHsgUHJvZmlsZUludGVyZmFjZSwgaW5pdGlhbGl6ZVByb2ZpbGVNb2R1bGUgfSBmcm9tICcuL21vZHVsZXMvcHJvZmlsZSc7XG5cbi8vIOWvvOWFpemAmueUqOeKtuaAgeagj+e7hOS7tlxuaW1wb3J0IHsgU3RhdHVzQmFyIH0gZnJvbSAnLi9tb2R1bGVzL2NvcmUvU3RhdHVzQmFyJztcblxuLy8g5a+85YWl55So5oi35L+h5oGv6I635Y+W5bel5YW3XG5pbXBvcnQgeyBDaGF0V2FsbHBhcGVyTWFuYWdlciB9IGZyb20gJy4vbW9kdWxlcy9jaGF0L0NoYXRXYWxscGFwZXJNYW5hZ2VyJztcbmltcG9ydCB7IENoYXRNaWdyYXRpb25NYW5hZ2VyIH0gZnJvbSAnLi9tb2R1bGVzL2NoYXRNaWdyYXRpb24vQ2hhdE1pZ3JhdGlvbk1hbmFnZXInO1xuaW1wb3J0IHsgaW5pdGlhbGl6ZUV4dGVuc2lvbnMgfSBmcm9tICcuL21vZHVsZXMvZXh0ZW5zaW9ucyc7XG5pbXBvcnQgeyBHcm91cE5hbWVPdmVycmlkZU1hbmFnZXIgfSBmcm9tICcuL21vZHVsZXMvZ3JvdXBDaGF0L0dyb3VwTmFtZU92ZXJyaWRlTWFuYWdlcic7XG5pbXBvcnQgeyBHcm91cENoYXRNYW5hZ2VyIH0gZnJvbSAnLi9tb2R1bGVzL2dyb3VwQ2hhdC9tYW5hZ2VyJztcbmltcG9ydCB7IEdsb2JhbFVzZXJNYW5hZ2VyIH0gZnJvbSAnLi9tb2R1bGVzL3Byb2ZpbGUvR2xvYmFsVXNlck1hbmFnZXInO1xuaW1wb3J0IHsgYXZhdGFyU291cmNlU2VydmljZSwgZ2V0VW5pZmllZFVzZXJBdmF0YXJTeW5jIH0gZnJvbSAnLi9tb2R1bGVzL3V0aWxzJztcbmltcG9ydCB7IFNpbXBsZUF2YXRhck1peGluIH0gZnJvbSAnLi9tb2R1bGVzL3V0aWxzL0F2YXRhclN5bmMnO1xuXG4vLyDlr7zlhaXngbXliqjlspvmqKHlnZfvvIjoh6rliJ3lp4vljJbvvIlcbmltcG9ydCAnLi9tb2R1bGVzL2R5bmFtaWNJc2xhbmQnO1xuXG4vLyDlr7zlhaXliqjmgIHpobXpnaLmqKHlnZdcbmltcG9ydCB7IER5bmFtaWNzTWFuYWdlciB9IGZyb20gJy4vbW9kdWxlcy9keW5hbWljcyc7XG5cbi8vIOWvvOWFpeaguOW/g+acjeWKoeaooeWdl1xuaW1wb3J0IHsgRXJyb3JTdGF0c01hbmFnZXIsIFNjYWxlTWFuYWdlciwgU291bmRNYW5hZ2VyLCBUeXBpbmdTcGVlZE1hbmFnZXIgfSBmcm9tICcuL21vZHVsZXMvY29yZSc7XG5pbXBvcnQgeyBEeW5hbWljc0J1aWxkZXIsIER5bmFtaWNzUGFyc2VyLCBSYXdQb3N0RGF0YSB9IGZyb20gJy4vbW9kdWxlcy9wYXJzZXJzJztcbmltcG9ydCB7IER5bmFtaWNzRGF0YVByb2Nlc3NvciB9IGZyb20gJy4vbW9kdWxlcy91dGlscy9EeW5hbWljc0RhdGFQcm9jZXNzb3InO1xuXG4vLyDlhajlsYDlh73mlbDlo7DmmI5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgZnVuY3Rpb24gZ2VuZXJhdGUoY29uZmlnOiB7XG4gICAgdXNlcl9pbnB1dD86IHN0cmluZztcbiAgICBzaG91bGRfc3RyZWFtPzogYm9vbGVhbjtcbiAgICBpbWFnZT86IEZpbGUgfCBzdHJpbmc7XG4gICAgb3ZlcnJpZGVzPzogYW55O1xuICAgIGluamVjdHM/OiBhbnlbXTtcbiAgICBtYXhfY2hhdF9oaXN0b3J5PzogJ2FsbCcgfCBudW1iZXI7XG4gIH0pOiBQcm9taXNlPHN0cmluZz47XG59XG5cbi8vIOexu+Wei+WumuS5iVxuaW50ZXJmYWNlIENoYXRNZXNzYWdlIHtcbiAgaWQ6IHN0cmluZztcbiAgdHlwZTogJ1MnIHwgJ0cnO1xuICBjaGF0SWQ6IHN0cmluZztcbiAgc2VuZGVyOiBzdHJpbmc7XG4gIGF2YXRhcjogc3RyaW5nO1xuICBtZXNzYWdlVHlwZTogJ3RleHQnIHwgJ2ltYWdlJyB8ICd2b2ljZScgfCAnc3RpY2tlcicgfCAnbG9jYXRpb24nIHwgJ3RyYW5zZmVyJztcbiAgY29udGVudDogc3RyaW5nO1xuICB0aW1lc3RhbXA6IHN0cmluZztcbiAgaXNQZW5kaW5nPzogYm9vbGVhbjtcbiAgZGF0YT86IHsgb3JpZ2luYWxOb3RlPzogc3RyaW5nOyBba2V5OiBzdHJpbmddOiBhbnkgfTtcbn1cblxuaW50ZXJmYWNlIENoYXREYXRhIHtcbiAgY2hhdElkOiBzdHJpbmc7XG4gIGNoYXROYW1lOiBzdHJpbmc7XG4gIGF2YXRhcjogc3RyaW5nO1xuICBtZXNzYWdlczogQ2hhdE1lc3NhZ2VbXTtcbiAgbGFzdE1lc3NhZ2U/OiBzdHJpbmc7XG4gIHR5cGU/OiAnc2luZ2xlJyB8ICdncm91cCc7XG4gIG1lbWJlcnM/OiBhbnlbXTtcbn1cblxuLy8g6KGo5oOF5YyF55u45YWz57G75Z6L5a6a5LmJXG5pbnRlcmZhY2UgU3RpY2tlckRhdGEge1xuICB1aWQ6IG51bWJlcjsgLy8g5LiW55WM5Lmm5p2h55uuSURcbiAgdXJsOiBzdHJpbmc7IC8vIOWkhOeQhuWQjueahOWbvueJh1VSTFxuICBub3RlOiBzdHJpbmc7IC8vIOihqOaDheWMheWkh+azqFxuICByYXdDb250ZW50OiBzdHJpbmc7IC8vIOWOn+Wni+S4lueVjOS5puWGheWuuVxufVxuXG5pbnRlcmZhY2UgU3RpY2tlck9yZGVyIHtcbiAgW3VpZDogbnVtYmVyXTogbnVtYmVyOyAvLyB1aWQgLT4g5o6S5bqP5L2N572u55qE5pig5bCEXG59XG5cbi8vIOWvvOWFpeWKqOaAgeino+aekOWZqOWSjOaVsOaNrui9rOaNouWZqFxuXG4vLyDlo7DmmI7lhajlsYDlh73mlbBcbmRlY2xhcmUgZnVuY3Rpb24gZ2V0Q2hhdE1lc3NhZ2VzKHJhbmdlOiBzdHJpbmcgfCBudW1iZXIpOiBhbnlbXTtcbmRlY2xhcmUgZnVuY3Rpb24gc2V0Q2hhdE1lc3NhZ2VzKFxuICBtZXNzYWdlczogQXJyYXk8eyBtZXNzYWdlX2lkOiBudW1iZXI7IG1lc3NhZ2U/OiBzdHJpbmc7IFtrZXk6IHN0cmluZ106IGFueSB9PixcbiAgb3B0aW9ucz86IHsgcmVmcmVzaD86ICdub25lJyB8ICdhZmZlY3RlZCcgfCAnYWxsJyB9LFxuKTogUHJvbWlzZTx2b2lkPjtcbmRlY2xhcmUgZnVuY3Rpb24gZGVsZXRlQ2hhdE1lc3NhZ2VzKG1lc3NhZ2VfaWRzOiBudW1iZXJbXSwgb3B0aW9ucz86IHsgcmVmcmVzaD86ICdub25lJyB8ICdhbGwnIH0pOiBQcm9taXNlPHZvaWQ+O1xuZGVjbGFyZSBmdW5jdGlvbiB0cmlnZ2VyU2xhc2goY29tbWFuZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+O1xuXG4vLyDlo7DmmI7lhajlsYDlr7nosaFcbmRlY2xhcmUgY29uc3QgdG9hc3RyOiB7XG4gIHN1Y2Nlc3M6IChtZXNzYWdlOiBzdHJpbmcsIHRpdGxlPzogc3RyaW5nKSA9PiB2b2lkO1xuICBlcnJvcjogKG1lc3NhZ2U6IHN0cmluZywgdGl0bGU/OiBzdHJpbmcpID0+IHZvaWQ7XG4gIHdhcm5pbmc6IChtZXNzYWdlOiBzdHJpbmcsIHRpdGxlPzogc3RyaW5nKSA9PiB2b2lkO1xuICBpbmZvOiAobWVzc2FnZTogc3RyaW5nLCB0aXRsZT86IHN0cmluZykgPT4gdm9pZDtcbn07XG5cbi8qKlxuICog5raI5oGv6Kej5p6Q5Zmo57G7XG4gKiDotJ/otKPop6PmnpBCZWFy5qC85byP5pWw5o2u77yM5o+Q5Y+W6IGK5aSp5Z2X5ZKM5raI5oGv5pWw5o2u77yM5aSE55CG5LiN5ZCM5raI5oGv57G75Z6LXG4gKiDmlK/mjIHljZXogYrlkoznvqTogYrmoLzlvI/vvIzmlK/mjIHkuK3oi7HmloflhpLlj7flhbzlrrnmgKdcbiAqIOWNleiBiuagvOW8j++8mltTX+Wwj+aYjnzlsI/mmI585raI5oGv5YaF5a65fDE1OjMwXVxuICog576k6IGK5qC85byP77yaW+e+pOiBint7576k5ZCNfX1dW+aIkOWRmO+8muaIkOWRmEHvvIzmiJDlkZhC77yMdXNlcl1bR197e+e+pOWQjX19fOWPkemAgeiAhXzmtojmga/lhoXlrrl8MTU6MzBdWy/nvqTogYp7e+e+pOWQjX19XVxuICovXG5jbGFzcyBNZXNzYWdlUGFyc2VyIHtcbiAgLy8g5q2j5YiZ6KGo6L6+5byP5a6a5LmJXG4gIHByaXZhdGUgcmVhZG9ubHkgTUFJTl9SRUdFWCA9IC88YmVhcj4oW1xcc1xcU10qPyk8XFwvYmVhcj4vZztcbiAgLy8g6YCa55So5raI5oGv5q2j5YiZ6KGo6L6+5byP77yM5Yy56YWN5omA5pyJ5raI5oGv5qC85byPIC0g5L+u5aSN77ya5Yy56YWN5a6M5pW055qE5raI5oGv5qC85byPXG4gIHByaXZhdGUgcmVhZG9ubHkgTUVTU0FHRV9SRUdFWCA9IC9cXFsoW1NHXSlfW158XSpcXHxbXnxdKlxcfFtefF0qXFx8W15cXF1dKlxcXS9nO1xuICBwcml2YXRlIHJlYWRvbmx5IENIQVRfQkxPQ0tfUkVHRVggPSAvXFxbKFteL11bXlxcXV0qPylcXF0oW1xcc1xcU10qPylcXFtcXC9cXDFcXF0vZztcblxuICAvLyDnvqTogYrnm7jlhbPmraPliJnooajovr7lvI8gLSDmlK/mjIHkuK3oi7HmloflhpLlj7flkozmjaLooYzmoLzlvI9cbiAgcHJpdmF0ZSByZWFkb25seSBHUk9VUF9DSEFUX1JFR0VYID1cbiAgICAvXFxb576k6IGKKFteXFxdXSspXFxdXFxzKlxcbj9cXHMqXFxb5oiQ5ZGYW++8mjpdKFteXFxdXSspXFxdXFxzKlxcbj8oW1xcc1xcU10qPylcXG4/XFxzKlxcW1xcL+e+pOiBilxcMVxcXS9nO1xuICBwcml2YXRlIHJlYWRvbmx5IEdST1VQX01FU1NBR0VfUkVHRVggPSAvXFxbR19bXnxdKlxcfChbXnxdKylcXHwoW158XSspXFx8KFteXFxdXSspXFxdL2c7XG4gIHByaXZhdGUgcmVhZG9ubHkgTUVNQkVSX0xJU1RfUkVHRVggPSAvXFxb5oiQ5ZGYW++8mjpdKFteXFxdXSspXFxdLztcblxuICAvLyDmtojmga/nsbvlnovop6PmnpDmraPliJkgLSDmlK/mjIHkuK3oi7HmloflhpLlj7dcbiAgcHJpdmF0ZSByZWFkb25seSBNRVNTQUdFX1RZUEVfUkVHRVggPSAvXihbXu+8mjpdKylb77yaOl0oLiopJC87XG5cbiAgcHJpdmF0ZSBjb250YWN0TWFuYWdlcjogYW55OyAvLyDogZTns7vkurrnrqHnkIblmajlvJXnlKhcbiAgcHJpdmF0ZSBlcnJvclN0YXRzOiBFcnJvclN0YXRzTWFuYWdlcjsgLy8g6ZSZ6K+v57uf6K6h566h55CG5ZmoXG4gIHByaXZhdGUgZHluYW1pY3NQYXJzZXI6IER5bmFtaWNzUGFyc2VyOyAvLyDliqjmgIHop6PmnpDlmahcblxuICBjb25zdHJ1Y3Rvcihjb250YWN0TWFuYWdlcj86IGFueSkge1xuICAgIHRoaXMuY29udGFjdE1hbmFnZXIgPSBjb250YWN0TWFuYWdlcjtcbiAgICB0aGlzLmVycm9yU3RhdHMgPSBuZXcgRXJyb3JTdGF0c01hbmFnZXIoKTtcbiAgICB0aGlzLmR5bmFtaWNzUGFyc2VyID0gbmV3IER5bmFtaWNzUGFyc2VyKHtcbiAgICAgIGVuYWJsZVBhcnRpYWxQYXJzaW5nOiB0cnVlLFxuICAgICAgZW5hYmxlRXJyb3JSZWNvdmVyeTogdHJ1ZSxcbiAgICAgIGxvZ0Vycm9yczogdHJ1ZSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiDliqjmgIHms6jlhaXogZTns7vkurrnrqHnkIblmajvvIzmiZPnoLTliJ3lp4vljJblvqrnjq/kvp3otZYgKi9cbiAgcHVibGljIHNldENvbnRhY3RNYW5hZ2VyKGNvbnRhY3RNYW5hZ2VyOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLmNvbnRhY3RNYW5hZ2VyID0gY29udGFjdE1hbmFnZXI7XG4gIH1cblxuICAvKipcbiAgICog5YaS5Y+35YW85a655oCn5aSE55CG5pa55rOVXG4gICAqIEBwYXJhbSB0ZXh0IOWOn+Wni+aWh+acrFxuICAgKiBAcmV0dXJucyDmoIflh4bljJblkI7nmoTmlofmnKxcbiAgICovXG4gIHByaXZhdGUgbm9ybWFsaXplQ29sb25zKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8g5bCG5Lit5paH5YaS5Y+357uf5LiA6L2s5o2i5Li66Iux5paH5YaS5Y+36L+b6KGM5aSE55CGXG4gICAgcmV0dXJuIHRleHQucmVwbGFjZSgv77yaL2csICc6Jyk7XG4gIH1cblxuICAvKipcbiAgICog6Kej5p6Q5raI5oGv57G75Z6L5ZKM5YaF5a65XG4gICAqIEBwYXJhbSBtZXNzYWdlQm9keSDmtojmga/kuLvkvZNcbiAgICogQHJldHVybnMg6Kej5p6Q57uT5p6cXG4gICAqL1xuICBwcml2YXRlIHBhcnNlTWVzc2FnZVR5cGVBbmRDb250ZW50KG1lc3NhZ2VCb2R5OiBzdHJpbmcpOiB7IHR5cGU6IHN0cmluZzsgY29udGVudDogc3RyaW5nIH0ge1xuICAgIC8vIOaUr+aMgeS4reiLseaWh+WGkuWPt+eahOa2iOaBr+exu+Wei+ino+aekFxuICAgIGNvbnN0IGNvbG9uTWF0Y2ggPSBtZXNzYWdlQm9keS5tYXRjaCh0aGlzLk1FU1NBR0VfVFlQRV9SRUdFWCk7XG4gICAgaWYgKGNvbG9uTWF0Y2gpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IGNvbG9uTWF0Y2hbMV0sXG4gICAgICAgIGNvbnRlbnQ6IGNvbG9uTWF0Y2hbMl0sXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgY29udGVudDogbWVzc2FnZUJvZHksXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiDop6PmnpBCZWFy5qC85byP55qE6IGK5aSp5pWw5o2uXG4gICAqIEBwYXJhbSBiZWFyQ29udGVudCBCZWFy5qCH562+5YyF6KO555qE5YaF5a65XG4gICAqIEByZXR1cm5zIOino+aekOWQjueahOiBiuWkqeaVsOaNrk1hcFxuICAgKi9cbiAgcHVibGljIGFzeW5jIHBhcnNlQmVhckNvbnRlbnQoYmVhckNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8TWFwPHN0cmluZywgQ2hhdERhdGE+PiB7XG4gICAgY29uc3QgY2hhdERhdGFNYXAgPSBuZXcgTWFwPHN0cmluZywgQ2hhdERhdGE+KCk7XG5cbiAgICAvLyAxLiDpppblhYjop6PmnpDnvqTogYrlnZdcbiAgICBjb25zdCBncm91cENoYXRzID0gYXdhaXQgdGhpcy5wYXJzZUdyb3VwQ2hhdHMoYmVhckNvbnRlbnQpO1xuICAgIGdyb3VwQ2hhdHMuZm9yRWFjaChjaGF0ID0+IHtcbiAgICAgIGNoYXREYXRhTWFwLnNldChjaGF0LmNoYXRJZCwgY2hhdCk7XG4gICAgfSk7XG5cbiAgICAvLyAyLiDnhLblkI7op6PmnpDljZXogYrlnZfvvIjmjpLpmaTnvqTogYrlnZfvvIlcbiAgICBjb25zdCBzaW5nbGVDaGF0cyA9IHRoaXMucGFyc2VTaW5nbGVDaGF0cyhiZWFyQ29udGVudCk7XG4gICAgc2luZ2xlQ2hhdHMuZm9yRWFjaChjaGF0ID0+IHtcbiAgICAgIGNoYXREYXRhTWFwLnNldChjaGF0LmNoYXRJZCwgY2hhdCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gY2hhdERhdGFNYXA7XG4gIH1cblxuICAvKipcbiAgICog5omp5bGV55qEQmVhcuWGheWuueino+aekOaWueazle+8iOWQjOaXtuino+aekOiBiuWkqeWSjOWKqOaAge+8iVxuICAgKiBAcGFyYW0gYmVhckNvbnRlbnQgQmVhcuagh+etvuWMheijueeahOWGheWuuVxuICAgKiBAcmV0dXJucyDop6PmnpDlkI7nmoTogYrlpKnmlbDmja5NYXDlkozliqjmgIHmlbDmja7mlbDnu4RcbiAgICovXG4gIHB1YmxpYyBhc3luYyBwYXJzZUJlYXJDb250ZW50UGx1cyhiZWFyQ29udGVudDogc3RyaW5nKTogUHJvbWlzZTx7XG4gICAgY2hhdE1hcDogTWFwPHN0cmluZywgQ2hhdERhdGE+O1xuICAgIGR5bmFtaWNzOiBSYXdQb3N0RGF0YVtdO1xuICB9PiB7XG4gICAgLy8gMS4g6Kej5p6Q6IGK5aSp5pWw5o2u77yI5aSN55So546w5pyJ5pa55rOV77yJXG4gICAgY29uc3QgY2hhdE1hcCA9IGF3YWl0IHRoaXMucGFyc2VCZWFyQ29udGVudChiZWFyQ29udGVudCk7XG5cbiAgICAvLyAyLiDop6PmnpDliqjmgIHmlbDmja5cbiAgICBsZXQgZHluYW1pY3M6IFJhd1Bvc3REYXRhW10gPSBbXTtcblxuICAgIHRyeSB7XG4gICAgICAvLyDkvb/nlKhEeW5hbWljc1BhcnNlcuino+aekFvliqjmgIFd5a655ZmoXG4gICAgICBjb25zdCBwYXJzZVJlc3VsdCA9IHRoaXMuZHluYW1pY3NQYXJzZXIucGFyc2UoYmVhckNvbnRlbnQpO1xuXG4gICAgICBpZiAocGFyc2VSZXN1bHQuc3VjY2VzcyAmJiBwYXJzZVJlc3VsdC5kYXRhKSB7XG4gICAgICAgIGR5bmFtaWNzID0gcGFyc2VSZXN1bHQuZGF0YTtcbiAgICAgICAgY29uc29sZS5sb2coYOKchSDop6PmnpDliLAgJHtkeW5hbWljcy5sZW5ndGh9IOadoeWKqOaAgeaVsOaNrmApO1xuICAgICAgfSBlbHNlIGlmIChwYXJzZVJlc3VsdC53YXJuaW5ncy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8g5Yqo5oCB6Kej5p6Q6K2m5ZGKOicsIHBhcnNlUmVzdWx0Lndhcm5pbmdzKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcnNlUmVzdWx0LmVycm9ycy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnNvbGUud2Fybign4p2MIOWKqOaAgeino+aekOmUmeivrzonLCBwYXJzZVJlc3VsdC5lcnJvcnMpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfwn5KlIOWKqOaAgeino+aekOW8guW4uDonLCBlcnJvcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNoYXRNYXAsXG4gICAgICBkeW5hbWljcyxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIOino+aekOe+pOiBiuaVsOaNruWdl1xuICAgKiBAcGFyYW0gYmVhckNvbnRlbnQgQmVhcuagh+etvuWMheijueeahOWGheWuuVxuICAgKiBAcmV0dXJucyDop6PmnpDlkI7nmoTnvqTogYrmlbDmja7mlbDnu4RcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgcGFyc2VHcm91cENoYXRzKGJlYXJDb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPENoYXREYXRhW10+IHtcbiAgICBjb25zdCBncm91cENoYXRzOiBDaGF0RGF0YVtdID0gW107XG4gICAgY29uc3QgbWF0Y2hlcyA9IFsuLi5iZWFyQ29udGVudC5tYXRjaEFsbCh0aGlzLkdST1VQX0NIQVRfUkVHRVgpXTtcblxuICAgIGZvciAoY29uc3QgbWF0Y2ggb2YgbWF0Y2hlcykge1xuICAgICAgY29uc3QgZ3JvdXBOYW1lID0gbWF0Y2hbMV07XG4gICAgICBjb25zdCBtZW1iZXJMaXN0ID0gbWF0Y2hbMl07XG4gICAgICBjb25zdCBtZXNzYWdlc0NvbnRlbnQgPSBtYXRjaFszXTtcblxuICAgICAgLy8g5bqU55So5YaS5Y+35YW85a655oCn5aSE55CGXG4gICAgICBjb25zdCBub3JtYWxpemVkTWVzc2FnZXNDb250ZW50ID0gdGhpcy5ub3JtYWxpemVDb2xvbnMobWVzc2FnZXNDb250ZW50KTtcblxuICAgICAgY29uc3QgY2hhdERhdGEgPSBhd2FpdCB0aGlzLmJ1aWxkR3JvdXBDaGF0RGF0YShncm91cE5hbWUsIG1lbWJlckxpc3QsIG5vcm1hbGl6ZWRNZXNzYWdlc0NvbnRlbnQpO1xuICAgICAgaWYgKGNoYXREYXRhKSB7XG4gICAgICAgIGdyb3VwQ2hhdHMucHVzaChjaGF0RGF0YSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGdyb3VwQ2hhdHM7XG4gIH1cblxuICAvKipcbiAgICog6Kej5p6Q5Y2V6IGK5pWw5o2u5Z2X77yI5o6S6Zmk576k6IGK5Z2X5ZKM5Yqo5oCB5Z2X77yJXG4gICAqIEBwYXJhbSBiZWFyQ29udGVudCBCZWFy5qCH562+5YyF6KO555qE5YaF5a65XG4gICAqIEByZXR1cm5zIOino+aekOWQjueahOWNleiBiuaVsOaNruaVsOe7hFxuICAgKi9cbiAgcHJpdmF0ZSBwYXJzZVNpbmdsZUNoYXRzKGJlYXJDb250ZW50OiBzdHJpbmcpOiBDaGF0RGF0YVtdIHtcbiAgICBjb25zdCBzaW5nbGVDaGF0czogQ2hhdERhdGFbXSA9IFtdO1xuXG4gICAgLy8g5YWI56e76Zmk5omA5pyJ576k6IGK5Z2X77yM6YG/5YWN6YeN5aSN6Kej5p6QXG4gICAgbGV0IGNvbnRlbnRXaXRob3V0R3JvdXBzID0gYmVhckNvbnRlbnQ7XG4gICAgY29uc3QgZ3JvdXBNYXRjaGVzID0gWy4uLmJlYXJDb250ZW50Lm1hdGNoQWxsKHRoaXMuR1JPVVBfQ0hBVF9SRUdFWCldO1xuXG4gICAgZm9yIChjb25zdCBtYXRjaCBvZiBncm91cE1hdGNoZXMpIHtcbiAgICAgIGNvbnRlbnRXaXRob3V0R3JvdXBzID0gY29udGVudFdpdGhvdXRHcm91cHMucmVwbGFjZShtYXRjaFswXSwgJycpO1xuICAgIH1cblxuICAgIC8vIOenu+mZpOaJgOacieWKqOaAgeWdl++8jOmBv+WFjeiiq+W9k+S9nOiBiuWkqeWdl+ino+aekFxuICAgIGNvbnN0IGR5bmFtaWNzUmVnZXggPSAvXFxb5Yqo5oCBXFxdKFtcXHNcXFNdKj8pXFxbXFwv5Yqo5oCBXFxdL2c7XG4gICAgY29uc3QgZHluYW1pY3NNYXRjaGVzID0gWy4uLmNvbnRlbnRXaXRob3V0R3JvdXBzLm1hdGNoQWxsKGR5bmFtaWNzUmVnZXgpXTtcblxuICAgIGZvciAoY29uc3QgbWF0Y2ggb2YgZHluYW1pY3NNYXRjaGVzKSB7XG4gICAgICBjb250ZW50V2l0aG91dEdyb3VwcyA9IGNvbnRlbnRXaXRob3V0R3JvdXBzLnJlcGxhY2UobWF0Y2hbMF0sICcnKTtcbiAgICB9XG5cbiAgICAvLyDop6PmnpDliankvZnnmoTogYrlpKnlnZdcbiAgICBjb25zdCBjaGF0QmxvY2tzID0gWy4uLmNvbnRlbnRXaXRob3V0R3JvdXBzLm1hdGNoQWxsKHRoaXMuQ0hBVF9CTE9DS19SRUdFWCldO1xuXG4gICAgaWYgKGNoYXRCbG9ja3MubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ+ayoeacieWMuemFjeWIsOS7u+S9leiBiuWkqeWdlycpO1xuICAgICAgcmV0dXJuIHNpbmdsZUNoYXRzO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhdEJsb2Nrcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYmxvY2sgPSBjaGF0QmxvY2tzW2ldO1xuICAgICAgY29uc3QgY2hhdE5hbWUgPSBibG9ja1sxXTtcbiAgICAgIGNvbnN0IGNoYXRDb250ZW50ID0gYmxvY2tbMl07XG4gICAgICBjb25zdCBjaGF0SWQgPSB0aGlzLmdlbmVyYXRlQ2hhdElkKGNoYXROYW1lKTtcblxuICAgICAgY29uc3QgY2hhdERhdGE6IENoYXREYXRhID0ge1xuICAgICAgICBjaGF0SWQsXG4gICAgICAgIGNoYXROYW1lLFxuICAgICAgICBhdmF0YXI6IHRoaXMuZ2V0RGVmYXVsdEF2YXRhcihjaGF0TmFtZSksXG4gICAgICAgIG1lc3NhZ2VzOiBbXSxcbiAgICAgIH07XG5cbiAgICAgIC8vIOino+aekOiBiuWkqeWdl+S4reeahOa2iOaBr1xuICAgICAgY29uc3QgbWVzc2FnZXMgPSB0aGlzLnBhcnNlTWVzc2FnZXMoY2hhdENvbnRlbnQsIGNoYXRJZCk7XG4gICAgICBjaGF0RGF0YS5tZXNzYWdlcyA9IG1lc3NhZ2VzO1xuXG4gICAgICBpZiAobWVzc2FnZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBjaGF0RGF0YS5sYXN0TWVzc2FnZSA9IG1lc3NhZ2VzW21lc3NhZ2VzLmxlbmd0aCAtIDFdLmNvbnRlbnQ7XG4gICAgICB9XG5cbiAgICAgIHNpbmdsZUNoYXRzLnB1c2goY2hhdERhdGEpO1xuICAgIH1cblxuICAgIHJldHVybiBzaW5nbGVDaGF0cztcbiAgfVxuXG4gIC8qKlxuICAgKiDnu5/kuIDnmoTnvqTogYpJROeUn+aIkOaWueazlVxuICAgKiBAcGFyYW0gZ3JvdXBOYW1lIOe+pOiBiuWQjeensFxuICAgKiBAcmV0dXJucyDmoIflh4bljJbnmoTnvqTogYpJRO+8jOagvOW8j++8mue+pOiBint7576k5ZCN56ewfX1cbiAgICovXG4gIHB1YmxpYyBnZW5lcmF0ZUdyb3VwQ2hhdElkKGdyb3VwTmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyDlpoLmnpzlt7Lnu4/mnIlcIue+pOiBilwi5YmN57yA77yM55u05o6l6L+U5ZueXG4gICAgaWYgKGdyb3VwTmFtZS5zdGFydHNXaXRoKCfnvqTogYonKSkge1xuICAgICAgcmV0dXJuIGdyb3VwTmFtZTtcbiAgICB9XG4gICAgLy8g5ZCm5YiZ5re75YqgXCLnvqTogYpcIuWJjee8gFxuICAgIHJldHVybiBg576k6IGKJHtncm91cE5hbWV9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiDmnoTlu7rnvqTogYrmlbDmja7lr7nosaFcbiAgICogQHBhcmFtIGdyb3VwTmFtZSDnvqTlkI3np7BcbiAgICogQHBhcmFtIG1lbWJlckxpc3Qg5oiQ5ZGY5YiX6KGo5a2X56ym5LiyXG4gICAqIEBwYXJhbSBtZXNzYWdlc0NvbnRlbnQg5raI5oGv5YaF5a65XG4gICAqIEByZXR1cm5zIOe+pOiBiuaVsOaNruWvueixoVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBidWlsZEdyb3VwQ2hhdERhdGEoXG4gICAgZ3JvdXBOYW1lOiBzdHJpbmcsXG4gICAgbWVtYmVyTGlzdDogc3RyaW5nLFxuICAgIG1lc3NhZ2VzQ29udGVudDogc3RyaW5nLFxuICApOiBQcm9taXNlPENoYXREYXRhIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBtZW1iZXJzID0gdGhpcy5wYXJzZUdyb3VwTWVtYmVycyhtZW1iZXJMaXN0KTtcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gdGhpcy5wYXJzZUdyb3VwTWVzc2FnZXMobWVzc2FnZXNDb250ZW50LCBncm91cE5hbWUpO1xuXG4gICAgICAvLyDkvb/nlKjnu5/kuIDnmoRJROeUn+aIkOaWueazlVxuICAgICAgY29uc3QgY2hhdElkID0gdGhpcy5nZW5lcmF0ZUdyb3VwQ2hhdElkKGdyb3VwTmFtZSk7XG5cbiAgICAgIC8vIOS9v+eUqEdyb3VwQ2hhdFN0b3JhZ2Xnu5/kuIDojrflj5bnvqTlpLTlg4/vvIjljIXlkKvnvJPlrZjpgLvovpHvvIlcbiAgICAgIGNvbnN0IHsgR3JvdXBDaGF0U3RvcmFnZSB9ID0gYXdhaXQgaW1wb3J0KCcuL21vZHVsZXMvZ3JvdXBDaGF0L3N0b3JhZ2UnKTtcbiAgICAgIGNvbnN0IGRlZmF1bHRBdmF0YXIgPSBHcm91cENoYXRTdG9yYWdlLmdldERlZmF1bHRHcm91cEF2YXRhcihncm91cE5hbWUpO1xuICAgICAgY29uc3QgZ3JvdXBBdmF0YXIgPSBHcm91cENoYXRTdG9yYWdlLmdldEdyb3VwQXZhdGFyV2l0aEZhbGxiYWNrKGNoYXRJZCwgZGVmYXVsdEF2YXRhcik7XG5cbiAgICAgIGNvbnN0IGNoYXREYXRhOiBDaGF0RGF0YSA9IHtcbiAgICAgICAgY2hhdElkOiBjaGF0SWQsXG4gICAgICAgIGNoYXROYW1lOiBncm91cE5hbWUsXG4gICAgICAgIGF2YXRhcjogZ3JvdXBBdmF0YXIsXG4gICAgICAgIG1lc3NhZ2VzLFxuICAgICAgICBsYXN0TWVzc2FnZTogbWVzc2FnZXMubGVuZ3RoID4gMCA/IHRoaXMuZm9ybWF0R3JvdXBMYXN0TWVzc2FnZShtZXNzYWdlc1ttZXNzYWdlcy5sZW5ndGggLSAxXSkgOiAnJyxcbiAgICAgICAgLy8g5omp5bGV5a2X5q6155So5LqO5qCH6K+G576k6IGKXG4gICAgICAgIHR5cGU6ICdncm91cCcgYXMgYW55LFxuICAgICAgICBtZW1iZXJzOiBtZW1iZXJzLm1hcChuYW1lID0+IHtcbiAgICAgICAgICBjb25zdCBhdmF0YXIgPSB0aGlzLmdldERlZmF1bHRBdmF0YXIobmFtZSk7XG4gICAgICAgICAgY29uc3QgaXNVc2VyID0gbmFtZSA9PT0gJ3t7dXNlcn19JyB8fCBuYW1lID09PSAndXNlcic7XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IG5hbWUsXG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgYXZhdGFyLFxuICAgICAgICAgICAgcm9sZTogaXNVc2VyID8gJ293bmVyJyA6ICdtZW1iZXInLFxuICAgICAgICAgICAgam9pbmVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICB9O1xuICAgICAgICB9KSBhcyBhbnksXG4gICAgICB9O1xuXG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgYOKchSDop6PmnpDnvqTogYrmiJDlip86ICR7Y2hhdERhdGEuY2hhdE5hbWV9LCBjaGF0SWQ6ICR7Y2hhdElkfSwg5oiQ5ZGYOiAke21lbWJlcnMubGVuZ3RofSwg5raI5oGvOiAke21lc3NhZ2VzLmxlbmd0aH1gLFxuICAgICAgKTtcbiAgICAgIHJldHVybiBjaGF0RGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihg4p2MIOino+aekOe+pOiBiuWksei0pTogJHtncm91cE5hbWV9YCwgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOino+aekOe+pOaIkOWRmOWIl+ihqFxuICAgKiBAcGFyYW0gbWVtYmVyTGlzdFN0cmluZyDmiJDlkZjliJfooajlrZfnrKbkuLJcbiAgICogQHJldHVybnMg5oiQ5ZGY5ZCN56ew5pWw57uEXG4gICAqL1xuICBwcml2YXRlIHBhcnNlR3JvdXBNZW1iZXJzKG1lbWJlckxpc3RTdHJpbmc6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICAvLyDmiJDlkZjliJfooajlj6/og73kvb/nlKjkuK3mloflhpLlj7fvvJpb5oiQ5ZGY77ya5bCP5piO77yM5bCP57qi77yMdXNlcl0g5oiWIFvmiJDlkZg65bCP5piO77yM5bCP57qi77yMdXNlcl1cbiAgICBjb25zdCBub3JtYWxpemVkU3RyaW5nID0gdGhpcy5ub3JtYWxpemVDb2xvbnMobWVtYmVyTGlzdFN0cmluZyk7XG5cbiAgICBjb25zdCBtZW1iZXJzID0gbm9ybWFsaXplZFN0cmluZ1xuICAgICAgLnNwbGl0KC9b77yMLF0vKVxuICAgICAgLm1hcChuYW1lID0+IG5hbWUudHJpbSgpKVxuICAgICAgLmZpbHRlcihuYW1lID0+IG5hbWUubGVuZ3RoID4gMCk7XG5cbiAgICByZXR1cm4gbWVtYmVycztcbiAgfVxuXG4gIC8qKlxuICAgKiDop6PmnpDnvqTogYrmtojmga9cbiAgICogQHBhcmFtIG1lc3NhZ2VzQ29udGVudCDmtojmga/lhoXlrrnlrZfnrKbkuLJcbiAgICogQHBhcmFtIGdyb3VwTmFtZSDnvqTlkI3np7BcbiAgICogQHJldHVybnMg6Kej5p6Q5ZCO55qE5raI5oGv5pWw57uEXG4gICAqL1xuICBwcml2YXRlIHBhcnNlR3JvdXBNZXNzYWdlcyhtZXNzYWdlc0NvbnRlbnQ6IHN0cmluZywgZ3JvdXBOYW1lOiBzdHJpbmcpOiBDaGF0TWVzc2FnZVtdIHtcbiAgICBjb25zdCBtZXNzYWdlczogQ2hhdE1lc3NhZ2VbXSA9IFtdO1xuICAgIGNvbnN0IG1lc3NhZ2VNYXRjaGVzID0gWy4uLm1lc3NhZ2VzQ29udGVudC5tYXRjaEFsbCh0aGlzLkdST1VQX01FU1NBR0VfUkVHRVgpXTtcblxuICAgIGZvciAoY29uc3QgbXNnTWF0Y2ggb2YgbWVzc2FnZU1hdGNoZXMpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLnBhcnNlR3JvdXBNZXNzYWdlKG1zZ01hdGNoLCBncm91cE5hbWUpO1xuICAgICAgaWYgKG1lc3NhZ2UpIHtcbiAgICAgICAgbWVzc2FnZXMucHVzaChtZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbWVzc2FnZXM7XG4gIH1cblxuICAvKipcbiAgICog6Kej5p6Q5Y2V5p2h576k6IGK5raI5oGvXG4gICAqIOagvOW8j++8mltHX+e+pOWQjXzlj5HpgIHogIV85raI5oGv57G75Z6LOuWGheWuuXzml7bpl7TmiLNdXG4gICAqIEBwYXJhbSBtYXRjaCDmraPliJnljLnphY3nu5PmnpxcbiAgICogQHBhcmFtIGdyb3VwTmFtZSDnvqTlkI3np7BcbiAgICogQHJldHVybnMg6Kej5p6Q5ZCO55qE5raI5oGv5a+56LGhXG4gICAqL1xuICBwcml2YXRlIHBhcnNlR3JvdXBNZXNzYWdlKG1hdGNoOiBSZWdFeHBNYXRjaEFycmF5LCBncm91cE5hbWU6IHN0cmluZyk6IENoYXRNZXNzYWdlIHwgbnVsbCB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIOiOt+WPluWujOaVtOeahOa2iOaBr+Wtl+espuS4slxuICAgICAgY29uc3QgZnVsbE1lc3NhZ2VTdHJpbmcgPSBtYXRjaFswXTtcblxuICAgICAgLy8g56e76Zmk6aaW5bC+55qEIFwiW11cIu+8jOeEtuWQjueUqCBcInxcIiDliIblibLmiJDmlbDnu4RcbiAgICAgIGNvbnN0IHBhcnRzID0gZnVsbE1lc3NhZ2VTdHJpbmcuc2xpY2UoMSwgLTEpLnNwbGl0KCd8Jyk7XG5cbiAgICAgIGlmIChwYXJ0cy5sZW5ndGggPCA0KSB7XG4gICAgICAgIGNvbnNvbGUud2Fybign576k6IGK5raI5oGv5qC85byP5peg5pWIICjpg6jliIblpKrlsJEpOicsIGZ1bGxNZXNzYWdlU3RyaW5nKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8vIOaPkOWPluWfuuacrOS/oeaBr1xuICAgICAgY29uc3QgdHlwZUFuZEdyb3VwSWQgPSBwYXJ0c1swXS5zcGxpdCgnXycpO1xuICAgICAgY29uc3QgdHlwZSA9IHR5cGVBbmRHcm91cElkWzBdOyAvLyDlupTor6XmmK8gJ0cnXG4gICAgICBjb25zdCBzZW5kZXIgPSBwYXJ0c1sxXTtcbiAgICAgIGNvbnN0IG1lc3NhZ2VCb2R5ID0gcGFydHNbMl0gfHwgJyc7XG4gICAgICBjb25zdCB0aW1lc3RhbXAgPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXTsgLy8g5L+u5aSN77ya5pe26Ze05oiz5bqU5Li65pyA5ZCO5LiA5Liq5a2X5q6177yINOWtl+autT3nrKw05L2N77yMNeWtl+autT3nrKw15L2N77yJXG5cbiAgICAgIC8vIOino+aekOa2iOaBr+exu+Wei+WSjOWGheWuuSAtIOaUr+aMgeS4reiLseaWh+WGkuWPt1xuICAgICAgY29uc3QgeyB0eXBlOiBtZXNzYWdlVHlwZSwgY29udGVudDogcHJvY2Vzc2VkQ29udGVudCB9ID0gdGhpcy5wYXJzZU1lc3NhZ2VUeXBlQW5kQ29udGVudChtZXNzYWdlQm9keSk7XG5cbiAgICAgIC8vIOWkhOeQhueJueauiua2iOaBr+exu+Wei1xuICAgICAgbGV0IGZpbmFsQ29udGVudCA9IHByb2Nlc3NlZENvbnRlbnQ7XG4gICAgICBsZXQgb3JpZ2luYWxOb3RlID0gJyc7XG5cbiAgICAgIGlmIChtZXNzYWdlVHlwZSA9PT0gJ3RyYW5zZmVyJykge1xuICAgICAgICAvLyDovazotKbmtojmga/lj6/og73mnInlpIfms6hcbiAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gNSkge1xuICAgICAgICAgIC8vIDXlrZfmrrXmoLzlvI/vvJpbR1/nvqTlkI185Y+R6YCB6ICFfHRyYW5zZmVyOjUwfOaLv+WOu+iKsXwxNTozMF1cbiAgICAgICAgICBvcmlnaW5hbE5vdGUgPSBwYXJ0c1szXTtcbiAgICAgICAgICBmaW5hbENvbnRlbnQgPSBgJHtwcm9jZXNzZWRDb250ZW50fXwke29yaWdpbmFsTm90ZX1gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIDTlrZfmrrXmoLzlvI/vvJpbR1/nvqTlkI185Y+R6YCB6ICFfHRyYW5zZmVyOjUwfDE1OjMwXVxuICAgICAgICAgIG9yaWdpbmFsTm90ZSA9ICfnrYnlvoXmjqXmlLYnO1xuICAgICAgICAgIGZpbmFsQ29udGVudCA9IGAke3Byb2Nlc3NlZENvbnRlbnR9fOetieW+heaOpeaUtmA7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAobWVzc2FnZVR5cGUgPT09ICd2b2ljZScpIHtcbiAgICAgICAgLy8g6K+t6Z+z5raI5oGv5Y+v6IO95pyJ5pe26ZW/XG4gICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDUpIHtcbiAgICAgICAgICAvLyA15a2X5q615qC85byP77yaW0df576k5ZCNfOWPkemAgeiAhXx2b2ljZTrlhoXlrrl8MnwxNTozMF1cbiAgICAgICAgICBjb25zdCBkdXJhdGlvbiA9IHBhcnRzWzNdIHx8ICcwJztcbiAgICAgICAgICBmaW5hbENvbnRlbnQgPSBgJHtwcm9jZXNzZWRDb250ZW50fXwke2R1cmF0aW9ufWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZmluYWxDb250ZW50ID0gYCR7cHJvY2Vzc2VkQ29udGVudH18MGA7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgbWVzc2FnZTogQ2hhdE1lc3NhZ2UgPSB7XG4gICAgICAgIGlkOiB0aGlzLmdlbmVyYXRlTWVzc2FnZUlkKCksXG4gICAgICAgIHR5cGU6ICdHJyxcbiAgICAgICAgY2hhdElkOiB0aGlzLmdlbmVyYXRlR3JvdXBDaGF0SWQoZ3JvdXBOYW1lKSxcbiAgICAgICAgc2VuZGVyOiBzZW5kZXIgfHwgJ+acquefpeeUqOaItycsXG4gICAgICAgIGF2YXRhcjogdGhpcy5nZXREZWZhdWx0QXZhdGFyKHNlbmRlciksXG4gICAgICAgIG1lc3NhZ2VUeXBlOiBtZXNzYWdlVHlwZSBhcyBDaGF0TWVzc2FnZVsnbWVzc2FnZVR5cGUnXSxcbiAgICAgICAgY29udGVudDogZmluYWxDb250ZW50LFxuICAgICAgICB0aW1lc3RhbXA6XG4gICAgICAgICAgdGltZXN0YW1wIHx8XG4gICAgICAgICAgbmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoJ3poLUNOJywge1xuICAgICAgICAgICAgaG91cjogJzItZGlnaXQnLFxuICAgICAgICAgICAgbWludXRlOiAnMi1kaWdpdCcsXG4gICAgICAgICAgfSksXG4gICAgICAgIC8vIOe+pOiBiueJueacieWtl+aute+8muWPkemAgeiAheaYvuekuuWQjeensFxuICAgICAgICBzZW5kZXJEaXNwbGF5TmFtZTogc2VuZGVyLFxuICAgICAgICAuLi4obWVzc2FnZVR5cGUgPT09ICd0cmFuc2ZlcicgPyB7IGRhdGE6IHsgb3JpZ2luYWxOb3RlIH0gfSA6IHt9KSxcbiAgICAgIH0gYXMgYW55O1xuXG4gICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign6Kej5p6Q576k6IGK5raI5oGv5pe25Ye66ZSZOicsIGVycm9yLCBtYXRjaCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog6Kej5p6Q5raI5oGv5YaF5a65XG4gICAqIEBwYXJhbSBjb250ZW50IOa2iOaBr+WGheWuueWtl+espuS4slxuICAgKiBAcGFyYW0gY2hhdElkIOiBiuWkqUlEXG4gICAqIEByZXR1cm5zIOino+aekOWQjueahOa2iOaBr+aVsOe7hFxuICAgKi9cbiAgcHVibGljIHBhcnNlTWVzc2FnZXMoY29udGVudDogc3RyaW5nLCBjaGF0SWQ6IHN0cmluZyk6IENoYXRNZXNzYWdlW10ge1xuICAgIGNvbnN0IG1lc3NhZ2VzOiBDaGF0TWVzc2FnZVtdID0gW107XG4gICAgY29uc3QgbWVzc2FnZU1hdGNoZXMgPSBbLi4uY29udGVudC5tYXRjaEFsbCh0aGlzLk1FU1NBR0VfUkVHRVgpXTtcblxuICAgIGlmIChtZXNzYWdlTWF0Y2hlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUud2Fybihg5rKh5pyJ5Yy56YWN5Yiw5Lu75L2V5raI5oGvOiAke2NoYXRJZH1gKTtcbiAgICAgIHJldHVybiBtZXNzYWdlcztcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IG1zZ01hdGNoIG9mIG1lc3NhZ2VNYXRjaGVzKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gdGhpcy5wYXJzZU1lc3NhZ2UobXNnTWF0Y2gsIGNoYXRJZCk7XG4gICAgICBpZiAobWVzc2FnZSkge1xuICAgICAgICBtZXNzYWdlcy5wdXNoKG1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBtZXNzYWdlcztcbiAgfVxuXG4gIC8qKlxuICAgKiDop6PmnpDljZXmnaHmtojmga/vvIjmlrDmoLzlvI/vvIw05a2X5q6177yJXG4gICAqIOagvOW8j++8mltTX+Wwj+aYjnzlsI/mmI585raI5oGv5YaF5a65fDE1OjMwXSAtIOWIoOmZpOWktOWDj+Wtl+autVxuICAgKiDmlK/mjIHnmoTmtojmga/nsbvlnovvvJpcbiAgICogLSDmlofmnKzvvJpbU19jaGF0fOWwj+aYjnzkvaDlpb18MTU6MzBdXG4gICAqIC0g6L2s6LSm77yaW1NfY2hhdHzlsI/mmI58dHJhbnNmZXI6MTAwfOWkh+azqHwxNTozMF1cbiAgICogLSDor63pn7PvvJpbU19jaGF0fOWwj+aYjnx2b2ljZTror63pn7PlhoXlrrl85pe26ZW/fDE1OjMwXVxuICAgKiAtIOWbvueJh++8mltTX2NoYXR85bCP5piOfGltYWdlOuWbvueJh1VSTHwxNTozMF1cbiAgICogLSDooajmg4XljIXvvJpbU19jaGF0fOWwj+aYjnxzdGlja2VyOuihqOaDheWMhVVSTHwxNTozMF1cbiAgICogLSDkvY3nva7vvJpbU19jaGF0fOWwj+aYjnxsb2NhdGlvbjrkvY3nva7kv6Hmga98MTU6MzBdXG4gICAqIEBwYXJhbSBtYXRjaCDmraPliJnljLnphY3nu5PmnpxcbiAgICogQHBhcmFtIGNoYXRJZCDogYrlpKlJRFxuICAgKiBAcmV0dXJucyDop6PmnpDlkI7nmoTmtojmga/lr7nosaFcbiAgICovXG4gIHB1YmxpYyBwYXJzZU1lc3NhZ2UobWF0Y2g6IFJlZ0V4cE1hdGNoQXJyYXksIGNoYXRJZDogc3RyaW5nKTogQ2hhdE1lc3NhZ2UgfCBudWxsIHtcbiAgICB0cnkge1xuICAgICAgLy8g6I635Y+W5a6M5pW055qE5raI5oGv5a2X56ym5LiyXG4gICAgICBjb25zdCBmdWxsTWVzc2FnZVN0cmluZyA9IG1hdGNoWzBdO1xuXG4gICAgICAvLyAxLiDnp7vpmaTpppblsL7nmoQgXCJbXVwi77yM54S25ZCO55SoIFwifFwiIOWIhuWJsuaIkOaVsOe7hFxuICAgICAgY29uc3QgcGFydHMgPSBmdWxsTWVzc2FnZVN0cmluZy5zbGljZSgxLCAtMSkuc3BsaXQoJ3wnKTtcblxuICAgICAgLy8gMi4g5Z+656GA5qC85byP5qCh6aqMXG4gICAgICBpZiAocGFydHMubGVuZ3RoIDwgNCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ+a2iOaBr+agvOW8j+aXoOaViCAo6YOo5YiG5aSq5bCRKTonLCBmdWxsTWVzc2FnZVN0cmluZyk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICAvLyAzLiDmj5Dlj5bln7rmnKzkv6Hmga9cbiAgICAgIGNvbnN0IHR5cGVBbmRTZW5kZXJJZCA9IHBhcnRzWzBdLnNwbGl0KCdfJyk7XG4gICAgICBjb25zdCB0eXBlID0gdHlwZUFuZFNlbmRlcklkWzBdO1xuICAgICAgY29uc3Qgc2VuZGVyID0gcGFydHNbMV07XG4gICAgICBjb25zdCB0aW1lc3RhbXAgPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXTsgLy8g5pe26Ze05oiz5oC75piv5Zyo5pyA5ZCOXG5cbiAgICAgIC8vIDQuIOWIpOaWreaYrzTlrZfmrrXov5jmmK815a2X5q615qC85byPXG4gICAgICBjb25zdCBpczVGaWVsZEZvcm1hdCA9IHBhcnRzLmxlbmd0aCA9PT0gNTtcblxuICAgICAgLy8gNS4g5qC45b+D6YC76L6ROiDop6PmnpDmtojmga/nsbvlnovjgIHlhoXlrrnlkozlpIfms6hcbiAgICAgIGxldCBtZXNzYWdlVHlwZTogQ2hhdE1lc3NhZ2VbJ21lc3NhZ2VUeXBlJ10gPSAndGV4dCc7XG4gICAgICBsZXQgcHJvY2Vzc2VkQ29udGVudCA9ICcnO1xuICAgICAgbGV0IG9yaWdpbmFsTm90ZSA9ICcnO1xuXG4gICAgICAvLyDmtojmga/kuLvkvZPpg6jliIbku47ntKLlvJUy5byA5aeLXG4gICAgICBjb25zdCBtZXNzYWdlQm9keVBhcnQgPSBwYXJ0c1syXSB8fCAnJztcblxuICAgICAgaWYgKG1lc3NhZ2VCb2R5UGFydC5zdGFydHNXaXRoKCd0cmFuc2ZlcjonKSkge1xuICAgICAgICBtZXNzYWdlVHlwZSA9ICd0cmFuc2Zlcic7XG4gICAgICAgIGlmIChpczVGaWVsZEZvcm1hdCkge1xuICAgICAgICAgIC8vIDXlrZfmrrXmoLzlvI/vvJpbU1/lsI/mmI585bCP5piOfHRyYW5zZmVyOjUwfOaLv+WOu+iKsXwxNTozMF1cbiAgICAgICAgICBjb25zdCBhbW91bnQgPSBtZXNzYWdlQm9keVBhcnQuc3Vic3RyaW5nKDkpOyAvLyDnp7vpmaQgJ3RyYW5zZmVyOicg5YmN57yAXG4gICAgICAgICAgY29uc3Qgbm90ZSA9IHBhcnRzWzNdIHx8ICfnrYnlvoXmjqXmlLYnO1xuICAgICAgICAgIG9yaWdpbmFsTm90ZSA9IG5vdGU7XG4gICAgICAgICAgcHJvY2Vzc2VkQ29udGVudCA9IGAke2Ftb3VudH18JHtub3RlfWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gNOWtl+auteagvOW8j++8mltTX+Wwj+aYjnzlsI/mmI58dHJhbnNmZXI6NTB8MTU6MzBdXG4gICAgICAgICAgY29uc3QgYW1vdW50ID0gbWVzc2FnZUJvZHlQYXJ0LnN1YnN0cmluZyg5KTtcbiAgICAgICAgICBvcmlnaW5hbE5vdGUgPSAn562J5b6F5o6l5pS2JztcbiAgICAgICAgICBwcm9jZXNzZWRDb250ZW50ID0gYCR7YW1vdW50fXznrYnlvoXmjqXmlLZgO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG1lc3NhZ2VCb2R5UGFydC5zdGFydHNXaXRoKCd2b2ljZTonKSkge1xuICAgICAgICBtZXNzYWdlVHlwZSA9ICd2b2ljZSc7XG4gICAgICAgIGlmIChpczVGaWVsZEZvcm1hdCkge1xuICAgICAgICAgIC8vIDXlrZfmrrXmoLzlvI/vvJpbU1/lsI/mmI585bCP5piOfHZvaWNlOuWGheWuuXwyfDE1OjMwXVxuICAgICAgICAgIGNvbnN0IHZvaWNlQ29udGVudCA9IG1lc3NhZ2VCb2R5UGFydC5zdWJzdHJpbmcoNik7IC8vIOenu+mZpCAndm9pY2U6JyDliY3nvIBcbiAgICAgICAgICBjb25zdCBkdXJhdGlvbiA9IHBhcnRzWzNdIHx8ICcwJztcbiAgICAgICAgICBwcm9jZXNzZWRDb250ZW50ID0gYCR7dm9pY2VDb250ZW50fXwke2R1cmF0aW9ufWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gNOWtl+auteagvOW8j++8mltTX+Wwj+aYjnzlsI/mmI58dm9pY2U65YaF5a65fDE1OjMwXVxuICAgICAgICAgIGNvbnN0IHZvaWNlQ29udGVudCA9IG1lc3NhZ2VCb2R5UGFydC5zdWJzdHJpbmcoNik7XG4gICAgICAgICAgcHJvY2Vzc2VkQ29udGVudCA9IGAke3ZvaWNlQ29udGVudH18MGA7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAobWVzc2FnZUJvZHlQYXJ0LmluY2x1ZGVzKCc6JykpIHtcbiAgICAgICAgLy8g5aSE55CG5YW25LuWIFwi57G75Z6LOuWGheWuuVwiIOagvOW8j+eahOa2iOaBr1xuICAgICAgICBjb25zdCBbdHlwZVBhcnQsIC4uLmNvbnRlbnRQYXJ0c10gPSBtZXNzYWdlQm9keVBhcnQuc3BsaXQoJzonKTtcbiAgICAgICAgbWVzc2FnZVR5cGUgPSB0eXBlUGFydCBhcyBDaGF0TWVzc2FnZVsnbWVzc2FnZVR5cGUnXTtcbiAgICAgICAgcHJvY2Vzc2VkQ29udGVudCA9IGNvbnRlbnRQYXJ0cy5qb2luKCc6Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyDlpoLmnpzmsqHmnInnibnmrormoLzlvI/vvIzliJnop4bkuLrmma7pgJrmlofmnKzmtojmga9cbiAgICAgICAgbWVzc2FnZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIHByb2Nlc3NlZENvbnRlbnQgPSBtZXNzYWdlQm9keVBhcnQ7XG4gICAgICB9XG5cbiAgICAgIC8vIDUuIOe7hOijheacgOe7iOeahOa2iOaBr+WvueixoVxuICAgICAgY29uc3QgbWVzc2FnZTogQ2hhdE1lc3NhZ2UgPSB7XG4gICAgICAgIGlkOiB0aGlzLmdlbmVyYXRlTWVzc2FnZUlkKCksXG4gICAgICAgIHR5cGU6IHR5cGUgYXMgJ1MnIHwgJ0cnLFxuICAgICAgICBjaGF0SWQsXG4gICAgICAgIHNlbmRlcjogc2VuZGVyIHx8ICfmnKrnn6XnlKjmiLcnLFxuICAgICAgICBhdmF0YXI6IHRoaXMuZ2V0RGVmYXVsdEF2YXRhcihzZW5kZXIpLCAvLyDkvb/nlKjpu5jorqTlpLTlg4/vvIzkuI3lho3ku47mtojmga/kuK3op6PmnpBcbiAgICAgICAgbWVzc2FnZVR5cGU6IG1lc3NhZ2VUeXBlLFxuICAgICAgICBjb250ZW50OiBwcm9jZXNzZWRDb250ZW50LFxuICAgICAgICB0aW1lc3RhbXA6XG4gICAgICAgICAgdGltZXN0YW1wIHx8XG4gICAgICAgICAgbmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoJ3poLUNOJywge1xuICAgICAgICAgICAgaG91cjogJzItZGlnaXQnLFxuICAgICAgICAgICAgbWludXRlOiAnMi1kaWdpdCcsXG4gICAgICAgICAgfSksXG4gICAgICAgIC8vIOWFs+mUrjog5bCG5Y6f5aeL6L2s6LSm55WZ6KiA5L+d5a2Y5YiwIGRhdGEg5a2X5q6177yM5L6b5ZCO57ut5L2/55SoICjkvovlpoLngrnlh7vovazotKbml7bmmL7npLopXG4gICAgICAgIC4uLihtZXNzYWdlVHlwZSA9PT0gJ3RyYW5zZmVyJyA/IHsgZGF0YTogeyBvcmlnaW5hbE5vdGU6IG9yaWdpbmFsTm90ZSB9IH0gOiB7fSksXG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign6Kej5p6Q5raI5oGv5pe25Ye66ZSZOicsIGVycm9yLCBtYXRjaCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5LuO546w5pyJ5raI5oGv5Lit5o+Q5Y+WQmVhcuWGheWuuVxuICAgKiBAcGFyYW0gbWVzc2FnZXMg5raI5oGv5pWw57uEXG4gICAqIEByZXR1cm5zIEJlYXLlhoXlrrnlrZfnrKbkuLLvvIzlpoLmnpzmsqHmnInmib7liLDliJnov5Tlm55udWxsXG4gICAqL1xuICBwdWJsaWMgZXh0cmFjdEJlYXJDb250ZW50KG1lc3NhZ2VzOiBhbnlbXSk6IHN0cmluZyB8IG51bGwge1xuICAgIGZvciAoY29uc3QgbXNnIG9mIG1lc3NhZ2VzKSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gbXNnLm1lc3NhZ2UgfHwgJyc7XG4gICAgICBjb25zdCBiZWFyTWF0Y2ggPSBjb250ZW50Lm1hdGNoKHRoaXMuTUFJTl9SRUdFWCk7XG4gICAgICBpZiAoYmVhck1hdGNoICYmIGJlYXJNYXRjaFswXSkge1xuICAgICAgICByZXR1cm4gYmVhck1hdGNoWzBdO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnNvbGUud2Fybign5pyq5om+5YiwQmVhcuWGheWuuScpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIOS7juWtl+espuS4suS4reaPkOWPlkJlYXLlhoXlrrlcbiAgICogQHBhcmFtIHRleHQg5paH5pys5YaF5a65XG4gICAqIEByZXR1cm5zIEJlYXLlhoXlrrnlrZfnrKbkuLLvvIzlpoLmnpzmsqHmnInmib7liLDliJnov5Tlm55udWxsXG4gICAqL1xuICBwdWJsaWMgZXh0cmFjdEJlYXJDb250ZW50RnJvbVRleHQodGV4dDogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc3QgYmVhck1hdGNoID0gdGV4dC5tYXRjaCh0aGlzLk1BSU5fUkVHRVgpO1xuICAgIGlmIChiZWFyTWF0Y2ggJiYgYmVhck1hdGNoWzBdKSB7XG4gICAgICByZXR1cm4gYmVhck1hdGNoWzBdO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiDmj5Dlj5bmiYDmnIlCZWFy5YaF5a655Z2X77yI5pa55qGIQu+8muWQiOW5tuaJgOaciealvOWxgu+8iVxuICAgKiBAcGFyYW0gbWVzc2FnZXMg5raI5oGv5pWw57uEXG4gICAqIEByZXR1cm5zIOaJgOaciUJlYXLlhoXlrrnlnZfnmoTmlbDnu4RcbiAgICovXG4gIHB1YmxpYyBleHRyYWN0QWxsQmVhckNvbnRlbnRzKG1lc3NhZ2VzOiBhbnlbXSk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBiZWFyQmxvY2tzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBtc2cgb2YgbWVzc2FnZXMpIHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBtc2cubWVzc2FnZSB8fCAnJztcbiAgICAgIGNvbnN0IGJlYXJNYXRjaGVzID0gWy4uLmNvbnRlbnQubWF0Y2hBbGwodGhpcy5NQUlOX1JFR0VYKV07XG5cbiAgICAgIGZvciAoY29uc3QgbWF0Y2ggb2YgYmVhck1hdGNoZXMpIHtcbiAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzBdKSB7XG4gICAgICAgICAgYmVhckJsb2Nrcy5wdXNoKG1hdGNoWzBdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGDwn5OmIOaJvuWIsCAke2JlYXJCbG9ja3MubGVuZ3RofSDkuKpCZWFy5YaF5a655Z2XYCk7XG4gICAgcmV0dXJuIGJlYXJCbG9ja3M7XG4gIH1cblxuXG4gIC8qKlxuICAgKiDojrflj5blpLTlg49VUkxcbiAgICogQHBhcmFtIG5hbWUg55So5oi35ZCNXG4gICAqIEByZXR1cm5zIOWktOWDj1VSTFxuICAgKi9cbiAgcHVibGljIGdldERlZmF1bHRBdmF0YXIobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyDlpoLmnpzmmK/nlKjmiLfoh6rlt7HvvIzkvb/nlKjnu5/kuIDnmoTlpLTlg4/ojrflj5bmlrnms5VcbiAgICBpZiAobmFtZSA9PT0gJ3t7dXNlcn19JyB8fCBuYW1lID09PSAndXNlcicpIHtcbiAgICAgIC8vIOS9v+eUqOe7n+S4gOeahOWktOWDj+iOt+WPluaOpeWPo++8iOWQjOatpeeJiOacrO+8iVxuICAgICAgcmV0dXJuIGdldFVuaWZpZWRVc2VyQXZhdGFyU3luYygpO1xuICAgIH1cblxuICAgIC8vIOWmguaenOacieiBlOezu+S6uueuoeeQhuWZqO+8jOWwneivleS7juS4reiOt+WPluWktOWDj1xuICAgIGlmICh0aGlzLmNvbnRhY3RNYW5hZ2VyKSB7XG4gICAgICBjb25zdCBjb250YWN0cyA9IHRoaXMuY29udGFjdE1hbmFnZXIuZ2V0QWxsQ29udGFjdHMoKTtcbiAgICAgIGNvbnN0IGNvbnRhY3QgPSBjb250YWN0cy5maW5kKChjOiBhbnkpID0+IGMubmFtZSA9PT0gbmFtZSk7XG4gICAgICBpZiAoY29udGFjdCAmJiBjb250YWN0LmF2YXRhcikge1xuICAgICAgICByZXR1cm4gY29udGFjdC5hdmF0YXI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8g5aaC5p6c5rKh5pyJ5om+5Yiw6IGU57O75Lq65oiW5aS05YOP77yM5L2/55So6buY6K6k5aS05YOPXG4gICAgcmV0dXJuICdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvdThjY3k1LmpwZyc7XG4gIH1cblxuICAvKipcbiAgICog5aSE55CG5Zu+54mHVVJM77yM6Ieq5Yqo5re75Yqg5YmN57yA77yI55So5LqO5aS05YOP5ZKM6KGo5oOF5YyF77yJXG4gICAqIOaUr+aMgeS4ieenjeino+aekOaWueW8j++8mlxuICAgKiAxLiDlrozmlbRVUkznm7TmjqXkvb/nlKhcbiAgICogMi4g5paH5Lu25ZCN5re75YqgY2F0Ym945YmN57yAXG4gICAqIDMuIOS4reaWh+WQjeensCvmlofku7blkI3moLzlvI/vvIzoh6rliqjmj5Dlj5bmlofku7blkI3pg6jliIZcbiAgICogQHBhcmFtIGltYWdlVXJsIOWOn+Wni+WbvueJh1VSTFxuICAgKiBAcmV0dXJucyDlpITnkIblkI7nmoTlm77niYdVUkxcbiAgICovXG4gIHB1YmxpYyBwcm9jZXNzSW1hZ2VVcmwoaW1hZ2VVcmw6IHN0cmluZyB8IHVuZGVmaW5lZCk6IHN0cmluZyB7XG4gICAgaWYgKCFpbWFnZVVybCkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cblxuICAgIC8vIOWmguaenOW3sue7j+aYr+WujOaVtFVSTO+8jOebtOaOpei/lOWbnlxuICAgIGlmIChpbWFnZVVybC5zdGFydHNXaXRoKCdodHRwOi8vJykgfHwgaW1hZ2VVcmwuc3RhcnRzV2l0aCgnaHR0cHM6Ly8nKSkge1xuICAgICAgcmV0dXJuIGltYWdlVXJsO1xuICAgIH1cblxuICAgIC8vIOWmguaenOaYr2Jhc2U2NOagvOW8j+eahOWbvueJh++8jOebtOaOpei/lOWbnlxuICAgIGlmIChpbWFnZVVybC5zdGFydHNXaXRoKCdkYXRhOmltYWdlLycpKSB7XG4gICAgICByZXR1cm4gaW1hZ2VVcmw7XG4gICAgfVxuXG4gICAgLy8g5aSE55CG5Li05pe25a2Y5YKo55qE5Zu+54mHXG4gICAgaWYgKGltYWdlVXJsLnN0YXJ0c1dpdGgoJ3RlbXA6Ly8nKSkge1xuICAgICAgY29uc3QgZmlsZUlkID0gaW1hZ2VVcmwucmVwbGFjZSgndGVtcDovLycsICcnKTtcbiAgICAgIGNvbnN0IGJhc2U2NERhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgdGVtcF9pbWFnZV8ke2ZpbGVJZH1gKTtcbiAgICAgIGlmIChiYXNlNjREYXRhKSB7XG4gICAgICAgIHJldHVybiBiYXNlNjREYXRhO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS53YXJuKCfkuLTml7blm77niYfmlbDmja7mnKrmib7liLA6JywgZmlsZUlkKTtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIOWkhOeQhuS4reaWh+WQjeensCvmlofku7blkI3moLzlvI/vvIjlpoLvvJpcIuaIkeaYr+i0peeKrGVpNmNvaS5qcGVnXCLvvIlcbiAgICAvLyDkvb/nlKjmraPliJnooajovr7lvI/ljLnphY3mlofku7blkI3pg6jliIbvvIjlrZfmr43jgIHmlbDlrZfjgIHngrnjgIHkuIvliJLnur/jgIHov57lrZfnrKbvvIlcbiAgICBjb25zdCBmaWxlTmFtZU1hdGNoID0gaW1hZ2VVcmwubWF0Y2goLyhbYS16QS1aMC05Ll8tXStcXC5bYS16QS1aMC05XSspJC8pO1xuICAgIGlmIChmaWxlTmFtZU1hdGNoKSB7XG4gICAgICBjb25zdCBmaWxlTmFtZSA9IGZpbGVOYW1lTWF0Y2hbMV07XG4gICAgICByZXR1cm4gYGh0dHBzOi8vZmlsZXMuY2F0Ym94Lm1vZS8ke2ZpbGVOYW1lfWA7XG4gICAgfVxuXG4gICAgLy8g5aaC5p6c5Y+q5piv5pmu6YCa5paH5Lu25ZCN77yM5re75YqgY2F0Ym945YmN57yAXG4gICAgcmV0dXJuIGBodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvJHtpbWFnZVVybH1gO1xuICB9XG5cbiAgLyoqXG4gICAqIOeUn+aIkOa2iOaBr0lEXG4gICAqIEByZXR1cm5zIOWUr+S4gOeahOa2iOaBr0lEXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlTWVzc2FnZUlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdtc2dfJyArIERhdGUubm93KCkgKyAnXycgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgOSk7XG4gIH1cblxuICAvKipcbiAgICog5aSE55CG6Kej5p6Q6ZSZ6K+vXG4gICAqIEBwYXJhbSBlcnJvciDplJnor6/lr7nosaFcbiAgICogQHBhcmFtIGNvbnRleHQg6ZSZ6K+v5LiK5LiL5paHXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVBhcnNlRXJyb3IoZXJyb3I6IEVycm9yLCBjb250ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zb2xlLmVycm9yKGDnvqTogYrop6PmnpDplJnor68gWyR7Y29udGV4dH1dOmAsIGVycm9yKTtcblxuICAgIC8vIOiusOW9lemUmeivr+e7n+iuoVxuICAgIHRoaXMuZXJyb3JTdGF0cy5pbmNyZW1lbnQoYHBhcnNlX2Vycm9yXyR7Y29udGV4dH1gKTtcblxuICAgIC8vIOWPkemAgemUmeivr+S6i+S7tlxuICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoXG4gICAgICBuZXcgQ3VzdG9tRXZlbnQoJ2dyb3VwQ2hhdFBhcnNlRXJyb3InLCB7XG4gICAgICAgIGRldGFpbDogeyBlcnJvciwgY29udGV4dCB9LFxuICAgICAgfSksXG4gICAgKTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIOiOt+WPlumUmeivr+e7n+iuoVxuICAgKiBAcmV0dXJucyDplJnor6/nu5/orqHkv6Hmga9cbiAgICovXG4gIHB1YmxpYyBnZXRFcnJvclN0YXRzKCk6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4ge1xuICAgIHJldHVybiB0aGlzLmVycm9yU3RhdHMuZ2V0U3RhdHMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDph43nva7plJnor6/nu5/orqFcbiAgICovXG4gIHB1YmxpYyByZXNldEVycm9yU3RhdHMoKTogdm9pZCB7XG4gICAgdGhpcy5lcnJvclN0YXRzLnJlc2V0KCk7XG4gIH1cblxuICAvKipcbiAgICog5p6E5bu6QmVhcuagvOW8j+eahOa2iOaBr+WGheWuuVxuICAgKiBAcGFyYW0gY2hhdERhdGFNYXAg6IGK5aSp5pWw5o2uTWFwXG4gICAqIEByZXR1cm5zIEJlYXLmoLzlvI/nmoTlrZfnrKbkuLJcbiAgICovXG4gIHB1YmxpYyBidWlsZEJlYXJDb250ZW50KGNoYXREYXRhTWFwOiBNYXA8c3RyaW5nLCBDaGF0RGF0YT4pOiBzdHJpbmcge1xuICAgIC8vIOS9v+eUqOaWsOeahOaJqeWxleaWueazle+8jOS9huS4jeS8oOWFpeWKqOaAgeaVsOaNru+8iOS/neaMgeWQkeWQjuWFvOWuue+8iVxuICAgIHJldHVybiB0aGlzLmJ1aWxkQmVhckNvbnRlbnRQbHVzKHsgY2hhdE1hcDogY2hhdERhdGFNYXAsIGR5bmFtaWNzOiBbXSB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmianlsZXnmoRCZWFy5qC85byP5YaF5a655p6E5bu65pa55rOV77yI5pSv5oyB6IGK5aSp5ZKM5Yqo5oCB77yJXG4gICAqIEBwYXJhbSBkYXRhIOWMheWQq+iBiuWkqeaVsOaNrk1hcOWSjOWKqOaAgeaVsOaNruaVsOe7hOeahOWvueixoVxuICAgKiBAcmV0dXJucyBCZWFy5qC85byP55qE5a2X56ym5LiyXG4gICAqL1xuICBwdWJsaWMgYnVpbGRCZWFyQ29udGVudFBsdXMoZGF0YTogeyBjaGF0TWFwOiBNYXA8c3RyaW5nLCBDaGF0RGF0YT47IGR5bmFtaWNzOiBSYXdQb3N0RGF0YVtdIH0pOiBzdHJpbmcge1xuICAgIGxldCBiZWFyQ29udGVudCA9ICc8YmVhcj5cXG4nO1xuXG4gICAgLy8gMS4g5p6E5bu66IGK5aSp5Z2XXG4gICAgZm9yIChjb25zdCBbLCBjaGF0RGF0YV0gb2YgZGF0YS5jaGF0TWFwKSB7XG4gICAgICAvLyDmo4Dmn6XmmK/lkKbkuLrnvqTogYpcbiAgICAgIGlmICgoY2hhdERhdGEgYXMgYW55KS50eXBlID09PSAnZ3JvdXAnKSB7XG4gICAgICAgIC8vIOaehOW7uue+pOiBiuagvOW8j1xuICAgICAgICBiZWFyQ29udGVudCArPSB0aGlzLmJ1aWxkR3JvdXBDaGF0QmxvY2soY2hhdERhdGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8g5p6E5bu65Y2V6IGK5qC85byPXG4gICAgICAgIGJlYXJDb250ZW50ICs9IGBbJHtjaGF0RGF0YS5jaGF0TmFtZX1dXFxuYDtcblxuICAgICAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgY2hhdERhdGEubWVzc2FnZXMpIHtcbiAgICAgICAgICBjb25zdCBtZXNzYWdlU3RyID0gdGhpcy5idWlsZE1lc3NhZ2VTdHJpbmcobWVzc2FnZSk7XG4gICAgICAgICAgYmVhckNvbnRlbnQgKz0gbWVzc2FnZVN0ciArICdcXG4nO1xuICAgICAgICB9XG5cbiAgICAgICAgYmVhckNvbnRlbnQgKz0gYFsvJHtjaGF0RGF0YS5jaGF0TmFtZX1dXFxuYDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAyLiDmnoTlu7rliqjmgIHlnZfvvIjlpoLmnpzmnInliqjmgIHmlbDmja7vvIlcbiAgICBpZiAoZGF0YS5keW5hbWljcyAmJiBkYXRhLmR5bmFtaWNzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGR5bmFtaWNzQ29udGVudCA9IER5bmFtaWNzQnVpbGRlci5idWlsZER5bmFtaWNzQ29udGFpbmVyKGRhdGEuZHluYW1pY3MpO1xuICAgICAgaWYgKGR5bmFtaWNzQ29udGVudCkge1xuICAgICAgICBiZWFyQ29udGVudCArPSBkeW5hbWljc0NvbnRlbnQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgYmVhckNvbnRlbnQgKz0gJzwvYmVhcj4nO1xuICAgIHJldHVybiBiZWFyQ29udGVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiDmnoTlu7rljZXkuKrogYrlpKnnmoRCZWFy5qC85byP5YaF5a6577yI55So5LqO5Yig6Zmk5raI5oGv5ZCO6YeN5bu677yJXG4gICAqIEBwYXJhbSBjaGF0RGF0YSDljZXkuKrogYrlpKnmlbDmja5cbiAgICogQHJldHVybnMgQmVhcuagvOW8j+eahOWtl+espuS4slxuICAgKi9cbiAgcHVibGljIGJ1aWxkU2luZ2xlQ2hhdEJlYXJDb250ZW50KGNoYXREYXRhOiBDaGF0RGF0YSk6IHN0cmluZyB7XG4gICAgLy8g5Yib5bu65LiA5Liq5Li05pe255qEIE1hcCDmnaXph43nlKjnjrDmnInnmoQgYnVpbGRCZWFyQ29udGVudCDmlrnms5VcbiAgICBjb25zdCB0ZW1wQ2hhdERhdGFNYXAgPSBuZXcgTWFwPHN0cmluZywgQ2hhdERhdGE+KCk7XG4gICAgdGVtcENoYXREYXRhTWFwLnNldChjaGF0RGF0YS5jaGF0SWQsIGNoYXREYXRhKTtcblxuICAgIC8vIOS9v+eUqOeOsOacieeahOaWueazleaehOW7uuWujOaVtOeahCBiZWFyIOWGheWuuVxuICAgIGNvbnN0IGZ1bGxCZWFyQ29udGVudCA9IHRoaXMuYnVpbGRCZWFyQ29udGVudCh0ZW1wQ2hhdERhdGFNYXApO1xuXG4gICAgLy8g5o+Q5Y+WIDxiZWFyPiDmoIfnrb7lhoXnmoTlhoXlrrlcbiAgICBjb25zdCBiZWFyTWF0Y2ggPSBmdWxsQmVhckNvbnRlbnQubWF0Y2goLzxiZWFyPihbXFxzXFxTXSo/KTxcXC9iZWFyPi8pO1xuICAgIGlmIChiZWFyTWF0Y2ggJiYgYmVhck1hdGNoWzFdKSB7XG4gICAgICByZXR1cm4gYDxiZWFyPiR7YmVhck1hdGNoWzFdfTwvYmVhcj5gO1xuICAgIH1cblxuICAgIC8vIOWmguaenOWMuemFjeWksei0pe+8jOi/lOWbnuWOn+Wni+WGheWuuVxuICAgIHJldHVybiBmdWxsQmVhckNvbnRlbnQ7XG4gIH1cblxuICAvKipcbiAgICog5p6E5bu6576k6IGKQmVhcuagvOW8j+Wtl+espuS4slxuICAgKiBAcGFyYW0gY2hhdERhdGEg576k6IGK5pWw5o2uXG4gICAqIEByZXR1cm5zIOe+pOiBikJlYXLmoLzlvI/lrZfnrKbkuLJcbiAgICovXG4gIHByaXZhdGUgYnVpbGRHcm91cENoYXRCbG9jayhjaGF0RGF0YTogQ2hhdERhdGEpOiBzdHJpbmcge1xuICAgIGlmICgoY2hhdERhdGEgYXMgYW55KS50eXBlICE9PSAnZ3JvdXAnKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgLy8g576k5ZCN56ew77yI546w5ZyoY2hhdE5hbWXlsLHmmK/nuq/nvqTlkI3vvIlcbiAgICBjb25zdCBncm91cE5hbWUgPSBjaGF0RGF0YS5jaGF0TmFtZTtcblxuICAgIC8vIOaehOW7uuaIkOWRmOWIl+ihqFxuICAgIGNvbnN0IG1lbWJlcnMgPSAoY2hhdERhdGEgYXMgYW55KS5tZW1iZXJzIHx8IFtdO1xuICAgIGNvbnN0IG1lbWJlck5hbWVzID0gbWVtYmVycy5tYXAoKG1lbWJlcjogYW55KSA9PiBtZW1iZXIubmFtZSkuam9pbign77yMJyk7XG5cbiAgICBsZXQgYmVhckNvbnRlbnQgPSBgW+e+pOiBiiR7Z3JvdXBOYW1lfV1cXG5gO1xuICAgIGJlYXJDb250ZW50ICs9IGBb5oiQ5ZGY77yaJHttZW1iZXJOYW1lc31dXFxuYDtcblxuICAgIC8vIOaehOW7uua2iOaBr+WIl+ihqFxuICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBjaGF0RGF0YS5tZXNzYWdlcykge1xuICAgICAgY29uc3QgbWVzc2FnZVN0ciA9IHRoaXMuYnVpbGRHcm91cE1lc3NhZ2VTdHJpbmcobWVzc2FnZSk7XG4gICAgICBpZiAobWVzc2FnZVN0cikge1xuICAgICAgICBiZWFyQ29udGVudCArPSBtZXNzYWdlU3RyICsgJ1xcbic7XG4gICAgICB9XG4gICAgfVxuXG4gICAgYmVhckNvbnRlbnQgKz0gYFsv576k6IGKJHtncm91cE5hbWV9XVxcbmA7XG4gICAgcmV0dXJuIGJlYXJDb250ZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIOaehOW7uuWNleadoee+pOiBiua2iOaBr+Wtl+espuS4slxuICAgKiBAcGFyYW0gbWVzc2FnZSDmtojmga/lr7nosaFcbiAgICogQHJldHVybnMg576k6IGK5raI5oGv5a2X56ym5LiyXG4gICAqL1xuICBwcml2YXRlIGJ1aWxkR3JvdXBNZXNzYWdlU3RyaW5nKG1lc3NhZ2U6IENoYXRNZXNzYWdlKTogc3RyaW5nIHtcbiAgICBpZiAobWVzc2FnZS50eXBlICE9PSAnRycpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICAvLyDmj5Dlj5bnvqTlkI3np7DvvIjnp7vpmaRcIue+pOiBilwi5YmN57yA77yJXG4gICAgY29uc3QgZ3JvdXBOYW1lID0gbWVzc2FnZS5jaGF0SWQucmVwbGFjZSgvXue+pOiBii8sICcnKTtcblxuICAgIC8vIOaehOW7uua2iOaBr+WGheWuuVxuICAgIGxldCBtZXNzYWdlQ29udGVudCA9ICcnO1xuICAgIGlmIChtZXNzYWdlLm1lc3NhZ2VUeXBlID09PSAndGV4dCcpIHtcbiAgICAgIG1lc3NhZ2VDb250ZW50ID0gbWVzc2FnZS5jb250ZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICBtZXNzYWdlQ29udGVudCA9IGAke21lc3NhZ2UubWVzc2FnZVR5cGV9OiR7bWVzc2FnZS5jb250ZW50fWA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGBbR18ke2dyb3VwTmFtZX18JHttZXNzYWdlLnNlbmRlcn18JHttZXNzYWdlQ29udGVudH18JHttZXNzYWdlLnRpbWVzdGFtcH1dYDtcbiAgfVxuXG4gIC8qKlxuICAgKiDmnoTlu7rljZXmnaHmtojmga/lrZfnrKbkuLLvvIjmlrDmoLzlvI/vvIw05a2X5q6177yJXG4gICAqIOagvOW8j++8mltTX+Wwj+aYjnzlsI/mmI585raI5oGv5YaF5a65fDE1OjMwXSAtIOWIoOmZpOWktOWDj+Wtl+autVxuICAgKiBAcGFyYW0gbWVzc2FnZSDmtojmga/lr7nosaFcbiAgICogQHJldHVybnMg5raI5oGv5a2X56ym5LiyXG4gICAqL1xuICBwcml2YXRlIGJ1aWxkTWVzc2FnZVN0cmluZyhtZXNzYWdlOiBDaGF0TWVzc2FnZSk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBbJHttZXNzYWdlLnR5cGV9XyR7bWVzc2FnZS5jaGF0SWR9fCR7bWVzc2FnZS5zZW5kZXJ9fCR7bWVzc2FnZS5tZXNzYWdlVHlwZX06JHttZXNzYWdlLmNvbnRlbnR9fCR7bWVzc2FnZS50aW1lc3RhbXB9XWA7XG4gIH1cblxuICAvKipcbiAgICog5qC85byP5YyW5pyA5ZCO5LiA5p2h5raI5oGv5pi+56S65paH5pys77yI6YCa55So5pa55rOV77yJXG4gICAqIEBwYXJhbSBtZXNzYWdlIOa2iOaBr+WvueixoVxuICAgKiBAcmV0dXJucyDmoLzlvI/ljJblkI7nmoTmtojmga/mlofmnKxcbiAgICovXG4gIHB1YmxpYyBmb3JtYXRMYXN0TWVzc2FnZShtZXNzYWdlOiBDaGF0TWVzc2FnZSk6IHN0cmluZyB7XG4gICAgY29uc3Qgc2VuZGVyTmFtZSA9IG1lc3NhZ2Uuc2VuZGVyID09PSAne3t1c2VyfX0nID8gJ+aIkScgOiBtZXNzYWdlLnNlbmRlcjtcblxuICAgIGxldCBjb250ZW50ID0gJyc7XG4gICAgc3dpdGNoIChtZXNzYWdlLm1lc3NhZ2VUeXBlKSB7XG4gICAgICBjYXNlICd0ZXh0JzpcbiAgICAgICAgY29udGVudCA9IG1lc3NhZ2UuY29udGVudDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdpbWFnZSc6XG4gICAgICAgIGNvbnRlbnQgPSAnW+WbvueJh10nO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3ZvaWNlJzpcbiAgICAgICAgY29udGVudCA9ICdb6K+t6Z+zXSc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc3RpY2tlcic6XG4gICAgICAgIGNvbnRlbnQgPSAnW+ihqOaDheWMhV0nO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2xvY2F0aW9uJzpcbiAgICAgICAgY29udGVudCA9ICdb5L2N572uXSc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndHJhbnNmZXInOlxuICAgICAgICBjb250ZW50ID0gJ1vovazotKZdJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBjb250ZW50ID0gbWVzc2FnZS5jb250ZW50O1xuICAgIH1cblxuICAgIHJldHVybiBgJHtzZW5kZXJOYW1lfTogJHtjb250ZW50fWA7XG4gIH1cblxuICAvKipcbiAgICog5qC85byP5YyW576k6IGK5pyA5ZCO5LiA5p2h5raI5oGv55So5LqO5pi+56S6XG4gICAqIEBwYXJhbSBtZXNzYWdlIOa2iOaBr+WvueixoVxuICAgKiBAcmV0dXJucyDmoLzlvI/ljJblkI7nmoTmtojmga/mlofmnKxcbiAgICovXG4gIHB1YmxpYyBmb3JtYXRHcm91cExhc3RNZXNzYWdlKG1lc3NhZ2U6IENoYXRNZXNzYWdlKTogc3RyaW5nIHtcbiAgICBjb25zdCBzZW5kZXJOYW1lID0gbWVzc2FnZS5zZW5kZXIgPT09ICd7e3VzZXJ9fScgPyAn5oiRJyA6IChtZXNzYWdlIGFzIGFueSkuc2VuZGVyRGlzcGxheU5hbWUgfHwgbWVzc2FnZS5zZW5kZXI7XG5cbiAgICBsZXQgY29udGVudCA9ICcnO1xuICAgIHN3aXRjaCAobWVzc2FnZS5tZXNzYWdlVHlwZSkge1xuICAgICAgY2FzZSAndGV4dCc6XG4gICAgICAgIGNvbnRlbnQgPSBtZXNzYWdlLmNvbnRlbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnaW1hZ2UnOlxuICAgICAgICBjb250ZW50ID0gJ1vlm77niYddJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd2b2ljZSc6XG4gICAgICAgIGNvbnRlbnQgPSAnW+ivremfs10nO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3N0aWNrZXInOlxuICAgICAgICBjb250ZW50ID0gJ1vooajmg4XljIVdJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdsb2NhdGlvbic6XG4gICAgICAgIGNvbnRlbnQgPSAnW+S9jee9rl0nO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3RyYW5zZmVyJzpcbiAgICAgICAgY29udGVudCA9ICdb6L2s6LSmXSc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgY29udGVudCA9IG1lc3NhZ2UuY29udGVudDtcbiAgICB9XG5cbiAgICByZXR1cm4gYCR7c2VuZGVyTmFtZX06ICR7Y29udGVudH1gO1xuICB9XG5cbiAgLyoqXG4gICAqIOeUn+aIkOiBiuWkqUlEXG4gICAqIOS7hei/m+ihjCB0cmlt77yM5LiN5pS55Y+Y5aSn5bCP5YaZ5LiO56m655m977yM5L+d5oyB5LiO5Z2X5ZCN5LiA6Ie0XG4gICAqIEBwYXJhbSBjaGF0TmFtZSDogYrlpKnlkI3np7BcbiAgICogQHJldHVybnMg6IGK5aSpSURcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVDaGF0SWQoY2hhdE5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIChjaGF0TmFtZSA/PyAnJykudHJpbSgpO1xuICB9XG59XG5cbi8qKlxuICog5aSa5LqR54aK6IGK5aSp566h55CG5Zmo5Li757G7XG4gKiDlrp7njrDln7rnoYDnmoTnirbmgIHnrqHnkIbjgIHkuovku7bnm5HlkKzlmajliJ3lp4vljJblkozpn7PmlYjpooTliqDovb3lip/og71cbiAqL1xuY2xhc3MgQmVhckNoYXRNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBjdXJyZW50Q2hhdDogc3RyaW5nID0gJyc7XG4gIHByaXZhdGUgY2hhdERhdGE6IE1hcDxzdHJpbmcsIENoYXREYXRhPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBhdmF0YXJNaXhpbjogU2ltcGxlQXZhdGFyTWl4aW47XG4gIHByaXZhdGUgc2VuZFF1ZXVlOiBDaGF0TWVzc2FnZVtdID0gW107XG4gIHByaXZhdGUgY3VycmVudEludGVyZmFjZTogJ2xpc3QnIHwgJ2NoYXQnIHwgJ2RpYXJ5JyB8ICdjYWxsJyA9ICdsaXN0JztcbiAgcHJpdmF0ZSBtZXNzYWdlUGFyc2VyOiBNZXNzYWdlUGFyc2VyO1xuICBwcml2YXRlIHNvdW5kTWFuYWdlcjogU291bmRNYW5hZ2VyO1xuICBwcml2YXRlIGlzTWVudVZpc2libGU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBpc1N0aWNrZXJTZWxlY3RvclZpc2libGU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBpc1JlbmRlcmluZ01lc3NhZ2VzOiBib29sZWFuID0gZmFsc2U7IC8vIOa2iOaBr+a4suafk+eKtuaAgeagh+W/l1xuICBwcml2YXRlIHNob3VsZFN0b3BSZW5kZXJpbmc6IGJvb2xlYW4gPSBmYWxzZTsgLy8g5riy5p+T5Lit5pat5qCH5b+XXG4gIHByaXZhdGUgaXNTZW5kaW5nOiBib29sZWFuID0gZmFsc2U7IC8vIOWPkemAgeeKtuaAgeagh+W/l++8jOmYsuatoumHjeWkjeeCueWHu1xuICBwcml2YXRlIGNyb3NzQ2hhdFNlbmRFbmFibGVkOiBib29sZWFuID0gZmFsc2U7IC8vIOi3qOiBiuWkqeWPkemAgeWKn+iDveW8gOWFs1xuXG4gIC8vIOWKqOaAgeaVsOaNruWtmOWCqFxuICBwcml2YXRlIGR5bmFtaWNzRGF0YTogUmF3UG9zdERhdGFbXSA9IFtdO1xuXG4gIC8vIOihqOaDheWMheeuoeeQhuebuOWFs+WxnuaAp1xuICBwcml2YXRlIHN0aWNrZXJEYXRhOiBTdGlja2VyRGF0YVtdID0gW107XG4gIHByaXZhdGUgc3RpY2tlck9yZGVyOiBTdGlja2VyT3JkZXIgPSB7fTtcbiAgcHJpdmF0ZSBzdGlja2VyTG9yZWJvb2tOYW1lOiBzdHJpbmcgPSAnJztcbiAgcHJpdmF0ZSBzdGlja2VyQ2FjaGU6IE1hcDxudW1iZXIsIFN0aWNrZXJEYXRhPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBzdGlja2VyU2VsZWN0b3JDbGlja091dHNpZGVIYW5kbGVyOiAoKGU6IEV2ZW50KSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGlzRGVsZXRlTW9kZTogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIHNlbGVjdGVkU3RpY2tlcnM6IFNldDxudW1iZXI+ID0gbmV3IFNldCgpO1xuXG4gIC8vIOaJuemHj+WIoOmZpOaooeW8j+ebuOWFs+WxnuaAp1xuICBwcml2YXRlIGlzQmF0Y2hEZWxldGVNb2RlOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgc2VsZWN0ZWRNZXNzYWdlczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7IC8vIOWtmOWCqERPTeS9jee9rue0ouW8le+8iOWtl+espuS4suagvOW8j++8iVxuICBwcml2YXRlIGJhdGNoRGVsZXRlVG9vbGJhcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgLy8g57uf5LiA6L2s6LSm54K55Ye75aeU5omY5piv5ZCm5bey57uR5a6aXG4gIHByaXZhdGUgdHJhbnNmZXJEZWxlZ2F0aW9uQm91bmQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAvLyDop5LoibLliIfmjaLpmLLmipZcbiAgcHJpdmF0ZSBjaGFyYWN0ZXJDaGFuZ2VUaW1lb3V0OiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuICAvLyDogYrlpKnnlYzpnaLnirbmgIHmoI/lrp7kvotcbiAgcHJpdmF0ZSBjaGF0U3RhdHVzQmFyOiBTdGF0dXNCYXIgfCBudWxsID0gbnVsbDtcblxuICAvLyDmmbrog73ooajmg4XljIXlu7rorq7nm7jlhbPlsZ7mgKdcbiAgcHJpdmF0ZSBpc1N1Z2dlc3Rpb25WaXNpYmxlOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgc3VnZ2VzdGlvbkNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBpbnB1dENoYW5nZVRpbWVyOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuXG4gIC8vIEFJ5Zue5aSN5aSE55CG55u45YWz5bGe5oCnXG4gIHByaXZhdGUgbGFzdEJlYXJDb250ZW50OiBzdHJpbmcgPSAnJztcblxuICAvLyDogYrlpKnliJfooajnrqHnkIblmahcbiAgcHVibGljIGNoYXRMaXN0TWFuYWdlcjogQ2hhdExpc3RNYW5hZ2VyO1xuXG4gIC8vIOe+pOiBiueuoeeQhuWZqFxuICBwcml2YXRlIGdyb3VwQ2hhdE1hbmFnZXI6IEdyb3VwQ2hhdE1hbmFnZXI7XG5cbiAgLy8g5oiR55qE6aG16Z2i566h55CG5ZmoXG4gIHByaXZhdGUgcHJvZmlsZUludGVyZmFjZTogUHJvZmlsZUludGVyZmFjZSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHNldHRpbmdzTW9kYWw6IGFueTsgLy8g5byV55So6K6+572u5qih5oCB5qGGXG4gIHByaXZhdGUgY2hhdFdhbGxwYXBlck1hbmFnZXI6IENoYXRXYWxscGFwZXJNYW5hZ2VyIHwgbnVsbCA9IG51bGw7IC8vIOiBiuWkqeWjgee6uOeuoeeQhuWZqFxuICBwcml2YXRlIHNjYWxlTWFuYWdlcjogU2NhbGVNYW5hZ2VyOyAvLyDnlYzpnaLnvKnmlL7nrqHnkIblmahcbiAgcHJpdmF0ZSB0eXBpbmdTcGVlZE1hbmFnZXI6IFR5cGluZ1NwZWVkTWFuYWdlcjsgLy8g5omT5a2X6YCf5bqm566h55CG5ZmoXG5cbiAgLy8g5Yqo5oCB6aG16Z2i566h55CG5ZmoXG4gIHByaXZhdGUgZHluYW1pY3NNYW5hZ2VyOiBEeW5hbWljc01hbmFnZXIgfCBudWxsID0gbnVsbDtcblxuICAvLyDliIbpobXmuLLmn5Pnm7jlhbNcbiAgcHJpdmF0ZSB2aXNpYmxlQ291bnRzOiBNYXA8c3RyaW5nLCBudW1iZXI+ID0gbmV3IE1hcCgpOyAvLyBjaGF0SWQgLT4g5b2T5YmN5Y+v6KeB5raI5oGv5pWwXG4gIHByaXZhdGUgcmVhZG9ubHkgSU5JVElBTF9WSVNJQkxFX0NPVU5UOiBudW1iZXIgPSA1MDsgLy8g5Yid5qyh6L+b5YWl5pi+56S65pyA6L+RNTDmnaFcbiAgcHJpdmF0ZSByZWFkb25seSBMT0FEX01PUkVfU1RFUDogbnVtYmVyID0gMjA7IC8vIOavj+asoeKAnOafpeeci+abtOWkmuKAneWinuWKoDIw5p2hXG5cbiAgLy8g5LiK5ruR5Yqg6L295pu05aSa55u45YWzXG4gIHByaXZhdGUgdG9wU2Nyb2xsSGFuZGxlcjogKChlOiBFdmVudCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBsYXN0TG9hZE1vcmVBdDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSByZWFkb25seSBMT0FEX01PUkVfVEhST1RUTEVfTVM6IG51bWJlciA9IDMwMDtcblxuICAvLyBVSSDpooTop4jlm77nvJPlrZjvvIjku4XnlKjkuo7liY3nq6/mmL7npLrlpI3msLTvvIzkuI3okL3nm5jvvIlcbiAgcHJpdmF0ZSB1aUltYWdlQ2FjaGUgPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nPigpOyAvLyBrZXk6IGNoYXRJZHxzZW5kZXJ8dGltZXN0YW1wIC0+IHNyYyhiYXNlNjQvVVJMKVxuICBwcml2YXRlIGNhY2hlZFVzZXJOYW1lOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICBwcml2YXRlIGdldFVpSW1hZ2VLZXkobWVzc2FnZTogQ2hhdE1lc3NhZ2UpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHttZXNzYWdlLmNoYXRJZH18JHttZXNzYWdlLnNlbmRlcn18JHttZXNzYWdlLnRpbWVzdGFtcH1gO1xuICB9XG4gIHByaXZhdGUgY2FjaGVVaUltYWdlUHJldmlldyhtZXNzYWdlOiBDaGF0TWVzc2FnZSwgc3JjOiBzdHJpbmcpIHtcbiAgICB0aGlzLnVpSW1hZ2VDYWNoZS5zZXQodGhpcy5nZXRVaUltYWdlS2V5KG1lc3NhZ2UpLCBzcmMpO1xuICB9XG5cbiAgLy8g5ZCM5q2l6I635Y+W55So5oi355yf5a6e5pi+56S65ZCN77yI6Iul5Y+v55So77yJ77yM5aSx6LSl5YiZ6L+U5Zue57yT5a2Y55qE5YC8XG4gIHByaXZhdGUgZ2V0UmVhbFVzZXJOYW1lU3luYygpOiBzdHJpbmcgfCBudWxsIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZ3VtID0gR2xvYmFsVXNlck1hbmFnZXIuZ2V0SW5zdGFuY2U/LigpO1xuICAgICAgY29uc3QgZGF0YSA9IGd1bT8uZ2V0Q3VycmVudFVzZXJEYXRhPy4oKTtcbiAgICAgIGlmIChkYXRhPy5uYW1lKSB7XG4gICAgICAgIHRoaXMuY2FjaGVkVXNlck5hbWUgPSBkYXRhLm5hbWU7XG4gICAgICAgIHJldHVybiBkYXRhLm5hbWU7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jYWNoZWRVc2VyTmFtZSkgcmV0dXJuIHRoaXMuY2FjaGVkVXNlck5hbWU7XG4gICAgfSBjYXRjaCAoZSkgeyByZXR1cm4gdGhpcy5jYWNoZWRVc2VyTmFtZTsgfVxuICAgIHJldHVybiB0aGlzLmNhY2hlZFVzZXJOYW1lO1xuICB9XG5cbiAgLy8g5Yik5pat6K+lIHNlbmRlciDmmK/lkKblsZ7kuo7igJznlKjmiLfmnKzkurrigJ1cbiAgcHJpdmF0ZSBpc1VzZXJTZW5kZXIoc2VuZGVyOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBpZiAoc2VuZGVyID09PSAne3t1c2VyfX0nIHx8IHNlbmRlciA9PT0gJ3VzZXInKSByZXR1cm4gdHJ1ZTtcbiAgICBjb25zdCByZWFsTmFtZSA9IHRoaXMuZ2V0UmVhbFVzZXJOYW1lU3luYygpO1xuICAgIHJldHVybiAhIXJlYWxOYW1lICYmIHNlbmRlciA9PT0gcmVhbE5hbWU7XG4gIH1cblxuICAvLyDku44gVUkg57yT5a2Y6K+75Y+W6aKE6KeI5Zu+77yI5a656ZSZIHNlbmRlciAvIOaXtumXtOaIs+W3ruW8gu+8ie+8mlxuICAvLyAxKSDnsr7noa7plK4gY2hhdElkfHNlbmRlcnx0aW1lc3RhbXBcbiAgLy8gMikg5YmN57yA5Zue6YCA77yI5YW85a65IHt7dXNlcn19IC8gdXNlciAvIOecn+WunueUqOaIt+WQje+8iVxuICAvLyAzKSDlhZzlupXku4XmjIkgY2hhdElkIOaQnOe0ou+8iOacrCBNYXAg5Y+q57yT5a2YIHVzZXIg55qE5Zu+54mH77yM5LiN5Lya6K+v5ZG95LitIEFJ77yJXG4gIHByaXZhdGUgZ2V0Q2FjaGVkVWlJbWFnZShtZXNzYWdlOiBDaGF0TWVzc2FnZSk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgLy8gMSkg57K+56Gu5ZG95LitXG4gICAgY29uc3QgZXhhY3QgPSB0aGlzLnVpSW1hZ2VDYWNoZS5nZXQodGhpcy5nZXRVaUltYWdlS2V5KG1lc3NhZ2UpKTtcbiAgICBpZiAoZXhhY3QpIHJldHVybiBleGFjdDtcblxuICAgIC8vIDIpIOWJjee8gOWbnumAgO+8iOacgOWQjuS4gOasoeaPkuWFpe+8iVxuICAgIGNvbnN0IHJlYWxOYW1lID0gdGhpcy5nZXRSZWFsVXNlck5hbWVTeW5jKCk7XG4gICAgY29uc3QgY2FuZGlkYXRlcyA9IG5ldyBTZXQ8c3RyaW5nPihbXG4gICAgICBgJHttZXNzYWdlLmNoYXRJZH18JHttZXNzYWdlLnNlbmRlcn18YCxcbiAgICAgIGAke21lc3NhZ2UuY2hhdElkfXx7e3VzZXJ9fXxgLFxuICAgICAgYCR7bWVzc2FnZS5jaGF0SWR9fHVzZXJ8YCxcbiAgICBdKTtcbiAgICBpZiAocmVhbE5hbWUpIGNhbmRpZGF0ZXMuYWRkKGAke21lc3NhZ2UuY2hhdElkfXwke3JlYWxOYW1lfXxgKTtcblxuICAgIGZvciAoY29uc3QgcHJlZml4IG9mIGNhbmRpZGF0ZXMpIHtcbiAgICAgIGxldCBsYXN0OiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiB0aGlzLnVpSW1hZ2VDYWNoZSkge1xuICAgICAgICBpZiAoay5zdGFydHNXaXRoKHByZWZpeCkpIGxhc3QgPSB2O1xuICAgICAgfVxuICAgICAgaWYgKGxhc3QpIHJldHVybiBsYXN0O1xuICAgIH1cblxuICAgIC8vIDMpIOWFnOW6le+8muS7heaMiSBjaGF0SWQg5pCcXG4gICAgY29uc3QgY2hhdFByZWZpeCA9IGAke21lc3NhZ2UuY2hhdElkfXxgO1xuICAgIGxldCBsYXN0SW5DaGF0OiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgZm9yIChjb25zdCBbaywgdl0gb2YgdGhpcy51aUltYWdlQ2FjaGUpIHtcbiAgICAgIGlmIChrLnN0YXJ0c1dpdGgoY2hhdFByZWZpeCkpIGxhc3RJbkNoYXQgPSB2O1xuICAgIH1cbiAgICByZXR1cm4gbGFzdEluQ2hhdDtcbiAgfVxuXG4gIC8qKlxuICAgKiDkvb/nlKggVUkg6aKE6KeI57yT5a2Y5a+55b2T5YmN6IGK5aSp55qEIHVzZXIg5Zu+54mH5raI5oGv6L+b6KGM5aSN5rC077yI5LuF5YaF5a2Y77yJXG4gICAqIOehruS/neWcqOi/lOWbnuiBiuWkqeaXtuS7jeiDveaYvuekuuWOn+WbvlxuICAgKi9cbiAgcHJpdmF0ZSByZWh5ZHJhdGVVc2VySW1hZ2VNZXNzYWdlcyhjaGF0OiBDaGF0RGF0YSk6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICBjaGF0Lm1lc3NhZ2VzLmZvckVhY2gobXNnID0+IHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG1zZy5tZXNzYWdlVHlwZSA9PT0gJ2ltYWdlJyAmJlxuICAgICAgICAgIHRoaXMuaXNVc2VyU2VuZGVyKG1zZy5zZW5kZXIpICYmXG4gICAgICAgICAgIShtc2cuZGF0YT8udXBsb2FkZWRGaWxlIHx8IG1zZy5kYXRhPy5iYXNlNjRJbWFnZSB8fCBtc2cuZGF0YT8uaW1hZ2VVcmwpXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGNhY2hlZFNyYyA9IHRoaXMuZ2V0Q2FjaGVkVWlJbWFnZShtc2cpO1xuICAgICAgICAgIGlmIChjYWNoZWRTcmMpIHtcbiAgICAgICAgICAgIG1zZy5kYXRhID0geyAuLi4obXNnLmRhdGEgfHwge30pLCBpbWFnZVVybDogY2FjaGVkU3JjIH07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ3JlaHlkcmF0ZVVzZXJJbWFnZU1lc3NhZ2VzIOWksei0pTonLCBlKTtcbiAgICB9XG4gIH1cblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnNvdW5kTWFuYWdlciA9IG5ldyBTb3VuZE1hbmFnZXIoKTtcbiAgICB0aGlzLnNjYWxlTWFuYWdlciA9IG5ldyBTY2FsZU1hbmFnZXIoKTsgLy8g5Yid5aeL5YyW55WM6Z2i57yp5pS+566h55CG5ZmoXG4gICAgdGhpcy50eXBpbmdTcGVlZE1hbmFnZXIgPSBuZXcgVHlwaW5nU3BlZWRNYW5hZ2VyKCk7IC8vIOWIneWni+WMluaJk+Wtl+mAn+W6pueuoeeQhuWZqFxuICAgIHRoaXMuZ3JvdXBDaGF0TWFuYWdlciA9IG5ldyBHcm91cENoYXRNYW5hZ2VyKCk7XG5cbiAgICAvLyDlhYjliJvlu7rop6PmnpDlmajvvIjmmoLkuI3ms6jlhaXogZTns7vkurrnrqHnkIblmajvvIznqI3lkI7orr7nva7vvIlcbiAgICB0aGlzLm1lc3NhZ2VQYXJzZXIgPSBuZXcgTWVzc2FnZVBhcnNlcigpO1xuXG4gICAgLy8g5YaN5Yib5bu66IGK5aSp5YiX6KGo566h55CG5Zmo77yM5Lyg5YWl6Kej5p6Q5Zmo5a6e5L6LXG4gICAgdGhpcy5jaGF0TGlzdE1hbmFnZXIgPSBuZXcgQ2hhdExpc3RNYW5hZ2VyKHRoaXMuc291bmRNYW5hZ2VyLCB0aGlzLmdyb3VwQ2hhdE1hbmFnZXIsIHRoaXMubWVzc2FnZVBhcnNlcik7XG5cbiAgICAvLyDorr7nva4gR3JvdXBDaGF0TWFuYWdlciDnmoQgQ29udGFjdE1hbmFnZXIg5L6d6LWWXG4gICAgdGhpcy5ncm91cENoYXRNYW5hZ2VyLnNldENvbnRhY3RNYW5hZ2VyKHRoaXMuY2hhdExpc3RNYW5hZ2VyLmdldENvbnRhY3RNYW5hZ2VyKCkpO1xuXG4gICAgLy8g546w5Zyo6Kej5p6Q5Zmo5Y+v5Lul5rOo5YWl6IGU57O75Lq6566h55CG5ZmoXG4gICAgdGhpcy5tZXNzYWdlUGFyc2VyLnNldENvbnRhY3RNYW5hZ2VyKHRoaXMuY2hhdExpc3RNYW5hZ2VyLmdldENvbnRhY3RNYW5hZ2VyKCkpO1xuXG4gICAgdGhpcy5hdmF0YXJNaXhpbiA9IG5ldyBTaW1wbGVBdmF0YXJNaXhpbih7IGRlYnVnOiBmYWxzZSB9KTtcblxuICAgIC8vIOWIneWni+WMluWKqOaAgeeuoeeQhuWZqFxuICAgIHRoaXMuZHluYW1pY3NNYW5hZ2VyID0gbmV3IER5bmFtaWNzTWFuYWdlcih0aGlzLnNvdW5kTWFuYWdlcik7XG4gICAgY29uc29sZS5sb2coJ+KchSDliqjmgIHnrqHnkIblmajlt7LliJvlu7onKTtcblxuICAgIC8vIOW8guatpeWIneWni+WMluaJgOacieaooeWdl1xuICAgIHRoaXMuaW5pdGlhbGl6ZUFwcGxpY2F0aW9uKCkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIOW6lOeUqOWIneWni+WMluWksei0pTonLCBlcnJvcik7XG4gICAgICAvLyDlj6/ku6XlnKjov5nph4zmmL7npLrkuIDkuKrlhajlsYDnmoTplJnor6/mj5DnpLpcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDnu5/kuIDnmoTlupTnlKjliJ3lp4vljJbmtYHnqItcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZUFwcGxpY2F0aW9uKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnNvbGUubG9nKCfwn5qAIOW6lOeUqOWIneWni+WMluW8gOWniy4uLicpO1xuXG4gICAgLy8gMS4g5Yid5aeL5YyW5LqL5Lu255uR5ZCs5ZmoICjlj6/ku6XlkIzmraXmiafooYwpXG4gICAgdGhpcy5pbml0aWFsaXplRXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIC8vIDIuIOWIneWni+WMluWFqOWxgOeUqOaIt+euoeeQhuWZqCAo6L+Z5piv5YWz6ZSu55qE5byC5q2l6Zi75aGe5q2l6aqkKVxuICAgIGF3YWl0IEdsb2JhbFVzZXJNYW5hZ2VyLmdldEluc3RhbmNlKCkuaW5pdGlhbGl6ZSgpO1xuXG4gICAgLy8gMy4g5Yid5aeL5YyWIFwi5oiR55qEXCIg6aG16Z2i5qih5Z2XXG4gICAgYXdhaXQgdGhpcy5pbml0aWFsaXplUHJvZmlsZU1vZHVsZSgpO1xuXG4gICAgLy8gNC4g5Yid5aeL5YyW5omp5bGV5Yqf6IO95qih5Z2XXG4gICAgdGhpcy5pbml0aWFsaXplRXh0ZW5zaW9uc01vZHVsZSgpO1xuXG4gICAgLy8gNC4xLiDliJ3lp4vljJbogYrlpKnov4Hnp7vnrqHnkIblmahcbiAgICB0aGlzLmluaXRpYWxpemVDaGF0TWlncmF0aW9uTWFuYWdlcigpO1xuXG4gICAgLy8gNS4g5Yid5aeL5YyW6IGK5aSp5aOB57q4566h55CG5ZmoXG4gICAgYXdhaXQgdGhpcy5pbml0aWFsaXplQ2hhdFdhbGxwYXBlck1hbmFnZXIoKTtcblxuICAgIC8vIDYuIOWIneWni+WMluihqOaDheWMheezu+e7n1xuICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVN0aWNrZXJTeXN0ZW0oKTtcblxuICAgIC8vIDcuIOWIneWni+WMlue+pOWQjeimhueblueuoeeQhuWZqCAo5paw5aKe5Yqf6IO9KVxuICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZUdyb3VwTmFtZU92ZXJyaWRlTWFuYWdlcigpO1xuXG4gICAgLy8gOC4g5LuO546w5pyJ5pWw5o2u5Yid5aeL5YyW6IGK5aSpXG4gICAgdGhpcy5pbml0aWFsaXplRnJvbUV4aXN0aW5nRGF0YSgpO1xuXG4gICAgLy8gOC4g576k6IGK5pWw5o2u6YCa6L+H5raI5oGv5qCH6K6w6Ieq5Yqo6Kej5p6Q77yM5peg6ZyA5Y2V54us5ZCM5q2lXG5cbiAgICAvLyA4LiDliJ3lp4vljJbogYrlpKnliJfooajkuovku7ZcbiAgICB0aGlzLmluaXRpYWxpemVDaGF0TGlzdEV2ZW50cygpO1xuXG4gICAgLy8gOC4g5Yid5aeL5YyW5bm25by65Yi25ZCM5q2l5LiA5qyh5aS05YOPXG4gICAgdGhpcy5pbml0aWFsaXplQXZhdGFyU3luYygpO1xuXG4gICAgLy8gOS4g5raI5oGv5Zue5aSN5Yqf6IO95bey55u05o6l6ZuG5oiQ5Yiw5Li757G75LitXG5cbiAgICBjb25zb2xlLmxvZygn5bqU55So5Yid5aeL5YyW5a6M5oiQJyk7XG5cbiAgICAvLyDlupTnlKjliJ3lp4vljJblrozmiJDlkI7op6blj5HogYrlpKnov4Hnp7vmo4Dmn6VcbiAgICBjb25zb2xlLmxvZygn8J+OryBb5Li75bqU55SoXSDlupTnlKjliJ3lp4vljJblrozmiJDvvIzlh4blpIfop6blj5HogYrlpKnov4Hnp7vmo4Dmn6UnKTtcbiAgICBhd2FpdCB0aGlzLnRyaWdnZXJDaGF0TWlncmF0aW9uQ2hlY2soKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliJ3lp4vljJblpLTlg4/lkIzmraVcbiAgICovXG4gIHByaXZhdGUgaW5pdGlhbGl6ZUF2YXRhclN5bmMoKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIOiOt+WPlkdsb2JhbFVzZXJNYW5hZ2Vy5a6e5L6LXG4gICAgICBjb25zdCBnbG9iYWxVc2VyTWFuYWdlciA9IEdsb2JhbFVzZXJNYW5hZ2VyLmdldEluc3RhbmNlKCk7XG4gICAgICBjb25zdCB1c2VyRGF0YSA9IGdsb2JhbFVzZXJNYW5hZ2VyLmdldEN1cnJlbnRVc2VyRGF0YSgpO1xuXG4gICAgICAvLyDlpoLmnpzmnInoh6rlrprkuYnlpLTlg4/vvIznq4vljbPlkIzmraXliLDmiYDmnInlnLDmlrlcbiAgICAgIGlmICh1c2VyRGF0YT8uaXNDdXN0b20gJiYgdXNlckRhdGEuYXZhdGFyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbQmVhckNoYXRNYW5hZ2VyXSDlj5HnjrDoh6rlrprkuYnlpLTlg4/vvIznq4vljbPlkIzmraU6JywgdXNlckRhdGEuYXZhdGFyKTtcblxuICAgICAgICAvLyDkvb/nlKhmb3JjZVVwZGF0ZUF2YXRhcnPlvLrliLbmm7TmlrDmiYDmnInlpLTlg4/lhYPntKBcbiAgICAgICAgY29uc3QgeyBmb3JjZVVwZGF0ZUF2YXRhcnMgfSA9IHJlcXVpcmUoJy4vbW9kdWxlcy91dGlscy9BdmF0YXJTeW5jJyk7XG4gICAgICAgIGZvcmNlVXBkYXRlQXZhdGFycyh1c2VyRGF0YS5hdmF0YXIpO1xuICAgICAgfVxuXG4gICAgICAvLyDnq4vljbPlsJ3or5XkuIDmrKHms6jlhozlkozmm7TmlrBcbiAgICAgIHRoaXMuYXZhdGFyTWl4aW4uYXV0b1JlZ2lzdGVyKCk7XG4gICAgICB0aGlzLmF2YXRhck1peGluLmZvcmNlVXBkYXRlKCk7XG5cbiAgICAgIC8vIOebkeWQrEdsb2JhbFVzZXJNYW5hZ2Vy55qE5aS05YOP5Y+Y5pu05LqL5Lu2XG4gICAgICBnbG9iYWxVc2VyTWFuYWdlci5hZGRFdmVudExpc3RlbmVyKCdhdmF0YXInLCBldmVudCA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbQmVhckNoYXRNYW5hZ2VyXSDmo4DmtYvliLDlpLTlg4/lj5jmm7TvvIzlkIzmraXliLDmiYDmnInlnLDmlrk6JywgZXZlbnQubmV3VmFsdWUpO1xuICAgICAgICBjb25zdCB7IGZvcmNlVXBkYXRlQXZhdGFycyB9ID0gcmVxdWlyZSgnLi9tb2R1bGVzL3V0aWxzL0F2YXRhclN5bmMnKTtcbiAgICAgICAgZm9yY2VVcGRhdGVBdmF0YXJzKGV2ZW50Lm5ld1ZhbHVlKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyDlu7bov5/ms6jlhozlt7Lnp7vpmaQgLSBNdXRhdGlvbk9ic2VydmVy5Lya6Ieq5Yqo5qOA5rWL5paw5YWD57SgXG5cbiAgICAgIC8vIOenu+mZpOWumuacn+ajgOafpe+8jOaUueS4uuWfuuS6juS6i+S7tueahOWQjOatpeacuuWItlxuICAgICAgLy8g546w5Zyo5aS05YOP5ZCM5q2l5a6M5YWo5Z+65LqOR2xvYmFsVXNlck1hbmFnZXLnmoTkuovku7bpqbHliqjvvIzkuI3pnIDopoHlrprml7blmahcblxuICAgICAgY29uc29sZS5sb2coJ1tCZWFyQ2hhdE1hbmFnZXJdIOWktOWDj+WQjOatpeW3suWIneWni+WMlicpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbQmVhckNoYXRNYW5hZ2VyXSDlpLTlg4/lkIzmraXliJ3lp4vljJblpLHotKU6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8vIOenu+mZpOS6hiB3YWl0Rm9yVGF2ZXJuSGVscGVyIOaWueazle+8jOWboOS4uuaIkeS7rOebtOaOpeS9v+eUqCB0cmlnZ2VyU2xhc2gg6ICM5LiN5pivIHdpbmRvdy5UYXZlcm5IZWxwZXJcblxuICAvKipcbiAgICog5Yqo5oCB6I635Y+W5b2T5YmN5Y+v55So55qE5LiW55WM5Lmm5ZCN56ewXG4gICAqIOS8mOWFiOe6p++8mjEu6KeS6Imy5Li76KaB5LiW55WM5LmmIDIu5YWo5bGA5LiW55WM5LmmIDMu5aSx6LSl6L+U5ZuebnVsbFxuICAgKiDov5nmmK/kuIDkuKrpgJrnlKjmlrnms5XvvIzlj6/nlKjkuo7ojrflj5bku7vkvZXpnIDopoHkuJbnlYzkuabnmoTlip/og71cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZ2V0Q3VycmVudExvcmVib29rKCk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBsZXQgbG9yZWJvb2tOYW1lOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICAgICAgLy8g5LyY5YWI57qnMTog5bCd6K+V6I635Y+W6KeS6Imy5Y2h57uR5a6a55qE5Li76KaB5LiW55WM5LmmXG4gICAgICBjb25zb2xlLmxvZygn8J+TliDlsJ3or5Xojrflj5bop5LoibLkuLvopoHkuJbnlYzkuaYuLi4nKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgZ2V0Q3VycmVudENoYXJQcmltYXJ5TG9yZWJvb2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIOWFqOWxgOWHveaVsCBnZXRDdXJyZW50Q2hhclByaW1hcnlMb3JlYm9vayDlj6/nlKgnKTtcbiAgICAgICAgICBsb3JlYm9va05hbWUgPSBnZXRDdXJyZW50Q2hhclByaW1hcnlMb3JlYm9vaygpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5OWIOinkuiJsuS4u+imgeS4lueVjOS5puiOt+WPlue7k+aenDonLCBKU09OLnN0cmluZ2lmeShsb3JlYm9va05hbWUpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn4p2MIOWFqOWxgOWHveaVsCBnZXRDdXJyZW50Q2hhclByaW1hcnlMb3JlYm9vayDkuI3lj6/nlKgnKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coYOKdjCDojrflj5bop5LoibLkuJbnlYzkuablvILluLg6ICR7ZXJyb3J9YCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChsb3JlYm9va05hbWUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSDkvb/nlKjop5LoibLkuLvopoHkuJbnlYzkuaY6JywgbG9yZWJvb2tOYW1lKTtcbiAgICAgICAgcmV0dXJuIGxvcmVib29rTmFtZTtcbiAgICAgIH1cblxuICAgICAgLy8g5LyY5YWI57qnMjog5bCd6K+V5YWo5bGA5LiW55WM5LmmXG4gICAgICBjb25zb2xlLmxvZygn8J+MjSDlsJ3or5Xojrflj5blhajlsYDkuJbnlYzkuaYuLi4nKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgZ2V0TG9yZWJvb2tTZXR0aW5ncyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUg5YWo5bGA5Ye95pWwIGdldExvcmVib29rU2V0dGluZ3Mg5Y+v55SoJyk7XG4gICAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSBnZXRMb3JlYm9va1NldHRpbmdzKCk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ/CfjI0g5YWo5bGA5LiW55WM5Lmm6K6+572uOicsIHNldHRpbmdzKTtcbiAgICAgICAgICBjb25zdCBnbG9iYWxMb3JlYm9va3MgPSBzZXR0aW5ncy5zZWxlY3RlZF9nbG9iYWxfbG9yZWJvb2tzO1xuICAgICAgICAgIGlmIChnbG9iYWxMb3JlYm9va3MgJiYgZ2xvYmFsTG9yZWJvb2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUg5L2/55So5YWo5bGA5LiW55WM5LmmOicsIGdsb2JhbExvcmVib29rc1swXSk7XG4gICAgICAgICAgICByZXR1cm4gZ2xvYmFsTG9yZWJvb2tzWzBdO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn4p2MIOayoeacieWQr+eUqOeahOWFqOWxgOS4lueVjOS5picpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn4p2MIOWFqOWxgOWHveaVsCBnZXRMb3JlYm9va1NldHRpbmdzIOS4jeWPr+eUqCcpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZyhg4p2MIOiOt+WPluWFqOWxgOS4lueVjOS5puW8guW4uDogJHtlcnJvcn1gKTtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS53YXJuKCfinYwg5rKh5pyJ5om+5Yiw5Y+v55So55qE5LiW55WM5LmmJyk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIOiOt+WPluS4lueVjOS5puWksei0pTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5Yid5aeL5YyW5LqL5Lu255uR5ZCs5ZmoXG4gICAqL1xuICBwcml2YXRlIGluaXRpYWxpemVFdmVudExpc3RlbmVycygpOiB2b2lkIHtcbiAgICAvLyDkvb/nlKjpobnnm67moIflh4bnmoRqUXVlcnnmqKHlvI/nrYnlvoVET03liqDovb3lrozmiJBcbiAgICAkKCgpID0+IHtcbiAgICAgIHRoaXMuc2V0dXBFdmVudExpc3RlbmVycygpO1xuICAgICAgLy8g5aeU5omY5rOo5YaM77ya56Gu5L+d6L2s6LSm5rCU5rOh5Zyo6aaW5qyh5riy5p+T5Y2z5Y+v54K55Ye7XG4gICAgICB0aGlzLmluaXRpYWxpemVUcmFuc2ZlckNsaWNrRGVsZWdhdGlvbigpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOiuvue9ruaJgOacieS6i+S7tuebkeWQrOWZqFxuICAgKi9cbiAgcHJpdmF0ZSBzZXR1cEV2ZW50TGlzdGVuZXJzKCk6IHZvaWQge1xuICAgIC8vIOWKoOWPt+aMiemSrueCueWHu1xuICAgIGNvbnN0IHBsdXNCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGx1c0J0bicpO1xuICAgIGNvbnN0IHBsdXNNZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsdXNNZW51Jyk7XG5cbiAgICBpZiAocGx1c0J0biAmJiBwbHVzTWVudSkge1xuICAgICAgcGx1c0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRoaXMudG9nZ2xlUGx1c01lbnUoKTtcbiAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdlbW9qaScpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8g5Yqg5Y+36I+c5Y2V6aG554K55Ye7XG4gICAgY29uc3QgbWVudUl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lbnUtaXRlbScpO1xuICAgIG1lbnVJdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgY29uc3QgdHlwZSA9IChlLmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQpLmRhdGFzZXQudHlwZTtcblxuICAgICAgICBpZiAodHlwZSkge1xuICAgICAgICAgIHRoaXMuaGFuZGxlTWVudUl0ZW1DbGljayh0eXBlKTtcbiAgICAgICAgICAvLyDpn7PmlYjlnKjlhbfkvZPnmoTlpITnkIblh73mlbDkuK3mkq3mlL7vvIzpgb/lhY3ph43lpI1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyDovpPlhaXmoYbkuovku7bnm5HlkKxcbiAgICBjb25zdCBpbnB1dEZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0RmllbGQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGlmIChpbnB1dEZpZWxkKSB7XG4gICAgICAvLyDlm57ovabplK7lpITnkIZcbiAgICAgIGlucHV0RmllbGQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCBlID0+IHtcbiAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgdGhpcy5oYW5kbGVFbnRlcktleSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8g6L6T5YWl5Y+Y5YyW55uR5ZCs77yI5pm66IO96KGo5oOF5YyF5bu66K6u77yJXG4gICAgICBpbnB1dEZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZSA9PiB7XG4gICAgICAgIHRoaXMuaGFuZGxlSW5wdXRDaGFuZ2UoZSk7XG4gICAgICB9KTtcblxuICAgICAgLy8g5aSx5Y6754Sm54K55pe26ZqQ6JeP5bu66K6uXG4gICAgICBpbnB1dEZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoKSA9PiB7XG4gICAgICAgIC8vIOW7tui/n+makOiXj++8jOWFgeiuuOeCueWHu+W7uuiurlxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLmhpZGVTdGlja2VyU3VnZ2VzdGlvbnMoKTtcbiAgICAgICAgfSwgMjAwKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIOWPkemAgeaMiemSrueCueWHu1xuICAgIGNvbnN0IHNlbmRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VuZEJ0bicpO1xuICAgIGlmIChzZW5kQnRuKSB7XG4gICAgICBzZW5kQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB0aGlzLmhhbmRsZVNlbmRDbGljaygpO1xuICAgICAgICAvLyDpn7PmlYjlt7LlnKhoYW5kbGVTZW5kQ2xpY2vkuK3mkq3mlL7vvIzml6DpnIDph43lpI1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIOWktOmDqOaMiemSrueCueWHu1xuICAgIGNvbnN0IGhvbWVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaG9tZS1idG4nKTtcbiAgICBjb25zdCBkaWFyeUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kaWFyeS1idG4nKTtcbiAgICBjb25zdCBjYWxsQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhbGwtYnRuJyk7XG5cbiAgICBpZiAoaG9tZUJ0bikge1xuICAgICAgaG9tZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5zaG93Q2hhdExpc3QoKTtcbiAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdjbGljaycpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGRpYXJ5QnRuKSB7XG4gICAgICBkaWFyeUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5zaG93RGlhcnlJbnRlcmZhY2UoKTtcbiAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdjbGljaycpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGNhbGxCdG4pIHtcbiAgICAgIGNhbGxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuc2hvd0NhbGxJbnRlcmZhY2UoKTtcbiAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdjbGljaycpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8g5aS05YOP54K55Ye7XG4gICAgY29uc3QgaGVhZGVyQXZhdGFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlYWRlckF2YXRhcicpO1xuICAgIGlmIChoZWFkZXJBdmF0YXIpIHtcbiAgICAgIGhlYWRlckF2YXRhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVBdmF0YXJDbGljaygpO1xuICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5U291bmQoJ2F2YXRhcicpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8g54K55Ye75YW25LuW5Zyw5pa55YWz6Zet6I+c5Y2VIC0g5L2/55So5bu26L+f5omn6KGM6YG/5YWN5LiO5oyJ6ZKu54K55Ye75Yay56qBXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgICAgY29uc3Qgc3RpY2tlclNlbGVjdG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0aWNrZXJTZWxlY3RvcicpO1xuXG4gICAgICAvLyDkvb/nlKggc2V0VGltZW91dCDnoa7kv53lnKjmjInpkq7ngrnlh7vkuovku7blpITnkIblrozmiJDlkI7lho3miafooYxcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAvLyDlpoLmnpzngrnlh7vnmoTkuI3mmK/liqDlj7fmjInpkq7jgIHliqDlj7foj5zljZXmiJbooajmg4XljIXpgInmi6nlmajvvIzliJnlhbPpl63liqDlj7foj5zljZVcbiAgICAgICAgaWYgKCFwbHVzQnRuPy5jb250YWlucyh0YXJnZXQpICYmICFwbHVzTWVudT8uY29udGFpbnModGFyZ2V0KSAmJiAhc3RpY2tlclNlbGVjdG9yPy5jb250YWlucyh0YXJnZXQpKSB7XG4gICAgICAgICAgdGhpcy5oaWRlUGx1c01lbnUoKTtcbiAgICAgICAgfVxuICAgICAgfSwgMCk7XG4gICAgfSk7XG5cbiAgICAvLyDnm5HlkKzkuKrkurrkuLvpobXmmL7npLrkuovku7ZcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzaG93UHJvZmlsZVBhZ2UnLCAoZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgICBjb25zdCBjdXN0b21FdmVudCA9IGV2ZW50IGFzIEN1c3RvbUV2ZW50O1xuICAgICAgY29uc29sZS5sb2coJ/Cfk7Eg5o6l5pS25Yiw5pi+56S65Liq5Lq65Li76aG15LqL5Lu2OicsIGN1c3RvbUV2ZW50LmRldGFpbCk7XG4gICAgICB0aGlzLmhhbmRsZVNob3dQcm9maWxlUGFnZShjdXN0b21FdmVudC5kZXRhaWwpO1xuICAgIH0pO1xuXG4gICAgLy8g55uR5ZCs5bqV6YOo5a+86Iiq6aG16Z2i5YiH5o2i5LqL5Lu277yI57uf5LiA55SxIEJvdHRvbU5hdmlnYXRpb24g57uE5Lu25YiG5Y+R77yJXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncGFnZVN3aXRjaCcsIChlOiBFdmVudCkgPT4ge1xuICAgICAgY29uc3QgY3VzdG9tRXZlbnQgPSBlIGFzIEN1c3RvbUV2ZW50O1xuICAgICAgY29uc3QgeyBmcm9tLCB0byB9ID0gY3VzdG9tRXZlbnQuZGV0YWlsO1xuICAgICAgY29uc29sZS5sb2coYPCflIQg6aG16Z2i5YiH5o2iOiAke2Zyb219IC0+ICR7dG99YCk7XG5cbiAgICAgIC8vIOe7n+S4gOeCueWHu+WPjemmiFxuICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdjbGljaycpO1xuXG4gICAgICBpZiAodG8gPT09ICdwcm9maWxlJykge1xuICAgICAgICB0aGlzLnN3aXRjaFRvUHJvZmlsZVBhZ2UoKTtcbiAgICAgIH0gZWxzZSBpZiAodG8gPT09ICdjaGF0TGlzdCcpIHtcbiAgICAgICAgdGhpcy5zd2l0Y2hUb0NoYXRMaXN0UGFnZSgpO1xuICAgICAgfSBlbHNlIGlmICh0byA9PT0gJ2ZlZWQnKSB7XG4gICAgICAgIHRoaXMuc3dpdGNoVG9EeW5hbWljc1BhZ2UoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIOinkuiJsuWIh+aNouebkeWQrFxuICAgIHRoaXMuaW5pdGlhbGl6ZUNoYXJhY3RlckNoYW5nZUxpc3RlbmVyKCk7XG5cbiAgICAvLyDliJ3lp4vljJborr7nva7nm7jlhbPlip/og71cbiAgICB0aGlzLmluaXRpYWxpemVTZXR0aW5ncygpLmNhdGNoKGVycm9yID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+iuvue9ruWIneWni+WMluWksei0pTonLCBlcnJvcik7XG4gICAgfSk7XG5cbiAgICAvLyDliJ3lp4vljJbliqjmgIHnrqHnkIblmahcbiAgICBpZiAodGhpcy5keW5hbWljc01hbmFnZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn46sIOWIneWni+WMluWKqOaAgeeuoeeQhuWZqC4uLicpO1xuICAgICAgdGhpcy5keW5hbWljc01hbmFnZXIuaW5pdGlhbGl6ZSgpO1xuICAgICAgY29uc29sZS5sb2coJ+KchSDliqjmgIHnrqHnkIblmajliJ3lp4vljJblrozmiJAnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5Yid5aeL5YyW6KeS6Imy5YiH5o2i55uR5ZCsXG4gICAqL1xuICBwcml2YXRlIGluaXRpYWxpemVDaGFyYWN0ZXJDaGFuZ2VMaXN0ZW5lcigpOiB2b2lkIHtcbiAgICBjb25zdCBjdXJyZW50Q2hhcmFjdGVySWQgPSB0aGlzLmdldEN1cnJlbnRDaGFyYWN0ZXJJZCgpO1xuICAgIGNvbnNvbGUubG9nKGDwn5SEIOinkuiJsuWIh+aNouebkeWQrOW3suWIneWni+WMlu+8jOW9k+WJjeinkuiJsjogJHtjdXJyZW50Q2hhcmFjdGVySWR9YCk7XG5cbiAgICAvLyDnm5HlkKzphZLppobnmoTop5LoibLliIfmjaLkuovku7ZcbiAgICB0cnkge1xuICAgICAgLy8g5pa55rOVMTog55uR5ZCs6YWS6aaG55qEQ0hBUkFDVEVSX0NIQU5HRUTkuovku7ZcbiAgICAgIGlmICh0eXBlb2YgZXZlbnRTb3VyY2UgIT09ICd1bmRlZmluZWQnICYmIGV2ZW50U291cmNlLm9uKSB7XG4gICAgICAgIGV2ZW50U291cmNlLm9uKCdDSEFSQUNURVJfQ0hBTkdFRCcsICgpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+UhCDmo4DmtYvliLDop5LoibLliIfmjaLkuovku7YgKENIQVJBQ1RFUl9DSEFOR0VEKScpO1xuICAgICAgICAgIHRoaXMuaGFuZGxlQ2hhcmFjdGVyQ2hhbmdlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zb2xlLmxvZygn4pyFIOW3suebkeWQrCBDSEFSQUNURVJfQ0hBTkdFRCDkuovku7YnKTtcbiAgICAgIH1cblxuICAgICAgLy8g5pa55rOVMjog55uR5ZCsZG9jdW1lbnTnmoToh6rlrprkuYnkuovku7ZcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYXJhY3RlckNoYW5nZWQnLCAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SEIOajgOa1i+WIsOinkuiJsuWIh+aNouS6i+S7tiAoY2hhcmFjdGVyQ2hhbmdlZCknKTtcbiAgICAgICAgdGhpcy5oYW5kbGVDaGFyYWN0ZXJDaGFuZ2UoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyDmlrnms5UzOiDnm5HlkKzphZLppoblj6/og73nmoTlhbbku5bkuovku7ZcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYXJhY3Rlcl9sb2FkZWQnLCAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SEIOajgOa1i+WIsOinkuiJsuWKoOi9veS6i+S7tiAoY2hhcmFjdGVyX2xvYWRlZCknKTtcbiAgICAgICAgdGhpcy5oYW5kbGVDaGFyYWN0ZXJDaGFuZ2UoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zb2xlLmxvZygn4pyFIOinkuiJsuWIh+aNouS6i+S7tuebkeWQrOW3suiuvue9ricpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCforr7nva7op5LoibLliIfmjaLnm5HlkKzlpLHotKU6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5blvZPliY3op5LoibJJRFxuICAgKi9cbiAgcHJpdmF0ZSBnZXRDdXJyZW50Q2hhcmFjdGVySWQoKTogc3RyaW5nIHtcbiAgICB0cnkge1xuICAgICAgLy8g5L2/55So5LiOY2hhcmFjdGVyU3RvcmFnZeebuOWQjOeahOmAu+i+kVxuICAgICAgaWYgKHR5cGVvZiBUYXZlcm5IZWxwZXIgIT09ICd1bmRlZmluZWQnICYmIFRhdmVybkhlbHBlci5nZXRDaGFyRGF0YSkge1xuICAgICAgICBjb25zdCBjaGFyRGF0YSA9IFRhdmVybkhlbHBlci5nZXRDaGFyRGF0YSgpO1xuICAgICAgICBpZiAoY2hhckRhdGEpIHtcbiAgICAgICAgICAvLyDkvJjlhYjkvb/nlKhuYW1l77yM6YG/5YWNYXZhdGFy55qELnBuZ+WQjue8gFxuICAgICAgICAgIHJldHVybiBjaGFyRGF0YS5uYW1lIHx8IGNoYXJEYXRhLmF2YXRhciB8fCAnZGVmYXVsdCc7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8g5aSH55So5pa55qGI77ya5bCd6K+V5YWo5bGA5Ye95pWwXG4gICAgICBpZiAodHlwZW9mIGdldENoYXJEYXRhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGNvbnN0IGNoYXJEYXRhID0gZ2V0Q2hhckRhdGEoKTtcbiAgICAgICAgaWYgKGNoYXJEYXRhKSB7XG4gICAgICAgICAgLy8g5LyY5YWI5L2/55SobmFtZe+8jOmBv+WFjWF2YXRhcueahC5wbmflkI7nvIBcbiAgICAgICAgICByZXR1cm4gY2hhckRhdGEubmFtZSB8fCBjaGFyRGF0YS5hdmF0YXIgfHwgJ2RlZmF1bHQnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gJ2RlZmF1bHQnO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfojrflj5bop5LoibJJROWksei0pTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gJ2RlZmF1bHQnO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlpITnkIbop5LoibLliIfmjaJcbiAgICovXG4gIHByaXZhdGUgaGFuZGxlQ2hhcmFjdGVyQ2hhbmdlKCk6IHZvaWQge1xuICAgIC8vIOa4hemZpOS5i+WJjeeahOWumuaXtuWZqO+8jOWunueOsOmYsuaKllxuICAgIGlmICh0aGlzLmNoYXJhY3RlckNoYW5nZVRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNoYXJhY3RlckNoYW5nZVRpbWVvdXQpO1xuICAgIH1cblxuICAgIC8vIOiuvue9ruaWsOeahOWumuaXtuWZqFxuICAgIHRoaXMuY2hhcmFjdGVyQ2hhbmdlVGltZW91dCA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ/CflIQg5aSE55CG6KeS6Imy5YiH5o2i77yM6YeN5paw5Yqg6L296IGU57O75Lq65pWw5o2uLi4uJyk7XG5cbiAgICAgIC8vIOa4hemZpOinkuiJsklE57yT5a2Y77yM56Gu5L+d6I635Y+W5pyA5paw55qE6KeS6Imy5L+h5oGvXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IGNsZWFyQ2hhcmFjdGVySWRDYWNoZSB9ID0gcmVxdWlyZSgnLi9tb2R1bGVzL3V0aWxzL2NoYXJhY3RlclN0b3JhZ2UnKTtcbiAgICAgICAgY2xlYXJDaGFyYWN0ZXJJZENhY2hlKCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfmuIXpmaTop5LoibJJROe8k+WtmOWksei0pTonLCBlcnJvcik7XG4gICAgICB9XG5cbiAgICAgIC8vIOmHjeaWsOWKoOi9veiBlOezu+S6uuaVsOaNrlxuICAgICAgYXdhaXQgdGhpcy5jaGF0TGlzdE1hbmFnZXIucmVsb2FkQ29udGFjdHMoKTtcblxuICAgICAgLy8g6YeN5paw5Yqg6L295aOB57q46K6+572uXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IFdhbGxwYXBlck1hbmFnZXIgfSA9IGF3YWl0IGltcG9ydCgnLi9tb2R1bGVzL2NoYXRMaXN0L3dhbGxwYXBlck1hbmFnZXInKTtcbiAgICAgICAgY29uc3Qgd2FsbHBhcGVyTWFuYWdlciA9IFdhbGxwYXBlck1hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcbiAgICAgICAgd2FsbHBhcGVyTWFuYWdlci5oYW5kbGVDaGFyYWN0ZXJDaGFuZ2UoKTtcbiAgICAgICAgY29uc29sZS5sb2coJ/CflrzvuI8g6IGK5aSp5YiX6KGo5aOB57q46K6+572u5bey6YeN5paw5Yqg6L29Jyk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfph43mlrDliqDovb3ogYrlpKnliJfooajlo4Hnurjorr7nva7lpLHotKU6JywgZXJyb3IpO1xuICAgICAgfVxuXG4gICAgICAvLyDph43mlrDliqDovb3ogYrlpKnnqpflj6Plo4Hnurjorr7nva5cbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICh0aGlzLmNoYXRXYWxscGFwZXJNYW5hZ2VyKSB7XG4gICAgICAgICAgdGhpcy5jaGF0V2FsbHBhcGVyTWFuYWdlci5oYW5kbGVDaGFyYWN0ZXJDaGFuZ2UoKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+WvO+4jyDogYrlpKnnqpflj6Plo4Hnurjorr7nva7lt7Lph43mlrDliqDovb0nKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign6YeN5paw5Yqg6L296IGK5aSp56qX5Y+j5aOB57q46K6+572u5aSx6LSlOicsIGVycm9yKTtcbiAgICAgIH1cblxuICAgICAgLy8g5aaC5p6c5b2T5YmN5q2j5Zyo5pi+56S66IGK5aSp5YiX6KGo77yM5Yi35paw5pi+56S6XG4gICAgICBjb25zdCBjaGF0TGlzdENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGF0TGlzdEludGVyZmFjZScpO1xuICAgICAgaWYgKGNoYXRMaXN0Q29udGFpbmVyICYmIGNoYXRMaXN0Q29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfk4sg5Yi35paw6IGK5aSp5YiX6KGo5pi+56S6Jyk7XG4gICAgICAgIHRoaXMuY2hhdExpc3RNYW5hZ2VyLnJlZnJlc2hDaGF0TGlzdCgpO1xuICAgICAgfVxuXG4gICAgICAvLyDpgJrnn6XlpJbpg6jmqKHlnZfop5LoibLliIfmjaLvvIhqUXVlcnnkuovku7bvvInvvIzku6Xkvr/ngbXliqjlspvnrYnmqKHlnZfph43mlrDliJ3lp4vljJZcbiAgICAgIHRyeSB7XG4gICAgICAgICQoZG9jdW1lbnQpLnRyaWdnZXIoJ2NoYXJhY3RlckNoYW5nZScpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCfop6blj5EgY2hhcmFjdGVyQ2hhbmdlIOS6i+S7tuWksei0pTonLCBlcnJvcik7XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKCfinIUg6KeS6Imy5YiH5o2i5aSE55CG5a6M5oiQJyk7XG4gICAgfSwgMzAwKTsgLy8gMzAw5q+r56eS55qE6Ziy5oqW5bu26L+fXG4gIH1cblxuICAvKipcbiAgICog5Yid5aeL5YyW6K6+572u55u45YWz5Yqf6IO9XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVTZXR0aW5ncygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyDku47lrZjlgqjkuK3liqDovb3ot6jogYrlpKnlj5HpgIHorr7nva5cbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBTdG9yYWdlTWFuYWdlciB9ID0gYXdhaXQgaW1wb3J0KCcuL21vZHVsZXMvcHJvZmlsZS9TdG9yYWdlTWFuYWdlcicpO1xuICAgICAgY29uc3Qgc3RvcmFnZU1hbmFnZXIgPSBTdG9yYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuXG4gICAgICBjb25zdCBzZXR0aW5ncyA9IHN0b3JhZ2VNYW5hZ2VyLmxvYWRTZXR0aW5ncygpO1xuICAgICAgdGhpcy5jcm9zc0NoYXRTZW5kRW5hYmxlZCA9IHNldHRpbmdzLmNyb3NzQ2hhdFNlbmRFbmFibGVkO1xuICAgICAgY29uc29sZS5sb2coJ/CflIQg6Leo6IGK5aSp5Y+R6YCB6K6+572u5bey5Yqg6L29OicsIHRoaXMuY3Jvc3NDaGF0U2VuZEVuYWJsZWQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfliqDovb3ot6jogYrlpKnlj5HpgIHorr7nva7lpLHotKU6JywgZXJyb3IpO1xuICAgICAgdGhpcy5jcm9zc0NoYXRTZW5kRW5hYmxlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIOebkeWQrOiuvue9ruabtOaWsOS6i+S7tlxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3NldHRpbmdzVXBkYXRlZCcsIChldmVudDogRXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IHsgY3Jvc3NDaGF0U2VuZEVuYWJsZWQgfSA9IChldmVudCBhcyBDdXN0b21FdmVudCkuZGV0YWlsO1xuXG4gICAgICBpZiAodHlwZW9mIGNyb3NzQ2hhdFNlbmRFbmFibGVkID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgdGhpcy5jcm9zc0NoYXRTZW5kRW5hYmxlZCA9IGNyb3NzQ2hhdFNlbmRFbmFibGVkO1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UhCDot6jogYrlpKnlj5HpgIHorr7nva7lt7LlkIzmraU6JywgY3Jvc3NDaGF0U2VuZEVuYWJsZWQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIh+aNouWIsOaMh+WumumhtemdolxuICAgKi9cbiAgcHJpdmF0ZSBzd2l0Y2hUb1BhZ2UocGFnZTogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coYPCflIQg5YiH5o2i5Yiw6aG16Z2iOiAke3BhZ2V9YCk7XG5cbiAgICAvLyDpmpDol4/miYDmnInnlYzpnaJcbiAgICB0aGlzLmhpZGVBbGxJbnRlcmZhY2VzKCk7XG5cbiAgICAvLyDmmL7npLrlr7nlupTnlYzpnaJcbiAgICBzd2l0Y2ggKHBhZ2UpIHtcbiAgICAgIGNhc2UgJ2NoYXQtbGlzdCc6XG4gICAgICAgIHRoaXMuc2hvd0NoYXRMaXN0KCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZHluYW1pY3MnOlxuICAgICAgICB0aGlzLnNob3dEeW5hbWljc0ludGVyZmFjZSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3Byb2ZpbGUnOlxuICAgICAgICB0aGlzLnNob3dQcm9maWxlSW50ZXJmYWNlKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgY29uc29sZS53YXJuKGDmnKrnn6XpobXpnaI6ICR7cGFnZX1gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5YiH5o2i5Yiw6IGK5aSp5YiX6KGo6aG16Z2iXG4gICAqL1xuICBwcml2YXRlIHN3aXRjaFRvQ2hhdExpc3RQYWdlKCk6IHZvaWQge1xuICAgIHRoaXMuaGlkZUFsbEludGVyZmFjZXMoKTtcbiAgICB0aGlzLnNob3dDaGF0TGlzdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIh+aNouWIsOaIkeeahOmhtemdolxuICAgKi9cbiAgcHJpdmF0ZSBzd2l0Y2hUb1Byb2ZpbGVQYWdlKCk6IHZvaWQge1xuICAgIHRoaXMuaGlkZUFsbEludGVyZmFjZXMoKTtcbiAgICB0aGlzLnNob3dQcm9maWxlSW50ZXJmYWNlKCk7XG4gIH1cblxuICAvKipcbiAgICog5YiH5o2i5Yiw5Yqo5oCB6aG16Z2iXG4gICAqL1xuICBwcml2YXRlIHN3aXRjaFRvRHluYW1pY3NQYWdlKCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKCfwn5SEIOWIh+aNouWIsOWKqOaAgemhtemdoicpO1xuICAgIHRoaXMuaGlkZUFsbEludGVyZmFjZXMoKTtcbiAgICB0aGlzLnNob3dEeW5hbWljc0ludGVyZmFjZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOaYvuekuuWKqOaAgeeVjOmdolxuICAgKi9cbiAgcHJpdmF0ZSBzaG93RHluYW1pY3NJbnRlcmZhY2UoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ/Cfk7Eg5YeG5aSH5pi+56S65Yqo5oCB55WM6Z2iLi4uJyk7XG5cbiAgICBpZiAodGhpcy5keW5hbWljc01hbmFnZXIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIOaYvuekuuWKqOaAgemhtemdolxuICAgICAgICB0aGlzLmR5bmFtaWNzTWFuYWdlci5zaG93RHluYW1pY3NJbnRlcmZhY2UoKTtcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSDliqjmgIHnlYzpnaLmmL7npLrmiJDlip8nKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+aYvuekuuWKqOaAgeeVjOmdouWksei0pTonLCBlcnJvcik7XG4gICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXlTb3VuZCgnZXJyb3InKTtcblxuICAgICAgICAvLyDlm57pgIDliLDogYrlpKnliJfooahcbiAgICAgICAgdGhpcy5zd2l0Y2hUb1BhZ2UoJ2NoYXQtbGlzdCcpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwg5Yqo5oCB6aG16Z2i5qih5Z2X5pyq5Yid5aeL5YyWJyk7XG4gICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5U291bmQoJ2Vycm9yJyk7XG5cbiAgICAgIC8vIOaYvuekuumUmeivr+aPkOekuuW5tuWbnumAgOWIsOiBiuWkqeWIl+ihqFxuICAgICAgaWYgKHR5cGVvZiB0b2FzdHIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRvYXN0ci5lcnJvcign5Yqo5oCB6aG16Z2i5qih5Z2X5pyq5Yid5aeL5YyW77yM6K+35Yi35paw6aG16Z2i6YeN6K+VJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIOebtOaOpeWbnumAgOWIsOiBiuWkqeWIl+ihqO+8jOmBv+WFjeatu+W+queOr1xuICAgICAgdGhpcy5zd2l0Y2hUb1BhZ2UoJ2NoYXQtbGlzdCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDpmpDol4/miYDmnInnlYzpnaJcbiAgICovXG4gIHByaXZhdGUgaGlkZUFsbEludGVyZmFjZXMoKTogdm9pZCB7XG4gICAgLy8g6ZqQ6JeP6IGK5aSp55WM6Z2iXG4gICAgY29uc3QgY2hhdEludGVyZmFjZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGF0SW50ZXJmYWNlJyk7XG4gICAgaWYgKGNoYXRJbnRlcmZhY2UpIHtcbiAgICAgIGNoYXRJbnRlcmZhY2Uuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9XG5cbiAgICAvLyDpmpDol4/ogYrlpKnliJfooahcbiAgICB0aGlzLmNoYXRMaXN0TWFuYWdlci5oaWRlQ2hhdExpc3RJbnRlcmZhY2UoKTtcblxuICAgIC8vIOmakOiXj+aIkeeahOmhtemdolxuICAgIGlmICh0aGlzLnByb2ZpbGVJbnRlcmZhY2UpIHtcbiAgICAgIHRoaXMucHJvZmlsZUludGVyZmFjZS5oaWRlKCk7XG4gICAgfVxuXG4gICAgLy8g6ZqQ6JeP5Yqo5oCB6aG16Z2iXG4gICAgaWYgKHRoaXMuZHluYW1pY3NNYW5hZ2VyKSB7XG4gICAgICB0aGlzLmR5bmFtaWNzTWFuYWdlci5oaWRlRHluYW1pY3NJbnRlcmZhY2UoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5pi+56S65oiR55qE6aG16Z2i55WM6Z2iXG4gICAqL1xuICBwcml2YXRlIHNob3dQcm9maWxlSW50ZXJmYWNlKCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKCfwn5GkIOWHhuWkh+aYvuekuuS4quS6uuS4u+mhteeVjOmdoi4uLicpO1xuXG4gICAgaWYgKHRoaXMucHJvZmlsZUludGVyZmFjZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8g5pi+56S65Liq5Lq65Li76aG1XG4gICAgICAgIHRoaXMucHJvZmlsZUludGVyZmFjZS5zaG93KCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinIUg5Liq5Lq65Li76aG155WM6Z2i5pi+56S65oiQ5YqfJyk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfmmL7npLrkuKrkurrkuLvpobXnlYzpnaLlpLHotKU6JywgZXJyb3IpO1xuICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5U291bmQoJ2Vycm9yJyk7XG5cbiAgICAgICAgLy8g5Zue6YCA5Yiw6IGK5aSp5YiX6KGoXG4gICAgICAgIHRoaXMuc3dpdGNoVG9QYWdlKCdjaGF0LWxpc3QnKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIOaIkeeahOmhtemdouaooeWdl+acquWIneWni+WMlicpO1xuICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdlcnJvcicpO1xuXG4gICAgICAvLyDmmL7npLrplJnor6/mj5DnpLrlubblm57pgIDliLDogYrlpKnliJfooahcbiAgICAgIGlmICh0eXBlb2YgdG9hc3RyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0b2FzdHIuZXJyb3IoJ+S4quS6uuS4u+mhteaooeWdl+acquWIneWni+WMlu+8jOivt+WIt+aWsOmhtemdoumHjeivlScpO1xuICAgICAgfVxuXG4gICAgICAvLyDnm7TmjqXlm57pgIDliLDogYrlpKnliJfooajvvIzpgb/lhY3mrbvlvqrnjq9cbiAgICAgIHRoaXMuc3dpdGNoVG9QYWdlKCdjaGF0LWxpc3QnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5aSE55CG5pi+56S65Liq5Lq65Li76aG15LqL5Lu2XG4gICAqIEBwYXJhbSBkZXRhaWwg5LqL5Lu26K+m5oOFXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVNob3dQcm9maWxlUGFnZShkZXRhaWw6IHsgc291cmNlOiBzdHJpbmcgfSk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKGDwn5GkIOaYvuekuuS4quS6uuS4u+mhtSAtIOadpea6kDogJHtkZXRhaWwuc291cmNlfWApO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIOaSreaUvueCueWHu+mfs+aViFxuICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdjbGljaycpO1xuXG4gICAgICAvLyDliIfmjaLliLDkuKrkurrkuLvpobXnlYzpnaJcbiAgICAgIHRoaXMuc3dpdGNoVG9QYWdlKCdwcm9maWxlJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+aYvuekuuS4quS6uuS4u+mhteWksei0pTonLCBlcnJvcik7XG4gICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5U291bmQoJ2Vycm9yJyk7XG5cbiAgICAgIC8vIOaYvuekuumUmeivr+aPkOekulxuICAgICAgaWYgKHR5cGVvZiB0b2FzdHIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRvYXN0ci5lcnJvcign5peg5rOV5omT5byA5Liq5Lq65Li76aG177yM6K+356iN5ZCO6YeN6K+VJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOa4hemZpOS4lueVjOS5puinkuiJsue8k+WtmFxuICAgKi9cbiAgcHVibGljIGFzeW5jIGNsZWFyTG9yZWJvb2tDaGFyYWN0ZXJDYWNoZSgpOiBQcm9taXNlPHsgY2xlYXJlZDogbnVtYmVyOyB0b3RhbDogbnVtYmVyIH0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29udGFjdE1hbmFnZXIgPSB0aGlzLmNoYXRMaXN0TWFuYWdlci5nZXRDb250YWN0TWFuYWdlcigpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udGFjdE1hbmFnZXIuY2xlYXJMb3JlYm9va0NoYXJhY3RlckNhY2hlKCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKGDwn5eR77iPIFtCZWFyQ2hhdE1hbmFnZXJdIOS4lueVjOS5puinkuiJsue8k+WtmOa4hemZpOWujOaIkDogJHtyZXN1bHQuY2xlYXJlZH0vJHtyZXN1bHQudG90YWx9YCk7XG5cbiAgICAgIC8vIOaSreaUvuaIkOWKn+mfs+aViFxuICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdzdWNjZXNzJyk7XG5cbiAgICAgIC8vIOaYvuekuuaIkOWKn+aPkOekulxuICAgICAgaWYgKHR5cGVvZiB0b2FzdHIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmIChyZXN1bHQuY2xlYXJlZCA+IDApIHtcbiAgICAgICAgICB0b2FzdHIuc3VjY2Vzcyhg5bey5riF6ZmkICR7cmVzdWx0LmNsZWFyZWR9IOS4quS4lueVjOS5puinkuiJsueahOe8k+WtmGApO1xuICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC50b3RhbCA+IDApIHtcbiAgICAgICAgICB0b2FzdHIuaW5mbyhg5LiW55WM5Lmm5Lit5pyJICR7cmVzdWx0LnRvdGFsfSDkuKrop5LoibLvvIzkvYbmsqHmnInoh6rlrprkuYnlpLTlg4/nvJPlrZjpnIDopoHmuIXpmaRgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b2FzdHIuaW5mbygn5LiW55WM5Lmm5Lit5rKh5pyJ5om+5Yiw6IGU57O75Lq6Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIFtCZWFyQ2hhdE1hbmFnZXJdIOa4hemZpOS4lueVjOS5puinkuiJsue8k+WtmOWksei0pTonLCBlcnJvcik7XG5cbiAgICAgIC8vIOaSreaUvumUmeivr+mfs+aViFxuICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdlcnJvcicpO1xuXG4gICAgICAvLyDmmL7npLrplJnor6/mj5DnpLpcbiAgICAgIGlmICh0eXBlb2YgdG9hc3RyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0b2FzdHIuZXJyb3IoJ+a4hemZpOS4lueVjOS5puinkuiJsue8k+WtmOWksei0pe+8jOivt+eojeWQjumHjeivlScpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4geyBjbGVhcmVkOiAwLCB0b3RhbDogMCB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bkuJbnlYzkuabop5LoibLnvJPlrZjnu5/orqHkv6Hmga9cbiAgICovXG4gIHB1YmxpYyBnZXRMb3JlYm9va0NhY2hlU3RhdHMoKToge1xuICAgIHdvcmxkYm9va0NvbnRhY3RzOiBudW1iZXI7XG4gICAgY2FjaGVkQ29udGFjdHM6IG51bWJlcjtcbiAgICBjYWNoZWRXb3JsZGJvb2tDb250YWN0czogbnVtYmVyO1xuICB9IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29udGFjdE1hbmFnZXIgPSB0aGlzLmNoYXRMaXN0TWFuYWdlci5nZXRDb250YWN0TWFuYWdlcigpO1xuICAgICAgcmV0dXJuIGNvbnRhY3RNYW5hZ2VyLmdldExvcmVib29rQ2FjaGVTdGF0cygpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgW0JlYXJDaGF0TWFuYWdlcl0g6I635Y+W5LiW55WM5Lmm57yT5a2Y57uf6K6h5aSx6LSlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiB7IHdvcmxkYm9va0NvbnRhY3RzOiAwLCBjYWNoZWRDb250YWN0czogMCwgY2FjaGVkV29ybGRib29rQ29udGFjdHM6IDAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5LuO546w5pyJ5pWw5o2u5Yid5aeL5YyWXG4gICAqL1xuICBwcml2YXRlIGluaXRpYWxpemVGcm9tRXhpc3RpbmdEYXRhKCk6IHZvaWQge1xuICAgIC8vIOWwneivleS7juW9k+WJjea2iOaBr+S4reino+aekOaVsOaNrlxuICAgIGlmICh0eXBlb2YgZ2V0Q2hhdE1lc3NhZ2VzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IGdldENoYXRNZXNzYWdlcygnMC17e2xhc3RNZXNzYWdlSWR9fScpO1xuICAgICAgICB0aGlzLnBhcnNlRXhpc3RpbmdNZXNzYWdlcyhtZXNzYWdlcyk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfojrflj5bnjrDmnInmtojmga/lpLHotKU6JywgZXJyb3IpO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVEZWZhdWx0RGF0YSgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLndhcm4oJ2dldENoYXRNZXNzYWdlc+WHveaVsOS4jeWPr+eUqO+8jOS9v+eUqOm7mOiupOaVsOaNricpO1xuICAgICAgdGhpcy5pbml0aWFsaXplRGVmYXVsdERhdGEoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog6Kej5p6Q546w5pyJ5raI5oGvXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHBhcnNlRXhpc3RpbmdNZXNzYWdlcyhtZXNzYWdlczogYW55W10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyDmlrnmoYhC77ya5Yid5aeL5YyW6Zi25q615ZCI5bm25omA5pyJ5qW85bGCXG4gICAgY29uc29sZS5sb2coJ/CflIQg5byA5aeL6Kej5p6Q546w5pyJ5raI5oGv77yM5ZCI5bm25omA5pyJ5qW85bGCLi4uJyk7XG5cbiAgICAvLyAxLiDmlLbpm4bmiYDmnIkgYmVhciDmrrVcbiAgICBjb25zdCBiZWFyQmxvY2tzID0gdGhpcy5tZXNzYWdlUGFyc2VyLmV4dHJhY3RBbGxCZWFyQ29udGVudHMobWVzc2FnZXMpO1xuXG4gICAgaWYgKGJlYXJCbG9ja3MubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ+acquaJvuWIsOS7u+S9lUJlYXLlhoXlrrnlnZcnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyAyLiDliJ3lp4vljJbogYrlpKnmlbDmja7lkozliqjmgIHmlbDmja5cbiAgICB0aGlzLmNoYXREYXRhID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuZHluYW1pY3NEYXRhID0gW107XG5cbiAgICAvLyAzLiDpgJDmrrXop6PmnpDlubblkIjlubZcbiAgICBmb3IgKGNvbnN0IGJsb2NrIG9mIGJlYXJCbG9ja3MpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIOS9v+eUqOaWsOeahOaJqeWxleino+aekOaWueazlVxuICAgICAgICBjb25zdCBwYXJzZVJlc3VsdCA9IGF3YWl0IHRoaXMubWVzc2FnZVBhcnNlci5wYXJzZUJlYXJDb250ZW50UGx1cyhibG9jayk7XG4gICAgICAgIGNvbnN0IHBhcnRpYWxDaGF0RGF0YSA9IHBhcnNlUmVzdWx0LmNoYXRNYXA7XG4gICAgICAgIGNvbnN0IHBhcnRpYWxEeW5hbWljcyA9IHBhcnNlUmVzdWx0LmR5bmFtaWNzO1xuXG4gICAgICAgIC8vIOWQiOW5tuiBiuWkqeaVsOaNrlxuICAgICAgICBmb3IgKGNvbnN0IFtjaGF0SWQsIGNoYXRdIG9mIHBhcnRpYWxDaGF0RGF0YSkge1xuICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQ2hhdCA9IHRoaXMuY2hhdERhdGEuZ2V0KGNoYXRJZCk7XG4gICAgICAgICAgaWYgKGV4aXN0aW5nQ2hhdCkge1xuICAgICAgICAgICAgLy8g5aaC5p6c6IGK5aSp5bey5a2Y5Zyo77yM5ZCI5bm25raI5oGvXG4gICAgICAgICAgICBleGlzdGluZ0NoYXQubWVzc2FnZXMgPSB0aGlzLm1lcmdlTWVzc2FnZXMoZXhpc3RpbmdDaGF0Lm1lc3NhZ2VzLCBjaGF0Lm1lc3NhZ2VzKTtcbiAgICAgICAgICAgIC8vIOabtOaWsOacgOWQjua2iOaBr1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nQ2hhdC5tZXNzYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxhc3RNZXNzYWdlID0gZXhpc3RpbmdDaGF0Lm1lc3NhZ2VzW2V4aXN0aW5nQ2hhdC5tZXNzYWdlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgZXhpc3RpbmdDaGF0Lmxhc3RNZXNzYWdlID1cbiAgICAgICAgICAgICAgICAoZXhpc3RpbmdDaGF0IGFzIGFueSkudHlwZSA9PT0gJ2dyb3VwJyA/IHRoaXMuZm9ybWF0R3JvdXBMYXN0TWVzc2FnZShsYXN0TWVzc2FnZSkgOiBsYXN0TWVzc2FnZS5jb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyDmlrDogYrlpKnvvIznm7TmjqXmt7vliqBcbiAgICAgICAgICAgIHRoaXMuY2hhdERhdGEuc2V0KGNoYXRJZCwgY2hhdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8g5ZCI5bm25Yqo5oCB5pWw5o2u5Yiw5pys5Zyw5a2Y5YKoXG4gICAgICAgIGlmIChwYXJ0aWFsRHluYW1pY3MgJiYgcGFydGlhbER5bmFtaWNzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aGlzLmR5bmFtaWNzRGF0YSA9IHRoaXMubWVyZ2VEeW5hbWljc0RhdGEodGhpcy5keW5hbWljc0RhdGEsIHBhcnRpYWxEeW5hbWljcyk7XG4gICAgICAgICAgY29uc29sZS5sb2coYPCfk50g5ZCI5bm25Yqo5oCB5pWw5o2u77yM5b2T5YmN5YWxICR7dGhpcy5keW5hbWljc0RhdGEubGVuZ3RofSDmnaHliqjmgIFgKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign6Kej5p6QQmVhcuWdl+aXtuWHuumUmTonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYOKchSDlkIjlubblrozmiJDvvIzlhbHop6PmnpAgJHt0aGlzLmNoYXREYXRhLnNpemV9IOS4quiBiuWkqe+8jOadpeiHqiAke2JlYXJCbG9ja3MubGVuZ3RofSDkuKpCZWFy5Z2XYCk7XG5cbiAgICAvLyA0LiDlupTnlKggbG9jYWxTdG9yYWdlIOe+pOWQjeimhuebliAo5L+d5oyB5Y6f5pyJ6KaG55uWKVxuICAgIEdyb3VwTmFtZU92ZXJyaWRlTWFuYWdlci5hcHBseU92ZXJyaWRlc1RvQ2hhdERhdGEodGhpcy5jaGF0RGF0YSk7XG5cbiAgICAvLyA1LiDpqozor4HlkozmuIXnkIbml6DmlYjnmoTopobnm5bmlbDmja5cbiAgICBjb25zdCB2YWxpZEdyb3VwSWRzID0gQXJyYXkuZnJvbSh0aGlzLmNoYXREYXRhLmtleXMoKSkuZmlsdGVyKFxuICAgICAgY2hhdElkID0+ICh0aGlzLmNoYXREYXRhLmdldChjaGF0SWQpIGFzIGFueSk/LnR5cGUgPT09ICdncm91cCcsXG4gICAgKTtcbiAgICBHcm91cE5hbWVPdmVycmlkZU1hbmFnZXIudmFsaWRhdGVBbmRDbGVhbk92ZXJyaWRlcyh2YWxpZEdyb3VwSWRzKTtcblxuICAgIC8vIOacieaVsOaNruaXtuS5n+aYvuekuuiBiuWkqeWIl+ihqOS9nOS4uuS4u+mhtVxuICAgIGlmICh0aGlzLmNoYXREYXRhLnNpemUgPiAwKSB7XG4gICAgICBjb25zdCBmaXJzdENoYXRJZCA9IHRoaXMuY2hhdERhdGEua2V5cygpLm5leHQoKS52YWx1ZTtcbiAgICAgIGlmIChmaXJzdENoYXRJZCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRDaGF0ID0gZmlyc3RDaGF0SWQ7XG4gICAgICB9XG4gICAgICB0aGlzLnNob3dDaGF0TGlzdCgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNoYXREYXRhLnNpemUgPT09IDApIHtcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZURlZmF1bHREYXRhKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOWIneWni+WMlum7mOiupOaVsOaNrlxuICAgKi9cbiAgcHJpdmF0ZSBpbml0aWFsaXplRGVmYXVsdERhdGEoKTogdm9pZCB7XG4gICAgLy8g5LiN5Yib5bu65Lu75L2V6buY6K6k6IGK5aSp5pWw5o2u77yM55u05o6l5pi+56S66IGK5aSp5YiX6KGoXG4gICAgdGhpcy5zaG93Q2hhdExpc3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliIfmjaLliqDlj7foj5zljZXnmoTmmL7npLrnirbmgIFcbiAgICovXG4gIHByaXZhdGUgdG9nZ2xlUGx1c01lbnUoKTogdm9pZCB7XG4gICAgY29uc3QgcGx1c01lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGx1c01lbnUnKTtcbiAgICBpZiAoIXBsdXNNZW51KSByZXR1cm47XG5cbiAgICAvLyDlhYjpmpDol4/ooajmg4XljIXpgInmi6nlmajvvIzpgb/lhY3lkIzml7bmmL7npLpcbiAgICB0aGlzLmhpZGVTdGlja2VyU2VsZWN0b3IoKTtcblxuICAgIHRoaXMuaXNNZW51VmlzaWJsZSA9ICF0aGlzLmlzTWVudVZpc2libGU7XG5cbiAgICBpZiAodGhpcy5pc01lbnVWaXNpYmxlKSB7XG4gICAgICAvLyDmmL7npLroj5zljZVcbiAgICAgIHBsdXNNZW51LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuXG4gICAgICAvLyDmt7vliqDliqjnlLvmlYjmnpxcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBwbHVzTWVudS5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XG4gICAgICB9LCAxMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIOmakOiXj+iPnOWNlVxuICAgICAgdGhpcy5oaWRlUGx1c01lbnUoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog6ZqQ6JeP5Yqg5Y+36I+c5Y2V5bm26YeN572u54q25oCBXG4gICAqL1xuICBwcml2YXRlIGhpZGVQbHVzTWVudSgpOiB2b2lkIHtcbiAgICBjb25zdCBwbHVzTWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbHVzTWVudScpO1xuICAgIGlmICghcGx1c01lbnUpIHJldHVybjtcblxuICAgIC8vIOenu+mZpOaYvuekuueKtuaAgVxuICAgIHBsdXNNZW51LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScsICdzaG93Jyk7XG5cbiAgICB0aGlzLmlzTWVudVZpc2libGUgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlpITnkIboj5zljZXpobnngrnlh7vkuovku7ZcbiAgICogQHBhcmFtIHR5cGUg6I+c5Y2V6aG557G75Z6LXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZU1lbnVJdGVtQ2xpY2sodHlwZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdlbW9qaScpO1xuICAgIC8vIOmmluWFiOmakOiXj+iPnOWNlVxuICAgIHRoaXMuaGlkZVBsdXNNZW51KCk7XG5cbiAgICAvLyDmoLnmja7nsbvlnovliIblj5HliLDlr7nlupTnmoTlpITnkIblh73mlbBcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ3N0aWNrZXInOlxuICAgICAgICB0aGlzLmhhbmRsZVN0aWNrZXJNZW51Q2xpY2soKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdpbWFnZSc6XG4gICAgICAgIHRoaXMuaGFuZGxlSW1hZ2VNZW51Q2xpY2soKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd2b2ljZSc6XG4gICAgICAgIHRoaXMuaGFuZGxlVm9pY2VNZW51Q2xpY2soKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdsb2NhdGlvbic6XG4gICAgICAgIHRoaXMuaGFuZGxlTG9jYXRpb25NZW51Q2xpY2soKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0cmFuc2Zlcic6XG4gICAgICAgIHRoaXMuaGFuZGxlVHJhbnNmZXJNZW51Q2xpY2soKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBjb25zb2xlLndhcm4oYOacquefpeeahOiPnOWNlemhueexu+WeizogJHt0eXBlfWApO1xuICAgICAgICB0aGlzLnNob3dUb2FzdChg5Yqf6IO9IFwiJHt0eXBlfVwiIOaaguacquWunueOsGAsICd3YXJuaW5nJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOWkhOeQhuihqOaDheWMheiPnOWNleeCueWHu1xuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVTdGlja2VyTWVudUNsaWNrKCk6IHZvaWQge1xuICAgIHRoaXMuc2hvd1N0aWNrZXJTZWxlY3RvcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIOWkhOeQhuWbvueJh+iPnOWNleeCueWHu1xuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVJbWFnZU1lbnVDbGljaygpOiB2b2lkIHtcbiAgICB0aGlzLnNob3dJbWFnZUlucHV0TW9kYWwoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlpITnkIbor63pn7Poj5zljZXngrnlh7tcbiAgICovXG4gIHByaXZhdGUgaGFuZGxlVm9pY2VNZW51Q2xpY2soKTogdm9pZCB7XG4gICAgdGhpcy5zaG93Vm9pY2VJbnB1dE1vZGFsKCk7XG4gIH1cblxuICAvKipcbiAgICog5aSE55CG5L2N572u6I+c5Y2V54K55Ye7XG4gICAqL1xuICBwcml2YXRlIGhhbmRsZUxvY2F0aW9uTWVudUNsaWNrKCk6IHZvaWQge1xuICAgIHRoaXMuc2hvd0xvY2F0aW9uSW5wdXRNb2RhbCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOWkhOeQhui9rOi0puiPnOWNleeCueWHu1xuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVUcmFuc2Zlck1lbnVDbGljaygpOiB2b2lkIHtcbiAgICB0aGlzLnNob3dUcmFuc2ZlcklucHV0TW9kYWwoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlpITnkIblm57ovabplK4gLSDmt7vliqDmtojmga/liLDpmJ/liJdcbiAgICovXG4gIHByaXZhdGUgaGFuZGxlRW50ZXJLZXkoKTogdm9pZCB7XG4gICAgLy8g5aaC5p6c5q2j5Zyo5Y+R6YCB5Lit77yM5LiN5YWB6K645re75Yqg5paw5raI5oGvXG4gICAgaWYgKHRoaXMuaXNTZW5kaW5nKSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+aqyDmraPlnKjlj5HpgIHkuK3vvIzor7fnrYnlvoXlj5HpgIHlrozmiJAnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBpbnB1dEZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0RmllbGQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgLy8g5Yib5bu65b6F5Y+R6YCB5raI5oGvXG4gICAgY29uc3QgcGVuZGluZ01lc3NhZ2U6IENoYXRNZXNzYWdlID0ge1xuICAgICAgaWQ6IHRoaXMuZ2VuZXJhdGVNZXNzYWdlSWQoKSxcbiAgICAgIHR5cGU6ICdTJyxcbiAgICAgIGNoYXRJZDogdGhpcy5jdXJyZW50Q2hhdCxcbiAgICAgIHNlbmRlcjogJ3t7dXNlcn19JyxcbiAgICAgIGF2YXRhcjogJycsXG4gICAgICBtZXNzYWdlVHlwZTogJ3RleHQnLFxuICAgICAgY29udGVudDogaW5wdXRGaWVsZC52YWx1ZS50cmltKCksXG4gICAgICB0aW1lc3RhbXA6IHRoaXMuZ2V0Q3VycmVudFRpbWUoKSxcbiAgICAgIGlzUGVuZGluZzogdHJ1ZSxcbiAgICB9O1xuXG4gICAgLy8g5re75Yqg5Yiw5Y+R6YCB6Zif5YiXXG4gICAgdGhpcy5hZGRUb1NlbmRRdWV1ZShwZW5kaW5nTWVzc2FnZSk7XG5cbiAgICAvLyDmuIXnqbrovpPlhaXmoYZcbiAgICBpbnB1dEZpZWxkLnZhbHVlID0gJyc7XG5cbiAgICAvLyDlj6rmt7vliqDmlrDmtojmga/liLDnlYzpnaLvvIzkuI3ph43mlrDmuLLmn5PmlbTkuKrliJfooahcbiAgICB0aGlzLmFkZE5ld01lc3NhZ2VUb0ludGVyZmFjZShwZW5kaW5nTWVzc2FnZSk7XG5cbiAgICAvLyDmkq3mlL7lj5HpgIHpn7PmlYhcbiAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5U291bmQoJ3NlbmQnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmm7TmlrDlj5HpgIHmjInpkq7nirbmgIFcbiAgICogQHBhcmFtIGlzU2VuZGluZyDmmK/lkKbmraPlnKjlj5HpgIFcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlU2VuZEJ1dHRvblN0YXRlKGlzU2VuZGluZzogYm9vbGVhbik6IHZvaWQge1xuICAgIGNvbnN0IHNlbmRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VuZEJ0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgIGlmIChzZW5kQnRuKSB7XG4gICAgICBzZW5kQnRuLmRpc2FibGVkID0gaXNTZW5kaW5nO1xuICAgICAgaWYgKGlzU2VuZGluZykge1xuICAgICAgICBzZW5kQnRuLnN0eWxlLm9wYWNpdHkgPSAnMC42JztcbiAgICAgICAgc2VuZEJ0bi5zdHlsZS5jdXJzb3IgPSAnbm90LWFsbG93ZWQnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VuZEJ0bi5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgICAgICBzZW5kQnRuLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5aSE55CG5Y+R6YCB5oyJ6ZKu54K55Ye7XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGhhbmRsZVNlbmRDbGljaygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyDpmLLmraLph43lpI3ngrnlh7tcbiAgICBpZiAodGhpcy5pc1NlbmRpbmcpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5qrIOato+WcqOWPkemAgeS4re+8jOivt+WLv+mHjeWkjeeCueWHuycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGDwn5SEIOi3qOiBiuWkqeWPkemAgeaooeW8jzogJHt0aGlzLmNyb3NzQ2hhdFNlbmRFbmFibGVkID8gJ+W8gOWQrycgOiAn5YWz6ZetJ31gKTtcblxuICAgIC8vIOagueaNrui3qOiBiuWkqeWPkemAgeiuvue9ruWGs+WumuWPkemAgeWTquS6m+a2iOaBr1xuICAgIGNvbnN0IG1lc3NhZ2VzVG9TZW5kID0gdGhpcy5jcm9zc0NoYXRTZW5kRW5hYmxlZFxuICAgICAgPyB0aGlzLnNlbmRRdWV1ZSAvLyDot6jogYrlpKnmqKHlvI/vvJrlj5HpgIHmiYDmnInpmJ/liJfkuK3nmoTmtojmga9cbiAgICAgIDogdGhpcy5nZXRQZW5kaW5nTWVzc2FnZXNGb3JDdXJyZW50Q2hhdCgpOyAvLyDmma7pgJrmqKHlvI/vvJrlj6rlj5HpgIHlvZPliY3ogYrlpKnnmoTmtojmga9cblxuICAgIGlmIChtZXNzYWdlc1RvU2VuZC5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKCfmsqHmnInlvoXlj5HpgIHnmoTmtojmga8nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyDorr7nva7lj5HpgIHnirbmgIFcbiAgICB0aGlzLmlzU2VuZGluZyA9IHRydWU7XG4gICAgdGhpcy51cGRhdGVTZW5kQnV0dG9uU3RhdGUodHJ1ZSk7XG5cbiAgICBjb25zb2xlLmxvZyhg8J+TpCDlrp7pmYXlj5HpgIEgJHttZXNzYWdlc1RvU2VuZC5sZW5ndGh9IOadoea2iOaBr2ApO1xuXG4gICAgLy8g5aaC5p6c5piv6Leo6IGK5aSp5qih5byP77yM5pi+56S66K+m57uG57uf6K6hXG4gICAgaWYgKHRoaXMuY3Jvc3NDaGF0U2VuZEVuYWJsZWQgJiYgdGhpcy5zZW5kUXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgbWVzc2FnZXNCeUNoYXQ6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcbiAgICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBtZXNzYWdlc1RvU2VuZCkge1xuICAgICAgICBtZXNzYWdlc0J5Q2hhdFttZXNzYWdlLmNoYXRJZF0gPSAobWVzc2FnZXNCeUNoYXRbbWVzc2FnZS5jaGF0SWRdIHx8IDApICsgMTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKCfwn5OKIOi3qOiBiuWkqeWPkemAgee7n+iuoTonLCBtZXNzYWdlc0J5Q2hhdCk7XG4gICAgfVxuXG4gICAgLy8g5pKt5pS+5Y+R6YCB6Z+z5pWIXG4gICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdzZW5kJyk7XG5cbiAgICB0cnkge1xuICAgICAgLy8g5om56YeP5Y+R6YCB5raI5oGvXG4gICAgICBhd2FpdCB0aGlzLnByb2Nlc3NTZW5kUXVldWUobWVzc2FnZXNUb1NlbmQpO1xuXG4gICAgICAvLyDlj5HpgIHlrozmiJDlkI7nq4vljbPmgaLlpI3mjInpkq7nirbmgIHvvIjkuI3nrYnlvoXmtojmga/muLLmn5PvvIlcbiAgICAgIHRoaXMuaXNTZW5kaW5nID0gZmFsc2U7XG4gICAgICB0aGlzLnVwZGF0ZVNlbmRCdXR0b25TdGF0ZShmYWxzZSk7XG4gICAgICBjb25zb2xlLmxvZygn4pyFIOWPkemAgeWujOaIkO+8jOaMiemSrueKtuaAgeW3suaBouWkjScpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyDlj5HpgIHlpLHotKXml7bkuZ/opoHph43nva7lj5HpgIHnirbmgIFcbiAgICAgIHRoaXMuaXNTZW5kaW5nID0gZmFsc2U7XG4gICAgICB0aGlzLnVwZGF0ZVNlbmRCdXR0b25TdGF0ZShmYWxzZSk7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwg5Y+R6YCB5aSx6LSl77yM5oyJ6ZKu54q25oCB5bey5oGi5aSNOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlpITnkIblj5HpgIHpmJ/liJfkuK3nmoTmtojmga/vvIjmlK/mjIHot6jogYrlpKnlj5HpgIHvvIlcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgcHJvY2Vzc1NlbmRRdWV1ZShtZXNzYWdlczogQ2hhdE1lc3NhZ2VbXSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmIChtZXNzYWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OtIOWPkemAgemYn+WIl+S4uuepuicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZyhg8J+agCDlvIDlp4vmibnph4/lj5HpgIEgJHttZXNzYWdlcy5sZW5ndGh9IOadoea2iOaBr2ApO1xuXG4gICAgICBpZiAodGhpcy5jcm9zc0NoYXRTZW5kRW5hYmxlZCkge1xuICAgICAgICAvLyDot6jogYrlpKnmqKHlvI/vvJrmjInogYrlpKnliIbnu4Tlj5HpgIFcbiAgICAgICAgYXdhaXQgdGhpcy5wcm9jZXNzQ3Jvc3NDaGF0U2VuZChtZXNzYWdlcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyDmma7pgJrmqKHlvI/vvJrlkIjlubblj5HpgIHlvZPliY3ogYrlpKnnmoTmtojmga9cbiAgICAgICAgYXdhaXQgdGhpcy5wcm9jZXNzU2luZ2xlQ2hhdFNlbmQobWVzc2FnZXMpO1xuICAgICAgfVxuXG4gICAgICAvLyDmuIXnqbrlt7Llj5HpgIHnmoTmtojmga9cbiAgICAgIHRoaXMuY2xlYXJTZW50TWVzc2FnZXMobWVzc2FnZXMpO1xuXG4gICAgICAvLyDlpoLmnpzmmK/ot6jogYrlpKnmqKHlvI/kuJTov5jmnInliankvZnmtojmga/vvIzmj5DnpLrnlKjmiLdcbiAgICAgIGlmICh0aGlzLmNyb3NzQ2hhdFNlbmRFbmFibGVkICYmIHRoaXMuc2VuZFF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coYPCfk50g6Leo6IGK5aSp5Y+R6YCB5a6M5oiQ77yM6Zif5YiX5Lit6L+Y5pyJICR7dGhpcy5zZW5kUXVldWUubGVuZ3RofSDmnaHmtojmga9gKTtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ+KchSDmibnph4/mtojmga/lj5HpgIHmiJDlip8nKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIOaJuemHj+a2iOaBr+WPkemAgeWksei0pTonLCBlcnJvcik7XG4gICAgICB0aGlzLnNob3dFcnJvclRvYXN0KGDmtojmga/lj5HpgIHlpLHotKU6ICR7ZXJyb3IubWVzc2FnZSB8fCAn5pyq55+l6ZSZ6K+vJ31gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5aSE55CG6Leo6IGK5aSp5Y+R6YCBXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHByb2Nlc3NDcm9zc0NoYXRTZW5kKG1lc3NhZ2VzOiBDaGF0TWVzc2FnZVtdKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8g5oyJ6IGK5aSp5YiG57uE5raI5oGvXG4gICAgY29uc3QgbWVzc2FnZXNCeUNoYXQgPSBuZXcgTWFwPHN0cmluZywgQ2hhdE1lc3NhZ2VbXT4oKTtcbiAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgbWVzc2FnZXMpIHtcbiAgICAgIGlmICghbWVzc2FnZXNCeUNoYXQuaGFzKG1lc3NhZ2UuY2hhdElkKSkge1xuICAgICAgICBtZXNzYWdlc0J5Q2hhdC5zZXQobWVzc2FnZS5jaGF0SWQsIFtdKTtcbiAgICAgIH1cbiAgICAgIG1lc3NhZ2VzQnlDaGF0LmdldChtZXNzYWdlLmNoYXRJZCkhLnB1c2gobWVzc2FnZSk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYPCfk6Qg6Leo6IGK5aSp5Y+R6YCB77ya5bCG5ZCRICR7bWVzc2FnZXNCeUNoYXQuc2l6ZX0g5Liq6IGK5aSp5Y+R6YCB5raI5oGvYCk7XG5cbiAgICAvLyDmnoTlu7rot6jogYrlpKnlkIjlubbmj5DnpLror41cbiAgICBjb25zdCBjcm9zc0NoYXRQcm9tcHQgPSB0aGlzLmJ1aWxkQ3Jvc3NDaGF0UHJvbXB0KG1lc3NhZ2VzQnlDaGF0KTtcbiAgICBjb25zb2xlLmxvZygn8J+TnSDot6jogYrlpKnlkIjlubbmj5DnpLror406JywgY3Jvc3NDaGF0UHJvbXB0KTtcblxuICAgIGxldCB0eXBpbmdNZXNzYWdlID0gbnVsbDtcblxuICAgIHRyeSB7XG4gICAgICAvLyDmmL7npLrmiZPlrZfliqjnlLtcbiAgICAgIHR5cGluZ01lc3NhZ2UgPSB0aGlzLnNob3dUeXBpbmdJbmRpY2F0b3IoKTtcblxuICAgICAgLy8g5qOA5p+l5piv5ZCm5pyJ5Zu+54mH5paH5Lu277yI6Leo6IGK5aSp5pe25Y+q5Y+W56ys5LiA5Liq5Zu+54mH5paH5Lu277yJXG4gICAgICBsZXQgaW1hZ2VEYXRhOiBGaWxlIHwgc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gICAgICBmb3IgKGNvbnN0IFtfLCBjaGF0TWVzc2FnZXNdIG9mIG1lc3NhZ2VzQnlDaGF0KSB7XG4gICAgICAgIGltYWdlRGF0YSA9IHRoaXMuZXh0cmFjdEltYWdlRmlsZUZyb21NZXNzYWdlcyhjaGF0TWVzc2FnZXMpO1xuICAgICAgICBpZiAoaW1hZ2VEYXRhKSBicmVhaztcbiAgICAgIH1cblxuICAgICAgLy8g5LiA5qyh5oCn5Y+R6YCB5omA5pyJ5raI5oGvXG4gICAgICBjb25zb2xlLmxvZygn8J+ToSDosIPnlKggZ2VuZXJhdGUg5Ye95pWw77yI6Leo6IGK5aSp5ZCI5bm25Y+R6YCB77yJLi4uJyk7XG4gICAgICBjb25zdCBnZW5lcmF0ZUNvbmZpZzogYW55ID0ge1xuICAgICAgICB1c2VyX2lucHV0OiBjcm9zc0NoYXRQcm9tcHQsXG4gICAgICAgIHNob3VsZF9zdHJlYW06IGZhbHNlLFxuICAgICAgfTtcblxuICAgICAgLy8g5aaC5p6c5pyJ5Zu+54mH5pWw5o2u77yM5re75Yqg5YiwZ2VuZXJhdGXphY3nva7kuK1cbiAgICAgIGlmIChpbWFnZURhdGEpIHtcbiAgICAgICAgZ2VuZXJhdGVDb25maWcuaW1hZ2UgPSBpbWFnZURhdGE7XG4gICAgICAgIGlmIChpbWFnZURhdGEgaW5zdGFuY2VvZiBGaWxlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ/Cfk7cg6Leo6IGK5aSp5YyF5ZCr5Zu+54mH5paH5Lu2OicsIGltYWdlRGF0YS5uYW1lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+TtyDot6jogYrlpKnljIXlkKvlm77niYfmlbDmja46JywgaW1hZ2VEYXRhLnN0YXJ0c1dpdGgoJ2RhdGE6aW1hZ2UvJykgPyAnYmFzZTY0JyA6ICd1cmwnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyDot6jogYrlpKnosIPnlKhnZW5lcmF0ZVxuICAgICAgY29uc29sZS5sb2coJ/CfmoAg6Leo6IGK5aSp6LCD55SoZ2VuZXJhdGUnKTtcblxuICAgICAgY29uc3QgYWlSZXNwb25zZSA9IGF3YWl0IGdlbmVyYXRlKGdlbmVyYXRlQ29uZmlnKTtcblxuICAgICAgY29uc29sZS5sb2coJ/CfpJYg5pS25YiwQUnlm57lpI06JywgYWlSZXNwb25zZSk7XG5cbiAgICAgIC8vIOenu+mZpOaJk+Wtl+WKqOeUu1xuICAgICAgdGhpcy5oaWRlVHlwaW5nSW5kaWNhdG9yKGF3YWl0IHR5cGluZ01lc3NhZ2UpO1xuXG4gICAgICAvLyDlpITnkIZBSeWbnuWkje+8iOmcgOimgeino+aekOW5tuWIhuWPkeWIsOWQhOS4quiBiuWkqe+8iVxuICAgICAgYXdhaXQgdGhpcy5oYW5kbGVDcm9zc0NoYXRBSVJlc3BvbnNlKGFpUmVzcG9uc2UsIG1lc3NhZ2VzQnlDaGF0KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8g6ZqQ6JeP5omT5a2X5Yqo55S777yI5aaC5p6c5a2Y5Zyo77yJXG4gICAgICBpZiAodHlwaW5nTWVzc2FnZSkge1xuICAgICAgICB0aGlzLmhpZGVUeXBpbmdJbmRpY2F0b3IoYXdhaXQgdHlwaW5nTWVzc2FnZSk7XG4gICAgICB9XG4gICAgICB0aHJvdyBlcnJvcjsgLy8g6YeN5paw5oqb5Ye66ZSZ6K+v77yM6K6p5LiK5bGC5aSE55CGXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOWkhOeQhuWNleS4quiBiuWkqeeahOWPkemAgVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBwcm9jZXNzU2luZ2xlQ2hhdFNlbmQobWVzc2FnZXM6IENoYXRNZXNzYWdlW10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBsZXQgdHlwaW5nTWVzc2FnZSA9IG51bGw7XG5cbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ/Cfk6Qg5byA5aeL5aSE55CG5Y2V5Liq6IGK5aSp5Y+R6YCB77yM5raI5oGv5pWw6YePOicsIG1lc3NhZ2VzLmxlbmd0aCk7XG5cbiAgICAgIC8vIOeugOWMlua2iOaBr+S/oeaBr+i+k+WHulxuICAgICAgY29uc29sZS5sb2coJ/Cfk6Qg5aSE55CG5raI5oGvOicsIG1lc3NhZ2VzLmxlbmd0aCwgJ+adoScpO1xuXG4gICAgICAvLyDmo4Dmn6XmmK/lkKbmnInlm77niYfmlofku7bmiJZiYXNlNjTmlbDmja5cbiAgICAgIGNvbnN0IGltYWdlRGF0YSA9IHRoaXMuZXh0cmFjdEltYWdlRmlsZUZyb21NZXNzYWdlcyhtZXNzYWdlcyk7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgJ/CflI0gW0RFQlVHXSDmj5Dlj5bliLDnmoTlm77niYfmlbDmja46JyxcbiAgICAgICAgaW1hZ2VEYXRhXG4gICAgICAgICAgPyB7XG4gICAgICAgICAgICAgIHR5cGU6IHR5cGVvZiBpbWFnZURhdGEsXG4gICAgICAgICAgICAgIGlzRmlsZTogaW1hZ2VEYXRhIGluc3RhbmNlb2YgRmlsZSxcbiAgICAgICAgICAgICAgaXNTdHJpbmc6IHR5cGVvZiBpbWFnZURhdGEgPT09ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBmaWxlTmFtZTogaW1hZ2VEYXRhIGluc3RhbmNlb2YgRmlsZSA/IGltYWdlRGF0YS5uYW1lIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICBmaWxlU2l6ZTogaW1hZ2VEYXRhIGluc3RhbmNlb2YgRmlsZSA/IGltYWdlRGF0YS5zaXplIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICBpc0Jhc2U2NDogdHlwZW9mIGltYWdlRGF0YSA9PT0gJ3N0cmluZycgJiYgaW1hZ2VEYXRhLnN0YXJ0c1dpdGgoJ2RhdGE6aW1hZ2UvJyksXG4gICAgICAgICAgICAgIGJhc2U2NExlbmd0aDogdHlwZW9mIGltYWdlRGF0YSA9PT0gJ3N0cmluZycgPyBpbWFnZURhdGEubGVuZ3RoIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIDogbnVsbCxcbiAgICAgICk7XG5cbiAgICAgIC8vIOaehOW7uuWQiOW5tueahOaPkOekuuivje+8iOWmguaenOacieWbvueJh+aVsOaNru+8jOS8muaOkumZpOS4tOaXtuW8leeUqO+8iVxuICAgICAgY29uc3QgY29tYmluZWRQcm9tcHQgPSB0aGlzLmJ1aWxkQ29tYmluZWRQcm9tcHQobWVzc2FnZXMsIGltYWdlRGF0YSAhPT0gbnVsbCk7XG4gICAgICBjb25zb2xlLmxvZygn8J+TnSDmnoTlu7rmj5DnpLror43lrozmiJAnKTtcblxuICAgICAgLy8g5pi+56S65omT5a2X5Yqo55S7XG4gICAgICB0eXBpbmdNZXNzYWdlID0gdGhpcy5zaG93VHlwaW5nSW5kaWNhdG9yKCk7XG5cbiAgICAgIC8vIOiwg+eUqCBnZW5lcmF0ZSDlh73mlbBcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OhIOiwg+eUqCBnZW5lcmF0ZSDlh73mlbAuLi4nKTtcblxuICAgICAgLy8g56Gu5L+ddXNlcl9pbnB1dOaYr+Wtl+espuS4slxuICAgICAgaWYgKHR5cGVvZiBjb21iaW5lZFByb21wdCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign8J+aqCBbRVJST1JdIGNvbWJpbmVkUHJvbXB05LiN5piv5a2X56ym5LiyOicsIHR5cGVvZiBjb21iaW5lZFByb21wdCwgY29tYmluZWRQcm9tcHQpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGNvbWJpbmVkUHJvbXB05b+F6aG75piv5a2X56ym5Liy77yM5L2G5pS25Yiw5LqGOiAke3R5cGVvZiBjb21iaW5lZFByb21wdH1gKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZ2VuZXJhdGVDb25maWc6IGFueSA9IHtcbiAgICAgICAgdXNlcl9pbnB1dDogY29tYmluZWRQcm9tcHQsXG4gICAgICAgIHNob3VsZF9zdHJlYW06IGZhbHNlLFxuICAgICAgfTtcblxuICAgICAgLy8g5aaC5p6c5pyJ5Zu+54mH5pWw5o2u77yM5re75Yqg5YiwZ2VuZXJhdGXphY3nva7kuK1cbiAgICAgIGlmIChpbWFnZURhdGEpIHtcbiAgICAgICAgZ2VuZXJhdGVDb25maWcuaW1hZ2UgPSBpbWFnZURhdGE7XG4gICAgICAgIGlmIChpbWFnZURhdGEgaW5zdGFuY2VvZiBGaWxlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ/Cfk7cg5YyF5ZCr5Zu+54mH5paH5Lu2OicsIGltYWdlRGF0YS5uYW1lLCAn57G75Z6LOicsIGltYWdlRGF0YS50eXBlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+TtyDljIXlkKtiYXNlNjTlm77niYfmlbDmja4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZygn8J+UjSBbREVCVUddIOacgOe7iOeahGdlbmVyYXRl6YWN572uOicsIHtcbiAgICAgICAgdXNlcl9pbnB1dDogZ2VuZXJhdGVDb25maWcudXNlcl9pbnB1dC5zdWJzdHJpbmcoMCwgMjAwKSArIChnZW5lcmF0ZUNvbmZpZy51c2VyX2lucHV0Lmxlbmd0aCA+IDIwMCA/ICcuLi4nIDogJycpLFxuICAgICAgICBzaG91bGRfc3RyZWFtOiBnZW5lcmF0ZUNvbmZpZy5zaG91bGRfc3RyZWFtLFxuICAgICAgICBoYXNJbWFnZTogISFnZW5lcmF0ZUNvbmZpZy5pbWFnZSxcbiAgICAgICAgaW1hZ2VJbmZvOiBnZW5lcmF0ZUNvbmZpZy5pbWFnZVxuICAgICAgICAgID8gZ2VuZXJhdGVDb25maWcuaW1hZ2UgaW5zdGFuY2VvZiBGaWxlXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnRmlsZScsXG4gICAgICAgICAgICAgICAgbmFtZTogZ2VuZXJhdGVDb25maWcuaW1hZ2UubmFtZSxcbiAgICAgICAgICAgICAgICBzaXplOiBnZW5lcmF0ZUNvbmZpZy5pbWFnZS5zaXplLFxuICAgICAgICAgICAgICAgIGZpbGVUeXBlOiBnZW5lcmF0ZUNvbmZpZy5pbWFnZS50eXBlLFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnU3RyaW5nJyxcbiAgICAgICAgICAgICAgICBpc1VybDogZ2VuZXJhdGVDb25maWcuaW1hZ2Uuc3RhcnRzV2l0aCgnaHR0cCcpLFxuICAgICAgICAgICAgICAgIGlzQmFzZTY0OiBnZW5lcmF0ZUNvbmZpZy5pbWFnZS5zdGFydHNXaXRoKCdkYXRhOmltYWdlLycpLFxuICAgICAgICAgICAgICAgIGxlbmd0aDogZ2VuZXJhdGVDb25maWcuaW1hZ2UubGVuZ3RoLFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgOiBudWxsLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIOiwg+eUqGdlbmVyYXRlXG4gICAgICBjb25zb2xlLmxvZygn8J+agCDosIPnlKhnZW5lcmF0ZScpO1xuXG4gICAgICBjb25zdCBhaVJlc3BvbnNlID0gYXdhaXQgZ2VuZXJhdGUoZ2VuZXJhdGVDb25maWcpO1xuXG4gICAgICBjb25zb2xlLmxvZygn8J+kliDmlLbliLBBSeWbnuWkjTonLCBhaVJlc3BvbnNlKTtcblxuICAgICAgLy8g56e76Zmk5omT5a2X5Yqo55S7XG4gICAgICB0aGlzLmhpZGVUeXBpbmdJbmRpY2F0b3IoYXdhaXQgdHlwaW5nTWVzc2FnZSk7XG5cbiAgICAgIC8vIOWkhOeQhkFJ5Zue5aSN77yI5byC5q2l5omn6KGM77yM5LiN6Zi75aGe5Y+R6YCB5oyJ6ZKu5oGi5aSN77yJXG4gICAgICB0aGlzLmhhbmRsZUFJUmVzcG9uc2UoYWlSZXNwb25zZSwgbWVzc2FnZXNbbWVzc2FnZXMubGVuZ3RoIC0gMV0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcign4p2MIOWkhOeQhkFJ5Zue5aSN5aSx6LSlOicsIGVycm9yKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zb2xlLmxvZygn4pyFIGdlbmVyYXRl6LCD55So5a6M5oiQ77yMcHJvY2Vzc1NpbmdsZUNoYXRTZW5k5Y2z5bCG6L+U5ZueJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIOmakOiXj+aJk+Wtl+WKqOeUu++8iOWmguaenOWtmOWcqO+8iVxuICAgICAgaWYgKHR5cGluZ01lc3NhZ2UpIHtcbiAgICAgICAgdGhpcy5oaWRlVHlwaW5nSW5kaWNhdG9yKGF3YWl0IHR5cGluZ01lc3NhZ2UpO1xuICAgICAgfVxuICAgICAgdGhyb3cgZXJyb3I7IC8vIOmHjeaWsOaKm+WHuumUmeivr++8jOiuqeS4iuWxguWkhOeQhlxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDmuIXnqbrlt7Llj5HpgIHnmoTmtojmga9cbiAgICovXG4gIHByaXZhdGUgY2xlYXJTZW50TWVzc2FnZXMoc2VudE1lc3NhZ2VzOiBDaGF0TWVzc2FnZVtdKTogdm9pZCB7XG4gICAgY29uc3Qgc2VudE1lc3NhZ2VJZHMgPSBuZXcgU2V0KHNlbnRNZXNzYWdlcy5tYXAobXNnID0+IG1zZy5pZCkpO1xuICAgIHRoaXMuc2VuZFF1ZXVlID0gdGhpcy5zZW5kUXVldWUuZmlsdGVyKG1zZyA9PiAhc2VudE1lc3NhZ2VJZHMuaGFzKG1zZy5pZCkpO1xuICAgIGNvbnNvbGUubG9nKGDwn6e5IOW3sua4heepuiAke3NlbnRNZXNzYWdlcy5sZW5ndGh9IOadoea2iOaBr++8jOmYn+WIl+WJqeS9mSAke3RoaXMuc2VuZFF1ZXVlLmxlbmd0aH0g5p2hYCk7XG4gIH1cblxuICAvKipcbiAgICog5LuO5raI5oGv5Lit5o+Q5Y+W5Zu+54mH5paH5Lu25oiWYmFzZTY05pWw5o2uXG4gICAqL1xuICBwcml2YXRlIGV4dHJhY3RJbWFnZUZpbGVGcm9tTWVzc2FnZXMobWVzc2FnZXM6IENoYXRNZXNzYWdlW10pOiBGaWxlIHwgc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc29sZS5sb2coJ/CflI0gW0RFQlVHXSBleHRyYWN0SW1hZ2VGaWxlRnJvbU1lc3NhZ2VzIOW8gOWni++8jOa2iOaBr+aVsOmHjzonLCBtZXNzYWdlcy5sZW5ndGgpO1xuXG4gICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIG1lc3NhZ2VzKSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+UjSBbREVCVUddIOajgOafpea2iOaBrzonLCB7XG4gICAgICAgIGlkOiBtZXNzYWdlLmlkLFxuICAgICAgICBtZXNzYWdlVHlwZTogbWVzc2FnZS5tZXNzYWdlVHlwZSxcbiAgICAgICAgaGFzRGF0YTogISFtZXNzYWdlLmRhdGEsXG4gICAgICAgIGhhc1VwbG9hZGVkRmlsZTogISFtZXNzYWdlLmRhdGE/LnVwbG9hZGVkRmlsZSxcbiAgICAgICAgaGFzQmFzZTY0SW1hZ2U6ICEhbWVzc2FnZS5kYXRhPy5iYXNlNjRJbWFnZSxcbiAgICAgICAgaGFzSW1hZ2VVcmw6ICEhbWVzc2FnZS5kYXRhPy5pbWFnZVVybCxcbiAgICAgICAgdXBsb2FkZWRGaWxlVHlwZTogbWVzc2FnZS5kYXRhPy51cGxvYWRlZEZpbGU/LmNvbnN0cnVjdG9yPy5uYW1lLFxuICAgICAgfSk7XG5cbiAgICAgIGlmIChtZXNzYWdlLm1lc3NhZ2VUeXBlID09PSAnaW1hZ2UnKSB7XG4gICAgICAgIC8vIOS8mOWFiOi/lOWbnkZpbGXlr7nosaFcbiAgICAgICAgaWYgKG1lc3NhZ2UuZGF0YT8udXBsb2FkZWRGaWxlKSB7XG4gICAgICAgICAgY29uc3QgZmlsZSA9IG1lc3NhZ2UuZGF0YS51cGxvYWRlZEZpbGUgYXMgRmlsZTtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBbREVCVUddIOaJvuWIsOWbvueJh+aWh+S7tjonLCB7XG4gICAgICAgICAgICBuYW1lOiBmaWxlLm5hbWUsXG4gICAgICAgICAgICBzaXplOiBmaWxlLnNpemUsXG4gICAgICAgICAgICB0eXBlOiBmaWxlLnR5cGUsXG4gICAgICAgICAgICBpc0ZpbGU6IGZpbGUgaW5zdGFuY2VvZiBGaWxlLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBmaWxlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g5YW25qyh6L+U5ZueYmFzZTY05pWw5o2uXG4gICAgICAgIGlmIChtZXNzYWdlLmRhdGE/LmJhc2U2NEltYWdlKSB7XG4gICAgICAgICAgY29uc3QgYmFzZTY0ID0gbWVzc2FnZS5kYXRhLmJhc2U2NEltYWdlIGFzIHN0cmluZztcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBbREVCVUddIOaJvuWIsGJhc2U2NOWbvueJh+aVsOaNrjonLCB7XG4gICAgICAgICAgICBsZW5ndGg6IGJhc2U2NC5sZW5ndGgsXG4gICAgICAgICAgICBpc0Jhc2U2NDogYmFzZTY0LnN0YXJ0c1dpdGgoJ2RhdGE6aW1hZ2UvJyksXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIGJhc2U2NDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOacgOWQjui/lOWbnuWbvueJh1VSTFxuICAgICAgICBpZiAobWVzc2FnZS5kYXRhPy5pbWFnZVVybCkge1xuICAgICAgICAgIGNvbnN0IGltYWdlVXJsID0gbWVzc2FnZS5kYXRhLmltYWdlVXJsIGFzIHN0cmluZztcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBbREVCVUddIOaJvuWIsOWbvueJh1VSTDonLCB7XG4gICAgICAgICAgICB1cmw6IGltYWdlVXJsLFxuICAgICAgICAgICAgaXNIdHRwVXJsOiBpbWFnZVVybC5zdGFydHNXaXRoKCdodHRwOi8vJykgfHwgaW1hZ2VVcmwuc3RhcnRzV2l0aCgnaHR0cHM6Ly8nKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gaW1hZ2VVcmw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygn8J+UjSBbREVCVUddIOacquaJvuWIsOWbvueJh+aWh+S7tuaIlmJhc2U2NOaVsOaNricpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIOWkhOeQhua2iOaBr+WGheWuue+8jOWmguaenOacieWbvueJh+aVsOaNruWImeaPkOWPluaPj+i/sFxuICAgKi9cbiAgcHJpdmF0ZSBwcm9jZXNzTWVzc2FnZUNvbnRlbnQobWVzc2FnZTogQ2hhdE1lc3NhZ2UsIGhhc0ltYWdlRGF0YTogYm9vbGVhbik6IHN0cmluZyB7XG4gICAgY29uc29sZS5sb2coJ/CflI0gW0RFQlVHXSBwcm9jZXNzTWVzc2FnZUNvbnRlbnQg5byA5aeLOicsIHtcbiAgICAgIG1lc3NhZ2VJZDogbWVzc2FnZS5pZCxcbiAgICAgIG1lc3NhZ2VUeXBlOiBtZXNzYWdlLm1lc3NhZ2VUeXBlLFxuICAgICAgaGFzSW1hZ2VEYXRhOiBoYXNJbWFnZURhdGEsXG4gICAgICBoYXNVcGxvYWRlZEZpbGU6ICEhbWVzc2FnZS5kYXRhPy51cGxvYWRlZEZpbGUsXG4gICAgICBoYXNCYXNlNjRJbWFnZTogISFtZXNzYWdlLmRhdGE/LmJhc2U2NEltYWdlLFxuICAgICAgY29udGVudFByZXZpZXc6IG1lc3NhZ2UuY29udGVudC5zdWJzdHJpbmcoMCwgMTAwKSArIChtZXNzYWdlLmNvbnRlbnQubGVuZ3RoID4gMTAwID8gJy4uLicgOiAnJyksXG4gICAgfSk7XG5cbiAgICBsZXQgY29udGVudCA9IG1lc3NhZ2UuY29udGVudDtcblxuICAgIC8vIOWmguaenOaYr+WbvueJh+a2iOaBr+S4lOacieWbvueJh+aVsOaNru+8jOaPkOWPluaPj+i/sOmDqOWIhlxuICAgIGlmIChcbiAgICAgIG1lc3NhZ2UubWVzc2FnZVR5cGUgPT09ICdpbWFnZScgJiZcbiAgICAgIGhhc0ltYWdlRGF0YSAmJlxuICAgICAgKG1lc3NhZ2UuZGF0YT8udXBsb2FkZWRGaWxlIHx8IG1lc3NhZ2UuZGF0YT8uYmFzZTY0SW1hZ2UgfHwgbWVzc2FnZS5kYXRhPy5pbWFnZVVybClcbiAgICApIHtcbiAgICAgIC8vIOajgOa1i+e7hOWQiOagvOW8j++8iOWbvueJh1VSTCArIOaPj+i/sO+8iVxuICAgICAgY29uc3QgY29tYmluZWRSZWdleCA9IC9e5Zu+54mHVVJM77yaLio/XFxu5Zu+54mH5o+P6L+w77yaKC4qPykkLztcbiAgICAgIGNvbnN0IGNvbWJpbmVkTWF0Y2ggPSBjb250ZW50Lm1hdGNoKGNvbWJpbmVkUmVnZXgpO1xuICAgICAgaWYgKGNvbWJpbmVkTWF0Y2gpIHtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBjb21iaW5lZE1hdGNoWzFdIHx8ICcnO1xuXG4gICAgICAgIHJldHVybiBkZXNjcmlwdGlvbjtcbiAgICAgIH1cblxuICAgICAgLy8g5qOA5rWL5paH5Lu25qC85byP77yI5Zu+54mH5paH5Lu2ICsg5o+P6L+w77yJXG4gICAgICBjb25zdCBmaWxlUmVnZXggPSAvXuWbvueJh+aWh+S7tu+8mi4qPyg/OlxcbuWbvueJh+aPj+i/sO+8miguKj8pKT8kLztcbiAgICAgIGNvbnN0IGZpbGVNYXRjaCA9IGNvbnRlbnQubWF0Y2goZmlsZVJlZ2V4KTtcbiAgICAgIGlmIChmaWxlTWF0Y2gpIHtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBmaWxlTWF0Y2hbMV0gfHwgJyc7XG5cbiAgICAgICAgcmV0dXJuIGRlc2NyaXB0aW9uO1xuICAgICAgfVxuXG4gICAgICAvLyDlpoLmnpzmtojmga/lhoXlrrnlsLHmmK/mj4/ov7DvvIhiYXNlNjTlm77niYfmiJZVUkzlm77niYfnmoTmg4XlhrXvvIlcbiAgICAgIGlmICgobWVzc2FnZS5kYXRhPy5iYXNlNjRJbWFnZSB8fCBtZXNzYWdlLmRhdGE/LmltYWdlVXJsKSAmJiBjb250ZW50ICYmICFjb250ZW50LmluY2x1ZGVzKCfilZLilZDilZDilZDilZDilZAnKSkge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBbREVCVUddIOWbvueJh+a2iOaBr++8jOebtOaOpeS9v+eUqOWGheWuueS9nOS4uuaPj+i/sDonLCBjb250ZW50KTtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICB9XG5cbiAgICAgIC8vIOWmguaenOmDveS4jeWMuemFje+8jOi/lOWbnuepuuaPj+i/sFxuICAgICAgcmV0dXJuICcnO1xuICAgIH1cblxuICAgIC8vIOmdnuWbvueJh+a2iOaBr+aIluayoeacieWbvueJh+aWh+S7tu+8jOaMieWOn+mAu+i+keWkhOeQhlxuICAgIGlmIChtZXNzYWdlLm1lc3NhZ2VUeXBlICE9PSAndGV4dCcpIHtcbiAgICAgIGNvbnRlbnQgPSBgJHttZXNzYWdlLm1lc3NhZ2VUeXBlfToke2NvbnRlbnR9YDtcbiAgICB9XG5cbiAgICAvLyDnoa7kv53ov5Tlm57nmoTmmK/lrZfnrKbkuLJcbiAgICBpZiAodHlwZW9mIGNvbnRlbnQgIT09ICdzdHJpbmcnKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfwn5qoIFtFUlJPUl0gcHJvY2Vzc01lc3NhZ2VDb250ZW506L+U5Zue5LqG6Z2e5a2X56ym5LiyOicsIHR5cGVvZiBjb250ZW50LCBjb250ZW50KTtcbiAgICAgIHJldHVybiAnJzsgLy8g6L+U5Zue56m65a2X56ym5LiyXG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cblxuICAvKipcbiAgICog5p6E5bu65ZCI5bm255qE5o+Q56S66K+NXG4gICAqL1xuICBwcml2YXRlIGJ1aWxkQ29tYmluZWRQcm9tcHQobWVzc2FnZXM6IENoYXRNZXNzYWdlW10sIGhhc0ltYWdlRmlsZTogYm9vbGVhbiA9IGZhbHNlKTogc3RyaW5nIHtcbiAgICBpZiAobWVzc2FnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgLy8g6I635Y+W6IGK5aSp5pWw5o2uXG4gICAgY29uc3QgZmlyc3RNZXNzYWdlID0gbWVzc2FnZXNbMF07XG4gICAgY29uc3QgY2hhdERhdGEgPSB0aGlzLmNoYXREYXRhLmdldChmaXJzdE1lc3NhZ2UuY2hhdElkKTtcblxuICAgIC8vIOaehOW7uuWfuuehgOaPkOekuuivjVxuICAgIGxldCBiYXNlUHJvbXB0ID0gJyc7XG4gICAgaWYgKGNoYXREYXRhPy50eXBlID09PSAnZ3JvdXAnKSB7XG4gICAgICAvLyDnvqTogYrmoLzlvI9cbiAgICAgIGNvbnN0IGdyb3VwTmFtZSA9IGNoYXREYXRhLmNoYXROYW1lIHx8IGZpcnN0TWVzc2FnZS5jaGF0SWQ7XG4gICAgICBiYXNlUHJvbXB0ID0gYOWbnuWkjeWSjCR7Z3JvdXBOYW1lfeeahOiBiuWkqe+8mmA7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIOengeiBiuagvOW8j1xuICAgICAgY29uc3QgY2hhdE5hbWUgPSBjaGF0RGF0YT8uY2hhdE5hbWUgfHwgZmlyc3RNZXNzYWdlLmNoYXRJZDtcbiAgICAgIGNvbnN0IGNoYXJhY3Rlck5hbWUgPSB0aGlzLmV4dHJhY3RDaGFyYWN0ZXJOYW1lRnJvbUNoYXROYW1lKGNoYXROYW1lKTtcbiAgICAgIGJhc2VQcm9tcHQgPSBg5Zue5aSN5ZKMJHtjaGFyYWN0ZXJOYW1lfeeahOiBiuWkqe+8mmA7XG4gICAgfVxuXG4gICAgLy8g5aaC5p6c5Y+q5pyJ5LiA5p2h5raI5oGv77yM5L2/55So566A5Y2V5qC85byPXG4gICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgY29uc3QgcHJvY2Vzc2VkQ29udGVudCA9IHRoaXMucHJvY2Vzc01lc3NhZ2VDb250ZW50KG1lc3NhZ2VzWzBdLCBoYXNJbWFnZUZpbGUpO1xuICAgICAgcmV0dXJuIGAke2Jhc2VQcm9tcHR9JHtwcm9jZXNzZWRDb250ZW50fWA7XG4gICAgfVxuXG4gICAgLy8g5aSa5p2h5raI5oGv77yM5oyJ6aG65bqP57uE5ZCIXG4gICAgY29uc3QgbWVzc2FnZUNvbnRlbnRzID0gbWVzc2FnZXNcbiAgICAgIC5tYXAoKG1zZywgaW5kZXgpID0+IHtcbiAgICAgICAgLy8g5aSE55CG5raI5oGv5YaF5a6577yI5aaC5p6c5pyJ5Zu+54mH5paH5Lu277yM5Lya5o+Q5Y+W5o+P6L+w77yJXG4gICAgICAgIGNvbnN0IHByb2Nlc3NlZENvbnRlbnQgPSB0aGlzLnByb2Nlc3NNZXNzYWdlQ29udGVudChtc2csIGhhc0ltYWdlRmlsZSk7XG4gICAgICAgIHJldHVybiBgJHtpbmRleCArIDF9LiAke3Byb2Nlc3NlZENvbnRlbnR9YDtcbiAgICAgIH0pXG4gICAgICAuam9pbignXFxuJyk7XG5cbiAgICByZXR1cm4gYCR7YmFzZVByb21wdH1cXG4ke21lc3NhZ2VDb250ZW50c31gO1xuICB9XG5cbiAgLyoqXG4gICAqIOaehOW7uui3qOiBiuWkqeWQiOW5tuaPkOekuuivjVxuICAgKi9cbiAgcHJpdmF0ZSBidWlsZENyb3NzQ2hhdFByb21wdChtZXNzYWdlc0J5Q2hhdDogTWFwPHN0cmluZywgQ2hhdE1lc3NhZ2VbXT4pOiBzdHJpbmcge1xuICAgIGNvbnN0IGNoYXRQcm9tcHRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8g5qOA5p+l5piv5ZCm5pyJ5Zu+54mH5paH5Lu2XG4gICAgbGV0IGhhc0ltYWdlRmlsZSA9IGZhbHNlO1xuICAgIGZvciAoY29uc3QgW18sIG1lc3NhZ2VzXSBvZiBtZXNzYWdlc0J5Q2hhdCkge1xuICAgICAgaWYgKHRoaXMuZXh0cmFjdEltYWdlRmlsZUZyb21NZXNzYWdlcyhtZXNzYWdlcykpIHtcbiAgICAgICAgaGFzSW1hZ2VGaWxlID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBbY2hhdElkLCBtZXNzYWdlc10gb2YgbWVzc2FnZXNCeUNoYXQpIHtcbiAgICAgIGlmIChtZXNzYWdlcy5sZW5ndGggPT09IDApIGNvbnRpbnVlO1xuXG4gICAgICAvLyDojrflj5bogYrlpKnmlbDmja5cbiAgICAgIGNvbnN0IGNoYXREYXRhID0gdGhpcy5jaGF0RGF0YS5nZXQoY2hhdElkKTtcblxuICAgICAgLy8g5p6E5bu65Y2V5Liq6IGK5aSp55qE5o+Q56S66K+NXG4gICAgICBsZXQgY2hhdFByb21wdCA9ICcnO1xuICAgICAgaWYgKGNoYXREYXRhPy50eXBlID09PSAnZ3JvdXAnKSB7XG4gICAgICAgIC8vIOe+pOiBiuagvOW8j1xuICAgICAgICBjb25zdCBncm91cE5hbWUgPSBjaGF0RGF0YS5jaGF0TmFtZSB8fCBjaGF0SWQ7XG4gICAgICAgIGNoYXRQcm9tcHQgPSBg5Zue5aSN5ZKMJHtncm91cE5hbWV955qE6IGK5aSp77yaYDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOengeiBiuagvOW8j1xuICAgICAgICBjb25zdCBjaGF0TmFtZSA9IGNoYXREYXRhPy5jaGF0TmFtZSB8fCBjaGF0SWQ7XG4gICAgICAgIGNvbnN0IGNoYXJhY3Rlck5hbWUgPSB0aGlzLmV4dHJhY3RDaGFyYWN0ZXJOYW1lRnJvbUNoYXROYW1lKGNoYXROYW1lKTtcbiAgICAgICAgY2hhdFByb21wdCA9IGDlm57lpI3lkowke2NoYXJhY3Rlck5hbWV955qE6IGK5aSp77yaYDtcbiAgICAgIH1cblxuICAgICAgLy8g5re75Yqg5raI5oGv5YaF5a65XG4gICAgICBpZiAobWVzc2FnZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGNvbnN0IHByb2Nlc3NlZENvbnRlbnQgPSB0aGlzLnByb2Nlc3NNZXNzYWdlQ29udGVudChtZXNzYWdlc1swXSwgaGFzSW1hZ2VGaWxlKTtcbiAgICAgICAgY2hhdFByb21wdCArPSBwcm9jZXNzZWRDb250ZW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZUNvbnRlbnRzID0gbWVzc2FnZXNcbiAgICAgICAgICAubWFwKChtc2csIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcm9jZXNzZWRDb250ZW50ID0gdGhpcy5wcm9jZXNzTWVzc2FnZUNvbnRlbnQobXNnLCBoYXNJbWFnZUZpbGUpO1xuICAgICAgICAgICAgcmV0dXJuIGAke2luZGV4ICsgMX0uICR7cHJvY2Vzc2VkQ29udGVudH1gO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmpvaW4oJycpO1xuICAgICAgICBjaGF0UHJvbXB0ICs9IG1lc3NhZ2VDb250ZW50cztcbiAgICAgIH1cblxuICAgICAgY2hhdFByb21wdHMucHVzaChjaGF0UHJvbXB0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2hhdFByb21wdHMuam9pbignXFxuJyk7XG4gIH1cblxuICAvKipcbiAgICog5aSE55CG6Leo6IGK5aSpQUnlm57lpI1cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgaGFuZGxlQ3Jvc3NDaGF0QUlSZXNwb25zZShcbiAgICBhaVJlc3BvbnNlOiBzdHJpbmcsXG4gICAgbWVzc2FnZXNCeUNoYXQ6IE1hcDxzdHJpbmcsIENoYXRNZXNzYWdlW10+LFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8g5riF55CGQUnlhoXpg6jmgJ3ogIPmoIfnrb5cbiAgICAgIGNvbnN0IGNsZWFuZWRSZXNwb25zZSA9IHRoaXMuY2xlYW5BSUludGVybmFsVGFncyhhaVJlc3BvbnNlKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn6e5IOW3sua4heeQhkFJ5YaF6YOo5oCd6ICD5qCH562+Jyk7XG5cbiAgICAgIC8vIOaPkOWPluacgOWQjuS4gOWvuSA8YmVhcj48L2JlYXI+IOS4reeahOWGheWuuVxuICAgICAgY29uc3QgYmVhckNvbnRlbnQgPSB0aGlzLmV4dHJhY3RMYXN0QmVhckNvbnRlbnQoY2xlYW5lZFJlc3BvbnNlKTtcblxuICAgICAgaWYgKGJlYXJDb250ZW50KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5C7IOajgOa1i+WIsCBCZWFyIOagh+etvu+8jOW8gOWni+i3qOiBiuWkqeaVsOaNruWkhOeQhua1geeoiy4uLicpO1xuXG4gICAgICAgIC8vIEJlYXLmoLzlvI/vvJrmlbDmja7lpITnkIYg4oaSIOS/neWtmCDihpIg5riF56m66Zif5YiXIOKGkiDmuLLmn5NcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVDdXJyZW50TWVzc2FnZVdpdGhCZWFyQ29udGVudChiZWFyQ29udGVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+TnSDmnKrmib7liLBCZWFy5qCH562+77yM5L2/55SoL3NlbmRhc+i+k+WHuuWIsOaWsOalvOWxgi4uLicpO1xuXG4gICAgICAgIC8vIOmdnkJlYXLmoLzlvI/vvJrlj5HpgIHmtojmga/liLDlvZPliY3ogYrlpKlcbiAgICAgICAgLy8g5a+55LqO6Leo6IGK5aSp5Y+R6YCB77yM5oiR5Lus6YCJ5oup5pyA5ZCO5LiA5Liq6IGK5aSp5L2c5Li66L6T5Ye655uu5qCHXG4gICAgICAgIGNvbnN0IGxhc3RDaGF0SWQgPSBBcnJheS5mcm9tKG1lc3NhZ2VzQnlDaGF0LmtleXMoKSkucG9wKCk7XG4gICAgICAgIGNvbnN0IGxhc3RNZXNzYWdlcyA9IG1lc3NhZ2VzQnlDaGF0LmdldChsYXN0Q2hhdElkISk7XG4gICAgICAgIGlmIChsYXN0TWVzc2FnZXMgJiYgbGFzdE1lc3NhZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnNlbmRBSVJlc3BvbnNlVG9OZXdGbG9vcihjbGVhbmVkUmVzcG9uc2UsIGxhc3RNZXNzYWdlc1tsYXN0TWVzc2FnZXMubGVuZ3RoIC0gMV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCDlpITnkIbot6jogYrlpKlBSeWbnuWkjeWksei0pTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5riF56m65Y+R6YCB6Zif5YiXXG4gICAqL1xuICBwcml2YXRlIGNsZWFyU2VuZFF1ZXVlKCk6IHZvaWQge1xuICAgIHRoaXMuc2VuZFF1ZXVlID0gW107XG4gICAgY29uc29sZS5sb2coJ/Cfp7kg5Y+R6YCB6Zif5YiX5bey5riF56m6Jyk7XG4gIH1cblxuICAvKipcbiAgICog5aSE55CGQUnlm57lpI1cbiAgICog5paw55qE5omn6KGM6aG65bqP77ya5pWw5o2u5aSE55CGIOKGkiDmlbDmja7kv53lrZgg4oaSIOmYn+WIl+a4heepuiDihpIg55WM6Z2i5riy5p+TXG4gICAqIOehruS/neaVsOaNruWuieWFqOaAp++8jOmBv+WFjeWIt+aWsOWQjua2iOaBr+S4ouWksVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBoYW5kbGVBSVJlc3BvbnNlKGFpUmVzcG9uc2U6IHN0cmluZywgb3JpZ2luYWxNZXNzYWdlOiBDaGF0TWVzc2FnZSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyDmuIXnkIZBSeWGhemDqOaAneiAg+agh+etvlxuICAgICAgY29uc3QgY2xlYW5lZFJlc3BvbnNlID0gdGhpcy5jbGVhbkFJSW50ZXJuYWxUYWdzKGFpUmVzcG9uc2UpO1xuICAgICAgY29uc29sZS5sb2coJ/Cfp7kg5bey5riF55CGQUnlhoXpg6jmgJ3ogIPmoIfnrb4nKTtcblxuICAgICAgLy8g5o+Q5Y+W5pyA5ZCO5LiA5a+5IDxiZWFyPjwvYmVhcj4g5Lit55qE5YaF5a65XG4gICAgICBjb25zdCBiZWFyQ29udGVudCA9IHRoaXMuZXh0cmFjdExhc3RCZWFyQ29udGVudChjbGVhbmVkUmVzcG9uc2UpO1xuXG4gICAgICBpZiAoYmVhckNvbnRlbnQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CfkLsg5qOA5rWL5YiwIEJlYXIg5qCH562+77yM5byA5aeL5a6M5pW055qE5pWw5o2u5aSE55CG5rWB56iLLi4uJyk7XG5cbiAgICAgICAgLy8gQmVhcuagvOW8j++8muaVsOaNruWkhOeQhiDihpIg5L+d5a2YIOKGkiDmuIXnqbrpmJ/liJcg4oaSIOa4suafk1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUN1cnJlbnRNZXNzYWdlV2l0aEJlYXJDb250ZW50KGJlYXJDb250ZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5OdIOacquaJvuWIsEJlYXLmoIfnrb7vvIzkvb/nlKgvc2VuZGFz6L6T5Ye65Yiw5paw5qW85bGCLi4uJyk7XG5cbiAgICAgICAgLy8g6Z2eQmVhcuagvOW8j++8muWPkemAgea2iOaBryDihpIg5riF56m66Zif5YiXXG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZEFJUmVzcG9uc2VUb05ld0Zsb29yKGNsZWFuZWRSZXNwb25zZSwgb3JpZ2luYWxNZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIOWkhOeQhkFJ5Zue5aSN5aSx6LSlOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDkvb/nlKhzZXRDaGF0TWVzc2FnZXPmm7TmlrDlvZPliY3mpbzlsYLnmoRCZWFy5YaF5a65XG4gICAqIOaWsOeahOaJp+ihjOmhuuW6j++8muWFiOS/neWtmOaVsOaNru+8jOWGjea4heepuumYn+WIl++8jOacgOWQjua4suafk+eVjOmdolxuICAgKiDlj6rmm7/mjaI8YmVhcj48L2JlYXI+5qCH562+5YaF55qE5YaF5a6577yM5L+d55WZ5qCH562+5aSW55qE6KeE6IyD6KaB5rGCXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHVwZGF0ZUN1cnJlbnRNZXNzYWdlV2l0aEJlYXJDb250ZW50KGJlYXJDb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ/Cfk50g5byA5aeL5pu05pawQmVhcuWGheWuuScpO1xuXG4gICAgICAvLyDojrflj5bmnIDmlrDmpbzlsYLnmoTmtojmga9cbiAgICAgIGNvbnN0IGxhc3RNZXNzYWdlID0gZ2V0Q2hhdE1lc3NhZ2VzKC0xKVswXTtcbiAgICAgIGlmICghbGFzdE1lc3NhZ2UpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign4p2MIOaXoOazleiOt+WPluacgOaWsOalvOWxgua2iOaBrycpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGxhc3RNZXNzYWdlSWQgPSBsYXN0TWVzc2FnZS5tZXNzYWdlX2lkO1xuXG4gICAgICAvLyAxLiDlhYjmo4DmtYvmlrDmtojmga/vvIjlnKjlkIjlubbmlbDmja7kuYvliY3vvIlcbiAgICAgIGNvbnNvbGUubG9nKCfvv70gIFtERUJVR10g5byA5aeL5qOA5rWL5paw5raI5oGvLi4uJyk7XG4gICAgICBjb25zdCBuZXdNZXNzYWdlc1RvUmVuZGVyID0gYXdhaXQgdGhpcy5kZXRlY3ROZXdNZXNzYWdlc0JlZm9yZU1lcmdlKGJlYXJDb250ZW50KTtcblxuICAgICAgLy8gMi4g5ZCI5bm2QmVhcuWGheWuueWIsOeOsOacieiBiuWkqeaVsOaNru+8iOaVsOaNruWkhOeQhu+8iVxuICAgICAgY29uc3QgbWVyZ2VkQmVhckNvbnRlbnQgPSBhd2FpdCB0aGlzLm1lcmdlQmVhckNvbnRlbnRUb0V4aXN0aW5nRGF0YShiZWFyQ29udGVudCk7XG5cbiAgICAgIC8vIDMuIOaPkOWPluWOn+a2iOaBr+S4rTxiZWFyPuagh+etvuWklueahOWGheWuue+8jOWPquabv+aNouagh+etvuWGheeahOWGheWuuVxuICAgICAgY29uc3Qgb3JpZ2luYWxNZXNzYWdlID0gbGFzdE1lc3NhZ2UubWVzc2FnZSB8fCAnJztcbiAgICAgIGNvbnN0IHVwZGF0ZWRNZXNzYWdlID0gdGhpcy5yZXBsYWNlT25seUJlYXJUYWdDb250ZW50KG9yaWdpbmFsTWVzc2FnZSwgbWVyZ2VkQmVhckNvbnRlbnQpO1xuICAgICAgY29uc29sZS5sb2coJ/Cfkr4g5L+d5a2Y5pWw5o2u5YiwU2lsbHlUYXZlcm4uLi4nKTtcblxuICAgICAgYXdhaXQgc2V0Q2hhdE1lc3NhZ2VzKFxuICAgICAgICBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbWVzc2FnZV9pZDogbGFzdE1lc3NhZ2VJZCxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHVwZGF0ZWRNZXNzYWdlLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHsgcmVmcmVzaDogJ25vbmUnIH0sXG4gICAgICApO1xuXG4gICAgICBjb25zb2xlLmxvZygn4pyFIOW3suS9v+eUqHNldENoYXRNZXNzYWdlc+abtOaWsOW9k+WJjealvOWxgueahEJlYXLlhoXlrrnvvIjkv53nlZnmoIfnrb7lpJblhoXlrrnvvIknKTtcblxuICAgICAgLy8gNC4g5riF56m65Y+R6YCB6Zif5YiXXG4gICAgICB0aGlzLmNsZWFyU2VuZFF1ZXVlKCk7XG5cbiAgICAgIC8vIDQuNSDlnKjlhoXlrZjkuK3ov5vooYzigJxVSSDlpI3msLTigJ3vvJrkuLogdXNlciDnmoQgaW1hZ2Ug5LiU5pegIGRhdGEuKiDnmoTmtojmga/ooaXkuIrnvJPlrZjnmoTpooTop4jlm77vvIjku4XlhoXlrZjvvIzkuI3okL3nm5jvvIlcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMuY2hhdERhdGEuZm9yRWFjaChjaGF0ID0+IHtcbiAgICAgICAgICBjaGF0Lm1lc3NhZ2VzLmZvckVhY2gobXNnID0+IHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgbXNnLm1lc3NhZ2VUeXBlID09PSAnaW1hZ2UnICYmXG4gICAgICAgICAgICAgIHRoaXMuaXNVc2VyU2VuZGVyKG1zZy5zZW5kZXIpICYmXG4gICAgICAgICAgICAgICEobXNnLmRhdGE/LnVwbG9hZGVkRmlsZSB8fCBtc2cuZGF0YT8uYmFzZTY0SW1hZ2UgfHwgbXNnLmRhdGE/LmltYWdlVXJsKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNhY2hlZFNyYyA9IHRoaXMuZ2V0Q2FjaGVkVWlJbWFnZShtc2cpO1xuICAgICAgICAgICAgICBpZiAoY2FjaGVkU3JjKSB7XG4gICAgICAgICAgICAgICAgbXNnLmRhdGEgPSB7IC4uLihtc2cuZGF0YSB8fCB7fSksIGltYWdlVXJsOiBjYWNoZWRTcmMgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKHJlaHlkcmF0ZUVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignVUkg6aKE6KeI5Zu+57yT5a2Y5aSN5rC05aSx6LSlOicsIHJlaHlkcmF0ZUVycm9yKTtcbiAgICAgIH1cblxuICAgICAgLy8gNS4g5pyA5ZCO6L+b6KGM5YmN56uv55WM6Z2i5riy5p+T77yI5L2/55So5LmL5YmN5qOA5rWL5Yiw55qE5paw5raI5oGv77yJXG4gICAgICBhd2FpdCB0aGlzLnJlbmRlckRldGVjdGVkTmV3TWVzc2FnZXMobmV3TWVzc2FnZXNUb1JlbmRlcik7XG5cbiAgICAgIC8vIOabtOaWsGxhc3RCZWFyQ29udGVudOS4uuWujOaVtOeahOWQiOW5tuWQjuWGheWuuVxuICAgICAgdGhpcy5sYXN0QmVhckNvbnRlbnQgPSBtZXJnZWRCZWFyQ29udGVudDtcblxuICAgICAgLy8g5Yi35paw6IGK5aSp5YiX6KGo5Lul5pi+56S65pyA5paw5raI5oGvXG4gICAgICBpZiAodGhpcy5jaGF0TGlzdE1hbmFnZXIpIHtcbiAgICAgICAgdGhpcy5jaGF0TGlzdE1hbmFnZXIucmVmcmVzaENoYXRMaXN0KHRoaXMuY2hhdERhdGEpO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZygn4pyFIEFJ5Zue5aSN5aSE55CG5a6M5oiQ77yI5pWw5o2u5bey5a6J5YWo5L+d5a2Y77yJJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCDmm7TmlrBCZWFy5YaF5a655aSx6LSlOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlj6rmm7/mjaI8YmVhcj48L2JlYXI+5qCH562+5YaF55qE5YaF5a6577yM5L+d55WZ5qCH562+5aSW55qE5YaF5a65XG4gICAqIEBwYXJhbSBvcmlnaW5hbE1lc3NhZ2Ug5Y6f5aeL5raI5oGv5YaF5a65XG4gICAqIEBwYXJhbSBuZXdCZWFyQ29udGVudCDmlrDnmoRiZWFy5qCH562+5YaF5a65XG4gICAqIEByZXR1cm5zIOabtOaWsOWQjueahOWujOaVtOa2iOaBr1xuICAgKi9cbiAgcHJpdmF0ZSByZXBsYWNlT25seUJlYXJUYWdDb250ZW50KG9yaWdpbmFsTWVzc2FnZTogc3RyaW5nLCBuZXdCZWFyQ29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyDkvb/nlKjmraPliJnooajovr7lvI/ljLnphY08YmVhcj7moIfnrb7vvIzmj5Dlj5bmoIfnrb7liY3lkI7nmoTlhoXlrrlcbiAgICBjb25zdCBiZWFyUmVnZXggPSAvPGJlYXI+KFtcXHNcXFNdKj8pPFxcL2JlYXI+LztcbiAgICBjb25zdCBtYXRjaCA9IG9yaWdpbmFsTWVzc2FnZS5tYXRjaChiZWFyUmVnZXgpO1xuXG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICAvLyDlpoLmnpzmib7liLDkuoY8YmVhcj7moIfnrb7vvIzlj6rmm7/mjaLmoIfnrb7lhoXnmoTlhoXlrrlcbiAgICAgIGNvbnN0IGJlZm9yZUJlYXIgPSBvcmlnaW5hbE1lc3NhZ2Uuc3Vic3RyaW5nKDAsIG1hdGNoLmluZGV4KTtcbiAgICAgIGNvbnN0IGFmdGVyQmVhciA9IG9yaWdpbmFsTWVzc2FnZS5zdWJzdHJpbmcobWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGgpO1xuXG4gICAgICByZXR1cm4gYCR7YmVmb3JlQmVhcn08YmVhcj4ke25ld0JlYXJDb250ZW50fTwvYmVhcj4ke2FmdGVyQmVhcn1gO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyDlpoLmnpzmsqHmnInmib7liLA8YmVhcj7moIfnrb7vvIznm7TmjqXmt7vliqDmlrDnmoRiZWFy5YaF5a65XG4gICAgICBjb25zb2xlLmxvZygn8J+TnSDmnKrmib7liLDnjrDmnIliZWFy5qCH562+77yM55u05o6l5re75Yqg5paw5YaF5a65Jyk7XG4gICAgICByZXR1cm4gYCR7b3JpZ2luYWxNZXNzYWdlfTxiZWFyPiR7bmV3QmVhckNvbnRlbnR9PC9iZWFyPmA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOWwhkJlYXLlhoXlrrnlkIjlubbliLDnjrDmnInogYrlpKnmlbDmja7kuK1cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgbWVyZ2VCZWFyQ29udGVudFRvRXhpc3RpbmdEYXRhKG5ld0JlYXJDb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+UhCDlvIDlp4vlkIjlubZCZWFy5YaF5a65Jyk7XG5cbiAgICAgIC8vID09PSDmlrnmoYhB77ya5Zue54GM5py65Yi2ID09PVxuICAgICAgLy8g5Zyo5ZCI5bm25YmN77yM5YWI5LuO5b2T5YmN5qW85bGC5paH5pys5Lit5Zue54GMIFvliqjmgIFdIOWuueWZqOWGheWuueWIsOWGheWtmOaxoFxuICAgICAgYXdhaXQgdGhpcy5iYWNrZmlsbER5bmFtaWNzRnJvbUN1cnJlbnRNZXNzYWdlKCk7XG5cbiAgICAgIC8vIOino+aekOaWsOeahEJlYXLlhoXlrrnvvIjljIXmi6zogYrlpKnlkozliqjmgIHvvIlcbiAgICAgIGNvbnN0IHBhcnNlUmVzdWx0ID0gYXdhaXQgdGhpcy5tZXNzYWdlUGFyc2VyLnBhcnNlQmVhckNvbnRlbnRQbHVzKG5ld0JlYXJDb250ZW50KTtcbiAgICAgIGNvbnN0IG5ld01lc3NhZ2VzID0gcGFyc2VSZXN1bHQuY2hhdE1hcDtcbiAgICAgIGNvbnN0IG5ld0R5bmFtaWNzID0gcGFyc2VSZXN1bHQuZHluYW1pY3M7XG5cbiAgICAgIC8vIOWKqOaAgeaVsOaNruWwhuWcqOWQjue7reeahOWQiOW5tumAu+i+keS4ree7n+S4gOWkhOeQhlxuXG4gICAgICAvLyDmo4Dmn6Xov4Hnp7vlip/og73mmK/lkKblkK/nlKhcbiAgICAgIGNvbnN0IGNoYXRNaWdyYXRpb25NYW5hZ2VyID0gQ2hhdE1pZ3JhdGlvbk1hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcbiAgICAgIGNvbnN0IGlzTWlncmF0aW9uRW5hYmxlZCA9IGNoYXRNaWdyYXRpb25NYW5hZ2VyLmlzRmVhdHVyZUVuYWJsZWQoKTtcblxuICAgICAgLy8g5qOA5p+l5piv5ZCm5a2Y5Zyo5aSa5LiqQmVhcualvOWxglxuICAgICAgY29uc3QgaGFzTXVsdGlwbGVCZWFyRmxvb3JzID0gYXdhaXQgdGhpcy5oYXNNdWx0aXBsZUJlYXJGbG9vcnMoKTtcblxuICAgICAgY29uc29sZS5sb2coJ/CflI0g5qW85bGC54q25oCB5YiG5p6QOicsIHtcbiAgICAgICAgaGFzTXVsdGlwbGVCZWFyRmxvb3JzLFxuICAgICAgICBpc01pZ3JhdGlvbkVuYWJsZWQsXG4gICAgICAgIGV4aXN0aW5nQ2hhdENvdW50OiB0aGlzLmNoYXREYXRhLnNpemUsXG4gICAgICB9KTtcblxuICAgICAgLy8g6buY6K6k5oOF5Ya177ya5L2/55So57Sv56ev5qih5byP77yI5ZKM6L+B56e75byA5ZCv5pe25LiA5qC355qE6YC76L6R77yJXG4gICAgICAvLyDnibnmrormg4XlhrXvvJrlj6rmnInlvZPlrZjlnKjlpJrkuKpCZWFy5qW85bGC5LiU6L+B56e75Yqf6IO956aB55So5pe277yM5omN5L2/55So5YiG56a75qih5byPXG4gICAgICBjb25zdCBzaG91bGRVc2VTZXBhcmF0ZU1vZGUgPSBoYXNNdWx0aXBsZUJlYXJGbG9vcnMgJiYgIWlzTWlncmF0aW9uRW5hYmxlZDtcblxuICAgICAgaWYgKCFzaG91bGRVc2VTZXBhcmF0ZU1vZGUpIHtcbiAgICAgICAgLy8g6buY6K6k5qih5byP77ya57Sv56ev5Y6G5Y+y5raI5oGv77yI5ZKM6L+B56e75byA5ZCv5pe25LiA5qC355qE6YC76L6R77yJXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SEIOe0r+enr+aooeW8j++8muWQiOW5tuWOhuWPsua2iOaBryArIOaWsOa2iOaBrycpO1xuXG4gICAgICAgIC8vIDEuIOWQiOW5tuiBiuWkqeaVsOaNrlxuICAgICAgICBmb3IgKGNvbnN0IFtjaGF0SWQsIG5ld0NoYXREYXRhXSBvZiBuZXdNZXNzYWdlcykge1xuICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQ2hhdERhdGEgPSB0aGlzLmNoYXREYXRhLmdldChjaGF0SWQpO1xuXG4gICAgICAgICAgaWYgKGV4aXN0aW5nQ2hhdERhdGEpIHtcbiAgICAgICAgICAgIC8vIOWmguaenOiBiuWkqeW3suWtmOWcqO+8jOWQiOW5tua2iOaBr++8iOWOu+mHjeW5tuaMieaXtumXtOaOkuW6j++8iVxuICAgICAgICAgICAgY29uc3QgbWVyZ2VkTWVzc2FnZXMgPSB0aGlzLm1lcmdlTWVzc2FnZXMoZXhpc3RpbmdDaGF0RGF0YS5tZXNzYWdlcywgbmV3Q2hhdERhdGEubWVzc2FnZXMpO1xuICAgICAgICAgICAgZXhpc3RpbmdDaGF0RGF0YS5tZXNzYWdlcyA9IG1lcmdlZE1lc3NhZ2VzO1xuICAgICAgICAgICAgZXhpc3RpbmdDaGF0RGF0YS5sYXN0TWVzc2FnZSA9XG4gICAgICAgICAgICAgIG1lcmdlZE1lc3NhZ2VzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICA/IHRoaXMubWVzc2FnZVBhcnNlci5mb3JtYXRMYXN0TWVzc2FnZShtZXJnZWRNZXNzYWdlc1ttZXJnZWRNZXNzYWdlcy5sZW5ndGggLSAxXSlcbiAgICAgICAgICAgICAgICA6ICcnO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+TnSDntK/np6/ogYrlpKkgJHtjaGF0SWR977yM546w5pyJICR7bWVyZ2VkTWVzc2FnZXMubGVuZ3RofSDmnaHmtojmga9gKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8g5aaC5p6c5piv5paw6IGK5aSp77yM55u05o6l5re75YqgXG4gICAgICAgICAgICB0aGlzLmNoYXREYXRhLnNldChjaGF0SWQsIG5ld0NoYXREYXRhKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn4aVIOa3u+WKoOaWsOiBiuWkqSAke2NoYXRJZH3vvIzljIXlkKsgJHtuZXdDaGF0RGF0YS5tZXNzYWdlcy5sZW5ndGh9IOadoea2iOaBr2ApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDIuIOWQiOW5tuWKqOaAgeaVsOaNru+8iOexu+S8vOiBiuWkqea2iOaBr+eahOWQiOW5tumAu+i+ke+8iVxuICAgICAgICBpZiAobmV3RHluYW1pY3MgJiYgbmV3RHluYW1pY3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRoaXMuZHluYW1pY3NEYXRhID0gdGhpcy5tZXJnZUR5bmFtaWNzRGF0YSh0aGlzLmR5bmFtaWNzRGF0YSwgbmV3RHluYW1pY3MpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5OdIOWQiOW5tuWKqOaAgeaVsOaNru+8jOW9k+WJjeWFsSAke3RoaXMuZHluYW1pY3NEYXRhLmxlbmd0aH0g5p2h5Yqo5oCBYCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAzLiDph43mlrDmnoTlu7rlrozmlbTnmoRCZWFy5YaF5a6577yI5YyF5ZCr5ZCI5bm25ZCO55qE6IGK5aSp5ZKM5Yqo5oCB5pWw5o2u77yJXG4gICAgICAgIGNvbnN0IGNvbXBsZXRlQmVhckNvbnRlbnQgPSB0aGlzLm1lc3NhZ2VQYXJzZXIuYnVpbGRCZWFyQ29udGVudFBsdXMoe1xuICAgICAgICAgIGNoYXRNYXA6IHRoaXMuY2hhdERhdGEsXG4gICAgICAgICAgZHluYW1pY3M6IHRoaXMuZHluYW1pY3NEYXRhLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zb2xlLmxvZygn4pyFIEJlYXLlhoXlrrnlpITnkIblrozmiJDvvIjntK/np6/mqKHlvI/vvJrljIXlkKvljoblj7Lmtojmga/lkozliqjmgIHvvIknKTtcbiAgICAgICAgcmV0dXJuIGNvbXBsZXRlQmVhckNvbnRlbnQucmVwbGFjZSgnPGJlYXI+JywgJycpLnJlcGxhY2UoJzwvYmVhcj4nLCAnJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyDnibnmrormg4XlhrXvvJrlpJrkuKpCZWFy5qW85bGCICsg6L+B56e75Yqf6IO956aB55SoIC0g5YiG56a75qih5byP77ya5Zyo5b2T5YmN5qW85bGC5YaF5a655Z+656GA5LiK57Sv56evXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SEIOWIhuemu+aooeW8j++8muWcqOW9k+WJjealvOWxguWGheWuueWfuuehgOS4iue0r+enr+aWsOa2iOaBrycpO1xuXG4gICAgICAgIC8vIDEuIOiOt+WPluW9k+WJjealvOWxgueahEJlYXLlhoXlrrlcbiAgICAgICAgY29uc3QgbGFzdE1lc3NhZ2UgPSBnZXRDaGF0TWVzc2FnZXMoLTEpWzBdO1xuICAgICAgICBjb25zdCBjdXJyZW50QmVhckNvbnRlbnQgPSB0aGlzLm1lc3NhZ2VQYXJzZXIuZXh0cmFjdEJlYXJDb250ZW50RnJvbVRleHQobGFzdE1lc3NhZ2U/Lm1lc3NhZ2UgfHwgJycpO1xuXG4gICAgICAgIC8vIDIuIOino+aekOW9k+WJjealvOWxguW3suacieeahOWGheWuuVxuICAgICAgICBsZXQgY3VycmVudENoYXREYXRhOiBNYXA8c3RyaW5nLCBDaGF0RGF0YT4gPSBuZXcgTWFwPHN0cmluZywgQ2hhdERhdGE+KCk7XG4gICAgICAgIGxldCBjdXJyZW50RHluYW1pY3NEYXRhOiBSYXdQb3N0RGF0YVtdID0gW107XG5cbiAgICAgICAgaWYgKGN1cnJlbnRCZWFyQ29udGVudCkge1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnRQYXJzZVJlc3VsdCA9IGF3YWl0IHRoaXMubWVzc2FnZVBhcnNlci5wYXJzZUJlYXJDb250ZW50UGx1cyhjdXJyZW50QmVhckNvbnRlbnQpO1xuICAgICAgICAgIGN1cnJlbnRDaGF0RGF0YSA9IGN1cnJlbnRQYXJzZVJlc3VsdC5jaGF0TWFwO1xuICAgICAgICAgIGN1cnJlbnREeW5hbWljc0RhdGEgPSBjdXJyZW50UGFyc2VSZXN1bHQuZHluYW1pY3MgfHwgW107XG4gICAgICAgIH1cblxuICAgICAgICAvLyAzLiDlkIjlubblvZPliY3mpbzlsYLlhoXlrrkgKyDmlrDlhoXlrrlcbiAgICAgICAgLy8g5ZCI5bm26IGK5aSp5pWw5o2uXG4gICAgICAgIGZvciAoY29uc3QgW2NoYXRJZCwgbmV3Q2hhdERhdGFdIG9mIG5ld01lc3NhZ2VzKSB7XG4gICAgICAgICAgY29uc3QgZXhpc3RpbmdDaGF0RGF0YSA9IGN1cnJlbnRDaGF0RGF0YS5nZXQoY2hhdElkKTtcblxuICAgICAgICAgIGlmIChleGlzdGluZ0NoYXREYXRhKSB7XG4gICAgICAgICAgICAvLyDlpoLmnpzogYrlpKnlt7LlrZjlnKjvvIzlkIjlubbmtojmga/vvIjljrvph43lubbmjInml7bpl7TmjpLluo/vvIlcbiAgICAgICAgICAgIGNvbnN0IG1lcmdlZE1lc3NhZ2VzID0gdGhpcy5tZXJnZU1lc3NhZ2VzKGV4aXN0aW5nQ2hhdERhdGEubWVzc2FnZXMsIG5ld0NoYXREYXRhLm1lc3NhZ2VzKTtcbiAgICAgICAgICAgIGV4aXN0aW5nQ2hhdERhdGEubWVzc2FnZXMgPSBtZXJnZWRNZXNzYWdlcztcbiAgICAgICAgICAgIGV4aXN0aW5nQ2hhdERhdGEubGFzdE1lc3NhZ2UgPVxuICAgICAgICAgICAgICBtZXJnZWRNZXNzYWdlcy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgPyB0aGlzLm1lc3NhZ2VQYXJzZXIuZm9ybWF0TGFzdE1lc3NhZ2UobWVyZ2VkTWVzc2FnZXNbbWVyZ2VkTWVzc2FnZXMubGVuZ3RoIC0gMV0pXG4gICAgICAgICAgICAgICAgOiAnJztcblxuICAgICAgICAgICAgY29uc29sZS5sb2coYPCfk50g5YiG56a75qih5byP77ya5ZCI5bm25qW85bGC6IGK5aSpICR7Y2hhdElkfe+8jOeOsOaciSAke21lcmdlZE1lc3NhZ2VzLmxlbmd0aH0g5p2h5raI5oGvYCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIOWmguaenOaYr+aWsOiBiuWkqe+8jOebtOaOpea3u+WKoFxuICAgICAgICAgICAgY3VycmVudENoYXREYXRhLnNldChjaGF0SWQsIG5ld0NoYXREYXRhKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn4aVIOWIhuemu+aooeW8j++8mua3u+WKoOaWsOiBiuWkqSAke2NoYXRJZH3vvIzljIXlkKsgJHtuZXdDaGF0RGF0YS5tZXNzYWdlcy5sZW5ndGh9IOadoea2iOaBr2ApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOWQiOW5tuWKqOaAgeaVsOaNrlxuICAgICAgICBpZiAobmV3RHluYW1pY3MgJiYgbmV3RHluYW1pY3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGN1cnJlbnREeW5hbWljc0RhdGEgPSB0aGlzLm1lcmdlRHluYW1pY3NEYXRhKGN1cnJlbnREeW5hbWljc0RhdGEsIG5ld0R5bmFtaWNzKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhg8J+TnSDliIbnprvmqKHlvI/vvJrlkIjlubbliqjmgIHmlbDmja7vvIzlvZPliY3mpbzlsYLlhbEgJHtjdXJyZW50RHluYW1pY3NEYXRhLmxlbmd0aH0g5p2h5Yqo5oCBYCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyA0LiDmm7TmlrDnlYzpnaLmlbDmja7vvIjnlKjkuo7mmL7npLrvvIlcbiAgICAgICAgdGhpcy51cGRhdGVJbnRlcmZhY2VEYXRhV2l0aE5ld01lc3NhZ2VzKG5ld01lc3NhZ2VzKTtcbiAgICAgICAgaWYgKG5ld0R5bmFtaWNzICYmIG5ld0R5bmFtaWNzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aGlzLmR5bmFtaWNzRGF0YSA9IHRoaXMubWVyZ2VEeW5hbWljc0RhdGEodGhpcy5keW5hbWljc0RhdGEsIG5ld0R5bmFtaWNzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDUuIOaehOW7uualvOWxguS/neWtmOWGheWuue+8iOW9k+WJjealvOWxguWGheWuuSArIOaWsOWGheWuue+8iVxuICAgICAgICBjb25zdCBtZXJnZWRCZWFyQ29udGVudCA9IHRoaXMubWVzc2FnZVBhcnNlci5idWlsZEJlYXJDb250ZW50UGx1cyh7XG4gICAgICAgICAgY2hhdE1hcDogY3VycmVudENoYXREYXRhLFxuICAgICAgICAgIGR5bmFtaWNzOiBjdXJyZW50RHluYW1pY3NEYXRhLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zb2xlLmxvZygn4pyFIEJlYXLlhoXlrrnlpITnkIblrozmiJDvvIjliIbnprvmqKHlvI/vvJrlvZPliY3mpbzlsYLlhoXlrrkgKyDmlrDlhoXlrrnvvIknKTtcbiAgICAgICAgcmV0dXJuIG1lcmdlZEJlYXJDb250ZW50LnJlcGxhY2UoJzxiZWFyPicsICcnKS5yZXBsYWNlKCc8L2JlYXI+JywgJycpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwg5ZCI5bm2QmVhcuWGheWuueWksei0pTonLCBlcnJvcik7XG4gICAgICAvLyDlpoLmnpzlkIjlubblpLHotKXvvIzov5Tlm57ljp/lp4vlhoXlrrlcbiAgICAgIHJldHVybiBuZXdCZWFyQ29udGVudDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5ZCI5bm25raI5oGv5pWw57uE77yI5paw5raI5oGv5rC46L+c5o6S5Zyo5pyA5ZCO77yJXG4gICAqL1xuICBwcml2YXRlIG1lcmdlTWVzc2FnZXMoZXhpc3RpbmdNZXNzYWdlczogQ2hhdE1lc3NhZ2VbXSwgbmV3TWVzc2FnZXM6IENoYXRNZXNzYWdlW10pOiBDaGF0TWVzc2FnZVtdIHtcbiAgICBjb25zb2xlLmxvZyhg8J+UhCDlkIjlubbmtojmga86IOeOsOaciSAke2V4aXN0aW5nTWVzc2FnZXMubGVuZ3RofSwg5paw5aKeICR7bmV3TWVzc2FnZXMubGVuZ3RofWApO1xuXG4gICAgLy8g5Yib5bu6546w5pyJ5raI5oGv55qE5oyH57q56ZuG5ZCI77yM55So5LqO5Y676YeNXG4gICAgY29uc3QgZXhpc3RpbmdGaW5nZXJwcmludHMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgZXhpc3RpbmdNZXNzYWdlcykge1xuICAgICAgY29uc3QgZmluZ2VycHJpbnQgPSB0aGlzLmdlbmVyYXRlTWVzc2FnZUZpbmdlcnByaW50KG1lc3NhZ2UpO1xuICAgICAgZXhpc3RpbmdGaW5nZXJwcmludHMuYWRkKGZpbmdlcnByaW50KTtcbiAgICB9XG5cbiAgICAvLyDov4fmu6Tlh7rnnJ/mraPnmoTmlrDmtojmga/vvIjljrvph43vvIlcbiAgICBjb25zdCBhY3R1YWxOZXdNZXNzYWdlczogQ2hhdE1lc3NhZ2VbXSA9IFtdO1xuICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBuZXdNZXNzYWdlcykge1xuICAgICAgY29uc3QgZmluZ2VycHJpbnQgPSB0aGlzLmdlbmVyYXRlTWVzc2FnZUZpbmdlcnByaW50KG1lc3NhZ2UpO1xuICAgICAgY29uc3QgaXNOZXcgPSAhZXhpc3RpbmdGaW5nZXJwcmludHMuaGFzKGZpbmdlcnByaW50KTtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBg8J+UhCBbREVCVUddICR7aXNOZXcgPyAn5re75Yqg5paw5raI5oGvJyA6ICfot7Pov4fph43lpI3mtojmga8nfTogXCIke2ZpbmdlcnByaW50fVwiLCDlj5HpgIHogIU6IFwiJHtcbiAgICAgICAgICBtZXNzYWdlLnNlbmRlclxuICAgICAgICB9XCIsIOWGheWuuTogXCIke21lc3NhZ2UuY29udGVudC5zdWJzdHJpbmcoMCwgMzApfS4uLlwiYCxcbiAgICAgICk7XG5cbiAgICAgIGlmIChpc05ldykge1xuICAgICAgICBhY3R1YWxOZXdNZXNzYWdlcy5wdXNoKG1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIOWvueaWsOa2iOaBr+WGhemDqOaMieaXtumXtOaOkuW6j++8iOS/neivgeaWsOa2iOaBr+S5i+mXtOeahOmhuuW6j+ato+ehru+8iVxuICAgIGFjdHVhbE5ld01lc3NhZ2VzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmNvbXBhcmVNZXNzYWdlVGltZXN0YW1wcyhhLnRpbWVzdGFtcCwgYi50aW1lc3RhbXApO1xuICAgIH0pO1xuXG4gICAgLy8g566A5Y2V5ZCI5bm277ya546w5pyJ5raI5oGvICsg5paw5raI5oGv77yI5paw5raI5oGv5rC46L+c5Zyo5pyA5ZCO77yJXG4gICAgY29uc3QgbWVyZ2VkTWVzc2FnZXMgPSBbLi4uZXhpc3RpbmdNZXNzYWdlcywgLi4uYWN0dWFsTmV3TWVzc2FnZXNdO1xuXG4gICAgY29uc29sZS5sb2coYPCflIQg5ZCI5bm25a6M5oiQ77yM5pyA57uI5raI5oGv5pWw6YePOiAke21lcmdlZE1lc3NhZ2VzLmxlbmd0aH3vvIzmlrDlop46ICR7YWN0dWFsTmV3TWVzc2FnZXMubGVuZ3RofWApO1xuICAgIHJldHVybiBtZXJnZWRNZXNzYWdlcztcbiAgfVxuXG4gIC8qKlxuICAgKiDmlrnmoYhB77ya5LuO5b2T5YmN5qW85bGC5paH5pys5Zue54GM5Yqo5oCB5pWw5o2u5Yiw5YaF5a2Y5rGgXG4gICAqIOehruS/neWQjue7remHjeW7uuS4jeS8muS4ouWkseWImuWImuaPkuWFpeeahOS6kuWKqOihjFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBiYWNrZmlsbER5bmFtaWNzRnJvbUN1cnJlbnRNZXNzYWdlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+UhCBb5Zue54GMXSDlvIDlp4vku47lvZPliY3mpbzlsYLlm57ngYzliqjmgIHmlbDmja4nKTtcblxuICAgICAgLy8gMS4g6I635Y+W5b2T5YmN5pyA5ZCO5qW85bGC5paH5pys77yI5L2/55So5q2j56Gu55qEQVBJ77yJXG4gICAgICBjb25zdCBtZXNzYWdlcyA9IGdldENoYXRNZXNzYWdlcygtMSk7XG4gICAgICBpZiAoIW1lc3NhZ2VzIHx8IG1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zb2xlLmxvZygn4oS577iPIFvlm57ngYxdIOacquaJvuWIsOW9k+WJjealvOWxgu+8jOi3s+i/h+WbnueBjCcpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGxhc3RNZXNzYWdlID0gbWVzc2FnZXNbMF07XG4gICAgICBjb25zdCBvcmlnaW5hbE1lc3NhZ2UgPSBsYXN0TWVzc2FnZS5tZXNzYWdlIHx8ICcnO1xuXG4gICAgICAvLyAyLiDmj5Dlj5bljp/lp4sgW+WKqOaAgV0g5a655Zmo5paH5pysXG4gICAgICBjb25zdCBkeW5hbWljc0NvbnRhaW5lck1hdGNoID0gb3JpZ2luYWxNZXNzYWdlLm1hdGNoKC9cXFvliqjmgIFcXF0oW1xcc1xcU10qPylcXFtcXC/liqjmgIFcXF0vKTtcbiAgICAgIGlmICghZHluYW1pY3NDb250YWluZXJNYXRjaCkge1xuICAgICAgICBjb25zb2xlLmxvZygn4oS577iPIFvlm57ngYxdIOW9k+WJjealvOWxguaXoCBb5Yqo5oCBXSDlrrnlmajvvIzot7Pov4flm57ngYwnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBvcmlnaW5hbENvbnRhaW5lclRleHQgPSBkeW5hbWljc0NvbnRhaW5lck1hdGNoWzBdO1xuICAgICAgY29uc29sZS5sb2coJ/Cfk50gW+WbnueBjF0g5o+Q5Y+W5Yiw5Y6f5aeL5a655Zmo5paH5pys77yM6ZW/5bqmOicsIG9yaWdpbmFsQ29udGFpbmVyVGV4dC5sZW5ndGgpO1xuXG4gICAgICAvLyAzLiDop6PmnpDlvZPliY3mpbzlsYLnmoTliqjmgIHmlbDmja5cbiAgICAgIGNvbnN0IHBhcnNlUmVzdWx0ID0gYXdhaXQgdGhpcy5tZXNzYWdlUGFyc2VyLnBhcnNlQmVhckNvbnRlbnRQbHVzKG9yaWdpbmFsQ29udGFpbmVyVGV4dCk7XG4gICAgICBjb25zdCB0ZXh0RHluYW1pY3MgPSBwYXJzZVJlc3VsdC5keW5hbWljcztcblxuICAgICAgaWYgKHRleHREeW5hbWljcyAmJiB0ZXh0RHluYW1pY3MubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyA0LiDlkIjlubbliLDlhoXlrZjmsaBcbiAgICAgICAgdGhpcy5keW5hbWljc0RhdGEgPSB0aGlzLm1lcmdlRHluYW1pY3NEYXRhKHRoaXMuZHluYW1pY3NEYXRhLCB0ZXh0RHluYW1pY3MpO1xuICAgICAgICBjb25zb2xlLmxvZyhg4pyFIFvlm57ngYxdIOaIkOWKn+WbnueBjCAke3RleHREeW5hbWljcy5sZW5ndGh9IOadoeWKqOaAgeaVsOaNruWIsOWGheWtmOaxoGApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KEue+4jyBb5Zue54GMXSDlvZPliY3mpbzlsYLml6DliqjmgIHmlbDmja7pnIDopoHlm57ngYwnKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIFvlm57ngYxdIOWbnueBjOWKqOaAgeaVsOaNruWksei0pTonLCBlcnJvcik7XG4gICAgICAvLyDlm57ngYzlpLHotKXkuI3lupTor6XlvbHlk43kuLvmtYHnqIvvvIzlj6rorrDlvZXplJnor69cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5ZCI5bm25Yqo5oCB5pWw5o2u5pWw57uE77yI57G75Ly8bWVyZ2VNZXNzYWdlc+eahOmAu+i+ke+8iVxuICAgKiDkv67lpI3vvJrkv53mjIHljp/lp4vmjqXmlLbpobrluo/vvIzkuI3ov5vooYzoh6rliqjmjpLluo9cbiAgICovXG4gIHByaXZhdGUgbWVyZ2VEeW5hbWljc0RhdGEoZXhpc3RpbmdEeW5hbWljczogUmF3UG9zdERhdGFbXSwgbmV3RHluYW1pY3M6IFJhd1Bvc3REYXRhW10pOiBSYXdQb3N0RGF0YVtdIHtcbiAgICBjb25zb2xlLmxvZyhg8J+UhCDlkIjlubbliqjmgIHmlbDmja46IOeOsOaciSAke2V4aXN0aW5nRHluYW1pY3MubGVuZ3RofSwg5paw5aKeICR7bmV3RHluYW1pY3MubGVuZ3RofWApO1xuXG4gICAgLy8g5Yib5bu6546w5pyJ5Yqo5oCB55qE57yW5Y+35Yiw57Si5byV55qE5pig5bCE77yM55So5LqO5pu057K+56Gu55qE5Yy56YWNXG4gICAgY29uc3QgZXhpc3RpbmdEeW5hbWljc01hcCA9IG5ldyBNYXA8bnVtYmVyLCBSYXdQb3N0RGF0YT4oKTtcbiAgICBmb3IgKGNvbnN0IGR5bmFtaWMgb2YgZXhpc3RpbmdEeW5hbWljcykge1xuICAgICAgaWYgKGR5bmFtaWMubm8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBleGlzdGluZ0R5bmFtaWNzTWFwLnNldChkeW5hbWljLm5vLCBkeW5hbWljKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDlpITnkIbmlrDliqjmgIHmlbDmja5cbiAgICBjb25zdCBhY3R1YWxOZXdEeW5hbWljczogUmF3UG9zdERhdGFbXSA9IFtdO1xuICAgIGZvciAoY29uc3QgZHluYW1pYyBvZiBuZXdEeW5hbWljcykge1xuICAgICAgaWYgKGR5bmFtaWMubm8gIT09IHVuZGVmaW5lZCAmJiBleGlzdGluZ0R5bmFtaWNzTWFwLmhhcyhkeW5hbWljLm5vKSkge1xuICAgICAgICAvLyDlpoLmnpzliqjmgIHlt7LlrZjlnKjvvIjmjInnvJblj7fljLnphY3vvInvvIzlkIjlubbngrnotZ7lkozor4TorrrmlbDmja5cbiAgICAgICAgY29uc3QgZXhpc3RpbmdEeW5hbWljID0gZXhpc3RpbmdEeW5hbWljc01hcC5nZXQoZHluYW1pYy5ubykhO1xuICAgICAgICBjb25zb2xlLmxvZyhg8J+UhCDlkIjlubbliqjmgIEgIyR7ZHluYW1pYy5ub30g55qE5LqS5Yqo5pWw5o2uYCk7XG5cbiAgICAgICAgLy8g6KGl5YWo57y65aSx5a2X5q61XG4gICAgICAgIER5bmFtaWNzRGF0YVByb2Nlc3Nvci5maWxsTWlzc2luZ0ZpZWxkcyhleGlzdGluZ0R5bmFtaWMsIGR5bmFtaWMpO1xuXG4gICAgICAgIC8vIOWQiOW5tuS6kuWKqOaVsOaNru+8iOeCuei1nuOAgeivhOiuuu+8iVxuICAgICAgICBEeW5hbWljc0RhdGFQcm9jZXNzb3IubWVyZ2VJbnRlcmFjdGlvbnMoZXhpc3RpbmdEeW5hbWljLCBkeW5hbWljKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOWmguaenOaYr+aWsOWKqOaAge+8jOa3u+WKoOWIsOaWsOWKqOaAgeWIl+ihqFxuICAgICAgICBhY3R1YWxOZXdEeW5hbWljcy5wdXNoKGR5bmFtaWMpO1xuICAgICAgICBjb25zb2xlLmxvZyhg8J+GlSDlj5HnjrDmlrDliqjmgIEgIyR7ZHluYW1pYy5ub31gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDkv53mjIHljp/lp4vpobrluo/lkIjlubbvvJrnjrDmnInliqjmgIEgKyDmlrDliqjmgIHvvIjkuI3ov5vooYzmjpLluo/vvIlcbiAgICBjb25zdCBtZXJnZWREeW5hbWljcyA9IFsuLi5leGlzdGluZ0R5bmFtaWNzLCAuLi5hY3R1YWxOZXdEeW5hbWljc107XG5cbiAgICBjb25zb2xlLmxvZyhg8J+UhCDliqjmgIHlkIjlubblrozmiJDvvIzmnIDnu4jmlbDph486ICR7bWVyZ2VkRHluYW1pY3MubGVuZ3Rofe+8jOaWsOWinjogJHthY3R1YWxOZXdEeW5hbWljcy5sZW5ndGh9YCk7XG4gICAgY29uc29sZS5sb2coYPCfk50g5L+d5oyB5Y6f5aeL5o6l5pS26aG65bqP77yM5pyq6L+b6KGM6Ieq5Yqo5o6S5bqPYCk7XG4gICAgcmV0dXJuIG1lcmdlZER5bmFtaWNzO1xuICB9XG5cbiAgLyoqXG4gICAqIOagvOW8j+WMlue+pOiBiuacgOWQjuS4gOadoea2iOaBr+eUqOS6juaYvuekulxuICAgKiDlp5TmiZjnu5kgTWVzc2FnZVBhcnNlciDlpITnkIbvvIzpgb/lhY3ph43lpI3lrp7njrBcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0R3JvdXBMYXN0TWVzc2FnZShtZXNzYWdlOiBDaGF0TWVzc2FnZSk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZVBhcnNlci5mb3JtYXRHcm91cExhc3RNZXNzYWdlKG1lc3NhZ2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIOavlOi+g+a2iOaBr+aXtumXtOaIs++8jOato+ehruWkhOeQhui3qOaXpeacn+eahOaDheWGtVxuICAgKiBAcGFyYW0gdGltZXN0YW1wQSDml7bpl7TmiLNBICjmoLzlvI86IEhIOk1NKVxuICAgKiBAcGFyYW0gdGltZXN0YW1wQiDml7bpl7TmiLNCICjmoLzlvI86IEhIOk1NKVxuICAgKiBAcmV0dXJucyDmr5TovoPnu5PmnpwgKC0xLCAwLCAxKVxuICAgKi9cbiAgcHJpdmF0ZSBjb21wYXJlTWVzc2FnZVRpbWVzdGFtcHModGltZXN0YW1wQTogc3RyaW5nLCB0aW1lc3RhbXBCOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIC8vIOino+aekOaXtumXtFxuICAgIGNvbnN0IHBhcnNlVGltZSA9ICh0aW1lc3RhbXA6IHN0cmluZykgPT4ge1xuICAgICAgY29uc3QgW2hvdXJzLCBtaW51dGVzXSA9IHRpbWVzdGFtcC5zcGxpdCgnOicpLm1hcChOdW1iZXIpO1xuICAgICAgcmV0dXJuIHsgaG91cnMsIG1pbnV0ZXMgfTtcbiAgICB9O1xuXG4gICAgY29uc3QgdGltZUEgPSBwYXJzZVRpbWUodGltZXN0YW1wQSk7XG4gICAgY29uc3QgdGltZUIgPSBwYXJzZVRpbWUodGltZXN0YW1wQik7XG5cbiAgICAvLyDliJvlu7rku4rlpKnnmoTml6XmnJ/lr7nosaHnlKjkuo7mr5TovoNcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IGRhdGVBID0gbmV3IERhdGUobm93LmdldEZ1bGxZZWFyKCksIG5vdy5nZXRNb250aCgpLCBub3cuZ2V0RGF0ZSgpLCB0aW1lQS5ob3VycywgdGltZUEubWludXRlcyk7XG4gICAgY29uc3QgZGF0ZUIgPSBuZXcgRGF0ZShub3cuZ2V0RnVsbFllYXIoKSwgbm93LmdldE1vbnRoKCksIG5vdy5nZXREYXRlKCksIHRpbWVCLmhvdXJzLCB0aW1lQi5taW51dGVzKTtcblxuICAgIC8vIOWmguaenOaXtumXtEHmr5TlvZPliY3ml7bpl7TmmZrlvojlpJrvvIjmr5TlpoIyMzp4eO+8ie+8jOiAjOaXtumXtELmr5TlvZPliY3ml7bpl7Tml6nlvojlpJrvvIjmr5TlpoIwMDp4eO+8iVxuICAgIC8vIOmCo+S5iOaXtumXtELlj6/og73mmK/nrKzkuozlpKnnmoTml7bpl7RcbiAgICBjb25zdCBjdXJyZW50SG91ciA9IG5vdy5nZXRIb3VycygpO1xuXG4gICAgLy8g5qOA5rWL6Leo5pel5pyf5oOF5Ya177ya5aaC5p6c5LiA5Liq5pe26Ze05Zyo5rex5aSc77yIMjA6MDDkuYvlkI7vvInvvIzlj6bkuIDkuKrlnKjkuIrljYjvvIgxMjowMOS5i+WJje+8iVxuICAgIC8vIOmCo+S5iOS4iuWNiOeahOaXtumXtOaYr+esrOS6jOWkqVxuICAgIGlmICh0aW1lQS5ob3VycyA+PSAyMCAmJiB0aW1lQi5ob3VycyA8IDEyKSB7XG4gICAgICAvLyBB5piv5rex5aSc77yMQuaYr+esrOS6jOWkqeS4iuWNiO+8jELlupTor6XmjpLlnKjlkI7pnaJcbiAgICAgIGRhdGVCLnNldERhdGUoZGF0ZUIuZ2V0RGF0ZSgpICsgMSk7XG4gICAgfSBlbHNlIGlmICh0aW1lQi5ob3VycyA+PSAyMCAmJiB0aW1lQS5ob3VycyA8IDEyKSB7XG4gICAgICAvLyBC5piv5rex5aSc77yMQeaYr+esrOS6jOWkqeS4iuWNiO+8jEHlupTor6XmjpLlnKjlkI7pnaJcbiAgICAgIGRhdGVBLnNldERhdGUoZGF0ZUEuZ2V0RGF0ZSgpICsgMSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGVBLmdldFRpbWUoKSAtIGRhdGVCLmdldFRpbWUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmo4DmtYvlubbmuLLmn5PmlrDmtojmga9cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZGV0ZWN0QW5kUmVuZGVyTmV3TWVzc2FnZXMobmV3QmVhckNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBsZXQgbmV3bHlBZGRlZE1lc3NhZ2VzOiBDaGF0TWVzc2FnZVtdID0gW107XG5cbiAgICAgIGlmICghdGhpcy5sYXN0QmVhckNvbnRlbnQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CflI0g6aaW5qyh6Kej5p6QQmVhcuWGheWuue+8jOajgOafpeaYr+WQpuacieaWsOeahEFJ5Zue5aSNJyk7XG5cbiAgICAgICAgLy8g6aaW5qyh6Kej5p6Q77ya5Y+q5riy5p+T5b2T5YmN55WM6Z2i5Lit5LiN5a2Y5Zyo55qEQUnmtojmga9cbiAgICAgICAgY29uc3QgbmV3TWVzc2FnZXMgPSB0aGlzLm1lc3NhZ2VQYXJzZXIucGFyc2VCZWFyQ29udGVudChuZXdCZWFyQ29udGVudCk7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nTWVzc2FnZXMgPSB0aGlzLmdldEV4aXN0aW5nTWVzc2FnZXNGcm9tSW50ZXJmYWNlKCk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ/CflI0gW0RFQlVHXSDnjrDmnInmtojmga/mjIfnurnpm4blkIg6JywgQXJyYXkuZnJvbShleGlzdGluZ01lc3NhZ2VzKSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFtERUJVR10g5b2T5YmN6IGK5aSpSUQ6JywgdGhpcy5jdXJyZW50Q2hhdCk7XG5cbiAgICAgICAgZm9yIChjb25zdCBbY2hhdElkLCBjaGF0RGF0YV0gb2YgYXdhaXQgbmV3TWVzc2FnZXMpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhg8J+UjSBbREVCVUddIOajgOafpeiBiuWkqSBcIiR7Y2hhdElkfVwiIOeahOa2iOaBr2ApO1xuICAgICAgICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBjaGF0RGF0YS5tZXNzYWdlcykge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZUZpbmdlcnByaW50ID0gdGhpcy5nZW5lcmF0ZU1lc3NhZ2VGaW5nZXJwcmludChtZXNzYWdlKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICBg8J+UjSBbREVCVUddIOa2iOaBr+aMh+e6uTogXCIke21lc3NhZ2VGaW5nZXJwcmludH1cIiwg5Y+R6YCB6ICFOiBcIiR7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5zZW5kZXJcbiAgICAgICAgICAgICAgfVwiLCDlhoXlrrk6IFwiJHttZXNzYWdlLmNvbnRlbnQuc3Vic3RyaW5nKDAsIDMwKX0uLi5cImAsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyDlj6rmt7vliqDpnZ7nlKjmiLfmtojmga/vvIhBSeWbnuWkjeeahOa2iOaBr++8ieS4lOS4jeWcqOW9k+WJjeeVjOmdouS4reeahOa2iOaBr1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2VuZGVyICE9PSAne3t1c2VyfX0nICYmIG1lc3NhZ2Uuc2VuZGVyICE9PSAndXNlcicpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYPCflI0gW0RFQlVHXSDov5nmmK9BSea2iOaBr++8jOajgOafpeaYr+WQpuW3suWtmOWcqGApO1xuICAgICAgICAgICAgICBpZiAoIWV4aXN0aW5nTWVzc2FnZXMuaGFzKG1lc3NhZ2VGaW5nZXJwcmludCkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+UjSBbREVCVUddIOKchSDlj5HnjrDmlrBBSea2iOaBr++8jOa3u+WKoOWIsOa4suafk+mYn+WIl2ApO1xuICAgICAgICAgICAgICAgIG5ld2x5QWRkZWRNZXNzYWdlcy5wdXNoKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SNIFtERUJVR10g4p2MIEFJ5raI5oGv5bey5a2Y5Zyo77yM6Lez6L+HYCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SNIFtERUJVR10g6L+Z5piv55So5oi35raI5oGv77yM6Lez6L+HYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyDpnZ7pppbmrKHop6PmnpDvvJrov5vooYzlt67lvILmo4DmtYtcbiAgICAgICAgY29uc29sZS5sb2coJ/CflI0g6L+b6KGMQmVhcuWGheWuueW3ruW8guajgOa1iycpO1xuXG4gICAgICAgIGNvbnN0IG9sZE1lc3NhZ2VzID0gdGhpcy5tZXNzYWdlUGFyc2VyLnBhcnNlQmVhckNvbnRlbnQodGhpcy5sYXN0QmVhckNvbnRlbnQpO1xuICAgICAgICBjb25zdCBuZXdNZXNzYWdlcyA9IHRoaXMubWVzc2FnZVBhcnNlci5wYXJzZUJlYXJDb250ZW50KG5ld0JlYXJDb250ZW50KTtcblxuICAgICAgICAvLyDmib7lh7rmlrDlop7nmoTmtojmga9cbiAgICAgICAgbmV3bHlBZGRlZE1lc3NhZ2VzID0gdGhpcy5maW5kTmV3TWVzc2FnZXMoYXdhaXQgb2xkTWVzc2FnZXMsIGF3YWl0IG5ld01lc3NhZ2VzKTtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coYPCflI0gW0RFQlVHXSDmnIDnu4jmlrDmtojmga/mlbDph486ICR7bmV3bHlBZGRlZE1lc3NhZ2VzLmxlbmd0aH1gKTtcbiAgICAgIGlmIChuZXdseUFkZGVkTWVzc2FnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIOacquWPkeeOsOaWsOa2iOaBrycpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKGDwn4aVIOWPkeeOsCAke25ld2x5QWRkZWRNZXNzYWdlcy5sZW5ndGh9IOadoeaWsOa2iOaBr2ApO1xuICAgICAgLy8g5paw5raI5oGv6K+m5oOF5bey6K6w5b2VXG5cbiAgICAgIC8vIOa4suafk+W9k+WJjeiBiuWkqeeahOaWsOa2iOaBr1xuICAgICAgYXdhaXQgdGhpcy5yZW5kZXJOZXdNZXNzYWdlc0ZvckN1cnJlbnRDaGF0KG5ld2x5QWRkZWRNZXNzYWdlcyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCDmo4DmtYvlkozmuLLmn5PmlrDmtojmga/lpLHotKU6JywgZXJyb3IpO1xuICAgICAgLy8g5LiN5oqb5Ye66ZSZ6K+v77yM6YG/5YWN5b2x5ZON5Li75rWB56iLXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOaJvuWHuuaWsOWinueahOa2iOaBr1xuICAgKi9cbiAgcHJpdmF0ZSBmaW5kTmV3TWVzc2FnZXMob2xkTWVzc2FnZXM6IE1hcDxzdHJpbmcsIENoYXREYXRhPiwgbmV3TWVzc2FnZXM6IE1hcDxzdHJpbmcsIENoYXREYXRhPik6IENoYXRNZXNzYWdlW10ge1xuICAgIGNvbnN0IG5ld2x5QWRkZWQ6IENoYXRNZXNzYWdlW10gPSBbXTtcbiAgICBjb25zdCBvbGRGaW5nZXJwcmludHMgPSBuZXcgU2V0PHN0cmluZz4oKTtcblxuICAgIC8vIOaUtumbhuaXp+a2iOaBr+eahOaMh+e6uVxuICAgIGZvciAoY29uc3QgWywgY2hhdERhdGFdIG9mIG9sZE1lc3NhZ2VzKSB7XG4gICAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgY2hhdERhdGEubWVzc2FnZXMpIHtcbiAgICAgICAgY29uc3QgZmluZ2VycHJpbnQgPSB0aGlzLmdlbmVyYXRlTWVzc2FnZUZpbmdlcnByaW50KG1lc3NhZ2UpO1xuICAgICAgICBvbGRGaW5nZXJwcmludHMuYWRkKGZpbmdlcnByaW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDmib7lh7rmlrDmtojmga/vvIjkuLvopoHlhbPms6hBSeWbnuWkjeeahOa2iOaBr++8jOaOkumZpOeUqOaIt+a2iOaBr++8iVxuICAgIGZvciAoY29uc3QgWywgY2hhdERhdGFdIG9mIG5ld01lc3NhZ2VzKSB7XG4gICAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgY2hhdERhdGEubWVzc2FnZXMpIHtcbiAgICAgICAgY29uc3QgZmluZ2VycHJpbnQgPSB0aGlzLmdlbmVyYXRlTWVzc2FnZUZpbmdlcnByaW50KG1lc3NhZ2UpO1xuICAgICAgICBpZiAoIW9sZEZpbmdlcnByaW50cy5oYXMoZmluZ2VycHJpbnQpKSB7XG4gICAgICAgICAgLy8g5Y+q5re75Yqg6Z2e55So5oi35raI5oGv77yIQUnlm57lpI3nmoTmtojmga/vvIlcbiAgICAgICAgICBpZiAobWVzc2FnZS5zZW5kZXIgIT09ICd7e3VzZXJ9fScgJiYgbWVzc2FnZS5zZW5kZXIgIT09ICd1c2VyJykge1xuICAgICAgICAgICAgbmV3bHlBZGRlZC5wdXNoKG1lc3NhZ2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuZXdseUFkZGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIOeUn+aIkOa2iOaBr+aMh+e6uVxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZU1lc3NhZ2VGaW5nZXJwcmludChtZXNzYWdlOiBDaGF0TWVzc2FnZSk6IHN0cmluZyB7XG4gICAgY29uc3QgZmluZ2VycHJpbnQgPSBgJHttZXNzYWdlLmNoYXRJZH1fJHttZXNzYWdlLnNlbmRlcn1fJHttZXNzYWdlLmNvbnRlbnR9XyR7bWVzc2FnZS50aW1lc3RhbXB9YDtcbiAgICAvLyDnlJ/miJDmtojmga/mjIfnurlcbiAgICByZXR1cm4gZmluZ2VycHJpbnQ7XG4gIH1cblxuICAvKipcbiAgICog5riy5p+T5b2T5YmN6IGK5aSp55qE5paw5raI5oGv77yI5bim5omT5a2X5Yqo55S777yJXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHJlbmRlck5ld01lc3NhZ2VzRm9yQ3VycmVudENoYXQobmV3TWVzc2FnZXM6IENoYXRNZXNzYWdlW10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyDmo4Dmn6XlvZPliY3mmK/lkKblnKjogYrlpKnnlYzpnaJcbiAgICBjb25zb2xlLmxvZyhg8J+UjSDnlYzpnaLnirbmgIHmo4Dmn6U6IGN1cnJlbnRJbnRlcmZhY2UgPSBcIiR7dGhpcy5jdXJyZW50SW50ZXJmYWNlfVwiYCk7XG5cbiAgICAvLyDlpoLmnpzlvZPliY3kuI3lnKjogYrlpKnnlYzpnaLvvIzot7Pov4fmtojmga/muLLmn5NcbiAgICBpZiAodGhpcy5jdXJyZW50SW50ZXJmYWNlICE9PSAnY2hhdCcpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIOW9k+WJjeS4jeWcqOiBiuWkqeeVjOmdou+8jOi3s+i/h+a2iOaBr+a4suafkycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIOWmguaenOW3sue7j+aciea4suafk+WcqOi/m+ihjO+8jOWFiOS4reaWreS5i+WJjeeahOa4suafk1xuICAgIGlmICh0aGlzLmlzUmVuZGVyaW5nTWVzc2FnZXMpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5uRIOajgOa1i+WIsOaWsOeahOa4suafk+ivt+axgu+8jOS4reaWreS5i+WJjeeahOa4suafkycpO1xuICAgICAgdGhpcy5zaG91bGRTdG9wUmVuZGVyaW5nID0gdHJ1ZTtcbiAgICAgIC8vIOetieW+heS5i+WJjeeahOa4suafk+WujOWFqOWBnOatolxuICAgICAgd2hpbGUgKHRoaXMuaXNSZW5kZXJpbmdNZXNzYWdlcykge1xuICAgICAgICBhd2FpdCB0aGlzLmRlbGF5KDUwKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDov4fmu6Tlh7rlvZPliY3ogYrlpKnnmoTmtojmga/vvIjogIPomZHnvqTogYpJROWMuemFje+8iVxuICAgIGNvbnNvbGUubG9nKGDwn5SNIOW9k+WJjeiBiuWkqUlEOiBcIiR7dGhpcy5jdXJyZW50Q2hhdH1cImApO1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgYPCflI0g5paw5raI5oGv55qE6IGK5aSpSUQ6YCxcbiAgICAgIG5ld01lc3NhZ2VzLm1hcChtID0+IGBcIiR7bS5jaGF0SWR9XCJgKSxcbiAgICApO1xuXG4gICAgY29uc3QgY3VycmVudENoYXRNZXNzYWdlcyA9IG5ld01lc3NhZ2VzLmZpbHRlcihtZXNzYWdlID0+IHtcbiAgICAgIC8vIOebtOaOpeWMuemFjVxuICAgICAgaWYgKG1lc3NhZ2UuY2hhdElkID09PSB0aGlzLmN1cnJlbnRDaGF0KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDinIUg55u05o6l5Yy56YWNOiAke21lc3NhZ2UuY2hhdElkfSA9PT0gJHt0aGlzLmN1cnJlbnRDaGF0fWApO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8g5qCH5YeG5YyW5Yy56YWN77yI5aSE55CG5aSn5bCP5YaZ5ZKM56m65qC85beu5byC77yJXG4gICAgICBjb25zdCBub3JtYWxpemVkTWVzc2FnZUNoYXRJZCA9IHRoaXMubm9ybWFsaXplQ2hhdElkRm9yQ29tcGFyaXNvbihtZXNzYWdlLmNoYXRJZCk7XG4gICAgICBjb25zdCBub3JtYWxpemVkQ3VycmVudENoYXQgPSB0aGlzLm5vcm1hbGl6ZUNoYXRJZEZvckNvbXBhcmlzb24odGhpcy5jdXJyZW50Q2hhdCk7XG5cbiAgICAgIGlmIChub3JtYWxpemVkTWVzc2FnZUNoYXRJZCA9PT0gbm9ybWFsaXplZEN1cnJlbnRDaGF0KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgIGDinIUg5qCH5YeG5YyW5Yy56YWNOiBcIiR7bWVzc2FnZS5jaGF0SWR9XCIgLT4gXCIke25vcm1hbGl6ZWRNZXNzYWdlQ2hhdElkfVwiID09PSBcIiR7dGhpcy5jdXJyZW50Q2hhdH1cIiAtPiBcIiR7bm9ybWFsaXplZEN1cnJlbnRDaGF0fVwiYCxcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIOe+pOiBiklE5Yy56YWN77yI5aSE55CG5Y+v6IO955qESUTmoLzlvI/lt67lvILvvIlcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRDaGF0LnN0YXJ0c1dpdGgoJ+e+pOiBiicpKSB7XG4gICAgICAgIC8vIOW9k+WJjeaYr+e+pOiBiu+8jOajgOafpea2iOaBr+aYr+WQpuWxnuS6juWQjOS4gOS4que+pFxuICAgICAgICBjb25zdCBpc01hdGNoID0gbm9ybWFsaXplZEN1cnJlbnRDaGF0ID09PSBub3JtYWxpemVkTWVzc2FnZUNoYXRJZDtcbiAgICAgICAgY29uc29sZS5sb2coYPCflI0g576k6IGK5Yy56YWN5qOA5p+lOiBcIiR7bm9ybWFsaXplZEN1cnJlbnRDaGF0fVwiID09PSBcIiR7bm9ybWFsaXplZE1lc3NhZ2VDaGF0SWR9XCIgPSAke2lzTWF0Y2h9YCk7XG4gICAgICAgIHJldHVybiBpc01hdGNoO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgYOKdjCDkuI3ljLnphY06ICR7bWVzc2FnZS5jaGF0SWR9ICgke25vcm1hbGl6ZWRNZXNzYWdlQ2hhdElkfSkgIT09ICR7dGhpcy5jdXJyZW50Q2hhdH0gKCR7bm9ybWFsaXplZEN1cnJlbnRDaGF0fSlgLFxuICAgICAgKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKGDwn5SNIOi/h+a7pOWQjueahOW9k+WJjeiBiuWkqea2iOaBr+aVsOmHjzogJHtjdXJyZW50Q2hhdE1lc3NhZ2VzLmxlbmd0aH1gKTtcblxuICAgIGlmIChjdXJyZW50Q2hhdE1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc29sZS5sb2coJ/CflI0g5b2T5YmN6IGK5aSp5rKh5pyJ5paw5raI5oGvJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYPCfjqgg5byA5aeL5riy5p+TICR7Y3VycmVudENoYXRNZXNzYWdlcy5sZW5ndGh9IOadoeW9k+WJjeiBiuWkqeeahOaWsOa2iOaBr++8iOW4puaJk+Wtl+WKqOeUu++8iWApO1xuXG4gICAgLy8g6YCQ5p2h5pi+56S65raI5oGv77yI5bim5omT5a2X5Yqo55S777yJXG4gICAgYXdhaXQgdGhpcy5zaG93TWVzc2FnZXNTZXF1ZW50aWFsbHkoY3VycmVudENoYXRNZXNzYWdlcyk7XG5cbiAgICBjb25zb2xlLmxvZygn4pyFIOaWsOa2iOaBr+a4suafk+WujOaIkCcpO1xuXG4gICAgLy8g5riy5p+T5a6M5oiQ5ZCO6Kem5Y+R6IGK5aSp6L+B56e75qOA5p+lXG4gICAgY29uc29sZS5sb2coJ/CfjqggW+S4u+W6lOeUqF0g5paw5raI5oGv5riy5p+T5a6M5oiQ77yM5YeG5aSH6Kem5Y+R6IGK5aSp6L+B56e75qOA5p+lJyk7XG4gICAgYXdhaXQgdGhpcy50cmlnZ2VyQ2hhdE1pZ3JhdGlvbkNoZWNrKCk7XG4gIH1cblxuICAvKipcbiAgICog6YCQ5p2h5pi+56S65raI5oGv77yI5bim5omT5a2X5Yqo55S777yJXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHNob3dNZXNzYWdlc1NlcXVlbnRpYWxseShtZXNzYWdlczogQ2hhdE1lc3NhZ2VbXSk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIOiuvue9rua4suafk+eKtuaAgVxuICAgIHRoaXMuaXNSZW5kZXJpbmdNZXNzYWdlcyA9IHRydWU7XG4gICAgdGhpcy5zaG91bGRTdG9wUmVuZGVyaW5nID0gZmFsc2U7XG5cbiAgICBjb25zb2xlLmxvZyhg8J+OqCDlvIDlp4vmuLLmn5MgJHttZXNzYWdlcy5sZW5ndGh9IOadoea2iOaBr2ApO1xuXG4gICAgLy8g5qOA5p+l5piv5ZCm5Li6XCLlhajpg6hcIuaooeW8j++8iOebtOaOpeaYvuekuuaJgOaciea2iOaBr++8iVxuICAgIGlmICh0aGlzLnR5cGluZ1NwZWVkTWFuYWdlci5zaG91bGRTaG93QWxsKCkpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfimqEg5YWo6YOo5qih5byP77ya55u05o6l5pi+56S65omA5pyJ5raI5oGvJyk7XG4gICAgICB0cnkge1xuICAgICAgICAvLyDnm7TmjqXmuLLmn5PmiYDmnInmtojmga/vvIzkuI3luKbliqjnlLtcbiAgICAgICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIG1lc3NhZ2VzKSB7XG4gICAgICAgICAgdGhpcy5hZGROZXdNZXNzYWdlVG9JbnRlcmZhY2UobWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8g5pKt5pS+6Z+z5pWIXG4gICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXlTb3VuZCgnbmV3TWVzc2FnZScpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgLy8g6YeN572u5riy5p+T54q25oCBXG4gICAgICAgIHRoaXMuaXNSZW5kZXJpbmdNZXNzYWdlcyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNob3VsZFN0b3BSZW5kZXJpbmcgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZXNzYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyDmo4Dmn6XmmK/lkKbpnIDopoHkuK3mlq3muLLmn5NcbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkU3RvcFJlbmRlcmluZykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5uRIOa4suafk+iiq+S4reaWre+8jOW3sua4suafkyAke2l9LyR7bWVzc2FnZXMubGVuZ3RofSDmnaHmtojmga9gKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBtZXNzYWdlc1tpXTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIOa4suafk+a2iOaBr+WIsOeVjOmdolxuICAgICAgICAgIHRoaXMuYWRkTmV3TWVzc2FnZVRvSW50ZXJmYWNlKG1lc3NhZ2UpO1xuXG4gICAgICAgICAgLy8g6I635Y+W5Yia5re75Yqg55qE5raI5oGv5YWD57SgXG4gICAgICAgICAgY29uc3QgbWVzc2FnZUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lc3NhZ2UnKTtcbiAgICAgICAgICBjb25zdCBsYXN0TWVzc2FnZUVsZW1lbnQgPSBtZXNzYWdlRWxlbWVudHNbbWVzc2FnZUVsZW1lbnRzLmxlbmd0aCAtIDFdIGFzIEhUTUxFbGVtZW50O1xuXG4gICAgICAgICAgaWYgKGxhc3RNZXNzYWdlRWxlbWVudCkge1xuICAgICAgICAgICAgLy8g5byA5aeL5omT5a2X5Yqo55S7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnR5cGVNZXNzYWdlKGxhc3RNZXNzYWdlRWxlbWVudCwgbWVzc2FnZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8g5qOA5p+l5piv5ZCm6ZyA6KaB5Lit5pat5riy5p+T77yI5Zyo5omT5a2X5Yqo55S75ZCO5YaN5qyh5qOA5p+l77yJXG4gICAgICAgICAgaWYgKHRoaXMuc2hvdWxkU3RvcFJlbmRlcmluZykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYPCfm5Eg5riy5p+T6KKr5Lit5pat77yM5bey5riy5p+TICR7aSArIDF9LyR7bWVzc2FnZXMubGVuZ3RofSDmnaHmtojmga9gKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIOa2iOaBr+mXtOmalOaXtumXtFxuICAgICAgICAgIGlmIChpIDwgbWVzc2FnZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5kZWxheSh0aGlzLmdldFJhbmRvbURlbGF5KCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwg5riy5p+T5raI5oGv5aSx6LSlOicsIG1lc3NhZ2UsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICAvLyDph43nva7muLLmn5PnirbmgIFcbiAgICAgIHRoaXMuaXNSZW5kZXJpbmdNZXNzYWdlcyA9IGZhbHNlO1xuICAgICAgdGhpcy5zaG91bGRTdG9wUmVuZGVyaW5nID0gZmFsc2U7XG4gICAgICBjb25zb2xlLmxvZygn8J+OqCDmtojmga/muLLmn5PmtYHnqIvnu5PmnZ8nKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5omT5a2X5Yqo55S75pWI5p6cXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHR5cGVNZXNzYWdlKG1lc3NhZ2VFbGVtZW50OiBIVE1MRWxlbWVudCwgbWVzc2FnZTogQ2hhdE1lc3NhZ2UpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBtZXNzYWdlQ29udGVudCA9IG1lc3NhZ2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZXNzYWdlLWNvbnRlbnQnKSBhcyBIVE1MRWxlbWVudDtcbiAgICBpZiAoIW1lc3NhZ2VDb250ZW50KSByZXR1cm47XG5cbiAgICBjb25zdCBvcmlnaW5hbENvbnRlbnQgPSBtZXNzYWdlQ29udGVudC5pbm5lckhUTUw7XG5cbiAgICAvLyDmo4Dmn6XmmK/lkKbpnIDopoHkuK3mlq1cbiAgICBpZiAodGhpcy5zaG91bGRTdG9wUmVuZGVyaW5nKSB7XG4gICAgICAvLyDlpoLmnpzpnIDopoHkuK3mlq3vvIznm7TmjqXmmL7npLrlrozmlbTlhoXlrrlcbiAgICAgIG1lc3NhZ2VDb250ZW50LmlubmVySFRNTCA9IG9yaWdpbmFsQ29udGVudDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyDmo4Dmn6XmmK/lkKbot7Pov4fmiZPlrZfliqjnlLvvvIjnnqzpl7TmqKHlvI/vvIlcbiAgICBpZiAodGhpcy50eXBpbmdTcGVlZE1hbmFnZXIuc2hvdWxkU2tpcFR5cGluZygpKSB7XG4gICAgICAvLyDnnqzpl7TmqKHlvI/vvJrnm7TmjqXmmL7npLrlrozmlbTlhoXlrrlcbiAgICAgIG1lc3NhZ2VDb250ZW50LmlubmVySFRNTCA9IG9yaWdpbmFsQ29udGVudDtcbiAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXlTb3VuZCgnbmV3TWVzc2FnZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIOajgOafpeaYr+WQpuWMheWQq+eJueauiuWGheWuuVxuICAgIGlmICh0aGlzLmhhc1NwZWNpYWxDb250ZW50KG9yaWdpbmFsQ29udGVudCkpIHtcbiAgICAgIC8vIOWmguaenOWMheWQq+eJueauiuWGheWuue+8jOebtOaOpeaYvuekuuWOn+Wni0hUTUxcbiAgICAgIG1lc3NhZ2VDb250ZW50LmlubmVySFRNTCA9IG9yaWdpbmFsQ29udGVudDtcbiAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXlTb3VuZCgnbmV3TWVzc2FnZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIOWIm+W7uuaJk+Wtl+aMh+ekuuWZqFxuICAgIGNvbnN0IHR5cGluZ0luZGljYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHR5cGluZ0luZGljYXRvci5jbGFzc05hbWUgPSAndHlwaW5nLWluZGljYXRvcic7XG4gICAgdHlwaW5nSW5kaWNhdG9yLmlubmVySFRNTCA9XG4gICAgICAnPHNwYW4gY2xhc3M9XCJ0eXBpbmctZG90XCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwidHlwaW5nLWRvdFwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cInR5cGluZy1kb3RcIj48L3NwYW4+JztcblxuICAgIG1lc3NhZ2VDb250ZW50LnRleHRDb250ZW50ID0gJyc7XG4gICAgbWVzc2FnZUNvbnRlbnQuYXBwZW5kQ2hpbGQodHlwaW5nSW5kaWNhdG9yKTtcblxuICAgIC8vIOmaj+acuuaJk+Wtl+aXtumXtFxuICAgIGNvbnN0IHR5cGluZ1RpbWUgPSB0aGlzLmdldFJhbmRvbVR5cGluZ1RpbWUoKTtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGNvbnN0IHR5cGluZ1RpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgLy8g5YaN5qyh5qOA5p+l5piv5ZCm6ZyA6KaB5Lit5patXG4gICAgICAgIGlmICh0aGlzLnNob3VsZFN0b3BSZW5kZXJpbmcpIHtcbiAgICAgICAgICB0eXBpbmdJbmRpY2F0b3IucmVtb3ZlKCk7XG4gICAgICAgICAgbWVzc2FnZUNvbnRlbnQuaW5uZXJIVE1MID0gb3JpZ2luYWxDb250ZW50O1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyDmuJDlj5jov4fmuKHmlYjmnpxcbiAgICAgICAgdHlwaW5nSW5kaWNhdG9yLnN0eWxlLnRyYW5zaXRpb24gPSAnb3BhY2l0eSAwLjVzJztcbiAgICAgICAgdHlwaW5nSW5kaWNhdG9yLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG5cbiAgICAgICAgY29uc3QgZmFkZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAvLyDlho3mrKHmo4Dmn6XmmK/lkKbpnIDopoHkuK3mlq1cbiAgICAgICAgICBpZiAodGhpcy5zaG91bGRTdG9wUmVuZGVyaW5nKSB7XG4gICAgICAgICAgICB0eXBpbmdJbmRpY2F0b3IucmVtb3ZlKCk7XG4gICAgICAgICAgICBtZXNzYWdlQ29udGVudC5pbm5lckhUTUwgPSBvcmlnaW5hbENvbnRlbnQ7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdHlwaW5nSW5kaWNhdG9yLnJlbW92ZSgpO1xuICAgICAgICAgIG1lc3NhZ2VDb250ZW50LnRleHRDb250ZW50ID0gJyc7XG5cbiAgICAgICAgICAvLyDlvIDlp4vpgJDlrZfmmL7npLpcbiAgICAgICAgICB0aGlzLnR5cGVDaGFyYWN0ZXJzKG1lc3NhZ2VDb250ZW50LCBvcmlnaW5hbENvbnRlbnQsICgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgNTAwKTtcblxuICAgICAgICAvLyDlpoLmnpzpnIDopoHkuK3mlq3vvIzmuIXpmaTlu7bml7blmahcbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkU3RvcFJlbmRlcmluZykge1xuICAgICAgICAgIGNsZWFyVGltZW91dChmYWRlVGltZW91dCk7XG4gICAgICAgICAgdHlwaW5nSW5kaWNhdG9yLnJlbW92ZSgpO1xuICAgICAgICAgIG1lc3NhZ2VDb250ZW50LmlubmVySFRNTCA9IG9yaWdpbmFsQ29udGVudDtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIHR5cGluZ1RpbWUpO1xuXG4gICAgICAvLyDlpoLmnpzpnIDopoHkuK3mlq3vvIzmuIXpmaTlu7bml7blmahcbiAgICAgIGlmICh0aGlzLnNob3VsZFN0b3BSZW5kZXJpbmcpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHR5cGluZ1RpbWVvdXQpO1xuICAgICAgICB0eXBpbmdJbmRpY2F0b3IucmVtb3ZlKCk7XG4gICAgICAgIG1lc3NhZ2VDb250ZW50LmlubmVySFRNTCA9IG9yaWdpbmFsQ29udGVudDtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOmAkOWtl+aYvuekuuaWh+acrFxuICAgKi9cbiAgcHJpdmF0ZSB0eXBlQ2hhcmFjdGVycyhtZXNzYWdlQ29udGVudDogSFRNTEVsZW1lbnQsIG9yaWdpbmFsQ29udGVudDogc3RyaW5nLCBvbkNvbXBsZXRlOiAoKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgbGV0IGNoYXJJbmRleCA9IDA7XG4gICAgbGV0IHNvdW5kUGxheWVkID0gZmFsc2U7XG4gICAgbGV0IHR5cGluZ1RpbWVvdXRJZDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cbiAgICAvLyDlpoLmnpzlhoXlrrnljIXlkKtIVE1M5qCH562+77yM55u05o6l5pi+56S6XG4gICAgaWYgKHRoaXMuaGFzU3BlY2lhbENvbnRlbnQob3JpZ2luYWxDb250ZW50KSkge1xuICAgICAgbWVzc2FnZUNvbnRlbnQuaW5uZXJIVE1MID0gb3JpZ2luYWxDb250ZW50O1xuICAgICAgaWYgKCFzb3VuZFBsYXllZCkge1xuICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5U291bmQoJ25ld01lc3NhZ2UnKTtcbiAgICAgIH1cbiAgICAgIG9uQ29tcGxldGUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyDmj5Dlj5bnuq/mlofmnKzlhoXlrrnov5vooYzmiZPlrZfmlYjmnpxcbiAgICBjb25zdCB0ZW1wRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGVtcERpdi5pbm5lckhUTUwgPSBvcmlnaW5hbENvbnRlbnQ7XG4gICAgY29uc3QgdGV4dENvbnRlbnQgPSB0ZW1wRGl2LnRleHRDb250ZW50IHx8IHRlbXBEaXYuaW5uZXJUZXh0IHx8IG9yaWdpbmFsQ29udGVudDtcblxuICAgIGNvbnN0IHR5cGVDaGFyID0gKCkgPT4ge1xuICAgICAgLy8g5qOA5p+l5piv5ZCm6ZyA6KaB5Lit5patXG4gICAgICBpZiAodGhpcy5zaG91bGRTdG9wUmVuZGVyaW5nKSB7XG4gICAgICAgIC8vIOWmguaenOmcgOimgeS4reaWre+8jOebtOaOpeaYvuekuuWujOaVtOWGheWuuVxuICAgICAgICBtZXNzYWdlQ29udGVudC5pbm5lckhUTUwgPSBvcmlnaW5hbENvbnRlbnQ7XG4gICAgICAgIGlmICh0eXBpbmdUaW1lb3V0SWQpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodHlwaW5nVGltZW91dElkKTtcbiAgICAgICAgfVxuICAgICAgICBvbkNvbXBsZXRlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoYXJJbmRleCA9PT0gMCAmJiAhc291bmRQbGF5ZWQpIHtcbiAgICAgICAgLy8g5Zyo5byA5aeL5pi+56S65paH5a2X5pe25pKt5pS+5paw5raI5oGv6Z+z5pWIXG4gICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXlTb3VuZCgnbmV3TWVzc2FnZScpO1xuICAgICAgICBzb3VuZFBsYXllZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFySW5kZXggPCB0ZXh0Q29udGVudC5sZW5ndGgpIHtcbiAgICAgICAgbWVzc2FnZUNvbnRlbnQudGV4dENvbnRlbnQgKz0gdGV4dENvbnRlbnQuY2hhckF0KGNoYXJJbmRleCk7XG4gICAgICAgIGNoYXJJbmRleCsrO1xuICAgICAgICB0eXBpbmdUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KHR5cGVDaGFyLCA1MCk7IC8vIOavj+S4quWtl+espumXtOmalDUwbXNcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOaJk+Wtl+WujOaIkOWQju+8jOWmguaenOWOn+WGheWuueaciUhUTUzvvIzliJnmm7/mjaLkuLrlrozmlbTnmoRIVE1M5YaF5a65XG4gICAgICAgIGlmIChvcmlnaW5hbENvbnRlbnQgIT09IHRleHRDb250ZW50KSB7XG4gICAgICAgICAgbWVzc2FnZUNvbnRlbnQuaW5uZXJIVE1MID0gb3JpZ2luYWxDb250ZW50O1xuICAgICAgICB9XG4gICAgICAgIG9uQ29tcGxldGUoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdHlwZUNoYXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmo4Dmn6XmmK/lkKbljIXlkKvnibnmrorlhoXlrrlcbiAgICovXG4gIHByaXZhdGUgaGFzU3BlY2lhbENvbnRlbnQoY29udGVudDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIGNvbnRlbnQuaW5jbHVkZXMoJ3JhbmRvbS1pbWFnZS1jb250YWluZXInKSB8fFxuICAgICAgY29udGVudC5pbmNsdWRlcygndHlwaW5nLWluZGljYXRvcicpIHx8XG4gICAgICBjb250ZW50LmluY2x1ZGVzKCc8ZGl2JykgfHxcbiAgICAgIGNvbnRlbnQuaW5jbHVkZXMoJzxpbWcnKSB8fFxuICAgICAgY29udGVudC5pbmNsdWRlcygnPGF1ZGlvJykgfHxcbiAgICAgIGNvbnRlbnQuaW5jbHVkZXMoJzx2aWRlbycpIHx8XG4gICAgICBjb250ZW50LmluY2x1ZGVzKCdzdGlja2VyLWNvbnRhaW5lcicpIHx8XG4gICAgICBjb250ZW50LmluY2x1ZGVzKCd0cmFuc2Zlci1jb250YWluZXInKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICog6I635Y+W6ZqP5py65omT5a2X5pe26Ze077yI5qC55o2u55So5oi36K6+572u77yJXG4gICAqL1xuICBwcml2YXRlIGdldFJhbmRvbVR5cGluZ1RpbWUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy50eXBpbmdTcGVlZE1hbmFnZXIuZ2V0VHlwaW5nVGltZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOiOt+WPlumaj+acuua2iOaBr+mXtOmalOaXtumXtO+8iOagueaNrueUqOaIt+iuvue9ru+8iVxuICAgKi9cbiAgcHJpdmF0ZSBnZXRSYW5kb21EZWxheSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnR5cGluZ1NwZWVkTWFuYWdlci5nZXRNZXNzYWdlRGVsYXkoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5blvZPliY3nlYzpnaLkuK3lt7LlrZjlnKjnmoTmtojmga/mjIfnurlcbiAgICovXG4gIHByaXZhdGUgZ2V0RXhpc3RpbmdNZXNzYWdlc0Zyb21JbnRlcmZhY2UoKTogU2V0PHN0cmluZz4ge1xuICAgIGNvbnN0IGV4aXN0aW5nTWVzc2FnZXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcblxuICAgIC8vIOajgOafpei/geenu+WKn+iDveaYr+WQpuWQr+eUqFxuICAgIGNvbnN0IGNoYXRNaWdyYXRpb25NYW5hZ2VyID0gQ2hhdE1pZ3JhdGlvbk1hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcbiAgICBjb25zdCBpc01pZ3JhdGlvbkVuYWJsZWQgPSBjaGF0TWlncmF0aW9uTWFuYWdlci5pc0ZlYXR1cmVFbmFibGVkKCk7XG5cbiAgICBpZiAoaXNNaWdyYXRpb25FbmFibGVkKSB7XG4gICAgICAvLyDov4Hnp7vlip/og73lkK/nlKjml7bvvJrku47lhoXlrZjkuK3nmoRjaGF0RGF0YeiOt+WPlu+8iOWMheWQq+WOhuWPsua2iOaBr++8iVxuICAgICAgY29uc3QgY3VycmVudENoYXREYXRhID0gdGhpcy5jaGF0RGF0YS5nZXQodGhpcy5jdXJyZW50Q2hhdCk7XG4gICAgICBpZiAoY3VycmVudENoYXREYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5SNIOaJvuWIsOW9k+WJjeiBiuWkqeaVsOaNru+8jOWMheWQqyAke2N1cnJlbnRDaGF0RGF0YS5tZXNzYWdlcy5sZW5ndGh9IOadoea2iOaBr2ApO1xuICAgICAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgY3VycmVudENoYXREYXRhLm1lc3NhZ2VzKSB7XG4gICAgICAgICAgY29uc3QgZmluZ2VycHJpbnQgPSB0aGlzLmdlbmVyYXRlTWVzc2FnZUZpbmdlcnByaW50KG1lc3NhZ2UpO1xuICAgICAgICAgIGV4aXN0aW5nTWVzc2FnZXMuYWRkKGZpbmdlcnByaW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyDov4Hnp7vlip/og73npoHnlKjml7bvvJrkuI3kvb/nlKjljoblj7Lmtojmga/vvIzorqnns7vnu5/orqTkuLrmsqHmnInnjrDmnInmtojmga9cbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIOi/geenu+WKn+iDveemgeeUqO+8jOS4jeS9v+eUqOWOhuWPsua2iOaBrycpO1xuICAgICAgLy8gZXhpc3RpbmdNZXNzYWdlcyDkv53mjIHkuLrnqbrpm4blkIjvvIzov5nmoLfns7vnu5/lsLHkuI3kvJrlsJ3or5XlkIjlubbku7vkvZXljoblj7Lmtojmga9cbiAgICB9XG5cbiAgICAvLyDkuZ/mo4Dmn6Xlj5HpgIHpmJ/liJfkuK3nmoTmtojmga/vvIjnlKjmiLfliJrlj5HpgIHkvYbov5jmnKrooqtBSeWkhOeQhueahOa2iOaBr++8iVxuICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiB0aGlzLnNlbmRRdWV1ZSkge1xuICAgICAgaWYgKG1lc3NhZ2UuY2hhdElkID09PSB0aGlzLmN1cnJlbnRDaGF0KSB7XG4gICAgICAgIGNvbnN0IGZpbmdlcnByaW50ID0gdGhpcy5nZW5lcmF0ZU1lc3NhZ2VGaW5nZXJwcmludChtZXNzYWdlKTtcbiAgICAgICAgZXhpc3RpbmdNZXNzYWdlcy5hZGQoZmluZ2VycHJpbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGDwn5SNIOaUtumbhuWIsCAke2V4aXN0aW5nTWVzc2FnZXMuc2l6ZX0g5Liq546w5pyJ5raI5oGv5oyH57q5YCk7XG4gICAgcmV0dXJuIGV4aXN0aW5nTWVzc2FnZXM7XG4gIH1cblxuICAvKipcbiAgICog5bu26L+f5bel5YW35pa55rOVXG4gICAqL1xuICBwcml2YXRlIGRlbGF5KG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG4gIH1cblxuICAvKipcbiAgICog5L2/55Soc2V0Q2hhdE1lc3NhZ2Vz5pu05paw5b2T5YmN5qW85bGC55qE5pmu6YCa5YaF5a65XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHVwZGF0ZUN1cnJlbnRNZXNzYWdlV2l0aENvbnRlbnQoY29udGVudDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIOiOt+WPluacgOaWsOalvOWxgueahOa2iOaBr1xuICAgICAgY29uc3QgbGFzdE1lc3NhZ2UgPSBnZXRDaGF0TWVzc2FnZXMoLTEpWzBdO1xuICAgICAgaWYgKCFsYXN0TWVzc2FnZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfinYwg5peg5rOV6I635Y+W5pyA5paw5qW85bGC5raI5oGvJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbGFzdE1lc3NhZ2VJZCA9IGxhc3RNZXNzYWdlLm1lc3NhZ2VfaWQ7XG4gICAgICBjb25zb2xlLmxvZygn8J+TnSDlvZPliY3mpbzlsYJJRDonLCBsYXN0TWVzc2FnZUlkKTtcblxuICAgICAgLy8g5L2/55Soc2V0Q2hhdE1lc3NhZ2Vz5pu/5o2i5b2T5YmN5qW85bGC5YaF5a65XG4gICAgICBhd2FpdCBzZXRDaGF0TWVzc2FnZXMoXG4gICAgICAgIFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtZXNzYWdlX2lkOiBsYXN0TWVzc2FnZUlkLFxuICAgICAgICAgICAgbWVzc2FnZTogY29udGVudCxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICB7IHJlZnJlc2g6ICdub25lJyB9LFxuICAgICAgKTtcblxuICAgICAgY29uc29sZS5sb2coJ+KchSDlt7Lkvb/nlKhzZXRDaGF0TWVzc2FnZXPmm7TmlrDlvZPliY3mpbzlsYLnmoTmma7pgJrlhoXlrrknKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIOabtOaWsOaZrumAmuWGheWuueWksei0pTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5L2/55SoL3NlbmRhc+WRveS7pOaKikFJ5Zue5aSN6L6T5Ye65Yiw5paw5qW85bGCXG4gICAqIOaWsOeahOaJp+ihjOmhuuW6j++8muWFiOWPkemAgea2iOaBr++8jOWGjea4heepuumYn+WIl1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBzZW5kQUlSZXNwb25zZVRvTmV3Rmxvb3IoY29udGVudDogc3RyaW5nLCBvcmlnaW5hbE1lc3NhZ2U6IENoYXRNZXNzYWdlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIOiOt+WPluW9k+WJjeinkuiJsuWQjeensO+8jOWmguaenOayoeacieWImeS9v+eUqOm7mOiupOWQjeensFxuICAgICAgY29uc3QgY2hhcmFjdGVyTmFtZSA9IG9yaWdpbmFsTWVzc2FnZS5zZW5kZXIgfHwgJ+WKqeaJiyc7XG5cbiAgICAgIC8vIOS9v+eUqC9zZW5kYXPlkb3ku6Tlj5HpgIFBSeWbnuWkjeWIsOaWsOalvOWxglxuICAgICAgY29uc3Qgc2VuZGFzQ29tbWFuZCA9IGAvc2VuZGFzIG5hbWU9XCIke2NoYXJhY3Rlck5hbWV9XCIgJHtjb250ZW50fWA7XG5cbiAgICAgIGNvbnNvbGUubG9nKCfwn5OkIOS9v+eUqC9zZW5kYXPlj5HpgIFBSeWbnuWkjeWIsOaWsOalvOWxgicpO1xuXG4gICAgICAvLyDmiafooYwvc2VuZGFz5ZG95LukXG4gICAgICB0cmlnZ2VyU2xhc2goc2VuZGFzQ29tbWFuZCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCfinIUg5bey5L2/55SoL3NlbmRhc+WPkemAgUFJ5Zue5aSN5Yiw5paw5qW85bGCJyk7XG5cbiAgICAgIC8vIOa4heepuuWPkemAgemYn+WIl1xuICAgICAgY29uc29sZS5sb2coJ/Cfp7kg5riF56m65Y+R6YCB6Zif5YiXLi4uJyk7XG4gICAgICB0aGlzLmNsZWFyU2VuZFF1ZXVlKCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCfinIUg6Z2eQmVhcuagvOW8j0FJ5Zue5aSN5aSE55CG5a6M5oiQJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCDkvb/nlKgvc2VuZGFz5Y+R6YCBQUnlm57lpI3lpLHotKU6JywgZXJyb3IpO1xuXG4gICAgICAvLyDlpoLmnpwvc2VuZGFz5aSx6LSl77yM5Zue6YCA5Yiw5pu/5o2i5b2T5YmN5qW85bGC55qE5pa55byPXG4gICAgICBjb25zb2xlLmxvZygn8J+UhCDlm57pgIDliLDmm7/mjaLlvZPliY3mpbzlsYLnmoTmlrnlvI8uLi4nKTtcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlQ3VycmVudE1lc3NhZ2VXaXRoQ29udGVudChjb250ZW50KTtcblxuICAgICAgLy8g5Zue6YCA5oOF5Ya15LiL5Lmf6KaB5riF56m66Zif5YiXXG4gICAgICBjb25zb2xlLmxvZygn8J+nuSDmuIXnqbrlj5HpgIHpmJ/liJfvvIjlm57pgIDmg4XlhrXvvIkuLi4nKTtcbiAgICAgIHRoaXMuY2xlYXJTZW5kUXVldWUoKTtcbiAgICB9XG4gIH1cblxuXG4gIC8qKlxuICAgKiDmmL7npLrmiZPlrZfliqjnlLtcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgc2hvd1R5cGluZ0luZGljYXRvcigpOiBQcm9taXNlPEhUTUxFbGVtZW50PiB7XG4gICAgY29uc3QgbWVzc2FnZXNDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhdE1lc3NhZ2VzJyk7XG4gICAgaWYgKCFtZXNzYWdlc0NvbnRhaW5lcikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8g6I635Y+WQUnlpLTlg49cbiAgICBsZXQgYWlBdmF0YXIgPSAnaHR0cHM6Ly9maWxlcy5jYXRib3gubW9lL3U4Y2N5NS5qcGcnOyAvLyDpu5jorqTlpLTlg49cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjdXJyZW50Q2hhdERhdGEgPSB0aGlzLmNoYXREYXRhLmdldCh0aGlzLmN1cnJlbnRDaGF0KTtcbiAgICAgIGNvbnN0IGNoYXROYW1lID0gY3VycmVudENoYXREYXRhPy5jaGF0TmFtZSB8fCB0aGlzLmN1cnJlbnRDaGF0O1xuXG4gICAgICBpZiAodGhpcy5jdXJyZW50Q2hhdCAmJiB0aGlzLmN1cnJlbnRDaGF0LnN0YXJ0c1dpdGgoJ+e+pOiBiicpKSB7XG4gICAgICAgIC8vIOe+pOiBiuaDheWGte+8jOiOt+WPlue+pOiBiuWktOWDj1xuICAgICAgICBpZiAoY3VycmVudENoYXREYXRhICYmIGN1cnJlbnRDaGF0RGF0YS5hdmF0YXIpIHtcbiAgICAgICAgICBhaUF2YXRhciA9IGN1cnJlbnRDaGF0RGF0YS5hdmF0YXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgeyBHcm91cENoYXRTdG9yYWdlIH0gPSBhd2FpdCBpbXBvcnQoJy4vbW9kdWxlcy9ncm91cENoYXQvc3RvcmFnZScpO1xuICAgICAgICAgIGFpQXZhdGFyID0gR3JvdXBDaGF0U3RvcmFnZS5nZXREZWZhdWx0R3JvdXBBdmF0YXIodGhpcy5jdXJyZW50Q2hhdCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5jdXJyZW50Q2hhdCAmJiAhdGhpcy5jdXJyZW50Q2hhdC5zdGFydHNXaXRoKCfnvqTogYonKSkge1xuICAgICAgICAvLyDljZXogYrmg4XlhrXvvIzku47ljp/lp4vogYrlpKnlkI3np7Dmj5Dlj5bop5LoibLlkI3vvIjkv53mjIHlpKflsI/lhpnvvIlcbiAgICAgICAgbGV0IGNoYXJhY3Rlck5hbWUgPSBjaGF0TmFtZS5yZXBsYWNlKC9e5ZKMfOeahOiBiuWkqSQvZywgJycpO1xuXG4gICAgICAgIGlmICghY2hhcmFjdGVyTmFtZSB8fCBjaGFyYWN0ZXJOYW1lID09PSBjaGF0TmFtZSkge1xuICAgICAgICAgIGNoYXJhY3Rlck5hbWUgPSBjaGF0TmFtZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjaGFyYWN0ZXJOYW1lKSB7XG4gICAgICAgICAgLy8g5pa55rOVMe+8mumAmui/h+a2iOaBr+ino+aekOWZqOiOt+WPluWktOWDj1xuICAgICAgICAgIGNvbnN0IGF2YXRhckZyb21QYXJzZXIgPSB0aGlzLm1lc3NhZ2VQYXJzZXIuZ2V0RGVmYXVsdEF2YXRhcihjaGFyYWN0ZXJOYW1lKTtcbiAgICAgICAgICBpZiAoYXZhdGFyRnJvbVBhcnNlciAmJiBhdmF0YXJGcm9tUGFyc2VyICE9PSAnaHR0cHM6Ly9maWxlcy5jYXRib3gubW9lL3U4Y2N5NS5qcGcnKSB7XG4gICAgICAgICAgICBhaUF2YXRhciA9IGF2YXRhckZyb21QYXJzZXI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIOaWueazlTLvvJrnm7TmjqXku45TaWxseVRhdmVybuiOt+WPluinkuiJsuWktOWDj1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBnZXRDaGFyQXZhdGFyUGF0aCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpcmVjdEF2YXRhciA9IGdldENoYXJBdmF0YXJQYXRoKGNoYXJhY3Rlck5hbWUsIHRydWUpO1xuICAgICAgICAgICAgICAgIGlmIChkaXJlY3RBdmF0YXIpIHtcbiAgICAgICAgICAgICAgICAgIGFpQXZhdGFyID0gZGlyZWN0QXZhdGFyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZGlyZWN0RXJyb3IpIHtcbiAgICAgICAgICAgICAgLy8g6Z2Z6buY5aSE55CG6KeS6Imy5aS05YOP6I635Y+W5aSx6LSlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIOmdmem7mOWkhOeQhuWktOWDj+iOt+WPluWksei0pe+8jOS9v+eUqOm7mOiupOWktOWDj1xuICAgIH1cblxuICAgIC8vIOWIm+W7uuaJk+Wtl+WKqOeUu+a2iOaBr1xuICAgIGNvbnN0IHR5cGluZ01lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0eXBpbmdNZXNzYWdlLmNsYXNzTmFtZSA9ICdtZXNzYWdlIHJlY2VpdmVkIHR5cGluZy1tZXNzYWdlJztcbiAgICB0eXBpbmdNZXNzYWdlLmlubmVySFRNTCA9IGBcbiAgICAgIDxpbWcgc3JjPVwiJHthaUF2YXRhcn1cIiBjbGFzcz1cImF2YXRhclwiIGFsdD1cIuinkuiJsuWktOWDj1wiIC8+XG4gICAgICA8ZGl2IGNsYXNzPVwibWVzc2FnZS13cmFwcGVyXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtZXNzYWdlLWNvbnRlbnRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidHlwaW5nLWluZGljYXRvclwiPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0eXBpbmctZG90XCI+PC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0eXBpbmctZG90XCI+PC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0eXBpbmctZG90XCI+PC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG5cbiAgICAvLyDmt7vliqDlpLTlg4/liqDovb3lpLHotKXnmoTlpITnkIZcbiAgICBjb25zdCBhdmF0YXJJbWcgPSB0eXBpbmdNZXNzYWdlLnF1ZXJ5U2VsZWN0b3IoJy5hdmF0YXInKSBhcyBIVE1MSW1hZ2VFbGVtZW50O1xuICAgIGlmIChhdmF0YXJJbWcpIHtcbiAgICAgIGF2YXRhckltZy5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICBhdmF0YXJJbWcuc3JjID0gJ2h0dHBzOi8vZmlsZXMuY2F0Ym94Lm1vZS91OGNjeTUuanBnJztcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8g5omT5a2X5Yqo55S75qC35byP5bey5ZyoU0NTU+S4reWumuS5ie+8jOaXoOmcgOWKqOaAgea3u+WKoFxuXG4gICAgLy8g5re75Yqg5Yiw5raI5oGv5a655ZmoXG4gICAgbWVzc2FnZXNDb250YWluZXIuYXBwZW5kQ2hpbGQodHlwaW5nTWVzc2FnZSk7XG5cbiAgICAvLyDmu5rliqjliLDlupXpg6hcbiAgICBtZXNzYWdlc0NvbnRhaW5lci5zY3JvbGxUb3AgPSBtZXNzYWdlc0NvbnRhaW5lci5zY3JvbGxIZWlnaHQ7XG5cbiAgICByZXR1cm4gdHlwaW5nTWVzc2FnZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDpmpDol4/miZPlrZfliqjnlLtcbiAgICovXG4gIHByaXZhdGUgaGlkZVR5cGluZ0luZGljYXRvcih0eXBpbmdNZXNzYWdlOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIGlmICh0eXBpbmdNZXNzYWdlICYmIHR5cGluZ01lc3NhZ2UucGFyZW50Tm9kZSkge1xuICAgICAgdHlwaW5nTWVzc2FnZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHR5cGluZ01lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDmj5Dlj5bmnIDlkI7kuIDlr7kgPGJlYXI+PC9iZWFyPiDkuK3nmoTlhoXlrrlcbiAgICogQHBhcmFtIHRleHQg5YyF5ZCrQmVhcuagh+etvueahOaWh+acrFxuICAgKiBAcmV0dXJucyBCZWFy5qCH562+5YaF55qE5YaF5a6577yM5aaC5p6c5rKh5pyJ5om+5Yiw5YiZ6L+U5ZuebnVsbFxuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0TGFzdEJlYXJDb250ZW50KHRleHQ6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgIGlmICghdGV4dCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8g5LuO5ZCO5b6A5YmN5p+l5om+5pyA5ZCO5LiA5LiqIDwvYmVhcj4g5qCH562+XG4gICAgY29uc3QgbGFzdEJlYXJFbmRJbmRleCA9IHRleHQubGFzdEluZGV4T2YoJzwvYmVhcj4nKTtcbiAgICBpZiAobGFzdEJlYXJFbmRJbmRleCA9PT0gLTEpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfinYwg5pyq5om+5YiwIDwvYmVhcj4g5qCH562+Jyk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyDku47mnIDlkI7kuIDkuKogPC9iZWFyPiDkvY3nva7lvoDliY3mn6Xmib7lr7nlupTnmoQgPGJlYXI+IOagh+etvlxuICAgIGNvbnN0IHRleHRCZWZvcmVFbmQgPSB0ZXh0LnN1YnN0cmluZygwLCBsYXN0QmVhckVuZEluZGV4KTtcbiAgICBjb25zdCBsYXN0QmVhclN0YXJ0SW5kZXggPSB0ZXh0QmVmb3JlRW5kLmxhc3RJbmRleE9mKCc8YmVhcj4nKTtcblxuICAgIGlmIChsYXN0QmVhclN0YXJ0SW5kZXggPT09IC0xKSB7XG4gICAgICBjb25zb2xlLmxvZygn4p2MIOacquaJvuWIsOWvueW6lOeahCA8YmVhcj4g5qCH562+Jyk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyDmj5Dlj5bmnIDlkI7kuIDlr7kgYmVhciDmoIfnrb7kuYvpl7TnmoTlhoXlrrlcbiAgICBjb25zdCBiZWFyQ29udGVudCA9IHRleHQuc3Vic3RyaW5nKGxhc3RCZWFyU3RhcnRJbmRleCArIDYsIGxhc3RCZWFyRW5kSW5kZXgpO1xuXG4gICAgY29uc29sZS5sb2coYPCfkLsg5om+5Yiw5pyA5ZCO5LiA5a+5QmVhcuagh+etvmApO1xuXG4gICAgLy8g5qOA5p+l5piv5ZCm5YyF5ZCr6IGK5aSp5qC85byP55qE5YaF5a65XG4gICAgaWYgKHRoaXMuaGFzVmFsaWRDaGF0Q29udGVudChiZWFyQ29udGVudCkpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgQmVhcuagh+etvuWMheWQq+acieaViOiBiuWkqeWGheWuuScpO1xuICAgICAgcmV0dXJuIGJlYXJDb250ZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZygn4p2MIEJlYXLmoIfnrb7kuI3ljIXlkKvmnInmlYjogYrlpKnlhoXlrrknKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDmo4Dmn6VCZWFy5YaF5a655piv5ZCm5YyF5ZCr5pyJ5pWI55qE6IGK5aSp5YaF5a6554m55b6BXG4gICAqIEBwYXJhbSBjb250ZW50IEJlYXLmoIfnrb7lhoXnmoTlhoXlrrlcbiAgICogQHJldHVybnMg5piv5ZCm5YyF5ZCr6IGK5aSp5YaF5a65XG4gICAqL1xuICBwcml2YXRlIGhhc1ZhbGlkQ2hhdENvbnRlbnQoY29udGVudDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgaWYgKCFjb250ZW50KSByZXR1cm4gZmFsc2U7XG5cbiAgICAvLyDmlrnmoYhB77ya5a695p2+5pS+6KGMXG4gICAgLy8g5Y+q6KaB5YyF5ZCr5Lu75LiA6IGK5aSp5qCH6K6w5oiW5Yqo5oCB5a655Zmo5qCH6K6w77yM5Y2z6K6k5Li65piv5pyJ5pWIIEJlYXLvvJpcbiAgICAvLyAtIOiBiuWkqeWdl++8mlvlkozigKbnmoTogYrlpKldIOaIliBb576k6IGK4oCmXeKAplsv576k6IGK4oCmXVxuICAgIC8vIC0g5raI5oGv5qCH6K6w77yaW1NfXSDmiJYgW0dfXVxuICAgIC8vIC0g5Yqo5oCB5a655Zmo77yaW+WKqOaAgV3igKZbL+WKqOaAgV1cbiAgICBjb25zdCBoYXNQcml2YXRlQ2hhdCA9IGNvbnRlbnQuaW5jbHVkZXMoJ1vlkownKSAmJiBjb250ZW50LmluY2x1ZGVzKCfnmoTogYrlpKldJyk7XG4gICAgY29uc3QgaGFzR3JvdXBDaGF0ID0gY29udGVudC5pbmNsdWRlcygnW+e+pOiBiicpICYmIGNvbnRlbnQuaW5jbHVkZXMoJ1sv576k6IGKJyk7XG4gICAgY29uc3QgaGFzUHJpdmF0ZU1lc3NhZ2UgPSBjb250ZW50LmluY2x1ZGVzKCdbU18nKTtcbiAgICBjb25zdCBoYXNHcm91cE1lc3NhZ2UgPSBjb250ZW50LmluY2x1ZGVzKCdbR18nKTtcbiAgICBjb25zdCBoYXNEeW5hbWljcyA9IC9cXFvliqjmgIFcXF1bXFxzXFxTXSo/XFxbXFwv5Yqo5oCBXFxdLy50ZXN0KGNvbnRlbnQpO1xuXG4gICAgY29uc3Qgb2sgPSBoYXNQcml2YXRlQ2hhdCB8fCBoYXNHcm91cENoYXQgfHwgaGFzUHJpdmF0ZU1lc3NhZ2UgfHwgaGFzR3JvdXBNZXNzYWdlIHx8IGhhc0R5bmFtaWNzO1xuXG4gICAgaWYgKCFvaykge1xuICAgICAgY29uc29sZS5sb2coJ/Cfmqsg5pyq5om+5Yiw5pyJ5pWI6IGK5aSp5oiW5Yqo5oCB5qCH6K6wJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgQmVhcuWGheWuuemAmui/h+mqjOivge+8iOaWueahiEHvvJrlrZjlnKjogYrlpKkv5Yqo5oCB5qCH6K6w5Y2z5pyJ5pWI77yJJyk7XG4gICAgfVxuICAgIHJldHVybiBvaztcbiAgfVxuXG4gIC8qKlxuICAgKiDmuIXnkIZBSeWGhemDqOaAneiAg+agh+etvlxuICAgKiDnp7vpmaQgPGFuYWx5emU+44CBPHRoaW5rPuOAgTx0aGlua2luZz4g562JQUnlhoXpg6jmgJ3ogIPov4fnqIvnmoTmoIfnrb7lj4rlhbblhoXlrrlcbiAgICpcbiAgICogQHBhcmFtIHRleHQg5Y6f5aeLQUnlm57lpI3mlofmnKxcbiAgICogQHJldHVybnMg5riF55CG5ZCO55qE5paH5pysXG4gICAqL1xuICBwcml2YXRlIGNsZWFuQUlJbnRlcm5hbFRhZ3ModGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoIXRleHQpIHJldHVybiB0ZXh0O1xuXG4gICAgbGV0IGNsZWFuZWRUZXh0ID0gdGV4dDtcblxuICAgIC8vIOWumuS5iemcgOimgeenu+mZpOeahEFJ5YaF6YOo5oCd6ICD5qCH562+XG4gICAgY29uc3QgaW50ZXJuYWxUYWdzID0gWydhbmFseXplJywgJ3RoaW5rJywgJ3RoaW5raW5nJywgJ3JlYXNvbmluZycsICdpbnRlcm5hbCcsICd0aG91Z2h0JywgJ3Byb2Nlc3MnXTtcblxuICAgIC8vIOenu+mZpOavj+enjeagh+etvuWPiuWFtuWGheWuuVxuICAgIGZvciAoY29uc3QgdGFnIG9mIGludGVybmFsVGFncykge1xuICAgICAgLy8g5Yy56YWN5byA5aeL5ZKM57uT5p2f5qCH562+77yM5YyF5ous5YW25Lit55qE5omA5pyJ5YaF5a65XG4gICAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoYDwke3RhZ31bXj5dKj5bXFxcXHNcXFxcU10qPzxcXFxcLyR7dGFnfT5gLCAnZ2knKTtcbiAgICAgIGNsZWFuZWRUZXh0ID0gY2xlYW5lZFRleHQucmVwbGFjZShyZWdleCwgJycpO1xuXG4gICAgICAvLyDkuZ/lpITnkIboh6rpl63lkIjmoIfnrb5cbiAgICAgIGNvbnN0IHNlbGZDbG9zaW5nUmVnZXggPSBuZXcgUmVnRXhwKGA8JHt0YWd9W14+XSpcXFxcLz5gLCAnZ2knKTtcbiAgICAgIGNsZWFuZWRUZXh0ID0gY2xlYW5lZFRleHQucmVwbGFjZShzZWxmQ2xvc2luZ1JlZ2V4LCAnJyk7XG4gICAgfVxuXG4gICAgLy8g5riF55CG5aSa5L2Z55qE56m655m95a2X56ymXG4gICAgY2xlYW5lZFRleHQgPSBjbGVhbmVkVGV4dC5yZXBsYWNlKC9cXG5cXHMqXFxuXFxzKlxcbi9nLCAnXFxuXFxuJyk7IC8vIOenu+mZpOWkmuS9meeahOepuuihjFxuICAgIGNsZWFuZWRUZXh0ID0gY2xlYW5lZFRleHQudHJpbSgpO1xuXG4gICAgLy8g5aaC5p6c5riF55CG5ZCO5Y+R546w5pyJ5YaF5a656KKr56e76Zmk77yM6K6w5b2V5pel5b+XXG4gICAgaWYgKGNsZWFuZWRUZXh0Lmxlbmd0aCAhPT0gdGV4dC5sZW5ndGgpIHtcbiAgICAgIGNvbnNvbGUubG9nKGDwn6e5IOW3suenu+mZpCAke3RleHQubGVuZ3RoIC0gY2xlYW5lZFRleHQubGVuZ3RofSDkuKrlrZfnrKbnmoRBSeWGhemDqOaAneiAg+WGheWuuWApO1xuICAgIH1cblxuICAgIHJldHVybiBjbGVhbmVkVGV4dDtcbiAgfVxuXG4gIC8qKlxuICAgKiDmmL7npLrplJnor6/mj5DnpLpcbiAgICovXG4gIHByaXZhdGUgc2hvd0Vycm9yVG9hc3QobWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gICAgLy8g5L2/55SoIHRvYXN0ciDmmL7npLrplJnor6/mj5DnpLpcbiAgICBpZiAodHlwZW9mIHRvYXN0ciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRvYXN0ci5lcnJvcihtZXNzYWdlLCAn5Y+R6YCB5aSx6LSlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIOWkh+eUqOaWueahiO+8muS9v+eUqCBhbGVydFxuICAgICAgYWxlcnQoYOWPkemAgeWksei0pTogJHttZXNzYWdlfWApO1xuICAgIH1cbiAgfVxuXG4gIC8vIOa2iOaBr+WbnuWkjeWKn+iDveW3suebtOaOpembhuaIkOWIsCBoYW5kbGVBSVJlc3BvbnNlIOaWueazleS4re+8jOS4jemcgOimgeWNleeLrOWIneWni+WMllxuXG4gIC8qKlxuICAgKiDmmL7npLrogYrlpKnliJfooajnlYzpnaJcbiAgICovXG4gIHByaXZhdGUgc2hvd0NoYXRMaXN0KCk6IHZvaWQge1xuICAgIC8vIOS4reaWreato+WcqOi/m+ihjOeahOa2iOaBr+a4suafk1xuICAgIGlmICh0aGlzLmlzUmVuZGVyaW5nTWVzc2FnZXMpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5uRIOajgOa1i+WIsOeVjOmdouWIh+aNou+8jOS4reaWrea2iOaBr+a4suafkycpO1xuICAgICAgY29uc29sZS5sb2coJ/Cfm5Eg5b2T5YmN5riy5p+T54q25oCBOicsIHtcbiAgICAgICAgaXNSZW5kZXJpbmdNZXNzYWdlczogdGhpcy5pc1JlbmRlcmluZ01lc3NhZ2VzLFxuICAgICAgICBzaG91bGRTdG9wUmVuZGVyaW5nOiB0aGlzLnNob3VsZFN0b3BSZW5kZXJpbmcsXG4gICAgICB9KTtcbiAgICAgIHRoaXMuc2hvdWxkU3RvcFJlbmRlcmluZyA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8g6ZqQ6JeP5b2T5YmN6IGK5aSp55WM6Z2iXG4gICAgdGhpcy5oaWRlQ2hhdEludGVyZmFjZSgpO1xuXG4gICAgLy8g5aaC5p6c5pyJ5b2T5YmN6IGK5aSp77yM5qCH6K6w5Li65bey6K+777yI55So5oi35Yia5omN5Zyo5p+l55yL6L+Z5Liq6IGK5aSp77yJXG4gICAgaWYgKHRoaXMuY3VycmVudENoYXQgJiYgdGhpcy5jaGF0TGlzdE1hbmFnZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OWIOi/lOWbnuiBiuWkqeWIl+ihqOaXtuagh+iusOW9k+WJjeiBiuWkqeS4uuW3suivuzonLCB0aGlzLmN1cnJlbnRDaGF0KTtcbiAgICAgIHRoaXMuY2hhdExpc3RNYW5hZ2VyLmdldFVucmVhZE1lc3NhZ2VNYW5hZ2VyKCkubWFya0FzUmVhZCh0aGlzLmN1cnJlbnRDaGF0LCB0aGlzLmNoYXREYXRhKTtcbiAgICB9XG5cbiAgICAvLyDmmL7npLrogYrlpKnliJfooajnlYzpnaJcbiAgICB0aGlzLmNoYXRMaXN0TWFuYWdlci5zaG93Q2hhdExpc3RJbnRlcmZhY2UodGhpcy5jaGF0RGF0YSk7XG5cbiAgICAvLyDmm7TmlrDlvZPliY3nlYzpnaLnirbmgIFcbiAgICB0aGlzLmN1cnJlbnRJbnRlcmZhY2UgPSAnbGlzdCc7XG4gIH1cblxuICAvKipcbiAgICog6ZqQ6JeP6IGK5aSp55WM6Z2iXG4gICAqL1xuICBwcml2YXRlIGhpZGVDaGF0SW50ZXJmYWNlKCk6IHZvaWQge1xuICAgIGNvbnN0IGNoYXRJbnRlcmZhY2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhdEludGVyZmFjZScpO1xuICAgIGlmIChjaGF0SW50ZXJmYWNlKSB7XG4gICAgICAoY2hhdEludGVyZmFjZSBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9XG4gICAgLy8g56e76Zmk5rua5Yqo55uR5ZCs77yM6Ziy5q2i5YaF5a2Y5rOE5ryP5ZKM6YeN5aSN57uR5a6aXG4gICAgdGhpcy5kZXRhY2hUb3BTY3JvbGxMaXN0ZW5lcigpO1xuICAgIC8vIOmUgOavgeiBiuWkqeeKtuaAgeagj1xuICAgIHRoaXMuZGVzdHJveUNoYXRTdGF0dXNCYXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliJ3lp4vljJbogYrlpKnliJfooajkuovku7bnm5HlkKxcbiAgICovXG4gIHByaXZhdGUgaW5pdGlhbGl6ZUNoYXRMaXN0RXZlbnRzKCk6IHZvaWQge1xuICAgIC8vIOebkeWQrOiBiuWkqeWIl+ihqOmhueeCueWHu+S6i+S7tlxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYXRMaXN0SXRlbUNsaWNrJywgKGU6IEV2ZW50KSA9PiB7XG4gICAgICBjb25zdCBjdXN0b21FdmVudCA9IGUgYXMgQ3VzdG9tRXZlbnQ7XG4gICAgICBjb25zdCB7IGNoYXRJZCB9ID0gY3VzdG9tRXZlbnQuZGV0YWlsO1xuICAgICAgdGhpcy5zd2l0Y2hUb0NoYXQoY2hhdElkKTtcbiAgICB9KTtcblxuICAgIC8vIOebkeWQrOWIm+W7uuaWsOiBiuWkqeS6i+S7tlxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NyZWF0ZU5ld0NoYXQnLCAoZTogRXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZSBhcyBDdXN0b21FdmVudDtcbiAgICAgIGNvbnN0IHsgdHlwZSwgY29udGFjdElkcyB9ID0gY3VzdG9tRXZlbnQuZGV0YWlsO1xuICAgICAgdGhpcy5oYW5kbGVDcmVhdGVOZXdDaGF0KHR5cGUsIGNvbnRhY3RJZHMpO1xuICAgIH0pO1xuXG4gICAgLy8g55uR5ZCs6IGU57O75Lq65pu05paw5LqL5Lu2XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY29udGFjdFVwZGF0ZWQnLCAoZTogRXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZSBhcyBDdXN0b21FdmVudDtcbiAgICAgIGNvbnN0IHsgb2xkTmFtZSwgbmV3TmFtZSwgbmV3QXZhdGFyIH0gPSBjdXN0b21FdmVudC5kZXRhaWw7XG4gICAgICB0aGlzLmhhbmRsZUNvbnRhY3RVcGRhdGVkKG9sZE5hbWUsIG5ld05hbWUsIG5ld0F2YXRhcik7XG4gICAgfSk7XG5cbiAgICAvLyDnm5HlkKzliLfmlrDogYrlpKnliJfooajkuovku7ZcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdyZWZyZXNoQ2hhdExpc3QnLCAoKSA9PiB7XG4gICAgICB0aGlzLmhhbmRsZVJlZnJlc2hDaGF0TGlzdCgpO1xuICAgIH0pO1xuXG4gICAgLy8g55uR5ZCs576k6IGK5Yib5bu65LqL5Lu2XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2hhdExpc3RDaGFuZ2VkJywgKGU6IEV2ZW50KSA9PiB7XG4gICAgICBjb25zdCBjdXN0b21FdmVudCA9IGUgYXMgQ3VzdG9tRXZlbnQ7XG4gICAgICBpZiAoY3VzdG9tRXZlbnQuZGV0YWlsPy50eXBlID09PSAnZ3JvdXBDaGF0Q3JlYXRlZCcpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfjokg5qOA5rWL5Yiw576k6IGK5Yib5bu65LqL5Lu277yM5Yib5bu6576k6IGK5raI5oGv5qCH6K6wJyk7XG4gICAgICAgIHRoaXMuaGFuZGxlR3JvdXBDaGF0Q3JlYXRlZChjdXN0b21FdmVudC5kZXRhaWw/Lmdyb3VwQ2hhdERhdGEpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8g55uR5ZCs5Yig6Zmk6IGK5aSp5LqL5Lu2XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZGVsZXRlQ2hhdFJlcXVlc3QnLCAoZTogRXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZSBhcyBDdXN0b21FdmVudDtcbiAgICAgIGNvbnN0IHsgY2hhdElkIH0gPSBjdXN0b21FdmVudC5kZXRhaWw7XG4gICAgICBjb25zb2xlLmxvZygn8J+Xke+4jyDmo4DmtYvliLDliKDpmaTogYrlpKnor7fmsYI6JywgY2hhdElkKTtcbiAgICAgIHRoaXMuaGFuZGxlRGVsZXRlQ2hhdFJlcXVlc3QoY2hhdElkKTtcbiAgICB9KTtcblxuICAgIC8vIOebkeWQrOWktOWDj+e8k+WtmOa4hemZpOS6i+S7tlxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2F2YXRhckNhY2hlQ2xlYXJlZCcsIChlOiBFdmVudCkgPT4ge1xuICAgICAgY29uc3QgY3VzdG9tRXZlbnQgPSBlIGFzIEN1c3RvbUV2ZW50O1xuICAgICAgY29uc29sZS5sb2coJ/CflIQgW0JlYXJDaGF0TWFuYWdlcl0g5qOA5rWL5Yiw5aS05YOP57yT5a2Y5riF6Zmk5LqL5Lu277yM5Yi35paw6IGK5aSp55WM6Z2iOicsIGN1c3RvbUV2ZW50LmRldGFpbCk7XG4gICAgICB0aGlzLmhhbmRsZUF2YXRhckNhY2hlQ2xlYXJlZChjdXN0b21FdmVudC5kZXRhaWwpO1xuICAgIH0pO1xuXG4gICAgLy8g55uR5ZCs5LiW55WM5Lmm5aS05YOP57yT5a2Y5riF6Zmk5LqL5Lu2XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignd29ybGRib29rQXZhdGFyQ2FjaGVDbGVhcmVkJywgKGU6IEV2ZW50KSA9PiB7XG4gICAgICBjb25zdCBjdXN0b21FdmVudCA9IGUgYXMgQ3VzdG9tRXZlbnQ7XG4gICAgICBjb25zb2xlLmxvZygn8J+UhCBbQmVhckNoYXRNYW5hZ2VyXSDmlLbliLDkuJbnlYzkuablpLTlg4/nvJPlrZjmuIXpmaTkuovku7YsIGRldGFpbDogJywgY3VzdG9tRXZlbnQuZGV0YWlsKTtcbiAgICAgIHRoaXMuaGFuZGxlV29ybGRib29rQXZhdGFyQ2FjaGVDbGVhcmVkKGN1c3RvbUV2ZW50LmRldGFpbCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog5Yid5aeL5YyW5oiR55qE6aG16Z2i5qih5Z2XXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVQcm9maWxlTW9kdWxlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLnByb2ZpbGVJbnRlcmZhY2UgPSBhd2FpdCBpbml0aWFsaXplUHJvZmlsZU1vZHVsZSgpO1xuICAgICAgaWYgKHRoaXMucHJvZmlsZUludGVyZmFjZSkge1xuICAgICAgICB0aGlzLnNldHRpbmdzTW9kYWwgPSB0aGlzLnByb2ZpbGVJbnRlcmZhY2UuZ2V0U2V0dGluZ3NNb2RhbCgpO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coJ+KchSDmiJHnmoTpobXpnaLmqKHlnZfliJ3lp4vljJbmiJDlip8nKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIOaIkeeahOmhtemdouaooeWdl+WIneWni+WMluWksei0pTonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOWIneWni+WMluaJqeWxleWKn+iDveaooeWdl1xuICAgKi9cbiAgcHJpdmF0ZSBpbml0aWFsaXplRXh0ZW5zaW9uc01vZHVsZSgpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgaW5pdGlhbGl6ZUV4dGVuc2lvbnMoKTtcbiAgICAgIGNvbnNvbGUubG9nKCfinIUg5omp5bGV5Yqf6IO95qih5Z2X5Yid5aeL5YyW5oiQ5YqfJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCDmianlsZXlip/og73mqKHlnZfliJ3lp4vljJblpLHotKU6JywgZXJyb3IpO1xuICAgICAgLy8g5omp5bGV5Yqf6IO95aSx6LSl5LiN5bqU6K+l6Zi75q2i5bqU55So5ZCv5YqoXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOWIneWni+WMluiBiuWkqei/geenu+euoeeQhuWZqFxuICAgKi9cbiAgcHJpdmF0ZSBpbml0aWFsaXplQ2hhdE1pZ3JhdGlvbk1hbmFnZXIoKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNoYXRNaWdyYXRpb25NYW5hZ2VyID0gQ2hhdE1pZ3JhdGlvbk1hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcbiAgICAgIGNoYXRNaWdyYXRpb25NYW5hZ2VyLmluaXRpYWxpemUoKTtcblxuICAgICAgY29uc29sZS5sb2coJ+KchSDogYrlpKnov4Hnp7vnrqHnkIblmajliJ3lp4vljJbmiJDlip8nKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIOiBiuWkqei/geenu+euoeeQhuWZqOWIneWni+WMluWksei0pTonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOinpuWPkeiBiuWkqei/geenu+ajgOafpVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyB0cmlnZ2VyQ2hhdE1pZ3JhdGlvbkNoZWNrKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnNvbGUubG9nKCfwn5SUIFvkuLvlupTnlKhdIOinpuWPkeiBiuWkqei/geenu+ajgOafpScpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjaGF0TWlncmF0aW9uTWFuYWdlciA9IENoYXRNaWdyYXRpb25NYW5hZ2VyLmdldEluc3RhbmNlKCk7XG4gICAgICBjb25zb2xlLmxvZygn8J+TiyBb5Li75bqU55SoXSDojrflj5bliLAgQ2hhdE1pZ3JhdGlvbk1hbmFnZXIg5a6e5L6LJyk7XG4gICAgICBhd2FpdCBjaGF0TWlncmF0aW9uTWFuYWdlci5jaGVja0FuZE1pZ3JhdGUoKTtcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgW+S4u+W6lOeUqF0g6IGK5aSp6L+B56e75qOA5p+l5a6M5oiQJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBb5Li75bqU55SoXSDogYrlpKnov4Hnp7vmo4Dmn6XlpLHotKU6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDliJ3lp4vljJbogYrlpKnlo4HnurjnrqHnkIblmahcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZUNoYXRXYWxscGFwZXJNYW5hZ2VyKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmNoYXRXYWxscGFwZXJNYW5hZ2VyID0gQ2hhdFdhbGxwYXBlck1hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcbiAgICAgIGNvbnNvbGUubG9nKCfinIUg6IGK5aSp5aOB57q4566h55CG5Zmo5Yid5aeL5YyW5oiQ5YqfJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCDogYrlpKnlo4HnurjnrqHnkIblmajliJ3lp4vljJblpLHotKU6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDliIfmjaLliLDmjIflrprogYrlpKlcbiAgICovXG4gIHByaXZhdGUgc3dpdGNoVG9DaGF0KGNoYXRJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coYPCflIQg5bCd6K+V5YiH5o2i5Yiw6IGK5aSpOiAke2NoYXRJZH1gKTtcblxuICAgIC8vIOmakOiXj+iBiuWkqeWIl+ihqFxuICAgIHRoaXMuY2hhdExpc3RNYW5hZ2VyLmhpZGVDaGF0TGlzdEludGVyZmFjZSgpO1xuXG4gICAgLy8g5qOA5p+l5piv5ZCm5piv576k6IGKXG4gICAgaWYgKGNoYXRJZC5zdGFydHNXaXRoKCfnvqTogYonKSkge1xuICAgICAgdGhpcy5zd2l0Y2hUb0dyb3VwQ2hhdChjaGF0SWQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIOmmluWFiOWwneivleebtOaOpeafpeaJvlxuICAgIGxldCBjdXJyZW50Q2hhdERhdGEgPSB0aGlzLmNoYXREYXRhLmdldChjaGF0SWQpO1xuICAgIGxldCBmaW5hbENoYXRJZCA9IGNoYXRJZDtcblxuICAgIC8vIOWmguaenOebtOaOpeafpeaJvuWksei0pe+8jOWwneivleS4jeWQjOeahElE5qC85byPXG4gICAgaWYgKCFjdXJyZW50Q2hhdERhdGEpIHtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5SNIOebtOaOpeafpeaJvuWksei0pe+8jOWwneivleWFtuS7luagvOW8jy4uLmApO1xuXG4gICAgICAvLyDlsJ3or5Xmt7vliqDnvqTogYrliY3nvIDvvIjlj6/og73mmK/nvqTogYrkvYbmsqHmnInliY3nvIDvvIlcbiAgICAgIGNvbnN0IGdyb3VwQ2hhdElkID0gdGhpcy5tZXNzYWdlUGFyc2VyLmdlbmVyYXRlR3JvdXBDaGF0SWQoY2hhdElkKTtcbiAgICAgIGN1cnJlbnRDaGF0RGF0YSA9IHRoaXMuY2hhdERhdGEuZ2V0KGdyb3VwQ2hhdElkKTtcbiAgICAgIGlmIChjdXJyZW50Q2hhdERhdGEpIHtcbiAgICAgICAgY29uc29sZS5sb2coYOKchSDmib7liLDnvqTogYrmlbDmja7vvIzkvb/nlKhJRDogJHtncm91cENoYXRJZH1gKTtcbiAgICAgICAgdGhpcy5zd2l0Y2hUb0dyb3VwQ2hhdChncm91cENoYXRJZCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8g5bCd6K+V5aSn5bCP5YaZ5LiN5pWP5oSf5Yy56YWNXG4gICAgICBjb25zb2xlLmxvZyhg8J+UjSDlsJ3or5XlpKflsI/lhpnkuI3mlY/mhJ/ljLnphY0uLi5gKTtcbiAgICAgIGNvbnN0IGNoYXRJZExvd2VyID0gY2hhdElkLnRvTG93ZXJDYXNlKCk7XG4gICAgICBmb3IgKGNvbnN0IFtleGlzdGluZ0NoYXRJZCwgY2hhdERhdGFdIG9mIHRoaXMuY2hhdERhdGEuZW50cmllcygpKSB7XG4gICAgICAgIGlmIChleGlzdGluZ0NoYXRJZC50b0xvd2VyQ2FzZSgpID09PSBjaGF0SWRMb3dlcikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDinIUg5om+5Yiw5aSn5bCP5YaZ5Yy56YWN55qE6IGK5aSpOiAke2V4aXN0aW5nQ2hhdElkfSAo5Y6f5p+l5om+OiAke2NoYXRJZH0pYCk7XG4gICAgICAgICAgY3VycmVudENoYXREYXRhID0gY2hhdERhdGE7XG4gICAgICAgICAgZmluYWxDaGF0SWQgPSBleGlzdGluZ0NoYXRJZDsgLy8g5L2/55So5a6e6ZmF5a2Y5YKo55qESURcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghY3VycmVudENoYXREYXRhKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwg5om+5LiN5Yiw6IGK5aSp5pWw5o2uOicsIGNoYXRJZCk7XG4gICAgICBjb25zb2xlLmxvZygn8J+UjSDlj6/nlKjnmoTogYrlpKnmlbDmja46JywgQXJyYXkuZnJvbSh0aGlzLmNoYXREYXRhLmtleXMoKSkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIOaYvuekuuiBiuWkqeeVjOmdolxuICAgIHRoaXMuZGV0YWNoVG9wU2Nyb2xsTGlzdGVuZXIoKTtcbiAgICB0aGlzLnNob3dDaGF0SW50ZXJmYWNlKCk7XG5cbiAgICAvLyDliIfmjaLliLDmjIflrprogYrlpKlcbiAgICB0aGlzLmN1cnJlbnRDaGF0ID0gZmluYWxDaGF0SWQ7XG4gICAgLy8g6L+b5YWl6IGK5aSp5pe26YeN572u5YiG6aG15Y+v6KeB5p2h5pWw77yI5LiN6LaF6L+H5oC75raI5oGv5pWw77yJXG4gICAge1xuICAgICAgY29uc3QgdG90YWwgPSB0aGlzLmNoYXREYXRhLmdldChmaW5hbENoYXRJZCk/Lm1lc3NhZ2VzLmxlbmd0aCA/PyB0aGlzLklOSVRJQUxfVklTSUJMRV9DT1VOVDtcbiAgICAgIHRoaXMudmlzaWJsZUNvdW50cy5zZXQoZmluYWxDaGF0SWQsIE1hdGgubWluKHRoaXMuSU5JVElBTF9WSVNJQkxFX0NPVU5ULCB0b3RhbCkpO1xuICAgIH1cbiAgICB0aGlzLnJlbmRlckN1cnJlbnRDaGF0KCk7XG4gICAgLy8g57uR5a6a6aG26YOo5LiK5ruR5Yqg6L295pu05aSa55uR5ZCsXG4gICAgdGhpcy5hdHRhY2hUb3BTY3JvbGxMaXN0ZW5lcigpO1xuXG4gICAgLy8g5qCH6K6w6K+l6IGK5aSp5Li65bey6K+7XG4gICAgaWYgKHRoaXMuY2hhdExpc3RNYW5hZ2VyKSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+TliDmoIforrDogYrlpKnkuLrlt7Lor7s6JywgZmluYWxDaGF0SWQpO1xuICAgICAgdGhpcy5jaGF0TGlzdE1hbmFnZXIuZ2V0VW5yZWFkTWVzc2FnZU1hbmFnZXIoKS5tYXJrQXNSZWFkKGZpbmFsQ2hhdElkLCB0aGlzLmNoYXREYXRhKTtcbiAgICB9XG5cbiAgICAvLyDpgJrnn6Xlo4HnurjnrqHnkIblmajogYrlpKnliIfmjaJcbiAgICBpZiAodGhpcy5jaGF0V2FsbHBhcGVyTWFuYWdlcikge1xuICAgICAgY29uc29sZS5sb2coJ1tCZWFyQ2hhdE1hbmFnZXJdIOmAmuefpeWjgee6uOeuoeeQhuWZqOiBiuWkqeWIh+aNojonLCBmaW5hbENoYXRJZCk7XG4gICAgICB0aGlzLmNoYXRXYWxscGFwZXJNYW5hZ2VyLnNldEN1cnJlbnRDaGF0SWQoZmluYWxDaGF0SWQpO1xuICAgIH1cblxuICAgIC8vIOabtOaWsOeVjOmdoueKtuaAgVxuICAgIHRoaXMuY3VycmVudEludGVyZmFjZSA9ICdjaGF0JztcbiAgfVxuXG4gIC8qKlxuICAgKiDliIfmjaLliLDnvqTogYpcbiAgICovXG4gIHByaXZhdGUgc3dpdGNoVG9Hcm91cENoYXQoZ3JvdXBDaGF0SWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKGDwn5SEIOWIh+aNouWIsOe+pOiBijogJHtncm91cENoYXRJZH1gKTtcblxuICAgIC8vIOmmluWFiOWwneivleS7juW3suino+aekOeahOaVsOaNruS4reafpeaJvlxuICAgIGNvbnN0IGdyb3VwQ2hhdERhdGEgPSB0aGlzLmNoYXREYXRhLmdldChncm91cENoYXRJZCk7XG5cbiAgICAvLyDkuI3lho3ku45sb2NhbFN0b3JhZ2Xojrflj5bnvqTogYrmlbDmja7vvIznu5/kuIDkvb/nlKjlhoXlrZjkuK3nmoRjaGF0RGF0YVxuXG4gICAgaWYgKCFncm91cENoYXREYXRhKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwg576k6IGK5pWw5o2u5LiN5a2Y5ZyoOicsIGdyb3VwQ2hhdElkKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIOWPr+eUqOeahOiBiuWkqeaVsOaNrjonLCBBcnJheS5mcm9tKHRoaXMuY2hhdERhdGEua2V5cygpKSk7XG4gICAgICB0aGlzLnNob3dUb2FzdCgn576k6IGK5LiN5a2Y5ZyoJywgJ2Vycm9yJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8g5pi+56S66IGK5aSp55WM6Z2iXG4gICAgdGhpcy5kZXRhY2hUb3BTY3JvbGxMaXN0ZW5lcigpO1xuICAgIHRoaXMuc2hvd0NoYXRJbnRlcmZhY2UoKTtcblxuICAgIC8vIOWIh+aNouWIsOe+pOiBilxuICAgIHRoaXMuY3VycmVudENoYXQgPSBncm91cENoYXRJZDtcbiAgICAvLyDov5vlhaXnvqTogYrml7bph43nva7liIbpobXlj6/op4HmnaHmlbDvvIjkuI3otoXov4fmgLvmlbDvvIlcbiAgICB7XG4gICAgICBjb25zdCB0b3RhbCA9IHRoaXMuY2hhdERhdGEuZ2V0KGdyb3VwQ2hhdElkKT8ubWVzc2FnZXMubGVuZ3RoID8/IHRoaXMuSU5JVElBTF9WSVNJQkxFX0NPVU5UO1xuICAgICAgdGhpcy52aXNpYmxlQ291bnRzLnNldChncm91cENoYXRJZCwgTWF0aC5taW4odGhpcy5JTklUSUFMX1ZJU0lCTEVfQ09VTlQsIHRvdGFsKSk7XG4gICAgfVxuICAgIHRoaXMucmVuZGVyQ3VycmVudENoYXQoKTtcbiAgICAvLyDnu5Hlrprpobbpg6jkuIrmu5HliqDovb3mm7TlpJrnm5HlkKxcbiAgICB0aGlzLmF0dGFjaFRvcFNjcm9sbExpc3RlbmVyKCk7XG5cbiAgICAvLyDmoIforrDor6XnvqTogYrkuLrlt7Lor7tcbiAgICBpZiAodGhpcy5jaGF0TGlzdE1hbmFnZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OWIOagh+iusOe+pOiBiuS4uuW3suivuzonLCBncm91cENoYXRJZCk7XG4gICAgICB0aGlzLmNoYXRMaXN0TWFuYWdlci5nZXRVbnJlYWRNZXNzYWdlTWFuYWdlcigpLm1hcmtBc1JlYWQoZ3JvdXBDaGF0SWQsIHRoaXMuY2hhdERhdGEpO1xuICAgIH1cblxuICAgIC8vIOmAmuefpeWjgee6uOeuoeeQhuWZqOiBiuWkqeWIh+aNolxuICAgIGlmICh0aGlzLmNoYXRXYWxscGFwZXJNYW5hZ2VyKSB7XG4gICAgICBjb25zb2xlLmxvZygnW0JlYXJDaGF0TWFuYWdlcl0g6YCa55+l5aOB57q4566h55CG5Zmo576k6IGK5YiH5o2iOicsIGdyb3VwQ2hhdElkKTtcbiAgICAgIHRoaXMuY2hhdFdhbGxwYXBlck1hbmFnZXIuc2V0Q3VycmVudENoYXRJZChncm91cENoYXRJZCk7XG4gICAgfVxuXG4gICAgLy8g5pu05paw55WM6Z2i54q25oCBXG4gICAgdGhpcy5jdXJyZW50SW50ZXJmYWNlID0gJ2NoYXQnO1xuXG4gICAgLy8g6L+b5YWl576k6IGK5pe26Ieq5Yqo6KGl6b2Q576k6IGK6aqo5p6277yI5ZCM5q2l5b+r6YCf5rOo5YWl77yJXG4gICAgdGhpcy5lbnN1cmVHcm91cFNrZWxldG9uRXhpc3RzKGdyb3VwQ2hhdElkKTtcbiAgfVxuXG4gIC8vIOaWsOWinu+8muehruS/neW9k+WJjealvOWxguWtmOWcqOe+pOiBiumqqOaetu+8iOi/m+WFpee+pOiBiuaXtuiwg+eUqO+8iVxuICBwcml2YXRlIGVuc3VyZUdyb3VwU2tlbGV0b25FeGlzdHMoZ3JvdXBDaGF0SWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBncm91cENoYXREYXRhID0gdGhpcy5jaGF0RGF0YS5nZXQoZ3JvdXBDaGF0SWQpO1xuICAgICAgaWYgKCFncm91cENoYXREYXRhKSByZXR1cm47XG5cbiAgICAgIC8vIOWIpOaWreaYr+WQpuS4uue+pOiBilxuICAgICAgY29uc3QgaXNHcm91cCA9IChncm91cENoYXREYXRhIGFzIGFueSkudHlwZSA9PT0gJ2dyb3VwJyB8fCBncm91cENoYXRJZC5zdGFydHNXaXRoKCfnvqTogYonKTtcbiAgICAgIGlmICghaXNHcm91cCkgcmV0dXJuO1xuXG4gICAgICAvLyDojrflj5blvZPliY3mnIDlkI7kuIDmnaHmtojmga9cbiAgICAgIGNvbnN0IGxhc3RNZXNzYWdlID0gZ2V0Q2hhdE1lc3NhZ2VzKC0xKT8uWzBdO1xuICAgICAgaWYgKCFsYXN0TWVzc2FnZSkgcmV0dXJuO1xuXG4gICAgICBjb25zdCBvcmlnaW5hbE1lc3NhZ2U6IHN0cmluZyA9IGxhc3RNZXNzYWdlLm1lc3NhZ2UgfHwgJyc7XG5cbiAgICAgIC8vIOaPkOWPlmJlYXLmoIfnrb7lhoXnmoTlhoXlrrlcbiAgICAgIGNvbnN0IGJlYXJNYXRjaCA9XG4gICAgICAgIG9yaWdpbmFsTWVzc2FnZS5tYXRjaCgvPGJlYXI+KFtcXHNcXFNdKj8pPFxcL2JlYXI+LykgfHwgb3JpZ2luYWxNZXNzYWdlLm1hdGNoKC88YmVhcj4oW1xcc1xcU10qPyk8XFwvYmVhcj4vKTtcbiAgICAgIGNvbnN0IGJlYXJJbm5lciA9IGJlYXJNYXRjaCA/IGJlYXJNYXRjaFsxXSA6ICcnO1xuXG4gICAgICAvLyDlpoLmnpzlt7LlrZjlnKjlr7nlupTnvqTogYrlnZfliJnot7Pov4dcbiAgICAgIGNvbnN0IGdyb3VwTmFtZSA9IGdyb3VwQ2hhdERhdGEuY2hhdE5hbWU7XG4gICAgICBpZiAoIWdyb3VwTmFtZSkgcmV0dXJuO1xuICAgICAgY29uc3QgZXNjID0gKHM6IHN0cmluZykgPT4gcy5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgJ1xcXFwkJicpO1xuICAgICAgY29uc3QgZ3JvdXBCbG9ja1JlZ2V4ID0gbmV3IFJlZ0V4cChgXFxcXFvnvqTogYoke2VzYyhncm91cE5hbWUpfVxcXFxdW1xcXFxzXFxcXFNdKj9cXFxcW1xcXFwv576k6IGKJHtlc2MoZ3JvdXBOYW1lKX1cXFxcXWApO1xuICAgICAgaWYgKGJlYXJJbm5lciAmJiBncm91cEJsb2NrUmVnZXgudGVzdChiZWFySW5uZXIpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8g5L2/55So5YaF5a2Y5Lit55qE5oiQ5ZGY5p6E5bu65LuF4oCc5aS0K+aIkOWRmCvlsL7igJ3nmoTpqqjmnrZcbiAgICAgIGNvbnN0IHNrZWxldG9uQ2hhdDogQ2hhdERhdGEgPSB7XG4gICAgICAgIGNoYXRJZDogZ3JvdXBDaGF0SWQsXG4gICAgICAgIGNoYXROYW1lOiBncm91cENoYXREYXRhLmNoYXROYW1lLFxuICAgICAgICBhdmF0YXI6IGdyb3VwQ2hhdERhdGEuYXZhdGFyLFxuICAgICAgICBtZXNzYWdlczogW10sXG4gICAgICAgIGxhc3RNZXNzYWdlOiAnJyxcbiAgICAgICAgdHlwZTogJ2dyb3VwJyBhcyBhbnksXG4gICAgICAgIG1lbWJlcnM6IChncm91cENoYXREYXRhIGFzIGFueSkubWVtYmVycyB8fCBbXSxcbiAgICAgIH07XG5cbiAgICAgIC8vIOWkjeeUqOino+aekOWZqOeahOaehOW7uuWZqOeUn+aIkOe+pOiBiuWdl++8iG1lc3NhZ2Vz5Li656m65Y2z5b6X5Yiw6aqo5p6277yJXG4gICAgICBjb25zdCBza2VsZXRvbldpdGhCZWFyID0gdGhpcy5tZXNzYWdlUGFyc2VyLmJ1aWxkU2luZ2xlQ2hhdEJlYXJDb250ZW50KHNrZWxldG9uQ2hhdCk7XG4gICAgICBjb25zdCBtMiA9IHNrZWxldG9uV2l0aEJlYXIubWF0Y2goLzxiZWFyPihbXFxzXFxTXSo/KTxcXC9iZWFyPi8pO1xuICAgICAgY29uc3Qgc2tlbGV0b25Jbm5lciA9IG0yID8gbTJbMV0gOiBza2VsZXRvbldpdGhCZWFyO1xuXG4gICAgICAvLyDnu4TlkIjmlrDnmoRiZWFy5YaF5a6577yI5Zyo5pyr5bC+6L+95Yqg6aqo5p6277yJXG4gICAgICBjb25zdCBuZXdJbm5lciA9IChiZWFySW5uZXIgPyAoYmVhcklubmVyLmVuZHNXaXRoKCdcXG4nKSA/IGJlYXJJbm5lciA6IGJlYXJJbm5lciArICdcXG4nKSA6ICcnKSArIHNrZWxldG9uSW5uZXI7XG5cbiAgICAgIC8vIOWGmeWbnuWIsOW9k+WJjealvOWxgu+8muS7heabv+aNojxiZWFyPuWGhemDqOWGheWuuVxuICAgICAgY29uc3QgdXBkYXRlZE1lc3NhZ2UgPSB0aGlzLnJlcGxhY2VPbmx5QmVhclRhZ0NvbnRlbnQob3JpZ2luYWxNZXNzYWdlLCBuZXdJbm5lcik7XG5cbiAgICAgIHNldENoYXRNZXNzYWdlcyhcbiAgICAgICAgW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1lc3NhZ2VfaWQ6IGxhc3RNZXNzYWdlLm1lc3NhZ2VfaWQsXG4gICAgICAgICAgICBtZXNzYWdlOiB1cGRhdGVkTWVzc2FnZSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICB7IHJlZnJlc2g6ICdub25lJyB9LFxuICAgICAgKVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ+KchSDlt7LlnKjlvZPliY3mpbzlsYLooaXpvZDnvqTogYrpqqjmnrY6JywgZ3JvdXBDaGF0SWQpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwg6KGl6b2Q576k6IGK6aqo5p625aSx6LSlOicsIGVycik7XG4gICAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgZW5zdXJlR3JvdXBTa2VsZXRvbkV4aXN0cyDmiafooYzlpLHotKU6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDmmL7npLrogYrlpKnnlYzpnaJcbiAgICovXG4gIHByaXZhdGUgc2hvd0NoYXRJbnRlcmZhY2UoKTogdm9pZCB7XG4gICAgLy8g6YeN572u5riy5p+T5Lit5pat5qCH5b+X77yM5YWB6K645paw55qE5raI5oGv5riy5p+TXG4gICAgdGhpcy5zaG91bGRTdG9wUmVuZGVyaW5nID0gZmFsc2U7XG4gICAgY29uc29sZS5sb2coJ/Cfjqgg6L+b5YWl6IGK5aSp55WM6Z2i77yM6YeN572u5riy5p+T5Lit5pat5qCH5b+XJyk7XG5cbiAgICBjb25zdCBjaGF0SW50ZXJmYWNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXRJbnRlcmZhY2UnKTtcbiAgICBpZiAoY2hhdEludGVyZmFjZSkge1xuICAgICAgKGNoYXRJbnRlcmZhY2UgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgfVxuICAgIC8vIOWIneWni+WMluiBiuWkqeeKtuaAgeagj1xuICAgIHRoaXMuaW5pdGlhbGl6ZUNoYXRTdGF0dXNCYXIoKTtcblxuICAgIC8vIOenu+mZpOi/memHjOeahOinpuWPkeajgOafpe+8jOmBv+WFjeavj+asoei/m+WFpeiBiuWkqemDveinpuWPkVxuICB9XG5cbiAgLyoqXG4gICAqIOWIneWni+WMluiBiuWkqeeKtuaAgeagj1xuICAgKi9cbiAgcHJpdmF0ZSBpbml0aWFsaXplQ2hhdFN0YXR1c0JhcigpOiB2b2lkIHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhdFN0YXR1c0JhckNvbnRhaW5lcicpO1xuICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgIHRoaXMuY2hhdFN0YXR1c0JhciA9IFN0YXR1c0Jhci5jcmVhdGUoY29udGFpbmVyKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog6ZSA5q+B6IGK5aSp54q25oCB5qCPXG4gICAqL1xuICBwcml2YXRlIGRlc3Ryb3lDaGF0U3RhdHVzQmFyKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNoYXRTdGF0dXNCYXIpIHtcbiAgICAgIHRoaXMuY2hhdFN0YXR1c0Jhci5kZXN0cm95KCk7XG4gICAgICB0aGlzLmNoYXRTdGF0dXNCYXIgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlpITnkIbliJvlu7rmlrDogYrlpKlcbiAgICovXG4gIHByaXZhdGUgaGFuZGxlQ3JlYXRlTmV3Q2hhdCh0eXBlOiAnc2luZ2xlJyB8ICdncm91cCcsIGNvbnRhY3RJZHM6IHN0cmluZ1tdKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coYOWIm+W7uuaWsOiBiuWkqTogJHt0eXBlfSwg6IGU57O75Lq6OmAsIGNvbnRhY3RJZHMpO1xuXG4gICAgLy8g6I635Y+W6IGU57O75Lq65L+h5oGvXG4gICAgY29uc3QgY29udGFjdE1hbmFnZXIgPSB0aGlzLmNoYXRMaXN0TWFuYWdlci5nZXRDb250YWN0TWFuYWdlcigpO1xuICAgIGNvbnN0IGNvbnRhY3RzID0gY29udGFjdElkcy5tYXAoaWQgPT4gY29udGFjdE1hbmFnZXIuZ2V0Q29udGFjdEJ5SWQoaWQpKS5maWx0ZXIoQm9vbGVhbik7XG5cbiAgICBpZiAoY29udGFjdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLnNob3dUb2FzdCgn5pyq5om+5Yiw5pyJ5pWI6IGU57O75Lq6JywgJ2Vycm9yJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8g5a+55LqO5Y2V6IGK77yM5YWI5qOA5p+l5piv5ZCm5bey57uP5a2Y5Zyo5LiO6K+l6IGU57O75Lq655qE6IGK5aSp6K6w5b2VXG4gICAgaWYgKHR5cGUgPT09ICdzaW5nbGUnICYmIGNvbnRhY3RzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgY29uc3QgY29udGFjdE5hbWUgPSBjb250YWN0c1swXSEubmFtZTtcblxuICAgICAgLy8g5p+l5om+5piv5ZCm5bey5a2Y5Zyo5LiO6K+l6IGU57O75Lq655qE6IGK5aSpXG4gICAgICBjb25zdCBleGlzdGluZ0NoYXRJZCA9IHRoaXMuZmluZEV4aXN0aW5nQ2hhdFdpdGhDb250YWN0KGNvbnRhY3ROYW1lKTtcbiAgICAgIGlmIChleGlzdGluZ0NoYXRJZCkge1xuICAgICAgICBjb25zb2xlLmxvZyhg5om+5Yiw5bey5a2Y5Zyo55qE6IGK5aSpOiAke2V4aXN0aW5nQ2hhdElkfWApO1xuICAgICAgICB0aGlzLnN3aXRjaFRvQ2hhdChleGlzdGluZ0NoYXRJZCk7XG4gICAgICAgIHRoaXMuc2hvd1RvYXN0KGDlt7LliIfmjaLliLDkuI4ke2NvbnRhY3ROYW1lfeeahOiBiuWkqWAsICdpbmZvJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDliJvlu7rmlrDnmoTogYrlpKnmlbDmja5cbiAgICBsZXQgY2hhdE5hbWU6IHN0cmluZztcbiAgICBsZXQgY2hhdElkOiBzdHJpbmc7XG5cbiAgICBpZiAodHlwZSA9PT0gJ3NpbmdsZScgJiYgY29udGFjdHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAvLyDljZXogYrlpITnkIZcbiAgICAgIGNoYXROYW1lID0gYOWSjCR7Y29udGFjdHNbMF0hLm5hbWV955qE6IGK5aSpYDtcbiAgICAgIGNoYXRJZCA9IGNoYXROYW1lOyAvLyDnm7TmjqXkvb/nlKhjaGF0TmFtZeS9nOS4umNoYXRJZO+8jOS4jkFJ5Zue5aSN5qC85byP5L+d5oyB5LiA6Ie0XG5cbiAgICAgIC8vIOWIm+W7uuWNleiBiuaVsOaNrlxuICAgICAgY29uc3QgbmV3Q2hhdERhdGE6IENoYXREYXRhID0ge1xuICAgICAgICBjaGF0SWQsXG4gICAgICAgIGNoYXROYW1lLFxuICAgICAgICBhdmF0YXI6IGNvbnRhY3RzWzBdIS5hdmF0YXIsXG4gICAgICAgIG1lc3NhZ2VzOiBbXSxcbiAgICAgICAgdHlwZTogJ1MnLFxuICAgICAgfTtcblxuICAgICAgLy8g5re75Yqg5Yiw6IGK5aSp5pWw5o2u5LitXG4gICAgICB0aGlzLmNoYXREYXRhLnNldChjaGF0SWQsIG5ld0NoYXREYXRhKTtcblxuICAgICAgLy8g6YCa6L+Hc2V0Q2hhdE1lc3NhZ2Vz5Yib5bu65Y2V6IGK5Z2X77yI5byC5q2l77yJXG4gICAgICB0aGlzLmNyZWF0ZVNpbmdsZUNoYXRCbG9jayhuZXdDaGF0RGF0YSlcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUg5Y2V6IGK5Z2X5Yib5bu65oiQ5Yqf77yM5YiH5o2i5Yiw5paw6IGK5aSpJyk7XG4gICAgICAgICAgLy8g5YiH5o2i5Yiw5paw6IGK5aSpXG4gICAgICAgICAgdGhpcy5zd2l0Y2hUb0NoYXQoY2hhdElkKTtcbiAgICAgICAgICB0aGlzLnNob3dUb2FzdCgn5bey5Yib5bu65Y2V6IGKJywgJ2luZm8nKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwg5Yib5bu65Y2V6IGK5Z2X5aSx6LSlOicsIGVycm9yKTtcbiAgICAgICAgICAvLyDljbPkvb/liJvlu7rlpLHotKXvvIzkuZ/liIfmjaLliLDogYrlpKnvvIzlubbliLfmlrDogYrlpKnliJfooahcbiAgICAgICAgICBpZiAodGhpcy5jaGF0TGlzdE1hbmFnZXIpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhdExpc3RNYW5hZ2VyLnJlZnJlc2hDaGF0TGlzdCh0aGlzLmNoYXREYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5zd2l0Y2hUb0NoYXQoY2hhdElkKTtcbiAgICAgICAgICB0aGlzLnNob3dUb2FzdCgn5bey5Yib5bu65Y2V6IGK77yI5pys5Zyw5qih5byP77yJJywgJ3dhcm5pbmcnKTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIOe+pOiBiuWkhOeQhiAtIOS9v+eUqOS4k+mXqOeahOe+pOiBiueuoeeQhuWZqFxuICAgICAgY29uc29sZS5sb2coJ/CflIQg5L2/55SoR3JvdXBDaGF0TWFuYWdlcuWIm+W7uue+pOiBiicpO1xuICAgICAgdGhpcy5ncm91cENoYXRNYW5hZ2VyLmNyZWF0ZUdyb3VwQ2hhdChjb250YWN0SWRzKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5aSE55CG6IGU57O75Lq65pu05paw5LqL5Lu2XG4gICAqIEBwYXJhbSBvbGROYW1lIOWOn+iBlOezu+S6uuWQjeensFxuICAgKiBAcGFyYW0gbmV3TmFtZSDmlrDogZTns7vkurrlkI3np7BcbiAgICogQHBhcmFtIG5ld0F2YXRhciDmlrDlpLTlg49VUkxcbiAgICovXG4gIHByaXZhdGUgaGFuZGxlQ29udGFjdFVwZGF0ZWQob2xkTmFtZTogc3RyaW5nLCBuZXdOYW1lOiBzdHJpbmcsIG5ld0F2YXRhcjogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coYPCflIQg5aSE55CG6IGU57O75Lq65pu05pawOiAke29sZE5hbWV9IC0+ICR7bmV3TmFtZX1gKTtcblxuICAgIHRyeSB7XG4gICAgICAvLyAxLiDmm7TmlrDogYrlpKnmlbDmja7kuK3nmoTnm7jlhbPkv6Hmga9cbiAgICAgIHRoaXMudXBkYXRlQ2hhdERhdGFGb3JDb250YWN0KG9sZE5hbWUsIG5ld05hbWUsIG5ld0F2YXRhcik7XG5cbiAgICAgIC8vIDIuIOWmguaenOW9k+WJjeato+WcqOaYvuekuuebuOWFs+iBiuWkqe+8jOeri+WNs+abtOaWsOeVjOmdolxuICAgICAgdGhpcy51cGRhdGVDdXJyZW50Q2hhdEludGVyZmFjZShvbGROYW1lLCBuZXdOYW1lLCBuZXdBdmF0YXIpO1xuXG4gICAgICAvLyAzLiDph43mlrDmuLLmn5PlvZPliY3ogYrlpKnvvIjlpoLmnpzpnIDopoHvvIlcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRDaGF0KSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRDaGF0RGF0YSA9IHRoaXMuY2hhdERhdGEuZ2V0KHRoaXMuY3VycmVudENoYXQpO1xuICAgICAgICBpZiAoY3VycmVudENoYXREYXRhICYmIHRoaXMuaXNDaGF0UmVsYXRlZFRvQ29udGFjdChjdXJyZW50Q2hhdERhdGEsIG9sZE5hbWUsIG5ld05hbWUpKSB7XG4gICAgICAgICAgdGhpcy5yZW5kZXJDdXJyZW50Q2hhdCgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKGDinIUg6IGU57O75Lq65pu05paw5aSE55CG5a6M5oiQOiAke29sZE5hbWV9IC0+ICR7bmV3TmFtZX1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIOWkhOeQhuiBlOezu+S6uuabtOaWsOWksei0pTonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOabtOaWsOiBiuWkqeaVsOaNruS4reS4juiBlOezu+S6uuebuOWFs+eahOS/oeaBr1xuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVDaGF0RGF0YUZvckNvbnRhY3Qob2xkTmFtZTogc3RyaW5nLCBuZXdOYW1lOiBzdHJpbmcsIG5ld0F2YXRhcjogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5jaGF0RGF0YS5mb3JFYWNoKChjaGF0RGF0YSwgY2hhdElkKSA9PiB7XG4gICAgICBsZXQgdXBkYXRlZCA9IGZhbHNlO1xuXG4gICAgICAvLyDmm7TmlrDogYrlpKnlkI3np7BcbiAgICAgIGlmIChjaGF0RGF0YS5jaGF0TmFtZSA9PT0gYOWSjCR7b2xkTmFtZX3nmoTogYrlpKlgKSB7XG4gICAgICAgIGNoYXREYXRhLmNoYXROYW1lID0gYOWSjCR7bmV3TmFtZX3nmoTogYrlpKlgO1xuICAgICAgICB1cGRhdGVkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8g5pu05paw6IGK5aSp5aS05YOP77yI5aaC5p6c5piv5Y2V6IGK77yJXG4gICAgICBpZiAoY2hhdERhdGEuY2hhdE5hbWUuaW5jbHVkZXMobmV3TmFtZSkgJiYgIWNoYXREYXRhLmNoYXROYW1lLmluY2x1ZGVzKCfnvqTogYonKSkge1xuICAgICAgICBjaGF0RGF0YS5hdmF0YXIgPSBuZXdBdmF0YXI7XG4gICAgICAgIHVwZGF0ZWQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyDmm7TmlrDmtojmga/kuK3nmoTlj5HpgIHogIXkv6Hmga9cbiAgICAgIGNoYXREYXRhLm1lc3NhZ2VzLmZvckVhY2gobWVzc2FnZSA9PiB7XG4gICAgICAgIGlmIChtZXNzYWdlLnNlbmRlciA9PT0gb2xkTmFtZSkge1xuICAgICAgICAgIG1lc3NhZ2Uuc2VuZGVyID0gbmV3TmFtZTtcbiAgICAgICAgICBtZXNzYWdlLmF2YXRhciA9IG5ld0F2YXRhcjtcbiAgICAgICAgICB1cGRhdGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmICh1cGRhdGVkKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5SEIOabtOaWsOiBiuWkqeaVsOaNrjogJHtjaGF0SWR9YCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog5pu05paw5b2T5YmN6IGK5aSp55WM6Z2iXG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZUN1cnJlbnRDaGF0SW50ZXJmYWNlKG9sZE5hbWU6IHN0cmluZywgbmV3TmFtZTogc3RyaW5nLCBuZXdBdmF0YXI6IHN0cmluZyk6IHZvaWQge1xuICAgIC8vIOabtOaWsOiBiuWkqeagh+mimFxuICAgIGNvbnN0IGNoYXRUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGF0VGl0bGUnKTtcbiAgICBpZiAoY2hhdFRpdGxlICYmIGNoYXRUaXRsZS50ZXh0Q29udGVudCA9PT0gYOWSjCR7b2xkTmFtZX3nmoTogYrlpKlgKSB7XG4gICAgICBjaGF0VGl0bGUudGV4dENvbnRlbnQgPSBg5ZKMJHtuZXdOYW1lfeeahOiBiuWkqWA7XG4gICAgfVxuXG4gICAgLy8gaGVhZGVy5aS05YOP5L+d5oyB6buY6K6k77yM5LiN6Lef6ZqP6IGU57O75Lq65aS05YOP5pu05pawXG4gICAgY29uc3QgaGVhZGVyQXZhdGFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlYWRlckF2YXRhcicpIGFzIEhUTUxJbWFnZUVsZW1lbnQ7XG4gICAgaWYgKGhlYWRlckF2YXRhcikge1xuICAgICAgaGVhZGVyQXZhdGFyLnNyYyA9ICdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvdThjY3k1LmpwZyc7XG4gICAgICBoZWFkZXJBdmF0YXIuYWx0ID0gJ+m7mOiupOWktOWDjyc7XG4gICAgfVxuXG4gICAgLy8g5pu05paw5omA5pyJ5raI5oGv5Lit55qE5aS05YOP5ZKM5Y+R6YCB6ICF5ZCN56ewXG4gICAgY29uc3QgbWVzc2FnZUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lc3NhZ2UnKTtcbiAgICBtZXNzYWdlRWxlbWVudHMuZm9yRWFjaChtZXNzYWdlRWxlbWVudCA9PiB7XG4gICAgICBjb25zdCBhdmF0YXIgPSBtZXNzYWdlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuYXZhdGFyJykgYXMgSFRNTEltYWdlRWxlbWVudDtcbiAgICAgIGNvbnN0IHNlbmRlckVsZW1lbnQgPSBtZXNzYWdlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubWVzc2FnZS1zZW5kZXIsIC5zZW5kZXItbmFtZScpO1xuXG4gICAgICBpZiAoYXZhdGFyICYmIChhdmF0YXIuYWx0ID09PSBvbGROYW1lIHx8IGF2YXRhci5hbHQgPT09IG5ld05hbWUpKSB7XG4gICAgICAgIGF2YXRhci5zcmMgPSBuZXdBdmF0YXI7XG4gICAgICAgIGF2YXRhci5hbHQgPSBuZXdOYW1lO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2VuZGVyRWxlbWVudCAmJiBzZW5kZXJFbGVtZW50LnRleHRDb250ZW50ID09PSBvbGROYW1lKSB7XG4gICAgICAgIHNlbmRlckVsZW1lbnQudGV4dENvbnRlbnQgPSBuZXdOYW1lO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOajgOafpeiBiuWkqeaYr+WQpuS4juaMh+WumuiBlOezu+S6uuebuOWFs1xuICAgKi9cbiAgcHJpdmF0ZSBpc0NoYXRSZWxhdGVkVG9Db250YWN0KGNoYXREYXRhOiBDaGF0RGF0YSwgb2xkTmFtZTogc3RyaW5nLCBuZXdOYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAvLyDmo4Dmn6XogYrlpKnlkI3np7BcbiAgICBpZiAoY2hhdERhdGEuY2hhdE5hbWUgPT09IGDlkowke29sZE5hbWV955qE6IGK5aSpYCB8fCBjaGF0RGF0YS5jaGF0TmFtZSA9PT0gYOWSjCR7bmV3TmFtZX3nmoTogYrlpKlgKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyDmo4Dmn6Xmtojmga/kuK3mmK/lkKbmnInor6XogZTns7vkurpcbiAgICByZXR1cm4gY2hhdERhdGEubWVzc2FnZXMuc29tZShtZXNzYWdlID0+IG1lc3NhZ2Uuc2VuZGVyID09PSBvbGROYW1lIHx8IG1lc3NhZ2Uuc2VuZGVyID09PSBuZXdOYW1lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliJvlu7rljZXogYrlnZflubbpgJrov4dzZXRDaGF0TWVzc2FnZXPkv53lrZhcbiAgICogQHBhcmFtIGNoYXREYXRhIOWNleiBiuaVsOaNrlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBjcmVhdGVTaW5nbGVDaGF0QmxvY2soY2hhdERhdGE6IENoYXREYXRhKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SEIOW8gOWni+WIm+W7uuWNleiBiuWdlzonLCBjaGF0RGF0YS5jaGF0TmFtZSk7XG4gICAgICBjb25zb2xlLmxvZygn8J+TnSDljZXogYrmlbDmja46JywgeyBjaGF0SWQ6IGNoYXREYXRhLmNoYXRJZCwgY2hhdE5hbWU6IGNoYXREYXRhLmNoYXROYW1lIH0pO1xuXG4gICAgICAvLyDmnoTlu7rljZXogYrlnZfmoIforrDvvIjkuI3ljIXlkKvpu5jorqTmtojmga/vvIlcbiAgICAgIGNvbnN0IHNpbmdsZUNoYXRNYXJrZXIgPSBgWyR7Y2hhdERhdGEuY2hhdE5hbWV9XVxcblsvJHtjaGF0RGF0YS5jaGF0TmFtZX1dYDtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OdIOaehOW7uueahOWNleiBiuagh+iusDonLCBzaW5nbGVDaGF0TWFya2VyKTtcblxuICAgICAgLy8g6I635Y+W5b2T5YmN5raI5oGvXG4gICAgICBjb25zdCBjdXJyZW50TWVzc2FnZXMgPSBnZXRDaGF0TWVzc2FnZXMoLTEpIHx8IFtdO1xuXG4gICAgICBpZiAoY3VycmVudE1lc3NhZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8g5aaC5p6c5pyJ546w5pyJ5raI5oGv77yM5re75Yqg5YiwYmVhcuagh+etvuWGhVxuICAgICAgICBjb25zdCBsYXN0TWVzc2FnZSA9IGN1cnJlbnRNZXNzYWdlc1swXTtcbiAgICAgICAgY29uc3QgYmVhckNvbnRlbnQgPSBsYXN0TWVzc2FnZS5tZXNzYWdlIHx8ICcnO1xuXG4gICAgICAgIGxldCB1cGRhdGVkTWVzc2FnZTogc3RyaW5nO1xuXG4gICAgICAgIC8vIOajgOafpeaYr+WQpuW3suaciWJlYXLmoIfnrb5cbiAgICAgICAgaWYgKGJlYXJDb250ZW50LmluY2x1ZGVzKCc8YmVhcj4nKSkge1xuICAgICAgICAgIC8vIOWcqGJlYXLmoIfnrb7lhoXmt7vliqDljZXogYrlnZdcbiAgICAgICAgICBjb25zdCBuZXdCZWFyQ29udGVudCA9IGJlYXJDb250ZW50LnJlcGxhY2UoJzwvYmVhcj4nLCBgJHtzaW5nbGVDaGF0TWFya2VyfVxcbjwvYmVhcj5gKTtcbiAgICAgICAgICBjb25zdCBiZWFyQ29udGVudE9ubHkgPSBuZXdCZWFyQ29udGVudC5yZXBsYWNlKCc8YmVhcj4nLCAnJykucmVwbGFjZSgnPC9iZWFyPicsICcnKTtcbiAgICAgICAgICAvLyDlj6rmm7/mjaJiZWFy5qCH562+5YaF5a6577yM5L+d55WZ5qCH562+5aSW55qE6KeE6IyD6KaB5rGCXG4gICAgICAgICAgdXBkYXRlZE1lc3NhZ2UgPSB0aGlzLnJlcGxhY2VPbmx5QmVhclRhZ0NvbnRlbnQobGFzdE1lc3NhZ2UubWVzc2FnZSB8fCAnJywgYmVhckNvbnRlbnRPbmx5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyDmsqHmnIliZWFy5qCH562+77yM55u05o6l5Zyo5Y6f5raI5oGv5YmN5re75YqgYmVhcuagh+etvlxuICAgICAgICAgIGNvbnN0IG9yaWdpbmFsTWVzc2FnZSA9IGxhc3RNZXNzYWdlLm1lc3NhZ2UgfHwgJyc7XG4gICAgICAgICAgdXBkYXRlZE1lc3NhZ2UgPSBgPGJlYXI+XFxuJHtzaW5nbGVDaGF0TWFya2VyfVxcbjwvYmVhcj4ke29yaWdpbmFsTWVzc2FnZX1gO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgc2V0Q2hhdE1lc3NhZ2VzKFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbWVzc2FnZV9pZDogbGFzdE1lc3NhZ2UubWVzc2FnZV9pZCxcbiAgICAgICAgICAgICAgbWVzc2FnZTogdXBkYXRlZE1lc3NhZ2UsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgeyByZWZyZXNoOiAnbm9uZScgfSxcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zb2xlLmxvZygn4pyFIOW3sua3u+WKoOWNleiBiuWdl+WIsOeOsOaciWJlYXLmoIfnrb7lhoUnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOWmguaenOayoeaciea2iOaBr++8jOWIm+W7uuS4gOadoeWMheWQq2JlYXLmoIfnrb7nmoTmlrDmtojmga9cbiAgICAgICAgY29uc3QgbmV3TWVzc2FnZSA9IGA8YmVhcj5cXG4ke3NpbmdsZUNoYXRNYXJrZXJ9XFxuPC9iZWFyPmA7XG5cbiAgICAgICAgYXdhaXQgc2V0Q2hhdE1lc3NhZ2VzKFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbWVzc2FnZV9pZDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgbWVzc2FnZTogbmV3TWVzc2FnZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgICB7IHJlZnJlc2g6ICdub25lJyB9LFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCfinIUg5bey5Yib5bu65paw5raI5oGv5YyF5ZCr5Y2V6IGK5Z2XJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIOinpuWPkea2iOaBr+ino+aekOWSjOiBiuWkqeWIl+ihqOabtOaWsFxuICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplRnJvbUV4aXN0aW5nRGF0YSgpO1xuXG4gICAgICAvLyDpqozor4HljZXogYrmmK/lkKbmiJDlip/liJvlu7pcbiAgICAgIGNvbnN0IGNyZWF0ZWRDaGF0ID0gdGhpcy5jaGF0RGF0YS5nZXQoY2hhdERhdGEuY2hhdElkKTtcbiAgICAgIGlmIChjcmVhdGVkQ2hhdCAmJiBjcmVhdGVkQ2hhdC5tZXNzYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinIUg5Y2V6IGK5Z2X5Yib5bu65a6M5oiQ77yM5YyF5ZCr5raI5oGvOicsIGNyZWF0ZWRDaGF0Lm1lc3NhZ2VzLmxlbmd0aCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyDljZXogYrlnZfliJvlu7rlrozmiJDvvIzkvYbmnKrmo4DmtYvliLDmtojmga8nKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIOWIm+W7uuWNleiBiuWdl+Wksei0pTonLCBlcnJvcik7XG5cbiAgICAgIC8vIOWmguaenOWIm+W7uuWksei0pe+8jOiHs+WwkeWIt+aWsOiBiuWkqeWIl+ihqOaYvuekulxuICAgICAgaWYgKHRoaXMuY2hhdExpc3RNYW5hZ2VyKSB7XG4gICAgICAgIHRoaXMuY2hhdExpc3RNYW5hZ2VyLnJlZnJlc2hDaGF0TGlzdCh0aGlzLmNoYXREYXRhKTtcbiAgICAgICAgY29uc29sZS5sb2coYOKchSDlt7LliLfmlrDogYrlpKnliJfooajvvIzmlrDlop7ljZXogYo6ICR7Y2hhdERhdGEuY2hhdE5hbWV9YCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOWkhOeQhuWIoOmZpOiBiuWkqeivt+axglxuICAgKiBAcGFyYW0gY2hhdElkIOimgeWIoOmZpOeahOiBiuWkqUlEXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGhhbmRsZURlbGV0ZUNoYXRSZXF1ZXN0KGNoYXRJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5eR77iPIOW8gOWni+WkhOeQhuWIoOmZpOiBiuWkqeivt+axgjonLCBjaGF0SWQpO1xuXG4gICAgICAvLyDku47lhoXlrZjkuK3nmoTogYrlpKnmlbDmja7kuK3liKDpmaRcbiAgICAgIGNvbnN0IGRlbGV0ZWRDaGF0RGF0YSA9IHRoaXMuY2hhdERhdGEuZ2V0KGNoYXRJZCk7XG4gICAgICBpZiAoZGVsZXRlZENoYXREYXRhKSB7XG4gICAgICAgIHRoaXMuY2hhdERhdGEuZGVsZXRlKGNoYXRJZCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinIUg5bey5LuO5YaF5a2Y5Lit5Yig6Zmk6IGK5aSp5pWw5o2uOicsIGNoYXRJZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyDmnKrlnKjlhoXlrZjkuK3mib7liLDopoHliKDpmaTnmoTogYrlpKnmlbDmja46JywgY2hhdElkKTtcbiAgICAgIH1cblxuICAgICAgLy8g5LuOYmVhcuagh+etvuS4reWIoOmZpOWvueW6lOeahOiBiuWkqeWdl1xuICAgICAgYXdhaXQgdGhpcy5kZWxldGVDaGF0QmxvY2tGcm9tQmVhcihjaGF0SWQsIGRlbGV0ZWRDaGF0RGF0YSk7XG5cbiAgICAgIC8vIOWmguaenOW9k+WJjeato+WcqOafpeeci+iiq+WIoOmZpOeahOiBiuWkqe+8jOi/lOWbnuiBiuWkqeWIl+ihqFxuICAgICAgaWYgKHRoaXMuY3VycmVudENoYXQgPT09IGNoYXRJZCkge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UhCDlvZPliY3mraPlnKjmn6XnnIvooqvliKDpmaTnmoTogYrlpKnvvIzov5Tlm57ogYrlpKnliJfooagnKTtcbiAgICAgICAgdGhpcy5zaG93Q2hhdExpc3QoKTtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ+KchSDliKDpmaTogYrlpKnor7fmsYLlpITnkIblrozmiJAnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIOWkhOeQhuWIoOmZpOiBiuWkqeivt+axguWksei0pTonLCBlcnJvcik7XG4gICAgICB0aGlzLnNob3dUb2FzdCgn5Yig6Zmk6IGK5aSp5aSx6LSlJywgJ2Vycm9yJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOS7jmJlYXLmoIfnrb7kuK3liKDpmaTogYrlpKnlnZdcbiAgICogQHBhcmFtIGNoYXRJZCDogYrlpKlJRFxuICAgKiBAcGFyYW0gY2hhdERhdGEg6IGK5aSp5pWw5o2u77yI5Y+v6YCJ77yM55So5LqO56Gu5a6a6IGK5aSp57G75Z6L77yJXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGRlbGV0ZUNoYXRCbG9ja0Zyb21CZWFyKGNoYXRJZDogc3RyaW5nLCBjaGF0RGF0YT86IENoYXREYXRhKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5eR77iPIOW8gOWni+S7jmJlYXLmoIfnrb7kuK3liKDpmaTogYrlpKnlnZc6JywgY2hhdElkKTtcblxuICAgICAgLy8g6I635Y+W5b2T5YmN5raI5oGvXG4gICAgICBjb25zdCBjdXJyZW50TWVzc2FnZXMgPSBnZXRDaGF0TWVzc2FnZXMoLTEpIHx8IFtdO1xuICAgICAgaWYgKGN1cnJlbnRNZXNzYWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyDmsqHmnInmib7liLDlvZPliY3mtojmga/vvIzml6Dms5XliKDpmaTogYrlpKnlnZcnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBsYXN0TWVzc2FnZSA9IGN1cnJlbnRNZXNzYWdlc1swXTtcbiAgICAgIGNvbnN0IGJlYXJDb250ZW50ID0gbGFzdE1lc3NhZ2UubWVzc2FnZSB8fCAnJztcblxuICAgICAgLy8g5qOA5p+l5piv5ZCm5YyF5ZCrYmVhcuagh+etvlxuICAgICAgaWYgKCFiZWFyQ29udGVudC5pbmNsdWRlcygnPGJlYXI+JykpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyDlvZPliY3mtojmga/kuI3ljIXlkKtiZWFy5qCH562+77yM5peg5rOV5Yig6Zmk6IGK5aSp5Z2XJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8g5o+Q5Y+WYmVhcuagh+etvuWGheWuuVxuICAgICAgY29uc3QgYmVhck1hdGNoID0gYmVhckNvbnRlbnQubWF0Y2goLzxiZWFyPihbXFxzXFxTXSo/KTxcXC9iZWFyPi8pO1xuICAgICAgaWYgKCFiZWFyTWF0Y2gpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyDml6Dms5Xop6PmnpBiZWFy5qCH562+5YaF5a65Jyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbGV0IGJlYXJJbm5lckNvbnRlbnQgPSBiZWFyTWF0Y2hbMV07XG4gICAgICBjb25zb2xlLmxvZygn8J+TnSDlvIDlp4vliKDpmaTogYrlpKnlnZcnKTtcblxuICAgICAgLy8g5Yik5pat5piv576k6IGK6L+Y5piv5Y2V6IGK77yM5bm25Yig6Zmk5a+55bqU55qE5Z2XXG4gICAgICBjb25zdCBpc0dyb3VwQ2hhdCA9IGNoYXREYXRhPy50eXBlID09PSAnZ3JvdXAnIHx8IGNoYXRJZC5zdGFydHNXaXRoKCfnvqTogYonKTtcblxuICAgICAgaWYgKGlzR3JvdXBDaGF0KSB7XG4gICAgICAgIC8vIOWIoOmZpOe+pOiBiuWdl1xuICAgICAgICBiZWFySW5uZXJDb250ZW50ID0gdGhpcy5yZW1vdmVHcm91cENoYXRCbG9jayhiZWFySW5uZXJDb250ZW50LCBjaGF0SWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8g5Yig6Zmk5Y2V6IGK5Z2XXG4gICAgICAgIGJlYXJJbm5lckNvbnRlbnQgPSB0aGlzLnJlbW92ZVNpbmdsZUNoYXRCbG9jayhiZWFySW5uZXJDb250ZW50LCBjaGF0SWQpO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZygn8J+TnSDogYrlpKnlnZfliKDpmaTlrozmiJAnKTtcblxuICAgICAgLy8g5Y+q5pu/5o2iYmVhcuagh+etvuWGheWuuVxuICAgICAgY29uc3QgdXBkYXRlZE1lc3NhZ2UgPSB0aGlzLnJlcGxhY2VPbmx5QmVhclRhZ0NvbnRlbnQoYmVhckNvbnRlbnQsIGJlYXJJbm5lckNvbnRlbnQpO1xuXG4gICAgICAvLyDkvb/nlKhzZXRDaGF0TWVzc2FnZXPmm7TmlrDmtojmga9cbiAgICAgIGF3YWl0IHNldENoYXRNZXNzYWdlcyhcbiAgICAgICAgW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1lc3NhZ2VfaWQ6IGxhc3RNZXNzYWdlLm1lc3NhZ2VfaWQsXG4gICAgICAgICAgICBtZXNzYWdlOiB1cGRhdGVkTWVzc2FnZSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICB7IHJlZnJlc2g6ICdub25lJyB9LFxuICAgICAgKTtcblxuICAgICAgY29uc29sZS5sb2coJ+KchSDlt7Lku45iZWFy5qCH562+5Lit5Yig6Zmk6IGK5aSp5Z2XJyk7XG5cbiAgICAgIC8vIOmHjeaWsOino+aekOaVsOaNruS7peabtOaWsOeVjOmdolxuICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplRnJvbUV4aXN0aW5nRGF0YSgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwg5LuOYmVhcuagh+etvuS4reWIoOmZpOiBiuWkqeWdl+Wksei0pTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5Yig6Zmk5Y2V6IGK5Z2XXG4gICAqIEBwYXJhbSBiZWFyQ29udGVudCBiZWFy5qCH562+5YaF5a65XG4gICAqIEBwYXJhbSBjaGF0SWQg6IGK5aSpSURcbiAgICogQHJldHVybnMg5Yig6Zmk5ZCO55qEYmVhcuWGheWuuVxuICAgKi9cbiAgcHJpdmF0ZSByZW1vdmVTaW5nbGVDaGF0QmxvY2soYmVhckNvbnRlbnQ6IHN0cmluZywgY2hhdElkOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIOWNleiBiuWdl+agvOW8j++8mlvogYrlpKnlkI3np7BdLi4uWy/ogYrlpKnlkI3np7BdXG4gICAgLy8g6ZyA6KaB5Yy56YWN5a6M5pW055qE6IGK5aSp5Z2XXG4gICAgY29uc3QgY2hhdE5hbWUgPSBjaGF0SWQ7IC8vIOWvueS6juWNleiBiu+8jGNoYXRJZOWwseaYr+iBiuWkqeWQjeensFxuXG4gICAgLy8g5p6E5bu65q2j5YiZ6KGo6L6+5byP5p2l5Yy56YWN5pW05Liq6IGK5aSp5Z2XXG4gICAgY29uc3QgY2hhdEJsb2NrUmVnZXggPSBuZXcgUmVnRXhwKFxuICAgICAgYFxcXFxbJHtjaGF0TmFtZS5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgJ1xcXFwkJicpfVxcXFxdKFtcXFxcc1xcXFxTXSo/KVxcXFxbXFxcXC8ke2NoYXROYW1lLnJlcGxhY2UoXG4gICAgICAgIC9bLiorP14ke30oKXxbXFxdXFxcXF0vZyxcbiAgICAgICAgJ1xcXFwkJicsXG4gICAgICApfVxcXFxdYCxcbiAgICAgICdnJyxcbiAgICApO1xuXG4gICAgY29uc3Qgb3JpZ2luYWxMZW5ndGggPSBiZWFyQ29udGVudC5sZW5ndGg7XG4gICAgY29uc3QgdXBkYXRlZENvbnRlbnQgPSBiZWFyQ29udGVudC5yZXBsYWNlKGNoYXRCbG9ja1JlZ2V4LCAnJyk7XG5cbiAgICBpZiAodXBkYXRlZENvbnRlbnQubGVuZ3RoIDwgb3JpZ2luYWxMZW5ndGgpIHtcbiAgICAgIGNvbnNvbGUubG9nKGDinIUg5bey5Yig6Zmk5Y2V6IGK5Z2XOiAke2NoYXROYW1lfWApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLndhcm4oYOKaoO+4jyDmnKrmib7liLDopoHliKDpmaTnmoTljZXogYrlnZc6ICR7Y2hhdE5hbWV9YCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVwZGF0ZWRDb250ZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIOWIoOmZpOe+pOiBiuWdl1xuICAgKiBAcGFyYW0gYmVhckNvbnRlbnQgYmVhcuagh+etvuWGheWuuVxuICAgKiBAcGFyYW0gY2hhdElkIOiBiuWkqUlEXG4gICAqIEByZXR1cm5zIOWIoOmZpOWQjueahGJlYXLlhoXlrrlcbiAgICovXG4gIHByaXZhdGUgcmVtb3ZlR3JvdXBDaGF0QmxvY2soYmVhckNvbnRlbnQ6IHN0cmluZywgY2hhdElkOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIOe+pOiBiuWdl+agvOW8j++8mlvnvqTogYrnvqTlkI1dW+aIkOWRmO+8mi4uLl1b5raI5oGvLi4uXVsv576k6IGK576k5ZCNXVxuICAgIC8vIOaPkOWPlue+pOWQjeensFxuICAgIGNvbnN0IGdyb3VwTmFtZSA9IGNoYXRJZC5yZXBsYWNlKC9e576k6IGKLywgJycpO1xuXG4gICAgLy8g5p6E5bu65q2j5YiZ6KGo6L6+5byP5p2l5Yy56YWN5pW05Liq576k6IGK5Z2XXG4gICAgY29uc3QgZ3JvdXBCbG9ja1JlZ2V4ID0gbmV3IFJlZ0V4cChcbiAgICAgIGBcXFxcW+e+pOiBiiR7Z3JvdXBOYW1lLnJlcGxhY2UoXG4gICAgICAgIC9bLiorP14ke30oKXxbXFxdXFxcXF0vZyxcbiAgICAgICAgJ1xcXFwkJicsXG4gICAgICApfVxcXFxdXFxcXHMqXFxcXG4/XFxcXHMqXFxcXFvmiJDlkZhb77yaOl0oW15cXFxcXV0rKVxcXFxdXFxcXHMqXFxcXG4/KFtcXFxcc1xcXFxTXSo/KVxcXFxuP1xcXFxzKlxcXFxbL+e+pOiBiiR7Z3JvdXBOYW1lLnJlcGxhY2UoXG4gICAgICAgIC9bLiorP14ke30oKXxbXFxdXFxcXF0vZyxcbiAgICAgICAgJ1xcXFwkJicsXG4gICAgICApfVxcXFxdYCxcbiAgICAgICdnJyxcbiAgICApO1xuXG4gICAgY29uc3Qgb3JpZ2luYWxMZW5ndGggPSBiZWFyQ29udGVudC5sZW5ndGg7XG4gICAgY29uc3QgdXBkYXRlZENvbnRlbnQgPSBiZWFyQ29udGVudC5yZXBsYWNlKGdyb3VwQmxvY2tSZWdleCwgJycpO1xuXG4gICAgaWYgKHVwZGF0ZWRDb250ZW50Lmxlbmd0aCA8IG9yaWdpbmFsTGVuZ3RoKSB7XG4gICAgICBjb25zb2xlLmxvZyhg4pyFIOW3suWIoOmZpOe+pOiBiuWdlzogJHtncm91cE5hbWV9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUud2Fybihg4pqg77iPIOacquaJvuWIsOimgeWIoOmZpOeahOe+pOiBiuWdlzogJHtncm91cE5hbWV9YCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVwZGF0ZWRDb250ZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIOWkhOeQhue+pOiBiuWIm+W7uuWujOaIkOS6i+S7tlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBoYW5kbGVHcm91cENoYXRDcmVhdGVkKGdyb3VwQ2hhdERhdGE/OiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ/CflIQg5byA5aeL5aSE55CG576k6IGK5Yib5bu6Jyk7XG5cbiAgICAgIC8vIOS8mOWFiOS9v+eUqOS8oOmAkueahOe+pOiBiuaVsOaNru+8jOWQpuWImeWwneivleS7jkdyb3VwQ2hhdE1hbmFnZXLojrflj5ZcbiAgICAgIGxldCBsYXRlc3RHcm91cENoYXQgPSBncm91cENoYXREYXRhO1xuXG4gICAgICBpZiAoIWxhdGVzdEdyb3VwQ2hhdCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGdyb3VwQ2hhdHMgPSB0aGlzLmdyb3VwQ2hhdE1hbmFnZXIuZ2V0QWxsR3JvdXBDaGF0cygpO1xuICAgICAgICAgIGlmIChncm91cENoYXRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIOiOt+WPluacgOaWsOWIm+W7uueahOe+pOiBiu+8iOaMieWIm+W7uuaXtumXtOaOkuW6j++8iVxuICAgICAgICAgICAgbGF0ZXN0R3JvdXBDaGF0ID0gZ3JvdXBDaGF0cy5zb3J0KFxuICAgICAgICAgICAgICAoYSwgYikgPT4gbmV3IERhdGUoYi5jcmVhdGVkQXQpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEuY3JlYXRlZEF0KS5nZXRUaW1lKCksXG4gICAgICAgICAgICApWzBdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoc3RvcmFnZUVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8g5LuObG9jYWxTdG9yYWdl6I635Y+W576k6IGK5pWw5o2u5aSx6LSlOicsIHN0b3JhZ2VFcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8g5aaC5p6c5peg5rOV6I635Y+W576k6IGK5pWw5o2u77yM5Yib5bu65LiA5Liq6buY6K6k55qE576k6IGK5qCH6K6wXG4gICAgICBpZiAoIWxhdGVzdEdyb3VwQ2hhdCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyDmsqHmnInmib7liLDnvqTogYrmlbDmja7vvIzliJvlu7rpu5jorqTnvqTogYrmoIforrAnKTtcbiAgICAgICAgY29uc3QgZGVmYXVsdEdyb3VwQ2hhdE1hcmtlciA9IGBb576k6IGK5paw5bu6576k6IGKXVxcblvmiJDlkZjvvJrop5LoibIx77yM6KeS6ImyMu+8jHt7dXNlcn19XVxcblsv576k6IGK5paw5bu6576k6IGKXWA7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAodHlwZW9mIHNldENoYXRNZXNzYWdlcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY29uc3QgZGVmYXVsdE1lc3NhZ2UgPSBgPGJlYXI+XFxuJHtkZWZhdWx0R3JvdXBDaGF0TWFya2VyfVxcbjwvYmVhcj5gO1xuXG4gICAgICAgICAgICBhd2FpdCBzZXRDaGF0TWVzc2FnZXMoXG4gICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBtZXNzYWdlX2lkOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmYXVsdE1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgeyByZWZyZXNoOiAnbm9uZScgfSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUg5bey5Yib5bu66buY6K6k576k6IGK5qCH6K6wJyk7XG5cbiAgICAgICAgICAgIC8vIOinpuWPkea2iOaBr+ino+aekOWSjOiBiuWkqeWIl+ihqOabtOaWsFxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplRnJvbUV4aXN0aW5nRGF0YSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAobWVzc2FnZUVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIOWIm+W7uum7mOiupOe+pOiBiuagh+iusOWksei0pTonLCBtZXNzYWdlRXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ/Cfk4og5pyA5paw5Yib5bu655qE576k6IGKOicsIGxhdGVzdEdyb3VwQ2hhdCk7XG5cbiAgICAgIC8vIOaehOW7uue+pOiBiuagh+iusOa2iOaBryAtIOiOt+WPluecn+WunueahOinkuiJsuWQjeensFxuICAgICAgY29uc3QgY29udGFjdE1hbmFnZXIgPSB0aGlzLmNoYXRMaXN0TWFuYWdlci5nZXRDb250YWN0TWFuYWdlcigpO1xuICAgICAgY29uc3QgbWVtYmVyTmFtZXMgPSBsYXRlc3RHcm91cENoYXQubWVtYmVyc1xuICAgICAgICAubWFwKG1lbWJlcklkID0+IHtcbiAgICAgICAgICBpZiAobWVtYmVySWQgPT09ICd7e3VzZXJ9fScgfHwgbWVtYmVySWQgPT09ICd1c2VyJykge1xuICAgICAgICAgICAgcmV0dXJuICd7e3VzZXJ9fSc7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIOS7juiBlOezu+S6uueuoeeQhuWZqOiOt+WPluecn+WunuWQjeensFxuICAgICAgICAgIGNvbnN0IGNvbnRhY3QgPSBjb250YWN0TWFuYWdlci5nZXRDb250YWN0QnlJZChtZW1iZXJJZCk7XG4gICAgICAgICAgcmV0dXJuIGNvbnRhY3QgPyBjb250YWN0Lm5hbWUgOiBtZW1iZXJJZDtcbiAgICAgICAgfSlcbiAgICAgICAgLmpvaW4oJ++8jCcpO1xuXG4gICAgICAvLyDmoLzlvI/ljJbnvqTogYrmoIforrDvvIzkuInkuKrlnZfkuYvpl7TmjaLooYxcbiAgICAgIGNvbnN0IGdyb3VwQ2hhdE1hcmtlciA9IGBb576k6IGKJHtsYXRlc3RHcm91cENoYXQubmFtZX1dXFxuW+aIkOWRmO+8miR7bWVtYmVyTmFtZXN9XVxcblsv576k6IGKJHtsYXRlc3RHcm91cENoYXQubmFtZX1dYDtcblxuICAgICAgY29uc29sZS5sb2coJ/Cfk50g576k6IGK5qCH6K6w5raI5oGvOicsIGdyb3VwQ2hhdE1hcmtlcik7XG5cbiAgICAgIC8vIOiOt+WPluW9k+WJjea2iOaBr1xuICAgICAgbGV0IGN1cnJlbnRNZXNzYWdlcyA9IFtdO1xuICAgICAgbGV0IGxhc3RNZXNzYWdlID0gbnVsbDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8g5bCd6K+V6I635Y+W5pyA5ZCO5LiA5p2h5raI5oGvXG4gICAgICAgIGlmICh0eXBlb2YgZ2V0Q2hhdE1lc3NhZ2VzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgY3VycmVudE1lc3NhZ2VzID0gZ2V0Q2hhdE1lc3NhZ2VzKC0xKSB8fCBbXTtcbiAgICAgICAgICBsYXN0TWVzc2FnZSA9IGN1cnJlbnRNZXNzYWdlcy5sZW5ndGggPiAwID8gY3VycmVudE1lc3NhZ2VzWzBdIDogbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8g6I635Y+W5b2T5YmN5raI5oGv5aSx6LSl77yM5bCG5Yib5bu65paw5raI5oGvOicsIGVycm9yKTtcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRDaGF0TWVzc2FnZXMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBpZiAobGFzdE1lc3NhZ2UpIHtcbiAgICAgICAgICAgIC8vIOajgOafpea2iOaBr+aYr+WQpuWMheWQqyA8YmVhcj4g5qCH562+XG4gICAgICAgICAgICBsZXQgdXBkYXRlZENvbnRlbnQgPSBsYXN0TWVzc2FnZS5tZXNzYWdlO1xuXG4gICAgICAgICAgICBpZiAodXBkYXRlZENvbnRlbnQuaW5jbHVkZXMoJzxiZWFyPicpICYmIHVwZGF0ZWRDb250ZW50LmluY2x1ZGVzKCc8L2JlYXI+JykpIHtcbiAgICAgICAgICAgICAgLy8g5aaC5p6c5YyF5ZCrIGJlYXIg5qCH562+77yM5ZyoIDwvYmVhcj4g5YmN5re75Yqg576k6IGK5qCH6K6wXG4gICAgICAgICAgICAgIGNvbnN0IGJlYXJFbmRJbmRleCA9IHVwZGF0ZWRDb250ZW50Lmxhc3RJbmRleE9mKCc8L2JlYXI+Jyk7XG4gICAgICAgICAgICAgIHVwZGF0ZWRDb250ZW50ID1cbiAgICAgICAgICAgICAgICB1cGRhdGVkQ29udGVudC5zbGljZSgwLCBiZWFyRW5kSW5kZXgpICtcbiAgICAgICAgICAgICAgICAnXFxuXFxuJyArXG4gICAgICAgICAgICAgICAgZ3JvdXBDaGF0TWFya2VyICtcbiAgICAgICAgICAgICAgICAnXFxuJyArXG4gICAgICAgICAgICAgICAgdXBkYXRlZENvbnRlbnQuc2xpY2UoYmVhckVuZEluZGV4KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIOWmguaenOS4jeWMheWQqyBiZWFyIOagh+etvu+8jOWMheijheWcqCBiZWFyIOagh+etvuS4rVxuICAgICAgICAgICAgICB1cGRhdGVkQ29udGVudCA9IGA8YmVhcj5cXG4ke3VwZGF0ZWRDb250ZW50fVxcblxcbiR7Z3JvdXBDaGF0TWFya2VyfVxcbjwvYmVhcj5gO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCBzZXRDaGF0TWVzc2FnZXMoXG4gICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBtZXNzYWdlX2lkOiBsYXN0TWVzc2FnZS5tZXNzYWdlX2lkLFxuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogdXBkYXRlZENvbnRlbnQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgeyByZWZyZXNoOiAnbm9uZScgfSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUg5bey5re75Yqg576k6IGK5qCH6K6w5YiwIGJlYXIg5qCH562+5YaFJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIOWmguaenOayoeaciea2iOaBr++8jOWIm+W7uuS4gOadoeWMheWQqyBiZWFyIOagh+etvueahOaWsOa2iOaBr1xuICAgICAgICAgICAgY29uc3QgbmV3TWVzc2FnZSA9IGA8YmVhcj5cXG4ke2dyb3VwQ2hhdE1hcmtlcn1cXG48L2JlYXI+YDtcblxuICAgICAgICAgICAgYXdhaXQgc2V0Q2hhdE1lc3NhZ2VzKFxuICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgbWVzc2FnZV9pZDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG5ld01lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgeyByZWZyZXNoOiAnbm9uZScgfSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUg5bey5Yib5bu65paw5raI5oGv5YyF5ZCr576k6IGK5qCH6K6wJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIHNldENoYXRNZXNzYWdlcyDlh73mlbDkuI3lj6/nlKgnKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAobWVzc2FnZUVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCDlpITnkIbmtojmga/lpLHotKU6JywgbWVzc2FnZUVycm9yKTtcbiAgICAgIH1cblxuICAgICAgLy8g6Kem5Y+R5raI5oGv6Kej5p6Q5ZKM6IGK5aSp5YiX6KGo5pu05pawXG4gICAgICB0aGlzLmluaXRpYWxpemVGcm9tRXhpc3RpbmdEYXRhKCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCfinIUg576k6IGK5Yib5bu65aSE55CG5a6M5oiQJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCDlpITnkIbnvqTogYrliJvlu7rlpLHotKU6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlpITnkIbliLfmlrDogYrlpKnliJfooajkuovku7ZcbiAgICovXG4gIHByaXZhdGUgaGFuZGxlUmVmcmVzaENoYXRMaXN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKGDwn5SEIOWIt+aWsOiBiuWkqeWIl+ihqGApO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIOWmguaenOiBiuWkqeWIl+ihqOeVjOmdouW9k+WJjeWPr+inge+8jOmHjeaWsOa4suafk1xuICAgICAgY29uc3QgY2hhdExpc3RJbnRlcmZhY2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhdExpc3RJbnRlcmZhY2UnKTtcbiAgICAgIGlmIChjaGF0TGlzdEludGVyZmFjZSAmJiBjaGF0TGlzdEludGVyZmFjZS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XG4gICAgICAgIHRoaXMuY2hhdExpc3RNYW5hZ2VyLnJlbmRlckNoYXRMaXN0KHRoaXMuY2hhdERhdGEpO1xuICAgICAgICBjb25zb2xlLmxvZyhg4pyFIOiBiuWkqeWIl+ihqOW3suWIt+aWsGApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwg5Yi35paw6IGK5aSp5YiX6KGo5aSx6LSlOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5aSE55CG5aS05YOP57yT5a2Y5riF6Zmk5LqL5Lu2XG4gICAqL1xuICBwcml2YXRlIGhhbmRsZUF2YXRhckNhY2hlQ2xlYXJlZChkZXRhaWw6IGFueSk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKGDwn5SEIFtCZWFyQ2hhdE1hbmFnZXJdIOWkhOeQhuWktOWDj+e8k+WtmOa4hemZpOS6i+S7tjpgLCBkZXRhaWwpO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIDEuIOWIt+aWsOiBiuWkqeWIl+ihqOeVjOmdolxuICAgICAgY29uc3QgY2hhdExpc3RJbnRlcmZhY2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhdExpc3RJbnRlcmZhY2UnKTtcbiAgICAgIGlmIChjaGF0TGlzdEludGVyZmFjZSAmJiBjaGF0TGlzdEludGVyZmFjZS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XG4gICAgICAgIHRoaXMuY2hhdExpc3RNYW5hZ2VyLnJlbmRlckNoYXRMaXN0KHRoaXMuY2hhdERhdGEpO1xuICAgICAgICBjb25zb2xlLmxvZyhg4pyFIOiBiuWkqeWIl+ihqOWktOWDj+W3suWIt+aWsGApO1xuICAgICAgfVxuXG4gICAgICAvLyAyLiDliLfmlrDlvZPliY3ogYrlpKnnlYzpnaLkuK3nmoTmtojmga/lpLTlg49cbiAgICAgIGlmICh0aGlzLmN1cnJlbnRDaGF0KSB7XG4gICAgICAgIHRoaXMucmVmcmVzaEN1cnJlbnRDaGF0QXZhdGFycyhkZXRhaWwuY2xlYXJlZENvbnRhY3RzKTtcbiAgICAgICAgY29uc29sZS5sb2coYOKchSDlvZPliY3ogYrlpKnnlYzpnaLlpLTlg4/lt7LliLfmlrBgKTtcbiAgICAgIH1cblxuICAgICAgLy8gMy4g5Yi35paw6IGK5aSp5aS06YOo55qE5aS05YOP77yI5aaC5p6c5piv5b2T5YmN6IGK5aSp55qE6IGU57O75Lq677yJXG4gICAgICB0aGlzLnJlZnJlc2hDaGF0SGVhZGVyQXZhdGFyKGRldGFpbC5jbGVhcmVkQ29udGFjdHMpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwg5aSE55CG5aS05YOP57yT5a2Y5riF6Zmk5LqL5Lu25aSx6LSlOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5Yi35paw5b2T5YmN6IGK5aSp55WM6Z2i5Lit55qE5raI5oGv5aS05YOPXG4gICAqL1xuICBwcml2YXRlIHJlZnJlc2hDdXJyZW50Q2hhdEF2YXRhcnMoY2xlYXJlZENvbnRhY3RzOiBzdHJpbmdbXSk6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBtZXNzYWdlRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWVzc2FnZScpO1xuICAgICAgbGV0IHJlZnJlc2hlZENvdW50ID0gMDtcblxuICAgICAgLy8g6I635Y+W6IGU57O75Lq6566h55CG5ZmoXG4gICAgICBjb25zdCBjb250YWN0TWFuYWdlciA9IHRoaXMuY2hhdExpc3RNYW5hZ2VyLmdldENvbnRhY3RNYW5hZ2VyKCk7XG5cbiAgICAgIG1lc3NhZ2VFbGVtZW50cy5mb3JFYWNoKG1lc3NhZ2VFbGVtZW50ID0+IHtcbiAgICAgICAgY29uc3QgYXZhdGFyID0gbWVzc2FnZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmF2YXRhcicpIGFzIEhUTUxJbWFnZUVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IHNlbmRlckVsZW1lbnQgPSBtZXNzYWdlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubWVzc2FnZS1zZW5kZXIsIC5zZW5kZXItbmFtZScpO1xuXG4gICAgICAgIGlmIChhdmF0YXIgJiYgc2VuZGVyRWxlbWVudCkge1xuICAgICAgICAgIGNvbnN0IHNlbmRlck5hbWUgPSBzZW5kZXJFbGVtZW50LnRleHRDb250ZW50Py50cmltKCk7XG5cbiAgICAgICAgICAvLyDmo4Dmn6XmmK/lkKbmmK/ooqvmuIXpmaTnvJPlrZjnmoTogZTns7vkurpcbiAgICAgICAgICBpZiAoc2VuZGVyTmFtZSAmJiBjbGVhcmVkQ29udGFjdHMuaW5jbHVkZXMoc2VuZGVyTmFtZSkpIHtcbiAgICAgICAgICAgIC8vIOS9v+eUqOiBlOezu+S6uueuoeeQhuWZqOiOt+WPluato+ehrueahOWktOWDj1VSTO+8iOS8muiOt+WPluS4lueVjOS5pum7mOiupOWktOWDj++8iVxuICAgICAgICAgICAgY29uc3QgbmV3QXZhdGFyVXJsID0gY29udGFjdE1hbmFnZXIuZ2V0Q29udGFjdEF2YXRhcihzZW5kZXJOYW1lKTtcbiAgICAgICAgICAgIGlmIChuZXdBdmF0YXJVcmwgJiYgYXZhdGFyLnNyYyAhPT0gbmV3QXZhdGFyVXJsKSB7XG4gICAgICAgICAgICAgIGF2YXRhci5zcmMgPSBuZXdBdmF0YXJVcmw7XG4gICAgICAgICAgICAgIHJlZnJlc2hlZENvdW50Kys7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SEIOWIt+aWsOa2iOaBr+WktOWDjzogJHtzZW5kZXJOYW1lfSAtPiAke25ld0F2YXRhclVybH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVmcmVzaGVkQ291bnQgPiAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDinIUg5Yi35paw5LqGICR7cmVmcmVzaGVkQ291bnR9IOS4qua2iOaBr+WktOWDj2ApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwg5Yi35paw5b2T5YmN6IGK5aSp5aS05YOP5aSx6LSlOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5Yi35paw6IGK5aSp5aS06YOo55qE5aS05YOPXG4gICAqL1xuICBwcml2YXRlIHJlZnJlc2hDaGF0SGVhZGVyQXZhdGFyKGNsZWFyZWRDb250YWN0czogc3RyaW5nW10pOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgaGVhZGVyQXZhdGFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlYWRlckF2YXRhcicpIGFzIEhUTUxJbWFnZUVsZW1lbnQ7XG4gICAgICBjb25zdCBoZWFkZXJUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZWFkZXJUaXRsZScpO1xuXG4gICAgICAvLyDojrflj5bogZTns7vkurrnrqHnkIblmahcbiAgICAgIGNvbnN0IGNvbnRhY3RNYW5hZ2VyID0gdGhpcy5jaGF0TGlzdE1hbmFnZXIuZ2V0Q29udGFjdE1hbmFnZXIoKTtcblxuICAgICAgaWYgKGhlYWRlckF2YXRhciAmJiBoZWFkZXJUaXRsZSAmJiB0aGlzLmN1cnJlbnRDaGF0KSB7XG4gICAgICAgIGNvbnN0IGNoYXREYXRhID0gdGhpcy5jaGF0RGF0YS5nZXQodGhpcy5jdXJyZW50Q2hhdCk7XG4gICAgICAgIGlmIChjaGF0RGF0YSkge1xuICAgICAgICAgIC8vIOaPkOWPluiBiuWkqeWvueixoeeahOWQjeensFxuICAgICAgICAgIGNvbnN0IGNoYXROYW1lID0gY2hhdERhdGEuY2hhdE5hbWU7XG4gICAgICAgICAgY29uc3QgZGlzcGxheU5hbWUgPSB0aGlzLmV4dHJhY3REaXNwbGF5TmFtZShjaGF0TmFtZSk7XG5cbiAgICAgICAgICAvLyDmo4Dmn6XmmK/lkKbmmK/ooqvmuIXpmaTnvJPlrZjnmoTogZTns7vkurpcbiAgICAgICAgICBpZiAoZGlzcGxheU5hbWUgJiYgY2xlYXJlZENvbnRhY3RzLmluY2x1ZGVzKGRpc3BsYXlOYW1lKSkge1xuICAgICAgICAgICAgLy8g5L2/55So6IGU57O75Lq6566h55CG5Zmo6I635Y+W5q2j56Gu55qE5aS05YOPVVJM77yI5Lya6I635Y+W5LiW55WM5Lmm6buY6K6k5aS05YOP77yJXG4gICAgICAgICAgICBjb25zdCBuZXdBdmF0YXJVcmwgPSBjb250YWN0TWFuYWdlci5nZXRDb250YWN0QXZhdGFyKGRpc3BsYXlOYW1lKTtcbiAgICAgICAgICAgIGlmIChuZXdBdmF0YXJVcmwgJiYgaGVhZGVyQXZhdGFyLnNyYyAhPT0gbmV3QXZhdGFyVXJsKSB7XG4gICAgICAgICAgICAgIGhlYWRlckF2YXRhci5zcmMgPSBuZXdBdmF0YXJVcmw7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SEIOWIt+aWsOiBiuWkqeWktOmDqOWktOWDjzogJHtkaXNwbGF5TmFtZX0gLT4gJHtuZXdBdmF0YXJVcmx9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCDliLfmlrDogYrlpKnlpLTpg6jlpLTlg4/lpLHotKU6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDku47ogYrlpKnlkI3np7DkuK3mj5Dlj5bmmL7npLrlkI3np7BcbiAgICovXG4gIHByaXZhdGUgZXh0cmFjdERpc3BsYXlOYW1lKGNoYXROYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIOWkhOeQhlwi5ZKMeHh455qE6IGK5aSpXCLmoLzlvI9cbiAgICBjb25zdCBtYXRjaCA9IGNoYXROYW1lLm1hdGNoKC9e5ZKMKC4rKeeahOiBiuWkqSQvKTtcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBtYXRjaFsxXTtcbiAgICB9XG4gICAgLy8g55u05o6l6L+U5Zue6IGK5aSp5ZCN56ewXG4gICAgcmV0dXJuIGNoYXROYW1lO1xuICB9XG5cbiAgLyoqXG4gICAqIOWkhOeQhuS4lueVjOS5puWktOWDj+e8k+WtmOa4hemZpOS6i+S7tlxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVXb3JsZGJvb2tBdmF0YXJDYWNoZUNsZWFyZWQoZGV0YWlsOiB7XG4gICAgY2xlYXJlZENvdW50OiBudW1iZXI7XG4gICAgd29ybGRib29rQ29udGFjdE5hbWVzOiBzdHJpbmdbXTtcbiAgICBjbGVhcmVkQ29udGFjdE5hbWVzOiBzdHJpbmdbXTtcbiAgfSk6IHZvaWQge1xuICAgIGNvbnN0IHsgY2xlYXJlZENvdW50LCBjbGVhcmVkQ29udGFjdE5hbWVzIH0gPSBkZXRhaWw7XG5cbiAgICAvLyDlpoLmnpzmsqHmnInlrp7pmYXmuIXpmaTku7vkvZXnvJPlrZjvvIzliJnml6DpnIDmm7TmlrBcbiAgICBpZiAoY2xlYXJlZENvdW50ID09PSAwIHx8ICFjbGVhcmVkQ29udGFjdE5hbWVzIHx8IGNsZWFyZWRDb250YWN0TmFtZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLmxvZyhg4oS577iPIFtCZWFyQ2hhdE1hbmFnZXJdIOS4lueVjOS5puWktOWDj+e8k+WtmOa4hemZpOS6i+S7tjog5riF6Zmk5LqGICR7Y2xlYXJlZENvdW50fSDkuKrnvJPlrZjvvIzml6DpnIDmm7TmlrDogYrlpKnmlbDmja5gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhg8J+UhCBbQmVhckNoYXRNYW5hZ2VyXSDmraPlnKjmm7TmlrAgJHtjbGVhcmVkQ29udGFjdE5hbWVzLmxlbmd0aH0g5Liq6KKr5riF6Zmk57yT5a2Y55qE6KeS6Imy5aS05YOP5pWw5o2uLi4uYCk7XG5cbiAgICBjb25zdCBjb250YWN0TWFuYWdlciA9IHRoaXMuY2hhdExpc3RNYW5hZ2VyLmdldENvbnRhY3RNYW5hZ2VyKCk7XG4gICAgbGV0IGlzQ3VycmVudENoYXRBZmZlY3RlZCA9IGZhbHNlO1xuXG4gICAgLy8gMS4g5pu05pawIHRoaXMuY2hhdERhdGEg5Lit5omA5pyJ55u45YWz6IGK5aSp55qE5aS05YOP5pWw5o2uXG4gICAgdGhpcy5jaGF0RGF0YS5mb3JFYWNoKChjaGF0LCBjaGF0SWQpID0+IHtcbiAgICAgIGxldCBjaGF0VXBkYXRlZCA9IGZhbHNlO1xuICAgICAgaWYgKGNoYXQudHlwZSA9PT0gJ2dyb3VwJykge1xuICAgICAgICAvLyAtLS0g576k6IGK5aSE55CG6YC76L6RIC0tLVxuICAgICAgICBjaGF0Lm1lc3NhZ2VzLmZvckVhY2gobXNnID0+IHtcbiAgICAgICAgICBpZiAoY2xlYXJlZENvbnRhY3ROYW1lcy5pbmNsdWRlcyhtc2cuc2VuZGVyKSkge1xuICAgICAgICAgICAgY29uc3QgbmV3QXZhdGFyID0gY29udGFjdE1hbmFnZXIuZ2V0Q29udGFjdEF2YXRhcihtc2cuc2VuZGVyKTtcbiAgICAgICAgICAgIGlmIChtc2cuYXZhdGFyICE9PSBuZXdBdmF0YXIpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYCAgLSDmm7TmlrDnvqTogYpbJHtjaGF0LmNoYXROYW1lfV3lhoXmtojmga/lj5HpgIHogIVbJHttc2cuc2VuZGVyfV3nmoTlpLTlg49gKTtcbiAgICAgICAgICAgICAgbXNnLmF2YXRhciA9IG5ld0F2YXRhcjtcbiAgICAgICAgICAgICAgY2hhdFVwZGF0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyAtLS0g5Y2V6IGK5aSE55CG6YC76L6RICjkv53mjIHkuI3lj5gpIC0tLVxuICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IHRoaXMuZXh0cmFjdERpc3BsYXlOYW1lKGNoYXQuY2hhdE5hbWUpO1xuICAgICAgICBpZiAoY2xlYXJlZENvbnRhY3ROYW1lcy5pbmNsdWRlcyhkaXNwbGF5TmFtZSkpIHtcbiAgICAgICAgICBjb25zdCBuZXdBdmF0YXIgPSBjb250YWN0TWFuYWdlci5nZXRDb250YWN0QXZhdGFyKGRpc3BsYXlOYW1lKTtcbiAgICAgICAgICBpZiAoY2hhdC5hdmF0YXIgIT09IG5ld0F2YXRhcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYCAgLSDmm7TmlrDljZXogYo6IFwiJHtjaGF0LmNoYXROYW1lfVwiLCDml6flpLTlg486ICR7Y2hhdC5hdmF0YXJ9LCDmlrDlpLTlg486ICR7bmV3QXZhdGFyfWApO1xuICAgICAgICAgICAgY2hhdC5hdmF0YXIgPSBuZXdBdmF0YXI7XG4gICAgICAgICAgICAvLyDljZXogYrnmoTmiYDmnInmtojmga/lj5HpgIHogIXpg73mmK/lkIzkuIDkuKrkurrvvIzmiYDku6Xlj6/ku6XkuIDmrKHmgKfmm7TmlrBcbiAgICAgICAgICAgIGNoYXQubWVzc2FnZXMuZm9yRWFjaChtc2cgPT4ge1xuICAgICAgICAgICAgICBpZiAobXNnLnNlbmRlciA9PT0gZGlzcGxheU5hbWUpIHtcbiAgICAgICAgICAgICAgICBtc2cuYXZhdGFyID0gbmV3QXZhdGFyO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNoYXRVcGRhdGVkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGNoYXRVcGRhdGVkICYmIHRoaXMuY3VycmVudENoYXQgPT09IGNoYXRJZCkge1xuICAgICAgICBpc0N1cnJlbnRDaGF0QWZmZWN0ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gMi4g5aaC5p6c5b2T5YmN5omT5byA55qE6IGK5aSp5Y+X5b2x5ZON77yM5YiZ6YeN5paw5riy5p+T5a6DXG4gICAgaWYgKGlzQ3VycmVudENoYXRBZmZlY3RlZCkge1xuICAgICAgY29uc29sZS5sb2coJ/Cfjqgg5b2T5YmN6IGK5aSp5aS05YOP5bey6L+H5pe277yM5q2j5Zyo6YeN5paw5riy5p+TLi4uJyk7XG4gICAgICB0aGlzLnJlbmRlckN1cnJlbnRDaGF0KCk7XG4gICAgfVxuXG4gICAgLy8gMy4g6YCa55+l6IGK5aSp5YiX6KGo5Yi35paw5pi+56S6XG4gICAgdGhpcy5jaGF0TGlzdE1hbmFnZXIucmVmcmVzaENoYXRMaXN0KHRoaXMuY2hhdERhdGEpO1xuXG4gICAgY29uc29sZS5sb2coJ+KchSBbQmVhckNoYXRNYW5hZ2VyXSDkuJbnlYzkuabogZTns7vkurrlpLTlg4/mlbDmja7mm7TmlrDlrozmiJDjgIInKTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIOafpeaJvuS4juaMh+WumuiBlOezu+S6uueahOW3suWtmOWcqOiBiuWkqVxuICAgKiBAcGFyYW0gY29udGFjdE5hbWUg6IGU57O75Lq65ZCN56ewXG4gICAqIEByZXR1cm5zIOaJvuWIsOeahOiBiuWkqUlE77yM5aaC5p6c5rKh5pyJ5om+5Yiw5YiZ6L+U5ZuebnVsbFxuICAgKi9cbiAgcHJpdmF0ZSBmaW5kRXhpc3RpbmdDaGF0V2l0aENvbnRhY3QoY29udGFjdE5hbWU6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgIGZvciAoY29uc3QgW2NoYXRJZCwgY2hhdERhdGFdIG9mIHRoaXMuY2hhdERhdGEpIHtcbiAgICAgIC8vIOajgOafpeiBiuWkqeWQjeensOaYr+WQpuWMuemFjeWNleiBiuagvOW8j1xuICAgICAgaWYgKGNoYXREYXRhLmNoYXROYW1lID09PSBg5ZKMJHtjb250YWN0TmFtZX3nmoTogYrlpKlgKSB7XG4gICAgICAgIHJldHVybiBjaGF0SWQ7XG4gICAgICB9XG5cbiAgICAgIC8vIOajgOafpeiBiuWkqeS4reaYr+WQpuacieivpeiBlOezu+S6uueahOa2iOaBr1xuICAgICAgY29uc3QgaGFzQ29udGFjdE1lc3NhZ2VzID0gY2hhdERhdGEubWVzc2FnZXMuc29tZShcbiAgICAgICAgbWVzc2FnZSA9PiBtZXNzYWdlLnNlbmRlciA9PT0gY29udGFjdE5hbWUgJiYgbWVzc2FnZS5zZW5kZXIgIT09ICd7e3VzZXJ9fScsXG4gICAgICApO1xuXG4gICAgICBpZiAoaGFzQ29udGFjdE1lc3NhZ2VzKSB7XG4gICAgICAgIC8vIOi/m+S4gOatpeajgOafpeaYr+WQpuS4uuWNleiBiu+8iOS4jeaYr+e+pOiBiu+8iVxuICAgICAgICBjb25zdCB1bmlxdWVTZW5kZXJzID0gbmV3IFNldChcbiAgICAgICAgICBjaGF0RGF0YS5tZXNzYWdlcy5maWx0ZXIobXNnID0+IG1zZy5zZW5kZXIgIT09ICd7e3VzZXJ9fScpLm1hcChtc2cgPT4gbXNnLnNlbmRlciksXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8g5aaC5p6c5Y+q5pyJ5LiA5Liq6Z2e55So5oi35Y+R6YCB6ICF77yM5LiU5bCx5piv55uu5qCH6IGU57O75Lq677yM5YiZ6K6k5Li65piv5Y2V6IGKXG4gICAgICAgIGlmICh1bmlxdWVTZW5kZXJzLnNpemUgPT09IDEgJiYgdW5pcXVlU2VuZGVycy5oYXMoY29udGFjdE5hbWUpKSB7XG4gICAgICAgICAgcmV0dXJuIGNoYXRJZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIOaYvuekuuaPkOekuuS/oeaBr1xuICAgKi9cbiAgcHJpdmF0ZSBzaG93VG9hc3QobWVzc2FnZTogc3RyaW5nLCB0eXBlOiAnaW5mbycgfCAnd2FybmluZycgfCAnZXJyb3InIHwgJ3N1Y2Nlc3MnID0gJ2luZm8nKTogdm9pZCB7XG4gICAgLy8g5L2/55SodG9hc3Ry5pi+56S65o+Q56S65L+h5oGvXG4gICAgaWYgKHR5cGVvZiB0b2FzdHIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAodHlwZSA9PT0gJ3N1Y2Nlc3MnKSB7XG4gICAgICAgIHRvYXN0ci5zdWNjZXNzKG1lc3NhZ2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG9hc3RyW3R5cGVdKG1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhgWyR7dHlwZS50b1VwcGVyQ2FzZSgpfV0gJHttZXNzYWdlfWApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2hvd0RpYXJ5SW50ZXJmYWNlKCk6IHZvaWQge1xuICAgIC8vIFRPRE86IOWunueOsOaYvuekuuaXpeiusOeVjOmdolxuICB9XG5cbiAgcHJpdmF0ZSBzaG93Q2FsbEludGVyZmFjZSgpOiB2b2lkIHtcbiAgICAvLyBUT0RPOiDlrp7njrDmmL7npLror63pn7PpgJror53nlYzpnaJcbiAgfVxuXG4gIC8qKlxuICAgKiDlpITnkIblpLTlg4/ngrnlh7vkuovku7ZcbiAgICog5Y2V6IGK77ya5pi+56S65Liq5Lq66LWE5paZ5oiW6IGU57O75Lq65L+h5oGvXG4gICAqIOe+pOiBiu+8muaYvuekuue+pOiBiueuoeeQhuaooeaAgeahhlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBoYW5kbGVBdmF0YXJDbGljaygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBjdXJyZW50Q2hhdCA9IHRoaXMuY2hhdERhdGEuZ2V0KHRoaXMuY3VycmVudENoYXQpO1xuICAgIGlmICghY3VycmVudENoYXQpIHtcbiAgICAgIGNvbnNvbGUud2Fybign5b2T5YmN6IGK5aSp5pWw5o2u5LiN5a2Y5ZyoJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8g5qOA5p+l5piv5ZCm5Li6576k6IGKXG4gICAgaWYgKChjdXJyZW50Q2hhdCBhcyBhbnkpLnR5cGUgPT09ICdncm91cCcpIHtcbiAgICAgIC8vIOaYvuekuue+pOiBiueuoeeQhuaooeaAgeahhlxuICAgICAgYXdhaXQgdGhpcy5zaG93R3JvdXBDaGF0TW9kYWwoY3VycmVudENoYXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyDmmL7npLrljZXogYrnmoTkuKrkurrotYTmlpnmiJbogZTns7vkurrkv6Hmga9cbiAgICAgIHRoaXMuc2hvd1NpbmdsZUNoYXRQcm9maWxlKGN1cnJlbnRDaGF0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5pi+56S6576k6IGK566h55CG5qih5oCB5qGGXG4gICAqIEBwYXJhbSBncm91cERhdGEg576k6IGK5pWw5o2uXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHNob3dHcm91cENoYXRNb2RhbChncm91cERhdGE6IENoYXREYXRhKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8g5Yib5bu6576k6IGK566h55CG5qih5oCB5qGGXG4gICAgY29uc3QgbW9kYWwgPSBhd2FpdCB0aGlzLmNyZWF0ZUdyb3VwTWFuYWdlbWVudE1vZGFsKGdyb3VwRGF0YSk7XG5cbiAgICAvLyDlsIbmqKHmgIHmoYbmt7vliqDliLDnlYzpnaLlrrnlmahcbiAgICBjb25zdCBpbnRlcmZhY2VDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW50ZXJmYWNlLWNvbnRhaW5lcicpO1xuICAgIGlmIChpbnRlcmZhY2VDb250YWluZXIpIHtcbiAgICAgIGludGVyZmFjZUNvbnRhaW5lci5hcHBlbmRDaGlsZChtb2RhbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobW9kYWwpO1xuICAgIH1cblxuICAgIC8vIOaYvuekuuaooeaAgeahhlxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgbW9kYWwuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuICAgIH0sIDEwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmmL7npLrljZXogYrnmoTkuKrkurrotYTmlplcbiAgICogQHBhcmFtIGNoYXREYXRhIOWNleiBiuaVsOaNrlxuICAgKi9cbiAgcHJpdmF0ZSBzaG93U2luZ2xlQ2hhdFByb2ZpbGUoY2hhdERhdGE6IENoYXREYXRhKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ/CfkaQg5pi+56S65Liq5Lq66LWE5paZOicsIGNoYXREYXRhLmNoYXROYW1lKTtcblxuICAgIC8vIOaPkOWPluiBlOezu+S6uuWQjeensFxuICAgIC8vIGNvbnN0IGNvbnRhY3ROYW1lID0gdGhpcy5leHRyYWN0RGlzcGxheU5hbWUoY2hhdERhdGEuY2hhdE5hbWUpO1xuXG4gICAgLy8g5pi+56S65o+Q56S65L+h5oGvXG4gICAgdGhpcy5zaG93VG9hc3QoYOafpeeciyAke2NoYXREYXRhLmNoYXROYW1lfSDnmoTkuKrkurrotYTmlplgLCAnaW5mbycpO1xuXG4gICAgLy8gVE9ETzog5a6e546w5Liq5Lq66LWE5paZ5pi+56S66YC76L6RXG4gICAgLy8g5Y+v5Lul5pi+56S66IGU57O75Lq66K+m5oOF44CB6IGK5aSp6K6+572u562JXG4gIH1cblxuICAvKipcbiAgICog5Yib5bu6576k6IGK566h55CG5qih5oCB5qGGXG4gICAqIEBwYXJhbSBncm91cERhdGEg576k6IGK5pWw5o2uXG4gICAqIEByZXR1cm5zIOaooeaAgeahhuWFg+e0oFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBjcmVhdGVHcm91cE1hbmFnZW1lbnRNb2RhbChncm91cERhdGE6IENoYXREYXRhKTogUHJvbWlzZTxIVE1MRWxlbWVudD4ge1xuICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBvdmVybGF5LmNsYXNzTmFtZSA9ICdtb2RhbC1vdmVybGF5IGdyb3VwLW1hbmFnZW1lbnQtbW9kYWwnO1xuICAgIG92ZXJsYXkuaWQgPSAnZ3JvdXBNYW5hZ2VtZW50TW9kYWwnO1xuXG4gICAgY29uc3QgbWVtYmVycyA9IChncm91cERhdGEgYXMgYW55KS5tZW1iZXJzIHx8IFtdO1xuICAgIGNvbnN0IG1lbWJlckNvdW50ID0gbWVtYmVycy5sZW5ndGg7XG5cbiAgICAvLyDmnoTlu7rmiJDlkZjliJfooahIVE1MIC0g5L2/55So5byC5q2l5pa55byP6I635Y+W55So5oi35L+h5oGvXG5cbiAgICBjb25zdCBtZW1iZXJIdG1sUHJvbWlzZXMgPSBtZW1iZXJzLm1hcChhc3luYyAobWVtYmVyOiBhbnksIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgIC8vIOWkhOeQhueUqOaIt+WktOWDj+WSjOWQjeWtl++8jOS9v+eUqOe7n+S4gOeahOeUqOaIt+S/oeaBr+iOt+WPluaWueazlVxuICAgICAgbGV0IG1lbWJlckF2YXRhciA9IG1lbWJlci5hdmF0YXI7XG4gICAgICBsZXQgbWVtYmVyTmFtZSA9IG1lbWJlci5uYW1lO1xuXG4gICAgICAvLyDmianlsZXnlKjmiLfmo4DmtYvpgLvovpHvvJrmo4Dmn6Xlm7rlrprlrZfnrKbkuLLlkoznnJ/lrp7nlKjmiLflkI1cbiAgICAgIGxldCBpc1VzZXIgPSBtZW1iZXIubmFtZSA9PT0gJ3t7dXNlcn19JyB8fCBtZW1iZXIubmFtZSA9PT0gJ3VzZXInIHx8IG1lbWJlci5pZCA9PT0gJ3t7dXNlcn19JztcblxuICAgICAgLy8g5aaC5p6c5Z+656GA5qOA5rWL5aSx6LSl77yM5bCd6K+V5qOA5p+l5piv5ZCm5piv55So5oi355qE55yf5a6e5aeT5ZCNXG4gICAgICBpZiAoIWlzVXNlcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHsgZ2V0VXNlck5hbWVBc3luYyB9ID0gYXdhaXQgaW1wb3J0KCcuL21vZHVsZXMvdXRpbHMvdXNlckluZm9SZXRyaWV2YWwnKTtcbiAgICAgICAgICBjb25zdCByZWFsVXNlck5hbWUgPSBhd2FpdCBnZXRVc2VyTmFtZUFzeW5jKCk7XG4gICAgICAgICAgaXNVc2VyID0gbWVtYmVyLm5hbWUgPT09IHJlYWxVc2VyTmFtZSB8fCBtZW1iZXIuaWQgPT09IHJlYWxVc2VyTmFtZTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAvLyDpnZnpu5jlpITnkIbplJnor6/vvIzkuI3lvbHlk43mraPluLjmtYHnqItcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoaXNVc2VyKSB7XG4gICAgICAgIC8vIOS9v+eUqOS4juWIm+W7uue+pOiBiuS4gOiHtOeahOWktOWDj+iOt+WPluaWueazlVxuICAgICAgICBjb25zdCB7IGdldFVzZXJBdmF0YXIsIGdldFVzZXJOYW1lQXN5bmMgfSA9IGF3YWl0IGltcG9ydCgnLi9tb2R1bGVzL3V0aWxzL3VzZXJJbmZvUmV0cmlldmFsJyk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBtZW1iZXJBdmF0YXIgPSBnZXRVc2VyQXZhdGFyKCk7XG4gICAgICAgICAgbWVtYmVyTmFtZSA9IGF3YWl0IGdldFVzZXJOYW1lQXN5bmMoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAvLyDlpoLmnpzojrflj5blpLHotKXvvIzkv53mjIHljp/lp4vlgLxcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gYFxuICAgICAgPGRpdiBjbGFzcz1cIm1lbWJlci1pdGVtXCIgZGF0YS1tZW1iZXItaWQ9XCIke21lbWJlci5pZH1cIj5cbiAgICAgICAgPGltZyBzcmM9XCIke21lbWJlckF2YXRhcn1cIiBjbGFzcz1cIm1lbWJlci1hdmF0YXJcIiBhbHQ9XCIke21lbWJlck5hbWV9XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtZW1iZXItaW5mb1wiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWVtYmVyLW5hbWVcIj4ke21lbWJlck5hbWV9PC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWVtYmVyLXJvbGVcIj4ke3RoaXMuZ2V0TWVtYmVyUm9sZVRleHQobWVtYmVyLnJvbGUpfTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtZW1iZXItYWN0aW9uc1wiPlxuICAgICAgICAgICR7XG4gICAgICAgICAgICBtZW1iZXIucm9sZSAhPT0gJ293bmVyJ1xuICAgICAgICAgICAgICA/IGBcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJraWNrLW1lbWJlci1idG5cIiBkYXRhLW1lbWJlci1pZD1cIiR7bWVtYmVyLmlkfVwiIHRpdGxlPVwi56e76Zmk5oiQ5ZGYXCI+XG4gICAgICAgICAgICAgIDxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiIHdpZHRoPVwiMTZcIiBoZWlnaHQ9XCIxNlwiPlxuICAgICAgICAgICAgICAgIDxwYXRoIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBkPVwiTTE5LDRIMTUuNUwxNC41LDNIOS41TDguNSw0SDVWNkgxOU02LDE5QTIsMiAwIDAsMCA4LDIxSDE2QTIsMiAwIDAsMCAxOCwxOVY3SDZWMTlaXCIgLz5cbiAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICBgXG4gICAgICAgICAgICAgIDogJydcbiAgICAgICAgICB9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgICB9KTtcblxuICAgIC8vIOetieW+heaJgOacieaIkOWRmEhUTUznlJ/miJDlrozmiJBcbiAgICBjb25zdCBtZW1iZXJIdG1sQXJyYXkgPSBhd2FpdCBQcm9taXNlLmFsbChtZW1iZXJIdG1sUHJvbWlzZXMpO1xuICAgIGNvbnN0IG1lbWJlcnNIdG1sID0gbWVtYmVySHRtbEFycmF5LmpvaW4oJycpO1xuXG4gICAgb3ZlcmxheS5pbm5lckhUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtY29udGFpbmVyXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj5cbiAgICAgICAgICA8aDM+576k6IGK6K6+572uPC9oMz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIFxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPlxuICAgICAgICAgIDwhLS0g576k5Z+65pys5L+h5oGvIC0tPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJncm91cC1pbmZvLXNlY3Rpb25cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJncm91cC1hdmF0YXItc2VjdGlvblwiPlxuICAgICAgICAgICAgICA8aW1nIGNsYXNzPVwiZ3JvdXAtYXZhdGFyLXByZXZpZXdcIiBzcmM9XCIke2dyb3VwRGF0YS5hdmF0YXJ9XCIgYWx0PVwi576k5aS05YOPXCI+XG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJjaGFuZ2UtYXZhdGFyLWJ0blwiIGRhdGEtYWN0aW9uPVwiY2hhbmdlLWF2YXRhclwiPuabtOaNouWktOWDjzwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZ3JvdXAtbmFtZS1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgIDxsYWJlbD7nvqTlkI3np7A8L2xhYmVsPlxuICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImdyb3VwLW5hbWUtaW5wdXRcIiB2YWx1ZT1cIiR7Z3JvdXBEYXRhLmNoYXROYW1lfVwiIG1heGxlbmd0aD1cIjIwXCI+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICA8IS0tIOe+pOaIkOWRmOeuoeeQhiAtLT5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZ3JvdXAtbWVtYmVycy1zZWN0aW9uXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2VjdGlvbi1oZWFkZXJcIj5cbiAgICAgICAgICAgICAgPGg0Pue+pOaIkOWRmCAoPHNwYW4gY2xhc3M9XCJtZW1iZXItY291bnRcIj4ke21lbWJlckNvdW50fTwvc3Bhbj4pPC9oND5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImludml0ZS1tZW1iZXItYnRuXCIgZGF0YS1hY3Rpb249XCJpbnZpdGUtbWVtYmVyXCI+6YKA6K+35oiQ5ZGYPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZW1iZXJzLWxpc3RcIj5cbiAgICAgICAgICAgICAgJHttZW1iZXJzSHRtbH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICAgIDwhLS0g5Y2x6Zmp5pON5L2c5Yy65Z+fIC0tPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYW5nZXItc2VjdGlvblwiPlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImRpc2JhbmQtYnRuXCIgZGF0YS1hY3Rpb249XCJkaXNiYW5kXCI+6Kej5pWj576k6IGKPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICBcbiAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPlxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJjYW5jZWwtYnRuXCIgZGF0YS1hY3Rpb249XCJjYW5jZWxcIj7lj5bmtog8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwic2F2ZS1idG5cIiBkYXRhLWFjdGlvbj1cInNhdmVcIj7kv53lrZg8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuXG4gICAgLy8g57uR5a6a5LqL5Lu2XG4gICAgdGhpcy5iaW5kR3JvdXBNYW5hZ2VtZW50TW9kYWxFdmVudHMob3ZlcmxheSwgZ3JvdXBEYXRhKTtcblxuICAgIC8vIOazqOWGjOeUqOaIt+WktOWDj+WIsOWktOWDj+WQjOatpeezu+e7n1xuICAgIHRoaXMucmVnaXN0ZXJHcm91cE1lbWJlckF2YXRhcnMob3ZlcmxheSk7XG5cbiAgICByZXR1cm4gb3ZlcmxheTtcbiAgfVxuXG4gIC8qKlxuICAgKiDms6jlhoznvqTmiJDlkZjlpLTlg4/liLDlpLTlg4/lkIzmraXns7vnu59cbiAgICogQHBhcmFtIG1vZGFsIOaooeaAgeahhuWFg+e0oFxuICAgKi9cbiAgcHJpdmF0ZSByZWdpc3Rlckdyb3VwTWVtYmVyQXZhdGFycyhtb2RhbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgLy8g5p+l5om+5omA5pyJ55So5oi35oiQ5ZGY55qE5aS05YOP5YWD57SgXG4gICAgICBjb25zdCBtZW1iZXJBdmF0YXJzID0gbW9kYWwucXVlcnlTZWxlY3RvckFsbCgnLm1lbWJlci1hdmF0YXInKTtcblxuICAgICAgbWVtYmVyQXZhdGFycy5mb3JFYWNoKGF2YXRhckVsZW1lbnQgPT4ge1xuICAgICAgICBjb25zdCBtZW1iZXJJdGVtID0gYXZhdGFyRWxlbWVudC5jbG9zZXN0KCcubWVtYmVyLWl0ZW0nKTtcbiAgICAgICAgaWYgKG1lbWJlckl0ZW0pIHtcbiAgICAgICAgICBjb25zdCBtZW1iZXJJZCA9IG1lbWJlckl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLW1lbWJlci1pZCcpO1xuXG4gICAgICAgICAgLy8g5Y+q5rOo5YaM55So5oi36Ieq5bex55qE5aS05YOP77yIdXNlcuaIlnt7dXNlcn1977yJXG4gICAgICAgICAgaWYgKG1lbWJlcklkID09PSAndXNlcicgfHwgbWVtYmVySWQgPT09ICd7e3VzZXJ9fScpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SXIOazqOWGjOe+pOaIkOWRmOS4reeahOeUqOaIt+WktOWDj+WIsOWQjOatpeezu+e7nycpO1xuXG4gICAgICAgICAgICAvLyDms6jlhozliLDlpLTlg4/lkIzmraXns7vnu5/vvIzkvb/nlKhtZW1iZXItYXZhdGFy57G75Z6LXG4gICAgICAgICAgICB0aGlzLmF2YXRhck1peGluLnJlZ2lzdGVyKGF2YXRhckVsZW1lbnQgYXMgSFRNTEVsZW1lbnQsICdpbWcnKTtcblxuICAgICAgICAgICAgLy8g56uL5Y2z5pu05paw5aS05YOPXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50QXZhdGFyID0gZ2V0VW5pZmllZFVzZXJBdmF0YXJTeW5jKCk7XG4gICAgICAgICAgICAoYXZhdGFyRWxlbWVudCBhcyBIVE1MSW1hZ2VFbGVtZW50KS5zcmMgPSBjdXJyZW50QXZhdGFyO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2Fybign5rOo5YaM576k5oiQ5ZGY5aS05YOP5aSx6LSlOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog57uR5a6a576k6IGK566h55CG5qih5oCB5qGG5LqL5Lu2XG4gICAqIEBwYXJhbSBtb2RhbCDmqKHmgIHmoYblhYPntKBcbiAgICogQHBhcmFtIGdyb3VwRGF0YSDnvqTogYrmlbDmja5cbiAgICovXG4gIHByaXZhdGUgYmluZEdyb3VwTWFuYWdlbWVudE1vZGFsRXZlbnRzKG1vZGFsOiBIVE1MRWxlbWVudCwgZ3JvdXBEYXRhOiBDaGF0RGF0YSk6IHZvaWQge1xuICAgIC8vIOWFs+mXreaMiemSrlxuICAgIGNvbnN0IGNsb3NlQnRuID0gbW9kYWwucXVlcnlTZWxlY3RvcignW2RhdGEtYWN0aW9uPVwiY2xvc2VcIl0nKTtcbiAgICBjb25zdCBjYW5jZWxCdG4gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hY3Rpb249XCJjYW5jZWxcIl0nKTtcblxuICAgIFtjbG9zZUJ0biwgY2FuY2VsQnRuXS5mb3JFYWNoKGJ0biA9PiB7XG4gICAgICBpZiAoYnRuKSB7XG4gICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICB0aGlzLmhpZGVHcm91cE1hbmFnZW1lbnRNb2RhbCgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIOS/neWtmOaMiemSrlxuICAgIGNvbnN0IHNhdmVCdG4gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hY3Rpb249XCJzYXZlXCJdJyk7XG4gICAgaWYgKHNhdmVCdG4pIHtcbiAgICAgIHNhdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuaGFuZGxlR3JvdXBTZXR0aW5nc1NhdmUobW9kYWwsIGdyb3VwRGF0YSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyDmm7TmjaLlpLTlg4/mjInpkq5cbiAgICBjb25zdCBjaGFuZ2VBdmF0YXJCdG4gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hY3Rpb249XCJjaGFuZ2UtYXZhdGFyXCJdJyk7XG4gICAgaWYgKGNoYW5nZUF2YXRhckJ0bikge1xuICAgICAgY2hhbmdlQXZhdGFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB0aGlzLmhhbmRsZUdyb3VwQXZhdGFyQ2hhbmdlKGdyb3VwRGF0YSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyDpgoDor7fmiJDlkZjmjInpkq5cbiAgICBjb25zdCBpbnZpdGVCdG4gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hY3Rpb249XCJpbnZpdGUtbWVtYmVyXCJdJyk7XG4gICAgaWYgKGludml0ZUJ0bikge1xuICAgICAgaW52aXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB0aGlzLmhhbmRsZUdyb3VwTWVtYmVySW52aXRlKGdyb3VwRGF0YSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyDop6PmlaPnvqTogYrmjInpkq5cbiAgICBjb25zdCBkaXNiYW5kQnRuID0gbW9kYWwucXVlcnlTZWxlY3RvcignW2RhdGEtYWN0aW9uPVwiZGlzYmFuZFwiXScpO1xuICAgIGlmIChkaXNiYW5kQnRuKSB7XG4gICAgICBkaXNiYW5kQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB0aGlzLmhhbmRsZUdyb3VwRGlzYmFuZChncm91cERhdGEpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8g56e76Zmk5oiQ5ZGY5oyJ6ZKuXG4gICAgY29uc3Qga2lja0J0bnMgPSBtb2RhbC5xdWVyeVNlbGVjdG9yQWxsKCcua2ljay1tZW1iZXItYnRuJyk7XG4gICAga2lja0J0bnMuZm9yRWFjaChidG4gPT4ge1xuICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgZSA9PiB7XG4gICAgICAgIGNvbnN0IG1lbWJlcklkID0gKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCdbZGF0YS1tZW1iZXItaWRdJyk/LmdldEF0dHJpYnV0ZSgnZGF0YS1tZW1iZXItaWQnKTtcbiAgICAgICAgaWYgKG1lbWJlcklkKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVHcm91cE1lbWJlcktpY2soZ3JvdXBEYXRhLCBtZW1iZXJJZCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8g54K55Ye76YGu572p5YWz6ZetXG4gICAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgIGlmIChlLnRhcmdldCA9PT0gbW9kYWwpIHtcbiAgICAgICAgdGhpcy5oaWRlR3JvdXBNYW5hZ2VtZW50TW9kYWwoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDpmpDol4/nvqTogYrnrqHnkIbmqKHmgIHmoYZcbiAgICovXG4gIHByaXZhdGUgaGlkZUdyb3VwTWFuYWdlbWVudE1vZGFsKCk6IHZvaWQge1xuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyb3VwTWFuYWdlbWVudE1vZGFsJyk7XG4gICAgaWYgKG1vZGFsKSB7XG4gICAgICAvLyDmuIXnkIbms6jlhoznmoTlpLTlg4/lhYPntKBcbiAgICAgIHRoaXMudW5yZWdpc3Rlckdyb3VwTWVtYmVyQXZhdGFycyhtb2RhbCk7XG5cbiAgICAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBtb2RhbC5yZW1vdmUoKTtcbiAgICAgIH0sIDMwMCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOWIt+aWsOe+pOiBiueuoeeQhuaooeaAgeahhueahOaIkOWRmOWIl+ihqO+8iOi9u+mHj+e6p+abtOaWsO+8jOS4jeWFs+mXreaooeaAgeahhu+8iVxuICAgKiBAcGFyYW0gZ3JvdXBEYXRhIOe+pOiBiuaVsOaNrlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyByZWZyZXNoR3JvdXBNYW5hZ2VtZW50TW9kYWwoZ3JvdXBEYXRhOiBDaGF0RGF0YSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBleGlzdGluZ01vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyb3VwTWFuYWdlbWVudE1vZGFsJyk7XG4gICAgICBpZiAoIWV4aXN0aW5nTW9kYWwpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8g5pyq5om+5Yiw546w5pyJ55qE576k6IGK566h55CG5qih5oCB5qGGJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8g5Y+q5pu05paw5oiQ5ZGY5YiX6KGo6YOo5YiG77yM5LiN6YeN5paw5Yib5bu65pW05Liq5qih5oCB5qGGXG4gICAgICBjb25zdCBtZW1iZXJzTGlzdCA9IGV4aXN0aW5nTW9kYWwucXVlcnlTZWxlY3RvcignLm1lbWJlcnMtbGlzdCcpO1xuICAgICAgY29uc3QgbWVtYmVyQ291bnRTcGFuID0gZXhpc3RpbmdNb2RhbC5xdWVyeVNlbGVjdG9yKCcubWVtYmVyLWNvdW50Jyk7XG5cbiAgICAgIGlmICghbWVtYmVyc0xpc3QpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8g5pyq5om+5Yiw5oiQ5ZGY5YiX6KGo5a655ZmoJyk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcign5oiQ5ZGY5YiX6KGo5a655Zmo5LiN5a2Y5ZyoJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIOmHjeeUqOeOsOacieeahOaIkOWRmOWIl+ihqOeUn+aIkOmAu+i+kVxuICAgICAgY29uc3QgbWVtYmVycyA9IChncm91cERhdGEubWVtYmVycyB8fCBbXSkgYXMgYW55W107XG4gICAgICBjb25zdCBtZW1iZXJIdG1sUHJvbWlzZXMgPSBtZW1iZXJzLm1hcChhc3luYyAobWVtYmVyOiBhbnkpID0+IHtcbiAgICAgICAgLy8g5aSE55CG55So5oi35aS05YOP5ZKM5ZCN5a2X77yM5L2/55So57uf5LiA55qE55So5oi35L+h5oGv6I635Y+W5pa55rOVXG4gICAgICAgIGxldCBtZW1iZXJBdmF0YXIgPSBtZW1iZXIuYXZhdGFyO1xuICAgICAgICBsZXQgbWVtYmVyTmFtZSA9IG1lbWJlci5uYW1lO1xuXG4gICAgICAgIC8vIOWmguaenOaYr+eUqOaIt++8jOiOt+WPluecn+WunueahOeUqOaIt+WktOWDj+WSjOWQjeWtl1xuICAgICAgICBpZiAobWVtYmVyLmlkID09PSAne3t1c2VyfX0nIHx8IG1lbWJlci5pZCA9PT0gJ3VzZXInKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgZ2V0VXNlckF2YXRhciwgZ2V0VXNlck5hbWVBc3luYyB9ID0gYXdhaXQgaW1wb3J0KCcuL21vZHVsZXMvdXRpbHMvdXNlckluZm9SZXRyaWV2YWwnKTtcbiAgICAgICAgICAgIG1lbWJlckF2YXRhciA9IGdldFVzZXJBdmF0YXIoKTtcbiAgICAgICAgICAgIG1lbWJlck5hbWUgPSBhd2FpdCBnZXRVc2VyTmFtZUFzeW5jKCk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIOWmguaenOiOt+WPluWksei0pe+8jOS/neaMgeWOn+Wni+WAvFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJtZW1iZXItaXRlbVwiIGRhdGEtbWVtYmVyLWlkPVwiJHttZW1iZXIuaWR9XCI+XG4gICAgICAgICAgPGltZyBzcmM9XCIke21lbWJlckF2YXRhcn1cIiBjbGFzcz1cIm1lbWJlci1hdmF0YXJcIiBhbHQ9XCIke21lbWJlck5hbWV9XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cIm1lbWJlci1pbmZvXCI+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1lbWJlci1uYW1lXCI+JHttZW1iZXJOYW1lfTwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWVtYmVyLXJvbGVcIj4ke3RoaXMuZ2V0TWVtYmVyUm9sZVRleHQobWVtYmVyLnJvbGUpfTwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwibWVtYmVyLWFjdGlvbnNcIj5cbiAgICAgICAgICAgICR7XG4gICAgICAgICAgICAgIG1lbWJlci5yb2xlICE9PSAnb3duZXInXG4gICAgICAgICAgICAgICAgPyBgXG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJraWNrLW1lbWJlci1idG5cIiBkYXRhLW1lbWJlci1pZD1cIiR7bWVtYmVyLmlkfVwiIHRpdGxlPVwi56e76Zmk5oiQ5ZGYXCI+XG4gICAgICAgICAgICAgICAgPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgd2lkdGg9XCIxNlwiIGhlaWdodD1cIjE2XCI+XG4gICAgICAgICAgICAgICAgICA8cGF0aCBmaWxsPVwiY3VycmVudENvbG9yXCIgZD1cIk0xOSw0SDE1LjVMMTQuNSwzSDkuNUw4LjUsNEg1VjZIMTlNNiwxOUEyLDIgMCAwLDAgOCwyMUgxNkEyLDIgMCAwLDAgMTgsMTlWN0g2VjE5WlwiIC8+XG4gICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgIDogJydcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICBgO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIOetieW+heaJgOacieaIkOWRmEhUTUznlJ/miJDlrozmiJBcbiAgICAgIGNvbnN0IG1lbWJlckh0bWxBcnJheSA9IGF3YWl0IFByb21pc2UuYWxsKG1lbWJlckh0bWxQcm9taXNlcyk7XG4gICAgICBjb25zdCBtZW1iZXJzSHRtbCA9IG1lbWJlckh0bWxBcnJheS5qb2luKCcnKTtcbiAgICAgIGNvbnN0IG1lbWJlckNvdW50ID0gbWVtYmVycy5sZW5ndGg7XG5cbiAgICAgIC8vIOabtOaWsOaIkOWRmOWIl+ihqOWGheWuuVxuICAgICAgbWVtYmVyc0xpc3QuaW5uZXJIVE1MID0gbWVtYmVyc0h0bWw7XG5cbiAgICAgIC8vIOabtOaWsOaIkOWRmOaVsOmHj+aYvuekulxuICAgICAgaWYgKG1lbWJlckNvdW50U3Bhbikge1xuICAgICAgICBtZW1iZXJDb3VudFNwYW4udGV4dENvbnRlbnQgPSBtZW1iZXJDb3VudC50b1N0cmluZygpO1xuICAgICAgfVxuXG4gICAgICAvLyDph43mlrDnu5HlrprmiJDlkZjnm7jlhbPnmoTkuovku7bvvIjlj6rnu5HlrprmiJDlkZjliJfooajnmoTkuovku7bvvIlcbiAgICAgIHRoaXMuYmluZE1lbWJlckxpc3RFdmVudHMobWVtYmVyc0xpc3QsIGdyb3VwRGF0YSk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCfinIUg576k6IGK5oiQ5ZGY5YiX6KGo5Yi35paw5a6M5oiQJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCDliLfmlrDmiJDlkZjliJfooajlpLHotKU6JywgZXJyb3IpO1xuICAgICAgLy8g566A5Y2V55qE6ZSZ6K+v5aSE55CG77yM5LiN5YWz6Zet5qih5oCB5qGGXG4gICAgICB0aGlzLnNob3dUb2FzdCgn5Yi35paw5oiQ5ZGY5YiX6KGo5aSx6LSlJywgJ2Vycm9yJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOe7keWumuaIkOWRmOWIl+ihqOebuOWFs+S6i+S7tlxuICAgKiBAcGFyYW0gbWVtYmVyc0xpc3Qg5oiQ5ZGY5YiX6KGo5a655ZmoXG4gICAqIEBwYXJhbSBncm91cERhdGEg576k6IGK5pWw5o2uXG4gICAqL1xuICBwcml2YXRlIGJpbmRNZW1iZXJMaXN0RXZlbnRzKG1lbWJlcnNMaXN0OiBFbGVtZW50LCBncm91cERhdGE6IENoYXREYXRhKTogdm9pZCB7XG4gICAgLy8g57uR5a6a6Lii5Ye65oiQ5ZGY5oyJ6ZKu5LqL5Lu2XG4gICAgY29uc3Qga2lja0J0bnMgPSBtZW1iZXJzTGlzdC5xdWVyeVNlbGVjdG9yQWxsKCcua2ljay1tZW1iZXItYnRuJyk7XG4gICAga2lja0J0bnMuZm9yRWFjaChidG4gPT4ge1xuICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgZSA9PiB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGNvbnN0IG1lbWJlcklkID0gKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCdbZGF0YS1tZW1iZXItaWRdJyk/LmdldEF0dHJpYnV0ZSgnZGF0YS1tZW1iZXItaWQnKTtcbiAgICAgICAgaWYgKG1lbWJlcklkKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVHcm91cE1lbWJlcktpY2soZ3JvdXBEYXRhLCBtZW1iZXJJZCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOWPlua2iOazqOWGjOe+pOaIkOWRmOWktOWDj1xuICAgKiBAcGFyYW0gbW9kYWwg5qih5oCB5qGG5YWD57SgXG4gICAqL1xuICBwcml2YXRlIHVucmVnaXN0ZXJHcm91cE1lbWJlckF2YXRhcnMobW9kYWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIOafpeaJvuaJgOacieeUqOaIt+aIkOWRmOeahOWktOWDj+WFg+e0oOW5tuWPlua2iOazqOWGjFxuICAgICAgY29uc3QgbWVtYmVyQXZhdGFycyA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZW1iZXItYXZhdGFyJyk7XG5cbiAgICAgIG1lbWJlckF2YXRhcnMuZm9yRWFjaChhdmF0YXJFbGVtZW50ID0+IHtcbiAgICAgICAgY29uc3QgbWVtYmVySXRlbSA9IGF2YXRhckVsZW1lbnQuY2xvc2VzdCgnLm1lbWJlci1pdGVtJyk7XG4gICAgICAgIGlmIChtZW1iZXJJdGVtKSB7XG4gICAgICAgICAgY29uc3QgbWVtYmVySWQgPSBtZW1iZXJJdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1tZW1iZXItaWQnKTtcblxuICAgICAgICAgIC8vIOWPquWkhOeQhueUqOaIt+iHquW3seeahOWktOWDj1xuICAgICAgICAgIGlmIChtZW1iZXJJZCA9PT0gJ3VzZXInIHx8IG1lbWJlcklkID09PSAne3t1c2VyfX0nKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn8J+UlyDlj5bmtojms6jlhoznvqTmiJDlkZjkuK3nmoTnlKjmiLflpLTlg48nKTtcbiAgICAgICAgICAgIHRoaXMuYXZhdGFyTWl4aW4udW5yZWdpc3RlcihhdmF0YXJFbGVtZW50IGFzIEhUTUxFbGVtZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ+WPlua2iOazqOWGjOe+pOaIkOWRmOWktOWDj+Wksei0pTonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOWkhOeQhue+pOS/oeaBr+S/neWtmFxuICAgKiBAcGFyYW0gbW9kYWwg5qih5oCB5qGG5YWD57SgXG4gICAqIEBwYXJhbSBncm91cERhdGEg576k6IGK5pWw5o2uXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGhhbmRsZUdyb3VwU2V0dGluZ3NTYXZlKG1vZGFsOiBIVE1MRWxlbWVudCwgZ3JvdXBEYXRhOiBDaGF0RGF0YSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IG5hbWVJbnB1dCA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5ncm91cC1uYW1lLWlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBuZXdHcm91cE5hbWUgPSBuYW1lSW5wdXQ/LnZhbHVlLnRyaW0oKTtcblxuICAgIGlmICghbmV3R3JvdXBOYW1lKSB7XG4gICAgICB0aGlzLnNob3dUb2FzdCgn576k5ZCN56ew5LiN6IO95Li656m6JywgJ2Vycm9yJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8g5pu05paw576k5ZCN56ewXG4gICAgaWYgKG5ld0dyb3VwTmFtZSAhPT0gZ3JvdXBEYXRhLmNoYXROYW1lKSB7XG4gICAgICBjb25zdCBvbGRDaGF0TmFtZSA9IGdyb3VwRGF0YS5jaGF0TmFtZTtcblxuICAgICAgLy8gMS4g5L+d5a2Y5YiwIGxvY2FsU3RvcmFnZSDopobnm5YgKOaWsOWinuWKn+iDvSlcbiAgICAgIEdyb3VwTmFtZU92ZXJyaWRlTWFuYWdlci5zYXZlR3JvdXBOYW1lT3ZlcnJpZGUoZ3JvdXBEYXRhLmNoYXRJZCwgbmV3R3JvdXBOYW1lKTtcblxuICAgICAgLy8gMi4g5pu05paw5YaF5a2Y5pWw5o2uXG4gICAgICBncm91cERhdGEuY2hhdE5hbWUgPSBuZXdHcm91cE5hbWU7XG5cbiAgICAgIGNvbnNvbGUubG9nKGDwn5OdIOe+pOWQjeensOW3suabtOaWsDogJHtvbGRDaGF0TmFtZX0gLT4gJHtncm91cERhdGEuY2hhdE5hbWV9YCk7XG5cbiAgICAgIC8vIDMuIOabtOaWsOeVjOmdouaYvuekulxuICAgICAgdGhpcy51cGRhdGVHcm91cENoYXREaXNwbGF5KGdyb3VwRGF0YSk7XG4gICAgfVxuXG4gICAgLy8g5rOo5oSP77ya5LiN5YaN56uL5Y2z5pu05pawQmVhcuagvOW8j++8jOS/neaMgeWOn+Wni+aVsOaNruS4jeWPmFxuICAgIC8vIHRoaXMudXBkYXRlR3JvdXBEYXRhSW5CZWFyKGdyb3VwRGF0YSk7XG5cbiAgICB0aGlzLnNob3dUb2FzdCgn576k5L+h5oGv5bey5L+d5a2YJywgJ3N1Y2Nlc3MnKTtcbiAgICB0aGlzLmhpZGVHcm91cE1hbmFnZW1lbnRNb2RhbCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOWkhOeQhue+pOWktOWDj+abtOaNolxuICAgKiBAcGFyYW0gZ3JvdXBEYXRhIOe+pOiBiuaVsOaNrlxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVHcm91cEF2YXRhckNoYW5nZShncm91cERhdGE6IENoYXREYXRhKTogdm9pZCB7XG4gICAgLy8g5Yib5bu65paH5Lu26L6T5YWl5YWD57SgXG4gICAgY29uc3QgZmlsZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICBmaWxlSW5wdXQudHlwZSA9ICdmaWxlJztcbiAgICBmaWxlSW5wdXQuYWNjZXB0ID0gJ2ltYWdlLyonO1xuICAgIGZpbGVJbnB1dC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgLy8g5re75Yqg5Yiw6aG16Z2iXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChmaWxlSW5wdXQpO1xuXG4gICAgLy8g55uR5ZCs5paH5Lu26YCJ5oupXG4gICAgZmlsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFzeW5jIGV2ZW50ID0+IHtcbiAgICAgIGNvbnN0IGZpbGUgPSAoZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmZpbGVzPy5bMF07XG4gICAgICBpZiAoIWZpbGUpIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChmaWxlSW5wdXQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIOmqjOivgeaWh+S7tuexu+Wei1xuICAgICAgICBpZiAoIWZpbGUudHlwZS5zdGFydHNXaXRoKCdpbWFnZS8nKSkge1xuICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCfor7fpgInmi6nlm77niYfmlofku7YnLCAnZXJyb3InKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyDpqozor4Hmlofku7blpKflsI/vvIjpmZDliLbkuLo1TULvvIlcbiAgICAgICAgaWYgKGZpbGUuc2l6ZSA+IDUgKiAxMDI0ICogMTAyNCkge1xuICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCflm77niYfmlofku7bkuI3og73otoXov4c1TUInLCAnZXJyb3InKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyDmmL7npLrliqDovb3mj5DnpLpcbiAgICAgICAgdGhpcy5zaG93VG9hc3QoJ+ato+WcqOS4iuS8oOWktOWDjy4uLicsICdpbmZvJyk7XG5cbiAgICAgICAgLy8g5a+85YWlR3JvdXBDaGF0U3RvcmFnZeaooeWdl1xuICAgICAgICBjb25zdCB7IEdyb3VwQ2hhdFN0b3JhZ2UgfSA9IGF3YWl0IGltcG9ydCgnLi9tb2R1bGVzL2dyb3VwQ2hhdC9zdG9yYWdlJyk7XG5cbiAgICAgICAgLy8g5bCG5paH5Lu26L2s5o2i5Li6QmFzZTY0XG4gICAgICAgIGNvbnN0IGJhc2U2NCA9IGF3YWl0IEdyb3VwQ2hhdFN0b3JhZ2UuZmlsZVRvQmFzZTY0KGZpbGUpO1xuXG4gICAgICAgIC8vIOS9v+eUqEdyb3VwQ2hhdFN0b3JhZ2Xnu5/kuIDkv53lrZjnvqTlpLTlg4/vvIjljIXlkKvnvJPlrZjlkozmlbDmja7lkIzmraXvvIlcbiAgICAgICAgYXdhaXQgR3JvdXBDaGF0U3RvcmFnZS5zYXZlR3JvdXBBdmF0YXIoZ3JvdXBEYXRhLmNoYXRJZCwgYmFzZTY0KTtcblxuICAgICAgICAvLyDmm7TmlrDlhoXlrZjkuK3nmoTnvqTogYrmlbDmja5cbiAgICAgICAgZ3JvdXBEYXRhLmF2YXRhciA9IGJhc2U2NDtcblxuICAgICAgICAvLyDmm7TmlrDnlYzpnaLkuK3nmoTlpLTlg4/pooTop4hcbiAgICAgICAgY29uc3QgYXZhdGFyUHJldmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ncm91cC1hdmF0YXItcHJldmlldycpIGFzIEhUTUxJbWFnZUVsZW1lbnQ7XG4gICAgICAgIGlmIChhdmF0YXJQcmV2aWV3KSB7XG4gICAgICAgICAgYXZhdGFyUHJldmlldy5zcmMgPSBiYXNlNjQ7XG4gICAgICAgIH1cblxuICAgICAgICAvLyDmm7TmlrDogYrlpKnliJfooajkuK3nmoTnvqTogYrlpLTlg49cbiAgICAgICAgdGhpcy51cGRhdGVDaGF0TGlzdEF2YXRhcihncm91cERhdGEuY2hhdElkLCBiYXNlNjQpO1xuXG4gICAgICAgIC8vIOabtOaWsOiBiuWkqeeVjOmdouWktOmDqOeahOWktOWDj1xuICAgICAgICB0aGlzLnVwZGF0ZUNoYXRIZWFkZXJBdmF0YXIoYmFzZTY0KTtcblxuICAgICAgICAvLyDms6jmhI/vvJrnvqTlpLTlg4/lt7Lkv53lrZjliLDmtY/op4jlmajnvJPlrZjvvIzml6DpnIDnq4vljbPlkIzmraXliLBTaWxseVRhdmVyblxuICAgICAgICAvLyDmlbDmja7kvJrlnKjkuIvmrKHlj5HpgIHmtojmga/ml7boh6rliqjlkIzmraVcblxuICAgICAgICB0aGlzLnNob3dUb2FzdCgn576k5aS05YOP5pu05o2i5oiQ5YqfJywgJ3N1Y2Nlc3MnKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+abtOaNoue+pOWktOWDj+Wksei0pTonLCBlcnJvcik7XG4gICAgICAgIHRoaXMuc2hvd1RvYXN0KCfmm7TmjaLnvqTlpLTlg4/lpLHotKUnLCAnZXJyb3InKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIC8vIOa4heeQhuaWh+S7tui+k+WFpeWFg+e0oFxuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGZpbGVJbnB1dCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyDop6blj5Hmlofku7bpgInmi6nlr7nor53moYZcbiAgICBmaWxlSW5wdXQuY2xpY2soKTtcbiAgfVxuXG4gIC8vIOe+pOWktOWDj+e8k+WtmOWKn+iDveW3sui/geenu+WIsCBHcm91cENoYXRTdG9yYWdlIOaooeWdl+S4ree7n+S4gOeuoeeQhlxuXG4gIC8qKlxuICAgKiDmm7TmlrDogYrlpKnliJfooajkuK3nmoTlpLTlg49cbiAgICogQHBhcmFtIGNoYXRJZCDogYrlpKlJRFxuICAgKiBAcGFyYW0gYXZhdGFyVXJsIOaWsOWktOWDj1VSTFxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVDaGF0TGlzdEF2YXRhcihjaGF0SWQ6IHN0cmluZywgYXZhdGFyVXJsOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBjaGF0SXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWNoYXQtaWQ9XCIke2NoYXRJZH1cIl0gLmNoYXQtYXZhdGFyYCkgYXMgSFRNTEltYWdlRWxlbWVudDtcbiAgICBpZiAoY2hhdEl0ZW0pIHtcbiAgICAgIGNoYXRJdGVtLnNyYyA9IGF2YXRhclVybDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5pu05paw6IGK5aSp55WM6Z2i5aS06YOo55qE5aS05YOPXG4gICAqIEBwYXJhbSBhdmF0YXJVcmwg5paw5aS05YOPVVJMXG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZUNoYXRIZWFkZXJBdmF0YXIoYXZhdGFyVXJsOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBoZWFkZXJBdmF0YXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVhZGVyQXZhdGFyJykgYXMgSFRNTEltYWdlRWxlbWVudDtcbiAgICBpZiAoaGVhZGVyQXZhdGFyKSB7XG4gICAgICBoZWFkZXJBdmF0YXIuc3JjID0gYXZhdGFyVXJsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDkv53lrZjogYrlpKnmlbDmja7liLBCZWFy5YaF5a65XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHNhdmVDaGF0RGF0YVRvQmVhcigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8g5p6E5bu65a6M5pW055qEQmVhcuWGheWuuVxuICAgICAgY29uc3QgY29tcGxldGVCZWFyQ29udGVudCA9IHRoaXMubWVzc2FnZVBhcnNlci5idWlsZEJlYXJDb250ZW50KHRoaXMuY2hhdERhdGEpO1xuICAgICAgY29uc3QgYmVhckNvbnRlbnRPbmx5ID0gY29tcGxldGVCZWFyQ29udGVudC5yZXBsYWNlKCc8YmVhcj4nLCAnJykucmVwbGFjZSgnPC9iZWFyPicsICcnKTtcblxuICAgICAgLy8g6I635Y+W5b2T5YmN5raI5oGv5bm25Y+q5pu/5o2iYmVhcuagh+etvuWGheWuuVxuICAgICAgY29uc3QgbGFzdE1lc3NhZ2VJZCA9IGF3YWl0IGdldExhc3RNZXNzYWdlSWQoKTtcbiAgICAgIGNvbnN0IGxhc3RNZXNzYWdlID0gZ2V0Q2hhdE1lc3NhZ2VzKC0xKVswXTtcbiAgICAgIGNvbnN0IG9yaWdpbmFsTWVzc2FnZSA9IGxhc3RNZXNzYWdlPy5tZXNzYWdlIHx8ICcnO1xuICAgICAgY29uc3QgdXBkYXRlZE1lc3NhZ2UgPSB0aGlzLnJlcGxhY2VPbmx5QmVhclRhZ0NvbnRlbnQob3JpZ2luYWxNZXNzYWdlLCBiZWFyQ29udGVudE9ubHkpO1xuXG4gICAgICAvLyDkvb/nlKhzZXRDaGF0TWVzc2FnZXPmm7TmlrDlvZPliY3mpbzlsYJcbiAgICAgIGF3YWl0IHNldENoYXRNZXNzYWdlcyhcbiAgICAgICAgW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1lc3NhZ2VfaWQ6IGxhc3RNZXNzYWdlSWQsXG4gICAgICAgICAgICBtZXNzYWdlOiB1cGRhdGVkTWVzc2FnZSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICB7IHJlZnJlc2g6ICdub25lJyB9LFxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign5L+d5a2Y6IGK5aSp5pWw5o2u5aSx6LSlOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlpITnkIbnvqTmiJDlkZjpgoDor7dcbiAgICogQHBhcmFtIGdyb3VwRGF0YSDnvqTogYrmlbDmja5cbiAgICovXG4gIHByaXZhdGUgaGFuZGxlR3JvdXBNZW1iZXJJbnZpdGUoZ3JvdXBEYXRhOiBDaGF0RGF0YSk6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICAvLyDojrflj5bmiYDmnInogZTns7vkurpcbiAgICAgIGNvbnN0IGNvbnRhY3RNYW5hZ2VyID0gdGhpcy5jaGF0TGlzdE1hbmFnZXIuZ2V0Q29udGFjdE1hbmFnZXIoKTtcbiAgICAgIGNvbnN0IGFsbENvbnRhY3RzID0gY29udGFjdE1hbmFnZXIuZ2V0QWxsQ29udGFjdHMoKTtcblxuICAgICAgLy8g6L+H5ruk5o6J5bey57uP5Zyo576k6IGK5Lit55qE5oiQ5ZGYXG4gICAgICBjb25zdCBjdXJyZW50TWVtYmVycyA9IGdyb3VwRGF0YS5tZW1iZXJzIHx8IFtdO1xuICAgICAgY29uc3QgYXZhaWxhYmxlQ29udGFjdHMgPSBhbGxDb250YWN0cy5maWx0ZXIoY29udGFjdCA9PiAhY3VycmVudE1lbWJlcnMuc29tZShtZW1iZXIgPT4gbWVtYmVyLmlkID09PSBjb250YWN0LmlkKSk7XG5cbiAgICAgIGlmIChhdmFpbGFibGVDb250YWN0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy5zaG93VG9hc3QoJ+ayoeacieWPr+mCgOivt+eahOiBlOezu+S6uicsICd3YXJuaW5nJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8g5pi+56S66YKA6K+35oiQ5ZGY6YCJ5oup55WM6Z2iXG4gICAgICB0aGlzLnNob3dJbnZpdGVNZW1iZXJNb2RhbChncm91cERhdGEsIGF2YWlsYWJsZUNvbnRhY3RzKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign5aSE55CG576k6IGK5oiQ5ZGY6YKA6K+35aSx6LSlOicsIGVycm9yKTtcbiAgICAgIHRoaXMuc2hvd1RvYXN0KCfpgoDor7fmiJDlkZjlpLHotKUnLCAnZXJyb3InKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5pi+56S66YKA6K+35oiQ5ZGY5qih5oCB5qGGXG4gICAqIEBwYXJhbSBncm91cERhdGEg576k6IGK5pWw5o2uXG4gICAqIEBwYXJhbSBhdmFpbGFibGVDb250YWN0cyDlj6/pgoDor7fnmoTogZTns7vkurrliJfooahcbiAgICovXG4gIHByaXZhdGUgc2hvd0ludml0ZU1lbWJlck1vZGFsKGdyb3VwRGF0YTogQ2hhdERhdGEsIGF2YWlsYWJsZUNvbnRhY3RzOiBhbnlbXSk6IHZvaWQge1xuICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBvdmVybGF5LmNsYXNzTmFtZSA9ICdpbnZpdGUtbWVtYmVyLW92ZXJsYXknO1xuICAgIG92ZXJsYXkuaWQgPSAnaW52aXRlTWVtYmVyTW9kYWwnO1xuXG4gICAgY29uc3QgY29udGFjdHNIdG1sID0gYXZhaWxhYmxlQ29udGFjdHNcbiAgICAgIC5tYXAoXG4gICAgICAgIGNvbnRhY3QgPT4gYFxuICAgICAgPGRpdiBjbGFzcz1cImludml0ZS1jb250YWN0LWl0ZW1cIiBkYXRhLWNvbnRhY3QtaWQ9XCIke2NvbnRhY3QuaWR9XCI+XG4gICAgICAgIDxpbWcgY2xhc3M9XCJpbnZpdGUtY29udGFjdC1hdmF0YXJcIiBzcmM9XCIke2NvbnRhY3QuYXZhdGFyfVwiIGFsdD1cIiR7Y29udGFjdC5uYW1lfVwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiaW52aXRlLWNvbnRhY3QtaW5mb1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnZpdGUtY29udGFjdC1uYW1lXCI+JHtjb250YWN0Lm5hbWV9PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiaW52aXRlLWNvbnRhY3QtY2hlY2tib3hcIj5cbiAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgaWQ9XCJpbnZpdGVfJHtjb250YWN0LmlkfVwiIHZhbHVlPVwiJHtjb250YWN0LmlkfVwiPlxuICAgICAgICAgIDxsYWJlbCBmb3I9XCJpbnZpdGVfJHtjb250YWN0LmlkfVwiPjwvbGFiZWw+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYCxcbiAgICAgIClcbiAgICAgIC5qb2luKCcnKTtcblxuICAgIG92ZXJsYXkuaW5uZXJIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cImludml0ZS1tb2RhbC1jb250YWluZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImludml0ZS1tb2RhbC1oZWFkZXJcIj5cbiAgICAgICAgICA8aDM+6YKA6K+35oiQ5ZGYPC9oMz5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiaW52aXRlLWNsb3NlLWJ0blwiIGRhdGEtYWN0aW9uPVwiY2xvc2VcIj7DlzwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJpbnZpdGUtbW9kYWwtYm9keVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnZpdGUtY29udGFjdHMtbGlzdFwiPlxuICAgICAgICAgICAgJHtjb250YWN0c0h0bWx9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICBcbiAgICAgICAgPGRpdiBjbGFzcz1cImludml0ZS1tb2RhbC1mb290ZXJcIj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiaW52aXRlLWNhbmNlbC1idG5cIiBkYXRhLWFjdGlvbj1cImNhbmNlbFwiPuWPlua2iDwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJpbnZpdGUtY29uZmlybS1idG5cIiBkYXRhLWFjdGlvbj1cImNvbmZpcm1cIj7pgoDor7c8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuXG4gICAgLy8g5bCG5qih5oCB5qGG5re75Yqg5Yiw5omL5py65a655Zmo5YaF77yM6ICM5LiN5piv5pW05Liq6aG16Z2iXG4gICAgY29uc3QgcGhvbmVDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGhvbmUtY29udGFpbmVyJyk7XG4gICAgaWYgKHBob25lQ29udGFpbmVyKSB7XG4gICAgICBwaG9uZUNvbnRhaW5lci5hcHBlbmRDaGlsZChvdmVybGF5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdmVybGF5KTtcbiAgICB9XG5cbiAgICAvLyDnu5Hlrprkuovku7ZcbiAgICB0aGlzLmJpbmRJbnZpdGVNZW1iZXJNb2RhbEV2ZW50cyhvdmVybGF5LCBncm91cERhdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIOe7keWumumCgOivt+aIkOWRmOaooeaAgeahhuS6i+S7tlxuICAgKiBAcGFyYW0gbW9kYWwg5qih5oCB5qGG5YWD57SgXG4gICAqIEBwYXJhbSBncm91cERhdGEg576k6IGK5pWw5o2uXG4gICAqL1xuICBwcml2YXRlIGJpbmRJbnZpdGVNZW1iZXJNb2RhbEV2ZW50cyhtb2RhbDogSFRNTEVsZW1lbnQsIGdyb3VwRGF0YTogQ2hhdERhdGEpOiB2b2lkIHtcbiAgICAvLyDlhbPpl63mjInpkq5cbiAgICBjb25zdCBjbG9zZUJ0biA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWFjdGlvbj1cImNsb3NlXCJdJyk7XG4gICAgY29uc3QgY2FuY2VsQnRuID0gbW9kYWwucXVlcnlTZWxlY3RvcignW2RhdGEtYWN0aW9uPVwiY2FuY2VsXCJdJyk7XG5cbiAgICBbY2xvc2VCdG4sIGNhbmNlbEJ0bl0uZm9yRWFjaChidG4gPT4ge1xuICAgICAgaWYgKGJ0bikge1xuICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgLy8g5LuO5q2j56Gu55qE54i25YWD57Sg5Lit56e76Zmk5qih5oCB5qGGXG4gICAgICAgICAgaWYgKG1vZGFsLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgIG1vZGFsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobW9kYWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyDpgoDor7fnoa7orqTmjInpkq5cbiAgICBjb25zdCBpbnZpdGVCdG4gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hY3Rpb249XCJjb25maXJtXCJdJyk7XG4gICAgaWYgKGludml0ZUJ0bikge1xuICAgICAgaW52aXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB0aGlzLmhhbmRsZUludml0ZU1lbWJlckNvbmZpcm0obW9kYWwsIGdyb3VwRGF0YSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5aSE55CG6YKA6K+35oiQ5ZGY56Gu6K6kXG4gICAqIEBwYXJhbSBtb2RhbCDmqKHmgIHmoYblhYPntKBcbiAgICogQHBhcmFtIGdyb3VwRGF0YSDnvqTogYrmlbDmja5cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgaGFuZGxlSW52aXRlTWVtYmVyQ29uZmlybShtb2RhbDogSFRNTEVsZW1lbnQsIGdyb3VwRGF0YTogQ2hhdERhdGEpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8g6I635Y+W6YCJ5Lit55qE6IGU57O75Lq6XG4gICAgICBjb25zdCBjaGVja2JveGVzID0gbW9kYWwucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdOmNoZWNrZWQnKTtcbiAgICAgIGNvbnN0IHNlbGVjdGVkQ29udGFjdElkcyA9IEFycmF5LmZyb20oY2hlY2tib3hlcykubWFwKGNiID0+IChjYiBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSk7XG5cbiAgICAgIGlmIChzZWxlY3RlZENvbnRhY3RJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRoaXMuc2hvd1RvYXN0KCfor7fpgInmi6nopoHpgoDor7fnmoTmiJDlkZgnLCAnd2FybmluZycpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIOabtOaWsOe+pOiBiuaIkOWRmOWIl+ihqFxuICAgICAgY29uc3QgY29udGFjdE1hbmFnZXIgPSB0aGlzLmNoYXRMaXN0TWFuYWdlci5nZXRDb250YWN0TWFuYWdlcigpO1xuICAgICAgY29uc3QgbmV3TWVtYmVycyA9IHNlbGVjdGVkQ29udGFjdElkcy5tYXAoaWQgPT4ge1xuICAgICAgICBjb25zdCBjb250YWN0ID0gY29udGFjdE1hbmFnZXIuZ2V0Q29udGFjdEJ5SWQoaWQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGlkOiBjb250YWN0LmlkLFxuICAgICAgICAgIG5hbWU6IGNvbnRhY3QubmFtZSxcbiAgICAgICAgICBhdmF0YXI6IGNvbnRhY3QuYXZhdGFyLFxuICAgICAgICB9O1xuICAgICAgfSk7XG5cbiAgICAgIC8vIOa3u+WKoOWIsOe+pOiBiuaIkOWRmOS4rVxuICAgICAgZ3JvdXBEYXRhLm1lbWJlcnMgPSBbLi4uKGdyb3VwRGF0YS5tZW1iZXJzIHx8IFtdKSwgLi4ubmV3TWVtYmVyc107XG5cbiAgICAgIC8vIOWQjOatpeaIkOWRmOWPmOabtOWIsOmFkummhuiBiuWkqeWdl1xuICAgICAgYXdhaXQgdGhpcy5zeW5jR3JvdXBNZW1iZXJzVG9UYXZlcm4oZ3JvdXBEYXRhKTtcblxuICAgICAgLy8g5YWz6Zet5qih5oCB5qGGXG4gICAgICBpZiAobW9kYWwucGFyZW50Tm9kZSkge1xuICAgICAgICBtb2RhbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG1vZGFsKTtcbiAgICAgIH1cblxuICAgICAgLy8g5Yi35paw576k6IGK6K6+572u55WM6Z2i5YaF5a6577yM6ICM5LiN5piv5YWz6Zet6YeN5byAXG4gICAgICBhd2FpdCB0aGlzLnJlZnJlc2hHcm91cE1hbmFnZW1lbnRNb2RhbChncm91cERhdGEpO1xuXG4gICAgICB0aGlzLnNob3dUb2FzdChg5oiQ5Yqf6YKA6K+3ICR7c2VsZWN0ZWRDb250YWN0SWRzLmxlbmd0aH0g5ZCN5oiQ5ZGYYCwgJ3N1Y2Nlc3MnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign6YKA6K+35oiQ5ZGY56Gu6K6k5aSx6LSlOicsIGVycm9yKTtcbiAgICAgIHRoaXMuc2hvd1RvYXN0KCfpgoDor7fmiJDlkZjlpLHotKUnLCAnZXJyb3InKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5aSE55CG576k5oiQ5ZGY6Lii5Ye6XG4gICAqIEBwYXJhbSBncm91cERhdGEg576k6IGK5pWw5o2uXG4gICAqIEBwYXJhbSBtZW1iZXJJZCDmiJDlkZhJRFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBoYW5kbGVHcm91cE1lbWJlcktpY2soZ3JvdXBEYXRhOiBDaGF0RGF0YSwgbWVtYmVySWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IG1lbWJlcnMgPSAoZ3JvdXBEYXRhIGFzIGFueSkubWVtYmVycyB8fCBbXTtcbiAgICBjb25zdCBtZW1iZXIgPSBtZW1iZXJzLmZpbmQoKG06IGFueSkgPT4gbS5pZCA9PT0gbWVtYmVySWQpO1xuXG4gICAgaWYgKCFtZW1iZXIpIHtcbiAgICAgIHRoaXMuc2hvd1RvYXN0KCfmiJDlkZjkuI3lrZjlnKgnLCAnZXJyb3InKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoY29uZmlybShg56Gu5a6a6KaB56e76Zmk5oiQ5ZGYIFwiJHttZW1iZXIubmFtZX1cIiDlkJfvvJ9gKSkge1xuICAgICAgLy8g5LuO5oiQ5ZGY5YiX6KGo5Lit56e76ZmkXG4gICAgICAoZ3JvdXBEYXRhIGFzIGFueSkubWVtYmVycyA9IG1lbWJlcnMuZmlsdGVyKChtOiBhbnkpID0+IG0uaWQgIT09IG1lbWJlcklkKTtcblxuICAgICAgY29uc29sZS5sb2coYPCfkYsg5oiQ5ZGY5bey56e76ZmkOiAke21lbWJlci5uYW1lfWApO1xuXG4gICAgICAvLyDlkIzmraXmiJDlkZjlj5jmm7TliLDphZLppobogYrlpKnlnZdcbiAgICAgIGF3YWl0IHRoaXMuc3luY0dyb3VwTWVtYmVyc1RvVGF2ZXJuKGdyb3VwRGF0YSk7XG5cbiAgICAgIC8vIOWIt+aWsOe+pOiBiuiuvue9rueVjOmdouWGheWuue+8jOiAjOS4jeaYr+WFs+mXremHjeW8gFxuICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoR3JvdXBNYW5hZ2VtZW50TW9kYWwoZ3JvdXBEYXRhKTtcblxuICAgICAgdGhpcy5zaG93VG9hc3QoYOaIkOWRmCBcIiR7bWVtYmVyLm5hbWV9XCIg5bey56e76ZmkYCwgJ3N1Y2Nlc3MnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5aSE55CG576k6IGK6Kej5pWjXG4gICAqIEBwYXJhbSBncm91cERhdGEg576k6IGK5pWw5o2uXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGhhbmRsZUdyb3VwRGlzYmFuZChncm91cERhdGE6IENoYXREYXRhKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIOehruiupOWvueivneahhlxuICAgICAgY29uc3QgY29uZmlybWVkID0gY29uZmlybShcbiAgICAgICAgYOehruWumuimgeino+aVo+e+pOiBiiBcIiR7Z3JvdXBEYXRhLmNoYXROYW1lfVwiIOWQl++8n1xcblxcbuino+aVo+WQjuWwhuWIoOmZpOaJgOaciee+pOiBiua2iOaBr++8jOatpOaTjeS9nOS4jeWPr+aBouWkjeOAgmAsXG4gICAgICApO1xuXG4gICAgICBpZiAoIWNvbmZpcm1lZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKCfwn5eR77iPIOW8gOWni+ino+aVo+e+pOiBijonLCBncm91cERhdGEuY2hhdE5hbWUpO1xuXG4gICAgICAvLyAxLiDlhbPpl63nvqTogYrorr7nva7nlYzpnaJcbiAgICAgIHRoaXMuaGlkZUdyb3VwTWFuYWdlbWVudE1vZGFsKCk7XG5cbiAgICAgIC8vIDIuIOe+pOiBiueJueacieeahOmineWklua4heeQhu+8muS7jue+pOiBiuWtmOWCqOS4reWIoOmZpFxuICAgICAgaWYgKHRoaXMuZ3JvdXBDaGF0TWFuYWdlcikge1xuICAgICAgICB0aGlzLmdyb3VwQ2hhdE1hbmFnZXIuZGVsZXRlR3JvdXBDaGF0KGdyb3VwRGF0YS5jaGF0SWQpO1xuICAgICAgfVxuXG4gICAgICAvLyAzLiDkvb/nlKjpgJrnlKjnmoTliKDpmaTogYrlpKnpgLvovpHvvIjlpITnkIZCZWFy5qC85byP44CB5YaF5a2Y5riF55CG44CB55WM6Z2i5YiH5o2i562J77yJXG4gICAgICBhd2FpdCB0aGlzLmhhbmRsZURlbGV0ZUNoYXRSZXF1ZXN0KGdyb3VwRGF0YS5jaGF0SWQpO1xuXG4gICAgICB0aGlzLnNob3dUb2FzdChg576k6IGKIFwiJHtncm91cERhdGEuY2hhdE5hbWV9XCIg5bey6Kej5pWjYCwgJ3N1Y2Nlc3MnKTtcbiAgICAgIGNvbnNvbGUubG9nKCfinIUg576k6IGK6Kej5pWj5a6M5oiQJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+ino+aVo+e+pOiBiuWksei0pTonLCBlcnJvcik7XG4gICAgICB0aGlzLnNob3dUb2FzdCgn6Kej5pWj576k6IGK5aSx6LSlJywgJ2Vycm9yJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOagueaNrue+pOiBiklE6I635Y+W576k6IGK5ZCN56ewXG4gICAqIEBwYXJhbSBncm91cENoYXRJZCDnvqTogYpJRFxuICAgKiBAcmV0dXJucyDnvqTogYrlkI3np7BcbiAgICovXG4gIHByaXZhdGUgZ2V0R3JvdXBOYW1lQnlJZChncm91cENoYXRJZDogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc3QgZ3JvdXBEYXRhID0gdGhpcy5jaGF0RGF0YS5nZXQoZ3JvdXBDaGF0SWQpO1xuICAgIHJldHVybiBncm91cERhdGEgPyBncm91cERhdGEuY2hhdE5hbWUgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIOabtOaWsOe+pOiBiuaVsOaNruWtmOWCqFxuICAgKiBAcGFyYW0gZ3JvdXBEYXRhIOe+pOiBiuaVsOaNrlxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVHcm91cENoYXREYXRhKGdyb3VwRGF0YTogQ2hhdERhdGEpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgLy8g5pu05paw5YaF5a2Y5Lit55qE5pWw5o2uXG4gICAgICB0aGlzLmNoYXREYXRhLnNldChncm91cERhdGEuY2hhdElkLCBncm91cERhdGEpO1xuXG4gICAgICAvLyDmm7TmlrDnvqTogYrlrZjlgqhcbiAgICAgIGlmICh0aGlzLmdyb3VwQ2hhdE1hbmFnZXIpIHtcbiAgICAgICAgLy8g6L2s5o2i5Li6R3JvdXBDaGF0RGF0YeagvOW8j1xuICAgICAgICBjb25zdCBncm91cENoYXREYXRhID0ge1xuICAgICAgICAgIGlkOiBncm91cERhdGEuY2hhdElkLFxuICAgICAgICAgIG5hbWU6IGdyb3VwRGF0YS5jaGF0TmFtZSxcbiAgICAgICAgICBhdmF0YXI6IGdyb3VwRGF0YS5hdmF0YXIsXG4gICAgICAgICAgbWVtYmVyczogKGdyb3VwRGF0YS5tZW1iZXJzIHx8IFtdKS5tYXAobWVtYmVyID0+IG1lbWJlci5pZCksXG4gICAgICAgICAgdXNlclBhcnRpY2lwYXRpb246ICdtZW1iZXInIGFzIGNvbnN0LFxuICAgICAgICAgIGNyZWF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgICAgICBtZXNzYWdlczogW10sXG4gICAgICAgICAgdHlwZTogJ2dyb3VwJyBhcyBjb25zdCxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyDkv53lrZjliLDnvqTogYrlrZjlgqhcbiAgICAgICAgY29uc3QgR3JvdXBDaGF0U3RvcmFnZSA9IHJlcXVpcmUoJy4vbW9kdWxlcy9ncm91cENoYXQvc3RvcmFnZScpLkdyb3VwQ2hhdFN0b3JhZ2U7XG4gICAgICAgIEdyb3VwQ2hhdFN0b3JhZ2Uuc2F2ZUdyb3VwQ2hhdChncm91cENoYXREYXRhKTtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ+KchSDnvqTogYrmlbDmja7lt7Lmm7TmlrA6JywgZ3JvdXBEYXRhLmNoYXROYW1lKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign5pu05paw576k6IGK5pWw5o2u5aSx6LSlOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5pu05paw576k6IGK55WM6Z2i5pi+56S6XG4gICAqIEBwYXJhbSBncm91cERhdGEg576k6IGK5pWw5o2uXG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZUdyb3VwQ2hhdERpc3BsYXkoZ3JvdXBEYXRhOiBDaGF0RGF0YSk6IHZvaWQge1xuICAgIC8vIOabtOaWsOiBiuWkqeagh+mimCAtIOS/ruWkjemAieaLqeWZqFxuICAgIGNvbnN0IGNoYXRUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGF0VGl0bGUnKTtcbiAgICBpZiAoY2hhdFRpdGxlKSB7XG4gICAgICBjaGF0VGl0bGUudGV4dENvbnRlbnQgPSBncm91cERhdGEuY2hhdE5hbWU7XG4gICAgICBjb25zb2xlLmxvZyhg8J+UhCDlt7Lmm7TmlrDogYrlpKnmoIfpopg6ICR7Z3JvdXBEYXRhLmNoYXROYW1lfWApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyDmnKrmib7liLDogYrlpKnmoIfpopjlhYPntKAgI2NoYXRUaXRsZScpO1xuICAgIH1cblxuICAgIC8vIOabtOaWsOiBiuWkqeWIl+ihqOaYvuekulxuICAgIGlmICh0aGlzLmNoYXRMaXN0TWFuYWdlcikge1xuICAgICAgdGhpcy5jaGF0TGlzdE1hbmFnZXIucmVmcmVzaENoYXRMaXN0KHRoaXMuY2hhdERhdGEpO1xuICAgICAgY29uc29sZS5sb2coJ/CflIQg5bey5Yi35paw6IGK5aSp5YiX6KGoJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOiOt+WPluaIkOWRmOinkuiJsuaWh+acrFxuICAgKiBAcGFyYW0gcm9sZSDmiJDlkZjop5LoibJcbiAgICogQHJldHVybnMg6KeS6Imy5paH5pysXG4gICAqL1xuICBwcml2YXRlIGdldE1lbWJlclJvbGVUZXh0KHJvbGU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgc3dpdGNoIChyb2xlKSB7XG4gICAgICBjYXNlICdvd25lcic6XG4gICAgICAgIHJldHVybiAn576k5Li7JztcbiAgICAgIGNhc2UgJ2FkbWluJzpcbiAgICAgICAgcmV0dXJuICfnrqHnkIblkZgnO1xuICAgICAgY2FzZSAnbWVtYmVyJzpcbiAgICAgICAgcmV0dXJuICfmiJDlkZgnO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuICfmiJDlkZgnO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDpqozor4FCZWFy5pWw5o2u5a6M5pW05oCnXG4gICAqIEBwYXJhbSBiZWFyQ29udGVudCBCZWFy5YaF5a65XG4gICAqIEByZXR1cm5zIOmqjOivgee7k+aenFxuICAgKi9cbiAgcHJpdmF0ZSB2YWxpZGF0ZUJlYXJEYXRhKGJlYXJDb250ZW50OiBzdHJpbmcpOiB7IHZhbGlkOiBib29sZWFuOyBlcnJvcnM6IHN0cmluZ1tdIH0ge1xuICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcblxuICAgIHRyeSB7XG4gICAgICAvLyDmo4Dmn6Xln7rmnKzmoLzlvI9cbiAgICAgIGlmICghYmVhckNvbnRlbnQuaW5jbHVkZXMoJzxiZWFyPicpIHx8ICFiZWFyQ29udGVudC5pbmNsdWRlcygnPC9iZWFyPicpKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKCfnvLrlsJFCZWFy5qCH562+Jyk7XG4gICAgICB9XG5cbiAgICAgIC8vIOajgOafpeiBiuWkqeWdl+agvOW8j1xuICAgICAgY29uc3QgY2hhdEJsb2NrcyA9IFsuLi5iZWFyQ29udGVudC5tYXRjaEFsbCgvXFxbKFteXFxdXSspXFxdKFtcXHNcXFNdKj8pXFxbXFwvXFwxXFxdL2cpXTtcbiAgICAgIGlmIChjaGF0QmxvY2tzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBlcnJvcnMucHVzaCgn5rKh5pyJ5om+5Yiw5pyJ5pWI55qE6IGK5aSp5Z2XJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIOajgOafpee+pOiBiuagvOW8j1xuICAgICAgY29uc3QgZ3JvdXBCbG9ja3MgPSBbXG4gICAgICAgIC4uLmJlYXJDb250ZW50Lm1hdGNoQWxsKC9cXFvnvqTogYooW15cXF1dKylcXF1cXHMqXFxuP1xccypcXFvmiJDlkZhb77yaOl0oW15cXF1dKylcXF1cXHMqXFxuPyhbXFxzXFxTXSo/KVxcbj9cXHMqXFxbXFwv576k6IGKXFwxXFxdL2cpLFxuICAgICAgXTtcbiAgICAgIGZvciAoY29uc3QgYmxvY2sgb2YgZ3JvdXBCbG9ja3MpIHtcbiAgICAgICAgY29uc3QgZ3JvdXBOYW1lID0gYmxvY2tbMV07XG4gICAgICAgIGNvbnN0IG1lbWJlckxpc3QgPSBibG9ja1syXTtcblxuICAgICAgICBpZiAoIWdyb3VwTmFtZS50cmltKCkpIHtcbiAgICAgICAgICBlcnJvcnMucHVzaCgn576k6IGK5ZCN56ew5LiN6IO95Li656m6Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIW1lbWJlckxpc3QudHJpbSgpKSB7XG4gICAgICAgICAgZXJyb3JzLnB1c2goYOe+pOiBilwiJHtncm91cE5hbWV9XCLnmoTmiJDlkZjliJfooajkuI3og73kuLrnqbpgKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyDmo4Dmn6Xmtojmga/moLzlvI9cbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gWy4uLmJlYXJDb250ZW50Lm1hdGNoQWxsKC9cXFsoW1NHXSlfW15cXF1dKlxcXS9nKV07XG4gICAgICBpZiAobWVzc2FnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKCfmsqHmnInmib7liLDmnInmlYjnmoTmtojmga8nKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsaWQ6IGVycm9ycy5sZW5ndGggPT09IDAsXG4gICAgICAgIGVycm9ycyxcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGVycm9ycy5wdXNoKGDpqozor4Hov4fnqIvlh7rplJk6ICR7ZXJyb3J9YCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgIGVycm9ycyxcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOWQjOatpee+pOaIkOWRmOWPmOabtOWIsOmFkummhuiBiuWkqeWdl1xuICAgKiBAcGFyYW0gZ3JvdXBEYXRhIOe+pOiBiuaVsOaNrlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBzeW5jR3JvdXBNZW1iZXJzVG9UYXZlcm4oZ3JvdXBEYXRhOiBDaGF0RGF0YSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+UhCDlvIDlp4vlkIzmraXnvqTmiJDlkZjlj5jmm7TliLDphZLppobogYrlpKnlnZcnKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OKIOe+pOiBiuaVsOaNrjonLCB7XG4gICAgICAgIGNoYXRJZDogZ3JvdXBEYXRhLmNoYXRJZCxcbiAgICAgICAgY2hhdE5hbWU6IGdyb3VwRGF0YS5jaGF0TmFtZSxcbiAgICAgICAgbWVtYmVyQ291bnQ6IChncm91cERhdGEubWVtYmVycyB8fCBbXSkubGVuZ3RoLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIOabtOaWsOWGheWtmOS4reeahOiBiuWkqeaVsOaNrlxuICAgICAgdGhpcy5jaGF0RGF0YS5zZXQoZ3JvdXBEYXRhLmNoYXRJZCwgZ3JvdXBEYXRhKTtcblxuICAgICAgLy8g6YeN6KaB5o+Q56S677ya5q2k5pa55rOV5Y+q6IO95pu05paw5b2T5YmN5omT5byA55qE6IGK5aSp5Lit55qE576k6IGK5L+h5oGvXG4gICAgICAvLyDlpoLmnpznm67moIfnvqTogYrnmoTmlbDmja7lrZjlgqjlnKjlhbbku5bogYrlpKnmlofku7bkuK3vvIzpnIDopoHlhYjliIfmjaLliLDlr7nlupTnmoTogYrlpKlcbiAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8g5rOo5oSP77ya5Y+q6IO95pu05paw5b2T5YmN6IGK5aSp5Lit55qE576k6IGK5L+h5oGvJyk7XG5cbiAgICAgIC8vIOafpeaJvuWMheWQq+ebruagh+e+pOiBiuS/oeaBr+eahOa2iOaBr1xuICAgICAgY29uc3QgbWVzc2FnZXMgPSBnZXRDaGF0TWVzc2FnZXMoJzAte3tsYXN0TWVzc2FnZUlkfX0nKTtcbiAgICAgIGxldCBtZW1iZXJNZXNzYWdlSWQgPSAtMTtcblxuICAgICAgY29uc29sZS5sb2coYPCfk50g5b2T5YmN6IGK5aSp5YWx5pyJICR7bWVzc2FnZXMubGVuZ3RofSDmnaHmtojmga9gKTtcblxuICAgICAgLy8g5p+l5om+5YyF5ZCr54m55a6a576k6IGK5L+h5oGv55qE5raI5oGvXG4gICAgICBsZXQgdGFyZ2V0TWVzc2FnZSA9IG51bGw7XG5cbiAgICAgIC8vIOWHhuWkh+aQnOe0ouaooeW8j++8muWQjOaXtuWwneivleW9k+WJjeWQjeensOWSjOWPr+iDveeahOWOn+Wni+WQjeensFxuICAgICAgY29uc3Qgc2VhcmNoUGF0dGVybnMgPSBbZ3JvdXBEYXRhLmNoYXROYW1lXTtcblxuICAgICAgLy8g5qOA5p+l5piv5ZCm5pyJ576k5ZCN6KaG55uW77yM5aaC5p6c5pyJ77yM5Y+v6IO96ZyA6KaB5pCc57Si5Y6f5aeL5ZCN56ewXG4gICAgICBjb25zdCBoYXNPdmVycmlkZSA9IEdyb3VwTmFtZU92ZXJyaWRlTWFuYWdlci5oYXNPdmVycmlkZShncm91cERhdGEuY2hhdElkKTtcbiAgICAgIGlmIChoYXNPdmVycmlkZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhg8J+UjSDmo4DmtYvliLDnvqTlkI3opobnm5bvvIzlsIblkIzml7bmkJzntKLljp/lp4vlkI3np7Dlkozopobnm5blkI3np7BgKTtcblxuICAgICAgICAvLyDlsJ3or5Xku45CZWFy5qC85byP5Lit5o+Q5Y+W5omA5pyJ576k6IGK5ZCN56ew77yM5om+5Yiw5Y+v6IO955qE5Y6f5aeL5ZCN56ewXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzc2FnZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBtZXNzYWdlID0gbWVzc2FnZXNbaV07XG4gICAgICAgICAgaWYgKG1lc3NhZ2UubWVzc2FnZSkge1xuICAgICAgICAgICAgLy8g5p+l5om+5omA5pyJ576k6IGK5Z2X5qih5byPXG4gICAgICAgICAgICBjb25zdCBncm91cE1hdGNoZXMgPSBtZXNzYWdlLm1lc3NhZ2UubWF0Y2hBbGwoL1xcW+e+pOiBiihbXlxcXV0rKVxcXS9nKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbWF0Y2ggb2YgZ3JvdXBNYXRjaGVzKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGZvdW5kR3JvdXBOYW1lID0gbWF0Y2hbMV07XG4gICAgICAgICAgICAgIGlmICghc2VhcmNoUGF0dGVybnMuaW5jbHVkZXMoZm91bmRHcm91cE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgc2VhcmNoUGF0dGVybnMucHVzaChmb3VuZEdyb3VwTmFtZSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYPCfk50g5Y+R546w5Y+v6IO955qE5Y6f5aeL576k5ZCNOiAke2ZvdW5kR3JvdXBOYW1lfWApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKGDwn5SNIOaQnOe0ouaooeW8jzogJHtzZWFyY2hQYXR0ZXJucy5qb2luKCcsICcpfWApO1xuXG4gICAgICAvLyDkvb/nlKjmiYDmnInmkJzntKLmqKHlvI/mn6Xmib7nm67moIfmtojmga9cbiAgICAgIGZvciAoY29uc3Qgc2VhcmNoTmFtZSBvZiBzZWFyY2hQYXR0ZXJucykge1xuICAgICAgICBjb25zdCBncm91cENoYXRQYXR0ZXJuID0gYFvnvqTogYoke3NlYXJjaE5hbWV9XWA7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZXNzYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBtZXNzYWdlc1tpXTtcbiAgICAgICAgICBpZiAobWVzc2FnZS5tZXNzYWdlICYmIG1lc3NhZ2UubWVzc2FnZS5pbmNsdWRlcyhncm91cENoYXRQYXR0ZXJuKSkge1xuICAgICAgICAgICAgLy8g56Gu5L+d6L+Z5piv55uu5qCH576k6IGK55qE5raI5oGv5Z2XXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlQ29udGVudCA9IG1lc3NhZ2UubWVzc2FnZTtcblxuICAgICAgICAgICAgLy8g5qOA5p+l5piv5ZCm5YyF5ZCr5a6M5pW055qE576k6IGK5Z2X57uT5p6EXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIG1lc3NhZ2VDb250ZW50LmluY2x1ZGVzKGBbL+e+pOiBiiR7c2VhcmNoTmFtZX1dYCkgfHxcbiAgICAgICAgICAgICAgKG1lc3NhZ2VDb250ZW50LmluY2x1ZGVzKCc8YmVhcj4nKSAmJiBtZXNzYWdlQ29udGVudC5pbmNsdWRlcyhncm91cENoYXRQYXR0ZXJuKSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBtZW1iZXJNZXNzYWdlSWQgPSBtZXNzYWdlLm1lc3NhZ2VfaWQ7XG4gICAgICAgICAgICAgIHRhcmdldE1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+OryDmib7liLDnm67moIfnvqTogYrmtojmga86ICR7c2VhcmNoTmFtZX0gKOa2iOaBr0lEOiAke21lbWJlck1lc3NhZ2VJZH0pYCk7XG5cbiAgICAgICAgICAgICAgLy8g6K6w5b2V5L2/55So55qE5pCc57Si5ZCN56ew77yM5ZCO57ut5pu/5o2i5pe26ZyA6KaB55So5YiwXG4gICAgICAgICAgICAgICh0YXJnZXRNZXNzYWdlIGFzIGFueSkuZm91bmRHcm91cE5hbWUgPSBzZWFyY2hOYW1lO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGFyZ2V0TWVzc2FnZSkgYnJlYWs7IC8vIOaJvuWIsOS6huWwseWBnOatouaQnOe0olxuICAgICAgfVxuXG4gICAgICAvLyDmnoTlu7rmlrDnmoTmiJDlkZjliJfooajlrZfnrKbkuLJcbiAgICAgIGNvbnN0IG1lbWJlcnMgPSAoZ3JvdXBEYXRhIGFzIGFueSkubWVtYmVycyB8fCBbXTtcbiAgICAgIGNvbnN0IG1lbWJlck5hbWVzID0gbWVtYmVycy5tYXAoKG1lbWJlcjogYW55KSA9PiBtZW1iZXIubmFtZSkuam9pbign77yMJyk7XG4gICAgICBjb25zdCBuZXdNZW1iZXJDb250ZW50ID0gYFvmiJDlkZjvvJoke21lbWJlck5hbWVzfV1gO1xuXG4gICAgICBpZiAobWVtYmVyTWVzc2FnZUlkID49IDAgJiYgdGFyZ2V0TWVzc2FnZSkge1xuICAgICAgICAvLyDmm7TmlrDnjrDmnInnmoTmtojmga9cbiAgICAgICAgbGV0IHVwZGF0ZWRNZXNzYWdlID0gdGFyZ2V0TWVzc2FnZS5tZXNzYWdlO1xuXG4gICAgICAgIC8vIOS9v+eUqOWunumZheaJvuWIsOeahOe+pOiBiuWQjeensOi/m+ihjOeyvuehruabv+aNolxuICAgICAgICBjb25zdCBhY3R1YWxHcm91cE5hbWUgPSAodGFyZ2V0TWVzc2FnZSBhcyBhbnkpLmZvdW5kR3JvdXBOYW1lIHx8IGdyb3VwRGF0YS5jaGF0TmFtZTtcbiAgICAgICAgY29uc3QgZ3JvdXBDaGF0QmxvY2tQYXR0ZXJuID0gbmV3IFJlZ0V4cChcbiAgICAgICAgICBgKFxcXFxb576k6IGKJHthY3R1YWxHcm91cE5hbWUucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csICdcXFxcJCYnKX1cXFxcXVtcXFxcc1xcXFxTXSo/KVxcXFxb5oiQ5ZGY77yaW15cXFxcXV0qXFxcXF1gLFxuICAgICAgICAgICdnJyxcbiAgICAgICAgKTtcblxuICAgICAgICAvLyDlhYjlsJ3or5Xnsr7noa7ljLnphY3nvqTogYrlnZflhoXnmoTmiJDlkZjkv6Hmga9cbiAgICAgICAgaWYgKGdyb3VwQ2hhdEJsb2NrUGF0dGVybi50ZXN0KHVwZGF0ZWRNZXNzYWdlKSkge1xuICAgICAgICAgIHVwZGF0ZWRNZXNzYWdlID0gdXBkYXRlZE1lc3NhZ2UucmVwbGFjZShncm91cENoYXRCbG9ja1BhdHRlcm4sIGAkMSR7bmV3TWVtYmVyQ29udGVudH1gKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhg8J+OryDnsr7noa7mm7/mjaLnvqTogYrlnZflhoXnmoTmiJDlkZjkv6Hmga8gKOS9v+eUqOWQjeensDogJHthY3R1YWxHcm91cE5hbWV9KWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIOmZjee6p+WkhOeQhu+8muWmguaenOaYr+eugOWNleagvOW8j++8jOebtOaOpeabv+aNou+8iOS9huimgeehruS/neWcqOato+ehrueahOS4iuS4i+aWh+S4re+8iVxuICAgICAgICAgIGNvbnN0IGFjdHVhbEdyb3VwQ2hhdFBhdHRlcm4gPSBgW+e+pOiBiiR7YWN0dWFsR3JvdXBOYW1lfV1gO1xuICAgICAgICAgIGlmICh1cGRhdGVkTWVzc2FnZS5pbmNsdWRlcyhhY3R1YWxHcm91cENoYXRQYXR0ZXJuKSkge1xuICAgICAgICAgICAgdXBkYXRlZE1lc3NhZ2UgPSB1cGRhdGVkTWVzc2FnZS5yZXBsYWNlKC9cXFvmiJDlkZjvvJpbXlxcXV0qXFxdLywgbmV3TWVtYmVyQ29udGVudCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+TnSDpmY3nuqfmm7/mjaLmiJDlkZjkv6Hmga8gKOS9v+eUqOWQjeensDogJHthY3R1YWxHcm91cE5hbWV9KWApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyDmnKrmib7liLDlkIjpgILnmoTmiJDlkZjkv6Hmga/mm7/mjaLkvY3nva4nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCBzZXRDaGF0TWVzc2FnZXMoXG4gICAgICAgICAgW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBtZXNzYWdlX2lkOiBtZW1iZXJNZXNzYWdlSWQsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IHVwZGF0ZWRNZXNzYWdlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIHsgcmVmcmVzaDogJ25vbmUnIH0sXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc29sZS5sb2coYOKchSDlt7Lmm7TmlrDnvqTogYrmiJDlkZjkv6Hmga/liLDmtojmga8gJHttZW1iZXJNZXNzYWdlSWR9YCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5OdIOaWsOaIkOWRmOWIl+ihqDogJHttZW1iZXJOYW1lc31gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOWmguaenOayoeacieaJvuWIsOebruagh+e+pOiBiueahOa2iOaBr++8jOabtOaWsOaVtOS4qkJlYXLlhoXlrrnliLDnjrDmnInmtojmga9cbiAgICAgICAgY29uc29sZS5sb2coJ/CflIQg5pyq5om+5Yiw55uu5qCH576k6IGK5raI5oGv77yM5pu05paw5pW05LiqQmVhcuWGheWuuScpO1xuXG4gICAgICAgIC8vIOaehOW7uuWujOaVtOeahEJlYXLlhoXlrrlcbiAgICAgICAgY29uc3QgY29tcGxldGVCZWFyQ29udGVudCA9IHRoaXMubWVzc2FnZVBhcnNlci5idWlsZEJlYXJDb250ZW50KHRoaXMuY2hhdERhdGEpO1xuXG4gICAgICAgIC8vIOiOt+WPluacgOWQjuS4gOadoea2iOaBr1xuICAgICAgICBjb25zdCBsYXN0TWVzc2FnZSA9IGdldENoYXRNZXNzYWdlcygtMSlbMF07XG4gICAgICAgIGlmIChsYXN0TWVzc2FnZSkge1xuICAgICAgICAgIGNvbnN0IG9yaWdpbmFsTWVzc2FnZSA9IGxhc3RNZXNzYWdlLm1lc3NhZ2UgfHwgJyc7XG4gICAgICAgICAgY29uc3QgYmVhckNvbnRlbnRPbmx5ID0gY29tcGxldGVCZWFyQ29udGVudC5yZXBsYWNlKCc8YmVhcj4nLCAnJykucmVwbGFjZSgnPC9iZWFyPicsICcnKTtcbiAgICAgICAgICBjb25zdCB1cGRhdGVkTWVzc2FnZSA9IHRoaXMucmVwbGFjZU9ubHlCZWFyVGFnQ29udGVudChvcmlnaW5hbE1lc3NhZ2UsIGJlYXJDb250ZW50T25seSk7XG5cbiAgICAgICAgICBhd2FpdCBzZXRDaGF0TWVzc2FnZXMoXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlX2lkOiBsYXN0TWVzc2FnZS5tZXNzYWdlX2lkLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHVwZGF0ZWRNZXNzYWdlLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHsgcmVmcmVzaDogJ25vbmUnIH0sXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUg5bey5pu05pawQmVhcuWGheWuueWMheWQq+e+pOiBiuaIkOWRmOS/oeaBrycpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5OdIOaWsOaIkOWRmOWIl+ihqDogJHttZW1iZXJOYW1lc31gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyDmsqHmnInmib7liLDlj6/mm7TmlrDnmoTmtojmga8nKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyDlkIzml7bmm7TmlrDlhoXlrZjkuK3nmoRCZWFy5qC85byP5pWw5o2uXG4gICAgICB0aGlzLnVwZGF0ZUdyb3VwRGF0YUluQmVhcihncm91cERhdGEpO1xuXG4gICAgICBjb25zb2xlLmxvZygn4pyFIOe+pOaIkOWRmOWQjOatpeWujOaIkCcpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwg5ZCM5q2l576k5oiQ5ZGY5Yiw6YWS6aaG5aSx6LSlOicsIGVycm9yKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+mUmeivr+ivpuaDhTonLCBlcnJvcik7XG4gICAgICB0aGlzLnNob3dUb2FzdCgn5ZCM5q2l5oiQ5ZGY5L+h5oGv5aSx6LSlJywgJ2Vycm9yJyk7XG5cbiAgICAgIC8vIOmZjee6p+WkhOeQhu+8muiHs+WwkeabtOaWsOWGheWtmOaVsOaNrlxuICAgICAgdGhpcy51cGRhdGVHcm91cERhdGFJbkJlYXIoZ3JvdXBEYXRhKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5pu05paw576k6IGK5pWw5o2u5ZyoQmVhcuagvOW8j+S4rVxuICAgKiBAcGFyYW0gZ3JvdXBEYXRhIOe+pOiBiuaVsOaNrlxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVHcm91cERhdGFJbkJlYXIoZ3JvdXBEYXRhOiBDaGF0RGF0YSk6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICAvLyDmm7TmlrDlhoXlrZjkuK3nmoTogYrlpKnmlbDmja5cbiAgICAgIHRoaXMuY2hhdERhdGEuc2V0KGdyb3VwRGF0YS5jaGF0SWQsIGdyb3VwRGF0YSk7XG5cbiAgICAgIC8vIOaehOW7uuaWsOeahEJlYXLlhoXlrrlcbiAgICAgIGNvbnN0IGJlYXJDb250ZW50ID0gdGhpcy5tZXNzYWdlUGFyc2VyLmJ1aWxkQmVhckNvbnRlbnQodGhpcy5jaGF0RGF0YSk7XG5cbiAgICAgIC8vIOmqjOivgeaVsOaNruWujOaVtOaAp1xuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IHRoaXMudmFsaWRhdGVCZWFyRGF0YShiZWFyQ29udGVudCk7XG4gICAgICBpZiAoIXZhbGlkYXRpb24udmFsaWQpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQmVhcuaVsOaNrumqjOivgeWksei0pTonLCB2YWxpZGF0aW9uLmVycm9ycyk7XG4gICAgICAgIHRoaXMuc2hvd1RvYXN0KCfmlbDmja7pqozor4HlpLHotKU6ICcgKyB2YWxpZGF0aW9uLmVycm9ycy5qb2luKCcsICcpLCAnZXJyb3InKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyDms6jmhI/vvJrnvqTogYrmlbDmja7lt7Lmm7TmlrDliLDlhoXlrZjvvIzkvJrlnKjkuIvmrKHlj5HpgIHmtojmga/ml7boh6rliqjlkIzmraXliLBTaWxseVRhdmVyblxuICAgICAgY29uc29sZS5sb2coJ+KchSDnvqTogYrmlbDmja7lt7Lmm7TmlrDliLDlhoXlrZgnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign5pu05paw576k6IGK5pWw5o2u5aSx6LSlOicsIGVycm9yKTtcbiAgICAgIHRoaXMuc2hvd1RvYXN0KCfmm7TmlrDlpLHotKXvvIzor7fph43or5UnLCAnZXJyb3InKTtcbiAgICB9XG4gIH1cblxuXG5cbiAgLyoqXG4gICAqIOa4suafk+W9k+WJjeiBiuWkqVxuICAgKi9cbiAgcHJpdmF0ZSByZW5kZXJDdXJyZW50Q2hhdCgpOiB2b2lkIHtcbiAgICBjb25zdCBjdXJyZW50Q2hhdERhdGEgPSB0aGlzLmNoYXREYXRhLmdldCh0aGlzLmN1cnJlbnRDaGF0KTtcbiAgICBpZiAoIWN1cnJlbnRDaGF0RGF0YSkge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIOaJvuS4jeWIsOW9k+WJjeiBiuWkqeaVsOaNrjonLCB0aGlzLmN1cnJlbnRDaGF0KTtcblxuICAgICAgLy8g5bCd6K+V5qih57OK5Yy56YWNXG4gICAgICBjb25zdCBwb3NzaWJsZU1hdGNoZXMgPSBBcnJheS5mcm9tKHRoaXMuY2hhdERhdGEua2V5cygpKS5maWx0ZXIoXG4gICAgICAgIGtleSA9PiBrZXkuaW5jbHVkZXModGhpcy5jdXJyZW50Q2hhdCkgfHwgdGhpcy5jdXJyZW50Q2hhdC5pbmNsdWRlcyhrZXkpLFxuICAgICAgKTtcbiAgICAgIGlmIChwb3NzaWJsZU1hdGNoZXMubGVuZ3RoID4gMCkge1xuICAgICAgfVxuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8g5Zyo5riy5p+T5YmN6L+b6KGM5LiA5qyh5Z+65LqOIFVJIOe8k+WtmOeahOWkjeawtO+8jOmBv+WFjeWIh+aNoueVjOmdouWQjumihOiniOWbvuS4ouWksVxuICAgIHRoaXMucmVoeWRyYXRlVXNlckltYWdlTWVzc2FnZXMoY3VycmVudENoYXREYXRhKTtcblxuICAgIC8vIOabtOaWsOWktOmDqOS/oeaBr1xuICAgIHRoaXMudXBkYXRlQ2hhdEhlYWRlcihjdXJyZW50Q2hhdERhdGEpO1xuXG4gICAgLy8g5riy5p+T5raI5oGv5YiX6KGoXG4gICAgdGhpcy5yZW5kZXJNZXNzYWdlcyhjdXJyZW50Q2hhdERhdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIOabtOaWsOiBiuWkqeWktOmDqOS/oeaBr1xuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVDaGF0SGVhZGVyKGNoYXREYXRhOiBDaGF0RGF0YSk6IHZvaWQge1xuICAgIGNvbnN0IGNoYXRUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGF0VGl0bGUnKTtcbiAgICBjb25zdCBoZWFkZXJBdmF0YXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVhZGVyQXZhdGFyJykgYXMgSFRNTEltYWdlRWxlbWVudDtcbiAgICBjb25zdCBoZWFkZXJTdGF0dXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyLXN0YXR1cycpIGFzIEhUTUxFbGVtZW50O1xuXG4gICAgaWYgKGNoYXRUaXRsZSkge1xuICAgICAgLy8g5LuO6IGK5aSp5ZCN56ew5Lit5o+Q5Y+W6KeS6Imy5ZCNXG4gICAgICAvLyDkvovlpoLvvJpcIuWSjOWwj+aYjueahOiBiuWkqVwiIC0+IFwi5bCP5piOXCJcbiAgICAgIGxldCBkaXNwbGF5TmFtZSA9IGNoYXREYXRhLmNoYXROYW1lO1xuICAgICAgY29uc3QgY2hhdE5hbWVNYXRjaCA9IGNoYXREYXRhLmNoYXROYW1lLm1hdGNoKC9e5ZKMKC4rKeeahOiBiuWkqSQvKTtcbiAgICAgIGlmIChjaGF0TmFtZU1hdGNoKSB7XG4gICAgICAgIGRpc3BsYXlOYW1lID0gY2hhdE5hbWVNYXRjaFsxXTtcbiAgICAgIH1cbiAgICAgIGNoYXRUaXRsZS50ZXh0Q29udGVudCA9IGRpc3BsYXlOYW1lO1xuICAgIH1cblxuICAgIGlmIChoZWFkZXJBdmF0YXIpIHtcbiAgICAgIGhlYWRlckF2YXRhci5zcmMgPSB0aGlzLm1lc3NhZ2VQYXJzZXIucHJvY2Vzc0ltYWdlVXJsKGNoYXREYXRhLmF2YXRhcik7XG4gICAgICBoZWFkZXJBdmF0YXIuYWx0ID0gY2hhdERhdGEuY2hhdE5hbWU7XG4gICAgfVxuXG4gICAgLy8g5qC55o2u6IGK5aSp57G75Z6L5pi+56S65oiW6ZqQ6JeP5Zyo57q/54q25oCBXG4gICAgaWYgKGhlYWRlclN0YXR1cykge1xuICAgICAgLy8g5Yik5pat5piv5ZCm5Li6576k6IGK77ya5LyY5YWI5L2/55SoY2hhdElk5Yik5pat77yM5YW25qyh5qOA5p+l5raI5oGv57G75Z6L5ZKM6IGK5aSp5ZCN56ewXG4gICAgICBjb25zdCBpc0dyb3VwQ2hhdCA9XG4gICAgICAgIGNoYXREYXRhLmNoYXRJZC5zdGFydHNXaXRoKCfnvqTogYonKSB8fFxuICAgICAgICBjaGF0RGF0YS5jaGF0SWQuc3RhcnRzV2l0aCgnR18nKSB8fFxuICAgICAgICBjaGF0RGF0YS5jaGF0TmFtZS5pbmNsdWRlcygn576k6IGKJykgfHxcbiAgICAgICAgY2hhdERhdGEubWVzc2FnZXMuc29tZShtZXNzYWdlID0+IG1lc3NhZ2UudHlwZSA9PT0gJ0cnKTtcblxuICAgICAgaWYgKGlzR3JvdXBDaGF0KSB7XG4gICAgICAgIC8vIOe+pOiBiu+8mumakOiXj+WcqOe6v+eKtuaAgVxuICAgICAgICBoZWFkZXJTdGF0dXMuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOWNleiBiu+8muaYvuekuuWcqOe6v+eKtuaAgVxuICAgICAgICBoZWFkZXJTdGF0dXMuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5riy5p+T5raI5oGv5YiX6KGo77yI5YiG6aG177ya6buY6K6k5pi+56S65pyA6L+RNTDmnaHvvIzpobbpg6jigJzmn6XnnIvmm7TlpJrmtojmga/igJ3mr4/mrKErMjDvvIlcbiAgICovXG4gIHByaXZhdGUgcmVuZGVyTWVzc2FnZXMoY2hhdERhdGE6IENoYXREYXRhLCBvcHRpb25zPzogeyBwcmVzZXJ2ZVNjcm9sbD86IGJvb2xlYW4gfSk6IHZvaWQge1xuICAgIGNvbnN0IG1lc3NhZ2VzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXRNZXNzYWdlcycpO1xuICAgIGlmICghbWVzc2FnZXNDb250YWluZXIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+aJvuS4jeWIsOa2iOaBr+WuueWZqCAjY2hhdE1lc3NhZ2VzJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcHJlc2VydmVTY3JvbGwgPSAhIW9wdGlvbnM/LnByZXNlcnZlU2Nyb2xsO1xuICAgIC8vIOiusOW9leaXp+a7muWKqOeKtuaAge+8iOWcqOS/neeVmea7muWKqOaXtueUqOS6juWbnuihpe+8iVxuICAgIGNvbnN0IG9sZFNjcm9sbFRvcCA9IG1lc3NhZ2VzQ29udGFpbmVyLnNjcm9sbFRvcDtcbiAgICBjb25zdCBvbGRTY3JvbGxIZWlnaHQgPSBtZXNzYWdlc0NvbnRhaW5lci5zY3JvbGxIZWlnaHQ7XG5cbiAgICAvLyDorqHnrpflj6/op4Hnqpflj6NcbiAgICBjb25zdCB0b3RhbCA9IGNoYXREYXRhLm1lc3NhZ2VzLmxlbmd0aDtcbiAgICBjb25zdCBpbml0aWFsQ291bnQgPSBNYXRoLm1pbih0b3RhbCwgdGhpcy5JTklUSUFMX1ZJU0lCTEVfQ09VTlQpO1xuICAgIGlmICghdGhpcy52aXNpYmxlQ291bnRzLmhhcyhjaGF0RGF0YS5jaGF0SWQpKSB7XG4gICAgICB0aGlzLnZpc2libGVDb3VudHMuc2V0KGNoYXREYXRhLmNoYXRJZCwgaW5pdGlhbENvdW50KTtcbiAgICB9XG4gICAgbGV0IGNvdW50ID0gTWF0aC5taW4odGhpcy52aXNpYmxlQ291bnRzLmdldChjaGF0RGF0YS5jaGF0SWQpIHx8IGluaXRpYWxDb3VudCwgdG90YWwpO1xuICAgIGNvbnN0IHN0YXJ0ID0gTWF0aC5tYXgodG90YWwgLSBjb3VudCwgMCk7XG5cbiAgICAvLyDlsYDpg6jigJzliqDovb3mm7TlpJrigJ3lpITnkIblh73mlbDvvIjngrnlh7vpobbpg6jmjInpkq7ml7bop6blj5HvvIlcbiAgICBjb25zdCBoYW5kbGVMb2FkTW9yZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICBpZiAobm93IC0gdGhpcy5sYXN0TG9hZE1vcmVBdCA8IHRoaXMuTE9BRF9NT1JFX1RIUk9UVExFX01TKSByZXR1cm47XG4gICAgICB0aGlzLmxhc3RMb2FkTW9yZUF0ID0gbm93O1xuXG4gICAgICBjb25zdCB0b3RhbCA9IGNoYXREYXRhLm1lc3NhZ2VzLmxlbmd0aDtcbiAgICAgIGNvbnN0IHByZXYgPSBNYXRoLm1pbihcbiAgICAgICAgdGhpcy52aXNpYmxlQ291bnRzLmdldChjaGF0RGF0YS5jaGF0SWQpID8/IE1hdGgubWluKHRvdGFsLCB0aGlzLklOSVRJQUxfVklTSUJMRV9DT1VOVCksXG4gICAgICAgIHRvdGFsLFxuICAgICAgKTtcbiAgICAgIGlmIChwcmV2ID49IHRvdGFsKSByZXR1cm47XG5cbiAgICAgIGNvbnN0IG5leHQgPSBNYXRoLm1pbihwcmV2ICsgdGhpcy5MT0FEX01PUkVfU1RFUCwgdG90YWwpO1xuICAgICAgdGhpcy52aXNpYmxlQ291bnRzLnNldChjaGF0RGF0YS5jaGF0SWQsIG5leHQpO1xuXG4gICAgICB0aGlzLnByZXBlbmRPbGRlck1lc3NhZ2VzKGNoYXREYXRhLCBwcmV2LCBuZXh0KTtcbiAgICB9O1xuXG4gICAgLy8g5riF56m65bm26YeN5paw5riy5p+TXG4gICAgbWVzc2FnZXNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAvLyDmuLLmn5Plj6/op4Hljoblj7Lmtojmga9cbiAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCB0b3RhbDsgaSsrKSB7XG4gICAgICBjb25zdCBtZXNzYWdlRWxlbWVudCA9IHRoaXMuY3JlYXRlTWVzc2FnZUVsZW1lbnQoY2hhdERhdGEubWVzc2FnZXNbaV0pO1xuICAgICAgbWVzc2FnZXNDb250YWluZXIuYXBwZW5kQ2hpbGQobWVzc2FnZUVsZW1lbnQpO1xuICAgIH1cblxuICAgIC8vIOa4suafk+mYn+WIl+S4reeahOW+heWPkemAgea2iOaBr++8iOS4jeWPguS4juWIhumhte+8iVxuICAgIGNvbnN0IHF1ZXVlTWVzc2FnZXMgPSB0aGlzLnNlbmRRdWV1ZS5maWx0ZXIobWVzc2FnZSA9PiBtZXNzYWdlLmNoYXRJZCA9PT0gdGhpcy5jdXJyZW50Q2hhdCk7XG4gICAgcXVldWVNZXNzYWdlcy5mb3JFYWNoKG1lc3NhZ2UgPT4ge1xuICAgICAgY29uc3QgbWVzc2FnZUVsZW1lbnQgPSB0aGlzLmNyZWF0ZU1lc3NhZ2VFbGVtZW50KG1lc3NhZ2UpO1xuICAgICAgbWVzc2FnZXNDb250YWluZXIuYXBwZW5kQ2hpbGQobWVzc2FnZUVsZW1lbnQpO1xuICAgIH0pO1xuXG4gICAgLy8g5Yid5qyh5riy5p+T5oiW5pmu6YCa5Yi35paw5rua5Yqo5Yiw5bqV6YOo77yb5Zyo5L+d55WZ5rua5Yqo5pe25LiN5pS55Y+Y5L2N572uXG4gICAgaWYgKCFwcmVzZXJ2ZVNjcm9sbCkge1xuICAgICAgdGhpcy5zY3JvbGxUb0JvdHRvbShtZXNzYWdlc0NvbnRhaW5lciBhcyBIVE1MRWxlbWVudCk7XG4gICAgfSBlbHNlIGlmIChvbGRTY3JvbGxIZWlnaHQgPiAwKSB7XG4gICAgICBjb25zdCBhZnRlckhlaWdodCA9IG1lc3NhZ2VzQ29udGFpbmVyLnNjcm9sbEhlaWdodDtcbiAgICAgIGlmIChhZnRlckhlaWdodCA9PT0gb2xkU2Nyb2xsSGVpZ2h0KSB7XG4gICAgICAgIG1lc3NhZ2VzQ29udGFpbmVyLnNjcm9sbFRvcCA9IG9sZFNjcm9sbFRvcDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyDku4XliY3mj5LmlrDlop7ml6fmtojmga/lr7nlupTnmoQgRE9N77yM5bm25YGa5rua5Yqo6KGl5YG/XG4gIHByaXZhdGUgcHJlcGVuZE9sZGVyTWVzc2FnZXMoY2hhdERhdGE6IENoYXREYXRhLCBwcmV2Q291bnQ6IG51bWJlciwgbmV4dENvdW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhdE1lc3NhZ2VzJykgYXMgSFRNTEVsZW1lbnQgfCBudWxsO1xuICAgIGlmICghY29udGFpbmVyKSByZXR1cm47XG5cbiAgICBjb25zdCB0b3RhbCA9IGNoYXREYXRhLm1lc3NhZ2VzLmxlbmd0aDtcbiAgICBjb25zdCBvbGRTdGFydCA9IE1hdGgubWF4KHRvdGFsIC0gcHJldkNvdW50LCAwKTtcbiAgICBjb25zdCBuZXdTdGFydCA9IE1hdGgubWF4KHRvdGFsIC0gbmV4dENvdW50LCAwKTtcbiAgICBpZiAobmV3U3RhcnQgPj0gb2xkU3RhcnQpIHJldHVybjtcblxuICAgIGNvbnN0IGJlZm9yZUhlaWdodCA9IGNvbnRhaW5lci5zY3JvbGxIZWlnaHQ7XG5cbiAgICBjb25zdCBzZW50aW5lbCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcubG9hZC1tb3JlLXNlbnRpbmVsJyk7XG4gICAgY29uc3QgYW5jaG9yID0gKHNlbnRpbmVsID8gc2VudGluZWwubmV4dFNpYmxpbmcgOiBjb250YWluZXIuZmlyc3RDaGlsZCkgYXMgQ2hpbGROb2RlIHwgbnVsbDtcblxuICAgIGZvciAobGV0IGkgPSBuZXdTdGFydDsgaSA8IG9sZFN0YXJ0OyBpKyspIHtcbiAgICAgIGNvbnN0IGVsID0gdGhpcy5jcmVhdGVNZXNzYWdlRWxlbWVudChjaGF0RGF0YS5tZXNzYWdlc1tpXSk7XG4gICAgICBpZiAoYW5jaG9yKSB7XG4gICAgICAgIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUoZWwsIGFuY2hvcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250YWluZXIuaW5zZXJ0QmVmb3JlKGVsLCBjb250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG5ld1N0YXJ0ID09PSAwICYmIHNlbnRpbmVsKSB7XG4gICAgICAoc2VudGluZWwgYXMgSFRNTEVsZW1lbnQpLnJlbW92ZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IGFmdGVySGVpZ2h0ID0gY29udGFpbmVyLnNjcm9sbEhlaWdodDtcbiAgICBjb250YWluZXIuc2Nyb2xsVG9wICs9IGFmdGVySGVpZ2h0IC0gYmVmb3JlSGVpZ2h0O1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT0g6aG26YOo5LiK5ruR5Yqg6L295pu05aSa77yI5YiG6aG15aKe6YeP77yJID09PT09PT09PT09PT09XG4gIHByaXZhdGUgaGFuZGxlVG9wU2Nyb2xsTG9hZE1vcmUoY2hhdElkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXRNZXNzYWdlcycpIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcbiAgICAgIGlmICghY29udGFpbmVyKSByZXR1cm47XG4gICAgICBjb25zdCBjaGF0RGF0YSA9IHRoaXMuY2hhdERhdGEuZ2V0KGNoYXRJZCk7XG4gICAgICBpZiAoIWNoYXREYXRhKSByZXR1cm47XG5cbiAgICAgIGNvbnN0IHRvdGFsID0gY2hhdERhdGEubWVzc2FnZXMubGVuZ3RoO1xuICAgICAgY29uc3QgcHJldiA9IE1hdGgubWluKHRoaXMudmlzaWJsZUNvdW50cy5nZXQoY2hhdElkKSA/PyB0aGlzLklOSVRJQUxfVklTSUJMRV9DT1VOVCwgdG90YWwpO1xuICAgICAgaWYgKHByZXYgPj0gdG90YWwpIHJldHVybjtcblxuICAgICAgY29uc3QgbmV4dCA9IE1hdGgubWluKHByZXYgKyB0aGlzLkxPQURfTU9SRV9TVEVQLCB0b3RhbCk7XG4gICAgICB0aGlzLnZpc2libGVDb3VudHMuc2V0KGNoYXRJZCwgbmV4dCk7XG5cbiAgICAgIHRoaXMucHJlcGVuZE9sZGVyTWVzc2FnZXMoY2hhdERhdGEsIHByZXYsIG5leHQpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS53YXJuKCdoYW5kbGVUb3BTY3JvbGxMb2FkTW9yZSDlpLHotKU6JywgZXJyKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGF0dGFjaFRvcFNjcm9sbExpc3RlbmVyKCk6IHZvaWQge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGF0TWVzc2FnZXMnKSBhcyBIVE1MRWxlbWVudCB8IG51bGw7XG4gICAgaWYgKCFjb250YWluZXIpIHJldHVybjtcblxuICAgIC8vIOmBv+WFjemHjeWkjee7keWumlxuICAgIHRoaXMuZGV0YWNoVG9wU2Nyb2xsTGlzdGVuZXIoKTtcblxuICAgIGNvbnN0IGhhbmRsZXIgPSAoZTogRXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IGVsID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBpZiAoZWwuc2Nyb2xsVG9wIDw9IDApIHtcbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgaWYgKG5vdyAtIHRoaXMubGFzdExvYWRNb3JlQXQgPCB0aGlzLkxPQURfTU9SRV9USFJPVFRMRV9NUykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3RMb2FkTW9yZUF0ID0gbm93O1xuICAgICAgICB0aGlzLmhhbmRsZVRvcFNjcm9sbExvYWRNb3JlKHRoaXMuY3VycmVudENoYXQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgaGFuZGxlcik7XG4gICAgdGhpcy50b3BTY3JvbGxIYW5kbGVyID0gaGFuZGxlcjtcbiAgfVxuXG4gIHByaXZhdGUgZGV0YWNoVG9wU2Nyb2xsTGlzdGVuZXIoKTogdm9pZCB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXRNZXNzYWdlcycpIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcbiAgICBpZiAoY29udGFpbmVyICYmIHRoaXMudG9wU2Nyb2xsSGFuZGxlcikge1xuICAgICAgY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMudG9wU2Nyb2xsSGFuZGxlcik7XG4gICAgfVxuICAgIHRoaXMudG9wU2Nyb2xsSGFuZGxlciA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICog5re75Yqg5raI5oGv5Yiw6IGK5aSp5pWw5o2uXG4gICAqL1xuICBwcml2YXRlIGFkZE1lc3NhZ2VUb0NoYXREYXRhKG1lc3NhZ2U6IENoYXRNZXNzYWdlKTogdm9pZCB7XG4gICAgY29uc3QgY2hhdERhdGEgPSB0aGlzLmNoYXREYXRhLmdldChtZXNzYWdlLmNoYXRJZCk7XG4gICAgaWYgKGNoYXREYXRhKSB7XG4gICAgICBjaGF0RGF0YS5tZXNzYWdlcy5wdXNoKG1lc3NhZ2UpO1xuICAgICAgY2hhdERhdGEubGFzdE1lc3NhZ2UgPSB0aGlzLm1lc3NhZ2VQYXJzZXIuZm9ybWF0TGFzdE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICBjaGF0RGF0YS50aW1lc3RhbXAgPSBtZXNzYWdlLnRpbWVzdGFtcDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8g5aaC5p6c6IGK5aSp5pWw5o2u5LiN5a2Y5Zyo77yM5Yib5bu65paw55qEXG4gICAgICBjb25zdCBuZXdDaGF0RGF0YTogQ2hhdERhdGEgPSB7XG4gICAgICAgIGNoYXRJZDogbWVzc2FnZS5jaGF0SWQsXG4gICAgICAgIGNoYXROYW1lOiBtZXNzYWdlLmNoYXRJZCxcbiAgICAgICAgYXZhdGFyOiBtZXNzYWdlLmF2YXRhcixcbiAgICAgICAgbWVzc2FnZXM6IFttZXNzYWdlXSxcbiAgICAgICAgbGFzdE1lc3NhZ2U6IHRoaXMubWVzc2FnZVBhcnNlci5mb3JtYXRMYXN0TWVzc2FnZShtZXNzYWdlKSxcbiAgICAgICAgdGltZXN0YW1wOiBtZXNzYWdlLnRpbWVzdGFtcCxcbiAgICAgICAgdHlwZTogbWVzc2FnZS50eXBlLFxuICAgICAgfTtcbiAgICAgIHRoaXMuY2hhdERhdGEuc2V0KG1lc3NhZ2UuY2hhdElkLCBuZXdDaGF0RGF0YSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOa3u+WKoOWNleadoeaWsOa2iOaBr+WIsOeVjOmdou+8iOS4jemHjeaWsOa4suafk+aVtOS4quWIl+ihqO+8iVxuICAgKi9cbiAgcHJpdmF0ZSBhZGROZXdNZXNzYWdlVG9JbnRlcmZhY2UobWVzc2FnZTogQ2hhdE1lc3NhZ2UpOiB2b2lkIHtcbiAgICBjb25zdCBtZXNzYWdlc0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGF0TWVzc2FnZXMnKTtcbiAgICBpZiAoIW1lc3NhZ2VzQ29udGFpbmVyKSByZXR1cm47XG5cbiAgICBjb25zdCBtZXNzYWdlRWxlbWVudCA9IHRoaXMuY3JlYXRlTWVzc2FnZUVsZW1lbnQobWVzc2FnZSk7XG4gICAgbWVzc2FnZXNDb250YWluZXIuYXBwZW5kQ2hpbGQobWVzc2FnZUVsZW1lbnQpO1xuXG4gICAgLy8g56Gu5L+dRE9N5a6M5YWo5o+S5YWl5ZCO5YaN57uR5a6a5LqL5Lu277yI54m55Yir5piv6K+t6Z+z5raI5oGv77yJXG4gICAgLy8g5L2/55SoIHJlcXVlc3RBbmltYXRpb25GcmFtZSDnoa7kv51ET03muLLmn5PlrozmiJBcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgdGhpcy5lbnN1cmVWb2ljZU1lc3NhZ2VJbnRlcmFjdGlvbnMobWVzc2FnZUVsZW1lbnQsIG1lc3NhZ2UpO1xuICAgIH0pO1xuXG4gICAgLy8g5rua5Yqo5Yiw5bqV6YOoXG4gICAgdGhpcy5zY3JvbGxUb0JvdHRvbShtZXNzYWdlc0NvbnRhaW5lcik7XG4gIH1cblxuICAvKipcbiAgICog5Yib5bu65raI5oGv5YWD57SgXG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZU1lc3NhZ2VFbGVtZW50KG1lc3NhZ2U6IENoYXRNZXNzYWdlKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IG1lc3NhZ2VEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25zdCBpc1VzZXJNZXNzYWdlID0gdGhpcy5pc1VzZXJTZW5kZXIobWVzc2FnZS5zZW5kZXIpO1xuICAgIGNvbnN0IGlzR3JvdXBNZXNzYWdlID0gbWVzc2FnZS50eXBlID09PSAnRyc7XG5cbiAgICAvLyDorr7nva7mtojmga/ln7rnoYDmoLflvI8gLSDljLnphY3ljp/niYjnu5PmnoRcbiAgICBtZXNzYWdlRGl2LmNsYXNzTmFtZSA9IGBtZXNzYWdlICR7aXNVc2VyTWVzc2FnZSA/ICdzZW50JyA6ICdyZWNlaXZlZCd9JHtpc0dyb3VwTWVzc2FnZSA/ICcgZ3JvdXAtbWVzc2FnZScgOiAnJ31gO1xuICAgIG1lc3NhZ2VEaXYuZGF0YXNldC5tZXNzYWdlSWQgPSBtZXNzYWdlLmlkO1xuXG4gICAgLy8g5Yib5bu65aS05YOPIC0g5Yy56YWN5Y6f54mI57uT5p6EXG4gICAgY29uc3QgYXZhdGFyID0gdGhpcy5jcmVhdGVBdmF0YXIobWVzc2FnZSwgaXNVc2VyTWVzc2FnZSk7XG4gICAgbWVzc2FnZURpdi5hcHBlbmRDaGlsZChhdmF0YXIpO1xuXG4gICAgLy8g5Yib5bu65raI5oGv5YyF6KOF5ZmoIC0g5Yy56YWN5Y6f54mI57uT5p6EXG4gICAgY29uc3QgbWVzc2FnZVdyYXBwZXIgPSB0aGlzLmNyZWF0ZU1lc3NhZ2VXcmFwcGVyKG1lc3NhZ2UsIGlzR3JvdXBNZXNzYWdlKTtcbiAgICBtZXNzYWdlRGl2LmFwcGVuZENoaWxkKG1lc3NhZ2VXcmFwcGVyKTtcblxuICAgIC8vIOa3u+WKoOWKqOeUu+aViOaenFxuICAgIHRoaXMuYWRkTWVzc2FnZUFuaW1hdGlvbihtZXNzYWdlRGl2KTtcblxuICAgIC8vIOa3u+WKoOS6pOS6kuS6i+S7tlxuICAgIHRoaXMuYWRkTWVzc2FnZUludGVyYWN0aW9ucyhtZXNzYWdlRGl2LCBtZXNzYWdlKTtcblxuICAgIHJldHVybiBtZXNzYWdlRGl2O1xuICB9XG5cbiAgLyoqXG4gICAqIOWIm+W7uua2iOaBr+WGheWuuVxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVNZXNzYWdlQ29udGVudChtZXNzYWdlOiBDaGF0TWVzc2FnZSk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBjb250ZW50RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29udGVudERpdi5jbGFzc05hbWUgPSAnbWVzc2FnZS1jb250ZW50JztcblxuICAgIC8vIOagueaNrua2iOaBr+exu+Wei+a4suafk+S4jeWQjOWGheWuuVxuICAgIHN3aXRjaCAobWVzc2FnZS5tZXNzYWdlVHlwZSkge1xuICAgICAgY2FzZSAndGV4dCc6XG4gICAgICAgIHRoaXMucmVuZGVyVGV4dE1lc3NhZ2UoY29udGVudERpdiwgbWVzc2FnZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnaW1hZ2UnOlxuICAgICAgICB0aGlzLnJlbmRlckltYWdlTWVzc2FnZShjb250ZW50RGl2LCBtZXNzYWdlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd2b2ljZSc6XG4gICAgICAgIHRoaXMucmVuZGVyVm9pY2VNZXNzYWdlKGNvbnRlbnREaXYsIG1lc3NhZ2UpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3N0aWNrZXInOlxuICAgICAgICB0aGlzLnJlbmRlclN0aWNrZXJNZXNzYWdlKGNvbnRlbnREaXYsIG1lc3NhZ2UpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2xvY2F0aW9uJzpcbiAgICAgICAgdGhpcy5yZW5kZXJMb2NhdGlvbk1lc3NhZ2UoY29udGVudERpdiwgbWVzc2FnZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndHJhbnNmZXInOlxuICAgICAgICB0aGlzLnJlbmRlclRyYW5zZmVyTWVzc2FnZShjb250ZW50RGl2LCBtZXNzYWdlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aGlzLnJlbmRlclRleHRNZXNzYWdlKGNvbnRlbnREaXYsIG1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHJldHVybiBjb250ZW50RGl2O1xuICB9XG5cbiAgLyoqXG4gICAqIOWIm+W7uuWktOWDj+WFg+e0oCAtIOWMuemFjeWOn+eJiOe7k+aehFxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVBdmF0YXIobWVzc2FnZTogQ2hhdE1lc3NhZ2UsIGlzVXNlck1lc3NhZ2U6IGJvb2xlYW4pOiBIVE1MRWxlbWVudCB7XG4gICAgaWYgKGlzVXNlck1lc3NhZ2UpIHtcbiAgICAgIC8vIOeUqOaIt+WktOWDjyAtIOWMuemFjeWOn+eJiHVzZXLmtojmga8uaHRtbOe7k+aehO+8jOa3u+WKoGF2YXRhci1ob3Zlcuexu1xuICAgICAgY29uc3QgYXZhdGFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBhdmF0YXIuY2xhc3NOYW1lID0gJ3VzZXJfYXZhdGFyIGF2YXRhciBhdmF0YXItaG92ZXInO1xuXG4gICAgICAvLyDkvb/nlKjnu5/kuIDnmoTlpLTlg4/ojrflj5bmjqXlj6PvvIjlkIzmraXniYjmnKzvvIlcbiAgICAgIGNvbnN0IGF2YXRhclVybCA9IGdldFVuaWZpZWRVc2VyQXZhdGFyU3luYygpO1xuICAgICAgYXZhdGFyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHthdmF0YXJVcmx9KWA7XG5cbiAgICAgIC8vIOazqOWGjOWIsOWktOWDj+WQjOatpeezu+e7n1xuICAgICAgdGhpcy5hdmF0YXJNaXhpbi5yZWdpc3RlcihhdmF0YXIsICdiYWNrZ3JvdW5kJyk7XG5cbiAgICAgIHJldHVybiBhdmF0YXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIOWvueaWueWktOWDjyAtIOWMuemFjeWOn+eJiOWvueaWuea2iOaBry5odG1s57uT5p6EXG4gICAgICBjb25zdCBhdmF0YXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgIGF2YXRhci5jbGFzc05hbWUgPSAnYXZhdGFyJztcbiAgICAgIGF2YXRhci5zcmMgPSB0aGlzLm1lc3NhZ2VQYXJzZXIucHJvY2Vzc0ltYWdlVXJsKG1lc3NhZ2UuYXZhdGFyKSB8fCAnaHR0cHM6Ly9maWxlcy5jYXRib3gubW9lL3U4Y2N5NS5qcGcnO1xuICAgICAgYXZhdGFyLmFsdCA9IG1lc3NhZ2Uuc2VuZGVyO1xuXG4gICAgICByZXR1cm4gYXZhdGFyO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDliJvlu7rmtojmga/ljIXoo4XlmaggLSDljLnphY3ljp/niYjnu5PmnoRcbiAgICovXG4gIHByaXZhdGUgY3JlYXRlTWVzc2FnZVdyYXBwZXIobWVzc2FnZTogQ2hhdE1lc3NhZ2UsIGlzR3JvdXBNZXNzYWdlOiBib29sZWFuID0gZmFsc2UpOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHdyYXBwZXIuY2xhc3NOYW1lID0gJ21lc3NhZ2Utd3JhcHBlcic7XG4gICAgd3JhcHBlci5kYXRhc2V0Lm1lc3NhZ2VJZCA9IG1lc3NhZ2UuaWQ7XG5cbiAgICAvLyDlpoLmnpzmmK/nvqTogYrmtojmga/kuJTkuI3mmK/nlKjmiLfoh6rlt7Hlj5HpgIHnmoTvvIzmmL7npLrlj5HpgIHogIXlkI3np7BcbiAgICBpZiAoaXNHcm91cE1lc3NhZ2UgJiYgIXRoaXMuaXNVc2VyU2VuZGVyKG1lc3NhZ2Uuc2VuZGVyKSkge1xuICAgICAgY29uc3Qgc2VuZGVyTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgc2VuZGVyTmFtZS5jbGFzc05hbWUgPSAnbWVzc2FnZS1zZW5kZXInO1xuICAgICAgc2VuZGVyTmFtZS50ZXh0Q29udGVudCA9IChtZXNzYWdlIGFzIGFueSkuc2VuZGVyRGlzcGxheU5hbWUgfHwgbWVzc2FnZS5zZW5kZXI7XG4gICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHNlbmRlck5hbWUpO1xuICAgIH1cblxuICAgIC8vIOWIm+W7uua2iOaBr+WGheWuuVxuICAgIGNvbnN0IG1lc3NhZ2VDb250ZW50ID0gdGhpcy5jcmVhdGVNZXNzYWdlQ29udGVudChtZXNzYWdlKTtcbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKG1lc3NhZ2VDb250ZW50KTtcblxuICAgIC8vIOa3u+WKoOaXtumXtOaIsyAtIOWMuemFjeWOn+eJiOe7k+aehFxuICAgIGNvbnN0IHRpbWVzdGFtcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRpbWVzdGFtcC5jbGFzc05hbWUgPSAnbWVzc2FnZS10aW1lJztcbiAgICB0aW1lc3RhbXAudGV4dENvbnRlbnQgPSBtZXNzYWdlLnRpbWVzdGFtcDtcbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHRpbWVzdGFtcCk7XG5cbiAgICByZXR1cm4gd3JhcHBlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiDmuLLmn5PmlofmnKzmtojmga9cbiAgICovXG4gIHByaXZhdGUgcmVuZGVyVGV4dE1lc3NhZ2UoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgbWVzc2FnZTogQ2hhdE1lc3NhZ2UpOiB2b2lkIHtcbiAgICBjb25zdCB0ZXh0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICB0ZXh0RWxlbWVudC50ZXh0Q29udGVudCA9IG1lc3NhZ2UuY29udGVudDtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGV4dEVsZW1lbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIOa4suafk+acrOWcsOaWh+S7tuWbvueJh1xuICAgKiBAcGFyYW0gY29udGFpbmVyIOWuueWZqOWFg+e0oFxuICAgKiBAcGFyYW0gZmlsZSDmlofku7blr7nosaFcbiAgICogQHBhcmFtIGNvbnRlbnQg5raI5oGv5YaF5a65XG4gICAqL1xuICBwcml2YXRlIHJlbmRlckZpbGVJbWFnZShjb250YWluZXI6IEhUTUxFbGVtZW50LCBmaWxlOiBGaWxlLCBjb250ZW50OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAvLyDliJvlu7rmlofku7ZVUkznlKjkuo7mmL7npLpcbiAgICBjb25zdCBmaWxlVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcblxuICAgIC8vIOWIm+W7uuWbvueJh+WFg+e0oFxuICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGltZy5zcmMgPSBmaWxlVXJsO1xuICAgIGltZy5jbGFzc05hbWUgPSAnbWVzc2FnZS1pbWFnZSc7XG4gICAgaW1nLmFsdCA9IGZpbGUubmFtZTtcbiAgICBpbWcubG9hZGluZyA9ICdsYXp5JztcblxuICAgIC8vIOWbvueJh+WKoOi9veWujOaIkOWQjua4heeQhlVSTOWvueixoVxuICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGZpbGVVcmwpO1xuICAgIH07XG5cbiAgICAvLyDlm77niYfliqDovb3plJnor6/lpITnkIZcbiAgICBpbWcub25lcnJvciA9ICgpID0+IHtcbiAgICAgIGltZy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgIGVycm9yVGV4dC50ZXh0Q29udGVudCA9ICdb5Zu+54mH5Yqg6L295aSx6LSlXSc7XG4gICAgICBlcnJvclRleHQuY2xhc3NOYW1lID0gJ2Vycm9yLXRleHQnO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGVycm9yVGV4dCk7XG4gICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGZpbGVVcmwpO1xuICAgIH07XG5cbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaW1nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmuLLmn5Plm77niYfmtojmga9cbiAgICovXG4gIHByaXZhdGUgcmVuZGVySW1hZ2VNZXNzYWdlKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIG1lc3NhZ2U6IENoYXRNZXNzYWdlKTogdm9pZCB7XG4gICAgLy8g6Z2e4oCc55So5oi35pys5Lq64oCd55qEIGltYWdlIOS4gOW+i+a4suafk+S4uuKAnOmZhOS7tuWNoeeJh+KAnVxuICAgIGlmICghdGhpcy5pc1VzZXJTZW5kZXIobWVzc2FnZS5zZW5kZXIpKSB7XG4gICAgICB0aGlzLnJlbmRlckF0dGFjaG1lbnRNZXNzYWdlKGNvbnRhaW5lciwgKG1lc3NhZ2UuY29udGVudCB8fCAnJykudHJpbSgpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyDkvJjlhYjlpITnkIbmnKzlnLDmlofku7bkuIrkvKBcbiAgICBpZiAobWVzc2FnZS5kYXRhPy51cGxvYWRlZEZpbGUpIHtcbiAgICAgIHRoaXMucmVuZGVyRmlsZUltYWdlKGNvbnRhaW5lciwgbWVzc2FnZS5kYXRhLnVwbG9hZGVkRmlsZSwgbWVzc2FnZS5jb250ZW50KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyDlpITnkIZiYXNlNjTlm77niYdcbiAgICBpZiAobWVzc2FnZS5kYXRhPy5iYXNlNjRJbWFnZSkge1xuICAgICAgY29uc3QgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICBpbWcuc3JjID0gbWVzc2FnZS5kYXRhLmJhc2U2NEltYWdlO1xuICAgICAgaW1nLmNsYXNzTmFtZSA9ICdtZXNzYWdlLWltYWdlJztcbiAgICAgIGltZy5hbHQgPSBtZXNzYWdlLmNvbnRlbnQgfHwgJ+WbvueJhyc7XG4gICAgICBpbWcubG9hZGluZyA9ICdsYXp5JztcblxuICAgICAgLy8g5Zu+54mH5Yqg6L296ZSZ6K+v5aSE55CGXG4gICAgICBpbWcub25lcnJvciA9ICgpID0+IHtcbiAgICAgICAgaW1nLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICBjb25zdCBlcnJvclRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgIGVycm9yVGV4dC50ZXh0Q29udGVudCA9ICdb5Zu+54mH5Yqg6L295aSx6LSlXSc7XG4gICAgICAgIGVycm9yVGV4dC5jbGFzc05hbWUgPSAnZXJyb3ItdGV4dCc7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChlcnJvclRleHQpO1xuICAgICAgfTtcblxuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGltZyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8g5aSE55CGVVJM5Zu+54mHXG4gICAgaWYgKG1lc3NhZ2UuZGF0YT8uaW1hZ2VVcmwpIHtcbiAgICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgaW1nLnNyYyA9IG1lc3NhZ2UuZGF0YS5pbWFnZVVybDtcbiAgICAgIGltZy5jbGFzc05hbWUgPSAnbWVzc2FnZS1pbWFnZSc7XG4gICAgICBpbWcuYWx0ID0gbWVzc2FnZS5jb250ZW50IHx8ICflm77niYcnO1xuICAgICAgaW1nLmxvYWRpbmcgPSAnbGF6eSc7XG5cbiAgICAgIC8vIOWbvueJh+WKoOi9vemUmeivr+WkhOeQhlxuICAgICAgaW1nLm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgIGltZy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBlcnJvclRleHQudGV4dENvbnRlbnQgPSAnW+WbvueJh+WKoOi9veWksei0pV0nO1xuICAgICAgICBlcnJvclRleHQuY2xhc3NOYW1lID0gJ2Vycm9yLXRleHQnO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZXJyb3JUZXh0KTtcbiAgICAgIH07XG5cbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpbWcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIOajgOa1i+aYr+WQpuS4uue7hOWQiOagvOW8j++8iOWbvueJh1VSTCArIOaPj+i/sO+8iSAtIOWFvOWuueaXp+aVsOaNrlxuICAgIGNvbnN0IGNvbWJpbmVkUmVnZXggPSAvXuWbvueJh1VSTO+8miguKj8pXFxu5Zu+54mH5o+P6L+w77yaKC4qPykkLztcbiAgICBjb25zdCBjb21iaW5lZE1hdGNoID0gbWVzc2FnZS5jb250ZW50Lm1hdGNoKGNvbWJpbmVkUmVnZXgpO1xuXG4gICAgaWYgKGNvbWJpbmVkTWF0Y2gpIHtcbiAgICAgIC8vIOa4suafk+e7hOWQiOagvOW8j++8muWPquaYvuekuuWbvueJh++8jOS4jeaYvuekuuaPj+i/sFxuICAgICAgY29uc3QgdXJsID0gY29tYmluZWRNYXRjaFsxXS50cmltKCk7XG4gICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGNvbWJpbmVkTWF0Y2hbMl0udHJpbSgpO1xuXG4gICAgICAvLyDliJvlu7rlm77niYflhYPntKBcbiAgICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgaW1nLnNyYyA9IHRoaXMubWVzc2FnZVBhcnNlci5wcm9jZXNzSW1hZ2VVcmwodXJsKTsgLy8g5L2/55SocHJvY2Vzc0ltYWdlVXJs5aSE55CGVVJMXG4gICAgICBpbWcuY2xhc3NOYW1lID0gJ21lc3NhZ2UtaW1hZ2UnO1xuICAgICAgaW1nLmFsdCA9IGRlc2NyaXB0aW9uOyAvLyDmj4/ov7DkvZzkuLphbHTlsZ7mgKfkv53nlZnvvIzkvYbkuI3lnKjnlYzpnaLmmL7npLpcbiAgICAgIGltZy5sb2FkaW5nID0gJ2xhenknO1xuXG4gICAgICAvLyDlm77niYfliqDovb3plJnor6/lpITnkIZcbiAgICAgIGltZy5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICBpbWcuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgZXJyb3JUZXh0LnRleHRDb250ZW50ID0gJ1vlm77niYfliqDovb3lpLHotKVdJztcbiAgICAgICAgZXJyb3JUZXh0LmNsYXNzTmFtZSA9ICdlcnJvci10ZXh0JztcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGVycm9yVGV4dCk7XG4gICAgICB9O1xuXG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaW1nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyDigJzilZLilZDilZDilZDilZDilZDigKbilZjilZDilZDilZDilZDilZDigJ0g5YW85a6577ya6K+G5Yir5Li66ZmE5Lu25Y2h54mH77yI5pen5qW85bGC77yJXG4gICAgY29uc3QgYXR0YWNobWVudFJlZ2V4ID0gL+KVkuKVkOKVkOKVkOKVkOKVkFxccyooLio/KVxccyrilZjilZDilZDilZDilZDilZAvO1xuICAgIGNvbnN0IG1hdGNoID0gbWVzc2FnZS5jb250ZW50Lm1hdGNoKGF0dGFjaG1lbnRSZWdleCk7XG5cbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgIHRoaXMucmVuZGVyQXR0YWNobWVudE1lc3NhZ2UoY29udGFpbmVyLCBtYXRjaFsxXSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gVXNlciDlm77lg4/lhZzlupXvvJrml6AgZGF0YS4qIOaXtuWwneivlSBVSSDnvJPlrZhcbiAgICBjb25zdCBoYXNEYXRhID1cbiAgICAgICEhKG1lc3NhZ2UuZGF0YT8udXBsb2FkZWRGaWxlIHx8IG1lc3NhZ2UuZGF0YT8uYmFzZTY0SW1hZ2UgfHwgbWVzc2FnZS5kYXRhPy5pbWFnZVVybCk7XG5cbiAgICBpZiAoIWhhc0RhdGEpIHtcbiAgICAgIGNvbnN0IGNhY2hlZCA9IHRoaXMuZ2V0Q2FjaGVkVWlJbWFnZShtZXNzYWdlKTtcbiAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgLy8g5bCG5ZG95Lit57yT5a2Y55qE6aKE6KeI5YaZ5YWl5YaF5a2Y77yM5L6/5LqO5ZCO57ut6YC76L6R57uf5LiA5aSE55CGXG4gICAgICAgIG1lc3NhZ2UuZGF0YSA9IHsgLi4uKG1lc3NhZ2UuZGF0YSB8fCB7fSksIGltYWdlVXJsOiBjYWNoZWQgfTtcblxuICAgICAgICBjb25zdCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgaW1nLnNyYyA9IGNhY2hlZDtcbiAgICAgICAgaW1nLmNsYXNzTmFtZSA9ICdtZXNzYWdlLWltYWdlJztcbiAgICAgICAgaW1nLmFsdCA9IG1lc3NhZ2UuY29udGVudCB8fCAn5Zu+54mHJztcbiAgICAgICAgaW1nLmxvYWRpbmcgPSAnbGF6eSc7XG5cbiAgICAgICAgaW1nLm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgaW1nLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICBlcnJvclRleHQudGV4dENvbnRlbnQgPSAnW+WbvueJh+WKoOi9veWksei0pV0nO1xuICAgICAgICAgIGVycm9yVGV4dC5jbGFzc05hbWUgPSAnZXJyb3ItdGV4dCc7XG4gICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGVycm9yVGV4dCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGltZyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDigJzmj4/ov7Dml6npgIDliIbmlK/igJ3vvJrml6DmlbDmja7kuJQgY29udGVudCDml6LpnZ4gaHR0cChzKS9kYXRhOiDkuZ/kuI3lg48gbmFtZS5leHQg4oaSIOmZhOS7tuWNoeeJh1xuICAgIGlmICghaGFzRGF0YSkge1xuICAgICAgY29uc3QgYyA9IChtZXNzYWdlLmNvbnRlbnQgfHwgJycpLnRyaW0oKTtcbiAgICAgIGNvbnN0IGlzSHR0cCA9IGMuc3RhcnRzV2l0aCgnaHR0cDovLycpIHx8IGMuc3RhcnRzV2l0aCgnaHR0cHM6Ly8nKTtcbiAgICAgIGNvbnN0IGlzRGF0YSA9IGMuc3RhcnRzV2l0aCgnZGF0YTonKTtcbiAgICAgIGNvbnN0IGxvb2tzTGlrZUZpbGVuYW1lID0gLyhbYS16QS1aMC05Ll8tXStcXC5bYS16QS1aMC05XSspJC8udGVzdChjKTtcbiAgICAgIGlmICghaXNIdHRwICYmICFpc0RhdGEgJiYgIWxvb2tzTGlrZUZpbGVuYW1lKSB7XG4gICAgICAgIHRoaXMucmVuZGVyQXR0YWNobWVudE1lc3NhZ2UoY29udGFpbmVyLCBjKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIOm7mOiupOaKiiBjb250ZW50IOW9kyBVUkwg5oiW5paH5Lu25ZCN5riy5p+T5Li655yf5a6e5Zu+54mHXG4gICAgY29uc3QgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaW1nLnNyYyA9IHRoaXMubWVzc2FnZVBhcnNlci5wcm9jZXNzSW1hZ2VVcmwobWVzc2FnZS5jb250ZW50KTtcbiAgICBpbWcuY2xhc3NOYW1lID0gJ21lc3NhZ2UtaW1hZ2UnO1xuICAgIGltZy5hbHQgPSAn5Zu+54mH5raI5oGvJztcbiAgICBpbWcubG9hZGluZyA9ICdsYXp5JztcblxuICAgIC8vIOWbvueJh+WKoOi9vemUmeivr+WkhOeQhlxuICAgIGltZy5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgaW1nLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgY29uc3QgZXJyb3JUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgZXJyb3JUZXh0LnRleHRDb250ZW50ID0gJ1vlm77niYfliqDovb3lpLHotKVdJztcbiAgICAgIGVycm9yVGV4dC5jbGFzc05hbWUgPSAnZXJyb3ItdGV4dCc7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZXJyb3JUZXh0KTtcbiAgICB9O1xuXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGltZyk7XG4gIH1cbiAgLyoqXG4gICAqIOa4suafk+mZhOS7tua2iOaBryAtIOS9v+eUqOe6r+iJsuWbvueJh+agt+W8j1xuICAgKi9cbiAgcHJpdmF0ZSByZW5kZXJBdHRhY2htZW50TWVzc2FnZShjb250YWluZXI6IEhUTUxFbGVtZW50LCBkZXNjcmlwdGlvbjogc3RyaW5nKTogdm9pZCB7XG4gICAgLy8g5Yib5bu66ZqP5py66IOM5pmv5Zu+54mH5pWw57uEXG4gICAgY29uc3QgaW1hZ2VzID0gW1xuICAgICAgJ2h0dHBzOi8vZmlsZXMuY2F0Ym94Lm1vZS8wZzNrcXUuanBnJyxcbiAgICAgICdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvZDViN2s2LmpwZycsXG4gICAgICAnaHR0cHM6Ly9maWxlcy5jYXRib3gubW9lLzB5cmhoNi5qcGcnLFxuICAgICAgJ2h0dHBzOi8vZmlsZXMuY2F0Ym94Lm1vZS84bWp2ZGcuanBnJyxcbiAgICAgICdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvZnZpZGFzLmpwZycsXG4gICAgICAnaHR0cHM6Ly9maWxlcy5jYXRib3gubW9lL3E2c28yaS5qcGcnLFxuICAgICAgJ2h0dHBzOi8vZmlsZXMuY2F0Ym94Lm1vZS81YTk2Y3AuanBnJyxcbiAgICAgICdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvMG1wNmgwLmpwZycsXG4gICAgICAnaHR0cHM6Ly9maWxlcy5jYXRib3gubW9lL2VwY24wMy5qcGcnLFxuICAgICAgJ2h0dHBzOi8vZmlsZXMuY2F0Ym94Lm1vZS83anpkcDcuanBnJyxcbiAgICAgICdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvanJtdTZ3LmpwZycsXG4gICAgICAnaHR0cHM6Ly9maWxlcy5jYXRib3gubW9lL2MwYndobi5qcGcnLFxuICAgICAgJ2h0dHBzOi8vZmlsZXMuY2F0Ym94Lm1vZS8wYmx4bWUuanBnJyxcbiAgICAgICdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvcWljb2JyLmpwZycsXG4gICAgICAnaHR0cHM6Ly9maWxlcy5jYXRib3gubW9lL245NHp0dS5qcGcnLFxuICAgIF07XG5cbiAgICAvLyDpmo/mnLrpgInmi6nog4zmma/lm77niYdcbiAgICBjb25zdCByYW5kb21JbWFnZSA9IGltYWdlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBpbWFnZXMubGVuZ3RoKV07XG5cbiAgICAvLyDliJvlu7rpmYTku7blrrnlmahcbiAgICBjb25zdCBhdHRhY2htZW50Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYXR0YWNobWVudENvbnRhaW5lci5jbGFzc05hbWUgPSAncmFuZG9tLWltYWdlLWNvbnRhaW5lciBkeW5hbWljLWJnJztcbiAgICAvLyDliqjmgIHorr7nva7og4zmma/lm77niYdcbiAgICBhdHRhY2htZW50Q29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJyR7cmFuZG9tSW1hZ2V9JylgO1xuXG4gICAgLy8g5Yib5bu66K+m5oOF5YWD57SgXG4gICAgY29uc3QgZGV0YWlscyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RldGFpbHMnKTtcblxuICAgIC8vIOWIm+W7uuaRmOimgeWFg+e0oFxuICAgIGNvbnN0IHN1bW1hcnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdW1tYXJ5Jyk7XG5cbiAgICAvLyDliJvlu7rlhoXlrrnlrrnlmahcbiAgICBjb25zdCBjb250ZW50RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29udGVudERpdi5jbGFzc05hbWUgPSAnYXR0YWNobWVudC1jb250ZW50JztcblxuICAgIC8vIOWIm+W7uuaWh+acrOWuueWZqFxuICAgIGNvbnN0IHRleHREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0ZXh0RGl2LmNsYXNzTmFtZSA9ICdhdHRhY2htZW50LXRleHQnO1xuXG4gICAgLy8g5Yib5bu65paH5pys5q616JC9XG4gICAgY29uc3QgdGV4dFAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgdGV4dFAudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcblxuICAgIC8vIOe7hOijhee7k+aehFxuICAgIHRleHREaXYuYXBwZW5kQ2hpbGQodGV4dFApO1xuICAgIGNvbnRlbnREaXYuYXBwZW5kQ2hpbGQodGV4dERpdik7XG4gICAgZGV0YWlscy5hcHBlbmRDaGlsZChzdW1tYXJ5KTtcbiAgICBkZXRhaWxzLmFwcGVuZENoaWxkKGNvbnRlbnREaXYpO1xuICAgIGF0dGFjaG1lbnRDb250YWluZXIuYXBwZW5kQ2hpbGQoZGV0YWlscyk7XG5cbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYXR0YWNobWVudENvbnRhaW5lcik7XG4gIH1cblxuICAvKipcbiAgICog5riy5p+T6K+t6Z+z5raI5oGvXG4gICAqL1xuICBwcml2YXRlIHJlbmRlclZvaWNlTWVzc2FnZShjb250YWluZXI6IEhUTUxFbGVtZW50LCBtZXNzYWdlOiBDaGF0TWVzc2FnZSk6IHZvaWQge1xuICAgIC8vIOino+aekOivremfs+WGheWuueWSjOaXtumVv1xuICAgIGNvbnN0IHBhcnRzID0gbWVzc2FnZS5jb250ZW50LnNwbGl0KCd8Jyk7XG4gICAgY29uc3Qgdm9pY2VDb250ZW50ID0gcGFydHNbMF0gfHwgJ+ivremfs+a2iOaBryc7IC8vIOWunumZheivremfs+WGheWuuVxuICAgIGNvbnN0IGR1cmF0aW9uID0gcGFydHNbMV0gfHwgJzAnOyAvLyDor63pn7Pml7bplb/vvIjnp5LvvIlcblxuICAgIGNvbnN0IHZvaWNlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdm9pY2VEaXYuY2xhc3NOYW1lID0gJ3ZvaWNlLW1lc3NhZ2UnO1xuXG4gICAgLy8g6K+t6Z+z5Zu+5qCHIC0g5L2/55SoSFRNTOaooeadv++8jOWmguaenOaooeadv+S4jeWtmOWcqOWImeWIm+W7uum7mOiupOWbvuagh1xuICAgIGNvbnN0IHZvaWNlSWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHZvaWNlSWNvbi5jbGFzc05hbWUgPSAndm9pY2UtaWNvbic7XG4gICAgY29uc3Qgdm9pY2VJY29uVGVtcGxhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndm9pY2VJY29uVGVtcGxhdGUnKTtcblxuICAgIGlmICh2b2ljZUljb25UZW1wbGF0ZSkge1xuICAgICAgdm9pY2VJY29uLmlubmVySFRNTCA9IHZvaWNlSWNvblRlbXBsYXRlLmlubmVySFRNTDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8g5aaC5p6c5qih5p2/5LiN5a2Y5Zyo77yM5Yib5bu66buY6K6k55qE5Zu+5qCH57uT5p6EXG4gICAgICBjb25zb2xlLndhcm4oJ+ivremfs+Wbvuagh+aooeadv+acquaJvuWIsO+8jOS9v+eUqOm7mOiupOWbvuaghycpO1xuICAgICAgdm9pY2VJY29uLmlubmVySFRNTCA9IGBcbiAgICAgICAgPHN2ZyBjbGFzcz1cIm1pYy1pY29uXCIgd2lkdGg9XCIyMFwiIGhlaWdodD1cIjIwXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICA8cGF0aCBkPVwiTTEyLDJBMywzIDAgMCwxIDE1LDVWMTFBMywzIDAgMCwxIDEyLDE0QTMsMyAwIDAsMSA5LDExVjVBMywzIDAgMCwxIDEyLDJNMTksMTFDMTksMTQuNTMgMTYuMzksMTcuNDQgMTMsMTcuOTNWMjFIMTFWMTcuOTNDNy42MSwxNy40NCA1LDE0LjUzIDUsMTFIN0E1LDUgMCAwLDAgMTIsMTZBNSw1IDAgMCwwIDE3LDExSDE5WlwiIC8+XG4gICAgICAgIDwvc3ZnPlxuICAgICAgICA8c3ZnIGNsYXNzPVwicGF1c2UtaWNvblwiIHdpZHRoPVwiMjBcIiBoZWlnaHQ9XCIyMFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lXCI+XG4gICAgICAgICAgPHBhdGggZD1cIk0xNCwxOUgxOFY1SDE0TTYsMTlIMTBWNUg2VjE5WlwiIC8+XG4gICAgICAgIDwvc3ZnPlxuICAgICAgYDtcbiAgICB9XG5cbiAgICAvLyDlo7Dms6LliqjnlLvlrrnlmahcbiAgICBjb25zdCB3YXZlQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgd2F2ZUNvbnRhaW5lci5jbGFzc05hbWUgPSAndm9pY2Utd2F2ZS1jb250YWluZXInO1xuXG4gICAgLy8g5Yib5bu65aSa5Liq5aOw5rOi5p2hXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHtcbiAgICAgIGNvbnN0IHdhdmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIHdhdmUuY2xhc3NOYW1lID0gJ3ZvaWNlLXdhdmUnO1xuICAgICAgd2F2ZS5zdHlsZS5hbmltYXRpb25EZWxheSA9IGAke2kgKiAwLjF9c2A7XG4gICAgICB3YXZlQ29udGFpbmVyLmFwcGVuZENoaWxkKHdhdmUpO1xuICAgIH1cblxuICAgIC8vIOivremfs+aXtumVv+aYvuekulxuICAgIGNvbnN0IHZvaWNlRHVyYXRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgdm9pY2VEdXJhdGlvbi5jbGFzc05hbWUgPSAndm9pY2UtZHVyYXRpb24nO1xuICAgIHZvaWNlRHVyYXRpb24udGV4dENvbnRlbnQgPSBgJHtkdXJhdGlvbn1cImA7XG5cbiAgICB2b2ljZURpdi5hcHBlbmRDaGlsZCh2b2ljZUljb24pO1xuICAgIHZvaWNlRGl2LmFwcGVuZENoaWxkKHdhdmVDb250YWluZXIpO1xuICAgIHZvaWNlRGl2LmFwcGVuZENoaWxkKHZvaWNlRHVyYXRpb24pO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh2b2ljZURpdik7XG5cbiAgICAvLyDliJvlu7rovazlvZXmlofmnKzlrrnlmajvvIjliJ3lp4vpmpDol4/vvIlcbiAgICBjb25zdCB0cmFuc2NyaXB0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdHJhbnNjcmlwdERpdi5jbGFzc05hbWUgPSAndm9pY2UtdHJhbnNjcmlwdCc7XG4gICAgdHJhbnNjcmlwdERpdi50ZXh0Q29udGVudCA9IHZvaWNlQ29udGVudDsgLy8g5pi+56S65a6e6ZmF55qE6K+t6Z+z5YaF5a65XG4gICAgdHJhbnNjcmlwdERpdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgLy8g5a2Y5YKo6K+t6Z+z5YaF5a655Yiw6K+t6Z+z5raI5oGv5YWD57Sg5LiK77yM5pa55L6/5ZCO57ut6K6/6ZeuXG4gICAgdm9pY2VEaXYuc2V0QXR0cmlidXRlKCdkYXRhLXZvaWNlLWNvbnRlbnQnLCB2b2ljZUNvbnRlbnQpO1xuICAgIHZvaWNlRGl2LnNldEF0dHJpYnV0ZSgnZGF0YS1kdXJhdGlvbicsIGR1cmF0aW9uKTtcblxuICAgIC8vIOWwhui9rOW9leaWh+acrOa3u+WKoOWIsOWuueWZqOWQjumdolxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0cmFuc2NyaXB0RGl2KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmt7vliqDor63pn7Pmtojmga/kuqTkupLlip/og71cbiAgICovXG4gIHByaXZhdGUgYWRkVm9pY2VNZXNzYWdlSW50ZXJhY3Rpb25zKFxuICAgIHZvaWNlRGl2OiBIVE1MRWxlbWVudCxcbiAgICB0cmFuc2NyaXB0RGl2OiBIVE1MRWxlbWVudCxcbiAgICB2b2ljZUNvbnRlbnQ6IHN0cmluZyxcbiAgICBkdXJhdGlvbjogbnVtYmVyLFxuICApOiB2b2lkIHtcbiAgICBsZXQgaXNFeHBhbmRlZCA9IGZhbHNlO1xuXG4gICAgLy8g54K55Ye75bGV5byAL+aUtui1t+ivremfs+a2iOaBr1xuICAgIHZvaWNlRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICBpc0V4cGFuZGVkID0gIWlzRXhwYW5kZWQ7XG5cbiAgICAgIGlmIChpc0V4cGFuZGVkKSB7XG4gICAgICAgIC8vIOWxleW8gOeKtuaAge+8muaYvuekuuWKqOeUu+WSjOi9rOW9leaWh+acrFxuICAgICAgICB2b2ljZURpdi5jbGFzc0xpc3QuYWRkKCdleHBhbmRlZCcpO1xuICAgICAgICB0cmFuc2NyaXB0RGl2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB0cmFuc2NyaXB0RGl2LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOaUtui1t+eKtuaAge+8mumakOiXj+WKqOeUu+WSjOi9rOW9leaWh+acrFxuICAgICAgICB2b2ljZURpdi5jbGFzc0xpc3QucmVtb3ZlKCdleHBhbmRlZCcpO1xuICAgICAgICB0cmFuc2NyaXB0RGl2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIHRyYW5zY3JpcHREaXYuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5U291bmQoJ2NsaWNrJyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog5riy5p+T6KGo5oOF5YyF5raI5oGvXG4gICAqL1xuICBwcml2YXRlIHJlbmRlclN0aWNrZXJNZXNzYWdlKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIG1lc3NhZ2U6IENoYXRNZXNzYWdlKTogdm9pZCB7XG4gICAgY29uc3Qgc3RpY2tlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIHN0aWNrZXIuc3JjID0gdGhpcy5tZXNzYWdlUGFyc2VyLnByb2Nlc3NJbWFnZVVybChtZXNzYWdlLmNvbnRlbnQpIHx8IG1lc3NhZ2UuY29udGVudDtcbiAgICBzdGlja2VyLmNsYXNzTmFtZSA9ICdtZXNzYWdlLXN0aWNrZXInO1xuICAgIHN0aWNrZXIuYWx0ID0gJ+ihqOaDheWMhSc7XG4gICAgc3RpY2tlci5sb2FkaW5nID0gJ2xhenknO1xuXG4gICAgc3RpY2tlci5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgc3RpY2tlci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgIGVycm9yVGV4dC50ZXh0Q29udGVudCA9ICdb6KGo5oOF5YyF5Yqg6L295aSx6LSlXSc7XG4gICAgICBlcnJvclRleHQuY2xhc3NOYW1lID0gJ2Vycm9yLXRleHQnO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGVycm9yVGV4dCk7XG4gICAgfTtcblxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzdGlja2VyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmuLLmn5PkvY3nva7mtojmga9cbiAgICovXG4gIHByaXZhdGUgcmVuZGVyTG9jYXRpb25NZXNzYWdlKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIG1lc3NhZ2U6IENoYXRNZXNzYWdlKTogdm9pZCB7XG4gICAgY29uc3QgbG9jYXRpb25EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBsb2NhdGlvbkRpdi5jbGFzc05hbWUgPSAnbG9jYXRpb24tbWVzc2FnZSc7XG5cbiAgICAvLyDkvY3nva7lm77moIcgLSDkvb/nlKhIVE1M5qih5p2/XG4gICAgY29uc3QgbG9jYXRpb25JY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbG9jYXRpb25JY29uLmNsYXNzTmFtZSA9ICdsb2NhdGlvbi1pY29uJztcbiAgICBjb25zdCBsb2NhdGlvbkljb25UZW1wbGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2NhdGlvbkljb25UZW1wbGF0ZScpO1xuICAgIGlmIChsb2NhdGlvbkljb25UZW1wbGF0ZSkge1xuICAgICAgbG9jYXRpb25JY29uLmlubmVySFRNTCA9IGxvY2F0aW9uSWNvblRlbXBsYXRlLmlubmVySFRNTDtcbiAgICB9XG5cbiAgICAvLyDkvY3nva7mlofmnKxcbiAgICBjb25zdCBsb2NhdGlvblRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgbG9jYXRpb25UZXh0LmNsYXNzTmFtZSA9ICdsb2NhdGlvbi10ZXh0JztcbiAgICBsb2NhdGlvblRleHQudGV4dENvbnRlbnQgPSBtZXNzYWdlLmNvbnRlbnQgfHwgJ+S9jee9ruS/oeaBryc7XG5cbiAgICBsb2NhdGlvbkRpdi5hcHBlbmRDaGlsZChsb2NhdGlvbkljb24pO1xuICAgIGxvY2F0aW9uRGl2LmFwcGVuZENoaWxkKGxvY2F0aW9uVGV4dCk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGxvY2F0aW9uRGl2KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmuLLmn5PovazotKbmtojmga8gLSDljLnphY3ljp/niYjlpI3mnYLmoLflvI9cbiAgICovXG4gIHByaXZhdGUgcmVuZGVyVHJhbnNmZXJNZXNzYWdlKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIG1lc3NhZ2U6IENoYXRNZXNzYWdlKTogdm9pZCB7XG4gICAgY29uc3QgcGFydHMgPSBtZXNzYWdlLmNvbnRlbnQuc3BsaXQoJ3wnKTtcbiAgICBjb25zdCBhbW91bnQgPSBwYXJ0c1swXSB8fCAnMCc7XG4gICAgY29uc3Qgbm90ZSA9IHBhcnRzWzFdIHx8ICfnrYnlvoXmjqXmlLYnO1xuXG4gICAgLy8g5Yib5bu66L2s6LSm5rCU5rOhIC0g5Yy56YWN5Y6f54mI5qC35byPXG4gICAgY29uc3QgdHJhbnNmZXJCdWJibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0cmFuc2ZlckJ1YmJsZS5jbGFzc05hbWUgPSAndHJhbnNmZXItYnViYmxlJztcblxuICAgIC8vIOi9rOi0puWGheWuueWuueWZqFxuICAgIGNvbnN0IHRyYW5zZmVyQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRyYW5zZmVyQ29udGVudC5jbGFzc05hbWUgPSAndHJhbnNmZXItY29udGVudCc7XG5cbiAgICAvLyDovazotKblm77moIcgLSDkvb/nlKhIVE1M5qih5p2/XG4gICAgY29uc3QgdHJhbnNmZXJJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdHJhbnNmZXJJY29uLmNsYXNzTmFtZSA9ICd0cmFuc2Zlci1pY29uJztcbiAgICBjb25zdCB0cmFuc2Zlckljb25UZW1wbGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0cmFuc2Zlckljb25UZW1wbGF0ZScpO1xuICAgIGlmICh0cmFuc2Zlckljb25UZW1wbGF0ZSkge1xuICAgICAgdHJhbnNmZXJJY29uLmlubmVySFRNTCA9IHRyYW5zZmVySWNvblRlbXBsYXRlLmlubmVySFRNTDtcbiAgICB9XG5cbiAgICAvLyDovazotKbkv6Hmga9cbiAgICBjb25zdCB0cmFuc2ZlckluZm8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0cmFuc2ZlckluZm8uY2xhc3NOYW1lID0gJ3RyYW5zZmVyLWluZm8nO1xuXG4gICAgY29uc3QgdHJhbnNmZXJBbW91bnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0cmFuc2ZlckFtb3VudC5jbGFzc05hbWUgPSAndHJhbnNmZXItYW1vdW50JztcbiAgICAvLyDmoLflvI/lt7Lnp7vliqjliLAgU0NTU1xuICAgIHRyYW5zZmVyQW1vdW50LnRleHRDb250ZW50ID0gYO+/pSR7YW1vdW50fWA7XG5cbiAgICBjb25zdCB0cmFuc2ZlclN0YXR1cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRyYW5zZmVyU3RhdHVzLmNsYXNzTmFtZSA9ICd0cmFuc2Zlci1zdGF0dXMnO1xuXG4gICAgLy8g5Y+q5pyJ5b2Tbm90ZeaYr+aYjuehrueahOeKtuaAgeaXtuaJjea3u+WKoOminOiJsuexu1xuICAgIC8vIOWQpuWImeS/neaMgem7mOiupOminOiJsu+8iOeBsOiJsu+8iVxuICAgIGlmIChub3RlID09PSAn5bey5o6l5pS2Jykge1xuICAgICAgdHJhbnNmZXJTdGF0dXMuY2xhc3NMaXN0LmFkZCgnY29tcGxldGVkJyk7XG4gICAgfSBlbHNlIGlmIChub3RlID09PSAn5bey6YCA5ZueJyB8fCBub3RlID09PSAn5bey5ouS57udJykge1xuICAgICAgdHJhbnNmZXJTdGF0dXMuY2xhc3NMaXN0LmFkZCgnZmFpbGVkJyk7XG4gICAgfSBlbHNlIGlmIChub3RlID09PSAn5b6F5o6l5pS2Jykge1xuICAgICAgdHJhbnNmZXJTdGF0dXMuY2xhc3NMaXN0LmFkZCgncGVuZGluZycpO1xuICAgIH1cbiAgICAvLyDlpoLmnpxub3Rl5piv55So5oi35aSH5rOo77yI5LiN5piv54q25oCB77yJ77yM5YiZ5LiN5re75Yqg5Lu75L2V54q25oCB57G777yM5L+d5oyB6buY6K6k54Gw6ImyXG4gICAgdHJhbnNmZXJTdGF0dXMudGV4dENvbnRlbnQgPSBub3RlO1xuXG4gICAgLy8g57uE6KOF57uT5p6EXG4gICAgdHJhbnNmZXJJbmZvLmFwcGVuZENoaWxkKHRyYW5zZmVyQW1vdW50KTtcbiAgICB0cmFuc2ZlckluZm8uYXBwZW5kQ2hpbGQodHJhbnNmZXJTdGF0dXMpO1xuICAgIHRyYW5zZmVyQ29udGVudC5hcHBlbmRDaGlsZCh0cmFuc2Zlckljb24pO1xuICAgIHRyYW5zZmVyQ29udGVudC5hcHBlbmRDaGlsZCh0cmFuc2ZlckluZm8pO1xuICAgIHRyYW5zZmVyQnViYmxlLmFwcGVuZENoaWxkKHRyYW5zZmVyQ29udGVudCk7XG5cbiAgICAvLyDlpoLmnpzmmK/nlKjmiLflj5HpgIHnmoTovazotKbvvIzmt7vliqDnlKjmiLfovazotKbnsbtcbiAgICBpZiAodGhpcy5pc1VzZXJTZW5kZXIobWVzc2FnZS5zZW5kZXIpKSB7XG4gICAgICB0cmFuc2ZlckJ1YmJsZS5jbGFzc0xpc3QuYWRkKCd1c2VyLXRyYW5zZmVyJyk7XG4gICAgICAvLyDnlKjmiLflj5HpgIHnmoTovazotKbkuI3lj6/ngrnlh7vvvIzkuI3mt7vliqDku7vkvZXkuovku7bnm5HlkKzlmahcbiAgICB9IGVsc2Uge1xuICAgICAgLy8g6Z2e55So5oi36L2s6LSm5Y+v5Lul5oKs5YGc77yM5qC35byP5ZyoQ1NT5Lit5aSE55CGXG5cbiAgICAgIC8vIOi9rOi0pueCueWHu+S6i+S7tiAtIOWPquaciemdnueUqOaIt+WPkemAgeeahOi9rOi0puaJjeWPr+eCueWHu1xuICAgICAgdHJhbnNmZXJCdWJibGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuaGFuZGxlVHJhbnNmZXJDbGljayhtZXNzYWdlLCB0cmFuc2ZlclN0YXR1cyk7XG4gICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXlTb3VuZCgnY2xpY2snKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0cmFuc2ZlckJ1YmJsZSk7XG4gIH1cblxuICAvKipcbiAgICog5re75Yqg5raI5oGv5Yqo55S75pWI5p6cXG4gICAqL1xuICBwcml2YXRlIGFkZE1lc3NhZ2VBbmltYXRpb24obWVzc2FnZUVsZW1lbnQ6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgLy8g5re75Yqg5reh5YWl5Yqo55S757G7XG4gICAgbWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbWVzc2FnZS1hbmltYXRpb24nKTtcblxuICAgIC8vIOS9v+eUqHJlcXVlc3RBbmltYXRpb25GcmFtZeehruS/neWKqOeUu+a1geeVhVxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICBtZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog5re75Yqg5raI5oGv5Lqk5LqS5LqL5Lu2XG4gICAqL1xuICBwcml2YXRlIGFkZE1lc3NhZ2VJbnRlcmFjdGlvbnMobWVzc2FnZUVsZW1lbnQ6IEhUTUxFbGVtZW50LCBtZXNzYWdlOiBDaGF0TWVzc2FnZSk6IHZvaWQge1xuICAgIC8vIDEuIOa2iOaBr+awlOazoeS6pOS6klxuICAgIHRoaXMuYWRkQnViYmxlSW50ZXJhY3Rpb25zKG1lc3NhZ2VFbGVtZW50LCBtZXNzYWdlKTtcblxuICAgIC8vIDIuIOWktOWDj+S6pOS6klxuICAgIHRoaXMuYWRkQXZhdGFySW50ZXJhY3Rpb25zKG1lc3NhZ2VFbGVtZW50LCBtZXNzYWdlKTtcblxuICAgIC8vIDMuIOaXtumXtOaIs+S6pOS6klxuICAgIHRoaXMuYWRkVGltZXN0YW1wSW50ZXJhY3Rpb25zKG1lc3NhZ2VFbGVtZW50LCBtZXNzYWdlKTtcblxuICAgIC8vIDQuIOeJueauiua2iOaBr+exu+Wei+S6pOS6klxuICAgIHRoaXMuYWRkU3BlY2lhbE1lc3NhZ2VJbnRlcmFjdGlvbnMobWVzc2FnZUVsZW1lbnQsIG1lc3NhZ2UpO1xuXG4gICAgLy8gNS4g5Y+M5Ye757yW6L6R5Yqf6IO977yI5LuF5a+55b6F5Y+R6YCB5raI5oGv77yJXG4gICAgaWYgKG1lc3NhZ2UuaXNQZW5kaW5nKSB7XG4gICAgICB0aGlzLmFkZERvdWJsZUNsaWNrRWRpdChtZXNzYWdlRWxlbWVudCwgbWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOa3u+WKoOa2iOaBr+awlOazoeS6pOS6klxuICAgKi9cbiAgcHJpdmF0ZSBhZGRCdWJibGVJbnRlcmFjdGlvbnMobWVzc2FnZUVsZW1lbnQ6IEhUTUxFbGVtZW50LCBtZXNzYWdlOiBDaGF0TWVzc2FnZSk6IHZvaWQge1xuICAgIGNvbnN0IG1lc3NhZ2VXcmFwcGVyID0gbWVzc2FnZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1lc3NhZ2Utd3JhcHBlcicpO1xuICAgIGNvbnN0IG1lc3NhZ2VDb250ZW50ID0gbWVzc2FnZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1lc3NhZ2UtY29udGVudCcpO1xuXG4gICAgaWYgKG1lc3NhZ2VDb250ZW50KSB7XG4gICAgICAvLyDovazotKbmtojmga/nmoTngrnlh7vkuovku7blt7LlnKhyZW5kZXJUcmFuc2Zlck1lc3NhZ2XkuK3lpITnkIbvvIzpgb/lhY3ph43lpI1cbiAgICAgIGlmIChtZXNzYWdlLm1lc3NhZ2VUeXBlICE9PSAndHJhbnNmZXInKSB7XG4gICAgICAgIC8vIOeCueWHu+awlOazoemfs+aViFxuICAgICAgICBtZXNzYWdlQ29udGVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICAgIC8vIOmYu+atouS6i+S7tuWGkuazoe+8jOmBv+WFjemHjeWkjeinpuWPkVxuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdjbGljaycpO1xuXG4gICAgICAgICAgLy8g5re75Yqg54K55Ye75Y+N6aaI5pWI5p6cXG4gICAgICAgICAgdGhpcy5hZGRDbGlja0ZlZWRiYWNrKG1lc3NhZ2VDb250ZW50IGFzIEhUTUxFbGVtZW50KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIOWPjOWHu+e8lui+keWKn+iDveW3suWcqGFkZE1lc3NhZ2VJbnRlcmFjdGlvbnPkuK3nu5/kuIDlpITnkIbvvIzpgb/lhY3ph43lpI1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5re75Yqg5aS05YOP5Lqk5LqSXG4gICAqL1xuICBwcml2YXRlIGFkZEF2YXRhckludGVyYWN0aW9ucyhtZXNzYWdlRWxlbWVudDogSFRNTEVsZW1lbnQsIG1lc3NhZ2U6IENoYXRNZXNzYWdlKTogdm9pZCB7XG4gICAgY29uc3QgYXZhdGFyID0gbWVzc2FnZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmF2YXRhcicpO1xuXG4gICAgaWYgKGF2YXRhcikge1xuICAgICAgLy8g5aS05YOP54K55Ye76Z+z5pWI5ZKM5Lqk5LqSXG4gICAgICBhdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdhdmF0YXInKTtcblxuICAgICAgICAvLyDlpLTlg4/ngrnlh7vmlYjmnpxcbiAgICAgICAgdGhpcy5hZGRBdmF0YXJDbGlja0VmZmVjdChhdmF0YXIgYXMgSFRNTEVsZW1lbnQpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIOeUqOaIt+WktOWDj+WPjOWHu+S6i+S7tu+8iOWIoOmZpOa2iOaBr+WSjOmHjXJvbGzlip/og73vvIlcbiAgICAgIGNvbnN0IGlzVXNlck1lc3NhZ2UgPSB0aGlzLmlzVXNlclNlbmRlcihtZXNzYWdlLnNlbmRlcik7XG4gICAgICBpZiAoaXNVc2VyTWVzc2FnZSkge1xuICAgICAgICBhdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCBlID0+IHtcbiAgICAgICAgICAvLyDlnKjmibnph4/liKDpmaTmqKHlvI/kuIvnpoHnlKjlj4zlh7voj5zljZVcbiAgICAgICAgICBpZiAodGhpcy5pc0JhdGNoRGVsZXRlTW9kZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIHRoaXMuc2hvd1VzZXJNZXNzYWdlQ29udGV4dE1lbnUoZSwgbWVzc2FnZSwgbWVzc2FnZUVsZW1lbnQpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8g5aS05YOP5oKs5YGc5pWI5p6cXG4gICAgICBhdmF0YXIuY2xhc3NMaXN0LmFkZCgnYXZhdGFyLWhvdmVyJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOa3u+WKoOaXtumXtOaIs+S6pOS6klxuICAgKi9cbiAgcHJpdmF0ZSBhZGRUaW1lc3RhbXBJbnRlcmFjdGlvbnMobWVzc2FnZUVsZW1lbnQ6IEhUTUxFbGVtZW50LCBtZXNzYWdlOiBDaGF0TWVzc2FnZSk6IHZvaWQge1xuICAgIC8vIOaXtumXtOaIs+S6pOS6kuWKn+iDveW3suenu+mZpO+8jOS/neaMgeeugOa0gVxuICB9XG5cbiAgLyoqXG4gICAqIOa3u+WKoOeJueauiua2iOaBr+exu+Wei+S6pOS6klxuICAgKi9cbiAgcHJpdmF0ZSBhZGRTcGVjaWFsTWVzc2FnZUludGVyYWN0aW9ucyhtZXNzYWdlRWxlbWVudDogSFRNTEVsZW1lbnQsIG1lc3NhZ2U6IENoYXRNZXNzYWdlKTogdm9pZCB7XG4gICAgc3dpdGNoIChtZXNzYWdlLm1lc3NhZ2VUeXBlKSB7XG4gICAgICBjYXNlICdpbWFnZSc6XG4gICAgICAgIC8vIOenu+mZpOWbvueJh+eCueWHu+mihOiniOWKn+iDvSAtIOWbvueJh+S4jeWGjeWPr+eCueWHu1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3ZvaWNlJzpcbiAgICAgICAgdGhpcy5hZGRWb2ljZUludGVyYWN0aW9ucyhtZXNzYWdlRWxlbWVudCwgbWVzc2FnZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc3RpY2tlcic6XG4gICAgICAgIHRoaXMuYWRkU3RpY2tlckludGVyYWN0aW9ucyhtZXNzYWdlRWxlbWVudCwgbWVzc2FnZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndHJhbnNmZXInOlxuICAgICAgICAvLyDovazotKbkuqTkupLlt7LlnKhyZW5kZXJUcmFuc2Zlck1lc3NhZ2XkuK3lpITnkIZcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOe7n+S4gOS4uui9rOi0puawlOazoea3u+WKoOS6i+S7tuWnlOaJmO+8jOS/neivgemmluasoea4suafk+WNs+WPr+eCueWHu1xuICAgKiDkvb/nlKjmjZXojrfpmLbmrrXnm5HlkKzvvIzpgb/lhY3kuI7lkI7nu63nu5HlrprnmoTlhrLnqoHlkozkuKLlpLFcbiAgICovXG4gIHByaXZhdGUgaW5pdGlhbGl6ZVRyYW5zZmVyQ2xpY2tEZWxlZ2F0aW9uKCk6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICBpZiAodGhpcy50cmFuc2ZlckRlbGVnYXRpb25Cb3VuZCkgcmV0dXJuO1xuXG4gICAgICBjb25zdCBoYW5kbGVyID0gKGV2OiBFdmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBldi50YXJnZXQgYXMgSFRNTEVsZW1lbnQgfCBudWxsO1xuICAgICAgICBpZiAoIXRhcmdldCB8fCAhKCdjbG9zZXN0JyBpbiB0YXJnZXQpKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgYnViYmxlID0gKHRhcmdldCBhcyBhbnkpLmNsb3Nlc3Q/LignLnRyYW5zZmVyLWJ1YmJsZScpIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcbiAgICAgICAgaWYgKCFidWJibGUpIHJldHVybjtcblxuICAgICAgICAvLyDku4XlpITnkIbogYrlpKnmtojmga/ljLrln5/nmoTovazotKbmsJTms6FcbiAgICAgICAgaWYgKCFidWJibGUuY2xvc2VzdCgnI2NoYXRNZXNzYWdlcycpKSByZXR1cm47XG5cbiAgICAgICAgLy8g5om+5Yiw5omA5bGe5raI5oGv5YWD57Sg5ZKM5raI5oGvSURcbiAgICAgICAgY29uc3QgbWVzc2FnZUVsID0gYnViYmxlLmNsb3Nlc3QoJy5tZXNzYWdlJykgYXMgSFRNTEVsZW1lbnQgfCBudWxsO1xuICAgICAgICBjb25zdCBtZXNzYWdlSWQgPSBtZXNzYWdlRWw/LmRhdGFzZXQubWVzc2FnZUlkO1xuICAgICAgICBpZiAoIW1lc3NhZ2VJZCkgcmV0dXJuO1xuXG4gICAgICAgIC8vIOWcqOW9k+WJjeiBiuWkqeaVsOaNruaIluWPkemAgemYn+WIl+S4reafpeaJvua2iOaBr1xuICAgICAgICBjb25zdCBjdXJyZW50Q2hhdERhdGEgPSB0aGlzLmNoYXREYXRhLmdldCh0aGlzLmN1cnJlbnRDaGF0KTtcbiAgICAgICAgbGV0IG1zZyA9XG4gICAgICAgICAgY3VycmVudENoYXREYXRhPy5tZXNzYWdlcy5maW5kKG0gPT4gbS5pZCA9PT0gbWVzc2FnZUlkKSB8fFxuICAgICAgICAgIHRoaXMuc2VuZFF1ZXVlLmZpbmQobSA9PiBtLmlkID09PSBtZXNzYWdlSWQpO1xuXG4gICAgICAgIGlmICghbXNnKSByZXR1cm47XG5cbiAgICAgICAgLy8g55So5oi36Ieq5bex5Y+R6LW355qE6L2s6LSm5LiN5Y+v54K55Ye777yI5L+d5oyB5Y6f6K6+6K6h77yJXG4gICAgICAgIGlmICh0aGlzLmlzVXNlclNlbmRlcihtc2cuc2VuZGVyKSkgcmV0dXJuO1xuXG4gICAgICAgIGlmIChtc2cubWVzc2FnZVR5cGUgIT09ICd0cmFuc2ZlcicpIHJldHVybjtcblxuICAgICAgICBjb25zdCBzdGF0dXNFbCA9IGJ1YmJsZS5xdWVyeVNlbGVjdG9yKCcudHJhbnNmZXItc3RhdHVzJykgYXMgSFRNTEVsZW1lbnQgfCBudWxsO1xuXG4gICAgICAgIC8vIOaNleiOt+mYtuauteaLpuaIqu+8jOmYsuatouWGkuazoeWIsOWPr+iDveeahOWFtuS7luWkhOeQhuWZqO+8jOmBv+WFjemHjeWkjeaJp+ihjFxuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICB0aGlzLmhhbmRsZVRyYW5zZmVyQ2xpY2sobXNnLCBzdGF0dXNFbCB8fCB1bmRlZmluZWQpO1xuICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5U291bmQoJ2NsaWNrJyk7XG4gICAgICB9O1xuXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZXIsIHRydWUpO1xuICAgICAgdGhpcy50cmFuc2ZlckRlbGVnYXRpb25Cb3VuZCA9IHRydWU7XG4gICAgICBjb25zb2xlLmxvZygnW0JlYXJDaGF0TWFuYWdlcl0g6L2s6LSm54K55Ye75LqL5Lu25aeU5omY5bey5ZCv55SoJyk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ2luaXRpYWxpemVUcmFuc2ZlckNsaWNrRGVsZWdhdGlvbiDlpLHotKU6JywgZXJyKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5re75Yqg5Y+M5Ye757yW6L6R5Yqf6IO9XG4gICAqL1xuICBwcml2YXRlIGFkZERvdWJsZUNsaWNrRWRpdChlbGVtZW50OiBIVE1MRWxlbWVudCwgbWVzc2FnZTogQ2hhdE1lc3NhZ2UpOiB2b2lkIHtcbiAgICAvLyDmib7liLDmtojmga/lhoXlrrnlhYPntKBcbiAgICBjb25zdCBtZXNzYWdlQ29udGVudCA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1lc3NhZ2UtY29udGVudCcpIGFzIEhUTUxFbGVtZW50O1xuICAgIGlmICghbWVzc2FnZUNvbnRlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBoYW5kbGVEb3VibGVDbGljayA9IChlOiBFdmVudCkgPT4ge1xuICAgICAgdGhpcy5oYW5kbGVNZXNzYWdlRWRpdChtZXNzYWdlKTtcbiAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXlTb3VuZCgnY2xpY2snKTtcblxuICAgICAgLy8g6Zi75q2i5LqL5Lu25YaS5rOh5ZKM6buY6K6k6KGM5Li6XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH07XG5cbiAgICAvLyDkvb/nlKjljp/nlJ/nmoRkYmxjbGlja+S6i+S7tu+8jOabtOWPr+mdoFxuICAgIG1lc3NhZ2VDb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgaGFuZGxlRG91YmxlQ2xpY2ssIHRydWUpOyAvLyDkvb/nlKhjYXB0dXJl5qih5byPXG4gIH1cblxuICAvKipcbiAgICog5re75Yqg54K55Ye75Y+N6aaI5pWI5p6cXG4gICAqL1xuICBwcml2YXRlIGFkZENsaWNrRmVlZGJhY2soZWxlbWVudDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2NsaWNrLWZlZWRiYWNrJyk7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnY2xpY2stZmVlZGJhY2snKTtcbiAgICB9LCAxMDApO1xuICB9XG5cbiAgLyoqXG4gICAqIOa3u+WKoOWktOWDj+eCueWHu+aViOaenFxuICAgKi9cbiAgcHJpdmF0ZSBhZGRBdmF0YXJDbGlja0VmZmVjdChhdmF0YXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgYXZhdGFyLmNsYXNzTGlzdC5hZGQoJ2F2YXRhci1jbGljay1lZmZlY3QnKTtcblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgYXZhdGFyLmNsYXNzTGlzdC5yZW1vdmUoJ2F2YXRhci1jbGljay1lZmZlY3QnKTtcbiAgICB9LCAxNTApO1xuICB9XG5cbiAgLyoqXG4gICAqIOa3u+WKoOivremfs+S6pOS6klxuICAgKi9cbiAgcHJpdmF0ZSBhZGRWb2ljZUludGVyYWN0aW9ucyhtZXNzYWdlRWxlbWVudDogSFRNTEVsZW1lbnQsIG1lc3NhZ2U6IENoYXRNZXNzYWdlKTogdm9pZCB7XG4gICAgY29uc3Qgdm9pY2VNZXNzYWdlID0gbWVzc2FnZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLnZvaWNlLW1lc3NhZ2UnKTtcbiAgICBjb25zdCB0cmFuc2NyaXB0RGl2ID0gbWVzc2FnZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLnZvaWNlLXRyYW5zY3JpcHQnKTtcblxuICAgIGlmICh2b2ljZU1lc3NhZ2UgJiYgdHJhbnNjcmlwdERpdikge1xuICAgICAgbGV0IGlzRXhwYW5kZWQgPSBmYWxzZTtcbiAgICAgIGNvbnN0IG1pY0ljb24gPSB2b2ljZU1lc3NhZ2UucXVlcnlTZWxlY3RvcignLm1pYy1pY29uJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBjb25zdCBwYXVzZUljb24gPSB2b2ljZU1lc3NhZ2UucXVlcnlTZWxlY3RvcignLnBhdXNlLWljb24nKSBhcyBIVE1MRWxlbWVudDtcblxuICAgICAgdm9pY2VNZXNzYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgaXNFeHBhbmRlZCA9ICFpc0V4cGFuZGVkO1xuXG4gICAgICAgIGlmIChpc0V4cGFuZGVkKSB7XG4gICAgICAgICAgLy8g5bGV5byA54q25oCB77ya5pi+56S65Yqo55S75ZKM6L2s5b2V5paH5pys77yM5YiH5o2i5Yiw5pKt5pS+5Zu+5qCHXG4gICAgICAgICAgdm9pY2VNZXNzYWdlLmNsYXNzTGlzdC5hZGQoJ2V4cGFuZGVkJyk7XG4gICAgICAgICAgKHRyYW5zY3JpcHREaXYgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgIHRyYW5zY3JpcHREaXYuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuXG4gICAgICAgICAgLy8g5YiH5o2i5Zu+5qCHXG4gICAgICAgICAgaWYgKG1pY0ljb24pIG1pY0ljb24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICBpZiAocGF1c2VJY29uKSBwYXVzZUljb24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8g5pS26LW354q25oCB77ya6ZqQ6JeP5Yqo55S75ZKM6L2s5b2V5paH5pys77yM5YiH5o2i5Yiw6bqm5YWL6aOO5Zu+5qCHXG4gICAgICAgICAgdm9pY2VNZXNzYWdlLmNsYXNzTGlzdC5yZW1vdmUoJ2V4cGFuZGVkJyk7XG4gICAgICAgICAgKHRyYW5zY3JpcHREaXYgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgdHJhbnNjcmlwdERpdi5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG5cbiAgICAgICAgICAvLyDliIfmjaLlm77moIdcbiAgICAgICAgICBpZiAobWljSWNvbikgbWljSWNvbi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICBpZiAocGF1c2VJY29uKSBwYXVzZUljb24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXlTb3VuZCgnY2xpY2snKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDnoa7kv53or63pn7Pmtojmga/nmoTkuovku7bnu5HlrprvvIjnlKjkuo7mlrDmtojmga/muLLmn5PlkI7nmoTooaXlhYXnu5HlrprvvIlcbiAgICovXG4gIHByaXZhdGUgZW5zdXJlVm9pY2VNZXNzYWdlSW50ZXJhY3Rpb25zKG1lc3NhZ2VFbGVtZW50OiBIVE1MRWxlbWVudCwgbWVzc2FnZTogQ2hhdE1lc3NhZ2UpOiB2b2lkIHtcbiAgICAvLyDlj6rlpITnkIbor63pn7Pmtojmga9cbiAgICBpZiAobWVzc2FnZS5tZXNzYWdlVHlwZSAhPT0gJ3ZvaWNlJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHZvaWNlTWVzc2FnZSA9IG1lc3NhZ2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy52b2ljZS1tZXNzYWdlJyk7XG4gICAgY29uc3QgdHJhbnNjcmlwdERpdiA9IG1lc3NhZ2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy52b2ljZS10cmFuc2NyaXB0Jyk7XG5cbiAgICAvLyDmo4Dmn6XmmK/lkKblt7Lnu4/nu5Hlrprkuobkuovku7bvvIjpgb/lhY3ph43lpI3nu5HlrprvvIlcbiAgICBpZiAodm9pY2VNZXNzYWdlICYmICF2b2ljZU1lc3NhZ2UuaGFzQXR0cmlidXRlKCdkYXRhLXZvaWNlLWJvdW5kJykpIHtcbiAgICAgIC8vIOagh+iusOW3sue7keWumu+8jOmBv+WFjemHjeWkjee7keWumlxuICAgICAgdm9pY2VNZXNzYWdlLnNldEF0dHJpYnV0ZSgnZGF0YS12b2ljZS1ib3VuZCcsICd0cnVlJyk7XG5cbiAgICAgIC8vIOetieW+heaooeadv+WGheWuueWKoOi9veWujOaIkFxuICAgICAgY29uc3QgY2hlY2tBbmRCaW5kID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBtaWNJY29uID0gdm9pY2VNZXNzYWdlLnF1ZXJ5U2VsZWN0b3IoJy5taWMtaWNvbicpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBjb25zdCBwYXVzZUljb24gPSB2b2ljZU1lc3NhZ2UucXVlcnlTZWxlY3RvcignLnBhdXNlLWljb24nKSBhcyBIVE1MRWxlbWVudDtcblxuICAgICAgICAvLyDlpoLmnpzlm77moIflhYPntKDlrZjlnKjvvIzor7TmmI7mqKHmnb/lt7LliqDovb3lrozmiJBcbiAgICAgICAgaWYgKG1pY0ljb24gJiYgcGF1c2VJY29uICYmIHRyYW5zY3JpcHREaXYpIHtcbiAgICAgICAgICBsZXQgaXNFeHBhbmRlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgLy8g56e76Zmk5Y+v6IO95a2Y5Zyo55qE5pen5LqL5Lu255uR5ZCs5ZmoXG4gICAgICAgICAgY29uc3QgbmV3Vm9pY2VNZXNzYWdlID0gdm9pY2VNZXNzYWdlLmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICB2b2ljZU1lc3NhZ2UucGFyZW50Tm9kZT8ucmVwbGFjZUNoaWxkKG5ld1ZvaWNlTWVzc2FnZSwgdm9pY2VNZXNzYWdlKTtcblxuICAgICAgICAgIC8vIOmHjeaWsOiOt+WPluWFg+e0oOW8leeUqFxuICAgICAgICAgIGNvbnN0IG5ld01pY0ljb24gPSBuZXdWb2ljZU1lc3NhZ2UucXVlcnlTZWxlY3RvcignLm1pYy1pY29uJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgY29uc3QgbmV3UGF1c2VJY29uID0gbmV3Vm9pY2VNZXNzYWdlLnF1ZXJ5U2VsZWN0b3IoJy5wYXVzZS1pY29uJykgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgICAvLyDnu5Hlrprngrnlh7vkuovku7ZcbiAgICAgICAgICBuZXdWb2ljZU1lc3NhZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgIGlzRXhwYW5kZWQgPSAhaXNFeHBhbmRlZDtcblxuICAgICAgICAgICAgaWYgKGlzRXhwYW5kZWQpIHtcbiAgICAgICAgICAgICAgLy8g5bGV5byA54q25oCB77ya5pi+56S65Yqo55S75ZKM6L2s5b2V5paH5pys77yM5YiH5o2i5Yiw5pKt5pS+5Zu+5qCHXG4gICAgICAgICAgICAgIG5ld1ZvaWNlTWVzc2FnZS5jbGFzc0xpc3QuYWRkKCdleHBhbmRlZCcpO1xuICAgICAgICAgICAgICAodHJhbnNjcmlwdERpdiBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgIHRyYW5zY3JpcHREaXYuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuXG4gICAgICAgICAgICAgIC8vIOWIh+aNouWbvuagh1xuICAgICAgICAgICAgICBpZiAobmV3TWljSWNvbikgbmV3TWljSWNvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICBpZiAobmV3UGF1c2VJY29uKSBuZXdQYXVzZUljb24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyDmlLbotbfnirbmgIHvvJrpmpDol4/liqjnlLvlkozovazlvZXmlofmnKzvvIzliIfmjaLliLDpuqblhYvpo47lm77moIdcbiAgICAgICAgICAgICAgbmV3Vm9pY2VNZXNzYWdlLmNsYXNzTGlzdC5yZW1vdmUoJ2V4cGFuZGVkJyk7XG4gICAgICAgICAgICAgICh0cmFuc2NyaXB0RGl2IGFzIEhUTUxFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICB0cmFuc2NyaXB0RGl2LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcblxuICAgICAgICAgICAgICAvLyDliIfmjaLlm77moIdcbiAgICAgICAgICAgICAgaWYgKG5ld01pY0ljb24pIG5ld01pY0ljb24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgIGlmIChuZXdQYXVzZUljb24pIG5ld1BhdXNlSWNvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5U291bmQoJ2NsaWNrJyk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIOivremfs+a2iOaBr+S6i+S7tue7keWumuaIkOWKnycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIOWmguaenOaooeadv+i/mOayoeWKoOi9veWujOaIkO+8jOW7tui/n+mHjeivlVxuICAgICAgICAgIHNldFRpbWVvdXQoY2hlY2tBbmRCaW5kLCA1MCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIOW8gOWni+ajgOafpeWSjOe7keWumlxuICAgICAgY2hlY2tBbmRCaW5kKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOa3u+WKoOihqOaDheWMheS6pOS6klxuICAgKi9cbiAgcHJpdmF0ZSBhZGRTdGlja2VySW50ZXJhY3Rpb25zKG1lc3NhZ2VFbGVtZW50OiBIVE1MRWxlbWVudCwgbWVzc2FnZTogQ2hhdE1lc3NhZ2UpOiB2b2lkIHtcbiAgICBjb25zdCBzdGlja2VyID0gbWVzc2FnZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1lc3NhZ2Utc3RpY2tlcicpO1xuICAgIGlmIChzdGlja2VyKSB7XG4gICAgICBzdGlja2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5U291bmQoJ2Vtb2ppJyk7XG4gICAgICAgIHRoaXMuYWRkU3RpY2tlckFuaW1hdGlvbihzdGlja2VyIGFzIEhUTUxFbGVtZW50KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDmt7vliqDooajmg4XljIXliqjnlLtcbiAgICovXG4gIHByaXZhdGUgYWRkU3RpY2tlckFuaW1hdGlvbihzdGlja2VyOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIC8vIOWFiOenu+mZpOS5i+WJjeeahOWKqOeUu+exu++8jOehruS/neWPr+S7pemHjeWkjeinpuWPkVxuICAgIHN0aWNrZXIuY2xhc3NMaXN0LnJlbW92ZSgnc3RpY2tlci1hbmltYXRpb24nLCAncmVzZXQnKTtcblxuICAgIC8vIOW8uuWItumHjee7mO+8jOehruS/neexu+iiq+WujOWFqOenu+mZpFxuICAgIHN0aWNrZXIub2Zmc2V0SGVpZ2h0O1xuXG4gICAgLy8g5re75Yqg5Yqo55S757G7XG4gICAgc3RpY2tlci5jbGFzc0xpc3QuYWRkKCdzdGlja2VyLWFuaW1hdGlvbicpO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBzdGlja2VyLmNsYXNzTGlzdC5hZGQoJ3Jlc2V0Jyk7XG4gICAgICAvLyDliqjnlLvnu5PmnZ/lkI7np7vpmaTmiYDmnInliqjnlLvnsbvvvIzkuLrkuIvmrKHliqjnlLvlgZrlh4blpIdcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBzdGlja2VyLmNsYXNzTGlzdC5yZW1vdmUoJ3N0aWNrZXItYW5pbWF0aW9uJywgJ3Jlc2V0Jyk7XG4gICAgICB9LCAxMDApO1xuICAgIH0sIDMwMCk7XG4gIH1cblxuICAvKipcbiAgICog5pi+56S65o+Q56S65raI5oGvXG4gICAqIEBwYXJhbSBtZXNzYWdlIOaPkOekuua2iOaBr+WGheWuuVxuICAgKiBAcGFyYW0gdHlwZSDmj5DnpLrnsbvlnovvvJppbmZvLCBzdWNjZXNzLCB3YXJuaW5nLCBlcnJvclxuICAgKi9cblxuICAvKipcbiAgICog5rua5Yqo5Yiw5bqV6YOoXG4gICAqL1xuICBwcml2YXRlIHNjcm9sbFRvQm90dG9tKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBjb250YWluZXIuc2Nyb2xsVG9wID0gY29udGFpbmVyLnNjcm9sbEhlaWdodDtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09IOaooeaAgeahhueuoeeQhuezu+e7nyA9PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiDliJvlu7rmqKHmgIHmoYbpga7nvanlsYJcbiAgICogQHJldHVybnMg6YGu572p5bGC5YWD57SgXG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZU1vZGFsT3ZlcmxheSgpOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIG92ZXJsYXkuY2xhc3NOYW1lID0gJ21vZGFsLW92ZXJsYXknO1xuXG4gICAgLy8g54K55Ye76YGu572p5bGC5YWz6Zet5qih5oCB5qGGXG4gICAgb3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgaWYgKGUudGFyZ2V0ID09PSBvdmVybGF5KSB7XG4gICAgICAgIHRoaXMuaGlkZU1vZGFsKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gb3ZlcmxheTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliJvlu7rmqKHmgIHmoYblrrnlmahcbiAgICogQHBhcmFtIHRpdGxlIOaooeaAgeahhuagh+mimFxuICAgKiBAcGFyYW0gY29udGVudCDmqKHmgIHmoYblhoXlrrnlhYPntKBcbiAgICogQHJldHVybnMg5qih5oCB5qGG5a655Zmo5YWD57SgXG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZU1vZGFsQ29udGFpbmVyKHRpdGxlOiBzdHJpbmcsIGNvbnRlbnQ6IEhUTUxFbGVtZW50KTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbW9kYWwuY2xhc3NOYW1lID0gJ21vZGFsLWNvbnRhaW5lcic7XG5cbiAgICAvLyDliJvlu7rmoIfpophcbiAgICBjb25zdCB0aXRsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aXRsZUVsZW1lbnQuY2xhc3NOYW1lID0gJ21vZGFsLXRpdGxlJztcbiAgICB0aXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aXRsZTtcblxuICAgIC8vIOWIm+W7uuWGheWuueWMuuWfn1xuICAgIGNvbnN0IGNvbnRlbnRBcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29udGVudEFyZWEuY2xhc3NOYW1lID0gJ21vZGFsLWNvbnRlbnQnO1xuICAgIGNvbnRlbnRBcmVhLmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuXG4gICAgbW9kYWwuYXBwZW5kQ2hpbGQodGl0bGVFbGVtZW50KTtcbiAgICBtb2RhbC5hcHBlbmRDaGlsZChjb250ZW50QXJlYSk7XG5cbiAgICByZXR1cm4gbW9kYWw7XG4gIH1cblxuICAvKipcbiAgICog5pi+56S65qih5oCB5qGGXG4gICAqIEBwYXJhbSB0aXRsZSDmqKHmgIHmoYbmoIfpophcbiAgICogQHBhcmFtIGNvbnRlbnQg5qih5oCB5qGG5YaF5a655YWD57SgXG4gICAqIEBwYXJhbSBwbGF5U291bmQg5piv5ZCm5pKt5pS+6Z+z5pWI77yM6buY6K6k5Li6dHJ1ZVxuICAgKiBAcmV0dXJucyDpga7nvanlsYLlhYPntKDvvIznlKjkuo7lkI7nu63mk43kvZxcbiAgICovXG4gIHByaXZhdGUgc2hvd01vZGFsKHRpdGxlOiBzdHJpbmcsIGNvbnRlbnQ6IEhUTUxFbGVtZW50LCBwbGF5U291bmQ6IGJvb2xlYW4gPSB0cnVlKTogSFRNTEVsZW1lbnQge1xuICAgIC8vIOWIm+W7uumBrue9qeWxguWSjOaooeaAgeahhlxuICAgIGNvbnN0IG92ZXJsYXkgPSB0aGlzLmNyZWF0ZU1vZGFsT3ZlcmxheSgpO1xuICAgIGNvbnN0IG1vZGFsID0gdGhpcy5jcmVhdGVNb2RhbENvbnRhaW5lcih0aXRsZSwgY29udGVudCk7XG5cbiAgICBvdmVybGF5LmFwcGVuZENoaWxkKG1vZGFsKTtcblxuICAgIC8vIOa3u+WKoOWIsOeVjOmdouWuueWZqOS4rVxuICAgIGNvbnN0IGludGVyZmFjZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbnRlcmZhY2UtY29udGFpbmVyJyk7XG4gICAgY29uc3QgY29udGFpbmVyID0gaW50ZXJmYWNlQ29udGFpbmVyIHx8IGRvY3VtZW50LmJvZHk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG92ZXJsYXkpO1xuXG4gICAgLy8g5re75Yqg5pi+56S65Yqo55S7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBvdmVybGF5LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgICB9LCAxMCk7XG5cbiAgICAvLyDmt7vliqBFU0PplK7lhbPpl63lip/og71cbiAgICBjb25zdCBoYW5kbGVFc2NLZXkgPSAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICB0aGlzLmhpZGVNb2RhbCgpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlRXNjS2V5KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVFc2NLZXkpO1xuXG4gICAgLy8g5Y+v6YCJ5oup5oCn5pKt5pS+6Z+z5pWIXG4gICAgaWYgKHBsYXlTb3VuZCkge1xuICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdjbGljaycpO1xuICAgIH1cblxuICAgIHJldHVybiBvdmVybGF5O1xuICB9XG5cbiAgLyoqXG4gICAqIOmakOiXj+aooeaAgeahhlxuICAgKi9cbiAgcHJpdmF0ZSBoaWRlTW9kYWwoKTogdm9pZCB7XG4gICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1vdmVybGF5Jyk7XG4gICAgaWYgKG92ZXJsYXkpIHtcbiAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmIChvdmVybGF5LnBhcmVudE5vZGUpIHtcbiAgICAgICAgICBvdmVybGF5LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob3ZlcmxheSk7XG4gICAgICAgIH1cbiAgICAgIH0sIDMwMCk7XG4gICAgfVxuXG4gICAgLy8g5pKt5pS+6Z+z5pWIXG4gICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdjbGljaycpO1xuICB9XG5cbiAgLyoqXG4gICAqIOWkhOeQhuaooeaAgeahhuehruiupOaTjeS9nFxuICAgKiBAcGFyYW0gY2FsbGJhY2sg56Gu6K6k5Zue6LCD5Ye95pWwXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZU1vZGFsQ29uZmlybShjYWxsYmFjaz86ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfVxuICAgIHRoaXMuaGlkZU1vZGFsKCk7XG4gIH1cblxuICAvKipcbiAgICog5aSE55CG5qih5oCB5qGG5Y+W5raI5pON5L2cXG4gICAqIEBwYXJhbSBjYWxsYmFjayDlj5bmtojlm57osIPlh73mlbBcbiAgICovXG4gIHByaXZhdGUgaGFuZGxlTW9kYWxDYW5jZWwoY2FsbGJhY2s/OiAoKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICBjYWxsYmFjaygpO1xuICAgIH1cbiAgICB0aGlzLmhpZGVNb2RhbCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIm+W7uuW4puacieehruiupOWSjOWPlua2iOaMiemSrueahOaooeaAgeahhuWGheWuuVxuICAgKiBAcGFyYW0gY29udGVudCDkuLvopoHlhoXlrrnlhYPntKBcbiAgICogQHBhcmFtIG9uQ29uZmlybSDnoa7orqTlm57osINcbiAgICogQHBhcmFtIG9uQ2FuY2VsIOWPlua2iOWbnuiwg1xuICAgKiBAcGFyYW0gY29uZmlybVRleHQg56Gu6K6k5oyJ6ZKu5paH5pysXG4gICAqIEBwYXJhbSBjYW5jZWxUZXh0IOWPlua2iOaMiemSruaWh+acrFxuICAgKiBAcmV0dXJucyDlrozmlbTnmoTmqKHmgIHmoYblhoXlrrnlhYPntKBcbiAgICovXG4gIHByaXZhdGUgY3JlYXRlTW9kYWxXaXRoQnV0dG9ucyhcbiAgICBjb250ZW50OiBIVE1MRWxlbWVudCxcbiAgICBvbkNvbmZpcm0/OiAoKSA9PiB2b2lkLFxuICAgIG9uQ2FuY2VsPzogKCkgPT4gdm9pZCxcbiAgICBzaG93Q29uZmlybUJ1dHRvbjogYm9vbGVhbiA9IHRydWUsXG4gICAgY29uZmlybVRleHQ6IHN0cmluZyA9ICfnoa7orqQnLFxuICAgIGNhbmNlbFRleHQ6IHN0cmluZyA9ICflj5bmtognLFxuICApOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAvLyDmt7vliqDkuLvopoHlhoXlrrlcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY29udGVudCk7XG5cbiAgICAvLyDliJvlu7rmjInpkq7ljLrln59cbiAgICBjb25zdCBidXR0b25BcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYnV0dG9uQXJlYS5jbGFzc05hbWUgPSAnbW9kYWwtYnV0dG9ucyc7XG5cbiAgICAvLyDlj5bmtojmjInpkq5cbiAgICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBjYW5jZWxCdG4uY2xhc3NOYW1lID0gJ21vZGFsLWJ0biBjYW5jZWwtYnRuJztcbiAgICBjYW5jZWxCdG4udGV4dENvbnRlbnQgPSBjYW5jZWxUZXh0O1xuICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuaGFuZGxlTW9kYWxDYW5jZWwob25DYW5jZWwpO1xuICAgIH0pO1xuXG4gICAgYnV0dG9uQXJlYS5hcHBlbmRDaGlsZChjYW5jZWxCdG4pO1xuXG4gICAgLy8g56Gu6K6k5oyJ6ZKu77yI5Y+v6YCJ77yJXG4gICAgaWYgKHNob3dDb25maXJtQnV0dG9uICYmIG9uQ29uZmlybSkge1xuICAgICAgY29uc3QgY29uZmlybUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgY29uZmlybUJ0bi5jbGFzc05hbWUgPSAnbW9kYWwtYnRuIGNvbmZpcm0tYnRuJztcbiAgICAgIGNvbmZpcm1CdG4udGV4dENvbnRlbnQgPSBjb25maXJtVGV4dDtcbiAgICAgIGNvbmZpcm1CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuaGFuZGxlTW9kYWxDb25maXJtKG9uQ29uZmlybSk7XG4gICAgICB9KTtcbiAgICAgIGJ1dHRvbkFyZWEuYXBwZW5kQ2hpbGQoY29uZmlybUJ0bik7XG4gICAgfVxuXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGJ1dHRvbkFyZWEpO1xuXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlVHJhbnNmZXJDbGljayhtZXNzYWdlOiBDaGF0TWVzc2FnZSwgc3RhdHVzRWxlbWVudD86IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgLy8g5Y+q5pyJ6Z2e55So5oi35Y+R6YCB55qE6L2s6LSm5omN5pi+56S65by556qXXG4gICAgaWYgKG1lc3NhZ2Uuc2VuZGVyID09PSAne3t1c2VyfX0nIHx8IG1lc3NhZ2Uuc2VuZGVyID09PSAndXNlcicpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwYXJ0cyA9IG1lc3NhZ2UuY29udGVudC5zcGxpdCgnfCcpO1xuICAgIGNvbnN0IGFtb3VudCA9IHBhcnRzWzBdIHx8ICcwJztcblxuICAgIC8vIOS7juS/neWtmOeahOaVsOaNruS4reiOt+WPluWOn+Wni+i9rOi0pueVmeiogFxuICAgIGNvbnN0IG9yaWdpbmFsTm90ZSA9IG1lc3NhZ2UuZGF0YT8ub3JpZ2luYWxOb3RlIHx8ICcnO1xuXG4gICAgdGhpcy5zaG93VHJhbnNmZXJNb2RhbChtZXNzYWdlLnNlbmRlciwgYW1vdW50LCBvcmlnaW5hbE5vdGUsIChhY2NlcHRlZDogYm9vbGVhbikgPT4ge1xuICAgICAgY29uc3Qgc3RhdHVzVGV4dCA9IGFjY2VwdGVkID8gJ+W3suaOpeaUticgOiAn5bey6YCA5ZueJztcblxuICAgICAgaWYgKHN0YXR1c0VsZW1lbnQpIHtcbiAgICAgICAgc3RhdHVzRWxlbWVudC50ZXh0Q29udGVudCA9IHN0YXR1c1RleHQ7XG4gICAgICAgIC8vIOenu+mZpOaXp+eahOeKtuaAgeexu1xuICAgICAgICBzdGF0dXNFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2NvbXBsZXRlZCcsICdmYWlsZWQnKTtcbiAgICAgICAgLy8g5re75Yqg5paw55qE54q25oCB57G7XG4gICAgICAgIHN0YXR1c0VsZW1lbnQuY2xhc3NMaXN0LmFkZChhY2NlcHRlZCA/ICdjb21wbGV0ZWQnIDogJ2ZhaWxlZCcpO1xuICAgICAgfVxuXG4gICAgICAvLyDmm7TmlrDljp/lp4vovazotKbmtojmga/nmoTnirbmgIFcbiAgICAgIG1lc3NhZ2UuY29udGVudCA9IGAke2Ftb3VudH18JHtzdGF0dXNUZXh0fWA7XG5cbiAgICAgIC8vIOWPkemAgeeUqOaIt+eahOi9rOi0puWTjeW6lOa2iOaBr1xuICAgICAgdGhpcy5zZW5kVHJhbnNmZXJSZXNwb25zZShtZXNzYWdlLnNlbmRlciwgYW1vdW50LCBhY2NlcHRlZCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog5pi+56S66L2s6LSm56Gu6K6k5by556qXXG4gICAqL1xuICBwcml2YXRlIHNob3dUcmFuc2Zlck1vZGFsKFxuICAgIHNlbmRlck5hbWU6IHN0cmluZyxcbiAgICBhbW91bnQ6IHN0cmluZyxcbiAgICBub3RlOiBzdHJpbmcsXG4gICAgY2FsbGJhY2s6IChhY2NlcHRlZDogYm9vbGVhbikgPT4gdm9pZCxcbiAgKTogdm9pZCB7XG4gICAgLy8g5Yib5bu66YGu572p5bGCXG4gICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIG92ZXJsYXkuY2xhc3NOYW1lID0gJ21vZGFsLW92ZXJsYXknO1xuXG4gICAgLy8g5Yib5bu65by556qXIC0g5L2/55SoSFRNTOaooeadv1xuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29uc3QgdHJhbnNmZXJNb2RhbFRlbXBsYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RyYW5zZmVyTW9kYWxUZW1wbGF0ZScpO1xuICAgIGlmICh0cmFuc2Zlck1vZGFsVGVtcGxhdGUpIHtcbiAgICAgIG1vZGFsLmlubmVySFRNTCA9IHRyYW5zZmVyTW9kYWxUZW1wbGF0ZS5pbm5lckhUTUw7XG4gICAgICBtb2RhbC5jbGFzc05hbWUgPSAndHJhbnNmZXItbW9kYWwnO1xuXG4gICAgICAvLyDloavlhYXliqjmgIHmlbDmja5cbiAgICAgIGNvbnN0IHNlbmRlck5hbWVTcGFuID0gbW9kYWwucXVlcnlTZWxlY3RvcignLnNlbmRlci1uYW1lJyk7XG4gICAgICBjb25zdCBhbW91bnRWYWx1ZVNwYW4gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCcuYW1vdW50LXZhbHVlJyk7XG4gICAgICBjb25zdCB0cmFuc2Zlck5vdGVTcGFuID0gbW9kYWwucXVlcnlTZWxlY3RvcignLnRyYW5zZmVyLW5vdGUnKTtcblxuICAgICAgaWYgKHNlbmRlck5hbWVTcGFuKSBzZW5kZXJOYW1lU3Bhbi50ZXh0Q29udGVudCA9IHNlbmRlck5hbWU7XG4gICAgICBpZiAoYW1vdW50VmFsdWVTcGFuKSBhbW91bnRWYWx1ZVNwYW4udGV4dENvbnRlbnQgPSBhbW91bnQ7XG4gICAgICBpZiAodHJhbnNmZXJOb3RlU3BhbikgdHJhbnNmZXJOb3RlU3Bhbi50ZXh0Q29udGVudCA9IG5vdGUgfHwgJ+i9rOi0pic7XG4gICAgfVxuXG4gICAgLy8gQ1NT5Yqo55S75bey5ZyoU0NTU+aWh+S7tuS4reWumuS5iVxuXG4gICAgb3ZlcmxheS5hcHBlbmRDaGlsZChtb2RhbCk7XG4gICAgLy8g5re75Yqg5pi+56S65Yqo55S7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBvdmVybGF5LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgICB9LCAxMCk7XG5cbiAgICAvLyDlsIbpga7nvanlsYLmt7vliqDliLDmiYvmnLrnlYzpnaLlrrnlmajkuK3vvIzogIzkuI3mmK/mlbTkuKrpobXpnaJcbiAgICBjb25zdCBpbnRlcmZhY2VDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW50ZXJmYWNlLWNvbnRhaW5lcicpO1xuICAgIGlmIChpbnRlcmZhY2VDb250YWluZXIpIHtcbiAgICAgIGludGVyZmFjZUNvbnRhaW5lci5hcHBlbmRDaGlsZChvdmVybGF5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8g5aaC5p6c5om+5LiN5Yiw55WM6Z2i5a655Zmo77yM5YiZ5re75Yqg5Yiw6IGK5aSp55WM6Z2iXG4gICAgICBjb25zdCBjaGF0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQtY29udGFpbmVyJyk7XG4gICAgICBpZiAoY2hhdENvbnRhaW5lcikge1xuICAgICAgICBjaGF0Q29udGFpbmVyLmFwcGVuZENoaWxkKG92ZXJsYXkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdmVybGF5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDmjInpkq7kuovku7ZcbiAgICBjb25zdCBhY2NlcHRCdG4gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCcuYWNjZXB0LWJ0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgIGNvbnN0IHJlamVjdEJ0biA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5yZWplY3QtYnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG5cbiAgICBjb25zdCByZW1vdmVUcmFuc2Zlck92ZXJsYXkgPSAoKSA9PiB7XG4gICAgICBpZiAob3ZlcmxheS5wYXJlbnROb2RlKSB7XG4gICAgICAgIG92ZXJsYXkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvdmVybGF5KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgYWNjZXB0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY2FsbGJhY2sodHJ1ZSk7XG4gICAgICByZW1vdmVUcmFuc2Zlck92ZXJsYXkoKTtcbiAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXlTb3VuZCgnY2xpY2snKTtcbiAgICB9KTtcblxuICAgIHJlamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGNhbGxiYWNrKGZhbHNlKTtcbiAgICAgIHJlbW92ZVRyYW5zZmVyT3ZlcmxheSgpO1xuICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdjbGljaycpO1xuICAgIH0pO1xuXG4gICAgLy8g54K55Ye76YGu572p5YWz6ZetXG4gICAgb3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgaWYgKGUudGFyZ2V0ID09PSBvdmVybGF5KSB7XG4gICAgICAgIHJlbW92ZVRyYW5zZmVyT3ZlcmxheSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOWPkemAgei9rOi0puWTjeW6lOa2iOaBr1xuICAgKi9cbiAgcHJpdmF0ZSBzZW5kVHJhbnNmZXJSZXNwb25zZShzZW5kZXJOYW1lOiBzdHJpbmcsIGFtb3VudDogc3RyaW5nLCBhY2NlcHRlZDogYm9vbGVhbik6IHZvaWQge1xuICAgIC8vIOeUn+aIkOi9rOi0puWTjeW6lOa2iOaBr+eahOWUr+S4gOagh+ivhuesplxuICAgIGNvbnN0IHRyYW5zZmVyUmVzcG9uc2VJZCA9IGB0cmFuc2Zlcl9yZXNwb25zZV8ke3NlbmRlck5hbWV9XyR7YW1vdW50fWA7XG5cbiAgICAvLyDnoa7lrprnirbmgIHmlofmnKxcbiAgICBjb25zdCBzdGF0dXNUZXh0ID0gYWNjZXB0ZWQgPyAn5bey5o6l5pS2JyA6ICflt7LpgIDlm54nO1xuXG4gICAgLy8g5Yik5pat5piv5ZCm576k6IGK77ya5LyY5YWI55yLIENoYXREYXRhLnR5cGXvvIzlhbbmrKHnnIsgY2hhdElkIOWJjee8gFxuICAgIGNvbnN0IGN1cnJlbnRDaGF0RGF0YSA9IHRoaXMuY2hhdERhdGEuZ2V0KHRoaXMuY3VycmVudENoYXQpO1xuICAgIGNvbnN0IGlzR3JvdXBDaGF0ID0gKGN1cnJlbnRDaGF0RGF0YSBhcyBhbnkpPy50eXBlID09PSAnZ3JvdXAnIHx8IHRoaXMuY3VycmVudENoYXQuc3RhcnRzV2l0aCgn576k6IGKJyk7XG5cbiAgICAvLyDliJvlu7rovazotKbmoLzlvI/nmoTlk43lupTmtojmga9cbiAgICBjb25zdCByZXNwb25zZU1lc3NhZ2U6IENoYXRNZXNzYWdlID0ge1xuICAgICAgaWQ6IHRyYW5zZmVyUmVzcG9uc2VJZCxcbiAgICAgIHR5cGU6IGlzR3JvdXBDaGF0ID8gJ0cnIDogJ1MnLFxuICAgICAgY2hhdElkOiB0aGlzLmN1cnJlbnRDaGF0LFxuICAgICAgc2VuZGVyOiAne3t1c2VyfX0nLFxuICAgICAgYXZhdGFyOiAnJyxcbiAgICAgIG1lc3NhZ2VUeXBlOiAndHJhbnNmZXInLCAvLyDkvb/nlKjovazotKbmtojmga/nsbvlnotcbiAgICAgIGNvbnRlbnQ6IGAke2Ftb3VudH18JHtzdGF0dXNUZXh0fWAsIC8vIOi9rOi0puagvOW8j++8mumHkeminXznirbmgIFcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoJ3poLUNOJywge1xuICAgICAgICBob3VyOiAnMi1kaWdpdCcsXG4gICAgICAgIG1pbnV0ZTogJzItZGlnaXQnLFxuICAgICAgfSksXG4gICAgfTtcblxuICAgIC8vIOajgOafpeWPkemAgemYn+WIl+S4reaYr+WQpuW3suWtmOWcqOebuOWQjOi9rOi0pueahOWTjeW6lOa2iOaBr1xuICAgIGNvbnN0IGV4aXN0aW5nSW5kZXggPSB0aGlzLnNlbmRRdWV1ZS5maW5kSW5kZXgoXG4gICAgICBtc2cgPT5cbiAgICAgICAgbXNnLmlkID09PSB0cmFuc2ZlclJlc3BvbnNlSWQgfHxcbiAgICAgICAgKG1zZy5jb250ZW50LmluY2x1ZGVzKGFtb3VudCkgJiYgbXNnLnNlbmRlciA9PT0gJ3t7dXNlcn19JyAmJiBtc2cubWVzc2FnZVR5cGUgPT09ICd0cmFuc2ZlcicpLFxuICAgICk7XG5cbiAgICBpZiAoZXhpc3RpbmdJbmRleCAhPT0gLTEpIHtcbiAgICAgIC8vIOWmguaenOWtmOWcqO+8jOabv+aNoueOsOaciea2iOaBr1xuICAgICAgdGhpcy5zZW5kUXVldWVbZXhpc3RpbmdJbmRleF0gPSByZXNwb25zZU1lc3NhZ2U7XG4gICAgICBjb25zb2xlLmxvZygn5pu/5o2i6L2s6LSm5ZON5bqU5raI5oGvOicsIHJlc3BvbnNlTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIOWmguaenOS4jeWtmOWcqO+8jOa3u+WKoOaWsOa2iOaBr1xuICAgICAgdGhpcy5zZW5kUXVldWUucHVzaChyZXNwb25zZU1lc3NhZ2UpO1xuICAgICAgY29uc29sZS5sb2coJ+a3u+WKoOi9rOi0puWTjeW6lOa2iOaBrzonLCByZXNwb25zZU1lc3NhZ2UpO1xuICAgIH1cblxuICAgIC8vIOabtOaWsOW+heWPkemAgea2iOaBr+aYvuekulxuICAgIHRoaXMucmVuZGVyQ3VycmVudENoYXQoKTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlTWVzc2FnZUVkaXQobWVzc2FnZTogQ2hhdE1lc3NhZ2UpOiB2b2lkIHtcbiAgICAvLyDlj6rlhYHorrjnvJbovpHlvoXlj5HpgIHnmoTmtojmga9cbiAgICBpZiAoIW1lc3NhZ2UuaXNQZW5kaW5nKSB7XG4gICAgICBjb25zb2xlLmxvZygn5Y+q6IO957yW6L6R5b6F5Y+R6YCB55qE5raI5oGvJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8g5Yib5bu657yW6L6R5by556qXXG4gICAgdGhpcy5zaG93RWRpdERpYWxvZyhtZXNzYWdlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmmL7npLrnvJbovpHlvLnnqpdcbiAgICovXG4gIHByaXZhdGUgc2hvd0VkaXREaWFsb2cobWVzc2FnZTogQ2hhdE1lc3NhZ2UpOiB2b2lkIHtcbiAgICAvLyDliJvlu7rlvLnnqpfog4zmma9cbiAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgb3ZlcmxheS5jbGFzc05hbWUgPSAnZWRpdC1tb2RhbC1vdmVybGF5JztcblxuICAgIC8vIOWIm+W7uuW8ueeql+WGheWuuVxuICAgIGNvbnN0IGRpYWxvZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRpYWxvZy5jbGFzc05hbWUgPSAnZWRpdC1tb2RhbC1kaWFsb2cnO1xuXG4gICAgLy8g5Yib5bu65qCH6aKYXG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xuICAgIHRpdGxlLnRleHRDb250ZW50ID0gJ+e8lui+kea2iOaBryc7XG4gICAgdGl0bGUuY2xhc3NOYW1lID0gJ2VkaXQtbW9kYWwtdGl0bGUnO1xuXG4gICAgLy8g5Yib5bu66L6T5YWl5qGGXG4gICAgY29uc3QgdGV4dGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgIHRleHRhcmVhLnZhbHVlID0gbWVzc2FnZS5jb250ZW50O1xuICAgIHRleHRhcmVhLmNsYXNzTmFtZSA9ICdlZGl0LW1vZGFsLXRleHRhcmVhJztcblxuICAgIC8vIOWIm+W7uuaMiemSruWuueWZqFxuICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGJ1dHRvbkNvbnRhaW5lci5jbGFzc05hbWUgPSAnZWRpdC1tb2RhbC1idXR0b25zJztcblxuICAgIC8vIOWIm+W7uuWPlua2iOaMiemSrlxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGNhbmNlbEJ0bi50ZXh0Q29udGVudCA9ICflj5bmtognO1xuICAgIGNhbmNlbEJ0bi5jbGFzc05hbWUgPSAnZWRpdC1tb2RhbC1jYW5jZWwtYnRuJztcblxuICAgIC8vIOWIm+W7uuehruiupOaMiemSrlxuICAgIGNvbnN0IGNvbmZpcm1CdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBjb25maXJtQnRuLnRleHRDb250ZW50ID0gJ+ehruiupCc7XG4gICAgY29uZmlybUJ0bi5jbGFzc05hbWUgPSAnZWRpdC1tb2RhbC1jb25maXJtLWJ0bic7XG5cbiAgICBjb25zdCByZW1vdmVFZGl0T3ZlcmxheSA9ICgpID0+IHtcbiAgICAgIGlmIChvdmVybGF5LnBhcmVudE5vZGUpIHtcbiAgICAgICAgb3ZlcmxheS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG92ZXJsYXkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyDmjInpkq7kuovku7ZcbiAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICByZW1vdmVFZGl0T3ZlcmxheSgpO1xuICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdjbGljaycpO1xuICAgIH0pO1xuXG4gICAgY29uZmlybUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGNvbnN0IG5ld0NvbnRlbnQgPSB0ZXh0YXJlYS52YWx1ZS50cmltKCk7XG4gICAgICBpZiAobmV3Q29udGVudCAmJiBuZXdDb250ZW50ICE9PSBtZXNzYWdlLmNvbnRlbnQpIHtcbiAgICAgICAgdGhpcy51cGRhdGVNZXNzYWdlSW5RdWV1ZShtZXNzYWdlLmlkLCBuZXdDb250ZW50KTtcbiAgICAgICAgY29uc29sZS5sb2coYOa2iOaBr+W3suabtOaWsDogJHttZXNzYWdlLmNvbnRlbnR9IC0+ICR7bmV3Q29udGVudH1gKTtcbiAgICAgIH1cbiAgICAgIHJlbW92ZUVkaXRPdmVybGF5KCk7XG4gICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5U291bmQoJ3NlbmQnKTtcbiAgICB9KTtcblxuICAgIC8vIOe7hOijheW8ueeql1xuICAgIGJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW5jZWxCdG4pO1xuICAgIGJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChjb25maXJtQnRuKTtcbiAgICBkaWFsb2cuYXBwZW5kQ2hpbGQodGl0bGUpO1xuICAgIGRpYWxvZy5hcHBlbmRDaGlsZCh0ZXh0YXJlYSk7XG4gICAgZGlhbG9nLmFwcGVuZENoaWxkKGJ1dHRvbkNvbnRhaW5lcik7XG4gICAgb3ZlcmxheS5hcHBlbmRDaGlsZChkaWFsb2cpO1xuXG4gICAgLy8g5bCG6YGu572p5bGC5re75Yqg5Yiw5omL5py655WM6Z2i5a655Zmo5LitXG4gICAgY29uc3QgaW50ZXJmYWNlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmludGVyZmFjZS1jb250YWluZXInKTtcbiAgICBpZiAoaW50ZXJmYWNlQ29udGFpbmVyKSB7XG4gICAgICBpbnRlcmZhY2VDb250YWluZXIuYXBwZW5kQ2hpbGQob3ZlcmxheSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIOWmguaenOaJvuS4jeWIsOeVjOmdouWuueWZqO+8jOWImea3u+WKoOWIsOiBiuWkqeeVjOmdolxuICAgICAgY29uc3QgY2hhdEludGVyZmFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LWludGVyZmFjZScpO1xuICAgICAgaWYgKGNoYXRJbnRlcmZhY2UpIHtcbiAgICAgICAgY2hhdEludGVyZmFjZS5hcHBlbmRDaGlsZChvdmVybGF5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQob3ZlcmxheSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGV4dGFyZWEuZm9jdXMoKTtcbiAgICB0ZXh0YXJlYS5zZWxlY3QoKTtcblxuICAgIGNvbnN0IHJlbW92ZUVkaXRNb2RhbE92ZXJsYXkgPSAoKSA9PiB7XG4gICAgICBpZiAob3ZlcmxheS5wYXJlbnROb2RlKSB7XG4gICAgICAgIG92ZXJsYXkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvdmVybGF5KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8g54K55Ye76IOM5pmv5YWz6ZetXG4gICAgb3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgaWYgKGUudGFyZ2V0ID09PSBvdmVybGF5KSB7XG4gICAgICAgIHJlbW92ZUVkaXRNb2RhbE92ZXJsYXkoKTtcbiAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdjbGljaycpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOabtOaWsOmYn+WIl+S4reeahOa2iOaBr+WGheWuuVxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVNZXNzYWdlSW5RdWV1ZShtZXNzYWdlSWQ6IHN0cmluZywgbmV3Q29udGVudDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgbWVzc2FnZUluZGV4ID0gdGhpcy5zZW5kUXVldWUuZmluZEluZGV4KG1zZyA9PiBtc2cuaWQgPT09IG1lc3NhZ2VJZCk7XG4gICAgaWYgKG1lc3NhZ2VJbmRleCAhPT0gLTEpIHtcbiAgICAgIHRoaXMuc2VuZFF1ZXVlW21lc3NhZ2VJbmRleF0uY29udGVudCA9IG5ld0NvbnRlbnQ7XG5cbiAgICAgIC8vIOWPqumHjeaWsOa4suafk+i/meS4gOadoea2iOaBr++8jOiAjOS4jeaYr+aVtOS4quiBiuWkqVxuICAgICAgdGhpcy51cGRhdGVTaW5nbGVNZXNzYWdlKG1lc3NhZ2VJZCwgdGhpcy5zZW5kUXVldWVbbWVzc2FnZUluZGV4XSk7XG5cbiAgICAgIGNvbnNvbGUubG9nKGDpmJ/liJfkuK3nmoTmtojmga/lt7Lmm7TmlrDvvIzmtojmga9JRDogJHttZXNzYWdlSWR9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOabtOaWsOWNleadoea2iOaBr+eahOaYvuekulxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVTaW5nbGVNZXNzYWdlKG1lc3NhZ2VJZDogc3RyaW5nLCB1cGRhdGVkTWVzc2FnZTogQ2hhdE1lc3NhZ2UpOiB2b2lkIHtcbiAgICAvLyDmib7liLDlr7nlupTnmoTmtojmga/lhYPntKBcbiAgICBjb25zdCBtZXNzYWdlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLW1lc3NhZ2UtaWQ9XCIke21lc3NhZ2VJZH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcbiAgICBpZiAoIW1lc3NhZ2VFbGVtZW50KSB7XG4gICAgICBjb25zb2xlLndhcm4oYOaJvuS4jeWIsOa2iOaBr+WFg+e0oO+8jElEOiAke21lc3NhZ2VJZH1gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyDliJvlu7rmlrDnmoTmtojmga/lhYPntKBcbiAgICBjb25zdCBuZXdNZXNzYWdlRWxlbWVudCA9IHRoaXMuY3JlYXRlTWVzc2FnZUVsZW1lbnQodXBkYXRlZE1lc3NhZ2UpO1xuXG4gICAgLy8g5pu/5o2i5pen55qE5raI5oGv5YWD57SgXG4gICAgbWVzc2FnZUVsZW1lbnQucGFyZW50Tm9kZT8ucmVwbGFjZUNoaWxkKG5ld01lc3NhZ2VFbGVtZW50LCBtZXNzYWdlRWxlbWVudCk7XG5cbiAgICBjb25zb2xlLmxvZyhg5Y2V5p2h5raI5oGv5bey5pu05paw5pi+56S677yMSUQ6ICR7bWVzc2FnZUlkfWApO1xuICB9XG5cbiAgLyoqXG4gICAqIOa3u+WKoOa2iOaBr+WIsOWPkemAgemYn+WIl1xuICAgKi9cbiAgcHJpdmF0ZSBhZGRUb1NlbmRRdWV1ZShtZXNzYWdlOiBDaGF0TWVzc2FnZSk6IHZvaWQge1xuICAgIC8vIOajgOafpeaYr+WQpuW3suWtmOWcqOebuOWQjElE55qE5raI5oGvXG4gICAgY29uc3QgZXhpc3RpbmdJbmRleCA9IHRoaXMuc2VuZFF1ZXVlLmZpbmRJbmRleChtc2cgPT4gbXNnLmlkID09PSBtZXNzYWdlLmlkKTtcblxuICAgIGlmIChleGlzdGluZ0luZGV4ICE9PSAtMSkge1xuICAgICAgLy8g5pu05paw546w5pyJ5raI5oGvXG4gICAgICB0aGlzLnNlbmRRdWV1ZVtleGlzdGluZ0luZGV4XSA9IG1lc3NhZ2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIOa3u+WKoOaWsOa2iOaBr1xuICAgICAgdGhpcy5zZW5kUXVldWUucHVzaChtZXNzYWdlKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhg5raI5oGv5bey5re75Yqg5Yiw6Zif5YiX77yM5b2T5YmN5b6F5Y+R6YCB5raI5oGvOiAke3RoaXMuc2VuZFF1ZXVlLmxlbmd0aH1gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDku47lj5HpgIHpmJ/liJfkuK3np7vpmaTmtojmga9cbiAgICovXG4gIHByaXZhdGUgcmVtb3ZlRnJvbVNlbmRRdWV1ZShtZXNzYWdlSWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5zZW5kUXVldWUuZmluZEluZGV4KG1zZyA9PiBtc2cuaWQgPT09IG1lc3NhZ2VJZCk7XG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgdGhpcy5zZW5kUXVldWUuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIGNvbnNvbGUubG9nKCfmtojmga/lt7Lku47pmJ/liJfnp7vpmaQnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5b2T5YmN6IGK5aSp55qE5b6F5Y+R6YCB5raI5oGvXG4gICAqL1xuICBwcml2YXRlIGdldFBlbmRpbmdNZXNzYWdlc0ZvckN1cnJlbnRDaGF0KCk6IENoYXRNZXNzYWdlW10ge1xuICAgIHJldHVybiB0aGlzLnNlbmRRdWV1ZS5maWx0ZXIobXNnID0+IG1zZy5jaGF0SWQgPT09IHRoaXMuY3VycmVudENoYXQpO1xuICB9XG5cblxuICBwcml2YXRlIGdlbmVyYXRlTWVzc2FnZUlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdtc2dfJyArIERhdGUubm93KCkgKyAnXycgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgOSk7XG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5b2T5YmN5pe26Ze0XG4gICAqIOWmguaenOacieWOhuWPsuiusOW9le+8jOS9v+eUqOacgOaWsOa2iOaBr+aXtumXtCsx5YiG6ZKf77yb5ZCm5YiZ5L2/55So55yf5a6e5pe26Ze0XG4gICAqIEByZXR1cm5zIOagvOW8j+WMlueahOaXtumXtOWtl+espuS4slxuICAgKi9cbiAgcHJpdmF0ZSBnZXRDdXJyZW50VGltZSgpOiBzdHJpbmcge1xuICAgIC8vIOiOt+WPluW9k+WJjeiBiuWkqeeahOaVsOaNrlxuICAgIGNvbnN0IGN1cnJlbnRDaGF0RGF0YSA9IHRoaXMuY2hhdERhdGEuZ2V0KHRoaXMuY3VycmVudENoYXQpO1xuXG4gICAgaWYgKGN1cnJlbnRDaGF0RGF0YSAmJiBjdXJyZW50Q2hhdERhdGEubWVzc2FnZXMgJiYgY3VycmVudENoYXREYXRhLm1lc3NhZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIOacieWOhuWPsuiusOW9le+8jOiOt+WPluacgOaWsOS4gOadoea2iOaBr+eahOaXtumXtFxuICAgICAgY29uc3QgbGFzdE1lc3NhZ2UgPSBjdXJyZW50Q2hhdERhdGEubWVzc2FnZXNbY3VycmVudENoYXREYXRhLm1lc3NhZ2VzLmxlbmd0aCAtIDFdO1xuXG4gICAgICBpZiAobGFzdE1lc3NhZ2UudGltZXN0YW1wKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8g6Kej5p6Q5pyA5paw5raI5oGv55qE5pe26Ze05oizXG4gICAgICAgICAgY29uc3QgbGFzdFRpbWUgPSB0aGlzLnBhcnNlVGltZVN0cmluZyhsYXN0TWVzc2FnZS50aW1lc3RhbXApO1xuICAgICAgICAgIGlmIChsYXN0VGltZSkge1xuICAgICAgICAgICAgLy8g5YqgMeWIhumSn1xuICAgICAgICAgICAgbGFzdFRpbWUuc2V0TWludXRlcyhsYXN0VGltZS5nZXRNaW51dGVzKCkgKyAxKTtcbiAgICAgICAgICAgIHJldHVybiBsYXN0VGltZS50b0xvY2FsZVRpbWVTdHJpbmcoJ3poLUNOJywge1xuICAgICAgICAgICAgICBob3VyOiAnMi1kaWdpdCcsXG4gICAgICAgICAgICAgIG1pbnV0ZTogJzItZGlnaXQnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUud2Fybign6Kej5p6Q5pyA5paw5raI5oGv5pe26Ze05aSx6LSl77yM5L2/55So5b2T5YmN5pe26Ze0OicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIOayoeacieWOhuWPsuiusOW9leaIluino+aekOWksei0pe+8jOS9v+eUqOW9k+WJjeecn+WunuaXtumXtFxuICAgIHJldHVybiBuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygnemgtQ04nLCB7XG4gICAgICBob3VyOiAnMi1kaWdpdCcsXG4gICAgICBtaW51dGU6ICcyLWRpZ2l0JyxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDop6PmnpDml7bpl7TlrZfnrKbkuLLkuLpEYXRl5a+56LGhXG4gICAqIEBwYXJhbSB0aW1lU3RyaW5nIOaXtumXtOWtl+espuS4siAo5aaCOiBcIjE0OjMwXCIpXG4gICAqIEByZXR1cm5zIERhdGXlr7nosaHmiJZudWxsXG4gICAqL1xuICBwcml2YXRlIHBhcnNlVGltZVN0cmluZyh0aW1lU3RyaW5nOiBzdHJpbmcpOiBEYXRlIHwgbnVsbCB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIOWMuemFjSBISDpNTSDmoLzlvI9cbiAgICAgIGNvbnN0IHRpbWVNYXRjaCA9IHRpbWVTdHJpbmcubWF0Y2goL14oXFxkezEsMn0pOihcXGR7Mn0pJC8pO1xuICAgICAgaWYgKHRpbWVNYXRjaCkge1xuICAgICAgICBjb25zdCBob3VycyA9IHBhcnNlSW50KHRpbWVNYXRjaFsxXSwgMTApO1xuICAgICAgICBjb25zdCBtaW51dGVzID0gcGFyc2VJbnQodGltZU1hdGNoWzJdLCAxMCk7XG5cbiAgICAgICAgaWYgKGhvdXJzID49IDAgJiYgaG91cnMgPD0gMjMgJiYgbWludXRlcyA+PSAwICYmIG1pbnV0ZXMgPD0gNTkpIHtcbiAgICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICBkYXRlLnNldEhvdXJzKGhvdXJzLCBtaW51dGVzLCAwLCAwKTtcbiAgICAgICAgICByZXR1cm4gZGF0ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2Fybign6Kej5p6Q5pe26Ze05a2X56ym5Liy5aSx6LSlOicsIHRpbWVTdHJpbmcsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDmuIXnkIbov4fmnJ/nmoTkuLTml7blm77niYfmlbDmja5cbiAgICovXG4gIHByaXZhdGUgY2xlYW51cFRlbXBJbWFnZXMoKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhsb2NhbFN0b3JhZ2UpO1xuICAgICAgY29uc3QgdGVtcEltYWdlS2V5cyA9IGtleXMuZmlsdGVyKGtleSA9PiBrZXkuc3RhcnRzV2l0aCgndGVtcF9pbWFnZV8nKSk7XG5cbiAgICAgIC8vIOWmguaenOS4tOaXtuWbvueJh+i2hei/hzUw5Liq77yM5riF55CG5pyA5pen55qEXG4gICAgICBpZiAodGVtcEltYWdlS2V5cy5sZW5ndGggPiA1MCkge1xuICAgICAgICAvLyDmjInml7bpl7TmiLPmjpLluo/vvIzliKDpmaTmnIDml6fnmoRcbiAgICAgICAgdGVtcEltYWdlS2V5cy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgY29uc3QgdGltZUEgPSBwYXJzZUludChhLnNwbGl0KCdfJylbMl0pIHx8IDA7XG4gICAgICAgICAgY29uc3QgdGltZUIgPSBwYXJzZUludChiLnNwbGl0KCdfJylbMl0pIHx8IDA7XG4gICAgICAgICAgcmV0dXJuIHRpbWVBIC0gdGltZUI7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOWIoOmZpOacgOaXp+eahOS4gOWNilxuICAgICAgICBjb25zdCB0b0RlbGV0ZSA9IHRlbXBJbWFnZUtleXMuc2xpY2UoMCwgTWF0aC5mbG9vcih0ZW1wSW1hZ2VLZXlzLmxlbmd0aCAvIDIpKTtcbiAgICAgICAgdG9EZWxldGUuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKGDmuIXnkIbkuoYgJHt0b0RlbGV0ZS5sZW5ndGh9IOS4quS4tOaXtuWbvueJh+aVsOaNrmApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ+a4heeQhuS4tOaXtuWbvueJh+aVsOaNruWksei0pTonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOWIm+W7uuWbvueJh+i+k+WFpeaooeaAgeahhuWGheWuuVxuICAgKiBAcmV0dXJucyDmqKHmgIHmoYblhoXlrrnlhYPntKBcbiAgICovXG4gIHByaXZhdGUgY3JlYXRlSW1hZ2VJbnB1dE1vZGFsKCk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZUlucHV0TW9kYWxUZW1wbGF0ZScpO1xuICAgIGlmICh0ZW1wbGF0ZSkge1xuICAgICAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY29udGVudC5pbm5lckhUTUwgPSB0ZW1wbGF0ZS5pbm5lckhUTUw7XG4gICAgICBjb25zdCBtb2RhbENvbnRlbnQgPSBjb250ZW50LmZpcnN0RWxlbWVudENoaWxkIGFzIEhUTUxFbGVtZW50O1xuXG4gICAgICAvLyDorr7nva7mlofku7bkuIrkvKDkuovku7bnm5HlkKzlmahcbiAgICAgIHRoaXMuc2V0dXBJbWFnZVVwbG9hZEV2ZW50cyhtb2RhbENvbnRlbnQpO1xuXG4gICAgICByZXR1cm4gbW9kYWxDb250ZW50O1xuICAgIH1cblxuICAgIC8vIOWmguaenOaooeadv+S4jeWtmOWcqO+8jOWbnumAgOWIsOWKqOaAgeWIm+W7uu+8iOS/neaMgeWQkeWQjuWFvOWuue+8iVxuICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb250ZW50LmNsYXNzTmFtZSA9ICdtb2RhbC1jb250ZW50JztcbiAgICBjb250ZW50LmlubmVySFRNTCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJpbWFnZS11cGxvYWQtc2VjdGlvblwiPlxuICAgICAgICA8bGFiZWwgY2xhc3M9XCJtb2RhbC1sYWJlbFwiPumAieaLqeWbvueJh++8mjwvbGFiZWw+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ1cGxvYWQtb3B0aW9uc1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1cGxvYWQtcm93XCI+XG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cInVwbG9hZC1idG4gbG9jYWwtdXBsb2FkLWJ0blwiIGlkPVwibG9jYWxVcGxvYWRCdG5cIj5cbiAgICAgICAgICAgICAg6YCJ5oup5pys5Zyw5paH5Lu2XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidXBsb2FkLWRpdmlkZXJcIj7miJY8L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInVwbG9hZC1yb3dcIj5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwibW9kYWwtaW5wdXQgdXJsLWlucHV0XCIgcGxhY2Vob2xkZXI9XCLovpPlhaXlm77niYfpk77mjqUuLi5cIiBpZD1cImltYWdlVXJsSW5wdXRcIiAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImZpbGUtcHJldmlld1wiIGlkPVwiZmlsZVByZXZpZXdcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+XG4gICAgICAgICAgPGltZyBpZD1cInByZXZpZXdJbWFnZVwiIGFsdD1cIumihOiniOWbvueJh1wiIC8+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZpbGUtaW5mb1wiPlxuICAgICAgICAgICAgPHNwYW4gaWQ9XCJmaWxlTmFtZVwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwicmVtb3ZlLWZpbGUtYnRuXCIgaWQ9XCJyZW1vdmVGaWxlQnRuXCI+4pyVPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICBcbiAgICAgIDxsYWJlbCBjbGFzcz1cIm1vZGFsLWxhYmVsIG1vZGFsLWxhYmVsLXNwYWNlZFwiPuWbvueJh+aPj+i/sO+8mjwvbGFiZWw+XG4gICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cIm1vZGFsLWlucHV0XCIgcGxhY2Vob2xkZXI9XCLor7fovpPlhaXlm77niYfmj4/ov7DvvIjlj6/pgInvvIkuLi5cIiBpZD1cImltYWdlRGVzY0lucHV0XCIgLz5cbiAgICAgIFxuICAgICAgPGlucHV0IHR5cGU9XCJmaWxlXCIgaWQ9XCJmaWxlSW5wdXRcIiBhY2NlcHQ9XCJpbWFnZS8qXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiIC8+XG4gICAgYDtcblxuICAgIC8vIOiuvue9ruaWh+S7tuS4iuS8oOS6i+S7tuebkeWQrOWZqFxuICAgIHRoaXMuc2V0dXBJbWFnZVVwbG9hZEV2ZW50cyhjb250ZW50KTtcblxuICAgIHJldHVybiBjb250ZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIOiuvue9ruWbvueJh+S4iuS8oOS6i+S7tuebkeWQrOWZqFxuICAgKiBAcGFyYW0gY29udGFpbmVyIOaooeaAgeahhuWuueWZqOWFg+e0oFxuICAgKi9cbiAgcHJpdmF0ZSBzZXR1cEltYWdlVXBsb2FkRXZlbnRzKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBjb25zdCBsb2NhbFVwbG9hZEJ0biA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjbG9jYWxVcGxvYWRCdG4nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICBjb25zdCBmaWxlSW5wdXQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignI2ZpbGVJbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgZmlsZVByZXZpZXcgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignI2ZpbGVQcmV2aWV3JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgY29uc3QgcHJldmlld0ltYWdlID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNwcmV2aWV3SW1hZ2UnKSBhcyBIVE1MSW1hZ2VFbGVtZW50O1xuICAgIGNvbnN0IGZpbGVOYW1lID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNmaWxlTmFtZScpIGFzIEhUTUxTcGFuRWxlbWVudDtcbiAgICBjb25zdCByZW1vdmVGaWxlQnRuID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNyZW1vdmVGaWxlQnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgY29uc3QgdXJsSW5wdXQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignI2ltYWdlVXJsSW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgLy8g5pys5Zyw5paH5Lu26YCJ5oup5oyJ6ZKu54K55Ye7XG4gICAgaWYgKGxvY2FsVXBsb2FkQnRuICYmIGZpbGVJbnB1dCkge1xuICAgICAgbG9jYWxVcGxvYWRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGZpbGVJbnB1dC5jbGljaygpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8g5paH5Lu26YCJ5oup5Y+Y5YyWXG4gICAgaWYgKGZpbGVJbnB1dCkge1xuICAgICAgZmlsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGUgPT4ge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICBjb25zdCBmaWxlID0gdGFyZ2V0LmZpbGVzPy5bMF07XG5cbiAgICAgICAgaWYgKGZpbGUpIHtcbiAgICAgICAgICB0aGlzLmhhbmRsZUZpbGVTZWxlY3Rpb24oZmlsZSwgZmlsZVByZXZpZXcsIHByZXZpZXdJbWFnZSwgZmlsZU5hbWUsIHVybElucHV0KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8g56e76Zmk5paH5Lu25oyJ6ZKu54K55Ye7XG4gICAgaWYgKHJlbW92ZUZpbGVCdG4pIHtcbiAgICAgIHJlbW92ZUZpbGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuY2xlYXJGaWxlU2VsZWN0aW9uKGZpbGVJbnB1dCwgZmlsZVByZXZpZXcsIHVybElucHV0KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFVSTOi+k+WFpeWPmOWMluaXtua4hemZpOaWh+S7tumAieaLqVxuICAgIGlmICh1cmxJbnB1dCkge1xuICAgICAgdXJsSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIGlmICh1cmxJbnB1dC52YWx1ZS50cmltKCkgJiYgZmlsZUlucHV0KSB7XG4gICAgICAgICAgdGhpcy5jbGVhckZpbGVTZWxlY3Rpb24oZmlsZUlucHV0LCBmaWxlUHJldmlldywgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlpITnkIbmlofku7bpgInmi6lcbiAgICogQHBhcmFtIGZpbGUg6YCJ5oup55qE5paH5Lu2XG4gICAqIEBwYXJhbSBmaWxlUHJldmlldyDpooTop4jlrrnlmahcbiAgICogQHBhcmFtIHByZXZpZXdJbWFnZSDpooTop4jlm77niYflhYPntKBcbiAgICogQHBhcmFtIGZpbGVOYW1lIOaWh+S7tuWQjeWFg+e0oFxuICAgKiBAcGFyYW0gdXJsSW5wdXQgVVJM6L6T5YWl5qGGXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZUZpbGVTZWxlY3Rpb24oXG4gICAgZmlsZTogRmlsZSxcbiAgICBmaWxlUHJldmlldzogSFRNTEVsZW1lbnQsXG4gICAgcHJldmlld0ltYWdlOiBIVE1MSW1hZ2VFbGVtZW50LFxuICAgIGZpbGVOYW1lOiBIVE1MU3BhbkVsZW1lbnQsXG4gICAgdXJsSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQsXG4gICk6IHZvaWQge1xuICAgIC8vIOmqjOivgeaWh+S7tuexu+Wei1xuICAgIGlmICghZmlsZS50eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKSB7XG4gICAgICB0aGlzLnNob3dUb2FzdCgn6K+36YCJ5oup5Zu+54mH5paH5Lu2JywgJ2Vycm9yJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8g6aqM6K+B5paH5Lu25aSn5bCP77yI6ZmQ5Yi25Li6NU1C77yJXG4gICAgY29uc3QgbWF4U2l6ZSA9IDUgKiAxMDI0ICogMTAyNDsgLy8gNU1CXG4gICAgaWYgKGZpbGUuc2l6ZSA+IG1heFNpemUpIHtcbiAgICAgIHRoaXMuc2hvd1RvYXN0KCflm77niYfmlofku7blpKflsI/kuI3og73otoXov4c1TUInLCAnZXJyb3InKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyDor7vlj5bmlofku7blubbmmL7npLrpooTop4hcbiAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgIHJlYWRlci5vbmxvYWQgPSBlID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGUudGFyZ2V0Py5yZXN1bHQgYXMgc3RyaW5nO1xuICAgICAgaWYgKHByZXZpZXdJbWFnZSAmJiBmaWxlTmFtZSAmJiBmaWxlUHJldmlldykge1xuICAgICAgICBwcmV2aWV3SW1hZ2Uuc3JjID0gcmVzdWx0O1xuICAgICAgICBmaWxlTmFtZS50ZXh0Q29udGVudCA9IGZpbGUubmFtZTtcbiAgICAgICAgZmlsZVByZXZpZXcuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcblxuICAgICAgICAvLyDmuIXnqbpVUkzovpPlhaXmoYZcbiAgICAgICAgaWYgKHVybElucHV0KSB7XG4gICAgICAgICAgdXJsSW5wdXQudmFsdWUgPSAnJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XG4gIH1cblxuICAvKipcbiAgICog5riF6Zmk5paH5Lu26YCJ5oupXG4gICAqIEBwYXJhbSBmaWxlSW5wdXQg5paH5Lu26L6T5YWl5YWD57SgXG4gICAqIEBwYXJhbSBmaWxlUHJldmlldyDpooTop4jlrrnlmahcbiAgICogQHBhcmFtIHVybElucHV0IFVSTOi+k+WFpeahhu+8iOWPr+mAie+8iVxuICAgKi9cbiAgcHJpdmF0ZSBjbGVhckZpbGVTZWxlY3Rpb24oXG4gICAgZmlsZUlucHV0OiBIVE1MSW5wdXRFbGVtZW50LFxuICAgIGZpbGVQcmV2aWV3OiBIVE1MRWxlbWVudCxcbiAgICB1cmxJbnB1dDogSFRNTElucHV0RWxlbWVudCB8IG51bGwsXG4gICk6IHZvaWQge1xuICAgIGlmIChmaWxlSW5wdXQpIHtcbiAgICAgIGZpbGVJbnB1dC52YWx1ZSA9ICcnO1xuICAgIH1cbiAgICBpZiAoZmlsZVByZXZpZXcpIHtcbiAgICAgIGZpbGVQcmV2aWV3LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfVxuICAgIGlmICh1cmxJbnB1dCkge1xuICAgICAgdXJsSW5wdXQudmFsdWUgPSAnJztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5Yib5bu66K+t6Z+z6L6T5YWl5qih5oCB5qGG5YaF5a65XG4gICAqIEByZXR1cm5zIOaooeaAgeahhuWGheWuueWFg+e0oFxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVWb2ljZUlucHV0TW9kYWwoKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZvaWNlSW5wdXRNb2RhbFRlbXBsYXRlJyk7XG4gICAgaWYgKHRlbXBsYXRlKSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBjb250ZW50LmlubmVySFRNTCA9IHRlbXBsYXRlLmlubmVySFRNTDtcbiAgICAgIHJldHVybiBjb250ZW50LmZpcnN0RWxlbWVudENoaWxkIGFzIEhUTUxFbGVtZW50O1xuICAgIH1cblxuICAgIC8vIOWmguaenOaooeadv+S4jeWtmOWcqO+8jOWbnumAgOWIsOWKqOaAgeWIm+W7uu+8iOS/neaMgeWQkeWQjuWFvOWuue+8iVxuICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb250ZW50LmNsYXNzTmFtZSA9ICdtb2RhbC1jb250ZW50JztcbiAgICBjb250ZW50LmlubmVySFRNTCA9IGBcbiAgICAgIDxsYWJlbCBjbGFzcz1cIm1vZGFsLWxhYmVsXCI+6K+t6Z+z5YaF5a6577yaPC9sYWJlbD5cbiAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwibW9kYWwtaW5wdXRcIiBwbGFjZWhvbGRlcj1cIuivt+i+k+WFpeivremfs+WGheWuuS4uLlwiIGlkPVwidm9pY2VDb250ZW50SW5wdXRcIiAvPlxuICAgICAgXG4gICAgICA8bGFiZWwgY2xhc3M9XCJtb2RhbC1sYWJlbCBtb2RhbC1sYWJlbC1zcGFjZWRcIj7or63pn7Pml7bplb/vvJo8L2xhYmVsPlxuICAgICAgPGlucHV0IHR5cGU9XCJudW1iZXJcIiBjbGFzcz1cIm1vZGFsLWlucHV0XCIgcGxhY2Vob2xkZXI9XCLor7fovpPlhaXml7bplb/vvIjnp5LvvIkuLi5cIiBpZD1cInZvaWNlRHVyYXRpb25JbnB1dFwiIG1pbj1cIjFcIiBtYXg9XCIzMDBcIiAvPlxuICAgIGA7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cblxuICAvKipcbiAgICog5Yib5bu65L2N572u6L6T5YWl5qih5oCB5qGG5YaF5a65XG4gICAqIEByZXR1cm5zIOaooeaAgeahhuWGheWuueWFg+e0oFxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVMb2NhdGlvbklucHV0TW9kYWwoKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvY2F0aW9uSW5wdXRNb2RhbFRlbXBsYXRlJyk7XG4gICAgaWYgKHRlbXBsYXRlKSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBjb250ZW50LmlubmVySFRNTCA9IHRlbXBsYXRlLmlubmVySFRNTDtcbiAgICAgIHJldHVybiBjb250ZW50LmZpcnN0RWxlbWVudENoaWxkIGFzIEhUTUxFbGVtZW50O1xuICAgIH1cblxuICAgIC8vIOWmguaenOaooeadv+S4jeWtmOWcqO+8jOWbnumAgOWIsOWKqOaAgeWIm+W7uu+8iOS/neaMgeWQkeWQjuWFvOWuue+8iVxuICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb250ZW50LmNsYXNzTmFtZSA9ICdtb2RhbC1jb250ZW50JztcbiAgICBjb250ZW50LmlubmVySFRNTCA9IGBcbiAgICAgIDxsYWJlbCBjbGFzcz1cIm1vZGFsLWxhYmVsXCI+5L2N572u5o+P6L+w77yaPC9sYWJlbD5cbiAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwibW9kYWwtaW5wdXRcIiBwbGFjZWhvbGRlcj1cIuivt+i+k+WFpeS9jee9ruaPj+i/sC4uLlwiIGlkPVwibG9jYXRpb25EZXNjSW5wdXRcIiAvPlxuICAgIGA7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cblxuICAvKipcbiAgICog5Yib5bu66L2s6LSm6L6T5YWl5qih5oCB5qGG5YaF5a65XG4gICAqIEByZXR1cm5zIOaooeaAgeahhuWGheWuueWFg+e0oFxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVUcmFuc2ZlcklucHV0TW9kYWwoKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RyYW5zZmVySW5wdXRNb2RhbFRlbXBsYXRlJyk7XG4gICAgaWYgKHRlbXBsYXRlKSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBjb250ZW50LmlubmVySFRNTCA9IHRlbXBsYXRlLmlubmVySFRNTDtcbiAgICAgIHJldHVybiBjb250ZW50LmZpcnN0RWxlbWVudENoaWxkIGFzIEhUTUxFbGVtZW50O1xuICAgIH1cblxuICAgIC8vIOWmguaenOaooeadv+S4jeWtmOWcqO+8jOWbnumAgOWIsOWKqOaAgeWIm+W7uu+8iOS/neaMgeWQkeWQjuWFvOWuue+8iVxuICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb250ZW50LmNsYXNzTmFtZSA9ICdtb2RhbC1jb250ZW50JztcbiAgICBjb250ZW50LmlubmVySFRNTCA9IGBcbiAgICAgIDxsYWJlbCBjbGFzcz1cIm1vZGFsLWxhYmVsXCI+6L2s6LSm6YeR6aKd77yaPC9sYWJlbD5cbiAgICAgIDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgY2xhc3M9XCJtb2RhbC1pbnB1dFwiIHBsYWNlaG9sZGVyPVwi6K+36L6T5YWl6L2s6LSm6YeR6aKdLi4uXCIgaWQ9XCJ0cmFuc2ZlckFtb3VudElucHV0XCIgbWluPVwiMC4wMVwiIHN0ZXA9XCIwLjAxXCIgLz5cbiAgICAgIFxuICAgICAgPGxhYmVsIGNsYXNzPVwibW9kYWwtbGFiZWwgbW9kYWwtbGFiZWwtc3BhY2VkXCI+6L2s6LSm5aSH5rOo77yaPC9sYWJlbD5cbiAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwibW9kYWwtaW5wdXRcIiBwbGFjZWhvbGRlcj1cIuivt+i+k+WFpei9rOi0puWkh+azqO+8iOWPr+mAie+8iS4uLlwiIGlkPVwidHJhbnNmZXJOb3RlSW5wdXRcIiAvPlxuICAgIGA7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cblxuICAvKipcbiAgICog5pi+56S65Zu+54mH6L6T5YWl5qih5oCB5qGGXG4gICAqL1xuICBwcml2YXRlIHNob3dJbWFnZUlucHV0TW9kYWwoKTogdm9pZCB7XG4gICAgY29uc3QgY29udGVudCA9IHRoaXMuY3JlYXRlSW1hZ2VJbnB1dE1vZGFsKCk7XG5cbiAgICAvLyDliJvlu7rluKbmjInpkq7nmoTmqKHmgIHmoYZcbiAgICBjb25zdCBtb2RhbENvbnRlbnQgPSB0aGlzLmNyZWF0ZU1vZGFsV2l0aEJ1dHRvbnMoXG4gICAgICBjb250ZW50LFxuICAgICAgKCkgPT4ge1xuICAgICAgICAvLyDnoa7orqTlm57osINcbiAgICAgICAgY29uc3QgdXJsSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1hZ2VVcmxJbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGRlc2NJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZURlc2NJbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGZpbGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlSW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICBjb25zdCBmaWxlUHJldmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlUHJldmlldycpIGFzIEhUTUxFbGVtZW50O1xuXG4gICAgICAgIGlmICh1cmxJbnB1dCAmJiBkZXNjSW5wdXQgJiYgZmlsZUlucHV0KSB7XG4gICAgICAgICAgY29uc3QgdXJsID0gdXJsSW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZGVzY0lucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgICAgICBjb25zdCBoYXNGaWxlID0gZmlsZUlucHV0LmZpbGVzICYmIGZpbGVJbnB1dC5maWxlcy5sZW5ndGggPiAwO1xuICAgICAgICAgIGNvbnN0IGhhc0ZpbGVQcmV2aWV3ID0gZmlsZVByZXZpZXcgJiYgZmlsZVByZXZpZXcuc3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnO1xuXG4gICAgICAgICAgLy8g6L6T5YWl6aqM6K+BIC0gVVJM44CB5paH5Lu25oiW5o+P6L+w6Iez5bCR6ZyA6KaB6L6T5YWl5LiA5LiqXG4gICAgICAgICAgaWYgKCF1cmwgJiYgIWhhc0ZpbGUgJiYgIWhhc0ZpbGVQcmV2aWV3ICYmICFkZXNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGhpcy5zaG93VG9hc3QoJ+ivt+mAieaLqeWbvueJh+aWh+S7tuOAgei+k+WFpeWbvueJh1VSTOaIluWbvueJh+aPj+i/sCcsICd3YXJuaW5nJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8g5aaC5p6c5pyJ5paH5Lu277yM5L2/55So5paH5Lu277yb5ZCm5YiZ5L2/55SoVVJMXG4gICAgICAgICAgaWYgKGhhc0ZpbGUgJiYgZmlsZUlucHV0LmZpbGVzKSB7XG4gICAgICAgICAgICBjb25zdCBmaWxlID0gZmlsZUlucHV0LmZpbGVzWzBdO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVJbWFnZU1lc3NhZ2VGcm9tRmlsZShmaWxlLCBkZXNjcmlwdGlvbik7XG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNGaWxlUHJldmlldykge1xuICAgICAgICAgICAgLy8g5aaC5p6c5pyJ6aKE6KeI5L2G5rKh5pyJ5paH5Lu277yI5Y+v6IO95piv5LuO6aKE6KeI5Lit6I635Y+W55qEYmFzZTY077yJXG4gICAgICAgICAgICBjb25zdCBwcmV2aWV3SW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJldmlld0ltYWdlJykgYXMgSFRNTEltYWdlRWxlbWVudDtcbiAgICAgICAgICAgIGlmIChwcmV2aWV3SW1hZ2UgJiYgcHJldmlld0ltYWdlLnNyYykge1xuICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUltYWdlTWVzc2FnZShwcmV2aWV3SW1hZ2Uuc3JjLCBkZXNjcmlwdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIOS9v+eUqFVSTFxuICAgICAgICAgICAgdGhpcy5jcmVhdGVJbWFnZU1lc3NhZ2UodXJsLCBkZXNjcmlwdGlvbik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5oaWRlTW9kYWwoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgICgpID0+IHtcbiAgICAgICAgLy8g5Y+W5raI5Zue6LCDXG4gICAgICAgIHRoaXMuaGlkZU1vZGFsKCk7XG4gICAgICB9LFxuICAgICk7XG5cbiAgICAvLyDmmL7npLrmqKHmgIHmoYbvvIjkuI3mkq3mlL7pn7PmlYjvvIzlm6DkuLrliqDlj7fmjInpkq7lt7Lnu4/mkq3mlL7kuoZlbW9qaemfs+aViO+8iVxuICAgIHRoaXMuc2hvd01vZGFsKCflj5HpgIHlm77niYcnLCBtb2RhbENvbnRlbnQsIGZhbHNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmmL7npLror63pn7PovpPlhaXmqKHmgIHmoYZcbiAgICovXG4gIHByaXZhdGUgc2hvd1ZvaWNlSW5wdXRNb2RhbCgpOiB2b2lkIHtcbiAgICBjb25zdCBjb250ZW50ID0gdGhpcy5jcmVhdGVWb2ljZUlucHV0TW9kYWwoKTtcblxuICAgIC8vIOWIm+W7uuW4puaMiemSrueahOaooeaAgeahhlxuICAgIGNvbnN0IG1vZGFsQ29udGVudCA9IHRoaXMuY3JlYXRlTW9kYWxXaXRoQnV0dG9ucyhcbiAgICAgIGNvbnRlbnQsXG4gICAgICAoKSA9PiB7XG4gICAgICAgIC8vIOehruiupOWbnuiwg1xuICAgICAgICBjb25zdCBjb250ZW50SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndm9pY2VDb250ZW50SW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICBjb25zdCBkdXJhdGlvbklucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZvaWNlRHVyYXRpb25JbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5cbiAgICAgICAgaWYgKGNvbnRlbnRJbnB1dCAmJiBkdXJhdGlvbklucHV0KSB7XG4gICAgICAgICAgY29uc3Qgdm9pY2VDb250ZW50ID0gY29udGVudElucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgICAgICBjb25zdCBkdXJhdGlvblN0ciA9IGR1cmF0aW9uSW5wdXQudmFsdWUudHJpbSgpO1xuXG4gICAgICAgICAgLy8g6L6T5YWl6aqM6K+BIC0g5YaF5a655ZKM5pe26ZW/6YO95b+F6aG75aGr5YaZXG4gICAgICAgICAgaWYgKCF2b2ljZUNvbnRlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCfor7fovpPlhaXor63pn7PlhoXlrrknLCAnd2FybmluZycpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghZHVyYXRpb25TdHIpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCfor7fovpPlhaXor63pn7Pml7bplb8nLCAnd2FybmluZycpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIOmqjOivgeaXtumVv+aYr+WQpuS4uuacieaViOaVsOWtl1xuICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID0gcGFyc2VGbG9hdChkdXJhdGlvblN0cik7XG4gICAgICAgICAgaWYgKGlzTmFOKGR1cmF0aW9uKSB8fCBkdXJhdGlvbiA8PSAwIHx8IGR1cmF0aW9uID4gMzAwKSB7XG4gICAgICAgICAgICB0aGlzLnNob3dUb2FzdCgn6K+36L6T5YWl5pyJ5pWI55qE5pe26ZW/77yIMS0zMDDnp5LvvIknLCAnd2FybmluZycpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIOWIm+W7uuivremfs+a2iOaBr1xuICAgICAgICAgIHRoaXMuY3JlYXRlVm9pY2VNZXNzYWdlKHZvaWNlQ29udGVudCwgZHVyYXRpb24pO1xuICAgICAgICAgIHRoaXMuaGlkZU1vZGFsKCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAoKSA9PiB7XG4gICAgICAgIC8vIOWPlua2iOWbnuiwg1xuICAgICAgICB0aGlzLmhpZGVNb2RhbCgpO1xuICAgICAgfSxcbiAgICApO1xuXG4gICAgLy8g5pi+56S65qih5oCB5qGG77yI5LiN5pKt5pS+6Z+z5pWI77yM5Zug5Li65Yqg5Y+35oyJ6ZKu5bey57uP5pKt5pS+5LqGZW1vamnpn7PmlYjvvIlcbiAgICB0aGlzLnNob3dNb2RhbCgn5Y+R6YCB6K+t6Z+zJywgbW9kYWxDb250ZW50LCBmYWxzZSk7XG4gIH1cblxuICAvKipcbiAgICog5pi+56S65L2N572u6L6T5YWl5qih5oCB5qGGXG4gICAqL1xuICBwcml2YXRlIHNob3dMb2NhdGlvbklucHV0TW9kYWwoKTogdm9pZCB7XG4gICAgY29uc3QgY29udGVudCA9IHRoaXMuY3JlYXRlTG9jYXRpb25JbnB1dE1vZGFsKCk7XG5cbiAgICAvLyDliJvlu7rluKbmjInpkq7nmoTmqKHmgIHmoYZcbiAgICBjb25zdCBtb2RhbENvbnRlbnQgPSB0aGlzLmNyZWF0ZU1vZGFsV2l0aEJ1dHRvbnMoXG4gICAgICBjb250ZW50LFxuICAgICAgKCkgPT4ge1xuICAgICAgICAvLyDnoa7orqTlm57osINcbiAgICAgICAgY29uc3QgZGVzY0lucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvY2F0aW9uRGVzY0lucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcblxuICAgICAgICBpZiAoZGVzY0lucHV0KSB7XG4gICAgICAgICAgY29uc3QgbG9jYXRpb25EZXNjID0gZGVzY0lucHV0LnZhbHVlLnRyaW0oKTtcblxuICAgICAgICAgIC8vIOi+k+WFpemqjOivgSAtIOS9jee9ruaPj+i/sOW/hemhu+Whq+WGmVxuICAgICAgICAgIGlmICghbG9jYXRpb25EZXNjKSB7XG4gICAgICAgICAgICB0aGlzLnNob3dUb2FzdCgn6K+36L6T5YWl5L2N572u5o+P6L+wJywgJ3dhcm5pbmcnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyDliJvlu7rkvY3nva7mtojmga9cbiAgICAgICAgICB0aGlzLmNyZWF0ZUxvY2F0aW9uTWVzc2FnZShsb2NhdGlvbkRlc2MpO1xuICAgICAgICAgIHRoaXMuaGlkZU1vZGFsKCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAoKSA9PiB7XG4gICAgICAgIC8vIOWPlua2iOWbnuiwg1xuICAgICAgICB0aGlzLmhpZGVNb2RhbCgpO1xuICAgICAgfSxcbiAgICApO1xuXG4gICAgLy8g5pi+56S65qih5oCB5qGG77yI5LiN5pKt5pS+6Z+z5pWI77yM5Zug5Li65Yqg5Y+35oyJ6ZKu5bey57uP5pKt5pS+5LqGZW1vamnpn7PmlYjvvIlcbiAgICB0aGlzLnNob3dNb2RhbCgn5YiG5Lqr5L2N572uJywgbW9kYWxDb250ZW50LCBmYWxzZSk7XG4gIH1cblxuICAvKipcbiAgICog5pi+56S66L2s6LSm6L6T5YWl5qih5oCB5qGGXG4gICAqL1xuICBwcml2YXRlIHNob3dUcmFuc2ZlcklucHV0TW9kYWwoKTogdm9pZCB7XG4gICAgY29uc3QgY29udGVudCA9IHRoaXMuY3JlYXRlVHJhbnNmZXJJbnB1dE1vZGFsKCk7XG5cbiAgICAvLyDliJvlu7rluKbmjInpkq7nmoTmqKHmgIHmoYZcbiAgICBjb25zdCBtb2RhbENvbnRlbnQgPSB0aGlzLmNyZWF0ZU1vZGFsV2l0aEJ1dHRvbnMoXG4gICAgICBjb250ZW50LFxuICAgICAgKCkgPT4ge1xuICAgICAgICAvLyDnoa7orqTlm57osINcbiAgICAgICAgY29uc3QgYW1vdW50SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJhbnNmZXJBbW91bnRJbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IG5vdGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0cmFuc2Zlck5vdGVJbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5cbiAgICAgICAgaWYgKGFtb3VudElucHV0ICYmIG5vdGVJbnB1dCkge1xuICAgICAgICAgIGNvbnN0IGFtb3VudFN0ciA9IGFtb3VudElucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgICAgICBjb25zdCBub3RlID0gbm90ZUlucHV0LnZhbHVlLnRyaW0oKTtcblxuICAgICAgICAgIC8vIOi+k+WFpemqjOivgSAtIOmHkemineW/hemhu+Whq+WGmVxuICAgICAgICAgIGlmICghYW1vdW50U3RyKSB7XG4gICAgICAgICAgICB0aGlzLnNob3dUb2FzdCgn6K+36L6T5YWl6L2s6LSm6YeR6aKdJywgJ3dhcm5pbmcnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyDpqozor4Hph5Hpop3mmK/lkKbkuLrmnInmlYjmlbDlrZdcbiAgICAgICAgICBjb25zdCBhbW91bnQgPSBwYXJzZUZsb2F0KGFtb3VudFN0cik7XG4gICAgICAgICAgaWYgKGlzTmFOKGFtb3VudCkgfHwgYW1vdW50IDw9IDApIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCfor7fovpPlhaXmnInmlYjnmoTovazotKbph5Hpop0nLCAnd2FybmluZycpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIOWIm+W7uui9rOi0pua2iOaBr1xuICAgICAgICAgIHRoaXMuY3JlYXRlVHJhbnNmZXJNZXNzYWdlKGFtb3VudCwgbm90ZSk7XG4gICAgICAgICAgdGhpcy5oaWRlTW9kYWwoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgICgpID0+IHtcbiAgICAgICAgLy8g5Y+W5raI5Zue6LCDXG4gICAgICAgIHRoaXMuaGlkZU1vZGFsKCk7XG4gICAgICB9LFxuICAgICk7XG5cbiAgICAvLyDmmL7npLrmqKHmgIHmoYbvvIjkuI3mkq3mlL7pn7PmlYjvvIzlm6DkuLrliqDlj7fmjInpkq7lt7Lnu4/mkq3mlL7kuoZlbW9qaemfs+aViO+8iVxuICAgIHRoaXMuc2hvd01vZGFsKCflj5HotbfovazotKYnLCBtb2RhbENvbnRlbnQsIGZhbHNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliJvlu7rlm77niYfmtojmga/lubbmt7vliqDliLDlj5HpgIHpmJ/liJdcbiAgICogQHBhcmFtIHVybCDlm77niYdVUkzvvIjlj6/pgInvvIlcbiAgICogQHBhcmFtIGRlc2NyaXB0aW9uIOWbvueJh+aPj+i/sO+8iOWPr+mAie+8iVxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVJbWFnZU1lc3NhZ2UodXJsOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBsZXQgbWVzc2FnZUNvbnRlbnQgPSAnJztcbiAgICBjb25zdCBpbWFnZURhdGE6IGFueSA9IHt9O1xuXG4gICAgY29uc29sZS5sb2coJ/CflI0gW0RFQlVHXSBjcmVhdGVJbWFnZU1lc3NhZ2Ug6LCD55SoOicsIHtcbiAgICAgIHVybDogdXJsLnN1YnN0cmluZygwLCAxMDApICsgKHVybC5sZW5ndGggPiAxMDAgPyAnLi4uJyA6ICcnKSxcbiAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgIGlzQmFzZTY0OiAhIXVybCAmJiB1cmwuc3RhcnRzV2l0aCgnZGF0YTonKSxcbiAgICAgIGlzSHR0cFVybDogISF1cmwgJiYgKHVybC5zdGFydHNXaXRoKCdodHRwOi8vJykgfHwgdXJsLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykpLFxuICAgIH0pO1xuXG4gICAgY29uc3QgaXNIdHRwID0gISF1cmwgJiYgKHVybC5zdGFydHNXaXRoKCdodHRwOi8vJykgfHwgdXJsLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykpO1xuICAgIGNvbnN0IGlzRGF0YSA9ICEhdXJsICYmIHVybC5zdGFydHNXaXRoKCdkYXRhOicpO1xuICAgIGNvbnN0IGxvb2tzTGlrZUZpbGVuYW1lID0gISEodXJsICYmIC8oW2EtekEtWjAtOS5fLV0rXFwuW2EtekEtWjAtOV0rKSQvLnRlc3QodXJsKSk7XG5cbiAgICBpZiAoaXNEYXRhKSB7XG4gICAgICAvLyBiYXNlNjQg4oaSIOaUvuWFpSBkYXRhLmJhc2U2NEltYWdl77yMY29udGVudCDkuLrmj4/ov7BcbiAgICAgIG1lc3NhZ2VDb250ZW50ID0gZGVzY3JpcHRpb24gfHwgJyc7XG4gICAgICBpbWFnZURhdGEuYmFzZTY0SW1hZ2UgPSB1cmw7XG4gICAgfSBlbHNlIGlmIChpc0h0dHApIHtcbiAgICAgIC8vIGh0dHAocykg4oaSIOaUvuWFpSBkYXRhLmltYWdlVXJs77yMY29udGVudCDkuLrmj4/ov7BcbiAgICAgIG1lc3NhZ2VDb250ZW50ID0gZGVzY3JpcHRpb24gfHwgJyc7XG4gICAgICBpbWFnZURhdGEuaW1hZ2VVcmwgPSB1cmw7XG4gICAgfSBlbHNlIGlmICh1cmwpIHtcbiAgICAgIGlmIChsb29rc0xpa2VGaWxlbmFtZSkge1xuICAgICAgICAvLyDku4Xmlofku7blkI0g4oaSIOi9rOWujOaVtCBVUkwg5pS+5YWlIGRhdGEuaW1hZ2VVcmxcbiAgICAgICAgY29uc3QgZnVsbFVybCA9IHRoaXMubWVzc2FnZVBhcnNlci5wcm9jZXNzSW1hZ2VVcmwodXJsKTtcbiAgICAgICAgaW1hZ2VEYXRhLmltYWdlVXJsID0gZnVsbFVybDtcbiAgICAgICAgbWVzc2FnZUNvbnRlbnQgPSBkZXNjcmlwdGlvbiB8fCAnJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOmdnlVSTOS4lOS4jeWDj+aWh+S7tuWQjSDihpIg6KeG5Li64oCc5LuF5o+P6L+w4oCdXG4gICAgICAgIG1lc3NhZ2VDb250ZW50ID0gZGVzY3JpcHRpb24gPyBkZXNjcmlwdGlvbiA6IHVybDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8g5Y+q5pyJ5o+P6L+wXG4gICAgICBtZXNzYWdlQ29udGVudCA9IGRlc2NyaXB0aW9uIHx8ICcnO1xuICAgIH1cblxuICAgIC8vIOWIm+W7uuWbvueJh+a2iOaBr1xuICAgIGNvbnN0IGltYWdlTWVzc2FnZTogQ2hhdE1lc3NhZ2UgPSB7XG4gICAgICBpZDogdGhpcy5nZW5lcmF0ZU1lc3NhZ2VJZCgpLFxuICAgICAgdHlwZTogJ1MnLFxuICAgICAgY2hhdElkOiB0aGlzLmN1cnJlbnRDaGF0LFxuICAgICAgc2VuZGVyOiAne3t1c2VyfX0nLFxuICAgICAgYXZhdGFyOiAnJyxcbiAgICAgIG1lc3NhZ2VUeXBlOiAnaW1hZ2UnLFxuICAgICAgY29udGVudDogbWVzc2FnZUNvbnRlbnQsXG4gICAgICB0aW1lc3RhbXA6IHRoaXMuZ2V0Q3VycmVudFRpbWUoKSxcbiAgICAgIGlzUGVuZGluZzogdHJ1ZSxcbiAgICAgIGRhdGE6IGltYWdlRGF0YSxcbiAgICB9O1xuXG4gICAgY29uc29sZS5sb2coJ/CflI0gW0RFQlVHXSDliJvlu7rlm77niYfmtojmga86Jywge1xuICAgICAgaWQ6IGltYWdlTWVzc2FnZS5pZCxcbiAgICAgIGNvbnRlbnQ6IGltYWdlTWVzc2FnZS5jb250ZW50LFxuICAgICAgaGFzQmFzZTY0SW1hZ2U6ICEhaW1hZ2VNZXNzYWdlLmRhdGE/LmJhc2U2NEltYWdlLFxuICAgICAgaGFzVXBsb2FkZWRGaWxlOiAhIWltYWdlTWVzc2FnZS5kYXRhPy51cGxvYWRlZEZpbGUsXG4gICAgICBoYXNJbWFnZVVybDogISFpbWFnZU1lc3NhZ2UuZGF0YT8uaW1hZ2VVcmwsXG4gICAgfSk7XG5cbiAgICAvLyDlhpnlhaUgVUkg6aKE6KeI57yT5a2Y77yI5LuFIGh0dHAocykvZGF0YTrvvIlcbiAgICBpZiAoaXNEYXRhIHx8IGlzSHR0cCkge1xuICAgICAgdGhpcy5jYWNoZVVpSW1hZ2VQcmV2aWV3KGltYWdlTWVzc2FnZSwgdXJsKTtcbiAgICB9XG5cbiAgICAvLyDmt7vliqDliLDlj5HpgIHpmJ/liJdcbiAgICB0aGlzLmFkZFRvU2VuZFF1ZXVlKGltYWdlTWVzc2FnZSk7XG5cbiAgICAvLyDmt7vliqDliLDnlYzpnaLmmL7npLpcbiAgICB0aGlzLmFkZE5ld01lc3NhZ2VUb0ludGVyZmFjZShpbWFnZU1lc3NhZ2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIOS7juaWh+S7tuWIm+W7uuWbvueJh+a2iOaBr+W5tua3u+WKoOWIsOWPkemAgemYn+WIl1xuICAgKiBAcGFyYW0gZmlsZSDlm77niYfmlofku7ZcbiAgICogQHBhcmFtIGRlc2NyaXB0aW9uIOWbvueJh+aPj+i/sO+8iOWPr+mAie+8iVxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVJbWFnZU1lc3NhZ2VGcm9tRmlsZShmaWxlOiBGaWxlLCBkZXNjcmlwdGlvbjogc3RyaW5nKTogdm9pZCB7XG4gICAgLy8g5qOA5p+l5paH5Lu25aSn5bCP77yI6ZmQ5Yi25Li6NU1C77yJXG4gICAgY29uc3QgbWF4U2l6ZSA9IDUgKiAxMDI0ICogMTAyNDsgLy8gNU1CXG4gICAgaWYgKGZpbGUuc2l6ZSA+IG1heFNpemUpIHtcbiAgICAgIHRoaXMuc2hvd1RvYXN0KCflm77niYfmlofku7bov4flpKfvvIzor7fpgInmi6nlsI/kuo41TULnmoTlm77niYcnLCAnZXJyb3InKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyDor7vlj5bmlofku7bkuLpiYXNlNjRcbiAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgIHJlYWRlci5vbmxvYWQgPSBlID0+IHtcbiAgICAgIGNvbnN0IGJhc2U2NERhdGEgPSBlLnRhcmdldD8ucmVzdWx0IGFzIHN0cmluZztcblxuICAgICAgLy8g55Sf5oiQ5ZSv5LiA55qE5paH5Lu2SURcbiAgICAgIGNvbnN0IGZpbGVJZCA9IGBpbWdfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCA5KX1gO1xuXG4gICAgICAvLyDmuIXnkIbov4fmnJ/nmoTkuLTml7blm77niYfmlbDmja5cbiAgICAgIHRoaXMuY2xlYW51cFRlbXBJbWFnZXMoKTtcblxuICAgICAgLy8g5bCGYmFzZTY05pWw5o2u5a2Y5YKo5Zyo5pys5Zyw5a2Y5YKo5Lit77yI5Y+v6YCJ77yJXG4gICAgICB0cnkge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgdGVtcF9pbWFnZV8ke2ZpbGVJZH1gLCBiYXNlNjREYXRhKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2Fybign5peg5rOV5a2Y5YKo5Zu+54mH5Yiw5pys5Zyw5a2Y5YKo77yM55u05o6l5L2/55SoRmlsZeWvueixoTonLCBlcnJvcik7XG4gICAgICAgIC8vIOWmguaenOacrOWcsOWtmOWCqOWksei0pe+8jOebtOaOpeWIm+W7uuW4puaciUZpbGXlr7nosaHnmoTmtojmga9cbiAgICAgICAgY29uc3QgaW1hZ2VNZXNzYWdlOiBDaGF0TWVzc2FnZSA9IHtcbiAgICAgICAgICBpZDogdGhpcy5nZW5lcmF0ZU1lc3NhZ2VJZCgpLFxuICAgICAgICAgIHR5cGU6ICdTJyxcbiAgICAgICAgICBjaGF0SWQ6IHRoaXMuY3VycmVudENoYXQsXG4gICAgICAgICAgc2VuZGVyOiAne3t1c2VyfX0nLFxuICAgICAgICAgIGF2YXRhcjogJycsXG4gICAgICAgICAgbWVzc2FnZVR5cGU6ICdpbWFnZScsXG4gICAgICAgICAgY29udGVudDogZGVzY3JpcHRpb24gPyBkZXNjcmlwdGlvbiA6ICcnLCAvLyDkuI3ljIXoo7nvvIzotbDigJzmj4/ov7Dml6npgIDliIbmlK/igJ1cbiAgICAgICAgICB0aW1lc3RhbXA6IHRoaXMuZ2V0Q3VycmVudFRpbWUoKSxcbiAgICAgICAgICBpc1BlbmRpbmc6IHRydWUsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdXBsb2FkZWRGaWxlOiBmaWxlLCAvLyDnm7TmjqXkv53lrZhGaWxl5a+56LGhXG4gICAgICAgICAgfSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBbREVCVUddIOWIm+W7uuWbvueJh+a2iOaBr++8iGxvY2FsU3RvcmFnZeWksei0pe+8iTonLCB7XG4gICAgICAgICAgaWQ6IGltYWdlTWVzc2FnZS5pZCxcbiAgICAgICAgICBjb250ZW50OiBpbWFnZU1lc3NhZ2UuY29udGVudCxcbiAgICAgICAgICBoYXNVcGxvYWRlZEZpbGU6ICEhaW1hZ2VNZXNzYWdlLmRhdGE/LnVwbG9hZGVkRmlsZSxcbiAgICAgICAgICB1cGxvYWRlZEZpbGVOYW1lOiBpbWFnZU1lc3NhZ2UuZGF0YT8udXBsb2FkZWRGaWxlPy5uYW1lLFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyDnvJPlrZggVUkg6aKE6KeIXG4gICAgICAgIHRoaXMuY2FjaGVVaUltYWdlUHJldmlldyhpbWFnZU1lc3NhZ2UsIGJhc2U2NERhdGEpO1xuXG4gICAgICAgIHRoaXMuYWRkVG9TZW5kUXVldWUoaW1hZ2VNZXNzYWdlKTtcbiAgICAgICAgdGhpcy5hZGROZXdNZXNzYWdlVG9JbnRlcmZhY2UoaW1hZ2VNZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyDmlrDop4TliJnvvJpjb250ZW50IOS9v+eUqOaPj+i/sOWNs+WPr++8jOWbvuWDj+aVsOaNrumAmui/hyBkYXRhL+e8k+WtmOmpseWKqCBVSVxuICAgICAgY29uc3QgbWVzc2FnZUNvbnRlbnQgPSBkZXNjcmlwdGlvbiB8fCAnJztcblxuICAgICAgLy8g5Yib5bu65Zu+54mH5raI5oGvXG4gICAgICBjb25zdCBpbWFnZU1lc3NhZ2U6IENoYXRNZXNzYWdlID0ge1xuICAgICAgICBpZDogdGhpcy5nZW5lcmF0ZU1lc3NhZ2VJZCgpLFxuICAgICAgICB0eXBlOiAnUycsXG4gICAgICAgIGNoYXRJZDogdGhpcy5jdXJyZW50Q2hhdCxcbiAgICAgICAgc2VuZGVyOiAne3t1c2VyfX0nLFxuICAgICAgICBhdmF0YXI6ICcnLFxuICAgICAgICBtZXNzYWdlVHlwZTogJ2ltYWdlJyxcbiAgICAgICAgY29udGVudDogbWVzc2FnZUNvbnRlbnQsXG4gICAgICAgIHRpbWVzdGFtcDogdGhpcy5nZXRDdXJyZW50VGltZSgpLFxuICAgICAgICBpc1BlbmRpbmc6IHRydWUsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAvLyDkv53nlZkgRmlsZSDku6Xkvr/lj5HpgIHml7bkvJjlhYjkvb/nlKhcbiAgICAgICAgICB1cGxvYWRlZEZpbGU6IGZpbGUsXG4gICAgICAgICAgdGVtcEZpbGVJZDogZmlsZUlkLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgY29uc29sZS5sb2coJ/CflI0gW0RFQlVHXSDliJvlu7rlm77niYfmtojmga86Jywge1xuICAgICAgICBpZDogaW1hZ2VNZXNzYWdlLmlkLFxuICAgICAgICBjb250ZW50OiBpbWFnZU1lc3NhZ2UuY29udGVudCxcbiAgICAgICAgaGFzVXBsb2FkZWRGaWxlOiAhIWltYWdlTWVzc2FnZS5kYXRhPy51cGxvYWRlZEZpbGUsXG4gICAgICAgIHVwbG9hZGVkRmlsZU5hbWU6IGltYWdlTWVzc2FnZS5kYXRhPy51cGxvYWRlZEZpbGU/Lm5hbWUsXG4gICAgICAgIHRlbXBGaWxlSWQ6IGltYWdlTWVzc2FnZS5kYXRhPy50ZW1wRmlsZUlkLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFVJIOmihOiniOe8k+WtmO+8iOWkjeawtOeUqO+8iVxuICAgICAgdGhpcy5jYWNoZVVpSW1hZ2VQcmV2aWV3KGltYWdlTWVzc2FnZSwgYmFzZTY0RGF0YSk7XG5cbiAgICAgIC8vIOa3u+WKoOWIsOWPkemAgemYn+WIl+S4jueVjOmdolxuICAgICAgdGhpcy5hZGRUb1NlbmRRdWV1ZShpbWFnZU1lc3NhZ2UpO1xuICAgICAgdGhpcy5hZGROZXdNZXNzYWdlVG9JbnRlcmZhY2UoaW1hZ2VNZXNzYWdlKTtcbiAgICB9O1xuXG4gICAgcmVhZGVyLm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICB0aGlzLnNob3dUb2FzdCgn6K+75Y+W5Zu+54mH5paH5Lu25aSx6LSlJywgJ2Vycm9yJyk7XG4gICAgfTtcblxuICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIm+W7uuivremfs+a2iOaBr+W5tua3u+WKoOWIsOWPkemAgemYn+WIl1xuICAgKiBAcGFyYW0gY29udGVudCDor63pn7PlhoXlrrlcbiAgICogQHBhcmFtIGR1cmF0aW9uIOivremfs+aXtumVv++8iOenku+8iVxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVWb2ljZU1lc3NhZ2UoY29udGVudDogc3RyaW5nLCBkdXJhdGlvbjogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8g5oyJ54WnXCLlhoXlrrl85pe26ZW/XCLmoLzlvI/liJvlu7ror63pn7Pmtojmga/lhoXlrrlcbiAgICBjb25zdCBtZXNzYWdlQ29udGVudCA9IGAke2NvbnRlbnR9fCR7ZHVyYXRpb259YDtcblxuICAgIC8vIOWIm+W7uuivremfs+a2iOaBr1xuICAgIGNvbnN0IHZvaWNlTWVzc2FnZTogQ2hhdE1lc3NhZ2UgPSB7XG4gICAgICBpZDogdGhpcy5nZW5lcmF0ZU1lc3NhZ2VJZCgpLFxuICAgICAgdHlwZTogJ1MnLFxuICAgICAgY2hhdElkOiB0aGlzLmN1cnJlbnRDaGF0LFxuICAgICAgc2VuZGVyOiAne3t1c2VyfX0nLFxuICAgICAgYXZhdGFyOiAnJyxcbiAgICAgIG1lc3NhZ2VUeXBlOiAndm9pY2UnLFxuICAgICAgY29udGVudDogbWVzc2FnZUNvbnRlbnQsXG4gICAgICB0aW1lc3RhbXA6IHRoaXMuZ2V0Q3VycmVudFRpbWUoKSxcbiAgICAgIGlzUGVuZGluZzogdHJ1ZSxcbiAgICB9O1xuXG4gICAgLy8g5re75Yqg5Yiw5Y+R6YCB6Zif5YiXXG4gICAgdGhpcy5hZGRUb1NlbmRRdWV1ZSh2b2ljZU1lc3NhZ2UpO1xuXG4gICAgLy8g5re75Yqg5Yiw55WM6Z2i5pi+56S6XG4gICAgdGhpcy5hZGROZXdNZXNzYWdlVG9JbnRlcmZhY2Uodm9pY2VNZXNzYWdlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliJvlu7rkvY3nva7mtojmga/lubbmt7vliqDliLDlj5HpgIHpmJ/liJdcbiAgICogQHBhcmFtIGRlc2NyaXB0aW9uIOS9jee9ruaPj+i/sFxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVMb2NhdGlvbk1lc3NhZ2UoZGVzY3JpcHRpb246IHN0cmluZyk6IHZvaWQge1xuICAgIC8vIOWIm+W7uuS9jee9rua2iOaBr1xuICAgIGNvbnN0IGxvY2F0aW9uTWVzc2FnZTogQ2hhdE1lc3NhZ2UgPSB7XG4gICAgICBpZDogdGhpcy5nZW5lcmF0ZU1lc3NhZ2VJZCgpLFxuICAgICAgdHlwZTogJ1MnLFxuICAgICAgY2hhdElkOiB0aGlzLmN1cnJlbnRDaGF0LFxuICAgICAgc2VuZGVyOiAne3t1c2VyfX0nLFxuICAgICAgYXZhdGFyOiAnJyxcbiAgICAgIG1lc3NhZ2VUeXBlOiAnbG9jYXRpb24nLFxuICAgICAgY29udGVudDogZGVzY3JpcHRpb24sXG4gICAgICB0aW1lc3RhbXA6IHRoaXMuZ2V0Q3VycmVudFRpbWUoKSxcbiAgICAgIGlzUGVuZGluZzogdHJ1ZSxcbiAgICB9O1xuXG4gICAgLy8g5re75Yqg5Yiw5Y+R6YCB6Zif5YiXXG4gICAgdGhpcy5hZGRUb1NlbmRRdWV1ZShsb2NhdGlvbk1lc3NhZ2UpO1xuXG4gICAgLy8g5re75Yqg5Yiw55WM6Z2i5pi+56S6XG4gICAgdGhpcy5hZGROZXdNZXNzYWdlVG9JbnRlcmZhY2UobG9jYXRpb25NZXNzYWdlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliJvlu7rovazotKbmtojmga/lubbmt7vliqDliLDlj5HpgIHpmJ/liJdcbiAgICogQHBhcmFtIGFtb3VudCDovazotKbph5Hpop1cbiAgICogQHBhcmFtIG5vdGUg6L2s6LSm5aSH5rOoXG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZVRyYW5zZmVyTWVzc2FnZShhbW91bnQ6IG51bWJlciwgbm90ZTogc3RyaW5nKTogdm9pZCB7XG4gICAgLy8g5oyJ54WnXCLph5Hpop185aSH5rOoXCLmoLzlvI/liJvlu7rovazotKbmtojmga/lhoXlrrlcbiAgICBjb25zdCBtZXNzYWdlQ29udGVudCA9IG5vdGUgPyBgJHthbW91bnR9fCR7bm90ZX1gIDogYCR7YW1vdW50fXxgO1xuXG4gICAgLy8g5Yib5bu66L2s6LSm5raI5oGvXG4gICAgY29uc3QgdHJhbnNmZXJNZXNzYWdlOiBDaGF0TWVzc2FnZSA9IHtcbiAgICAgIGlkOiB0aGlzLmdlbmVyYXRlTWVzc2FnZUlkKCksXG4gICAgICB0eXBlOiAnUycsXG4gICAgICBjaGF0SWQ6IHRoaXMuY3VycmVudENoYXQsXG4gICAgICBzZW5kZXI6ICd7e3VzZXJ9fScsXG4gICAgICBhdmF0YXI6ICcnLFxuICAgICAgbWVzc2FnZVR5cGU6ICd0cmFuc2ZlcicsXG4gICAgICBjb250ZW50OiBtZXNzYWdlQ29udGVudCxcbiAgICAgIHRpbWVzdGFtcDogdGhpcy5nZXRDdXJyZW50VGltZSgpLFxuICAgICAgaXNQZW5kaW5nOiB0cnVlLFxuICAgIH07XG5cbiAgICAvLyDmt7vliqDliLDlj5HpgIHpmJ/liJdcbiAgICB0aGlzLmFkZFRvU2VuZFF1ZXVlKHRyYW5zZmVyTWVzc2FnZSk7XG5cbiAgICAvLyDmt7vliqDliLDnlYzpnaLmmL7npLpcbiAgICB0aGlzLmFkZE5ld01lc3NhZ2VUb0ludGVyZmFjZSh0cmFuc2Zlck1lc3NhZ2UpO1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT0g6KGo5oOF5YyF566h55CG57O757ufID09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIOWIneWni+WMlue+pOWQjeimhueblueuoeeQhuWZqFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplR3JvdXBOYW1lT3ZlcnJpZGVNYW5hZ2VyKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+agCDlvIDlp4vliJ3lp4vljJbnvqTlkI3opobnm5bnrqHnkIblmaguLi4nKTtcbiAgICAgIEdyb3VwTmFtZU92ZXJyaWRlTWFuYWdlci5pbml0aWFsaXplKCk7XG4gICAgICBjb25zb2xlLmxvZygn4pyFIOe+pOWQjeimhueblueuoeeQhuWZqOWIneWni+WMluWujOaIkCcpO1xuXG4gICAgICAvLyDmt7vliqDosIPor5Xkv6Hmga9cbiAgICAgIGNvbnN0IGRlYnVnSW5mbyA9IEdyb3VwTmFtZU92ZXJyaWRlTWFuYWdlci5nZXREZWJ1Z0luZm8oKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SnIOe+pOWQjeimhueblueuoeeQhuWZqOiwg+ivleS/oeaBrzonLCBkZWJ1Z0luZm8pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwg576k5ZCN6KaG55uW566h55CG5Zmo5Yid5aeL5YyW5aSx6LSlOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5Yid5aeL5YyW6KGo5oOF5YyF57O757ufXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVTdGlja2VyU3lzdGVtKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyDliqjmgIHojrflj5bkuJbnlYzkuablkI3np7BcbiAgICAgIGNvbnN0IGxvcmVib29rTmFtZSA9IGF3YWl0IHRoaXMuZ2V0Q3VycmVudExvcmVib29rKCk7XG5cbiAgICAgIGlmICghbG9yZWJvb2tOYW1lKSB7XG4gICAgICAgIHRoaXMuc2hvd1RvYXN0KCfosIPnlKjkuJbnlYzkuablpLHotKXvvIzor7fmo4Dmn6XkuJbnlYzkuabnu5HlrponLCAnd2FybmluZycpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIOabtOaWsOS4lueVjOS5puWQjeensFxuICAgICAgdGhpcy5zdGlja2VyTG9yZWJvb2tOYW1lID0gbG9yZWJvb2tOYW1lO1xuICAgICAgY29uc29sZS5sb2coYPCfjq8g56Gu5a6a5L2/55So5LiW55WM5LmmOiAke2xvcmVib29rTmFtZX1gKTtcblxuICAgICAgLy8g5Yqg6L295o6S5bqP5L+h5oGvXG4gICAgICB0aGlzLmxvYWRTdGlja2VyT3JkZXIoKTtcblxuICAgICAgLy8g5LuO5LiW55WM5Lmm5Yqg6L296KGo5oOF5YyF5pWw5o2uXG4gICAgICBhd2FpdCB0aGlzLmxvYWRTdGlja2Vyc0Zyb21Mb3JlYm9vaygpO1xuXG4gICAgICBjb25zb2xlLmxvZyhg4pyFIOihqOaDheWMheezu+e7n+WIneWni+WMluWujOaIkO+8jOS9v+eUqOS4lueVjOS5pjogJHtsb3JlYm9va05hbWV977yM5Yqg6L295LqGICR7dGhpcy5zdGlja2VyRGF0YS5sZW5ndGh9IOS4quihqOaDheWMhWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwg5Yid5aeL5YyW6KGo5oOF5YyF57O757uf5aSx6LSlOicsIGVycm9yKTtcbiAgICAgIHRoaXMuc2hvd1RvYXN0KCfosIPnlKjkuJbnlYzkuablpLHotKXvvIzor7fmo4Dmn6XkuJbnlYzkuabnu5HlrponLCAnZXJyb3InKTtcbiAgICB9XG4gIH1cblxuXG4gIC8qKlxuICAgKiDku47kuJbnlYzkuabliqDovb3ooajmg4XljIXmlbDmja5cbiAgICog5LyY5YWI5LuO6KeS6Imy5LiW55WM5Lmm5pCc57Si77yM5aaC5p6c5rKh5om+5Yiw6KGo5oOF5YyF5p2h55uu77yM5YaN5LuO5YWo5bGA5LiW55WM5Lmm5pCc57SiXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGxvYWRTdGlja2Vyc0Zyb21Mb3JlYm9vaygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ/Cfjq8g5byA5aeL5LuO5LiW55WM5Lmm5Yqg6L296KGo5oOF5YyF5pWw5o2uLi4uJyk7XG5cbiAgICAgIC8vIOajgOafpeaYr+WQpuaciWdldExvcmVib29rRW50cmllc+WHveaVsFxuICAgICAgaWYgKHR5cGVvZiAod2luZG93IGFzIGFueSkuZ2V0TG9yZWJvb2tFbnRyaWVzICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinYwg5YWo5bGAZ2V0TG9yZWJvb2tFbnRyaWVz5Ye95pWw5LiN5a2Y5Zyo77yM5bCd6K+V5LuO5pys5Zyw5a2Y5YKo5Yqg6L29Li4uJyk7XG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFN0aWNrZXJzRnJvbUxvY2FsU3RvcmFnZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGxldCBzdGlja2VyRW50cnkgPSBudWxsO1xuICAgICAgbGV0IHNvdXJjZUluZm8gPSAnJztcblxuICAgICAgLy8g5q2l6aqkMTog5YWI5bCd6K+V5LuO6KeS6Imy5LiW55WM5Lmm5pCc57Si6KGo5oOF5YyF5p2h55uuXG4gICAgICBjb25zdCBjaGFyTG9yZWJvb2sgPSBhd2FpdCB0aGlzLmdldENoYXJhY3RlckxvcmVib29rKCk7XG4gICAgICBpZiAoY2hhckxvcmVib29rKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5OWIOWwneivleS7juinkuiJsuS4lueVjOS5puaQnOe0ouihqOaDheWMhTogJHtjaGFyTG9yZWJvb2t9YCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgY2hhckVudHJpZXMgPSBhd2FpdCAod2luZG93IGFzIGFueSkuZ2V0TG9yZWJvb2tFbnRyaWVzKGNoYXJMb3JlYm9vayk7XG4gICAgICAgICAgc3RpY2tlckVudHJ5ID0gY2hhckVudHJpZXMuZmluZChcbiAgICAgICAgICAgIChlbnRyeTogYW55KSA9PiBlbnRyeS5jb21tZW50ID09PSAn6KGo5oOF5YyFJyB8fCBlbnRyeS5jb21tZW50LmluY2x1ZGVzKCfooajmg4XljIUnKSxcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgaWYgKHN0aWNrZXJFbnRyeSkge1xuICAgICAgICAgICAgc291cmNlSW5mbyA9IGDop5LoibLkuJbnlYzkuaY6ICR7Y2hhckxvcmVib29rfWA7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFIOWcqOinkuiJsuS4lueVjOS5puS4reaJvuWIsOihqOaDheWMheadoeebrmApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhg4p2MIOinkuiJsuS4lueVjOS5puS4reacquaJvuWIsOihqOaDheWMheadoeebrmApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oYOKaoO+4jyDorr/pl67op5LoibLkuJbnlYzkuablpLHotKU6YCwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIOatpemqpDI6IOWmguaenOinkuiJsuS4lueVjOS5puS4reayoeaJvuWIsO+8jOWGjeS7juWFqOWxgOS4lueVjOS5puaQnOe0olxuICAgICAgaWYgKCFzdGlja2VyRW50cnkpIHtcbiAgICAgICAgY29uc3QgZ2xvYmFsTG9yZWJvb2tzID0gYXdhaXQgdGhpcy5nZXRHbG9iYWxMb3JlYm9va3MoKTtcbiAgICAgICAgZm9yIChjb25zdCBnbG9iYWxMb3JlYm9vayBvZiBnbG9iYWxMb3JlYm9va3MpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhg8J+MjSDlsJ3or5Xku47lhajlsYDkuJbnlYzkuabmkJzntKLooajmg4XljIU6ICR7Z2xvYmFsTG9yZWJvb2t9YCk7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGdsb2JhbEVudHJpZXMgPSBhd2FpdCAod2luZG93IGFzIGFueSkuZ2V0TG9yZWJvb2tFbnRyaWVzKGdsb2JhbExvcmVib29rKTtcbiAgICAgICAgICAgIHN0aWNrZXJFbnRyeSA9IGdsb2JhbEVudHJpZXMuZmluZChcbiAgICAgICAgICAgICAgKGVudHJ5OiBhbnkpID0+IGVudHJ5LmNvbW1lbnQgPT09ICfooajmg4XljIUnIHx8IGVudHJ5LmNvbW1lbnQuaW5jbHVkZXMoJ+ihqOaDheWMhScpLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKHN0aWNrZXJFbnRyeSkge1xuICAgICAgICAgICAgICBzb3VyY2VJbmZvID0gYOWFqOWxgOS4lueVjOS5pjogJHtnbG9iYWxMb3JlYm9va31gO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFIOWcqOWFqOWxgOS4lueVjOS5puS4reaJvuWIsOihqOaDheWMheadoeebrmApO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDinYwg5YWo5bGA5LiW55WM5LmmICR7Z2xvYmFsTG9yZWJvb2t9IOS4reacquaJvuWIsOihqOaDheWMheadoeebrmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYOKaoO+4jyDorr/pl67lhajlsYDkuJbnlYzkuaYgJHtnbG9iYWxMb3JlYm9va30g5aSx6LSlOmAsIGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8g5q2l6aqkMzog6Kej5p6Q5om+5Yiw55qE6KGo5oOF5YyF5p2h55uuXG4gICAgICBpZiAoc3RpY2tlckVudHJ5KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn46JIOaJvuWIsOihqOaDheWMheadoeebru+8jOadpea6kDogJHtzb3VyY2VJbmZvfWApO1xuICAgICAgICBhd2FpdCB0aGlzLnBhcnNlU3RpY2tlckVudHJ5KHN0aWNrZXJFbnRyeSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygn4p2MIOWcqOaJgOacieS4lueVjOS5puS4remDveacquaJvuWIsOihqOaDheWMheadoeebru+8jOS9v+eUqOepuuaVsOaNricpO1xuICAgICAgICB0aGlzLnN0aWNrZXJEYXRhID0gW107XG4gICAgICAgIHRoaXMuc3RpY2tlckNhY2hlLmNsZWFyKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIOagueaNruaOkuW6j+S/oeaBr+aOkuW6j1xuICAgICAgdGhpcy5zb3J0U3RpY2tlcnNCeU9yZGVyKCk7XG4gICAgICBjb25zb2xlLmxvZyhg4pyFIOihqOaDheWMheaVsOaNruWKoOi9veWujOaIkO+8jOWFsSAke3RoaXMuc3RpY2tlckRhdGEubGVuZ3RofSDkuKrooajmg4XljIVgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIOS7juS4lueVjOS5puWKoOi9veihqOaDheWMheWksei0pTonLCBlcnJvcik7XG4gICAgICBhd2FpdCB0aGlzLmxvYWRTdGlja2Vyc0Zyb21Mb2NhbFN0b3JhZ2UoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog6I635Y+W6KeS6Imy5LiW55WM5Lmm5ZCN56ewXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGdldENoYXJhY3RlckxvcmVib29rKCk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAodHlwZW9mIGdldEN1cnJlbnRDaGFyUHJpbWFyeUxvcmVib29rID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBnZXRDdXJyZW50Q2hhclByaW1hcnlMb3JlYm9vaygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdnZXRDdXJyZW50Q2hhclByaW1hcnlMb3JlYm9vayDlh73mlbDkuI3lj6/nlKgnKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCfojrflj5bop5LoibLkuJbnlYzkuablpLHotKU6JywgZXJyb3IpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5blhajlsYDkuJbnlYzkuabliJfooahcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZ2V0R2xvYmFsTG9yZWJvb2tzKCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKHR5cGVvZiBnZXRMb3JlYm9va1NldHRpbmdzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gZ2V0TG9yZWJvb2tTZXR0aW5ncygpO1xuICAgICAgICByZXR1cm4gc2V0dGluZ3Muc2VsZWN0ZWRfZ2xvYmFsX2xvcmVib29rcyB8fCBbXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUud2FybignZ2V0TG9yZWJvb2tTZXR0aW5ncyDlh73mlbDkuI3lj6/nlKgnKTtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ+iOt+WPluWFqOWxgOS4lueVjOS5puiuvue9ruWksei0pTonLCBlcnJvcik7XG4gICAgfVxuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiDop6PmnpDooajmg4XljIXmnaHnm65cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgcGFyc2VTdGlja2VyRW50cnkoc3RpY2tlckVudHJ5OiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLnN0aWNrZXJEYXRhID0gW107XG4gICAgdGhpcy5zdGlja2VyQ2FjaGUuY2xlYXIoKTtcblxuICAgIGNvbnN0IGNvbnRlbnQgPSBzdGlja2VyRW50cnkuY29udGVudCB8fCAnJztcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpLmZpbHRlcigobGluZTogc3RyaW5nKSA9PiBsaW5lLnRyaW0oKSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBsaW5lID0gbGluZXNbaV0udHJpbSgpO1xuICAgICAgaWYgKGxpbmUpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkU3RpY2tlciA9IHRoaXMucGFyc2VTdGlja2VyTGluZShsaW5lLCBpICsgMSk7XG4gICAgICAgIGlmIChwYXJzZWRTdGlja2VyKSB7XG4gICAgICAgICAgdGhpcy5zdGlja2VyRGF0YS5wdXNoKHBhcnNlZFN0aWNrZXIpO1xuICAgICAgICAgIHRoaXMuc3RpY2tlckNhY2hlLnNldChwYXJzZWRTdGlja2VyLnVpZCwgcGFyc2VkU3RpY2tlcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhg8J+TpiDku47kuJbnlYzkuabmnaHnm67op6PmnpDkuoYgJHt0aGlzLnN0aWNrZXJEYXRhLmxlbmd0aH0g5Liq6KGo5oOF5YyFYCk7XG4gIH1cblxuICAvKipcbiAgICog5LuO5pys5Zyw5a2Y5YKo5Yqg6L296KGo5oOF5YyF77yI5aSH55So5pa55qGI77yJXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGxvYWRTdGlja2Vyc0Zyb21Mb2NhbFN0b3JhZ2UoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNhdmVkRGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdiZWFyX3N0aWNrZXJzJyk7XG4gICAgICBpZiAoc2F2ZWREYXRhKSB7XG4gICAgICAgIHRoaXMuc3RpY2tlckRhdGEgPSBKU09OLnBhcnNlKHNhdmVkRGF0YSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5K+IOS7juacrOWcsOWtmOWCqOWKoOi9veS6hiAke3RoaXMuc3RpY2tlckRhdGEubGVuZ3RofSDkuKrooajmg4XljIVgKTtcblxuICAgICAgICAvLyDph43lu7rnvJPlrZhcbiAgICAgICAgdGhpcy5zdGlja2VyQ2FjaGUuY2xlYXIoKTtcbiAgICAgICAgZm9yIChjb25zdCBzdGlja2VyIG9mIHRoaXMuc3RpY2tlckRhdGEpIHtcbiAgICAgICAgICB0aGlzLnN0aWNrZXJDYWNoZS5zZXQoc3RpY2tlci51aWQsIHN0aWNrZXIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc29ydFN0aWNrZXJzQnlPcmRlcigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfkr4g5pys5Zyw5a2Y5YKo5Lit5rKh5pyJ6KGo5oOF5YyF5pWw5o2uJyk7XG4gICAgICAgIHRoaXMuc3RpY2tlckRhdGEgPSBbXTtcbiAgICAgICAgdGhpcy5zdGlja2VyQ2FjaGUuY2xlYXIoKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIOS7juacrOWcsOWtmOWCqOWKoOi9veihqOaDheWMheWksei0pTonLCBlcnJvcik7XG4gICAgICB0aGlzLnN0aWNrZXJEYXRhID0gW107XG4gICAgICB0aGlzLnN0aWNrZXJDYWNoZS5jbGVhcigpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDop6PmnpDljZXooYzooajmg4XljIXmlbDmja5cbiAgICog5pSv5oyB5LiJ56eN5qC85byP77yaXG4gICAqIDEuIOWujOaVtFVSTO+8mmh0dHBzOi8vZXhhbXBsZS5jb20vaW1hZ2UuanBnXG4gICAqIDIuIOaWh+S7tuWQje+8mmVpNmNvaS5qcGVnXG4gICAqIDMuIOWkh+azqCvmlofku7blkI3vvJrmiJHmmK/otKXniqxlaTZjb2kuanBlZ1xuICAgKiBAcGFyYW0gbGluZSDooajmg4XljIXmlbDmja7ooYxcbiAgICogQHBhcmFtIHVpZCDooajmg4XljIVJRFxuICAgKiBAcmV0dXJucyDop6PmnpDlkI7nmoTooajmg4XljIXmlbDmja7vvIzlpoLmnpzop6PmnpDlpLHotKXov5Tlm55udWxsXG4gICAqL1xuICBwcml2YXRlIHBhcnNlU3RpY2tlckxpbmUobGluZTogc3RyaW5nLCB1aWQ6IG51bWJlcik6IFN0aWNrZXJEYXRhIHwgbnVsbCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBsaW5lLnRyaW0oKTtcbiAgICAgIGlmICghY29udGVudCkgcmV0dXJuIG51bGw7XG5cbiAgICAgIGxldCBjb21tZW50ID0gJyc7XG4gICAgICBsZXQgdXJsID0gJyc7XG5cbiAgICAgIC8vIOajgOafpeaYr+WQpuaYr1wi5aSH5rOoK+aWh+S7tuWQjVwi5qC85byPXG4gICAgICBjb25zdCBmaWxlTmFtZU1hdGNoID0gY29udGVudC5tYXRjaCgvXiguKz8pKFthLXpBLVowLTkuXy1dK1xcLlthLXpBLVowLTldKykkLyk7XG4gICAgICBpZiAoZmlsZU5hbWVNYXRjaCAmJiBmaWxlTmFtZU1hdGNoWzFdLnRyaW0oKSAmJiBmaWxlTmFtZU1hdGNoWzJdKSB7XG4gICAgICAgIC8vIOagvOW8j++8muaIkeaYr+i0peeKrGVpNmNvaS5qcGVnXG4gICAgICAgIGNvbW1lbnQgPSBmaWxlTmFtZU1hdGNoWzFdLnRyaW0oKTtcbiAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBmaWxlTmFtZU1hdGNoWzJdO1xuXG4gICAgICAgIC8vIOS9v+eUqG1lc3NhZ2VQYXJzZXLlpITnkIbmlofku7blkI3vvIzoh6rliqjmt7vliqBjYXRib3jliY3nvIBcbiAgICAgICAgdXJsID0gdGhpcy5tZXNzYWdlUGFyc2VyLnByb2Nlc3NJbWFnZVVybChmaWxlTmFtZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyDnm7TmjqXkvb/nlKhwcm9jZXNzSW1hZ2VVcmzlpITnkIbvvIjmlK/mjIHlrozmlbRVUkzlkozmlofku7blkI3vvIlcbiAgICAgICAgdXJsID0gdGhpcy5tZXNzYWdlUGFyc2VyLnByb2Nlc3NJbWFnZVVybChjb250ZW50KTtcbiAgICAgICAgY29tbWVudCA9IGDooajmg4XljIUke3VpZH1gO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZyhg6Kej5p6Q6KGo5oOF5YyFOiBcIiR7Y29udGVudH1cIiAtPiDlpIfms6g6IFwiJHtjb21tZW50fVwiLCBVUkw6IFwiJHt1cmx9XCJgKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdWlkOiB1aWQsXG4gICAgICAgIHVybDogdXJsLFxuICAgICAgICBub3RlOiBjb21tZW50LFxuICAgICAgICByYXdDb250ZW50OiBjb250ZW50LFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign6Kej5p6Q6KGo5oOF5YyF6KGM5aSx6LSlOicsIGVycm9yLCBsaW5lKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDop6PmnpDkuJbnlYzkuabmnaHnm67kuLrooajmg4XljIXmlbDmja5cbiAgICog5pSv5oyB5LiJ56eN5qC85byP77yaXG4gICAqIDEuIOWujOaVtFVSTO+8mmh0dHBzOi8vZXhhbXBsZS5jb20vaW1hZ2UuanBnXG4gICAqIDIuIOaWh+S7tuWQje+8mmVpNmNvaS5qcGVnXG4gICAqIDMuIOWkh+azqCvmlofku7blkI3vvJrmiJHmmK/otKXniqxlaTZjb2kuanBlZ1xuICAgKiBAcGFyYW0gZW50cnkg5LiW55WM5Lmm5p2h55uuXG4gICAqIEByZXR1cm5zIOino+aekOWQjueahOihqOaDheWMheaVsOaNru+8jOWmguaenOino+aekOWksei0pei/lOWbnm51bGxcbiAgICovXG4gIHByaXZhdGUgcGFyc2VTdGlja2VyRnJvbUVudHJ5KGVudHJ5OiBhbnkpOiBTdGlja2VyRGF0YSB8IG51bGwge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gZW50cnkuY29udGVudD8udHJpbSgpO1xuICAgICAgaWYgKCFjb250ZW50KSByZXR1cm4gbnVsbDtcblxuICAgICAgbGV0IG5vdGUgPSBlbnRyeS5jb21tZW50Py50cmltKCkgfHwgJyc7XG4gICAgICBsZXQgdXJsID0gJyc7XG5cbiAgICAgIC8vIOS9v+eUqOeOsOacieeahHByb2Nlc3NJbWFnZVVybOaWueazleWkhOeQhlVSTFxuICAgICAgdXJsID0gdGhpcy5tZXNzYWdlUGFyc2VyLnByb2Nlc3NJbWFnZVVybChjb250ZW50KTtcblxuICAgICAgLy8g5aaC5p6cY29tbWVudOS4uuepuu+8jOWwneivleS7jmNvbnRlbnTkuK3mj5Dlj5blpIfms6hcbiAgICAgIGlmICghbm90ZSkge1xuICAgICAgICAvLyDmo4Dmn6XmmK/lkKbmmK9cIuWkh+azqCvmlofku7blkI1cIuagvOW8j1xuICAgICAgICBjb25zdCBmaWxlTmFtZU1hdGNoID0gY29udGVudC5tYXRjaCgvXiguKz8pKFthLXpBLVowLTkuXy1dK1xcLlthLXpBLVowLTldKykkLyk7XG4gICAgICAgIGlmIChmaWxlTmFtZU1hdGNoICYmIGZpbGVOYW1lTWF0Y2hbMV0udHJpbSgpKSB7XG4gICAgICAgICAgbm90ZSA9IGZpbGVOYW1lTWF0Y2hbMV0udHJpbSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIOWmguaenOS7jeeEtuayoeacieWkh+azqO+8jOS9v+eUqOm7mOiupOWAvFxuICAgICAgaWYgKCFub3RlKSB7XG4gICAgICAgIG5vdGUgPSAn6KGo5oOF5YyFJztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdWlkOiBlbnRyeS51aWQsXG4gICAgICAgIHVybDogdXJsLFxuICAgICAgICBub3RlOiBub3RlLFxuICAgICAgICByYXdDb250ZW50OiBjb250ZW50LFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign6Kej5p6Q6KGo5oOF5YyF5p2h55uu5aSx6LSlOicsIGVycm9yLCBlbnRyeSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5qC55o2u5o6S5bqP5L+h5oGv5a+56KGo5oOF5YyF6L+b6KGM5o6S5bqPXG4gICAqL1xuICBwcml2YXRlIHNvcnRTdGlja2Vyc0J5T3JkZXIoKTogdm9pZCB7XG4gICAgdGhpcy5zdGlja2VyRGF0YS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBjb25zdCBvcmRlckEgPSB0aGlzLnN0aWNrZXJPcmRlclthLnVpZF0gfHwgOTk5OTk5O1xuICAgICAgY29uc3Qgb3JkZXJCID0gdGhpcy5zdGlja2VyT3JkZXJbYi51aWRdIHx8IDk5OTk5OTtcbiAgICAgIHJldHVybiBvcmRlckEgLSBvcmRlckI7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog5Yqg6L296KGo5oOF5YyF5o6S5bqP5L+h5oGvXG4gICAqL1xuICBwcml2YXRlIGxvYWRTdGlja2VyT3JkZXIoKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNhdmVkT3JkZXIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc3RpY2tlcl9vcmRlcicpO1xuICAgICAgaWYgKHNhdmVkT3JkZXIpIHtcbiAgICAgICAgdGhpcy5zdGlja2VyT3JkZXIgPSBKU09OLnBhcnNlKHNhdmVkT3JkZXIpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfliqDovb3ooajmg4XljIXmjpLluo/lpLHotKU6JywgZXJyb3IpO1xuICAgICAgdGhpcy5zdGlja2VyT3JkZXIgPSB7fTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5L+d5a2Y6KGo5oOF5YyF5o6S5bqP5L+h5oGvXG4gICAqL1xuICBwcml2YXRlIHNhdmVTdGlja2VyT3JkZXIoKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzdGlja2VyX29yZGVyJywgSlNPTi5zdHJpbmdpZnkodGhpcy5zdGlja2VyT3JkZXIpKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign5L+d5a2Y6KGo5oOF5YyF5o6S5bqP5aSx6LSlOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5re75Yqg6KGo5oOF5YyF5Yiw5LiW55WM5LmmXG4gICAqIEBwYXJhbSBjb250ZW50IOihqOaDheWMheWGheWuue+8iFVSTOOAgeaWh+S7tuWQjeaIluWkh+azqCvmlofku7blkI3vvIlcbiAgICogQHBhcmFtIGNvbW1lbnQg6KGo5oOF5YyF5aSH5rOo77yI5Y+v6YCJ77yJXG4gICAqIEByZXR1cm5zIOaYr+WQpua3u+WKoOaIkOWKn1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBhZGRTdGlja2VyVG9Mb3JlYm9vayhjb250ZW50OiBzdHJpbmcsIGNvbW1lbnQ/OiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ+Wwneivlea3u+WKoOihqOaDheWMheWIsOS4lueVjOS5pjonLCBjb250ZW50LCBjb21tZW50KTtcblxuICAgICAgLy8g5bCd6K+V5L2/55So5YWo5bGA5Ye95pWw5pu05paw5LiW55WM5Lmm5p2h55uuXG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiAod2luZG93IGFzIGFueSkuZ2V0TG9yZWJvb2tFbnRyaWVzID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgIHR5cGVvZiAod2luZG93IGFzIGFueSkuc2V0TG9yZWJvb2tFbnRyaWVzID09PSAnZnVuY3Rpb24nXG4gICAgICApIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+S9v+eUqOWFqOWxgOWHveaVsOaTjeS9nOS4lueVjOS5picpO1xuXG4gICAgICAgIC8vIOiOt+WPlueOsOacieadoeebrlxuICAgICAgICBjb25zdCBlbnRyaWVzID0gYXdhaXQgKHdpbmRvdyBhcyBhbnkpLmdldExvcmVib29rRW50cmllcyh0aGlzLnN0aWNrZXJMb3JlYm9va05hbWUpO1xuICAgICAgICBjb25zdCBzdGlja2VyRW50cnkgPSBlbnRyaWVzLmZpbmQoXG4gICAgICAgICAgKGVudHJ5OiBhbnkpID0+IGVudHJ5LmNvbW1lbnQgPT09ICfooajmg4XljIUnIHx8IGVudHJ5LmNvbW1lbnQuaW5jbHVkZXMoJ+ihqOaDheWMhScpLFxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChzdGlja2VyRW50cnkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn5om+5Yiw6KGo5oOF5YyF5p2h55uu77yM5YeG5aSH5pu05pawJyk7XG5cbiAgICAgICAgICAvLyDlnKjnjrDmnInlhoXlrrnlkI7mt7vliqDmlrDooajmg4XljIVcbiAgICAgICAgICBjb25zdCBjdXJyZW50Q29udGVudCA9IHN0aWNrZXJFbnRyeS5jb250ZW50IHx8ICcnO1xuICAgICAgICAgIGNvbnN0IG5ld0NvbnRlbnQgPSBjdXJyZW50Q29udGVudCA/IGAke2N1cnJlbnRDb250ZW50fVxcbiR7Y29udGVudC50cmltKCl9YCA6IGNvbnRlbnQudHJpbSgpO1xuXG4gICAgICAgICAgLy8g5pu05paw5p2h55uuXG4gICAgICAgICAgY29uc3QgdXBkYXRlZEVudHJ5ID0ge1xuICAgICAgICAgICAgLi4uc3RpY2tlckVudHJ5LFxuICAgICAgICAgICAgY29udGVudDogbmV3Q29udGVudCxcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgYXdhaXQgKHdpbmRvdyBhcyBhbnkpLnNldExvcmVib29rRW50cmllcyh0aGlzLnN0aWNrZXJMb3JlYm9va05hbWUsIFt1cGRhdGVkRW50cnldKTtcblxuICAgICAgICAgIC8vIOmHjeaWsOWKoOi9veaVsOaNrlxuICAgICAgICAgIGF3YWl0IHRoaXMubG9hZFN0aWNrZXJzRnJvbUxvcmVib29rKCk7XG5cbiAgICAgICAgICBjb25zb2xlLmxvZygn5oiQ5Yqf5re75Yqg6KGo5oOF5YyF5Yiw5LiW55WM5LmmJyk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ+acquaJvuWIsOihqOaDheWMheadoeebru+8jOaXoOazlea3u+WKoCcpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+S4lueVjOS5pkFQSeS4jeWPr+eUqO+8jOa3u+WKoOWIsOacrOWcsOe8k+WtmCcpO1xuXG4gICAgICAgIC8vIOS9nOS4uuWkh+eUqO+8jOa3u+WKoOWIsOacrOWcsOWtmOWCqFxuICAgICAgICBjb25zdCBuZXdTdGlja2VyID0ge1xuICAgICAgICAgIHVpZDogRGF0ZS5ub3coKSxcbiAgICAgICAgICBjb21tZW50OiBjb21tZW50IHx8ICcnLFxuICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQudHJpbSgpLFxuICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgdXJsOiAnJyxcbiAgICAgICAgICBub3RlOiAnJyxcbiAgICAgICAgICByYXdDb250ZW50OiBjb250ZW50LnRyaW0oKSxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnN0aWNrZXJEYXRhLnB1c2gobmV3U3RpY2tlcik7XG4gICAgICAgIHRoaXMuc3RpY2tlckNhY2hlLnNldChuZXdTdGlja2VyLnVpZCwgbmV3U3RpY2tlcik7XG5cbiAgICAgICAgLy8g5L+d5a2Y5YiwbG9jYWxTdG9yYWdlXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdiZWFyX3N0aWNrZXJzJywgSlNPTi5zdHJpbmdpZnkodGhpcy5zdGlja2VyRGF0YSkpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCfmiJDlip/mt7vliqDooajmg4XljIXliLDmnKzlnLDnvJPlrZgnKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+a3u+WKoOihqOaDheWMheWksei0pTonLCBlcnJvcik7XG5cbiAgICAgIC8vIOacgOWQjueahOWkh+eUqOaWueahiO+8mua3u+WKoOWIsOacrOWcsOWtmOWCqFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbmV3U3RpY2tlciA9IHtcbiAgICAgICAgICB1aWQ6IERhdGUubm93KCksXG4gICAgICAgICAgY29tbWVudDogY29tbWVudCB8fCAnJyxcbiAgICAgICAgICBjb250ZW50OiBjb250ZW50LnRyaW0oKSxcbiAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgIHVybDogJycsXG4gICAgICAgICAgbm90ZTogJycsXG4gICAgICAgICAgcmF3Q29udGVudDogY29udGVudC50cmltKCksXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5zdGlja2VyRGF0YS5wdXNoKG5ld1N0aWNrZXIpO1xuICAgICAgICB0aGlzLnN0aWNrZXJDYWNoZS5zZXQobmV3U3RpY2tlci51aWQsIG5ld1N0aWNrZXIpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYmVhcl9zdGlja2VycycsIEpTT04uc3RyaW5naWZ5KHRoaXMuc3RpY2tlckRhdGEpKTtcblxuICAgICAgICBjb25zb2xlLmxvZygn5aSH55So5pa55qGI77ya5oiQ5Yqf5re75Yqg6KGo5oOF5YyF5Yiw5pys5Zyw57yT5a2YJyk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBjYXRjaCAoYmFja3VwRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign5aSH55So5re75Yqg5Lmf5aSx6LSlOicsIGJhY2t1cEVycm9yKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDku47kuJbnlYzkuabliKDpmaTooajmg4XljIVcbiAgICogQHBhcmFtIHVpZCDooajmg4XljIXnmoTooYzlj7dJRFxuICAgKiBAcmV0dXJucyDmmK/lkKbliKDpmaTmiJDlip9cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgcmVtb3ZlU3RpY2tlckZyb21Mb3JlYm9vayh1aWQ6IG51bWJlcik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZyhg8J+Xke+4jyDlvIDlp4vliKDpmaTooajmg4XljIXvvIx1aWQ6ICR7dWlkfWApO1xuXG4gICAgICAvLyDlsJ3or5Xkvb/nlKjlhajlsYDlh73mlbDmm7TmlrDkuJbnlYzkuabmnaHnm65cbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mICh3aW5kb3cgYXMgYW55KS5nZXRMb3JlYm9va0VudHJpZXMgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgICAgdHlwZW9mICh3aW5kb3cgYXMgYW55KS5zZXRMb3JlYm9va0VudHJpZXMgPT09ICdmdW5jdGlvbidcbiAgICAgICkge1xuICAgICAgICBjb25zb2xlLmxvZygn5L2/55So5YWo5bGA5Ye95pWw5pON5L2c5LiW55WM5LmmJyk7XG5cbiAgICAgICAgLy8g6I635Y+W546w5pyJ5p2h55uuXG4gICAgICAgIGNvbnN0IGVudHJpZXMgPSBhd2FpdCAod2luZG93IGFzIGFueSkuZ2V0TG9yZWJvb2tFbnRyaWVzKHRoaXMuc3RpY2tlckxvcmVib29rTmFtZSk7XG4gICAgICAgIGNvbnN0IHN0aWNrZXJFbnRyeSA9IGVudHJpZXMuZmluZChcbiAgICAgICAgICAoZW50cnk6IGFueSkgPT4gZW50cnkuY29tbWVudCA9PT0gJ+ihqOaDheWMhScgfHwgZW50cnkuY29tbWVudC5pbmNsdWRlcygn6KGo5oOF5YyFJyksXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKHN0aWNrZXJFbnRyeSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUg5om+5Yiw6KGo5oOF5YyF5p2h55uu77yM5YeG5aSH5Yig6Zmk5oyH5a6a6KGMJyk7XG5cbiAgICAgICAgICAvLyDojrflj5blvZPliY3lhoXlrrnlubbmjInooYzliIblibJcbiAgICAgICAgICBjb25zdCBjdXJyZW50Q29udGVudCA9IHN0aWNrZXJFbnRyeS5jb250ZW50IHx8ICcnO1xuICAgICAgICAgIGNvbnN0IGxpbmVzID0gY3VycmVudENvbnRlbnQuc3BsaXQoJ1xcbicpLmZpbHRlcigobGluZTogc3RyaW5nKSA9PiBsaW5lLnRyaW0oKSk7XG5cbiAgICAgICAgICBjb25zb2xlLmxvZyhg8J+TnSDlvZPliY3ooajmg4XljIXmnaHnm67mnIkgJHtsaW5lcy5sZW5ndGh9IOihjGApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDwn46vIOimgeWIoOmZpOesrCAke3VpZH0g6KGMYCk7XG5cbiAgICAgICAgICAvLyDliKDpmaTmjIflrprooYzvvIh1aWTmmK/ku44x5byA5aeL55qE6KGM5Y+377yJXG4gICAgICAgICAgaWYgKHVpZCA+IDAgJiYgdWlkIDw9IGxpbmVzLmxlbmd0aCkge1xuICAgICAgICAgICAgbGluZXMuc3BsaWNlKHVpZCAtIDEsIDEpOyAvLyDliKDpmaTmjIflrprooYxcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDinIUg5oiQ5Yqf5Yig6Zmk56ysICR7dWlkfSDooYzvvIzliankvZkgJHtsaW5lcy5sZW5ndGh9IOihjGApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGDinYwg5peg5pWI55qE6KGM5Y+3OiAke3VpZH3vvIzmgLvooYzmlbA6ICR7bGluZXMubGVuZ3RofWApO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIOmHjeaWsOe7hOWQiOWGheWuuVxuICAgICAgICAgIGNvbnN0IG5ld0NvbnRlbnQgPSBsaW5lcy5qb2luKCdcXG4nKTtcblxuICAgICAgICAgIC8vIOabtOaWsOadoeebrlxuICAgICAgICAgIGNvbnN0IHVwZGF0ZWRFbnRyeSA9IHtcbiAgICAgICAgICAgIHVpZDogc3RpY2tlckVudHJ5LnVpZCxcbiAgICAgICAgICAgIGNvbnRlbnQ6IG5ld0NvbnRlbnQsXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGF3YWl0ICh3aW5kb3cgYXMgYW55KS5zZXRMb3JlYm9va0VudHJpZXModGhpcy5zdGlja2VyTG9yZWJvb2tOYW1lLCBbdXBkYXRlZEVudHJ5XSk7XG5cbiAgICAgICAgICAvLyDph43mlrDliqDovb3mlbDmja5cbiAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRTdGlja2Vyc0Zyb21Mb3JlYm9vaygpO1xuXG4gICAgICAgICAgY29uc29sZS5sb2coJ+KchSDmiJDlip/ku47kuJbnlYzkuabliKDpmaTooajmg4XljIUnKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwg5pyq5om+5Yiw6KGo5oOF5YyF5p2h55uuJyk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfinYwg5LiW55WM5Lmm5YWo5bGA5Ye95pWw5LiN5Y+v55SoJyk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIOS7juS4lueVjOS5puWIoOmZpOihqOaDheWMheWksei0pTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOaYvuekuuihqOaDheWMhee8lui+keaooeaAgeahhlxuICAgKiBAcGFyYW0gdWlkIOihqOaDheWMhUlEXG4gICAqL1xuICBwcml2YXRlIHNob3dTdGlja2VyRWRpdE1vZGFsKHVpZDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3Qgc3RpY2tlciA9IHRoaXMuc3RpY2tlckNhY2hlLmdldCh1aWQpO1xuICAgIGlmICghc3RpY2tlcikge1xuICAgICAgdGhpcy5zaG93VG9hc3QoJ+ihqOaDheWMheS4jeWtmOWcqCcsICdlcnJvcicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIOWIm+W7uuaooeaAgeahhlxuICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBvdmVybGF5LmNsYXNzTmFtZSA9ICdtb2RhbC1vdmVybGF5JztcblxuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbW9kYWwuY2xhc3NOYW1lID0gJ21vZGFsLWNvbnRhaW5lcic7XG5cbiAgICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0U3RpY2tlck1vZGFsVGVtcGxhdGUnKTtcbiAgICBpZiAodGVtcGxhdGUpIHtcbiAgICAgIG1vZGFsLmlubmVySFRNTCA9IHRlbXBsYXRlLmlubmVySFRNTDtcbiAgICAgIC8vIOWhq+WFheaVsOaNrlxuICAgICAgY29uc3QgdXJsSW5wdXQgPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCcjZWRpdFN0aWNrZXJVcmwnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgY29uc3Qgbm90ZUlucHV0ID0gbW9kYWwucXVlcnlTZWxlY3RvcignI2VkaXRTdGlja2VyTm90ZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICBpZiAodXJsSW5wdXQpIHVybElucHV0LnZhbHVlID0gc3RpY2tlci51cmw7XG4gICAgICBpZiAobm90ZUlucHV0KSBub3RlSW5wdXQudmFsdWUgPSBzdGlja2VyLm5vdGU7XG4gICAgfVxuXG4gICAgb3ZlcmxheS5hcHBlbmRDaGlsZChtb2RhbCk7XG5cbiAgICAvLyDlsIbpga7nvanlsYLmt7vliqDliLDmiYvmnLrnlYzpnaLlrrnlmajkuK3vvIzogIzkuI3mmK/mlbTkuKrpobXpnaJcbiAgICBjb25zdCBpbnRlcmZhY2VDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW50ZXJmYWNlLWNvbnRhaW5lcicpO1xuICAgIGlmIChpbnRlcmZhY2VDb250YWluZXIpIHtcbiAgICAgIGludGVyZmFjZUNvbnRhaW5lci5hcHBlbmRDaGlsZChvdmVybGF5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8g5aaC5p6c5om+5LiN5Yiw55WM6Z2i5a655Zmo77yM5YiZ5re75Yqg5Yiw6IGK5aSp55WM6Z2iXG4gICAgICBjb25zdCBjaGF0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQtY29udGFpbmVyJyk7XG4gICAgICBpZiAoY2hhdENvbnRhaW5lcikge1xuICAgICAgICBjaGF0Q29udGFpbmVyLmFwcGVuZENoaWxkKG92ZXJsYXkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdmVybGF5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDmmL7npLrliqjnlLtcbiAgICBzZXRUaW1lb3V0KCgpID0+IG92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnc2hvdycpLCAxMCk7XG5cbiAgICAvLyDkuovku7blpITnkIZcbiAgICBjb25zdCB1cmxJbnB1dCA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNlZGl0U3RpY2tlclVybCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3Qgbm90ZUlucHV0ID0gbW9kYWwucXVlcnlTZWxlY3RvcignI2VkaXRTdGlja2VyTm90ZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgY2FuY2VsQnRuID0gbW9kYWwucXVlcnlTZWxlY3RvcignLmNhbmNlbC1idG4nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICBjb25zdCBjb25maXJtQnRuID0gbW9kYWwucXVlcnlTZWxlY3RvcignLmNvbmZpcm0tYnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG5cbiAgICAvLyDlj5bmtojmjInpkq5cbiAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmhpZGVNb2RhbCgpO1xuICAgIH0pO1xuXG4gICAgLy8g5L+d5a2Y5oyJ6ZKuXG4gICAgY29uZmlybUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG5ld1VybCA9IHVybElucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgIGNvbnN0IG5ld05vdGUgPSBub3RlSW5wdXQudmFsdWUudHJpbSgpO1xuXG4gICAgICBpZiAoIW5ld1VybCkge1xuICAgICAgICB0aGlzLnNob3dUb2FzdCgn6K+36L6T5YWl6KGo5oOF5YyFVVJMJywgJ3dhcm5pbmcnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBzdWNjZXNzID0gYXdhaXQgdGhpcy51cGRhdGVTdGlja2VySW5Mb3JlYm9vayh1aWQsIG5ld1VybCwgbmV3Tm90ZSk7XG4gICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgdGhpcy5zaG93VG9hc3QoJ+ihqOaDheWMheabtOaWsOaIkOWKnycsICdzdWNjZXNzJyk7XG4gICAgICAgICAgdGhpcy5oaWRlTW9kYWwoKTtcbiAgICAgICAgICAvLyDph43mlrDmuLLmn5Pooajmg4XljIXnvZHmoLxcbiAgICAgICAgICBjb25zdCBzdGlja2VyU2VsZWN0b3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RpY2tlclNlbGVjdG9yJyk7XG4gICAgICAgICAgaWYgKHN0aWNrZXJTZWxlY3Rvcikge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJTdGlja2VyR3JpZChzdGlja2VyU2VsZWN0b3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNob3dUb2FzdCgn6KGo5oOF5YyF5pu05paw5aSx6LSlJywgJ2Vycm9yJyk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+abtOaWsOihqOaDheWMheWksei0pTonLCBlcnJvcik7XG4gICAgICAgIHRoaXMuc2hvd1RvYXN0KCfooajmg4XljIXmm7TmlrDlpLHotKUnLCAnZXJyb3InKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIOeCueWHu+mBrue9qeWFs+mXrVxuICAgIG92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgIGlmIChlLnRhcmdldCA9PT0gb3ZlcmxheSkge1xuICAgICAgICB0aGlzLmhpZGVNb2RhbCgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOabtOaWsOS4lueVjOS5puS4reeahOihqOaDheWMhVxuICAgKiBAcGFyYW0gdWlkIOihqOaDheWMhUlEXG4gICAqIEBwYXJhbSBuZXdVcmwg5paw55qEVVJMXG4gICAqIEBwYXJhbSBuZXdOb3RlIOaWsOeahOWkh+azqFxuICAgKiBAcmV0dXJucyDmmK/lkKbmm7TmlrDmiJDlip9cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgdXBkYXRlU3RpY2tlckluTG9yZWJvb2sodWlkOiBudW1iZXIsIG5ld1VybDogc3RyaW5nLCBuZXdOb3RlOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coYPCflIQg5byA5aeL5pu05paw6KGo5oOF5YyF77yMdWlkOiAke3VpZH1gKTtcblxuICAgICAgLy8g5L2/55So5YWo5bGA5Ye95pWw6I635Y+W5LiW55WM5Lmm5p2h55uuXG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiAod2luZG93IGFzIGFueSkuZ2V0TG9yZWJvb2tFbnRyaWVzID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgIHR5cGVvZiAod2luZG93IGFzIGFueSkuc2V0TG9yZWJvb2tFbnRyaWVzID09PSAnZnVuY3Rpb24nXG4gICAgICApIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSDkvb/nlKjlhajlsYDlh73mlbDmm7TmlrDooajmg4XljIUnKTtcblxuICAgICAgICAvLyDojrflj5bnjrDmnInmnaHnm65cbiAgICAgICAgY29uc3QgZW50cmllcyA9IGF3YWl0ICh3aW5kb3cgYXMgYW55KS5nZXRMb3JlYm9va0VudHJpZXModGhpcy5zdGlja2VyTG9yZWJvb2tOYW1lKTtcbiAgICAgICAgY29uc3Qgc3RpY2tlckVudHJ5ID0gZW50cmllcy5maW5kKFxuICAgICAgICAgIChlbnRyeTogYW55KSA9PiBlbnRyeS5jb21tZW50ID09PSAn6KGo5oOF5YyFJyB8fCBlbnRyeS5jb21tZW50LmluY2x1ZGVzKCfooajmg4XljIUnKSxcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoc3RpY2tlckVudHJ5KSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ+KchSDmib7liLDooajmg4XljIXmnaHnm67vvIzlh4blpIfmm7TmlrDmjIflrprooYwnKTtcblxuICAgICAgICAgIC8vIOiOt+WPluW9k+WJjeWGheWuueW5tuaMieihjOWIhuWJslxuICAgICAgICAgIGNvbnN0IGN1cnJlbnRDb250ZW50ID0gc3RpY2tlckVudHJ5LmNvbnRlbnQgfHwgJyc7XG4gICAgICAgICAgY29uc3QgbGluZXMgPSBjdXJyZW50Q29udGVudC5zcGxpdCgnXFxuJykuZmlsdGVyKChsaW5lOiBzdHJpbmcpID0+IGxpbmUudHJpbSgpKTtcblxuICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5OdIOW9k+WJjeihqOaDheWMheadoeebruaciSAke2xpbmVzLmxlbmd0aH0g6KGMYCk7XG4gICAgICAgICAgY29uc29sZS5sb2coYPCfjq8g6KaB5pu05paw56ysICR7dWlkfSDooYxgKTtcblxuICAgICAgICAgIC8vIOabtOaWsOaMh+WumuihjO+8iHVpZOaYr+S7jjHlvIDlp4vnmoTooYzlj7fvvIlcbiAgICAgICAgICBpZiAodWlkID4gMCAmJiB1aWQgPD0gbGluZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyDmnoTlu7rmlrDnmoTooajmg4XljIXooYzlhoXlrrlcbiAgICAgICAgICAgIGNvbnN0IG5ld0NvbnRlbnQgPSBuZXdOb3RlID8gYCR7bmV3Tm90ZX0ke25ld1VybH1gIDogbmV3VXJsO1xuICAgICAgICAgICAgbGluZXNbdWlkIC0gMV0gPSBuZXdDb250ZW50O1xuICAgICAgICAgICAgY29uc29sZS5sb2coYOKchSDmiJDlip/mm7TmlrDnrKwgJHt1aWR9IOihjOS4ujogJHtuZXdDb250ZW50fWApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGDinYwg5peg5pWI55qE6KGM5Y+3OiAke3VpZH3vvIzmgLvooYzmlbA6ICR7bGluZXMubGVuZ3RofWApO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIOmHjeaWsOe7hOWQiOWGheWuuVxuICAgICAgICAgIGNvbnN0IG5ld0VudHJ5Q29udGVudCA9IGxpbmVzLmpvaW4oJ1xcbicpO1xuXG4gICAgICAgICAgLy8g5pu05paw5p2h55uuXG4gICAgICAgICAgY29uc3QgdXBkYXRlZEVudHJ5ID0ge1xuICAgICAgICAgICAgdWlkOiBzdGlja2VyRW50cnkudWlkLFxuICAgICAgICAgICAgY29udGVudDogbmV3RW50cnlDb250ZW50LFxuICAgICAgICAgIH07XG5cbiAgICAgICAgICBhd2FpdCAod2luZG93IGFzIGFueSkuc2V0TG9yZWJvb2tFbnRyaWVzKHRoaXMuc3RpY2tlckxvcmVib29rTmFtZSwgW3VwZGF0ZWRFbnRyeV0pO1xuXG4gICAgICAgICAgLy8g6YeN5paw5Yqg6L295pWw5o2uXG4gICAgICAgICAgYXdhaXQgdGhpcy5sb2FkU3RpY2tlcnNGcm9tTG9yZWJvb2soKTtcblxuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUg5oiQ5Yqf5pu05paw5LiW55WM5Lmm5Lit55qE6KGo5oOF5YyFJyk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIOacquaJvuWIsOihqOaDheWMheadoeebricpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign4p2MIOS4lueVjOS5puWFqOWxgOWHveaVsOS4jeWPr+eUqCcpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCDmm7TmlrDkuJbnlYzkuabkuK3nmoTooajmg4XljIXlpLHotKU6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDmm7TmlrDooajmg4XljIXmjpLluo9cbiAgICogQHBhcmFtIG5ld09yZGVyIOaWsOeahOaOkuW6j+aVsOe7hO+8iOaMiXVpZOaOkuW6j++8iVxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVTdGlja2VyT3JkZXIobmV3T3JkZXI6IG51bWJlcltdKTogdm9pZCB7XG4gICAgLy8g5pu05paw5o6S5bqP5pig5bCEXG4gICAgbmV3T3JkZXIuZm9yRWFjaCgodWlkLCBpbmRleCkgPT4ge1xuICAgICAgdGhpcy5zdGlja2VyT3JkZXJbdWlkXSA9IGluZGV4O1xuICAgIH0pO1xuXG4gICAgLy8g5L+d5a2Y5YiwbG9jYWxTdG9yYWdlXG4gICAgdGhpcy5zYXZlU3RpY2tlck9yZGVyKCk7XG5cbiAgICAvLyDph43mlrDmjpLluo/mnKzlnLDmlbDmja5cbiAgICB0aGlzLnNvcnRTdGlja2Vyc0J5T3JkZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmmL7npLrooajmg4XljIXpgInmi6nlmahcbiAgICovXG4gIHByaXZhdGUgc2hvd1N0aWNrZXJTZWxlY3RvcigpOiB2b2lkIHtcbiAgICAvLyDmo4Dmn6XmmK/lkKblt7Lnu4/mmL7npLpcbiAgICBpZiAodGhpcy5pc1N0aWNrZXJTZWxlY3RvclZpc2libGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyDpppblhYjpmpDol4/liqDlj7foj5zljZVcbiAgICB0aGlzLmhpZGVQbHVzTWVudSgpO1xuXG4gICAgY29uc3Qgc3RpY2tlclNlbGVjdG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0aWNrZXJTZWxlY3RvcicpO1xuICAgIGlmICghc3RpY2tlclNlbGVjdG9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8g5riy5p+T6KGo5oOF5YyF572R5qC8XG4gICAgdGhpcy5yZW5kZXJTdGlja2VyR3JpZChzdGlja2VyU2VsZWN0b3IpO1xuXG4gICAgLy8g5pi+56S66YCJ5oup5ZmoXG4gICAgc3RpY2tlclNlbGVjdG9yLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIHRoaXMuaXNTdGlja2VyU2VsZWN0b3JWaXNpYmxlID0gdHJ1ZTtcblxuICAgIC8vIOa3u+WKoOWKqOeUu+aViOaenFxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICBzdGlja2VyU2VsZWN0b3IuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuICAgIH0pO1xuXG4gICAgLy8g5bu26L+f6K6+572u54K55Ye75aSW6YOo5YWz6Zet77yM56Gu5L+d5Yqo55S75a6M5oiQXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnNldHVwU3RpY2tlclNlbGVjdG9yQ2xpY2tPdXRzaWRlKCk7XG4gICAgfSwgMTAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDpmpDol4/ooajmg4XljIXpgInmi6nlmahcbiAgICovXG4gIHByaXZhdGUgaGlkZVN0aWNrZXJTZWxlY3RvcigpOiB2b2lkIHtcbiAgICAvLyDmo4Dmn6XmmK/lkKblt7Lnu4/pmpDol49cbiAgICBpZiAoIXRoaXMuaXNTdGlja2VyU2VsZWN0b3JWaXNpYmxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgc3RpY2tlclNlbGVjdG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0aWNrZXJTZWxlY3RvcicpO1xuICAgIGlmICghc3RpY2tlclNlbGVjdG9yKSByZXR1cm47XG5cbiAgICAvLyDph43nva7liKDpmaTmqKHlvI/nirbmgIFcbiAgICB0aGlzLmlzRGVsZXRlTW9kZSA9IGZhbHNlO1xuICAgIHRoaXMuc2VsZWN0ZWRTdGlja2Vycy5jbGVhcigpO1xuXG4gICAgLy8g56e76Zmk5pi+56S654q25oCBXG4gICAgc3RpY2tlclNlbGVjdG9yLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScsICdzaG93Jyk7XG4gICAgdGhpcy5pc1N0aWNrZXJTZWxlY3RvclZpc2libGUgPSBmYWxzZTtcblxuICAgIC8vIOenu+mZpOeCueWHu+WklumDqOWFs+mXreeahOS6i+S7tuebkeWQrOWZqFxuICAgIHRoaXMucmVtb3ZlU3RpY2tlclNlbGVjdG9yQ2xpY2tPdXRzaWRlKCk7XG4gIH1cblxuICAvKipcbiAgICog6K6+572u6KGo5oOF5YyF6YCJ5oup5Zmo54K55Ye75aSW6YOo5YWz6ZetXG4gICAqL1xuICBwcml2YXRlIHNldHVwU3RpY2tlclNlbGVjdG9yQ2xpY2tPdXRzaWRlKCk6IHZvaWQge1xuICAgIC8vIOenu+mZpOS5i+WJjeeahOebkeWQrOWZqO+8iOWmguaenOWtmOWcqO+8iVxuICAgIHRoaXMucmVtb3ZlU3RpY2tlclNlbGVjdG9yQ2xpY2tPdXRzaWRlKCk7XG5cbiAgICAvLyDmt7vliqDmlrDnmoTnm5HlkKzlmahcbiAgICB0aGlzLnN0aWNrZXJTZWxlY3RvckNsaWNrT3V0c2lkZUhhbmRsZXIgPSAoZTogRXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgICAgY29uc3Qgc3RpY2tlclNlbGVjdG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0aWNrZXJTZWxlY3RvcicpO1xuICAgICAgY29uc3QgcGx1c0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbHVzQnRuJyk7XG4gICAgICBjb25zdCBwbHVzTWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbHVzTWVudScpO1xuICAgICAgY29uc3Qgc3RpY2tlck1lbnVJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtdHlwZT1cInN0aWNrZXJcIl0nKTtcblxuICAgICAgLy8g5qOA5p+l54K55Ye75piv5ZCm5Zyo6KGo5oOF5YyF6YCJ5oup5Zmo5YaF6YOo44CB5Yqg5Y+35oyJ6ZKu44CB5Yqg5Y+36I+c5Y2V5oiW6KGo5oOF5YyF6I+c5Y2V6aG55LiKXG4gICAgICBpZiAoXG4gICAgICAgIHN0aWNrZXJTZWxlY3RvciAmJlxuICAgICAgICAhc3RpY2tlclNlbGVjdG9yLmNvbnRhaW5zKHRhcmdldCkgJiZcbiAgICAgICAgIXBsdXNCdG4/LmNvbnRhaW5zKHRhcmdldCkgJiZcbiAgICAgICAgIXBsdXNNZW51Py5jb250YWlucyh0YXJnZXQpICYmXG4gICAgICAgICFzdGlja2VyTWVudUl0ZW0/LmNvbnRhaW5zKHRhcmdldClcbiAgICAgICkge1xuICAgICAgICB0aGlzLmhpZGVTdGlja2VyU2VsZWN0b3IoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8g5aKe5Yqg5bu26L+f5pe26Ze077yM56Gu5L+d6KGo5oOF5YyF6YCJ5oup5Zmo5a6M5YWo5pi+56S65ZCO5YaN5re75Yqg5LqL5Lu255uR5ZCs5ZmoXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAodGhpcy5zdGlja2VyU2VsZWN0b3JDbGlja091dHNpZGVIYW5kbGVyKSB7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5zdGlja2VyU2VsZWN0b3JDbGlja091dHNpZGVIYW5kbGVyKTtcbiAgICAgIH1cbiAgICB9LCAzMDApO1xuICB9XG5cbiAgLyoqXG4gICAqIOenu+mZpOihqOaDheWMhemAieaLqeWZqOeCueWHu+WklumDqOWFs+mXreeahOS6i+S7tuebkeWQrOWZqFxuICAgKi9cbiAgcHJpdmF0ZSByZW1vdmVTdGlja2VyU2VsZWN0b3JDbGlja091dHNpZGUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc3RpY2tlclNlbGVjdG9yQ2xpY2tPdXRzaWRlSGFuZGxlcikge1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnN0aWNrZXJTZWxlY3RvckNsaWNrT3V0c2lkZUhhbmRsZXIpO1xuICAgICAgdGhpcy5zdGlja2VyU2VsZWN0b3JDbGlja091dHNpZGVIYW5kbGVyID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5riy5p+T6KGo5oOF5YyF572R5qC8XG4gICAqIEBwYXJhbSBjb250YWluZXIg5a655Zmo5YWD57SgXG4gICAqL1xuICBwcml2YXRlIHJlbmRlclN0aWNrZXJHcmlkKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBjb25zdCBncmlkRWxlbWVudCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjc3RpY2tlckdyaWQnKSBhcyBIVE1MRWxlbWVudDtcbiAgICBpZiAoIWdyaWRFbGVtZW50KSByZXR1cm47XG5cbiAgICAvLyDmuIXnqbrnjrDmnInlhoXlrrlcbiAgICBncmlkRWxlbWVudC5pbm5lckhUTUwgPSAnJztcblxuICAgIC8vIOWni+e7iOa3u+WKoOa3u+WKoOaMiemSruS9nOS4uuesrOS4gOS4qumhueebrlxuICAgIGNvbnN0IGFkZEJ0biA9IHRoaXMuY3JlYXRlQWRkU3RpY2tlckJ1dHRvbigpO1xuICAgIGdyaWRFbGVtZW50LmFwcGVuZENoaWxkKGFkZEJ0bik7XG5cbiAgICAvLyDmt7vliqDliKDpmaTmqKHlvI/mjInpkq7kvZzkuLrnrKzkuozkuKrpobnnm65cbiAgICBjb25zdCBkZWxldGVNb2RlQnRuID0gdGhpcy5jcmVhdGVEZWxldGVNb2RlQnV0dG9uKCk7XG4gICAgZ3JpZEVsZW1lbnQuYXBwZW5kQ2hpbGQoZGVsZXRlTW9kZUJ0bik7XG5cbiAgICAvLyDlpoLmnpzlnKjliKDpmaTmqKHlvI/kuIvvvIznq4vljbPmmL7npLrnoa7orqTliKDpmaTmjInpkq5cbiAgICBpZiAodGhpcy5pc0RlbGV0ZU1vZGUpIHtcbiAgICAgIGNvbnN0IGNvbmZpcm1CdG4gPSB0aGlzLmNyZWF0ZURlbGV0ZUNvbmZpcm1CdXR0b24oKTtcbiAgICAgIGdyaWRFbGVtZW50LmFwcGVuZENoaWxkKGNvbmZpcm1CdG4pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0aWNrZXJEYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8g5pi+56S656m654q25oCB5o+Q56S677yI5Y2g5o2u5Ymp5L2Z56m66Ze077yJXG4gICAgICBjb25zdCBlbXB0eVN0YXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBlbXB0eVN0YXRlLmNsYXNzTmFtZSA9ICdlbXB0eS1zdGF0ZSc7XG4gICAgICBlbXB0eVN0YXRlLnN0eWxlLmdyaWRDb2x1bW4gPSAnc3BhbiAyJzsgLy8g5Y2g5o2u5Ymp5L2Z55qEMuWIl++8iDTliJfmgLvlhbHvvIzlh4/ljrvmt7vliqDmjInpkq7lkozliKDpmaTmjInpkq7vvIlcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0aWNrZXJFbXB0eVN0YXRlVGVtcGxhdGUnKTtcbiAgICAgIGlmICh0ZW1wbGF0ZSkge1xuICAgICAgICBlbXB0eVN0YXRlLmlubmVySFRNTCA9IHRlbXBsYXRlLmlubmVySFRNTDtcbiAgICAgIH1cbiAgICAgIGdyaWRFbGVtZW50LmFwcGVuZENoaWxkKGVtcHR5U3RhdGUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIOa4suafk+ihqOaDheWMhemhueebrlxuICAgIHRoaXMuc3RpY2tlckRhdGEuZm9yRWFjaCgoc3RpY2tlciwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IHN0aWNrZXJJdGVtID0gdGhpcy5jcmVhdGVTdGlja2VySXRlbShzdGlja2VyLCBpbmRleCk7XG4gICAgICBncmlkRWxlbWVudC5hcHBlbmRDaGlsZChzdGlja2VySXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog5Yib5bu66KGo5oOF5YyF6aG555uu5YWD57SgXG4gICAqIEBwYXJhbSBzdGlja2VyIOihqOaDheWMheaVsOaNrlxuICAgKiBAcGFyYW0gaW5kZXgg57Si5byVXG4gICAqIEByZXR1cm5zIOihqOaDheWMhemhueebruWFg+e0oFxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVTdGlja2VySXRlbShzdGlja2VyOiBTdGlja2VyRGF0YSwgaW5kZXg6IG51bWJlcik6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgaXRlbS5jbGFzc05hbWUgPSAnc3RpY2tlci1pdGVtJztcbiAgICBpdGVtLmRhdGFzZXQudWlkID0gc3RpY2tlci51aWQudG9TdHJpbmcoKTtcbiAgICBpdGVtLmRhdGFzZXQuaW5kZXggPSBpbmRleC50b1N0cmluZygpO1xuXG4gICAgLy8g5aaC5p6c5Zyo5Yig6Zmk5qih5byP5LiL77yM5re75Yqg5Yig6Zmk5qih5byP57G7XG4gICAgaWYgKHRoaXMuaXNEZWxldGVNb2RlKSB7XG4gICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoJ2RlbGV0ZS1tb2RlJyk7XG4gICAgfVxuXG4gICAgLy8g5aaC5p6c6KKr6YCJ5Lit77yM5re75Yqg6YCJ5Lit57G7XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRTdGlja2Vycy5oYXMoc3RpY2tlci51aWQpKSB7XG4gICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG4gICAgfVxuXG4gICAgLy8g5Yib5bu65Zu+54mH5a655ZmoXG4gICAgY29uc3QgaW1hZ2VDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBpbWFnZUNvbnRhaW5lci5jbGFzc05hbWUgPSAnc3RpY2tlci1pbWFnZSc7XG5cbiAgICAvLyDliJvlu7rlm77niYflhYPntKBcbiAgICBjb25zdCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpbWcuc3JjID0gc3RpY2tlci51cmw7XG4gICAgaW1nLmFsdCA9IHN0aWNrZXIubm90ZTtcbiAgICBpbWcudGl0bGUgPSBzdGlja2VyLm5vdGU7XG5cbiAgICAvLyDliJvlu7rlpIfms6jmloflrZdcbiAgICBjb25zdCBub3RlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIG5vdGVFbGVtZW50LmNsYXNzTmFtZSA9ICdzdGlja2VyLW5vdGUnO1xuICAgIG5vdGVFbGVtZW50LnRleHRDb250ZW50ID0gc3RpY2tlci5ub3RlIHx8ICfooajmg4XljIUnO1xuXG4gICAgLy8g5Yib5bu65aSa6YCJ5Yig6Zmk55qE6YCJ5oup5qGGXG4gICAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjaGVja2JveC5jbGFzc05hbWUgPSAnZGVsZXRlLWNoZWNrYm94JztcbiAgICBpZiAodGhpcy5zZWxlY3RlZFN0aWNrZXJzLmhhcyhzdGlja2VyLnVpZCkpIHtcbiAgICAgIGNoZWNrYm94LmNsYXNzTGlzdC5hZGQoJ2NoZWNrZWQnKTtcbiAgICB9XG5cbiAgICAvLyDmt7vliqDkuovku7bnm5HlkKzlmahcbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgaWYgKHRoaXMuaXNEZWxldGVNb2RlKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlU3RpY2tlclNlbGVjdGlvbihzdGlja2VyLnVpZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmhhbmRsZVN0aWNrZXJTZWxlY3Rpb24oc3RpY2tlcik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyDmt7vliqDplb/mjInnvJbovpHkuovku7ZcbiAgICBpZiAoIXRoaXMuaXNEZWxldGVNb2RlKSB7XG4gICAgICB0aGlzLmFkZFN0aWNrZXJFZGl0RXZlbnRzKGl0ZW0pO1xuICAgIH1cblxuICAgIGltYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKGltZyk7XG4gICAgaXRlbS5hcHBlbmRDaGlsZChpbWFnZUNvbnRhaW5lcik7XG4gICAgaXRlbS5hcHBlbmRDaGlsZChub3RlRWxlbWVudCk7XG4gICAgaXRlbS5hcHBlbmRDaGlsZChjaGVja2JveCk7XG5cbiAgICByZXR1cm4gaXRlbTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliJvlu7rmt7vliqDooajmg4XljIXmjInpkq5cbiAgICovXG4gIHByaXZhdGUgY3JlYXRlQWRkU3RpY2tlckJ1dHRvbigpOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3QgYWRkQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgYWRkQnRuLmNsYXNzTmFtZSA9ICdhZGQtc3RpY2tlci1idG4nO1xuICAgIGFkZEJ0bi5pZCA9ICdhZGRTdGlja2VyQnRuJztcbiAgICBhZGRCdG4uaW5uZXJIVE1MID0gJzxzcGFuIGNsYXNzPVwiYWRkLWljb25cIj4rPC9zcGFuPic7XG4gICAgYWRkQnRuLnRpdGxlID0gJ+a3u+WKoOihqOaDheWMhSc7XG5cbiAgICBhZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0aGlzLmhpZGVTdGlja2VyU2VsZWN0b3IoKTtcbiAgICAgIHRoaXMuc2hvd0FkZFN0aWNrZXJNb2RhbCgpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGFkZEJ0bjtcbiAgfVxuXG4gIC8qKlxuICAgKiDliJvlu7rliKDpmaTmqKHlvI/mjInpkq5cbiAgICovXG4gIHByaXZhdGUgY3JlYXRlRGVsZXRlTW9kZUJ1dHRvbigpOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3QgZGVsZXRlTW9kZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGRlbGV0ZU1vZGVCdG4uY2xhc3NOYW1lID0gJ2RlbGV0ZS1tb2RlLWJ0bic7XG4gICAgZGVsZXRlTW9kZUJ0bi5pZCA9ICdkZWxldGVNb2RlQnRuJztcblxuICAgIGlmICh0aGlzLmlzRGVsZXRlTW9kZSkge1xuICAgICAgZGVsZXRlTW9kZUJ0bi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICB9XG5cbiAgICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWxldGVNb2RlQnV0dG9uVGVtcGxhdGUnKTtcbiAgICBpZiAodGVtcGxhdGUpIHtcbiAgICAgIGRlbGV0ZU1vZGVCdG4uaW5uZXJIVE1MID0gdGVtcGxhdGUuaW5uZXJIVE1MO1xuICAgICAgY29uc3QgZGVsZXRlVGV4dCA9IGRlbGV0ZU1vZGVCdG4ucXVlcnlTZWxlY3RvcignLmRlbGV0ZS10ZXh0Jyk7XG4gICAgICBpZiAoZGVsZXRlVGV4dCkge1xuICAgICAgICBkZWxldGVUZXh0LnRleHRDb250ZW50ID0gdGhpcy5pc0RlbGV0ZU1vZGUgPyAn5Y+W5raIJyA6ICfliKDpmaQnO1xuICAgICAgfVxuICAgIH1cbiAgICBkZWxldGVNb2RlQnRuLnRpdGxlID0gdGhpcy5pc0RlbGV0ZU1vZGUgPyAn5Y+W5raI5Yig6Zmk5qih5byPJyA6ICfov5vlhaXliKDpmaTmqKHlvI8nO1xuXG4gICAgZGVsZXRlTW9kZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMudG9nZ2xlRGVsZXRlTW9kZSgpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGRlbGV0ZU1vZGVCdG47XG4gIH1cblxuICAvKipcbiAgICog5Yib5bu65Yig6Zmk56Gu6K6k5oyJ6ZKuXG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZURlbGV0ZUNvbmZpcm1CdXR0b24oKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IGNvbmZpcm1CdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBjb25maXJtQnRuLmNsYXNzTmFtZSA9ICdkZWxldGUtY29uZmlybS1idG4gc2hvdyc7XG5cbiAgICAvLyDmoLnmja7pgInkuK3nirbmgIHorr7nva7mjInpkq7nirbmgIFcbiAgICBjb25zdCBoYXNTZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRTdGlja2Vycy5zaXplID4gMDtcbiAgICBpZiAoIWhhc1NlbGVjdGVkKSB7XG4gICAgICBjb25maXJtQnRuLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XG4gICAgfVxuXG4gICAgY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlybURlbGV0ZUJ1dHRvblRlbXBsYXRlJyk7XG4gICAgaWYgKHRlbXBsYXRlKSB7XG4gICAgICBjb25maXJtQnRuLmlubmVySFRNTCA9IHRlbXBsYXRlLmlubmVySFRNTDtcbiAgICB9XG5cbiAgICBpZiAoaGFzU2VsZWN0ZWQpIHtcbiAgICAgIGNvbmZpcm1CdG4udGl0bGUgPSBg5Yig6Zmk6YCJ5Lit55qEICR7dGhpcy5zZWxlY3RlZFN0aWNrZXJzLnNpemV9IOS4quihqOaDheWMhWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbmZpcm1CdG4udGl0bGUgPSAn6K+35YWI6YCJ5oup6KaB5Yig6Zmk55qE6KGo5oOF5YyFJztcbiAgICB9XG5cbiAgICBjb25maXJtQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTdGlja2Vycy5zaXplID4gMCkge1xuICAgICAgICB0aGlzLmhhbmRsZURlbGV0ZVNlbGVjdGVkU3RpY2tlcnMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2hvd1RvYXN0KCfor7flhYjpgInmi6nopoHliKDpmaTnmoTooajmg4XljIUnLCAnd2FybmluZycpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNvbmZpcm1CdG47XG4gIH1cblxuICAvKipcbiAgICog5YiH5o2i5Yig6Zmk5qih5byPXG4gICAqL1xuICBwcml2YXRlIHRvZ2dsZURlbGV0ZU1vZGUoKTogdm9pZCB7XG4gICAgdGhpcy5pc0RlbGV0ZU1vZGUgPSAhdGhpcy5pc0RlbGV0ZU1vZGU7XG5cbiAgICAvLyDlpoLmnpzpgIDlh7rliKDpmaTmqKHlvI/vvIzmuIXnqbrpgInkuK3nmoTooajmg4XljIVcbiAgICBpZiAoIXRoaXMuaXNEZWxldGVNb2RlKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkU3RpY2tlcnMuY2xlYXIoKTtcbiAgICB9XG5cbiAgICAvLyDph43mlrDmuLLmn5PnvZHmoLxcbiAgICBjb25zdCBzdGlja2VyU2VsZWN0b3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RpY2tlclNlbGVjdG9yJyk7XG4gICAgaWYgKHN0aWNrZXJTZWxlY3Rvcikge1xuICAgICAgdGhpcy5yZW5kZXJTdGlja2VyR3JpZChzdGlja2VyU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIC8vIOaSreaUvumfs+aViFxuICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXlTb3VuZCgnY2xpY2snKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliIfmjaLooajmg4XljIXpgInmi6nnirbmgIFcbiAgICovXG4gIHByaXZhdGUgdG9nZ2xlU3RpY2tlclNlbGVjdGlvbih1aWQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLnNlbGVjdGVkU3RpY2tlcnMuaGFzKHVpZCkpIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRTdGlja2Vycy5kZWxldGUodWlkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZWxlY3RlZFN0aWNrZXJzLmFkZCh1aWQpO1xuICAgIH1cblxuICAgIC8vIOabtOaWsOehruiupOaMiemSrueKtuaAgVxuICAgIHRoaXMudXBkYXRlRGVsZXRlQ29uZmlybUJ1dHRvbigpO1xuXG4gICAgLy8g6YeN5paw5riy5p+T572R5qC85Lul5pu05paw6YCJ5oup54q25oCBXG4gICAgY29uc3Qgc3RpY2tlclNlbGVjdG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0aWNrZXJTZWxlY3RvcicpO1xuICAgIGlmIChzdGlja2VyU2VsZWN0b3IpIHtcbiAgICAgIHRoaXMucmVuZGVyU3RpY2tlckdyaWQoc3RpY2tlclNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICAvLyDmkq3mlL7pn7PmlYhcbiAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5U291bmQoJ2NsaWNrJyk7XG4gIH1cblxuICAvKipcbiAgICog5pu05paw5Yig6Zmk56Gu6K6k5oyJ6ZKu54q25oCBXG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZURlbGV0ZUNvbmZpcm1CdXR0b24oKTogdm9pZCB7XG4gICAgY29uc3QgY29uZmlybUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kZWxldGUtY29uZmlybS1idG4nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICBpZiAoIWNvbmZpcm1CdG4pIHJldHVybjtcblxuICAgIGNvbnN0IGhhc1NlbGVjdGVkID0gdGhpcy5zZWxlY3RlZFN0aWNrZXJzLnNpemUgPiAwO1xuXG4gICAgaWYgKGhhc1NlbGVjdGVkKSB7XG4gICAgICBjb25maXJtQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XG4gICAgICBjb25maXJtQnRuLnRpdGxlID0gYOWIoOmZpOmAieS4reeahCAke3RoaXMuc2VsZWN0ZWRTdGlja2Vycy5zaXplfSDkuKrooajmg4XljIVgO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25maXJtQnRuLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XG4gICAgICBjb25maXJtQnRuLnRpdGxlID0gJ+ivt+WFiOmAieaLqeimgeWIoOmZpOeahOihqOaDheWMhSc7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOWkhOeQhuWIoOmZpOmAieS4reeahOihqOaDheWMhVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBoYW5kbGVEZWxldGVTZWxlY3RlZFN0aWNrZXJzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLnNlbGVjdGVkU3RpY2tlcnMuc2l6ZSA9PT0gMCkgcmV0dXJuO1xuXG4gICAgLy8g5pi+56S656Gu6K6k5a+56K+d5qGGXG4gICAgY29uc3QgY29uZmlybWVkID0gY29uZmlybShg56Gu5a6a6KaB5Yig6Zmk6YCJ5Lit55qEICR7dGhpcy5zZWxlY3RlZFN0aWNrZXJzLnNpemV9IOS4quihqOaDheWMheWQl++8n+atpOaTjeS9nOS4jeWPr+aSpOmUgOOAgmApO1xuICAgIGlmICghY29uZmlybWVkKSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgLy8g5Yig6Zmk6YCJ5Lit55qE6KGo5oOF5YyFXG4gICAgICBjb25zdCBkZWxldGVQcm9taXNlcyA9IEFycmF5LmZyb20odGhpcy5zZWxlY3RlZFN0aWNrZXJzKS5tYXAodWlkID0+IHRoaXMucmVtb3ZlU3RpY2tlckZyb21Mb3JlYm9vayh1aWQpKTtcblxuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKGRlbGV0ZVByb21pc2VzKTtcbiAgICAgIGNvbnN0IHN1Y2Nlc3NDb3VudCA9IHJlc3VsdHMuZmlsdGVyKHJlc3VsdCA9PiByZXN1bHQpLmxlbmd0aDtcblxuICAgICAgaWYgKHN1Y2Nlc3NDb3VudCA9PT0gdGhpcy5zZWxlY3RlZFN0aWNrZXJzLnNpemUpIHtcbiAgICAgICAgdGhpcy5zaG93VG9hc3QoYOaIkOWKn+WIoOmZpCAke3N1Y2Nlc3NDb3VudH0g5Liq6KGo5oOF5YyFYCwgJ3N1Y2Nlc3MnKTtcbiAgICAgIH0gZWxzZSBpZiAoc3VjY2Vzc0NvdW50ID4gMCkge1xuICAgICAgICB0aGlzLnNob3dUb2FzdChg5Yig6Zmk5LqGICR7c3VjY2Vzc0NvdW50fS8ke3RoaXMuc2VsZWN0ZWRTdGlja2Vycy5zaXplfSDkuKrooajmg4XljIVgLCAnd2FybmluZycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zaG93VG9hc3QoJ+ihqOaDheWMheWIoOmZpOWksei0pScsICdlcnJvcicpO1xuICAgICAgfVxuXG4gICAgICAvLyDmuIXnqbrpgInkuK3nirbmgIHlubbpgIDlh7rliKDpmaTmqKHlvI9cbiAgICAgIHRoaXMuc2VsZWN0ZWRTdGlja2Vycy5jbGVhcigpO1xuICAgICAgdGhpcy5pc0RlbGV0ZU1vZGUgPSBmYWxzZTtcblxuICAgICAgLy8g6YeN5paw5riy5p+T572R5qC8XG4gICAgICBjb25zdCBzdGlja2VyU2VsZWN0b3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RpY2tlclNlbGVjdG9yJyk7XG4gICAgICBpZiAoc3RpY2tlclNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMucmVuZGVyU3RpY2tlckdyaWQoc3RpY2tlclNlbGVjdG9yKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign5Yig6Zmk6YCJ5Lit6KGo5oOF5YyF5aSx6LSlOicsIGVycm9yKTtcbiAgICAgIHRoaXMuc2hvd1RvYXN0KCfliKDpmaTooajmg4XljIXml7blj5HnlJ/plJnor68nLCAnZXJyb3InKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5pi+56S65re75Yqg6KGo5oOF5YyF5qih5oCB5qGGXG4gICAqL1xuICBwcml2YXRlIHNob3dBZGRTdGlja2VyTW9kYWwoKTogdm9pZCB7XG4gICAgY29uc3QgY29udGVudCA9IHRoaXMuY3JlYXRlQWRkU3RpY2tlck1vZGFsKCk7XG5cbiAgICAvLyDliJvlu7rluKbmjInpkq7nmoTmqKHmgIHmoYZcbiAgICBjb25zdCBtb2RhbENvbnRlbnQgPSB0aGlzLmNyZWF0ZU1vZGFsV2l0aEJ1dHRvbnMoXG4gICAgICBjb250ZW50LFxuICAgICAgKCkgPT4ge1xuICAgICAgICAvLyDnoa7orqTlm57osINcbiAgICAgICAgdGhpcy5oYW5kbGVBZGRTdGlja2VyQ29uZmlybSgpO1xuICAgICAgfSxcbiAgICAgICgpID0+IHtcbiAgICAgICAgLy8g5Y+W5raI5Zue6LCDXG4gICAgICAgIHRoaXMuaGlkZU1vZGFsKCk7XG4gICAgICAgIC8vIOmHjeaWsOaYvuekuuihqOaDheWMhemAieaLqeWZqFxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2hvd1N0aWNrZXJTZWxlY3RvcigpLCAxMDApO1xuICAgICAgfSxcbiAgICApO1xuXG4gICAgLy8g5pi+56S65qih5oCB5qGGXG4gICAgdGhpcy5zaG93TW9kYWwoJ+a3u+WKoOihqOaDheWMhScsIG1vZGFsQ29udGVudCk7XG4gIH1cblxuICAvKipcbiAgICog5Yib5bu65re75Yqg6KGo5oOF5YyF5qih5oCB5qGG5YaF5a65XG4gICAqIEByZXR1cm5zIOaooeaAgeahhuWGheWuueWFg+e0oFxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVBZGRTdGlja2VyTW9kYWwoKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZFN0aWNrZXJNb2RhbFRlbXBsYXRlJyk7XG4gICAgaWYgKHRlbXBsYXRlKSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBjb250ZW50LmlubmVySFRNTCA9IHRlbXBsYXRlLmlubmVySFRNTDtcbiAgICAgIHJldHVybiBjb250ZW50LmZpcnN0RWxlbWVudENoaWxkIGFzIEhUTUxFbGVtZW50O1xuICAgIH1cblxuICAgIC8vIOWmguaenOaooeadv+S4jeWtmOWcqO+8jOWbnumAgOWIsOWKqOaAgeWIm+W7ulxuICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb250ZW50LmNsYXNzTmFtZSA9ICdtb2RhbC1jb250ZW50JztcbiAgICBjb250ZW50LmlubmVySFRNTCA9IGBcbiAgICAgIDxsYWJlbCBjbGFzcz1cIm1vZGFsLWxhYmVsXCI+6KGo5oOF5YyF5YaF5a6577yaPC9sYWJlbD5cbiAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwibW9kYWwtaW5wdXRcIiBwbGFjZWhvbGRlcj1cIui+k+WFpVVSTOOAgeaWh+S7tuWQjeaIluWkh+azqCvmlofku7blkI0uLi5cIiBpZD1cInN0aWNrZXJDb250ZW50SW5wdXRcIiAvPlxuICAgICAgXG4gICAgICA8bGFiZWwgY2xhc3M9XCJtb2RhbC1sYWJlbCBtb2RhbC1sYWJlbC1zcGFjZWRcIj7ooajmg4XljIXlpIfms6jvvJo8L2xhYmVsPlxuICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJtb2RhbC1pbnB1dFwiIHBsYWNlaG9sZGVyPVwi6L6T5YWl6KGo5oOF5YyF5aSH5rOo77yI5Y+v6YCJ77yJLi4uXCIgaWQ9XCJzdGlja2VyTm90ZUlucHV0XCIgLz5cbiAgICAgIFxuICAgICAgPGRpdiBjbGFzcz1cImlucHV0LWhlbHBcIj5cbiAgICAgICAgPHA+5pSv5oyB5qC85byP77yaPC9wPlxuICAgICAgICA8dWw+XG4gICAgICAgICAgPGxpPuWujOaVtFVSTO+8mmh0dHBzOi8vZXhhbXBsZS5jb20vaW1hZ2UuanBnPC9saT5cbiAgICAgICAgICA8bGk+5paH5Lu25ZCN77yaZWk2Y29pLmpwZWc8L2xpPlxuICAgICAgICAgIDxsaT7lpIfms6gr5paH5Lu25ZCN77ya5oiR5piv6LSl54qsZWk2Y29pLmpwZWc8L2xpPlxuICAgICAgICA8L3VsPlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiDlpITnkIbmt7vliqDooajmg4XljIXnoa7orqRcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgaGFuZGxlQWRkU3RpY2tlckNvbmZpcm0oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgY29udGVudElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0aWNrZXJDb250ZW50SW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IG5vdGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGlja2VyTm90ZUlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcblxuICAgIGlmICghY29udGVudElucHV0IHx8ICFub3RlSW5wdXQpIHJldHVybjtcblxuICAgIGNvbnN0IGNvbnRlbnQgPSBjb250ZW50SW5wdXQudmFsdWUudHJpbSgpO1xuICAgIGNvbnN0IG5vdGUgPSBub3RlSW5wdXQudmFsdWUudHJpbSgpO1xuXG4gICAgLy8g6L6T5YWl6aqM6K+BXG4gICAgaWYgKCFjb250ZW50KSB7XG4gICAgICB0aGlzLnNob3dUb2FzdCgn6K+36L6T5YWl6KGo5oOF5YyF5YaF5a65JywgJ3dhcm5pbmcnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8g5re75Yqg5Yiw5LiW55WM5LmmXG4gICAgICBjb25zdCBzdWNjZXNzID0gYXdhaXQgdGhpcy5hZGRTdGlja2VyVG9Mb3JlYm9vayhjb250ZW50LCBub3RlKTtcblxuICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgdGhpcy5zaG93VG9hc3QoJ+ihqOaDheWMhea3u+WKoOaIkOWKnycsICdzdWNjZXNzJyk7XG4gICAgICAgIHRoaXMuaGlkZU1vZGFsKCk7XG5cbiAgICAgICAgLy8g6YeN5paw5pi+56S66KGo5oOF5YyF6YCJ5oup5ZmoXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5zaG93U3RpY2tlclNlbGVjdG9yKCksIDEwMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNob3dUb2FzdCgn6KGo5oOF5YyF5re75Yqg5aSx6LSlJywgJ2Vycm9yJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+a3u+WKoOihqOaDheWMheWksei0pTonLCBlcnJvcik7XG4gICAgICB0aGlzLnNob3dUb2FzdCgn6KGo5oOF5YyF5re75Yqg5aSx6LSlJywgJ2Vycm9yJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOWkhOeQhuihqOaDheWMhemAieaLqVxuICAgKiBAcGFyYW0gc3RpY2tlciDpgInkuK3nmoTooajmg4XljIVcbiAgICovXG4gIHByaXZhdGUgaGFuZGxlU3RpY2tlclNlbGVjdGlvbihzdGlja2VyOiBTdGlja2VyRGF0YSk6IHZvaWQge1xuICAgIC8vIOWIm+W7uuihqOaDheWMhea2iOaBr1xuICAgIHRoaXMuY3JlYXRlU3RpY2tlck1lc3NhZ2Uoc3RpY2tlcik7XG5cbiAgICAvLyDpmpDol4/ooajmg4XljIXpgInmi6nlmahcbiAgICB0aGlzLmhpZGVTdGlja2VyU2VsZWN0b3IoKTtcblxuICAgIC8vIOaSreaUvumfs+aViFxuICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXlTb3VuZCgnZW1vamknKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlpITnkIbooajmg4XljIXliKDpmaRcbiAgICogQHBhcmFtIHVpZCDooajmg4XljIXnmoTkuJbnlYzkuabmnaHnm65JRFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBoYW5kbGVTdGlja2VyRGVsZXRlKHVpZDogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCB0aGlzLnJlbW92ZVN0aWNrZXJGcm9tTG9yZWJvb2sodWlkKTtcblxuICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgdGhpcy5zaG93VG9hc3QoJ+ihqOaDheWMheWIoOmZpOaIkOWKnycsICdzdWNjZXNzJyk7XG5cbiAgICAgICAgLy8g6YeN5paw5riy5p+T572R5qC8XG4gICAgICAgIGNvbnN0IHN0aWNrZXJTZWxlY3RvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGlja2VyU2VsZWN0b3InKTtcbiAgICAgICAgaWYgKHN0aWNrZXJTZWxlY3Rvcikge1xuICAgICAgICAgIHRoaXMucmVuZGVyU3RpY2tlckdyaWQoc3RpY2tlclNlbGVjdG9yKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zaG93VG9hc3QoJ+ihqOaDheWMheWIoOmZpOWksei0pScsICdlcnJvcicpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfliKDpmaTooajmg4XljIXlpLHotKU6JywgZXJyb3IpO1xuICAgICAgdGhpcy5zaG93VG9hc3QoJ+ihqOaDheWMheWIoOmZpOWksei0pScsICdlcnJvcicpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDliJvlu7rooajmg4XljIXmtojmga/lubbmt7vliqDliLDlj5HpgIHpmJ/liJdcbiAgICogQHBhcmFtIHN0aWNrZXIg6KGo5oOF5YyF5pWw5o2uXG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZVN0aWNrZXJNZXNzYWdlKHN0aWNrZXI6IFN0aWNrZXJEYXRhKTogdm9pZCB7XG4gICAgLy8g5LuO5a6M5pW0VVJM5Lit5o+Q5Y+W5paH5Lu25ZCN5ZKM5ZCO57yAXG4gICAgY29uc3QgZmlsZU5hbWUgPSB0aGlzLmV4dHJhY3RGaWxlTmFtZUZyb21Vcmwoc3RpY2tlci51cmwpO1xuXG4gICAgLy8g57uE5ZCI5aSH5rOo5ZKM5paH5Lu25ZCN77yM5qC85byP77ya5aSH5rOoK+aWh+S7tuWQje+8iOWmgu+8mueEpuiZkTJhOXd0ZS5qcGVn77yJXG4gICAgY29uc3Qgc3RpY2tlckNvbnRlbnQgPSBzdGlja2VyLm5vdGUgKyBmaWxlTmFtZTtcblxuICAgIGNvbnNvbGUubG9nKGDwn5OdIOihqOaDheWMheWPkemAgeagvOW8jzogJHtzdGlja2VyQ29udGVudH0gKOWOn1VSTDogJHtzdGlja2VyLnVybH0pYCk7XG5cbiAgICAvLyDliJvlu7rooajmg4XljIXmtojmga8gLSDkvb/nlKjlpIfms6gr5paH5Lu25ZCN5qC85byP77yM6K6pTExN6IO955CG6Kej6KGo5oOF5YyF5ZCr5LmJXG4gICAgY29uc3Qgc3RpY2tlck1lc3NhZ2U6IENoYXRNZXNzYWdlID0ge1xuICAgICAgaWQ6IHRoaXMuZ2VuZXJhdGVNZXNzYWdlSWQoKSxcbiAgICAgIHR5cGU6ICdTJyxcbiAgICAgIGNoYXRJZDogdGhpcy5jdXJyZW50Q2hhdCxcbiAgICAgIHNlbmRlcjogJ3t7dXNlcn19JyxcbiAgICAgIGF2YXRhcjogJycsXG4gICAgICBtZXNzYWdlVHlwZTogJ3N0aWNrZXInLFxuICAgICAgY29udGVudDogc3RpY2tlckNvbnRlbnQsIC8vIOS9v+eUqOWkh+azqCvmlofku7blkI3moLzlvI/vvIjlpoLvvJrnhKbomZEyYTl3dGUuanBlZ++8iVxuICAgICAgdGltZXN0YW1wOiB0aGlzLmdldEN1cnJlbnRUaW1lKCksXG4gICAgICBpc1BlbmRpbmc6IHRydWUsXG4gICAgICAvLyDkv53lrZjlrozmlbRVUkzliLBkYXRh5a2X5q6177yM55So5LqO55WM6Z2i5pi+56S6XG4gICAgICBkYXRhOiB7XG4gICAgICAgIHN0aWNrZXJVcmw6IHN0aWNrZXIudXJsLFxuICAgICAgICBzdGlja2VyTm90ZTogc3RpY2tlci5ub3RlLFxuICAgICAgICBzdGlja2VyRmlsZU5hbWU6IGZpbGVOYW1lLFxuICAgICAgfSxcbiAgICB9O1xuXG4gICAgLy8g5re75Yqg5Yiw5Y+R6YCB6Zif5YiXXG4gICAgdGhpcy5hZGRUb1NlbmRRdWV1ZShzdGlja2VyTWVzc2FnZSk7XG5cbiAgICAvLyDmt7vliqDliLDnlYzpnaLmmL7npLpcbiAgICB0aGlzLmFkZE5ld01lc3NhZ2VUb0ludGVyZmFjZShzdGlja2VyTWVzc2FnZSk7XG4gIH1cblxuICAvKipcbiAgICog5LuOVVJM5Lit5o+Q5Y+W5paH5Lu25ZCN77yI5YyF5ZCr5ZCO57yA77yJXG4gICAqIEBwYXJhbSB1cmwg5a6M5pW055qEVVJMXG4gICAqIEByZXR1cm5zIOaWh+S7tuWQje+8iOWmgu+8mjJhOXd0ZS5qcGVn77yJXG4gICAqL1xuICBwcml2YXRlIGV4dHJhY3RGaWxlTmFtZUZyb21VcmwodXJsOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHRyeSB7XG4gICAgICAvLyDku45VUkzkuK3mj5Dlj5bmlofku7blkI1cbiAgICAgIGNvbnN0IHVybFBhcnRzID0gdXJsLnNwbGl0KCcvJyk7XG4gICAgICBjb25zdCBmaWxlTmFtZSA9IHVybFBhcnRzW3VybFBhcnRzLmxlbmd0aCAtIDFdO1xuXG4gICAgICAvLyDlpoLmnpzmlofku7blkI3ljIXlkKvmn6Xor6Llj4LmlbDvvIzljrvmjonlroPku6xcbiAgICAgIGNvbnN0IGNsZWFuRmlsZU5hbWUgPSBmaWxlTmFtZS5zcGxpdCgnPycpWzBdO1xuXG4gICAgICBjb25zb2xlLmxvZyhg8J+UjSDku45VUkzmj5Dlj5bmlofku7blkI06ICR7dXJsfSAtPiAke2NsZWFuRmlsZU5hbWV9YCk7XG4gICAgICByZXR1cm4gY2xlYW5GaWxlTmFtZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCfmj5Dlj5bmlofku7blkI3lpLHotKU6JywgZXJyb3IpO1xuICAgICAgLy8g5aaC5p6c5o+Q5Y+W5aSx6LSl77yM55Sf5oiQ5LiA5Liq6ZqP5py65paH5Lu25ZCNXG4gICAgICBjb25zdCByYW5kb21JZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA2KTtcbiAgICAgIHJldHVybiBgJHtyYW5kb21JZH0uanBnYDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5re75Yqg6KGo5oOF5YyF6ZW/5oyJ57yW6L6R5LqL5Lu2XG4gICAqIEBwYXJhbSBpdGVtIOihqOaDheWMhemhueebruWFg+e0oFxuICAgKi9cbiAgcHJpdmF0ZSBhZGRTdGlja2VyRWRpdEV2ZW50cyhpdGVtOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIGxldCBsb25nUHJlc3NUaW1lcjogTm9kZUpTLlRpbWVvdXQ7XG4gICAgbGV0IGlzTG9uZ1ByZXNzID0gZmFsc2U7XG4gICAgbGV0IHN0YXJ0WCA9IDA7XG4gICAgbGV0IHN0YXJ0WSA9IDA7XG4gICAgY29uc3QgbW92ZVRocmVzaG9sZCA9IDEwOyAvLyDnp7vliqjotoXov4cxMOWDj+e0oOWwseWPlua2iOmVv+aMiVxuXG4gICAgLy8g6I635Y+W6Kem5pG45oiW6byg5qCH5L2N572uXG4gICAgY29uc3QgZ2V0UG9zaXRpb24gPSAoZTogTW91c2VFdmVudCB8IFRvdWNoRXZlbnQpID0+IHtcbiAgICAgIGlmIChlIGluc3RhbmNlb2YgVG91Y2hFdmVudCAmJiBlLnRvdWNoZXMubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4geyB4OiBlLnRvdWNoZXNbMF0uY2xpZW50WCwgeTogZS50b3VjaGVzWzBdLmNsaWVudFkgfTtcbiAgICAgIH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIE1vdXNlRXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIHsgeDogZS5jbGllbnRYLCB5OiBlLmNsaWVudFkgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7IHg6IDAsIHk6IDAgfTtcbiAgICB9O1xuXG4gICAgLy8g5qOA5p+l5piv5ZCm56e75Yqo6L+H6L+cXG4gICAgY29uc3QgY2hlY2tNb3ZlbWVudCA9IChlOiBNb3VzZUV2ZW50IHwgVG91Y2hFdmVudCkgPT4ge1xuICAgICAgY29uc3QgcG9zID0gZ2V0UG9zaXRpb24oZSk7XG4gICAgICBjb25zdCBkaXN0YW5jZSA9IE1hdGguc3FydChNYXRoLnBvdyhwb3MueCAtIHN0YXJ0WCwgMikgKyBNYXRoLnBvdyhwb3MueSAtIHN0YXJ0WSwgMikpO1xuXG4gICAgICAvLyDlpoLmnpznp7vliqjot53nprvotoXov4fpmIjlgLzvvIzlj5bmtojplb/mjIlcbiAgICAgIGlmIChkaXN0YW5jZSA+IG1vdmVUaHJlc2hvbGQpIHtcbiAgICAgICAgY2FuY2VsTG9uZ1ByZXNzKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIOmVv+aMieW8gOWni+e8lui+kVxuICAgIGNvbnN0IHN0YXJ0TG9uZ1ByZXNzID0gKGU6IE1vdXNlRXZlbnQgfCBUb3VjaEV2ZW50KSA9PiB7XG4gICAgICAvLyDorrDlvZXotbflp4vkvY3nva5cbiAgICAgIGNvbnN0IHBvcyA9IGdldFBvc2l0aW9uKGUpO1xuICAgICAgc3RhcnRYID0gcG9zLng7XG4gICAgICBzdGFydFkgPSBwb3MueTtcblxuICAgICAgbG9uZ1ByZXNzVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaXNMb25nUHJlc3MgPSB0cnVlO1xuICAgICAgICBjb25zdCB1aWQgPSBwYXJzZUludChpdGVtLmRhdGFzZXQudWlkIHx8ICcwJyk7XG4gICAgICAgIHRoaXMuc2hvd1N0aWNrZXJFZGl0TW9kYWwodWlkKTtcbiAgICAgIH0sIDUwMCk7IC8vIDUwMG1z6ZW/5oyJXG4gICAgfTtcblxuICAgIC8vIOWPlua2iOmVv+aMiVxuICAgIGNvbnN0IGNhbmNlbExvbmdQcmVzcyA9ICgpID0+IHtcbiAgICAgIGlmIChsb25nUHJlc3NUaW1lcikge1xuICAgICAgICBjbGVhclRpbWVvdXQobG9uZ1ByZXNzVGltZXIpO1xuICAgICAgfVxuICAgICAgaXNMb25nUHJlc3MgPSBmYWxzZTtcbiAgICB9O1xuXG4gICAgLy8g6byg5qCHL+inpuaRuOS6i+S7tlxuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgc3RhcnRMb25nUHJlc3MpO1xuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHN0YXJ0TG9uZ1ByZXNzLCB7IHBhc3NpdmU6IHRydWUgfSk7XG5cbiAgICAvLyDnp7vliqjkuovku7YgLSDmo4DmtYvmmK/lkKbnp7vliqjov4fov5xcbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGNoZWNrTW92ZW1lbnQpO1xuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgY2hlY2tNb3ZlbWVudCwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuXG4gICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgY2FuY2VsTG9uZ1ByZXNzKTtcbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBjYW5jZWxMb25nUHJlc3MpO1xuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBjYW5jZWxMb25nUHJlc3MpO1xuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCBjYW5jZWxMb25nUHJlc3MpO1xuXG4gICAgLy8g6Ziy5q2i6ZW/5oyJ5ZCO55qE54K55Ye75LqL5Lu2XG4gICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgaWYgKGlzTG9uZ1ByZXNzKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgaXNMb25nUHJlc3MgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09IOaZuuiDveihqOaDheWMheW7uuiuruezu+e7nyA9PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiDlpITnkIbovpPlhaXmoYblj5jljJbkuovku7ZcbiAgICogQHBhcmFtIGV2ZW50IOi+k+WFpeS6i+S7tlxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVJbnB1dENoYW5nZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICAvLyDmo4Dmn6Xorr7nva7mmK/lkKblhYHorrjooajmg4XljIXlu7rorq5cbiAgICBpZiAoIXRoaXMuc2V0dGluZ3NNb2RhbCB8fCAhdGhpcy5zZXR0aW5nc01vZGFsLmdldEN1cnJlbnRTZXR0aW5ncygpLmVtb2ppU3VnZ2VzdGlvbnNFbmFibGVkKSB7XG4gICAgICB0aGlzLmhpZGVTdGlja2VyU3VnZ2VzdGlvbnNJbW1lZGlhdGVseSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGlucHV0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgdGV4dCA9IGlucHV0LnZhbHVlLnRyaW0oKTtcblxuICAgIC8vIOa4hemZpOS5i+WJjeeahOWumuaXtuWZqFxuICAgIGlmICh0aGlzLmlucHV0Q2hhbmdlVGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmlucHV0Q2hhbmdlVGltZXIpO1xuICAgIH1cblxuICAgIC8vIOWmguaenOi+k+WFpeS4uuepuu+8jOeri+WNs+makOiXj+W7uuiurlxuICAgIGlmICghdGV4dCkge1xuICAgICAgdGhpcy5oaWRlU3RpY2tlclN1Z2dlc3Rpb25zSW1tZWRpYXRlbHkoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyDpmLLmipblpITnkIbvvIwzMDBtc+WQjuaJp+ihjOaQnOe0olxuICAgIHRoaXMuaW5wdXRDaGFuZ2VUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5zZWFyY2hBbmRTaG93U3VnZ2VzdGlvbnModGV4dCk7XG4gICAgfSwgMzAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmkJzntKLlubbmmL7npLrooajmg4XljIXlu7rorq5cbiAgICogQHBhcmFtIHNlYXJjaFRleHQg5pCc57Si5paH5pysXG4gICAqL1xuICBwcml2YXRlIHNlYXJjaEFuZFNob3dTdWdnZXN0aW9ucyhzZWFyY2hUZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBtYXRjaGluZ1N0aWNrZXJzID0gdGhpcy5maW5kTWF0Y2hpbmdTdGlja2VycyhzZWFyY2hUZXh0KTtcblxuICAgIGlmIChtYXRjaGluZ1N0aWNrZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuc2hvd1N0aWNrZXJTdWdnZXN0aW9ucyhtYXRjaGluZ1N0aWNrZXJzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oaWRlU3RpY2tlclN1Z2dlc3Rpb25zSW1tZWRpYXRlbHkoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5qC55o2u6L6T5YWl5paH5a2X5Yy56YWN6KGo5oOF5YyF5aSH5rOoXG4gICAqIEBwYXJhbSBzZWFyY2hUZXh0IOaQnOe0ouaWh+acrFxuICAgKiBAcmV0dXJucyDljLnphY3nmoTooajmg4XljIXmlbDnu4RcbiAgICovXG4gIHByaXZhdGUgZmluZE1hdGNoaW5nU3RpY2tlcnMoc2VhcmNoVGV4dDogc3RyaW5nKTogU3RpY2tlckRhdGFbXSB7XG4gICAgaWYgKCFzZWFyY2hUZXh0IHx8IHRoaXMuc3RpY2tlckRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3Qgc2VhcmNoTG93ZXIgPSBzZWFyY2hUZXh0LnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgbWF0Y2hlczogQXJyYXk8eyBzdGlja2VyOiBTdGlja2VyRGF0YTsgc2NvcmU6IG51bWJlciB9PiA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBzdGlja2VyIG9mIHRoaXMuc3RpY2tlckRhdGEpIHtcbiAgICAgIGNvbnN0IG5vdGUgPSBzdGlja2VyLm5vdGUudG9Mb3dlckNhc2UoKTtcbiAgICAgIGxldCBzY29yZSA9IDA7XG5cbiAgICAgIC8vIDEuIOWujOWFqOWMuemFje+8iOacgOmrmOS8mOWFiOe6p++8iVxuICAgICAgaWYgKG5vdGUgPT09IHNlYXJjaExvd2VyKSB7XG4gICAgICAgIHNjb3JlID0gMTAwO1xuICAgICAgfVxuICAgICAgLy8gMi4g5byA5aS05Yy56YWNXG4gICAgICBlbHNlIGlmIChub3RlLnN0YXJ0c1dpdGgoc2VhcmNoTG93ZXIpKSB7XG4gICAgICAgIHNjb3JlID0gODA7XG4gICAgICB9XG4gICAgICAvLyAzLiDljIXlkKvljLnphY1cbiAgICAgIGVsc2UgaWYgKG5vdGUuaW5jbHVkZXMoc2VhcmNoTG93ZXIpKSB7XG4gICAgICAgIHNjb3JlID0gNjA7XG4gICAgICB9XG4gICAgICAvLyA0LiDmqKHns4rljLnphY3vvIjmr4/kuKrlrZfnrKbpg73lrZjlnKjvvIlcbiAgICAgIGVsc2UgaWYgKHRoaXMuZnV6enlNYXRjaChub3RlLCBzZWFyY2hMb3dlcikpIHtcbiAgICAgICAgc2NvcmUgPSA0MDtcbiAgICAgIH1cbiAgICAgIC8vIDUuIOaLvOmfs+WMuemFje+8iOeugOWNleWunueOsO+8iVxuICAgICAgZWxzZSBpZiAodGhpcy5waW55aW5NYXRjaChub3RlLCBzZWFyY2hMb3dlcikpIHtcbiAgICAgICAgc2NvcmUgPSAzMDtcbiAgICAgIH1cblxuICAgICAgaWYgKHNjb3JlID4gMCkge1xuICAgICAgICBtYXRjaGVzLnB1c2goeyBzdGlja2VyLCBzY29yZSB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDmjInliIbmlbDmjpLluo/vvIzlj5bliY025LiqXG4gICAgcmV0dXJuIG1hdGNoZXNcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiLnNjb3JlIC0gYS5zY29yZSlcbiAgICAgIC5zbGljZSgwLCA2KVxuICAgICAgLm1hcChtYXRjaCA9PiBtYXRjaC5zdGlja2VyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmqKHns4rljLnphY3nrpfms5VcbiAgICogQHBhcmFtIHRleHQg55uu5qCH5paH5pysXG4gICAqIEBwYXJhbSBwYXR0ZXJuIOaQnOe0ouaooeW8j1xuICAgKiBAcmV0dXJucyDmmK/lkKbljLnphY1cbiAgICovXG4gIHByaXZhdGUgZnV6enlNYXRjaCh0ZXh0OiBzdHJpbmcsIHBhdHRlcm46IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGxldCB0ZXh0SW5kZXggPSAwO1xuICAgIGxldCBwYXR0ZXJuSW5kZXggPSAwO1xuXG4gICAgd2hpbGUgKHRleHRJbmRleCA8IHRleHQubGVuZ3RoICYmIHBhdHRlcm5JbmRleCA8IHBhdHRlcm4ubGVuZ3RoKSB7XG4gICAgICBpZiAodGV4dFt0ZXh0SW5kZXhdID09PSBwYXR0ZXJuW3BhdHRlcm5JbmRleF0pIHtcbiAgICAgICAgcGF0dGVybkluZGV4Kys7XG4gICAgICB9XG4gICAgICB0ZXh0SW5kZXgrKztcbiAgICB9XG5cbiAgICByZXR1cm4gcGF0dGVybkluZGV4ID09PSBwYXR0ZXJuLmxlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiDnroDljZXmi7zpn7PljLnphY3vvIjln7rkuo7luLjop4Hmi7zpn7PpppblrZfmr43vvIlcbiAgICogQHBhcmFtIHRleHQg55uu5qCH5paH5pysXG4gICAqIEBwYXJhbSBwYXR0ZXJuIOaQnOe0ouaooeW8j1xuICAgKiBAcmV0dXJucyDmmK/lkKbljLnphY1cbiAgICovXG4gIHByaXZhdGUgcGlueWluTWF0Y2godGV4dDogc3RyaW5nLCBwYXR0ZXJuOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAvLyDnroDljZXnmoTmi7zpn7PmmKDlsITooajvvIjlj6/ku6XmianlsZXvvIlcbiAgICBjb25zdCBwaW55aW5NYXA6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nW10gfSA9IHtcbiAgICAgIGE6IFsn5ZWKJywgJ+mYvyddLFxuICAgICAgYjogWyfkuI0nLCAn55m9JywgJ+iiqycsICfmnKwnLCAn5q+UJywgJ+WIqycsICfmioonXSxcbiAgICAgIGM6IFsn5Ye6JywgJ+S7jicsICfmiY0nLCAn5oiQJywgJ+mVvycsICfluLgnLCAn5ZCDJ10sXG4gICAgICBkOiBbJ+eahCcsICfliLAnLCAn6YO9JywgJ+WkpycsICflr7knLCAn5L2GJywgJ+W+lycsICfmiZMnXSxcbiAgICAgIGU6IFsn6aKdJywgJ+aBtiddLFxuICAgICAgZjogWyflj5EnLCAn5pS+JywgJ+mdnicsICfliIYnLCAn6aOOJywgJ+acjSddLFxuICAgICAgZzogWyfkuKonLCAn57uZJywgJ+i/hycsICflm70nLCAn5YWsJywgJ+mrmCcsICfmhJ8nXSxcbiAgICAgIGg6IFsn5ZKMJywgJ+W+iCcsICflpb0nLCAn6L+YJywgJ+S8micsICflkI4nLCAn6buRJywgJ+e6oiddLFxuICAgICAgajogWyflsLEnLCAn6L+bJywgJ+ingScsICflj6snLCAn5a62JywgJ+S7iicsICflh6AnXSxcbiAgICAgIGs6IFsn5Y+vJywgJ+eciycsICflvIAnLCAn5b+rJywgJ+WTrSddLFxuICAgICAgbDogWyfkuoYnLCAn5p2lJywgJ+mHjCcsICfogIEnLCAn5LikJywgJ+i3rycsICfnu78nXSxcbiAgICAgIG06IFsn5rKhJywgJ+S5iCcsICfku6wnLCAn6Z2iJywgJ+e+jicsICfnjKsnXSxcbiAgICAgIG46IFsn5L2gJywgJ+mCoycsICfog70nLCAn5bm0JywgJ+WlsyddLFxuICAgICAgcDogWyfot5EnLCAn5oCVJywgJ+aciyddLFxuICAgICAgcTogWyfljrsnLCAn5YmNJywgJ+i1tycsICfor7cnXSxcbiAgICAgIHI6IFsn5Lq6JywgJ+iuqScsICflpoInLCAn54S2J10sXG4gICAgICBzOiBbJ+aYrycsICfor7QnLCAn5omAJywgJ+S4iScsICfkuIonLCAn5pe2JywgJ+eUnyddLFxuICAgICAgdDogWyfku5YnLCAn5aW5JywgJ+WugycsICflpKonLCAn5aSpJywgJ+WQrCcsICflpLQnXSxcbiAgICAgIHc6IFsn5oiRJywgJ+S4uicsICfpl64nLCAn546LJywgJ+S6lCcsICfkuIcnXSxcbiAgICAgIHg6IFsn5oOzJywgJ+WwjycsICflv4MnLCAn5pawJywgJ+eskScsICfkuIsnXSxcbiAgICAgIHk6IFsn5LiAJywgJ+aciScsICfopoEnLCAn5LmfJywgJ+eUqCcsICflj4gnLCAn55y8J10sXG4gICAgICB6OiBbJ+WcqCcsICfov5knLCAn5LitJywgJ+iHqicsICfotbAnLCAn5pyAJywgJ+WBmiddLFxuICAgIH07XG5cbiAgICAvLyDmo4Dmn6XmmK/lkKbmnInmi7zpn7PpppblrZfmr43ljLnphY1cbiAgICBmb3IgKGNvbnN0IGNoYXIgb2YgcGF0dGVybikge1xuICAgICAgaWYgKHBpbnlpbk1hcFtjaGFyXSkge1xuICAgICAgICBmb3IgKGNvbnN0IHBpbnlpbkNoYXIgb2YgcGlueWluTWFwW2NoYXJdKSB7XG4gICAgICAgICAgaWYgKHRleHQuaW5jbHVkZXMocGlueWluQ2hhcikpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmmL7npLrooajmg4XljIXlu7rorq5cbiAgICogQHBhcmFtIHN1Z2dlc3Rpb25zIOW7uuiurueahOihqOaDheWMheaVsOe7hFxuICAgKi9cbiAgcHJpdmF0ZSBzaG93U3RpY2tlclN1Z2dlc3Rpb25zKHN1Z2dlc3Rpb25zOiBTdGlja2VyRGF0YVtdKTogdm9pZCB7XG4gICAgY29uc3QgaW5wdXRGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dEZpZWxkJyk7XG4gICAgaWYgKCFpbnB1dEZpZWxkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8g5aaC5p6c5bey57uP5pyJ5bu66K6u5a655Zmo77yM5YWI56uL5Y2z5riF55CG77yI5LiN5L2/55So5bu26L+f77yJXG4gICAgaWYgKHRoaXMuc3VnZ2VzdGlvbkNvbnRhaW5lciAmJiB0aGlzLnN1Z2dlc3Rpb25Db250YWluZXIucGFyZW50Tm9kZSkge1xuICAgICAgdGhpcy5zdWdnZXN0aW9uQ29udGFpbmVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5zdWdnZXN0aW9uQ29udGFpbmVyKTtcbiAgICB9XG5cbiAgICAvLyDliJvlu7rmlrDnmoTlu7rorq7lrrnlmahcbiAgICB0aGlzLnN1Z2dlc3Rpb25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLnN1Z2dlc3Rpb25Db250YWluZXIuY2xhc3NOYW1lID0gJ3N0aWNrZXItc3VnZ2VzdGlvbnMnO1xuICAgIHRoaXMuc3VnZ2VzdGlvbkNvbnRhaW5lci5pbm5lckhUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwic3VnZ2VzdGlvbnMtaGVhZGVyXCI+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwic3VnZ2VzdGlvbnMtdGl0bGVcIj7ooajmg4XljIXlu7rorq48L3NwYW4+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwic3VnZ2VzdGlvbnMtY291bnRcIj4ke3N1Z2dlc3Rpb25zLmxlbmd0aH08L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJzdWdnZXN0aW9ucy1ncmlkXCI+PC9kaXY+XG4gICAgYDtcblxuICAgIC8vIOa3u+WKoOWIsOi+k+WFpeWMuuWfn1xuICAgIGNvbnN0IGNoYXRJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LWlucHV0Jyk7XG4gICAgaWYgKGNoYXRJbnB1dCkge1xuICAgICAgY2hhdElucHV0LmFwcGVuZENoaWxkKHRoaXMuc3VnZ2VzdGlvbkNvbnRhaW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyDmuLLmn5Plu7rorq7ooajmg4XljIVcbiAgICBjb25zdCBncmlkID0gdGhpcy5zdWdnZXN0aW9uQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zdWdnZXN0aW9ucy1ncmlkJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgc3VnZ2VzdGlvbnMuZm9yRWFjaChzdGlja2VyID0+IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGl0ZW0uY2xhc3NOYW1lID0gJ3N1Z2dlc3Rpb24taXRlbSc7XG4gICAgICBpdGVtLnRpdGxlID0gc3RpY2tlci5ub3RlIHx8ICfooajmg4XljIUnO1xuXG4gICAgICBjb25zdCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgIGltZy5zcmMgPSBzdGlja2VyLnVybDtcbiAgICAgIGltZy5hbHQgPSBzdGlja2VyLm5vdGUgfHwgJ+ihqOaDheWMhSc7XG4gICAgICBpbWcub25lcnJvciA9ICgpID0+IHtcbiAgICAgICAgaXRlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgfTtcblxuICAgICAgaXRlbS5hcHBlbmRDaGlsZChpbWcpO1xuICAgICAgZ3JpZC5hcHBlbmRDaGlsZChpdGVtKTtcblxuICAgICAgLy8g54K55Ye75bu66K6u5Y+R6YCB6KGo5oOF5YyFXG4gICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdGhpcy5zZW5kU3RpY2tlckZyb21TdWdnZXN0aW9uKHN0aWNrZXIpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyDorr7nva7nirbmgIHlubbmmL7npLrliqjnlLtcbiAgICB0aGlzLmlzU3VnZ2VzdGlvblZpc2libGUgPSB0cnVlO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAodGhpcy5zdWdnZXN0aW9uQ29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMuc3VnZ2VzdGlvbkNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgfVxuICAgIH0sIDEwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDpmpDol4/ooajmg4XljIXlu7rorq5cbiAgICovXG4gIHByaXZhdGUgaGlkZVN0aWNrZXJTdWdnZXN0aW9ucygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zdWdnZXN0aW9uQ29udGFpbmVyKSB7XG4gICAgICB0aGlzLnN1Z2dlc3Rpb25Db250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuc3VnZ2VzdGlvbkNvbnRhaW5lciAmJiB0aGlzLnN1Z2dlc3Rpb25Db250YWluZXIucGFyZW50Tm9kZSkge1xuICAgICAgICAgIHRoaXMuc3VnZ2VzdGlvbkNvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuc3VnZ2VzdGlvbkNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdWdnZXN0aW9uQ29udGFpbmVyID0gbnVsbDtcbiAgICAgICAgLy8g5Y+q5pyJ5ZyoRE9N56e76Zmk5ZCO5omN6K6+572u54q25oCB5Li65LiN5Y+v6KeBXG4gICAgICAgIHRoaXMuaXNTdWdnZXN0aW9uVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgfSwgMjAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8g5Y2z5L2/5rKh5pyJ5a655Zmo77yM5Lmf6KaB56Gu5L+d54q25oCB5q2j56GuXG4gICAgICB0aGlzLmlzU3VnZ2VzdGlvblZpc2libGUgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog56uL5Y2z6ZqQ6JeP6KGo5oOF5YyF5bu66K6u77yI55So5LqO6L6T5YWl5Y+Y5YyW5pe255qE5b+r6YCf5YiH5o2i77yJXG4gICAqL1xuICBwcml2YXRlIGhpZGVTdGlja2VyU3VnZ2VzdGlvbnNJbW1lZGlhdGVseSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zdWdnZXN0aW9uQ29udGFpbmVyKSB7XG4gICAgICB0aGlzLnN1Z2dlc3Rpb25Db250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuXG4gICAgICBpZiAodGhpcy5zdWdnZXN0aW9uQ29udGFpbmVyLnBhcmVudE5vZGUpIHtcbiAgICAgICAgdGhpcy5zdWdnZXN0aW9uQ29udGFpbmVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5zdWdnZXN0aW9uQ29udGFpbmVyKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zdWdnZXN0aW9uQ29udGFpbmVyID0gbnVsbDtcbiAgICAgIHRoaXMuaXNTdWdnZXN0aW9uVmlzaWJsZSA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyDljbPkvb/msqHmnInlrrnlmajvvIzkuZ/opoHnoa7kv53nirbmgIHmraPnoa5cbiAgICAgIHRoaXMuaXNTdWdnZXN0aW9uVmlzaWJsZSA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDku47lu7rorq7kuK3lj5HpgIHooajmg4XljIVcbiAgICogQHBhcmFtIHN0aWNrZXIg6KGo5oOF5YyF5pWw5o2uXG4gICAqL1xuICBwcml2YXRlIHNlbmRTdGlja2VyRnJvbVN1Z2dlc3Rpb24oc3RpY2tlcjogU3RpY2tlckRhdGEpOiB2b2lkIHtcbiAgICAvLyDmuIXnqbrovpPlhaXmoYZcbiAgICBjb25zdCBpbnB1dEZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0RmllbGQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGlmIChpbnB1dEZpZWxkKSB7XG4gICAgICBpbnB1dEZpZWxkLnZhbHVlID0gJyc7XG4gICAgfVxuXG4gICAgLy8g5L2/55So5paw55qE6KGo5oOF5YyF5Y+R6YCB5qC85byP77ya5aSH5rOoK+WQjue8gFxuICAgIGNvbnN0IGZpbGVOYW1lID0gdGhpcy5leHRyYWN0RmlsZU5hbWVGcm9tVXJsKHN0aWNrZXIudXJsKTtcbiAgICBjb25zdCBzdGlja2VyQ29udGVudCA9IHN0aWNrZXIubm90ZSA/IGAke3N0aWNrZXIubm90ZX0ke2ZpbGVOYW1lfWAgOiBmaWxlTmFtZTtcblxuICAgIC8vIOWIm+W7uuihqOaDheWMhea2iOaBr1xuICAgIGNvbnN0IHN0aWNrZXJNZXNzYWdlOiBDaGF0TWVzc2FnZSA9IHtcbiAgICAgIGlkOiB0aGlzLmdlbmVyYXRlTWVzc2FnZUlkKCksXG4gICAgICB0eXBlOiAnUycsXG4gICAgICBjaGF0SWQ6IHRoaXMuY3VycmVudENoYXQsXG4gICAgICBzZW5kZXI6ICd7e3VzZXJ9fScsXG4gICAgICBhdmF0YXI6ICcnLFxuICAgICAgbWVzc2FnZVR5cGU6ICdzdGlja2VyJyxcbiAgICAgIGNvbnRlbnQ6IHN0aWNrZXJDb250ZW50LCAvLyDkvb/nlKjmlrDmoLzlvI/vvJrlpIfms6gr5ZCO57yAXG4gICAgICB0aW1lc3RhbXA6IHRoaXMuZ2V0Q3VycmVudFRpbWUoKSxcbiAgICAgIGlzUGVuZGluZzogdHJ1ZSxcbiAgICB9O1xuXG4gICAgLy8g5re75Yqg5Yiw5Y+R6YCB6Zif5YiXXG4gICAgdGhpcy5hZGRUb1NlbmRRdWV1ZShzdGlja2VyTWVzc2FnZSk7XG5cbiAgICAvLyDmt7vliqDliLDnlYzpnaJcbiAgICB0aGlzLmFkZE5ld01lc3NhZ2VUb0ludGVyZmFjZShzdGlja2VyTWVzc2FnZSk7XG5cbiAgICAvLyDpmpDol4/lu7rorq5cbiAgICB0aGlzLmhpZGVTdGlja2VyU3VnZ2VzdGlvbnNJbW1lZGlhdGVseSgpO1xuXG4gICAgLy8g5pKt5pS+6Z+z5pWIXG4gICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheVNvdW5kKCdjbGljaycpO1xuXG4gICAgY29uc29sZS5sb2coJ+S7juW7uuiuruWPkemAgeihqOaDheWMhTonLCBzdGlja2VyLm5vdGUsICfihpInLCBzdGlja2VyQ29udGVudCk7XG4gIH1cblxuICAvKipcbiAgICog5pi+56S655So5oi35raI5oGv5LiK5LiL5paH6I+c5Y2VXG4gICAqL1xuICBwcml2YXRlIHNob3dVc2VyTWVzc2FnZUNvbnRleHRNZW51KGV2ZW50OiBNb3VzZUV2ZW50LCBtZXNzYWdlOiBDaGF0TWVzc2FnZSwgbWVzc2FnZUVsZW1lbnQ6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgLy8g5Yib5bu65qih5oCB5qGGXG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBtb2RhbC5jbGFzc05hbWUgPSAnbW9kYWwtb3ZlcmxheSB1c2VyLW1lc3NhZ2UtY29udGV4dC1tb2RhbCc7XG4gICAgbW9kYWwuaW5uZXJIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRhaW5lclwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+XG4gICAgICAgICAgPGgzPua2iOaBr+aTjeS9nDwvaDM+XG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm1vZGFsLWNsb3NlLWJ0blwiPsOXPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPlxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJtb2RhbC1idG4gZGVsZXRlLWJ0blwiIGRhdGEtYWN0aW9uPVwiYmF0Y2gtZGVsZXRlXCI+XG4gICAgICAgICAgICDliKDpmaTmtojmga9cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwibW9kYWwtYnRuIHJlcm9sbC1idG5cIiBkYXRhLWFjdGlvbj1cInJlcm9sbFwiPlxuICAgICAgICAgICAg6YeN5paw55Sf5oiQXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYDtcblxuICAgIC8vIOa3u+WKoOWIsOaJi+acuuWuueWZqOWGhe+8jOiAjOS4jeaYr+aVtOS4qumhtemdolxuICAgIGNvbnN0IHBob25lQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBob25lLWNvbnRhaW5lcicpO1xuICAgIGlmIChwaG9uZUNvbnRhaW5lcikge1xuICAgICAgcGhvbmVDb250YWluZXIuYXBwZW5kQ2hpbGQobW9kYWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1vZGFsKTtcbiAgICB9XG5cbiAgICAvLyDmmL7npLrmqKHmgIHmoYZcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgICB9LCAxMCk7XG5cbiAgICAvLyDnu5HlrprmjInpkq7ngrnlh7vkuovku7ZcbiAgICBjb25zdCBkZWxldGVCdG4gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hY3Rpb249XCJiYXRjaC1kZWxldGVcIl0nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICBjb25zdCByZXJvbGxCdG4gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hY3Rpb249XCJyZXJvbGxcIl0nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICBjb25zdCBjbG9zZUJ0biA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1jbG9zZS1idG4nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcblxuICAgIC8vIOa3u+WKoOepuuWAvOajgOafpVxuICAgIGlmIChkZWxldGVCdG4pIHtcbiAgICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5lbnRlckJhdGNoRGVsZXRlTW9kZSgpO1xuICAgICAgICBtb2RhbC5yZW1vdmUoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChyZXJvbGxCdG4pIHtcbiAgICAgIHJlcm9sbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5oYW5kbGVSZXJvbGxNZXNzYWdlKG1lc3NhZ2UsIG1lc3NhZ2VFbGVtZW50KTtcbiAgICAgICAgbW9kYWwucmVtb3ZlKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoY2xvc2VCdG4pIHtcbiAgICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBtb2RhbC5yZW1vdmUoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIOeCueWHu+mBrue9qeWFs+mXrVxuICAgIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICBpZiAoZS50YXJnZXQgPT09IG1vZGFsKSB7XG4gICAgICAgIG1vZGFsLnJlbW92ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOi/m+WFpeaJuemHj+WIoOmZpOaooeW8j1xuICAgKi9cbiAgcHJpdmF0ZSBlbnRlckJhdGNoRGVsZXRlTW9kZSgpOiB2b2lkIHtcbiAgICB0aGlzLmlzQmF0Y2hEZWxldGVNb2RlID0gdHJ1ZTtcbiAgICB0aGlzLnNlbGVjdGVkTWVzc2FnZXMuY2xlYXIoKTtcblxuICAgIC8vIOaYvuekuuaJuemHj+WIoOmZpOW3peWFt+agj1xuICAgIHRoaXMuc2hvd0JhdGNoRGVsZXRlVG9vbGJhcigpO1xuXG4gICAgLy8g5Li65omA5pyJ5raI5oGv5re75Yqg6YCJ5oup5Yqf6IO9XG4gICAgdGhpcy5lbmFibGVNZXNzYWdlU2VsZWN0aW9uKCk7XG5cbiAgICAvLyDmt7vliqDmibnph4/liKDpmaTmqKHlvI/nmoTmoLflvI9cbiAgICBjb25zdCBjaGF0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQtY29udGFpbmVyJyk7XG4gICAgaWYgKGNoYXRDb250YWluZXIpIHtcbiAgICAgIGNoYXRDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnYmF0Y2gtZGVsZXRlLW1vZGUnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog6YCA5Ye65om56YeP5Yig6Zmk5qih5byPXG4gICAqL1xuICBwcml2YXRlIGV4aXRCYXRjaERlbGV0ZU1vZGUoKTogdm9pZCB7XG4gICAgdGhpcy5pc0JhdGNoRGVsZXRlTW9kZSA9IGZhbHNlO1xuICAgIHRoaXMuc2VsZWN0ZWRNZXNzYWdlcy5jbGVhcigpO1xuXG4gICAgLy8g6ZqQ6JeP5om56YeP5Yig6Zmk5bel5YW35qCPXG4gICAgdGhpcy5oaWRlQmF0Y2hEZWxldGVUb29sYmFyKCk7XG5cbiAgICAvLyDnp7vpmaTmtojmga/pgInmi6nlip/og71cbiAgICB0aGlzLmRpc2FibGVNZXNzYWdlU2VsZWN0aW9uKCk7XG5cbiAgICAvLyDnp7vpmaTmibnph4/liKDpmaTmqKHlvI/nmoTmoLflvI9cbiAgICBjb25zdCBjaGF0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQtY29udGFpbmVyJyk7XG4gICAgaWYgKGNoYXRDb250YWluZXIpIHtcbiAgICAgIGNoYXRDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnYmF0Y2gtZGVsZXRlLW1vZGUnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5pi+56S65om56YeP5Yig6Zmk5bel5YW35qCPXG4gICAqL1xuICBwcml2YXRlIHNob3dCYXRjaERlbGV0ZVRvb2xiYXIoKTogdm9pZCB7XG4gICAgLy8g5aaC5p6c5bel5YW35qCP5bey5a2Y5Zyo77yM5YWI56e76ZmkXG4gICAgaWYgKHRoaXMuYmF0Y2hEZWxldGVUb29sYmFyKSB7XG4gICAgICB0aGlzLmJhdGNoRGVsZXRlVG9vbGJhci5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICAvLyDliJvlu7rlt6XlhbfmoI9cbiAgICB0aGlzLmJhdGNoRGVsZXRlVG9vbGJhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuYmF0Y2hEZWxldGVUb29sYmFyLmNsYXNzTmFtZSA9ICdiYXRjaC1kZWxldGUtdG9vbGJhcic7XG4gICAgdGhpcy5iYXRjaERlbGV0ZVRvb2xiYXIuaW5uZXJIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cInRvb2xiYXItY29udGVudFwiPlxuICAgICAgICA8c3BhbiBjbGFzcz1cInNlbGVjdGVkLWNvdW50XCI+5bey6YCJ5oupIDAg5p2h5raI5oGvPC9zcGFuPlxuICAgICAgICA8ZGl2IGNsYXNzPVwidG9vbGJhci1idXR0b25zXCI+XG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInRvb2xiYXItYnRuIGNhbmNlbC1idG5cIj7lj5bmtog8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwidG9vbGJhci1idG4gZGVsZXRlLWJ0blwiIGRpc2FibGVkPuWIoOmZpDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG5cbiAgICAvLyDmt7vliqDliLDogYrlpKnlrrnlmajlhoXvvIzkvZzkuLrnu53lr7nlrprkvY3nmoTopobnm5blsYJcbiAgICBjb25zdCBjaGF0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQtY29udGFpbmVyJyk7XG4gICAgaWYgKGNoYXRDb250YWluZXIpIHtcbiAgICAgIGNoYXRDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5iYXRjaERlbGV0ZVRvb2xiYXIpO1xuICAgIH1cblxuICAgIC8vIOe7keWumuW3peWFt+agj+S6i+S7tlxuICAgIHRoaXMuYmluZEJhdGNoRGVsZXRlVG9vbGJhckV2ZW50cygpO1xuICB9XG5cbiAgLyoqXG4gICAqIOmakOiXj+aJuemHj+WIoOmZpOW3peWFt+agj1xuICAgKi9cbiAgcHJpdmF0ZSBoaWRlQmF0Y2hEZWxldGVUb29sYmFyKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmJhdGNoRGVsZXRlVG9vbGJhcikge1xuICAgICAgdGhpcy5iYXRjaERlbGV0ZVRvb2xiYXIucmVtb3ZlKCk7XG4gICAgICB0aGlzLmJhdGNoRGVsZXRlVG9vbGJhciA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOe7keWumuaJuemHj+WIoOmZpOW3peWFt+agj+S6i+S7tlxuICAgKi9cbiAgcHJpdmF0ZSBiaW5kQmF0Y2hEZWxldGVUb29sYmFyRXZlbnRzKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5iYXRjaERlbGV0ZVRvb2xiYXIpIHJldHVybjtcblxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IHRoaXMuYmF0Y2hEZWxldGVUb29sYmFyLnF1ZXJ5U2VsZWN0b3IoJy5jYW5jZWwtYnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgY29uc3QgZGVsZXRlQnRuID0gdGhpcy5iYXRjaERlbGV0ZVRvb2xiYXIucXVlcnlTZWxlY3RvcignLmRlbGV0ZS1idG4nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcblxuICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuZXhpdEJhdGNoRGVsZXRlTW9kZSgpO1xuICAgIH0pO1xuXG4gICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdGhpcy5jb25maXJtQmF0Y2hEZWxldGUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlkK/nlKjmtojmga/pgInmi6nlip/og71cbiAgICovXG4gIHByaXZhdGUgZW5hYmxlTWVzc2FnZVNlbGVjdGlvbigpOiB2b2lkIHtcbiAgICBjb25zdCBtZXNzYWdlRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWVzc2FnZScpO1xuICAgIG1lc3NhZ2VFbGVtZW50cy5mb3JFYWNoKG1lc3NhZ2VFbGVtZW50ID0+IHtcbiAgICAgIG1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGFibGUnKTtcblxuICAgICAgLy8g5re75Yqg6YCJ5oup5qGG5Yiw5raI5oGv5YWD57Sg55qE5pyA5YmN6Z2i77yI5aS05YOP5bem6L6577yJXG4gICAgICBjb25zdCBjaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY2hlY2tib3guY2xhc3NOYW1lID0gJ21lc3NhZ2UtY2hlY2tib3gnO1xuICAgICAgY2hlY2tib3guaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9XCJjaGVja2JveC1pbm5lclwiPjwvZGl2Pic7XG5cbiAgICAgIG1lc3NhZ2VFbGVtZW50Lmluc2VydEJlZm9yZShjaGVja2JveCwgbWVzc2FnZUVsZW1lbnQuZmlyc3RDaGlsZCk7XG5cbiAgICAgIC8vIOe7keWumueCueWHu+S6i+S7tuWIsOaVtOS4qua2iOaBr+WFg+e0oFxuICAgICAgY29uc3QgYm91bmRIYW5kbGVyID0gKGV2ZW50OiBFdmVudCkgPT4gdGhpcy5oYW5kbGVNZXNzYWdlU2VsZWN0aW9uKGV2ZW50KTtcbiAgICAgIG1lc3NhZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYm91bmRIYW5kbGVyKTtcbiAgICAgIC8vIOWtmOWCqOe7keWumueahOWkhOeQhuWZqOS7peS+v+WQjue7reenu+mZpFxuICAgICAgKG1lc3NhZ2VFbGVtZW50IGFzIGFueSkuX3NlbGVjdGlvbkhhbmRsZXIgPSBib3VuZEhhbmRsZXI7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog56aB55So5raI5oGv6YCJ5oup5Yqf6IO9XG4gICAqL1xuICBwcml2YXRlIGRpc2FibGVNZXNzYWdlU2VsZWN0aW9uKCk6IHZvaWQge1xuICAgIGNvbnN0IG1lc3NhZ2VFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZXNzYWdlJyk7XG4gICAgbWVzc2FnZUVsZW1lbnRzLmZvckVhY2gobWVzc2FnZUVsZW1lbnQgPT4ge1xuICAgICAgbWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0YWJsZScsICdzZWxlY3RlZCcpO1xuXG4gICAgICAvLyDnp7vpmaTpgInmi6nmoYZcbiAgICAgIGNvbnN0IGNoZWNrYm94ID0gbWVzc2FnZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1lc3NhZ2UtY2hlY2tib3gnKTtcbiAgICAgIGlmIChjaGVja2JveCkge1xuICAgICAgICBjaGVja2JveC5yZW1vdmUoKTtcbiAgICAgIH1cblxuICAgICAgLy8g56e76Zmk54K55Ye75LqL5Lu255uR5ZCs5ZmoXG4gICAgICBjb25zdCBoYW5kbGVyID0gKG1lc3NhZ2VFbGVtZW50IGFzIGFueSkuX3NlbGVjdGlvbkhhbmRsZXI7XG4gICAgICBpZiAoaGFuZGxlcikge1xuICAgICAgICBtZXNzYWdlRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZXIpO1xuICAgICAgICBkZWxldGUgKG1lc3NhZ2VFbGVtZW50IGFzIGFueSkuX3NlbGVjdGlvbkhhbmRsZXI7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog5aSE55CG5raI5oGv6YCJ5oupXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZU1lc3NhZ2VTZWxlY3Rpb24oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmlzQmF0Y2hEZWxldGVNb2RlKSByZXR1cm47XG5cbiAgICBjb25zdCBtZXNzYWdlRWxlbWVudCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICAvLyDmkq3mlL7ngrnlh7vpn7PmlYhcbiAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5U291bmQoJ2NsaWNrJyk7XG5cbiAgICAvLyDkvb/nlKhET03kvY3nva7kvZzkuLrmoIfor4bnrKbvvIzogIzkuI3mmK/mtojmga9JRFxuICAgIGNvbnN0IG1lc3NhZ2VzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXRNZXNzYWdlcycpO1xuICAgIGlmICghbWVzc2FnZXNDb250YWluZXIpIHJldHVybjtcblxuICAgIGNvbnN0IGFsbE1lc3NhZ2VFbGVtZW50cyA9IEFycmF5LmZyb20obWVzc2FnZXNDb250YWluZXIuY2hpbGRyZW4pO1xuICAgIGNvbnN0IGVsZW1lbnRJbmRleCA9IGFsbE1lc3NhZ2VFbGVtZW50cy5pbmRleE9mKG1lc3NhZ2VFbGVtZW50KTtcblxuICAgIGlmIChlbGVtZW50SW5kZXggPT09IC0xKSByZXR1cm47XG5cbiAgICBjb25zdCBpbmRleEtleSA9IGVsZW1lbnRJbmRleC50b1N0cmluZygpO1xuXG4gICAgLy8g5YiH5o2i6YCJ5oup54q25oCBXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRNZXNzYWdlcy5oYXMoaW5kZXhLZXkpKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkTWVzc2FnZXMuZGVsZXRlKGluZGV4S2V5KTtcbiAgICAgIG1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRNZXNzYWdlcy5hZGQoaW5kZXhLZXkpO1xuICAgICAgbWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcbiAgICB9XG5cbiAgICAvLyDmm7TmlrDlt6XlhbfmoI9cbiAgICB0aGlzLnVwZGF0ZUJhdGNoRGVsZXRlVG9vbGJhcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIOabtOaWsOaJuemHj+WIoOmZpOW3peWFt+agj1xuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVCYXRjaERlbGV0ZVRvb2xiYXIoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmJhdGNoRGVsZXRlVG9vbGJhcikgcmV0dXJuO1xuXG4gICAgY29uc3Qgc2VsZWN0ZWRDb3VudCA9IHRoaXMuc2VsZWN0ZWRNZXNzYWdlcy5zaXplO1xuICAgIGNvbnN0IGNvdW50RWxlbWVudCA9IHRoaXMuYmF0Y2hEZWxldGVUb29sYmFyLnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3RlZC1jb3VudCcpIGFzIEhUTUxFbGVtZW50O1xuICAgIGNvbnN0IGRlbGV0ZUJ0biA9IHRoaXMuYmF0Y2hEZWxldGVUb29sYmFyLnF1ZXJ5U2VsZWN0b3IoJy5kZWxldGUtYnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG5cbiAgICBjb3VudEVsZW1lbnQudGV4dENvbnRlbnQgPSBg5bey6YCJ5oupICR7c2VsZWN0ZWRDb3VudH0g5p2h5raI5oGvYDtcbiAgICBkZWxldGVCdG4uZGlzYWJsZWQgPSBzZWxlY3RlZENvdW50ID09PSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIOehruiupOaJuemHj+WIoOmZpFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBjb25maXJtQmF0Y2hEZWxldGUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRNZXNzYWdlcy5zaXplID09PSAwKSByZXR1cm47XG5cbiAgICBjb25zdCBjb3VudCA9IHRoaXMuc2VsZWN0ZWRNZXNzYWdlcy5zaXplO1xuICAgIGNvbnN0IGNvbmZpcm1lZCA9IGNvbmZpcm0oYOehruWumuimgeWIoOmZpOmAieS4reeahCAke2NvdW50fSDmnaHmtojmga/lkJfvvJ/mraTmk43kvZzkuI3lj6/mkqTplIDjgIJgKTtcblxuICAgIGlmIChjb25maXJtZWQpIHtcbiAgICAgIGF3YWl0IHRoaXMuZXhlY3V0ZUJhdGNoRGVsZXRlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOaJp+ihjOaJuemHj+WIoOmZpFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBleGVjdXRlQmF0Y2hEZWxldGUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc29sZS5sb2coJ/Cfl5HvuI8gPT09IOW8gOWni+aJuemHj+WIoOmZpOiwg+ivlSA9PT0nKTtcblxuICAgIGNvbnN0IGN1cnJlbnRDaGF0RGF0YSA9IHRoaXMuY2hhdERhdGEuZ2V0KHRoaXMuY3VycmVudENoYXQpO1xuICAgIGlmICghY3VycmVudENoYXREYXRhKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwg5b2T5YmN6IGK5aSp5pWw5o2u5LiN5a2Y5ZyoJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ/Cfk4sg5om56YeP5Yig6Zmk54q25oCBOicpO1xuICAgIGNvbnNvbGUubG9nKCcgIC0g5b2T5YmN6IGK5aSpOicsIHRoaXMuY3VycmVudENoYXQpO1xuICAgIGNvbnNvbGUubG9nKCcgIC0g6YCJ5Lit55qE5raI5oGv5L2N572u57Si5byVOicsIEFycmF5LmZyb20odGhpcy5zZWxlY3RlZE1lc3NhZ2VzKSk7XG4gICAgY29uc29sZS5sb2coJyAgLSDmtojmga/mgLvmlbA6JywgY3VycmVudENoYXREYXRhLm1lc3NhZ2VzLmxlbmd0aCk7XG5cbiAgICB0cnkge1xuICAgICAgLy8g546w5Zyoc2VsZWN0ZWRNZXNzYWdlc+WtmOWCqOeahOaYr0RPTeS9jee9rue0ouW8le+8jOebtOaOpei9rOaNouS4uuaVsOWtl+aVsOe7hFxuICAgICAgY29uc3Qgc2VsZWN0ZWRJbmRpY2VzID0gQXJyYXkuZnJvbSh0aGlzLnNlbGVjdGVkTWVzc2FnZXMpLm1hcChpbmRleFN0ciA9PiBwYXJzZUludChpbmRleFN0ciwgMTApKTtcblxuICAgICAgY29uc29sZS5sb2coJ/Cfk4og6YCJ5Lit55qERE9N5L2N572u57Si5byVOicsIHNlbGVjdGVkSW5kaWNlcyk7XG4gICAgICBjb25zb2xlLmxvZygnICAtIOa2iOaBr+aAu+aVsDonLCBjdXJyZW50Q2hhdERhdGEubWVzc2FnZXMubGVuZ3RoKTtcblxuICAgICAgaWYgKHNlbGVjdGVkSW5kaWNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8g5rKh5pyJ6YCJ5Lit6KaB5Yig6Zmk55qE5raI5oGvJyk7XG4gICAgICAgIHRoaXMuc2hvd1RvYXN0KCfmsqHmnInpgInkuK3opoHliKDpmaTnmoTmtojmga8nLCAnd2FybmluZycpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIOmqjOivgee0ouW8leacieaViOaAp1xuICAgICAgY29uc3QgdmFsaWRJbmRpY2VzID0gc2VsZWN0ZWRJbmRpY2VzLmZpbHRlcihpbmRleCA9PiBpbmRleCA+PSAwICYmIGluZGV4IDwgY3VycmVudENoYXREYXRhLm1lc3NhZ2VzLmxlbmd0aCk7XG5cbiAgICAgIGlmICh2YWxpZEluZGljZXMubGVuZ3RoICE9PSBzZWxlY3RlZEluZGljZXMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIOmDqOWIhumAieS4reeahOa2iOaBr+e0ouW8leaXoOaViCcpO1xuICAgICAgICBjb25zb2xlLmxvZygnICAtIOWOn+Wni+e0ouW8lTonLCBzZWxlY3RlZEluZGljZXMpO1xuICAgICAgICBjb25zb2xlLmxvZygnICAtIOacieaViOe0ouW8lTonLCB2YWxpZEluZGljZXMpO1xuICAgICAgfVxuXG4gICAgICBpZiAodmFsaWRJbmRpY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyDmsqHmnInmnInmlYjnmoTmtojmga/ntKLlvJUnKTtcbiAgICAgICAgdGhpcy5zaG93VG9hc3QoJ+mAieS4reeahOa2iOaBr+aXoOaViCcsICd3YXJuaW5nJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8g6LCD55So57uf5LiA55qE5Yig6Zmk5pa55rOV77yI6L+Z5Liq5pa55rOV5Lya5aSE55CGIFNpbGx5VGF2ZXJuIEFQSSDosIPnlKjvvIlcbiAgICAgIGF3YWl0IHRoaXMuZGVsZXRlU2VsZWN0ZWRNZXNzYWdlcyh2YWxpZEluZGljZXMpO1xuXG4gICAgICAvLyDpgIDlh7rmibnph4/liKDpmaTmqKHlvI9cbiAgICAgIHRoaXMuZXhpdEJhdGNoRGVsZXRlTW9kZSgpO1xuXG4gICAgICBjb25zb2xlLmxvZygn4pyFIOaJuemHj+WIoOmZpOWujOaIkCcpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwg5om56YeP5Yig6Zmk5aSx6LSlOicsIGVycm9yKTtcbiAgICAgIHRoaXMuc2hvd1RvYXN0KCfmibnph4/liKDpmaTlpLHotKUnLCAnZXJyb3InKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgY29uc29sZS5sb2coJ/Cfl5HvuI8gPT09IOaJuemHj+WIoOmZpOiwg+ivlee7k+adnyA9PT0nKTtcbiAgICB9XG4gIH1cblxuXG4gIC8qKlxuICAgKiDliKDpmaTpgInkuK3nmoTmtojmga9cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZGVsZXRlU2VsZWN0ZWRNZXNzYWdlcyhtZXNzYWdlSW5kaWNlczogbnVtYmVyW10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zb2xlLmxvZygn8J+Xke+4jyA9PT0g5byA5aeL5Yig6Zmk5raI5oGv6LCD6K+VID09PScpO1xuICAgIGNvbnNvbGUubG9nKCfwn5OLIOimgeWIoOmZpOeahOa2iOaBr+e0ouW8lTonLCBtZXNzYWdlSW5kaWNlcyk7XG5cbiAgICB0cnkge1xuICAgICAgLy8g6I635Y+W5b2T5YmN6IGK5aSp5pWw5o2uXG4gICAgICBjb25zdCBjdXJyZW50Q2hhdERhdGEgPSB0aGlzLmNoYXREYXRhLmdldCh0aGlzLmN1cnJlbnRDaGF0KTtcbiAgICAgIGlmICghY3VycmVudENoYXREYXRhKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCDlvZPliY3ogYrlpKnmlbDmja7kuI3lrZjlnKg6JywgdGhpcy5jdXJyZW50Q2hhdCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ/Cfk4og5Yig6Zmk5YmN6IGK5aSp5pWw5o2u54q25oCBOicpO1xuICAgICAgY29uc29sZS5sb2coJyAgLSDlvZPliY3ogYrlpKk6JywgdGhpcy5jdXJyZW50Q2hhdCk7XG4gICAgICBjb25zb2xlLmxvZygnICAtIOa2iOaBr+aAu+aVsDonLCBjdXJyZW50Q2hhdERhdGEubWVzc2FnZXMubGVuZ3RoKTtcbiAgICAgIGNvbnNvbGUubG9nKCcgIC0g6KaB5Yig6Zmk55qE5raI5oGv5pWw6YePOicsIG1lc3NhZ2VJbmRpY2VzLmxlbmd0aCk7XG5cbiAgICAgIC8vIOiOt+WPluimgeWIoOmZpOeahOa2iOaBr+ivpuaDhe+8iOeUqOS6juiwg+ivle+8iVxuICAgICAgY29uc3QgbWVzc2FnZXNUb0RlbGV0ZSA9IG1lc3NhZ2VJbmRpY2VzLm1hcChpbmRleCA9PiB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjdXJyZW50Q2hhdERhdGEubWVzc2FnZXNbaW5kZXhdO1xuICAgICAgICBjb25zb2xlLmxvZyhgICAtIOe0ouW8lSAke2luZGV4fTogJHttZXNzYWdlID8gJ+a2iOaBr+WtmOWcqCcgOiAn5raI5oGv5LiN5a2Y5ZyoJ31gKTtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICB9KTtcblxuICAgICAgLy8g5qOA5p+lIFNpbGx5VGF2ZXJuIOeahOalvOWxgueKtuaAgVxuICAgICAgY29uc29sZS5sb2coJ/Cfk6ggU2lsbHlUYXZlcm4g5qW85bGC54q25oCB5qOA5p+lOicpO1xuICAgICAgY29uc3QgbGFzdE1lc3NhZ2VJZCA9IHR5cGVvZiBnZXRMYXN0TWVzc2FnZUlkID09PSAnZnVuY3Rpb24nID8gZ2V0TGFzdE1lc3NhZ2VJZCgpIDogMDtcbiAgICAgIGNvbnNvbGUubG9nKCcgIC0g5pyA5ZCO5qW85bGCSUQ6JywgbGFzdE1lc3NhZ2VJZCk7XG4gICAgICBjb25zb2xlLmxvZygnICAtIOivtOaYjjog5omA5pyJ5raI5oGv6YO95a2Y5YKo5Zyo5ZCM5LiA5qW85bGC5Lit77yM5L2/55SoIGJlYXIg5qCH562+5qC85byPJyk7XG5cbiAgICAgIC8vIOS7juWJjeerr+eVjOmdouS4reenu+mZpOa2iOaBr1xuICAgICAgY29uc29sZS5sb2coJ/CflIQg5LuO5YmN56uv5pWw5o2u5Lit56e76Zmk5raI5oGvLi4uJyk7XG4gICAgICBtZXNzYWdlSW5kaWNlcy5zb3J0KChhLCBiKSA9PiBiIC0gYSk7IC8vIOS7juWQjuW+gOWJjeWIoOmZpO+8jOmBv+WFjee0ouW8leWPmOWMllxuICAgICAgbWVzc2FnZUluZGljZXMuZm9yRWFjaChpbmRleCA9PiB7XG4gICAgICAgIGNvbnN0IHJlbW92ZWRNZXNzYWdlID0gY3VycmVudENoYXREYXRhLm1lc3NhZ2VzLnNwbGljZShpbmRleCwgMSlbMF07XG4gICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgIGAgIC0g56e76Zmk57Si5byVICR7aW5kZXh9OmAsXG4gICAgICAgICAgcmVtb3ZlZE1lc3NhZ2UgPyByZW1vdmVkTWVzc2FnZS5jb250ZW50LnN1YnN0cmluZygwLCAzMCkgKyAnLi4uJyA6ICfnqbrmtojmga8nLFxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCfwn5OKIOWIoOmZpOWQjuWJjeerr+aVsOaNrueKtuaAgTonKTtcbiAgICAgIGNvbnNvbGUubG9nKCcgIC0g5Ymp5L2Z5raI5oGv5pWwOicsIGN1cnJlbnRDaGF0RGF0YS5tZXNzYWdlcy5sZW5ndGgpO1xuXG4gICAgICAvLyDph43mlrDmnoTlu7ogYmVhciDml6Xlv5flhoXlrrnvvIjnp7vpmaTooqvliKDpmaTnmoTmtojmga/vvIlcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SEIOmHjeaWsOaehOW7uiBiZWFyIOaXpeW/l+WGheWuuS4uLicpO1xuICAgICAgY29uc3QgdXBkYXRlZEJlYXJDb250ZW50ID0gdGhpcy5tZXNzYWdlUGFyc2VyLmJ1aWxkU2luZ2xlQ2hhdEJlYXJDb250ZW50KGN1cnJlbnRDaGF0RGF0YSk7XG4gICAgICBjb25zb2xlLmxvZygn8J+TnSBiZWFyIOWGheWuueW3suabtOaWsCcpO1xuXG4gICAgICAvLyDkvb/nlKggc2V0Q2hhdE1lc3NhZ2VzIEFQSSDmm7TmlrDmpbzlsYLlhoXlrrlcbiAgICAgIGlmICh0eXBlb2Ygc2V0Q2hhdE1lc3NhZ2VzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5qAIOiwg+eUqCBzZXRDaGF0TWVzc2FnZXMgQVBJIOabtOaWsOalvOWxguWGheWuuS4uLicpO1xuXG4gICAgICAgIC8vIOiOt+WPluacgOWQjuS4gOadoea2iOaBr+eahElEXG4gICAgICAgIGNvbnN0IGxhc3RNZXNzYWdlSWQgPSB0eXBlb2YgZ2V0TGFzdE1lc3NhZ2VJZCA9PT0gJ2Z1bmN0aW9uJyA/IGdldExhc3RNZXNzYWdlSWQoKSA6IDA7XG4gICAgICAgIGNvbnNvbGUubG9nKCcgIC0g55uu5qCH5qW85bGCSUQ6JywgbGFzdE1lc3NhZ2VJZCk7XG5cbiAgICAgICAgLy8g6I635Y+W5b2T5YmN5raI5oGv5bm25Y+q5pu/5o2iYmVhcuagh+etvuWGheWuuVxuICAgICAgICBjb25zdCBjdXJyZW50TWVzc2FnZSA9IGdldENoYXRNZXNzYWdlcygtMSlbMF07XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsTWVzc2FnZSA9IGN1cnJlbnRNZXNzYWdlPy5tZXNzYWdlIHx8ICcnO1xuICAgICAgICBjb25zdCBiZWFyQ29udGVudE9ubHkgPSB1cGRhdGVkQmVhckNvbnRlbnQucmVwbGFjZSgnPGJlYXI+JywgJycpLnJlcGxhY2UoJzwvYmVhcj4nLCAnJyk7XG4gICAgICAgIGNvbnN0IGZpbmFsTWVzc2FnZSA9IHRoaXMucmVwbGFjZU9ubHlCZWFyVGFnQ29udGVudChvcmlnaW5hbE1lc3NhZ2UsIGJlYXJDb250ZW50T25seSk7XG5cbiAgICAgICAgY29uc3QgbWVzc2FnZURhdGEgPSBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbWVzc2FnZV9pZDogbGFzdE1lc3NhZ2VJZCxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGZpbmFsTWVzc2FnZSxcbiAgICAgICAgICB9LFxuICAgICAgICBdO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCcgIC0g5pu05paw55qE5raI5oGv5pWw5o2uOicsIHtcbiAgICAgICAgICBtZXNzYWdlX2lkOiBsYXN0TWVzc2FnZUlkLFxuICAgICAgICAgIGNvbnRlbnRfbGVuZ3RoOiB1cGRhdGVkQmVhckNvbnRlbnQubGVuZ3RoLFxuICAgICAgICB9KTtcblxuICAgICAgICBhd2FpdCBzZXRDaGF0TWVzc2FnZXMobWVzc2FnZURhdGEsIHsgcmVmcmVzaDogJ25vbmUnIH0pO1xuICAgICAgICBjb25zb2xlLmxvZygn4pyFIHNldENoYXRNZXNzYWdlcyBBUEkg6LCD55So5oiQ5YqfIC0g5qW85bGC5YaF5a655bey5pu05pawJyk7XG5cbiAgICAgICAgLy8g6aqM6K+B5pu05paw57uT5p6cXG4gICAgICAgIGlmICh0eXBlb2YgZ2V0Q2hhdE1lc3NhZ2VzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGFmdGVyVXBkYXRlTWVzc2FnZXMgPSBnZXRDaGF0TWVzc2FnZXMoYCR7bGFzdE1lc3NhZ2VJZH1gKTtcbiAgICAgICAgICAgIGlmIChhZnRlclVwZGF0ZU1lc3NhZ2VzICYmIGFmdGVyVXBkYXRlTWVzc2FnZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkTWVzc2FnZSA9IGFmdGVyVXBkYXRlTWVzc2FnZXNbMF07XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5OKIFNpbGx5VGF2ZXJuIOalvOWxguW3suabtOaWsCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwg6aqM6K+B5pu05paw57uT5p6c5aSx6LSlOicsIGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBzZXRDaGF0TWVzc2FnZXMg5Ye95pWw5LiN5Y+v55SoJyk7XG4gICAgICAgIHRoaXMuc2hvd1RvYXN0KCfliKDpmaTlip/og73kuI3lj6/nlKgnLCAnZXJyb3InKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyDph43mlrDmuLLmn5PogYrlpKnnlYzpnaJcbiAgICAgIGNvbnNvbGUubG9nKCfwn46oIOmHjeaWsOa4suafk+iBiuWkqeeVjOmdoi4uLicpO1xuICAgICAgdGhpcy5yZW5kZXJDdXJyZW50Q2hhdCgpO1xuXG4gICAgICBjb25zb2xlLmxvZygn4pyFIOa2iOaBr+WIoOmZpOWujOaIkCcpO1xuICAgICAgdGhpcy5zaG93VG9hc3QoYOW3suWIoOmZpCAke21lc3NhZ2VJbmRpY2VzLmxlbmd0aH0g5p2h5raI5oGvYCwgJ3N1Y2Nlc3MnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIOWIoOmZpOa2iOaBr+Wksei0pTonLCBlcnJvcik7XG4gICAgICBjb25zb2xlLmVycm9yKCfplJnor6/or6bmg4U6Jywge1xuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBzdGFjazogZXJyb3Iuc3RhY2ssXG4gICAgICAgIG1lc3NhZ2VJbmRpY2VzLFxuICAgICAgICBjdXJyZW50Q2hhdDogdGhpcy5jdXJyZW50Q2hhdCxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5zaG93VG9hc3QoJ+WIoOmZpOa2iOaBr+Wksei0pScsICdlcnJvcicpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+Xke+4jyA9PT0g5Yig6Zmk5raI5oGv6LCD6K+V57uT5p2fID09PScpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlpITnkIbph43mlrDnlJ/miJDmtojmga9cbiAgICog5Yig6Zmk5oyH5a6a5raI5oGv5LmL5ZCO55qE5omA5pyJ5raI5oGv77yM54S25ZCO6YeN5paw55Sf5oiQQUnlm57lpI1cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgaGFuZGxlUmVyb2xsTWVzc2FnZShtZXNzYWdlOiBDaGF0TWVzc2FnZSwgbWVzc2FnZUVsZW1lbnQ/OiBIVE1MRWxlbWVudCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+UhCDlvIDlp4vph43mlrDnlJ/miJDmtojmga/vvIzku47mtojmga86JywgbWVzc2FnZSk7XG5cbiAgICAgIC8vIDEuIOiOt+WPluW9k+WJjeiBiuWkqeaVsOaNrlxuICAgICAgY29uc3QgY3VycmVudENoYXREYXRhID0gdGhpcy5jaGF0RGF0YS5nZXQodGhpcy5jdXJyZW50Q2hhdCk7XG4gICAgICBpZiAoIWN1cnJlbnRDaGF0RGF0YSkge1xuICAgICAgICB0aGlzLnNob3dUb2FzdCgn5pyq5om+5Yiw5b2T5YmN6IGK5aSp5pWw5o2uJywgJ2Vycm9yJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gMi4g5om+5Yiw6KaB6YeN5paw55Sf5oiQ55qE5raI5oGv5Zyo5pWw57uE5Lit55qE5L2N572uXG4gICAgICBsZXQgbWVzc2FnZUluZGV4ID0gLTE7XG5cbiAgICAgIGlmIChtZXNzYWdlRWxlbWVudCkge1xuICAgICAgICAvLyDpgJrov4dET03lhYPntKDkvY3nva7noa7lrprmtojmga/ntKLlvJVcbiAgICAgICAgY29uc29sZS5sb2coJ/CflI0g6YCa6L+HRE9N5YWD57Sg5L2N572u5p+l5om+5raI5oGvLi4uJyk7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXRNZXNzYWdlcycpO1xuICAgICAgICBpZiAobWVzc2FnZXNDb250YWluZXIpIHtcbiAgICAgICAgICBjb25zdCBhbGxNZXNzYWdlRWxlbWVudHMgPSBBcnJheS5mcm9tKG1lc3NhZ2VzQ29udGFpbmVyLmNoaWxkcmVuKTtcbiAgICAgICAgICBjb25zdCBlbGVtZW50SW5kZXggPSBhbGxNZXNzYWdlRWxlbWVudHMuaW5kZXhPZihtZXNzYWdlRWxlbWVudCk7XG5cbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+TjSBET03kvY3nva7kv6Hmga86Jyk7XG4gICAgICAgICAgY29uc29sZS5sb2coJyAgLSDmtojmga/lhYPntKDlnKhET03kuK3nmoTntKLlvJU6JywgZWxlbWVudEluZGV4KTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnICAtIERPTeS4reaAu+a2iOaBr+WFg+e0oOaVsDonLCBhbGxNZXNzYWdlRWxlbWVudHMubGVuZ3RoKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnICAtIOiBiuWkqeaVsOaNruS4reeahOa2iOaBr+aVsDonLCBjdXJyZW50Q2hhdERhdGEubWVzc2FnZXMubGVuZ3RoKTtcblxuICAgICAgICAgIGlmIChlbGVtZW50SW5kZXggIT09IC0xICYmIGVsZW1lbnRJbmRleCA8IGN1cnJlbnRDaGF0RGF0YS5tZXNzYWdlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIG1lc3NhZ2VJbmRleCA9IGVsZW1lbnRJbmRleDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUg6YCa6L+HRE9N5L2N572u5om+5Yiw5raI5oGv77yM57Si5byVOicsIG1lc3NhZ2VJbmRleCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChtZXNzYWdlSW5kZXggPT09IC0xKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinYwg5peg5rOV6YCa6L+HRE9N5L2N572u5om+5Yiw5raI5oGv77yM6K+35LuO6IGK5aSp5YiX6KGo6YeN5paw6L+b5YWl5ZCO5YaN6K+VJyk7XG4gICAgICAgIHRoaXMuc2hvd1RvYXN0KCfml6Dms5XlrprkvY3mtojmga/vvIzor7fku47ogYrlpKnliJfooajph43mlrDov5vlhaXlkI7lho3or5UnLCAnd2FybmluZycpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKGDwn5ONIOaJvuWIsOa2iOaBr+S9jee9rjogJHttZXNzYWdlSW5kZXh9LCDmgLvmtojmga/mlbA6ICR7Y3VycmVudENoYXREYXRhLm1lc3NhZ2VzLmxlbmd0aH1gKTtcblxuICAgICAgLy8gMy4g5qOA5p+l5piv5ZCm5pyJ6ZyA6KaB5Yig6Zmk55qE5raI5oGv77yI6K+l5raI5oGv5LmL5ZCO55qE5omA5pyJ5raI5oGv77yJXG4gICAgICBjb25zdCBtZXNzYWdlc1RvRGVsZXRlID0gY3VycmVudENoYXREYXRhLm1lc3NhZ2VzLnNsaWNlKG1lc3NhZ2VJbmRleCArIDEpO1xuICAgICAgY29uc29sZS5sb2coYPCfl5HvuI8g6ZyA6KaB5Yig6ZmkICR7bWVzc2FnZXNUb0RlbGV0ZS5sZW5ndGh9IOadoea2iOaBr2ApO1xuXG4gICAgICAvLyA0LiDlpoLmnpzmnInmtojmga/pnIDopoHliKDpmaTvvIzlhYjliKDpmaTlroPku6zvvIjlj4LogIPmibnph4/liKDpmaTnmoTlrp7njrDvvIlcbiAgICAgIGlmIChtZXNzYWdlc1RvRGVsZXRlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8g5LuO5YmN56uv5pWw5o2u5Lit5Yig6Zmk6L+Z5Lqb5raI5oGvXG4gICAgICAgIGN1cnJlbnRDaGF0RGF0YS5tZXNzYWdlcyA9IGN1cnJlbnRDaGF0RGF0YS5tZXNzYWdlcy5zbGljZSgwLCBtZXNzYWdlSW5kZXggKyAxKTtcblxuICAgICAgICAvLyDmm7TmlrDmnIDlkI7kuIDmnaHmtojmga9cbiAgICAgICAgaWYgKGN1cnJlbnRDaGF0RGF0YS5tZXNzYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgbGFzdE1zZyA9IGN1cnJlbnRDaGF0RGF0YS5tZXNzYWdlc1tjdXJyZW50Q2hhdERhdGEubWVzc2FnZXMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgY3VycmVudENoYXREYXRhLmxhc3RNZXNzYWdlID0gdGhpcy5tZXNzYWdlUGFyc2VyLmZvcm1hdExhc3RNZXNzYWdlKGxhc3RNc2cpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g6YeN5paw5p6E5bu6IGJlYXIg5pel5b+X5YaF5a6577yI56e76Zmk6KKr5Yig6Zmk55qE5raI5oGv77yJXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SEIOmHjeaWsOaehOW7uiBiZWFyIOaXpeW/l+WGheWuuS4uLicpO1xuICAgICAgICBjb25zdCB1cGRhdGVkQmVhckNvbnRlbnQgPSB0aGlzLm1lc3NhZ2VQYXJzZXIuYnVpbGRTaW5nbGVDaGF0QmVhckNvbnRlbnQoY3VycmVudENoYXREYXRhKTtcblxuICAgICAgICAvLyDkvb/nlKggc2V0Q2hhdE1lc3NhZ2VzIEFQSSDmm7TmlrDmpbzlsYLlhoXlrrlcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRDaGF0TWVzc2FnZXMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+agCDosIPnlKggc2V0Q2hhdE1lc3NhZ2VzIEFQSSDmm7TmlrDmpbzlsYLlhoXlrrkuLi4nKTtcblxuICAgICAgICAgIGNvbnN0IGxhc3RNZXNzYWdlSWQgPSB0eXBlb2YgZ2V0TGFzdE1lc3NhZ2VJZCA9PT0gJ2Z1bmN0aW9uJyA/IGdldExhc3RNZXNzYWdlSWQoKSA6IDA7XG4gICAgICAgICAgLy8g6I635Y+W5b2T5YmN5raI5oGv5bm25Y+q5pu/5o2iYmVhcuagh+etvuWGheWuuVxuICAgICAgICAgIGNvbnN0IGN1cnJlbnRNZXNzYWdlID0gZ2V0Q2hhdE1lc3NhZ2VzKC0xKVswXTtcbiAgICAgICAgICBjb25zdCBvcmlnaW5hbE1lc3NhZ2UgPSBjdXJyZW50TWVzc2FnZT8ubWVzc2FnZSB8fCAnJztcbiAgICAgICAgICBjb25zdCBiZWFyQ29udGVudE9ubHkgPSB1cGRhdGVkQmVhckNvbnRlbnQucmVwbGFjZSgnPGJlYXI+JywgJycpLnJlcGxhY2UoJzwvYmVhcj4nLCAnJyk7XG4gICAgICAgICAgY29uc3QgZmluYWxNZXNzYWdlID0gdGhpcy5yZXBsYWNlT25seUJlYXJUYWdDb250ZW50KG9yaWdpbmFsTWVzc2FnZSwgYmVhckNvbnRlbnRPbmx5KTtcblxuICAgICAgICAgIGNvbnN0IG1lc3NhZ2VEYXRhID0gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBtZXNzYWdlX2lkOiBsYXN0TWVzc2FnZUlkLFxuICAgICAgICAgICAgICBtZXNzYWdlOiBmaW5hbE1lc3NhZ2UsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF07XG5cbiAgICAgICAgICBhd2FpdCBzZXRDaGF0TWVzc2FnZXMobWVzc2FnZURhdGEsIHsgcmVmcmVzaDogJ25vbmUnIH0pO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgc2V0Q2hhdE1lc3NhZ2VzIEFQSSDosIPnlKjmiJDlip8gLSDmpbzlsYLlhoXlrrnlt7Lmm7TmlrAnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgc2V0Q2hhdE1lc3NhZ2VzIOWHveaVsOS4jeWPr+eUqCcpO1xuICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCfliKDpmaTlip/og73kuI3lj6/nlKgnLCAnZXJyb3InKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZygn4pyFIOW3suWIoOmZpOWQjue7rea2iOaBr+W5tuabtOaWsOalvOWxgicpO1xuXG4gICAgICAgIC8vIOeyvuehruWIoOmZpERPTeS4reeahOa2iOaBr+WFg+e0oO+8jOiAjOS4jeaYr+mHjeaWsOa4suafk+aVtOS4queVjOmdolxuICAgICAgICBjb25zb2xlLmxvZygn8J+OqCDnsr7noa7liKDpmaRET03kuK3nmoTlkI7nu63mtojmga/lhYPntKAuLi4nKTtcbiAgICAgICAgdGhpcy5yZW1vdmVNZXNzYWdlc0Zyb21ET00obWVzc2FnZUluZGV4ICsgMSk7XG4gICAgICB9XG5cbiAgICAgIC8vIDUuIOaehOW7uuaPkOekuuivjSAtIOWPquS9v+eUqOiiq+WPjOWHu+eahOmCo+adoea2iOaBr+S9nOS4uueUqOaIt+i+k+WFpVxuICAgICAgY29uc3QgY2hhdERhdGEgPSB0aGlzLmNoYXREYXRhLmdldChtZXNzYWdlLmNoYXRJZCk7XG4gICAgICBsZXQgYmFzZVByb21wdCA9ICcnO1xuXG4gICAgICBpZiAoY2hhdERhdGE/LnR5cGUgPT09ICdncm91cCcpIHtcbiAgICAgICAgLy8g576k6IGK5qC85byPXG4gICAgICAgIGNvbnN0IGdyb3VwTmFtZSA9IGNoYXREYXRhLmNoYXROYW1lIHx8IG1lc3NhZ2UuY2hhdElkO1xuICAgICAgICBiYXNlUHJvbXB0ID0gYOWbnuWkjeWSjCR7Z3JvdXBOYW1lfeeahOiBiuWkqe+8mmA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyDnp4HogYrmoLzlvI9cbiAgICAgICAgY29uc3QgY2hhdE5hbWUgPSBjaGF0RGF0YT8uY2hhdE5hbWUgfHwgbWVzc2FnZS5jaGF0SWQ7XG4gICAgICAgIGNvbnN0IGNoYXJhY3Rlck5hbWUgPSB0aGlzLmV4dHJhY3RDaGFyYWN0ZXJOYW1lRnJvbUNoYXROYW1lKGNoYXROYW1lKTtcbiAgICAgICAgYmFzZVByb21wdCA9IGDlm57lpI3lkowke2NoYXJhY3Rlck5hbWV955qE6IGK5aSp77yaYDtcbiAgICAgIH1cblxuICAgICAgLy8g5Y+q5L2/55So6KKr5Y+M5Ye755qE5raI5oGv5YaF5a655L2c5Li655So5oi36L6T5YWlXG4gICAgICBsZXQgbWVzc2FnZUNvbnRlbnQgPSBtZXNzYWdlLmNvbnRlbnQ7XG4gICAgICBpZiAobWVzc2FnZS5tZXNzYWdlVHlwZSAhPT0gJ3RleHQnKSB7XG4gICAgICAgIG1lc3NhZ2VDb250ZW50ID0gYCR7bWVzc2FnZS5tZXNzYWdlVHlwZX06JHttZXNzYWdlLmNvbnRlbnR9YDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcHJvbXB0ID0gYCR7YmFzZVByb21wdH0ke21lc3NhZ2VDb250ZW50fWA7XG4gICAgICBjb25zb2xlLmxvZygn8J+TnSDmnoTlu7rnmoTmj5DnpLror406JywgcHJvbXB0KTtcblxuICAgICAgLy8gNi4g5pi+56S65Yqg6L2954q25oCBXG4gICAgICB0aGlzLnNob3dUb2FzdCgn5q2j5Zyo6YeN5paw55Sf5oiQ5Zue5aSNLi4uJywgJ2luZm8nKTtcblxuICAgICAgLy8g5pi+56S65omT5a2X5Yqo55S7XG4gICAgICBjb25zdCB0eXBpbmdNZXNzYWdlID0gYXdhaXQgdGhpcy5zaG93VHlwaW5nSW5kaWNhdG9yKCk7XG5cbiAgICAgIC8vIDcuIOiwg+eUqEFJ55Sf5oiQ77yM5aSN55So546w5pyJ55qEZ2VuZXJhdGXmlrnms5VcbiAgICAgIGNvbnN0IGFpUmVzcG9uc2UgPSBhd2FpdCBnZW5lcmF0ZSh7XG4gICAgICAgIHVzZXJfaW5wdXQ6IHByb21wdCxcbiAgICAgICAgc2hvdWxkX3N0cmVhbTogZmFsc2UsXG4gICAgICB9KTtcblxuICAgICAgY29uc29sZS5sb2coJ/CfpJYg5pS25YiwQUnlm57lpI06JywgYWlSZXNwb25zZSk7XG5cbiAgICAgIC8vIDguIOmakOiXj+aJk+Wtl+WKqOeUu1xuICAgICAgdGhpcy5oaWRlVHlwaW5nSW5kaWNhdG9yKHR5cGluZ01lc3NhZ2UpO1xuXG4gICAgICAvLyA5LiDlpITnkIZBSeWbnuWkje+8jOWkjeeUqOeOsOacieeahOaWueazlVxuICAgICAgYXdhaXQgdGhpcy5oYW5kbGVBSVJlc3BvbnNlKGFpUmVzcG9uc2UsIG1lc3NhZ2UpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwg6YeN5paw55Sf5oiQ5raI5oGv5aSx6LSlOicsIGVycm9yKTtcbiAgICAgIHRoaXMuc2hvd1RvYXN0KCfph43mlrDnlJ/miJDlpLHotKXvvIzor7fph43or5UnLCAnZXJyb3InKTtcblxuICAgICAgLy8g5pKt5pS+6ZSZ6K+v6Z+z5pWIXG4gICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5U291bmQoJ2Vycm9yJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOeyvuehruWIoOmZpERPTeS4reaMh+Wumue0ouW8leS5i+WQjueahOa2iOaBr+WFg+e0oFxuICAgKiBAcGFyYW0gc3RhcnRJbmRleCDlvIDlp4vliKDpmaTnmoTntKLlvJXvvIjljIXlkKvor6XntKLlvJXvvIlcbiAgICovXG4gIHByaXZhdGUgcmVtb3ZlTWVzc2FnZXNGcm9tRE9NKHN0YXJ0SW5kZXg6IG51bWJlcik6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBtZXNzYWdlc0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGF0TWVzc2FnZXMnKTtcbiAgICAgIGlmICghbWVzc2FnZXNDb250YWluZXIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign5om+5LiN5Yiw5raI5oGv5a655ZmoICNjaGF0TWVzc2FnZXMnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBtZXNzYWdlRWxlbWVudHMgPSBBcnJheS5mcm9tKG1lc3NhZ2VzQ29udGFpbmVyLmNoaWxkcmVuKTtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5eR77iPIOWHhuWkh+WIoOmZpERPTeS4ree0ouW8lSAke3N0YXJ0SW5kZXh9IOS5i+WQjueahOa2iOaBr+WFg+e0oGApO1xuICAgICAgY29uc29sZS5sb2coYCAgLSBET03kuK3mgLvmtojmga/lhYPntKDmlbA6ICR7bWVzc2FnZUVsZW1lbnRzLmxlbmd0aH1gKTtcbiAgICAgIGNvbnNvbGUubG9nKGAgIC0g6ZyA6KaB5Yig6Zmk55qE5YWD57Sg5pWwOiAke21lc3NhZ2VFbGVtZW50cy5sZW5ndGggLSBzdGFydEluZGV4fWApO1xuXG4gICAgICAvLyDku47lkI7lvoDliY3liKDpmaTvvIzpgb/lhY3ntKLlvJXlj5jljJbnmoTpl67pophcbiAgICAgIGZvciAobGV0IGkgPSBtZXNzYWdlRWxlbWVudHMubGVuZ3RoIC0gMTsgaSA+PSBzdGFydEluZGV4OyBpLS0pIHtcbiAgICAgICAgY29uc3QgZWxlbWVudFRvUmVtb3ZlID0gbWVzc2FnZUVsZW1lbnRzW2ldO1xuICAgICAgICBpZiAoZWxlbWVudFRvUmVtb3ZlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYCAgLSDliKDpmaRET03lhYPntKDntKLlvJU6ICR7aX1gKTtcbiAgICAgICAgICBlbGVtZW50VG9SZW1vdmUucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ+KchSBET03mtojmga/lhYPntKDliKDpmaTlrozmiJAnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIOWIoOmZpERPTea2iOaBr+WFg+e0oOWksei0pTonLCBlcnJvcik7XG4gICAgICAvLyDlpoLmnpznsr7noa7liKDpmaTlpLHotKXvvIzlm57pgIDliLDph43mlrDmuLLmn5PmlbTkuKrnlYzpnaJcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SEIOWbnumAgOWIsOmHjeaWsOa4suafk+aVtOS4queVjOmdoi4uLicpO1xuICAgICAgdGhpcy5yZW5kZXJDdXJyZW50Q2hhdCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDmiKrmlq3mlofmnKxcbiAgICovXG4gIHByaXZhdGUgdHJ1bmNhdGVUZXh0KHRleHQ6IHN0cmluZywgbWF4TGVuZ3RoOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGlmICh0ZXh0Lmxlbmd0aCA8PSBtYXhMZW5ndGgpIHJldHVybiB0ZXh0O1xuICAgIHJldHVybiB0ZXh0LnN1YnN0cmluZygwLCBtYXhMZW5ndGgpICsgJy4uLic7XG4gIH1cblxuICAvKipcbiAgICog6I635Y+W57yp5pS+566h55CG5Zmo5a6e5L6LXG4gICAqL1xuICBwdWJsaWMgZ2V0U2NhbGVNYW5hZ2VyKCk6IFNjYWxlTWFuYWdlciB7XG4gICAgcmV0dXJuIHRoaXMuc2NhbGVNYW5hZ2VyO1xuICB9XG5cbiAgLyoqXG4gICAqIOiOt+WPluaJk+Wtl+mAn+W6pueuoeeQhuWZqOWunuS+i1xuICAgKi9cbiAgcHVibGljIGdldFR5cGluZ1NwZWVkTWFuYWdlcigpOiBUeXBpbmdTcGVlZE1hbmFnZXIge1xuICAgIHJldHVybiB0aGlzLnR5cGluZ1NwZWVkTWFuYWdlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiDmo4Dmn6XlubblpITnkIbop5LoibLliIfmjaLvvIjlj6/ku6XooqvlpJbpg6josIPnlKjvvIlcbiAgICovXG4gIHB1YmxpYyBjaGVja0NoYXJhY3RlckNoYW5nZSgpOiB2b2lkIHtcbiAgICBjb25zdCBjdXJyZW50Q2hhcklkID0gdGhpcy5nZXRDdXJyZW50Q2hhcmFjdGVySWQoKTtcbiAgICBjb25zb2xlLmxvZyhg8J+UjSDlvZPliY3op5LoibJJRDogJHtjdXJyZW50Q2hhcklkfWApO1xuXG4gICAgLy8g5Y+v5Lul5Zyo6L+Z6YeM5re75Yqg6YC76L6R5p2l5qOA5p+l5piv5ZCm55yf55qE6ZyA6KaB6YeN5paw5Yqg6L29XG4gICAgdGhpcy5oYW5kbGVDaGFyYWN0ZXJDaGFuZ2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmoIflh4bljJbogYrlpKlJROeUqOS6juavlOi+g++8iOWkhOeQhuWkp+Wwj+WGmeWSjOepuuagvOW3ruW8gu+8iVxuICAgKiBAcGFyYW0gY2hhdElkIOiBiuWkqUlEXG4gICAqIEByZXR1cm5zIOagh+WHhuWMlueahOiBiuWkqUlEXG4gICAqL1xuICBwcml2YXRlIG5vcm1hbGl6ZUNoYXRJZEZvckNvbXBhcmlzb24oY2hhdElkOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBjaGF0SWQudHJpbSgpLnJlcGxhY2UoL1xccysvZywgJ18nKS50b0xvd2VyQ2FzZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOS7juiBiuWkqeWQjeensOS4reaPkOWPluinkuiJsuWQjeensFxuICAgKiBAcGFyYW0gY2hhdE5hbWUg6IGK5aSp5ZCN56ew77yI5aaCXCLlkozlsI/mmI7nmoTogYrlpKlcIu+8iVxuICAgKiBAcmV0dXJucyDop5LoibLlkI3np7DvvIjlpoJcIuWwj+aYjlwi77yJXG4gICAqL1xuICBwcml2YXRlIGV4dHJhY3RDaGFyYWN0ZXJOYW1lRnJvbUNoYXROYW1lKGNoYXROYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIOWMuemFjVwi5ZKMWFhY55qE6IGK5aSpXCLmoLzlvI9cbiAgICBjb25zdCBtYXRjaCA9IGNoYXROYW1lLm1hdGNoKC9e5ZKMKC4rKeeahOiBiuWkqSQvKTtcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBtYXRjaFsxXTtcbiAgICB9XG4gICAgLy8g5aaC5p6c5LiN5Yy56YWN77yM6L+U5Zue5Y6f5aeL5ZCN56ewXG4gICAgcmV0dXJuIGNoYXROYW1lO1xuICB9XG5cbiAgLyoqXG4gICAqIOWcqOWQiOW5tuaVsOaNruS5i+WJjeajgOa1i+aWsOa2iOaBr1xuICAgKiBAcGFyYW0gbmV3QmVhckNvbnRlbnQg5paw55qEQmVhcuWGheWuuVxuICAgKiBAcmV0dXJucyDpnIDopoHmuLLmn5PnmoTmlrDmtojmga9cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZGV0ZWN0TmV3TWVzc2FnZXNCZWZvcmVNZXJnZShuZXdCZWFyQ29udGVudDogc3RyaW5nKTogUHJvbWlzZTxDaGF0TWVzc2FnZVtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCBuZXdseUFkZGVkTWVzc2FnZXM6IENoYXRNZXNzYWdlW10gPSBbXTtcblxuICAgICAgaWYgKCF0aGlzLmxhc3RCZWFyQ29udGVudCkge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UjSDpppbmrKHop6PmnpBCZWFy5YaF5a6577yM5qOA5p+l5piv5ZCm5pyJ5paw55qEQUnlm57lpI0nKTtcblxuICAgICAgICAvLyDpppbmrKHop6PmnpDvvJrlj6rmuLLmn5PlvZPliY3nlYzpnaLkuK3kuI3lrZjlnKjnmoRBSea2iOaBr1xuICAgICAgICBjb25zdCBuZXdNZXNzYWdlcyA9IHRoaXMubWVzc2FnZVBhcnNlci5wYXJzZUJlYXJDb250ZW50KG5ld0JlYXJDb250ZW50KTtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdNZXNzYWdlcyA9IHRoaXMuZ2V0RXhpc3RpbmdNZXNzYWdlc0Zyb21JbnRlcmZhY2UoKTtcblxuICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBbREVCVUddIOeOsOaciea2iOaBr+aMh+e6uembhuWQiDonLCBBcnJheS5mcm9tKGV4aXN0aW5nTWVzc2FnZXMpKTtcbiAgICAgICAgY29uc29sZS5sb2coJ/CflI0gW0RFQlVHXSDlvZPliY3ogYrlpKlJRDonLCB0aGlzLmN1cnJlbnRDaGF0KTtcblxuICAgICAgICBmb3IgKGNvbnN0IFtjaGF0SWQsIGNoYXREYXRhXSBvZiBhd2FpdCBuZXdNZXNzYWdlcykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SNIFtERUJVR10g5qOA5p+l6IGK5aSpIFwiJHtjaGF0SWR9XCIg55qE5raI5oGvYCk7XG4gICAgICAgICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIGNoYXREYXRhLm1lc3NhZ2VzKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlRmluZ2VycHJpbnQgPSB0aGlzLmdlbmVyYXRlTWVzc2FnZUZpbmdlcnByaW50KG1lc3NhZ2UpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgIGDwn5SNIFtERUJVR10g5raI5oGv5oyH57q5OiBcIiR7bWVzc2FnZUZpbmdlcnByaW50fVwiLCDlj5HpgIHogIU6IFwiJHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnNlbmRlclxuICAgICAgICAgICAgICB9XCIsIOWGheWuuTogXCIke21lc3NhZ2UuY29udGVudC5zdWJzdHJpbmcoMCwgMzApfS4uLlwiYCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIOWPqua3u+WKoOmdnueUqOaIt+a2iOaBr++8iEFJ5Zue5aSN55qE5raI5oGv77yJ5LiU5LiN5Zyo5b2T5YmN55WM6Z2i5Lit55qE5raI5oGvXG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zZW5kZXIgIT09ICd7e3VzZXJ9fScgJiYgbWVzc2FnZS5zZW5kZXIgIT09ICd1c2VyJykge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+UjSBbREVCVUddIOi/meaYr0FJ5raI5oGv77yM5qOA5p+l5piv5ZCm5bey5a2Y5ZyoYCk7XG4gICAgICAgICAgICAgIGlmICghZXhpc3RpbmdNZXNzYWdlcy5oYXMobWVzc2FnZUZpbmdlcnByaW50KSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SNIFtERUJVR10g4pyFIOWPkeeOsOaWsEFJ5raI5oGv77yM5re75Yqg5Yiw5riy5p+T6Zif5YiXYCk7XG4gICAgICAgICAgICAgICAgbmV3bHlBZGRlZE1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYPCflI0gW0RFQlVHXSDinYwgQUnmtojmga/lt7LlrZjlnKjvvIzot7Pov4dgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYPCflI0gW0RFQlVHXSDov5nmmK/nlKjmiLfmtojmga/vvIzot7Pov4dgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOmdnummluasoeino+aekO+8mui/m+ihjOW3ruW8guajgOa1i1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UjSDov5vooYxCZWFy5YaF5a655beu5byC5qOA5rWLJyk7XG5cbiAgICAgICAgY29uc3Qgb2xkTWVzc2FnZXMgPSB0aGlzLm1lc3NhZ2VQYXJzZXIucGFyc2VCZWFyQ29udGVudCh0aGlzLmxhc3RCZWFyQ29udGVudCk7XG4gICAgICAgIGNvbnN0IG5ld01lc3NhZ2VzID0gdGhpcy5tZXNzYWdlUGFyc2VyLnBhcnNlQmVhckNvbnRlbnQobmV3QmVhckNvbnRlbnQpO1xuXG4gICAgICAgIC8vIOaJvuWHuuaWsOWinueahOa2iOaBr1xuICAgICAgICBuZXdseUFkZGVkTWVzc2FnZXMgPSB0aGlzLmZpbmROZXdNZXNzYWdlcyhhd2FpdCBvbGRNZXNzYWdlcywgYXdhaXQgbmV3TWVzc2FnZXMpO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZyhg8J+UjSBbREVCVUddIOacgOe7iOaWsOa2iOaBr+aVsOmHjzogJHtuZXdseUFkZGVkTWVzc2FnZXMubGVuZ3RofWApO1xuICAgICAgaWYgKG5ld2x5QWRkZWRNZXNzYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn4aVIOWPkeeOsCAke25ld2x5QWRkZWRNZXNzYWdlcy5sZW5ndGh9IOadoeaWsOa2iOaBr2ApO1xuICAgICAgICBuZXdseUFkZGVkTWVzc2FnZXMuZm9yRWFjaCgobXNnLCBpbmRleCkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgYPCfhpUgW0RFQlVHXSDmlrDmtojmga8ke2luZGV4ICsgMX06IOWPkemAgeiAhT1cIiR7bXNnLnNlbmRlcn1cIiwg5YaF5a65PVwiJHttc2cuY29udGVudC5zdWJzdHJpbmcoMCwgNTApfS4uLlwiYCxcbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ld2x5QWRkZWRNZXNzYWdlcztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIOajgOa1i+aWsOa2iOaBr+Wksei0pTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOa4suafk+ajgOa1i+WIsOeahOaWsOa2iOaBr1xuICAgKiBAcGFyYW0gbmV3TWVzc2FnZXMg6ZyA6KaB5riy5p+T55qE5paw5raI5oGvXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHJlbmRlckRldGVjdGVkTmV3TWVzc2FnZXMobmV3TWVzc2FnZXM6IENoYXRNZXNzYWdlW10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAobmV3TWVzc2FnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+UjSDmnKrlj5HnjrDmlrDmtojmga8nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyDnq4vljbPmm7TmlrDmnKror7vmtojmga/orqHmlbDlkozmtojmga/pooTop4jvvIjkuI3nrYnlvoXmuLLmn5PlrozmiJDvvIlcbiAgICBpZiAodGhpcy5jaGF0TGlzdE1hbmFnZXIgJiYgbmV3TWVzc2FnZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc29sZS5sb2coJ/Cfk4og56uL5Y2z5pu05paw5pyq6K+75raI5oGv6K6h5pWwLi4uJywgbmV3TWVzc2FnZXMubGVuZ3RoLCAn5p2h5paw5raI5oGvJyk7XG5cbiAgICAgIC8vIOWFiOabtOaWsGNoYXRMaXN0TWFuYWdlcuS4reeahOaVsOaNru+8jOehruS/nea2iOaBr+mihOiniOiDveiOt+WPluWIsOacgOaWsOa2iOaBr++8iOS4jeaYvuekuueVjOmdou+8iVxuICAgICAgdGhpcy5jaGF0TGlzdE1hbmFnZXIudXBkYXRlQ2hhdERhdGEodGhpcy5jaGF0RGF0YSk7XG5cbiAgICAgIC8vIOS8oOmAkuW9k+WJjeiBiuWkqUlE77yM5aaC5p6c55So5oi35q2j5Zyo6IGK5aSp55WM6Z2i5LitXG4gICAgICBjb25zdCBjdXJyZW50Q2hhdElkID0gdGhpcy5jdXJyZW50SW50ZXJmYWNlID09PSAnY2hhdCcgPyB0aGlzLmN1cnJlbnRDaGF0IDogdW5kZWZpbmVkO1xuICAgICAgdGhpcy5jaGF0TGlzdE1hbmFnZXIub25OZXdNZXNzYWdlcyhuZXdNZXNzYWdlcywgY3VycmVudENoYXRJZCk7XG5cbiAgICAgIC8vIOiwg+ivleS/oeaBr++8muaYvuekuua2ieWPiueahOiBiuWkqUlEXG4gICAgICBjb25zdCBhZmZlY3RlZENoYXRzID0gWy4uLm5ldyBTZXQobmV3TWVzc2FnZXMubWFwKG0gPT4gbS5jaGF0SWQpKV07XG4gICAgICBjb25zb2xlLmxvZygn8J+TiiDmtonlj4rnmoTogYrlpKk6JywgYWZmZWN0ZWRDaGF0cyk7XG4gICAgICBjb25zb2xlLmxvZygn8J+TliDlvZPliY3ogYrlpKlJRDonLCBjdXJyZW50Q2hhdElkKTtcbiAgICB9XG5cbiAgICAvLyDnhLblkI7muLLmn5PlvZPliY3ogYrlpKnnmoTmlrDmtojmga/vvIjlvILmraXvvIzkuI3pmLvloZ7mnKror7vorqHmlbDmm7TmlrDvvIlcbiAgICBhd2FpdCB0aGlzLnJlbmRlck5ld01lc3NhZ2VzRm9yQ3VycmVudENoYXQobmV3TWVzc2FnZXMpO1xuXG4gICAgLy8g5riy5p+T5a6M5oiQ5ZCO6Kem5Y+R6IGK5aSp6L+B56e75qOA5p+lXG4gICAgY29uc29sZS5sb2coJ/CfjqggW+S4u+W6lOeUqF0g5raI5oGv5riy5p+T5a6M5oiQ77yM5YeG5aSH6Kem5Y+R6IGK5aSp6L+B56e75qOA5p+lJyk7XG4gICAgYXdhaXQgdGhpcy50cmlnZ2VyQ2hhdE1pZ3JhdGlvbkNoZWNrKCk7XG4gIH1cblxuICAvKipcbiAgICog5qOA5p+l5piv5ZCm5piv56m655qEQmVhcuWGheWuue+8iOeUqOS6juWIpOaWreaYr+WQpuaYr+esrOS4gOS4qkJlYXLmpbzlsYLvvIlcbiAgICovXG4gIHByaXZhdGUgaXNFbXB0eUJlYXJDb250ZW50KCk6IGJvb2xlYW4ge1xuICAgIC8vIOajgOafpeaYr+WQpuacieS7u+S9leiBiuWkqeaVsOaNruWMheWQq+a2iOaBr1xuICAgIGZvciAoY29uc3QgWywgY2hhdERhdGFdIG9mIHRoaXMuY2hhdERhdGEpIHtcbiAgICAgIGlmIChjaGF0RGF0YS5tZXNzYWdlcyAmJiBjaGF0RGF0YS5tZXNzYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICog5qOA5p+l5piv5ZCm5a2Y5Zyo5aSa5LiqQmVhcualvOWxglxuICAgKiDpgJrov4fmo4Dmn6Xljoblj7Lmtojmga/kuK3mmK/lkKbmnInlpJrkuKrljIXlkKs8YmVhcj7moIfnrb7nmoTmpbzlsYJcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgaGFzTXVsdGlwbGVCZWFyRmxvb3JzKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICAvLyDojrflj5bmiYDmnInljoblj7Lmtojmga9cbiAgICAgIGNvbnN0IGFsbE1lc3NhZ2VzID0gZ2V0Q2hhdE1lc3NhZ2VzKCcwLXt7bGFzdE1lc3NhZ2VJZH19Jyk7XG4gICAgICBpZiAoIWFsbE1lc3NhZ2VzIHx8IGFsbE1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIOe7n+iuoeWMheWQqzxiZWFyPuagh+etvueahOalvOWxguaVsOmHj1xuICAgICAgbGV0IGJlYXJGbG9vckNvdW50ID0gMDtcbiAgICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBhbGxNZXNzYWdlcykge1xuICAgICAgICBpZiAobWVzc2FnZS5tZXNzYWdlICYmIG1lc3NhZ2UubWVzc2FnZS5pbmNsdWRlcygnPGJlYXI+JykpIHtcbiAgICAgICAgICBiZWFyRmxvb3JDb3VudCsrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKGDwn5SNIOajgOa1i+WIsCAke2JlYXJGbG9vckNvdW50fSDkuKpCZWFy5qW85bGCYCk7XG4gICAgICByZXR1cm4gYmVhckZsb29yQ291bnQgPiAxO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwg5qOA5p+lQmVhcualvOWxguaVsOmHj+Wksei0pTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOabtOaWsOeVjOmdouaVsOaNru+8iOeUqOS6juaYvuekuu+8ie+8jOS4jeW9seWTjealvOWxguS/neWtmOeahOWGheWuuVxuICAgKiDov5nmoLflj6/ku6XlnKjov4Hnp7vlip/og73npoHnlKjml7bkv53mjIHnlYzpnaLmlbDmja7lkIzmraXvvIzlkIzml7bmpbzlsYLlj6rkv53lrZjmlrDmtojmga9cbiAgICovXG4gIHByaXZhdGUgdXBkYXRlSW50ZXJmYWNlRGF0YVdpdGhOZXdNZXNzYWdlcyhuZXdNZXNzYWdlczogTWFwPHN0cmluZywgQ2hhdERhdGE+KTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ/CflIQg5pu05paw55WM6Z2i5pWw5o2u5Lul5L+d5oyB5pi+56S65ZCM5q2lJyk7XG5cbiAgICBmb3IgKGNvbnN0IFtjaGF0SWQsIG5ld0NoYXREYXRhXSBvZiBuZXdNZXNzYWdlcykge1xuICAgICAgY29uc3QgZXhpc3RpbmdDaGF0RGF0YSA9IHRoaXMuY2hhdERhdGEuZ2V0KGNoYXRJZCk7XG5cbiAgICAgIGlmIChleGlzdGluZ0NoYXREYXRhKSB7XG4gICAgICAgIC8vIOWmguaenOiBiuWkqeW3suWtmOWcqO+8jOWQiOW5tua2iOaBr++8iOWOu+mHjeW5tuaMieaXtumXtOaOkuW6j++8iVxuICAgICAgICBjb25zdCBtZXJnZWRNZXNzYWdlcyA9IHRoaXMubWVyZ2VNZXNzYWdlcyhleGlzdGluZ0NoYXREYXRhLm1lc3NhZ2VzLCBuZXdDaGF0RGF0YS5tZXNzYWdlcyk7XG4gICAgICAgIGV4aXN0aW5nQ2hhdERhdGEubWVzc2FnZXMgPSBtZXJnZWRNZXNzYWdlcztcbiAgICAgICAgZXhpc3RpbmdDaGF0RGF0YS5sYXN0TWVzc2FnZSA9XG4gICAgICAgICAgbWVyZ2VkTWVzc2FnZXMubGVuZ3RoID4gMFxuICAgICAgICAgICAgPyB0aGlzLm1lc3NhZ2VQYXJzZXIuZm9ybWF0TGFzdE1lc3NhZ2UobWVyZ2VkTWVzc2FnZXNbbWVyZ2VkTWVzc2FnZXMubGVuZ3RoIC0gMV0pXG4gICAgICAgICAgICA6ICcnO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5OdIOeVjOmdouaVsOaNru+8muabtOaWsOiBiuWkqSAke2NoYXRJZH3vvIznjrDmnIkgJHttZXJnZWRNZXNzYWdlcy5sZW5ndGh9IOadoea2iOaBr2ApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8g5aaC5p6c5piv5paw6IGK5aSp77yM55u05o6l5re75YqgXG4gICAgICAgIHRoaXMuY2hhdERhdGEuc2V0KGNoYXRJZCwgbmV3Q2hhdERhdGEpO1xuICAgICAgICBjb25zb2xlLmxvZyhg8J+GlSDnlYzpnaLmlbDmja7vvJrmt7vliqDmlrDogYrlpKkgJHtjaGF0SWR977yM5YyF5ZCrICR7bmV3Q2hhdERhdGEubWVzc2FnZXMubGVuZ3RofSDmnaHmtojmga9gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygn4pyFIOeVjOmdouaVsOaNruabtOaWsOWujOaIkO+8jOeUqOaIt+eVjOmdouWwhuaYvuekuuacgOaWsOa2iOaBrycpO1xuICB9XG59XG5cbi8vIOWFqOWxgOWPmOmHj+WjsOaYjlxubGV0IGJlYXJDaGF0TWFuYWdlcjogQmVhckNoYXRNYW5hZ2VyIHwgbnVsbCA9IG51bGw7XG5cbi8vIOWIneWni+WMlueuoeeQhuWZqCAtIOWPquWunuS+i+WMluS4gOasoVxuJCgoKSA9PiB7XG4gIGlmICghYmVhckNoYXRNYW5hZ2VyKSB7XG4gICAgLy8g5Yid5aeL5YyWQXZhdGFyU291cmNlU2VydmljZVxuICAgIHRyeSB7XG4gICAgICAvLyDlsIZhdmF0YXJTb3VyY2VTZXJ2aWNl5pq06Zyy5Yiw5YWo5bGA77yM5L6/5LqO5YW25LuW5qih5Z2X5L2/55SoXG4gICAgICAod2luZG93IGFzIGFueSkuYXZhdGFyU291cmNlU2VydmljZSA9IGF2YXRhclNvdXJjZVNlcnZpY2U7XG4gICAgICBjb25zb2xlLmxvZygn4pyFIEF2YXRhclNvdXJjZVNlcnZpY2Xlt7LliJ3lp4vljJYnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEF2YXRhclNvdXJjZVNlcnZpY2XliJ3lp4vljJblpLHotKU6JywgZXJyb3IpO1xuICAgIH1cblxuICAgIC8vIOWIm+W7uuWkmuS6keeGiuiBiuWkqeeuoeeQhuWZqOWunuS+i1xuICAgIGJlYXJDaGF0TWFuYWdlciA9IG5ldyBCZWFyQ2hhdE1hbmFnZXIoKTtcblxuICAgIC8vIOWwhuWunuS+i+aatOmcsuWIsOWFqOWxgO+8jOS+v+S6juiwg+ivleWSjOWklumDqOiuv+mXrlxuICAgICh3aW5kb3cgYXMgYW55KS5iZWFyQ2hhdE1hbmFnZXIgPSBiZWFyQ2hhdE1hbmFnZXI7XG5cbiAgICAvLyDmmrTpnLLnrqHnkIblmajliLDlhajlsYDvvIzkvr/kuo7mtYvor5VcbiAgICAod2luZG93IGFzIGFueSkuc2NhbGVNYW5hZ2VyID0gYmVhckNoYXRNYW5hZ2VyLmdldFNjYWxlTWFuYWdlcigpO1xuICAgICh3aW5kb3cgYXMgYW55KS50eXBpbmdTcGVlZE1hbmFnZXIgPSBiZWFyQ2hhdE1hbmFnZXIuZ2V0VHlwaW5nU3BlZWRNYW5hZ2VyKCk7XG5cbiAgICBjb25zb2xlLmxvZygn5aSa5LqR54aK6IGK5aSp55WM6Z2i5bey5Yid5aeL5YyWJyk7XG5cbiAgICAvLyDosIPor5XmnKror7vmtojmga/lip/og71cbiAgICAod2luZG93IGFzIGFueSkuZGVidWdVbnJlYWRNZXNzYWdlcyA9ICgpID0+IHtcbiAgICAgIGlmIChiZWFyQ2hhdE1hbmFnZXIgJiYgYmVhckNoYXRNYW5hZ2VyLmNoYXRMaXN0TWFuYWdlcikge1xuICAgICAgICBjb25zdCB1bnJlYWRNYW5hZ2VyID0gYmVhckNoYXRNYW5hZ2VyLmNoYXRMaXN0TWFuYWdlci5nZXRVbnJlYWRNZXNzYWdlTWFuYWdlcigpO1xuICAgICAgICBjb25zb2xlLmxvZygn8J+TiiDmnKror7vmtojmga/osIPor5Xkv6Hmga86Jyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCctIOaAu+acquivu+aVsDonLCB1bnJlYWRNYW5hZ2VyLmdldFRvdGFsVW5yZWFkQ291bnQoKSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCctIOaJgOacieacquivu+iuoeaVsDonLCBPYmplY3QuZnJvbUVudHJpZXModW5yZWFkTWFuYWdlci5nZXRBbGxVbnJlYWRDb3VudHMoKSkpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRvdGFsVW5yZWFkOiB1bnJlYWRNYW5hZ2VyLmdldFRvdGFsVW5yZWFkQ291bnQoKSxcbiAgICAgICAgICBhbGxDb3VudHM6IE9iamVjdC5mcm9tRW50cmllcyh1bnJlYWRNYW5hZ2VyLmdldEFsbFVucmVhZENvdW50cygpKSxcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCDmnKror7vmtojmga/nrqHnkIblmajmnKrliJ3lp4vljJYnKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgKHdpbmRvdyBhcyBhbnkpLmNoZWNrQ2hhcmFjdGVyQ2hhbmdlID0gKCkgPT4ge1xuICAgICAgaWYgKGJlYXJDaGF0TWFuYWdlcikge1xuICAgICAgICByZXR1cm4gYmVhckNoYXRNYW5hZ2VyLmNoZWNrQ2hhcmFjdGVyQ2hhbmdlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgQmVhckNoYXRNYW5hZ2VyIOacquWIneWni+WMlicpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyDmt7vliqDkuIDkuKrnroDljZXnmoTop5LoibLkv6Hmga/mo4Dmn6Xlh73mlbBcbiAgICAod2luZG93IGFzIGFueSkuY2hlY2tDaGFyYWN0ZXIgPSAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnPT09IOeugOWNleinkuiJsuajgOafpSA9PT0nKTtcblxuICAgICAgLy8g5qOA5p+l5ZCE56eN5Y+v6IO955qE6KeS6Imy5L+h5oGv5rqQXG4gICAgICBjb25zdCBjaGVja3MgPSB7XG4gICAgICAgICd0eXBlb2YgVGF2ZXJuSGVscGVyJzogdHlwZW9mIFRhdmVybkhlbHBlcixcbiAgICAgICAgZ2V0Q2hhckRhdGHlh73mlbDlrZjlnKg6IHR5cGVvZiBnZXRDaGFyRGF0YSA9PT0gJ2Z1bmN0aW9uJyxcbiAgICAgICAgZGVsZXRlQ2hhdE1lc3NhZ2Vz5Ye95pWw5a2Y5ZyoOiB0eXBlb2YgZGVsZXRlQ2hhdE1lc3NhZ2VzID09PSAnZnVuY3Rpb24nLFxuICAgICAgICBzZXRDaGF0TWVzc2FnZXPlh73mlbDlrZjlnKg6IHR5cGVvZiBzZXRDaGF0TWVzc2FnZXMgPT09ICdmdW5jdGlvbicsXG5cbiAgICAgICAgdGhpc19jaGlkOiAod2luZG93IGFzIGFueSkudGhpc19jaGlkLFxuICAgICAgICBuYW1lMjogKHdpbmRvdyBhcyBhbnkpLm5hbWUyLFxuICAgICAgICBjaGFyYWN0ZXJz5a2Y5ZyoOiB0eXBlb2YgKHdpbmRvdyBhcyBhbnkpLmNoYXJhY3RlcnMgIT09ICd1bmRlZmluZWQnLFxuICAgICAgfTtcblxuICAgICAgY29uc29sZS50YWJsZShjaGVja3MpO1xuXG4gICAgICAvLyDlsJ3or5Xojrflj5bop5LoibLmlbDmja5cbiAgICAgIGlmICh0eXBlb2YgZ2V0Q2hhckRhdGEgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBjaGFyRGF0YSA9IGdldENoYXJEYXRhKCk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2dldENoYXJEYXRhKCkg57uT5p6cOicsIGNoYXJEYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdnZXRDaGFyRGF0YSgpIOmUmeivrzonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNoZWNrcztcbiAgICB9O1xuXG4gICAgLy8g6LCD6K+V5bel5YW35bey6Z2Z6buY5Yqg6L29XG4gIH1cbn0pO1xuXG4vLyDljbjovb3ml7bmuIXnkIYgLSDpgbXlvqrpobnnm67mqKHlvI9cbiQod2luZG93KS5vbigndW5sb2FkJywgKCkgPT4ge1xuICBjb25zdCBiZWFyQ2hhdE1hbmFnZXIgPSAod2luZG93IGFzIGFueSkuYmVhckNoYXRNYW5hZ2VyO1xuICBpZiAoYmVhckNoYXRNYW5hZ2VyICYmIGJlYXJDaGF0TWFuYWdlci5zb3VuZE1hbmFnZXIpIHtcbiAgICBiZWFyQ2hhdE1hbmFnZXIuc291bmRNYW5hZ2VyLmRlc3Ryb3koKTtcbiAgfVxuICBjb25zb2xlLmxvZygn5aSa5LqR54aK6IGK5aSp55WM6Z2i5bey5Y246L29Jyk7XG59KTtcblxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/多云熊/备份/给rovo的/备份.ts\n\n}");
  },
  jquery: 
  /*!********************!*\
  !*** external "$" ***!
  \********************/ module => {
    module.exports = $;
  }
};

var __webpack_module_cache__ = {};

function __webpack_require__(moduleId) {
  var cachedModule = __webpack_module_cache__[moduleId];
  if (cachedModule !== undefined) {
    return cachedModule.exports;
  }
  var module = __webpack_module_cache__[moduleId] = {
    exports: {}
  };
  __webpack_modules__[moduleId](module, module.exports, __webpack_require__);
  return module.exports;
}

(() => {
  __webpack_require__.n = module => {
    var getter = module && module.__esModule ? () => module["default"] : () => module;
    __webpack_require__.d(getter, {
      a: getter
    });
    return getter;
  };
})();

(() => {
  __webpack_require__.d = (exports, definition) => {
    for (var key in definition) {
      if (__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
        Object.defineProperty(exports, key, {
          enumerable: true,
          get: definition[key]
        });
      }
    }
  };
})();

(() => {
  __webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);
})();

(() => {
  __webpack_require__.r = exports => {
    if (typeof Symbol !== "undefined" && Symbol.toStringTag) {
      Object.defineProperty(exports, Symbol.toStringTag, {
        value: "Module"
      });
    }
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
  };
})();

var __webpack_exports__ = __webpack_require__("./src/多云熊/备份/给rovo的/备份.ts");</script></body>
</html>
